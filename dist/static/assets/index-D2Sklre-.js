var pSe=Object.defineProperty;var CY=n=>{throw TypeError(n)};var mSe=(n,e,t)=>e in n?pSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Fe=(n,e,t)=>mSe(n,typeof e!="symbol"?e+"":e,t),GB=(n,e,t)=>e.has(n)||CY("Cannot "+t);var _=(n,e,t)=>(GB(n,e,"read from private field"),t?t.call(n):e.get(n)),$=(n,e,t)=>e.has(n)?CY("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),U=(n,e,t,r)=>(GB(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),q=(n,e,t)=>(GB(n,e,"access private method"),t);var ma=(n,e,t,r)=>({set _(i){U(n,e,i,t)},get _(){return _(n,e,r)}});function gSe(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function i2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jB={exports:{}},jw={},WB={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MY;function vSe(){if(MY)return $n;MY=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),h=Symbol.iterator;function d(K){return K===null||typeof K!="object"?null:(K=h&&K[h]||K["@@iterator"],typeof K=="function"?K:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(K,te,Y){this.props=K,this.context=te,this.refs=m,this.updater=Y||f}g.prototype.isReactComponent={},g.prototype.setState=function(K,te){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,te,"setState")},g.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function v(){}v.prototype=g.prototype;function b(K,te,Y){this.props=K,this.context=te,this.refs=m,this.updater=Y||f}var S=b.prototype=new v;S.constructor=b,p(S,g.prototype),S.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,T={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function P(K,te,Y){var de,ge={},se=null,he=null;if(te!=null)for(de in te.ref!==void 0&&(he=te.ref),te.key!==void 0&&(se=""+te.key),te)E.call(te,de)&&!M.hasOwnProperty(de)&&(ge[de]=te[de]);var fe=arguments.length-2;if(fe===1)ge.children=Y;else if(1<fe){for(var Ee=Array(fe),Ce=0;Ce<fe;Ce++)Ee[Ce]=arguments[Ce+2];ge.children=Ee}if(K&&K.defaultProps)for(de in fe=K.defaultProps,fe)ge[de]===void 0&&(ge[de]=fe[de]);return{$$typeof:n,type:K,key:se,ref:he,props:ge,_owner:T.current}}function I(K,te){return{$$typeof:n,type:K.type,key:te,ref:K.ref,props:K.props,_owner:K._owner}}function D(K){return typeof K=="object"&&K!==null&&K.$$typeof===n}function R(K){var te={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Y){return te[Y]})}var B=/\/+/g;function k(K,te){return typeof K=="object"&&K!==null&&K.key!=null?R(""+K.key):te.toString(36)}function V(K,te,Y,de,ge){var se=typeof K;(se==="undefined"||se==="boolean")&&(K=null);var he=!1;if(K===null)he=!0;else switch(se){case"string":case"number":he=!0;break;case"object":switch(K.$$typeof){case n:case e:he=!0}}if(he)return he=K,ge=ge(he),K=de===""?"."+k(he,0):de,w(ge)?(Y="",K!=null&&(Y=K.replace(B,"$&/")+"/"),V(ge,te,Y,"",function(Ce){return Ce})):ge!=null&&(D(ge)&&(ge=I(ge,Y+(!ge.key||he&&he.key===ge.key?"":(""+ge.key).replace(B,"$&/")+"/")+K)),te.push(ge)),1;if(he=0,de=de===""?".":de+":",w(K))for(var fe=0;fe<K.length;fe++){se=K[fe];var Ee=de+k(se,fe);he+=V(se,te,Y,Ee,ge)}else if(Ee=d(K),typeof Ee=="function")for(K=Ee.call(K),fe=0;!(se=K.next()).done;)se=se.value,Ee=de+k(se,fe++),he+=V(se,te,Y,Ee,ge);else if(se==="object")throw te=String(K),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return he}function G(K,te,Y){if(K==null)return K;var de=[],ge=0;return V(K,de,"","",function(se){return te.call(Y,se,ge++)}),de}function F(K){if(K._status===-1){var te=K._result;te=te(),te.then(function(Y){(K._status===0||K._status===-1)&&(K._status=1,K._result=Y)},function(Y){(K._status===0||K._status===-1)&&(K._status=2,K._result=Y)}),K._status===-1&&(K._status=0,K._result=te)}if(K._status===1)return K._result.default;throw K._result}var X={current:null},j={transition:null},Q={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:j,ReactCurrentOwner:T};function H(){throw Error("act(...) is not supported in production builds of React.")}return $n.Children={map:G,forEach:function(K,te,Y){G(K,function(){te.apply(this,arguments)},Y)},count:function(K){var te=0;return G(K,function(){te++}),te},toArray:function(K){return G(K,function(te){return te})||[]},only:function(K){if(!D(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},$n.Component=g,$n.Fragment=t,$n.Profiler=i,$n.PureComponent=b,$n.StrictMode=r,$n.Suspense=l,$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,$n.act=H,$n.cloneElement=function(K,te,Y){if(K==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+K+".");var de=p({},K.props),ge=K.key,se=K.ref,he=K._owner;if(te!=null){if(te.ref!==void 0&&(se=te.ref,he=T.current),te.key!==void 0&&(ge=""+te.key),K.type&&K.type.defaultProps)var fe=K.type.defaultProps;for(Ee in te)E.call(te,Ee)&&!M.hasOwnProperty(Ee)&&(de[Ee]=te[Ee]===void 0&&fe!==void 0?fe[Ee]:te[Ee])}var Ee=arguments.length-2;if(Ee===1)de.children=Y;else if(1<Ee){fe=Array(Ee);for(var Ce=0;Ce<Ee;Ce++)fe[Ce]=arguments[Ce+2];de.children=fe}return{$$typeof:n,type:K.type,key:ge,ref:se,props:de,_owner:he}},$n.createContext=function(K){return K={$$typeof:s,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},K.Provider={$$typeof:a,_context:K},K.Consumer=K},$n.createElement=P,$n.createFactory=function(K){var te=P.bind(null,K);return te.type=K,te},$n.createRef=function(){return{current:null}},$n.forwardRef=function(K){return{$$typeof:o,render:K}},$n.isValidElement=D,$n.lazy=function(K){return{$$typeof:c,_payload:{_status:-1,_result:K},_init:F}},$n.memo=function(K,te){return{$$typeof:u,type:K,compare:te===void 0?null:te}},$n.startTransition=function(K){var te=j.transition;j.transition={};try{K()}finally{j.transition=te}},$n.unstable_act=H,$n.useCallback=function(K,te){return X.current.useCallback(K,te)},$n.useContext=function(K){return X.current.useContext(K)},$n.useDebugValue=function(){},$n.useDeferredValue=function(K){return X.current.useDeferredValue(K)},$n.useEffect=function(K,te){return X.current.useEffect(K,te)},$n.useId=function(){return X.current.useId()},$n.useImperativeHandle=function(K,te,Y){return X.current.useImperativeHandle(K,te,Y)},$n.useInsertionEffect=function(K,te){return X.current.useInsertionEffect(K,te)},$n.useLayoutEffect=function(K,te){return X.current.useLayoutEffect(K,te)},$n.useMemo=function(K,te){return X.current.useMemo(K,te)},$n.useReducer=function(K,te,Y){return X.current.useReducer(K,te,Y)},$n.useRef=function(K){return X.current.useRef(K)},$n.useState=function(K){return X.current.useState(K)},$n.useSyncExternalStore=function(K,te,Y){return X.current.useSyncExternalStore(K,te,Y)},$n.useTransition=function(){return X.current.useTransition()},$n.version="18.3.1",$n}var DY;function Y9(){return DY||(DY=1,WB.exports=vSe()),WB.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IY;function ySe(){if(IY)return jw;IY=1;var n=Y9(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(o,l,u){var c,h={},d=null,f=null;u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(f=l.ref);for(c in l)r.call(l,c)&&!a.hasOwnProperty(c)&&(h[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:o,key:d,ref:f,props:h,_owner:i.current}}return jw.Fragment=t,jw.jsx=s,jw.jsxs=s,jw}var PY;function xSe(){return PY||(PY=1,jB.exports=ySe()),jB.exports}var C=xSe(),ee=Y9();const st=i2(ee),_Se=gSe({__proto__:null,default:st},[ee]);var KD={},XB={exports:{}},To={},$B={exports:{}},YB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LY;function bSe(){return LY||(LY=1,(function(n){function e(j,Q){var H=j.length;j.push(Q);e:for(;0<H;){var K=H-1>>>1,te=j[K];if(0<i(te,Q))j[K]=Q,j[H]=te,H=K;else break e}}function t(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var Q=j[0],H=j.pop();if(H!==Q){j[0]=H;e:for(var K=0,te=j.length,Y=te>>>1;K<Y;){var de=2*(K+1)-1,ge=j[de],se=de+1,he=j[se];if(0>i(ge,H))se<te&&0>i(he,ge)?(j[K]=he,j[se]=H,K=se):(j[K]=ge,j[de]=H,K=de);else if(se<te&&0>i(he,H))j[K]=he,j[se]=H,K=se;else break e}}return Q}function i(j,Q){var H=j.sortIndex-Q.sortIndex;return H!==0?H:j.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();n.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(j){for(var Q=t(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=j)r(u),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(u)}}function w(j){if(m=!1,S(j),!p)if(t(l)!==null)p=!0,F(E);else{var Q=t(u);Q!==null&&X(w,Q.startTime-j)}}function E(j,Q){p=!1,m&&(m=!1,v(P),P=-1),f=!0;var H=d;try{for(S(Q),h=t(l);h!==null&&(!(h.expirationTime>Q)||j&&!R());){var K=h.callback;if(typeof K=="function"){h.callback=null,d=h.priorityLevel;var te=K(h.expirationTime<=Q);Q=n.unstable_now(),typeof te=="function"?h.callback=te:h===t(l)&&r(l),S(Q)}else r(l);h=t(l)}if(h!==null)var Y=!0;else{var de=t(u);de!==null&&X(w,de.startTime-Q),Y=!1}return Y}finally{h=null,d=H,f=!1}}var T=!1,M=null,P=-1,I=5,D=-1;function R(){return!(n.unstable_now()-D<I)}function B(){if(M!==null){var j=n.unstable_now();D=j;var Q=!0;try{Q=M(!0,j)}finally{Q?k():(T=!1,M=null)}}else T=!1}var k;if(typeof b=="function")k=function(){b(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,G=V.port2;V.port1.onmessage=B,k=function(){G.postMessage(null)}}else k=function(){g(B,0)};function F(j){M=j,T||(T=!0,k())}function X(j,Q){P=g(function(){j(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(j){j.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,F(E))},n.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<j?Math.floor(1e3/j):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(j){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var H=d;d=Q;try{return j()}finally{d=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(j,Q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var H=d;d=j;try{return Q()}finally{d=H}},n.unstable_scheduleCallback=function(j,Q,H){var K=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,j){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=H+te,j={id:c++,callback:Q,priorityLevel:j,startTime:H,expirationTime:te,sortIndex:-1},H>K?(j.sortIndex=H,e(u,j),t(l)===null&&j===t(u)&&(m?(v(P),P=-1):m=!0,X(w,H-K))):(j.sortIndex=te,e(l,j),p||f||(p=!0,F(E))),j},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(j){var Q=d;return function(){var H=d;d=Q;try{return j.apply(this,arguments)}finally{d=H}}}})(YB)),YB}var RY;function SSe(){return RY||(RY=1,$B.exports=bSe()),$B.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NY;function wSe(){if(NY)return To;NY=1;var n=Y9(),e=SSe();function t(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,A=1;A<arguments.length;A++)x+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(y,x){s(y,x),s(y+"Capture",x)}function s(y,x){for(i[y]=x,y=0;y<x.length;y++)r.add(x[y])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},h={};function d(y){return l.call(h,y)?!0:l.call(c,y)?!1:u.test(y)?h[y]=!0:(c[y]=!0,!1)}function f(y,x,A,L){if(A!==null&&A.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return L?!1:A!==null?!A.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function p(y,x,A,L){if(x===null||typeof x>"u"||f(y,x,A,L))return!0;if(L)return!1;if(A!==null)switch(A.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function m(y,x,A,L,O,z,J){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=L,this.attributeNamespace=O,this.mustUseProperty=A,this.propertyName=y,this.type=x,this.sanitizeURL=z,this.removeEmptyString=J}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){g[y]=new m(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var x=y[0];g[x]=new m(x,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){g[y]=new m(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){g[y]=new m(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){g[y]=new m(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){g[y]=new m(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){g[y]=new m(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){g[y]=new m(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){g[y]=new m(y,5,!1,y.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!0,!0)});function S(y,x,A,L){var O=g.hasOwnProperty(x)?g[x]:null;(O!==null?O.type!==0:L||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(p(x,A,O,L)&&(A=null),L||O===null?d(x)&&(A===null?y.removeAttribute(x):y.setAttribute(x,""+A)):O.mustUseProperty?y[O.propertyName]=A===null?O.type===3?!1:"":A:(x=O.attributeName,L=O.attributeNamespace,A===null?y.removeAttribute(x):(O=O.type,A=O===3||O===4&&A===!0?"":""+A,L?y.setAttributeNS(L,x,A):y.setAttribute(x,A))))}var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),T=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),R=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),j=Symbol.iterator;function Q(y){return y===null||typeof y!="object"?null:(y=j&&y[j]||y["@@iterator"],typeof y=="function"?y:null)}var H=Object.assign,K;function te(y){if(K===void 0)try{throw Error()}catch(A){var x=A.stack.trim().match(/\n( *(at )?)/);K=x&&x[1]||""}return`
`+K+y}var Y=!1;function de(y,x){if(!y||Y)return"";Y=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(ke){var L=ke}Reflect.construct(y,[],x)}else{try{x.call()}catch(ke){L=ke}y.call(x.prototype)}else{try{throw Error()}catch(ke){L=ke}y()}}catch(ke){if(ke&&L&&typeof ke.stack=="string"){for(var O=ke.stack.split(`
`),z=L.stack.split(`
`),J=O.length-1,oe=z.length-1;1<=J&&0<=oe&&O[J]!==z[oe];)oe--;for(;1<=J&&0<=oe;J--,oe--)if(O[J]!==z[oe]){if(J!==1||oe!==1)do if(J--,oe--,0>oe||O[J]!==z[oe]){var pe=`
`+O[J].replace(" at new "," at ");return y.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",y.displayName)),pe}while(1<=J&&0<=oe);break}}}finally{Y=!1,Error.prepareStackTrace=A}return(y=y?y.displayName||y.name:"")?te(y):""}function ge(y){switch(y.tag){case 5:return te(y.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return y=de(y.type,!1),y;case 11:return y=de(y.type.render,!1),y;case 1:return y=de(y.type,!0),y;default:return""}}function se(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case M:return"Fragment";case T:return"Portal";case I:return"Profiler";case P:return"StrictMode";case k:return"Suspense";case V:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case R:return(y.displayName||"Context")+".Consumer";case D:return(y._context.displayName||"Context")+".Provider";case B:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case G:return x=y.displayName||null,x!==null?x:se(y.type)||"Memo";case F:x=y._payload,y=y._init;try{return se(y(x))}catch{}}return null}function he(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return se(x);case 8:return x===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function fe(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function Ee(y){var x=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Ce(y){var x=Ee(y)?"checked":"value",A=Object.getOwnPropertyDescriptor(y.constructor.prototype,x),L=""+y[x];if(!y.hasOwnProperty(x)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var O=A.get,z=A.set;return Object.defineProperty(y,x,{configurable:!0,get:function(){return O.call(this)},set:function(J){L=""+J,z.call(this,J)}}),Object.defineProperty(y,x,{enumerable:A.enumerable}),{getValue:function(){return L},setValue:function(J){L=""+J},stopTracking:function(){y._valueTracker=null,delete y[x]}}}}function Re(y){y._valueTracker||(y._valueTracker=Ce(y))}function He(y){if(!y)return!1;var x=y._valueTracker;if(!x)return!0;var A=x.getValue(),L="";return y&&(L=Ee(y)?y.checked?"true":"false":y.value),y=L,y!==A?(x.setValue(y),!0):!1}function pt(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}function lt(y,x){var A=x.checked;return H({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:A??y._wrapperState.initialChecked})}function Mt(y,x){var A=x.defaultValue==null?"":x.defaultValue,L=x.checked!=null?x.checked:x.defaultChecked;A=fe(x.value!=null?x.value:A),y._wrapperState={initialChecked:L,initialValue:A,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function mt(y,x){x=x.checked,x!=null&&S(y,"checked",x,!1)}function on(y,x){mt(y,x);var A=fe(x.value),L=x.type;if(A!=null)L==="number"?(A===0&&y.value===""||y.value!=A)&&(y.value=""+A):y.value!==""+A&&(y.value=""+A);else if(L==="submit"||L==="reset"){y.removeAttribute("value");return}x.hasOwnProperty("value")?ln(y,x.type,A):x.hasOwnProperty("defaultValue")&&ln(y,x.type,fe(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(y.defaultChecked=!!x.defaultChecked)}function ce(y,x,A){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var L=x.type;if(!(L!=="submit"&&L!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+y._wrapperState.initialValue,A||x===y.value||(y.value=x),y.defaultValue=x}A=y.name,A!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,A!==""&&(y.name=A)}function ln(y,x,A){(x!=="number"||pt(y.ownerDocument)!==y)&&(A==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+A&&(y.defaultValue=""+A))}var gn=Array.isArray;function Cn(y,x,A,L){if(y=y.options,x){x={};for(var O=0;O<A.length;O++)x["$"+A[O]]=!0;for(A=0;A<y.length;A++)O=x.hasOwnProperty("$"+y[A].value),y[A].selected!==O&&(y[A].selected=O),O&&L&&(y[A].defaultSelected=!0)}else{for(A=""+fe(A),x=null,O=0;O<y.length;O++){if(y[O].value===A){y[O].selected=!0,L&&(y[O].defaultSelected=!0);return}x!==null||y[O].disabled||(x=y[O])}x!==null&&(x.selected=!0)}}function ht(y,x){if(x.dangerouslySetInnerHTML!=null)throw Error(t(91));return H({},x,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function ie(y,x){var A=x.value;if(A==null){if(A=x.children,x=x.defaultValue,A!=null){if(x!=null)throw Error(t(92));if(gn(A)){if(1<A.length)throw Error(t(93));A=A[0]}x=A}x==null&&(x=""),A=x}y._wrapperState={initialValue:fe(A)}}function Z(y,x){var A=fe(x.value),L=fe(x.defaultValue);A!=null&&(A=""+A,A!==y.value&&(y.value=A),x.defaultValue==null&&y.defaultValue!==A&&(y.defaultValue=A)),L!=null&&(y.defaultValue=""+L)}function _e(y){var x=y.textContent;x===y._wrapperState.initialValue&&x!==""&&x!==null&&(y.value=x)}function le(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xe(y,x){return y==null||y==="http://www.w3.org/1999/xhtml"?le(x):y==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var we,$e=(function(y){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,A,L,O){MSApp.execUnsafeLocalFunction(function(){return y(x,A,L,O)})}:y})(function(y,x){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=x;else{for(we=we||document.createElement("div"),we.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=we.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;x.firstChild;)y.appendChild(x.firstChild)}});function Ve(y,x){if(x){var A=y.firstChild;if(A&&A===y.lastChild&&A.nodeType===3){A.nodeValue=x;return}}y.textContent=x}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vt=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(y){Vt.forEach(function(x){x=x+y.charAt(0).toUpperCase()+y.substring(1),ft[x]=ft[y]})});function Ge(y,x,A){return x==null||typeof x=="boolean"||x===""?"":A||typeof x!="number"||x===0||ft.hasOwnProperty(y)&&ft[y]?(""+x).trim():x+"px"}function ot(y,x){y=y.style;for(var A in x)if(x.hasOwnProperty(A)){var L=A.indexOf("--")===0,O=Ge(A,x[A],L);A==="float"&&(A="cssFloat"),L?y.setProperty(A,O):y[A]=O}}var Et=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(y,x){if(x){if(Et[y]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(t(137,y));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(t(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(t(61))}if(x.style!=null&&typeof x.style!="object")throw Error(t(62))}}function nt(y,x){if(y.indexOf("-")===-1)return typeof x.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zt=null;function me(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var yt=null,tt=null,xt=null;function Ze(y){if(y=Dw(y)){if(typeof yt!="function")throw Error(t(280));var x=y.stateNode;x&&(x=hD(x),yt(y.stateNode,y.type,x))}}function Le(y){tt?xt?xt.push(y):xt=[y]:tt=y}function Ye(){if(tt){var y=tt,x=xt;if(xt=tt=null,Ze(y),x)for(y=0;y<x.length;y++)Ze(x[y])}}function Ht(y,x){return y(x)}function Dn(){}var Xn=!1;function gr(y,x,A){if(Xn)return y(x,A);Xn=!0;try{return Ht(y,x,A)}finally{Xn=!1,(tt!==null||xt!==null)&&(Dn(),Ye())}}function Rr(y,x){var A=y.stateNode;if(A===null)return null;var L=hD(A);if(L===null)return null;A=L[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(y=y.type,L=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!L;break e;default:y=!1}if(y)return null;if(A&&typeof A!="function")throw Error(t(231,x,typeof A));return A}var Uc=!1;if(o)try{var Qi={};Object.defineProperty(Qi,"passive",{get:function(){Uc=!0}}),window.addEventListener("test",Qi,Qi),window.removeEventListener("test",Qi,Qi)}catch{Uc=!1}function Za(y,x,A,L,O,z,J,oe,pe){var ke=Array.prototype.slice.call(arguments,3);try{x.apply(A,ke)}catch(qe){this.onError(qe)}}var zc=!1,js=null,cp=!1,zu=null,cw={onError:function(y){zc=!0,js=y}};function j2(y,x,A,L,O,z,J,oe,pe){zc=!1,js=null,Za.apply(cw,arguments)}function W2(y,x,A,L,O,z,J,oe,pe){if(j2.apply(this,arguments),zc){if(zc){var ke=js;zc=!1,js=null}else throw Error(t(198));cp||(cp=!0,zu=ke)}}function Ul(y){var x=y,A=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,(x.flags&4098)!==0&&(A=x.return),y=x.return;while(y)}return x.tag===3?A:null}function hw(y){if(y.tag===13){var x=y.memoizedState;if(x===null&&(y=y.alternate,y!==null&&(x=y.memoizedState)),x!==null)return x.dehydrated}return null}function Vg(y){if(Ul(y)!==y)throw Error(t(188))}function X2(y){var x=y.alternate;if(!x){if(x=Ul(y),x===null)throw Error(t(188));return x!==y?null:y}for(var A=y,L=x;;){var O=A.return;if(O===null)break;var z=O.alternate;if(z===null){if(L=O.return,L!==null){A=L;continue}break}if(O.child===z.child){for(z=O.child;z;){if(z===A)return Vg(O),y;if(z===L)return Vg(O),x;z=z.sibling}throw Error(t(188))}if(A.return!==L.return)A=O,L=z;else{for(var J=!1,oe=O.child;oe;){if(oe===A){J=!0,A=O,L=z;break}if(oe===L){J=!0,L=O,A=z;break}oe=oe.sibling}if(!J){for(oe=z.child;oe;){if(oe===A){J=!0,A=z,L=O;break}if(oe===L){J=!0,L=z,A=O;break}oe=oe.sibling}if(!J)throw Error(t(189))}}if(A.alternate!==L)throw Error(t(190))}if(A.tag!==3)throw Error(t(188));return A.stateNode.current===A?y:x}function dw(y){return y=X2(y),y!==null?$2(y):null}function $2(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=$2(y);if(x!==null)return x;y=y.sibling}return null}var Y2=e.unstable_scheduleCallback,q2=e.unstable_cancelCallback,dO=e.unstable_shouldYield,fO=e.unstable_requestPaint,mi=e.unstable_now,ne=e.unstable_getCurrentPriorityLevel,Se=e.unstable_ImmediatePriority,Oe=e.unstable_UserBlockingPriority,Ne=e.unstable_NormalPriority,De=e.unstable_LowPriority,vt=e.unstable_IdlePriority,Dt=null,ut=null;function zt(y){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Dt,y,void 0,(y.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:Hn,pn=Math.log,tn=Math.LN2;function Hn(y){return y>>>=0,y===0?32:31-(pn(y)/tn|0)|0}var lr=64,jr=4194304;function Nr(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function dr(y,x){var A=y.pendingLanes;if(A===0)return 0;var L=0,O=y.suspendedLanes,z=y.pingedLanes,J=A&268435455;if(J!==0){var oe=J&~O;oe!==0?L=Nr(oe):(z&=J,z!==0&&(L=Nr(z)))}else J=A&~O,J!==0?L=Nr(J):z!==0&&(L=Nr(z));if(L===0)return 0;if(x!==0&&x!==L&&(x&O)===0&&(O=L&-L,z=x&-x,O>=z||O===16&&(z&4194240)!==0))return x;if((L&4)!==0&&(L|=A&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=L;0<x;)A=31-kt(x),O=1<<A,L|=y[A],x&=~O;return L}function nn(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(y,x){for(var A=y.suspendedLanes,L=y.pingedLanes,O=y.expirationTimes,z=y.pendingLanes;0<z;){var J=31-kt(z),oe=1<<J,pe=O[J];pe===-1?((oe&A)===0||(oe&L)!==0)&&(O[J]=nn(oe,x)):pe<=x&&(y.expiredLanes|=oe),z&=~oe}}function nr(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function vs(){var y=lr;return lr<<=1,(lr&4194240)===0&&(lr=64),y}function Vc(y){for(var x=[],A=0;31>A;A++)x.push(y);return x}function da(y,x,A){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-kt(x),y[x]=A}function Hg(y,x){var A=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var L=y.eventTimes;for(y=y.expirationTimes;0<A;){var O=31-kt(A),z=1<<O;x[O]=0,L[O]=-1,y[O]=-1,A&=~z}}function Sr(y,x){var A=y.entangledLanes|=x;for(y=y.entanglements;A;){var L=31-kt(A),O=1<<L;O&x|y[L]&x&&(y[L]|=x),A&=~O}}var Mn=0;function Ws(y){return y&=-y,1<y?4<y?(y&268435455)!==0?16:536870912:4:1}var Da,Ia,vx,Hc,uX,pO=!1,K2=[],hp=null,dp=null,fp=null,fw=new Map,pw=new Map,pp=[],Obe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cX(y,x){switch(y){case"focusin":case"focusout":hp=null;break;case"dragenter":case"dragleave":dp=null;break;case"mouseover":case"mouseout":fp=null;break;case"pointerover":case"pointerout":fw.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":pw.delete(x.pointerId)}}function mw(y,x,A,L,O,z){return y===null||y.nativeEvent!==z?(y={blockedOn:x,domEventName:A,eventSystemFlags:L,nativeEvent:z,targetContainers:[O]},x!==null&&(x=Dw(x),x!==null&&Ia(x)),y):(y.eventSystemFlags|=L,x=y.targetContainers,O!==null&&x.indexOf(O)===-1&&x.push(O),y)}function Bbe(y,x,A,L,O){switch(x){case"focusin":return hp=mw(hp,y,x,A,L,O),!0;case"dragenter":return dp=mw(dp,y,x,A,L,O),!0;case"mouseover":return fp=mw(fp,y,x,A,L,O),!0;case"pointerover":var z=O.pointerId;return fw.set(z,mw(fw.get(z)||null,y,x,A,L,O)),!0;case"gotpointercapture":return z=O.pointerId,pw.set(z,mw(pw.get(z)||null,y,x,A,L,O)),!0}return!1}function hX(y){var x=Gg(y.target);if(x!==null){var A=Ul(x);if(A!==null){if(x=A.tag,x===13){if(x=hw(A),x!==null){y.blockedOn=x,uX(y.priority,function(){vx(A)});return}}else if(x===3&&A.stateNode.current.memoizedState.isDehydrated){y.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}y.blockedOn=null}function Z2(y){if(y.blockedOn!==null)return!1;for(var x=y.targetContainers;0<x.length;){var A=gO(y.domEventName,y.eventSystemFlags,x[0],y.nativeEvent);if(A===null){A=y.nativeEvent;var L=new A.constructor(A.type,A);Zt=L,A.target.dispatchEvent(L),Zt=null}else return x=Dw(A),x!==null&&Ia(x),y.blockedOn=A,!1;x.shift()}return!0}function dX(y,x,A){Z2(y)&&A.delete(x)}function Fbe(){pO=!1,hp!==null&&Z2(hp)&&(hp=null),dp!==null&&Z2(dp)&&(dp=null),fp!==null&&Z2(fp)&&(fp=null),fw.forEach(dX),pw.forEach(dX)}function gw(y,x){y.blockedOn===x&&(y.blockedOn=null,pO||(pO=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Fbe)))}function vw(y){function x(O){return gw(O,y)}if(0<K2.length){gw(K2[0],y);for(var A=1;A<K2.length;A++){var L=K2[A];L.blockedOn===y&&(L.blockedOn=null)}}for(hp!==null&&gw(hp,y),dp!==null&&gw(dp,y),fp!==null&&gw(fp,y),fw.forEach(x),pw.forEach(x),A=0;A<pp.length;A++)L=pp[A],L.blockedOn===y&&(L.blockedOn=null);for(;0<pp.length&&(A=pp[0],A.blockedOn===null);)hX(A),A.blockedOn===null&&pp.shift()}var yx=w.ReactCurrentBatchConfig,Q2=!0;function Ube(y,x,A,L){var O=Mn,z=yx.transition;yx.transition=null;try{Mn=1,mO(y,x,A,L)}finally{Mn=O,yx.transition=z}}function zbe(y,x,A,L){var O=Mn,z=yx.transition;yx.transition=null;try{Mn=4,mO(y,x,A,L)}finally{Mn=O,yx.transition=z}}function mO(y,x,A,L){if(Q2){var O=gO(y,x,A,L);if(O===null)RO(y,x,L,J2,A),cX(y,L);else if(Bbe(O,y,x,A,L))L.stopPropagation();else if(cX(y,L),x&4&&-1<Obe.indexOf(y)){for(;O!==null;){var z=Dw(O);if(z!==null&&Da(z),z=gO(y,x,A,L),z===null&&RO(y,x,L,J2,A),z===O)break;O=z}O!==null&&L.stopPropagation()}else RO(y,x,L,null,A)}}var J2=null;function gO(y,x,A,L){if(J2=null,y=me(L),y=Gg(y),y!==null)if(x=Ul(y),x===null)y=null;else if(A=x.tag,A===13){if(y=hw(x),y!==null)return y;y=null}else if(A===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null);return J2=y,null}function fX(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ne()){case Se:return 1;case Oe:return 4;case Ne:case De:return 16;case vt:return 536870912;default:return 16}default:return 16}}var mp=null,vO=null,eD=null;function pX(){if(eD)return eD;var y,x=vO,A=x.length,L,O="value"in mp?mp.value:mp.textContent,z=O.length;for(y=0;y<A&&x[y]===O[y];y++);var J=A-y;for(L=1;L<=J&&x[A-L]===O[z-L];L++);return eD=O.slice(y,1<L?1-L:void 0)}function tD(y){var x=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&x===13&&(y=13)):y=x,y===10&&(y=13),32<=y||y===13?y:0}function nD(){return!0}function mX(){return!1}function Yo(y){function x(A,L,O,z,J){this._reactName=A,this._targetInst=O,this.type=L,this.nativeEvent=z,this.target=J,this.currentTarget=null;for(var oe in y)y.hasOwnProperty(oe)&&(A=y[oe],this[oe]=A?A(z):z[oe]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?nD:mX,this.isPropagationStopped=mX,this}return H(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=nD)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=nD)},persist:function(){},isPersistent:nD}),x}var xx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yO=Yo(xx),yw=H({},xx,{view:0,detail:0}),Vbe=Yo(yw),xO,_O,xw,rD=H({},yw,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SO,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==xw&&(xw&&y.type==="mousemove"?(xO=y.screenX-xw.screenX,_O=y.screenY-xw.screenY):_O=xO=0,xw=y),xO)},movementY:function(y){return"movementY"in y?y.movementY:_O}}),gX=Yo(rD),Hbe=H({},rD,{dataTransfer:0}),Gbe=Yo(Hbe),jbe=H({},yw,{relatedTarget:0}),bO=Yo(jbe),Wbe=H({},xx,{animationName:0,elapsedTime:0,pseudoElement:0}),Xbe=Yo(Wbe),$be=H({},xx,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),Ybe=Yo($be),qbe=H({},xx,{data:0}),vX=Yo(qbe),Kbe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zbe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qbe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jbe(y){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(y):(y=Qbe[y])?!!x[y]:!1}function SO(){return Jbe}var e1e=H({},yw,{key:function(y){if(y.key){var x=Kbe[y.key]||y.key;if(x!=="Unidentified")return x}return y.type==="keypress"?(y=tD(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?Zbe[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SO,charCode:function(y){return y.type==="keypress"?tD(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?tD(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),t1e=Yo(e1e),n1e=H({},rD,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yX=Yo(n1e),r1e=H({},yw,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SO}),i1e=Yo(r1e),a1e=H({},xx,{propertyName:0,elapsedTime:0,pseudoElement:0}),s1e=Yo(a1e),o1e=H({},rD,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),l1e=Yo(o1e),u1e=[9,13,27,32],wO=o&&"CompositionEvent"in window,_w=null;o&&"documentMode"in document&&(_w=document.documentMode);var c1e=o&&"TextEvent"in window&&!_w,xX=o&&(!wO||_w&&8<_w&&11>=_w),_X=" ",bX=!1;function SX(y,x){switch(y){case"keyup":return u1e.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wX(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var _x=!1;function h1e(y,x){switch(y){case"compositionend":return wX(x);case"keypress":return x.which!==32?null:(bX=!0,_X);case"textInput":return y=x.data,y===_X&&bX?null:y;default:return null}}function d1e(y,x){if(_x)return y==="compositionend"||!wO&&SX(y,x)?(y=pX(),eD=vO=mp=null,_x=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return xX&&x.locale!=="ko"?null:x.data;default:return null}}var f1e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function TX(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x==="input"?!!f1e[y.type]:x==="textarea"}function EX(y,x,A,L){Le(L),x=lD(x,"onChange"),0<x.length&&(A=new yO("onChange","change",null,A,L),y.push({event:A,listeners:x}))}var bw=null,Sw=null;function p1e(y){GX(y,0)}function iD(y){var x=Ax(y);if(He(x))return y}function m1e(y,x){if(y==="change")return x}var AX=!1;if(o){var TO;if(o){var EO="oninput"in document;if(!EO){var CX=document.createElement("div");CX.setAttribute("oninput","return;"),EO=typeof CX.oninput=="function"}TO=EO}else TO=!1;AX=TO&&(!document.documentMode||9<document.documentMode)}function MX(){bw&&(bw.detachEvent("onpropertychange",DX),Sw=bw=null)}function DX(y){if(y.propertyName==="value"&&iD(Sw)){var x=[];EX(x,Sw,y,me(y)),gr(p1e,x)}}function g1e(y,x,A){y==="focusin"?(MX(),bw=x,Sw=A,bw.attachEvent("onpropertychange",DX)):y==="focusout"&&MX()}function v1e(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return iD(Sw)}function y1e(y,x){if(y==="click")return iD(x)}function x1e(y,x){if(y==="input"||y==="change")return iD(x)}function _1e(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var Vu=typeof Object.is=="function"?Object.is:_1e;function ww(y,x){if(Vu(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var A=Object.keys(y),L=Object.keys(x);if(A.length!==L.length)return!1;for(L=0;L<A.length;L++){var O=A[L];if(!l.call(x,O)||!Vu(y[O],x[O]))return!1}return!0}function IX(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function PX(y,x){var A=IX(y);y=0;for(var L;A;){if(A.nodeType===3){if(L=y+A.textContent.length,y<=x&&L>=x)return{node:A,offset:x-y};y=L}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=IX(A)}}function LX(y,x){return y&&x?y===x?!0:y&&y.nodeType===3?!1:x&&x.nodeType===3?LX(y,x.parentNode):"contains"in y?y.contains(x):y.compareDocumentPosition?!!(y.compareDocumentPosition(x)&16):!1:!1}function RX(){for(var y=window,x=pt();x instanceof y.HTMLIFrameElement;){try{var A=typeof x.contentWindow.location.href=="string"}catch{A=!1}if(A)y=x.contentWindow;else break;x=pt(y.document)}return x}function AO(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x&&(x==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||x==="textarea"||y.contentEditable==="true")}function b1e(y){var x=RX(),A=y.focusedElem,L=y.selectionRange;if(x!==A&&A&&A.ownerDocument&&LX(A.ownerDocument.documentElement,A)){if(L!==null&&AO(A)){if(x=L.start,y=L.end,y===void 0&&(y=x),"selectionStart"in A)A.selectionStart=x,A.selectionEnd=Math.min(y,A.value.length);else if(y=(x=A.ownerDocument||document)&&x.defaultView||window,y.getSelection){y=y.getSelection();var O=A.textContent.length,z=Math.min(L.start,O);L=L.end===void 0?z:Math.min(L.end,O),!y.extend&&z>L&&(O=L,L=z,z=O),O=PX(A,z);var J=PX(A,L);O&&J&&(y.rangeCount!==1||y.anchorNode!==O.node||y.anchorOffset!==O.offset||y.focusNode!==J.node||y.focusOffset!==J.offset)&&(x=x.createRange(),x.setStart(O.node,O.offset),y.removeAllRanges(),z>L?(y.addRange(x),y.extend(J.node,J.offset)):(x.setEnd(J.node,J.offset),y.addRange(x)))}}for(x=[],y=A;y=y.parentNode;)y.nodeType===1&&x.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<x.length;A++)y=x[A],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var S1e=o&&"documentMode"in document&&11>=document.documentMode,bx=null,CO=null,Tw=null,MO=!1;function NX(y,x,A){var L=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;MO||bx==null||bx!==pt(L)||(L=bx,"selectionStart"in L&&AO(L)?L={start:L.selectionStart,end:L.selectionEnd}:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection(),L={anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}),Tw&&ww(Tw,L)||(Tw=L,L=lD(CO,"onSelect"),0<L.length&&(x=new yO("onSelect","select",null,x,A),y.push({event:x,listeners:L}),x.target=bx)))}function aD(y,x){var A={};return A[y.toLowerCase()]=x.toLowerCase(),A["Webkit"+y]="webkit"+x,A["Moz"+y]="moz"+x,A}var Sx={animationend:aD("Animation","AnimationEnd"),animationiteration:aD("Animation","AnimationIteration"),animationstart:aD("Animation","AnimationStart"),transitionend:aD("Transition","TransitionEnd")},DO={},kX={};o&&(kX=document.createElement("div").style,"AnimationEvent"in window||(delete Sx.animationend.animation,delete Sx.animationiteration.animation,delete Sx.animationstart.animation),"TransitionEvent"in window||delete Sx.transitionend.transition);function sD(y){if(DO[y])return DO[y];if(!Sx[y])return y;var x=Sx[y],A;for(A in x)if(x.hasOwnProperty(A)&&A in kX)return DO[y]=x[A];return y}var OX=sD("animationend"),BX=sD("animationiteration"),FX=sD("animationstart"),UX=sD("transitionend"),zX=new Map,VX="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gp(y,x){zX.set(y,x),a(x,[y])}for(var IO=0;IO<VX.length;IO++){var PO=VX[IO],w1e=PO.toLowerCase(),T1e=PO[0].toUpperCase()+PO.slice(1);gp(w1e,"on"+T1e)}gp(OX,"onAnimationEnd"),gp(BX,"onAnimationIteration"),gp(FX,"onAnimationStart"),gp("dblclick","onDoubleClick"),gp("focusin","onFocus"),gp("focusout","onBlur"),gp(UX,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ew="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E1e=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ew));function HX(y,x,A){var L=y.type||"unknown-event";y.currentTarget=A,W2(L,x,void 0,y),y.currentTarget=null}function GX(y,x){x=(x&4)!==0;for(var A=0;A<y.length;A++){var L=y[A],O=L.event;L=L.listeners;e:{var z=void 0;if(x)for(var J=L.length-1;0<=J;J--){var oe=L[J],pe=oe.instance,ke=oe.currentTarget;if(oe=oe.listener,pe!==z&&O.isPropagationStopped())break e;HX(O,oe,ke),z=pe}else for(J=0;J<L.length;J++){if(oe=L[J],pe=oe.instance,ke=oe.currentTarget,oe=oe.listener,pe!==z&&O.isPropagationStopped())break e;HX(O,oe,ke),z=pe}}}if(cp)throw y=zu,cp=!1,zu=null,y}function ri(y,x){var A=x[UO];A===void 0&&(A=x[UO]=new Set);var L=y+"__bubble";A.has(L)||(jX(x,y,2,!1),A.add(L))}function LO(y,x,A){var L=0;x&&(L|=4),jX(A,y,L,x)}var oD="_reactListening"+Math.random().toString(36).slice(2);function Aw(y){if(!y[oD]){y[oD]=!0,r.forEach(function(A){A!=="selectionchange"&&(E1e.has(A)||LO(A,!1,y),LO(A,!0,y))});var x=y.nodeType===9?y:y.ownerDocument;x===null||x[oD]||(x[oD]=!0,LO("selectionchange",!1,x))}}function jX(y,x,A,L){switch(fX(x)){case 1:var O=Ube;break;case 4:O=zbe;break;default:O=mO}A=O.bind(null,x,A,y),O=void 0,!Uc||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(O=!0),L?O!==void 0?y.addEventListener(x,A,{capture:!0,passive:O}):y.addEventListener(x,A,!0):O!==void 0?y.addEventListener(x,A,{passive:O}):y.addEventListener(x,A,!1)}function RO(y,x,A,L,O){var z=L;if((x&1)===0&&(x&2)===0&&L!==null)e:for(;;){if(L===null)return;var J=L.tag;if(J===3||J===4){var oe=L.stateNode.containerInfo;if(oe===O||oe.nodeType===8&&oe.parentNode===O)break;if(J===4)for(J=L.return;J!==null;){var pe=J.tag;if((pe===3||pe===4)&&(pe=J.stateNode.containerInfo,pe===O||pe.nodeType===8&&pe.parentNode===O))return;J=J.return}for(;oe!==null;){if(J=Gg(oe),J===null)return;if(pe=J.tag,pe===5||pe===6){L=z=J;continue e}oe=oe.parentNode}}L=L.return}gr(function(){var ke=z,qe=me(A),Je=[];e:{var je=zX.get(y);if(je!==void 0){var Nt=yO,Gt=y;switch(y){case"keypress":if(tD(A)===0)break e;case"keydown":case"keyup":Nt=t1e;break;case"focusin":Gt="focus",Nt=bO;break;case"focusout":Gt="blur",Nt=bO;break;case"beforeblur":case"afterblur":Nt=bO;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=gX;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=Gbe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=i1e;break;case OX:case BX:case FX:Nt=Xbe;break;case UX:Nt=s1e;break;case"scroll":Nt=Vbe;break;case"wheel":Nt=l1e;break;case"copy":case"cut":case"paste":Nt=Ybe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=yX}var $t=(x&4)!==0,Bi=!$t&&y==="scroll",Ae=$t?je!==null?je+"Capture":null:je;$t=[];for(var ye=ke,Ie;ye!==null;){Ie=ye;var at=Ie.stateNode;if(Ie.tag===5&&at!==null&&(Ie=at,Ae!==null&&(at=Rr(ye,Ae),at!=null&&$t.push(Cw(ye,at,Ie)))),Bi)break;ye=ye.return}0<$t.length&&(je=new Nt(je,Gt,null,A,qe),Je.push({event:je,listeners:$t}))}}if((x&7)===0){e:{if(je=y==="mouseover"||y==="pointerover",Nt=y==="mouseout"||y==="pointerout",je&&A!==Zt&&(Gt=A.relatedTarget||A.fromElement)&&(Gg(Gt)||Gt[md]))break e;if((Nt||je)&&(je=qe.window===qe?qe:(je=qe.ownerDocument)?je.defaultView||je.parentWindow:window,Nt?(Gt=A.relatedTarget||A.toElement,Nt=ke,Gt=Gt?Gg(Gt):null,Gt!==null&&(Bi=Ul(Gt),Gt!==Bi||Gt.tag!==5&&Gt.tag!==6)&&(Gt=null)):(Nt=null,Gt=ke),Nt!==Gt)){if($t=gX,at="onMouseLeave",Ae="onMouseEnter",ye="mouse",(y==="pointerout"||y==="pointerover")&&($t=yX,at="onPointerLeave",Ae="onPointerEnter",ye="pointer"),Bi=Nt==null?je:Ax(Nt),Ie=Gt==null?je:Ax(Gt),je=new $t(at,ye+"leave",Nt,A,qe),je.target=Bi,je.relatedTarget=Ie,at=null,Gg(qe)===ke&&($t=new $t(Ae,ye+"enter",Gt,A,qe),$t.target=Ie,$t.relatedTarget=Bi,at=$t),Bi=at,Nt&&Gt)t:{for($t=Nt,Ae=Gt,ye=0,Ie=$t;Ie;Ie=Tx(Ie))ye++;for(Ie=0,at=Ae;at;at=Tx(at))Ie++;for(;0<ye-Ie;)$t=Tx($t),ye--;for(;0<Ie-ye;)Ae=Tx(Ae),Ie--;for(;ye--;){if($t===Ae||Ae!==null&&$t===Ae.alternate)break t;$t=Tx($t),Ae=Tx(Ae)}$t=null}else $t=null;Nt!==null&&WX(Je,je,Nt,$t,!1),Gt!==null&&Bi!==null&&WX(Je,Bi,Gt,$t,!0)}}e:{if(je=ke?Ax(ke):window,Nt=je.nodeName&&je.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&je.type==="file")var Kt=m1e;else if(TX(je))if(AX)Kt=x1e;else{Kt=v1e;var un=g1e}else(Nt=je.nodeName)&&Nt.toLowerCase()==="input"&&(je.type==="checkbox"||je.type==="radio")&&(Kt=y1e);if(Kt&&(Kt=Kt(y,ke))){EX(Je,Kt,A,qe);break e}un&&un(y,je,ke),y==="focusout"&&(un=je._wrapperState)&&un.controlled&&je.type==="number"&&ln(je,"number",je.value)}switch(un=ke?Ax(ke):window,y){case"focusin":(TX(un)||un.contentEditable==="true")&&(bx=un,CO=ke,Tw=null);break;case"focusout":Tw=CO=bx=null;break;case"mousedown":MO=!0;break;case"contextmenu":case"mouseup":case"dragend":MO=!1,NX(Je,A,qe);break;case"selectionchange":if(S1e)break;case"keydown":case"keyup":NX(Je,A,qe)}var cn;if(wO)e:{switch(y){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else _x?SX(y,A)&&(xn="onCompositionEnd"):y==="keydown"&&A.keyCode===229&&(xn="onCompositionStart");xn&&(xX&&A.locale!=="ko"&&(_x||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&_x&&(cn=pX()):(mp=qe,vO="value"in mp?mp.value:mp.textContent,_x=!0)),un=lD(ke,xn),0<un.length&&(xn=new vX(xn,y,null,A,qe),Je.push({event:xn,listeners:un}),cn?xn.data=cn:(cn=wX(A),cn!==null&&(xn.data=cn)))),(cn=c1e?h1e(y,A):d1e(y,A))&&(ke=lD(ke,"onBeforeInput"),0<ke.length&&(qe=new vX("onBeforeInput","beforeinput",null,A,qe),Je.push({event:qe,listeners:ke}),qe.data=cn))}GX(Je,x)})}function Cw(y,x,A){return{instance:y,listener:x,currentTarget:A}}function lD(y,x){for(var A=x+"Capture",L=[];y!==null;){var O=y,z=O.stateNode;O.tag===5&&z!==null&&(O=z,z=Rr(y,A),z!=null&&L.unshift(Cw(y,z,O)),z=Rr(y,x),z!=null&&L.push(Cw(y,z,O))),y=y.return}return L}function Tx(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function WX(y,x,A,L,O){for(var z=x._reactName,J=[];A!==null&&A!==L;){var oe=A,pe=oe.alternate,ke=oe.stateNode;if(pe!==null&&pe===L)break;oe.tag===5&&ke!==null&&(oe=ke,O?(pe=Rr(A,z),pe!=null&&J.unshift(Cw(A,pe,oe))):O||(pe=Rr(A,z),pe!=null&&J.push(Cw(A,pe,oe)))),A=A.return}J.length!==0&&y.push({event:x,listeners:J})}var A1e=/\r\n?/g,C1e=/\u0000|\uFFFD/g;function XX(y){return(typeof y=="string"?y:""+y).replace(A1e,`
`).replace(C1e,"")}function uD(y,x,A){if(x=XX(x),XX(y)!==x&&A)throw Error(t(425))}function cD(){}var NO=null,kO=null;function OO(y,x){return y==="textarea"||y==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var BO=typeof setTimeout=="function"?setTimeout:void 0,M1e=typeof clearTimeout=="function"?clearTimeout:void 0,$X=typeof Promise=="function"?Promise:void 0,D1e=typeof queueMicrotask=="function"?queueMicrotask:typeof $X<"u"?function(y){return $X.resolve(null).then(y).catch(I1e)}:BO;function I1e(y){setTimeout(function(){throw y})}function FO(y,x){var A=x,L=0;do{var O=A.nextSibling;if(y.removeChild(A),O&&O.nodeType===8)if(A=O.data,A==="/$"){if(L===0){y.removeChild(O),vw(x);return}L--}else A!=="$"&&A!=="$?"&&A!=="$!"||L++;A=O}while(A);vw(x)}function vp(y){for(;y!=null;y=y.nextSibling){var x=y.nodeType;if(x===1||x===3)break;if(x===8){if(x=y.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return y}function YX(y){y=y.previousSibling;for(var x=0;y;){if(y.nodeType===8){var A=y.data;if(A==="$"||A==="$!"||A==="$?"){if(x===0)return y;x--}else A==="/$"&&x++}y=y.previousSibling}return null}var Ex=Math.random().toString(36).slice(2),Gc="__reactFiber$"+Ex,Mw="__reactProps$"+Ex,md="__reactContainer$"+Ex,UO="__reactEvents$"+Ex,P1e="__reactListeners$"+Ex,L1e="__reactHandles$"+Ex;function Gg(y){var x=y[Gc];if(x)return x;for(var A=y.parentNode;A;){if(x=A[md]||A[Gc]){if(A=x.alternate,x.child!==null||A!==null&&A.child!==null)for(y=YX(y);y!==null;){if(A=y[Gc])return A;y=YX(y)}return x}y=A,A=y.parentNode}return null}function Dw(y){return y=y[Gc]||y[md],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function Ax(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(t(33))}function hD(y){return y[Mw]||null}var zO=[],Cx=-1;function yp(y){return{current:y}}function ii(y){0>Cx||(y.current=zO[Cx],zO[Cx]=null,Cx--)}function Kr(y,x){Cx++,zO[Cx]=y.current,y.current=x}var xp={},ys=yp(xp),xo=yp(!1),jg=xp;function Mx(y,x){var A=y.type.contextTypes;if(!A)return xp;var L=y.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===x)return L.__reactInternalMemoizedMaskedChildContext;var O={},z;for(z in A)O[z]=x[z];return L&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=O),O}function _o(y){return y=y.childContextTypes,y!=null}function dD(){ii(xo),ii(ys)}function qX(y,x,A){if(ys.current!==xp)throw Error(t(168));Kr(ys,x),Kr(xo,A)}function KX(y,x,A){var L=y.stateNode;if(x=x.childContextTypes,typeof L.getChildContext!="function")return A;L=L.getChildContext();for(var O in L)if(!(O in x))throw Error(t(108,he(y)||"Unknown",O));return H({},A,L)}function fD(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||xp,jg=ys.current,Kr(ys,y),Kr(xo,xo.current),!0}function ZX(y,x,A){var L=y.stateNode;if(!L)throw Error(t(169));A?(y=KX(y,x,jg),L.__reactInternalMemoizedMergedChildContext=y,ii(xo),ii(ys),Kr(ys,y)):ii(xo),Kr(xo,A)}var gd=null,pD=!1,VO=!1;function QX(y){gd===null?gd=[y]:gd.push(y)}function R1e(y){pD=!0,QX(y)}function _p(){if(!VO&&gd!==null){VO=!0;var y=0,x=Mn;try{var A=gd;for(Mn=1;y<A.length;y++){var L=A[y];do L=L(!0);while(L!==null)}gd=null,pD=!1}catch(O){throw gd!==null&&(gd=gd.slice(y+1)),Y2(Se,_p),O}finally{Mn=x,VO=!1}}return null}var Dx=[],Ix=0,mD=null,gD=0,zl=[],Vl=0,Wg=null,vd=1,yd="";function Xg(y,x){Dx[Ix++]=gD,Dx[Ix++]=mD,mD=y,gD=x}function JX(y,x,A){zl[Vl++]=vd,zl[Vl++]=yd,zl[Vl++]=Wg,Wg=y;var L=vd;y=yd;var O=32-kt(L)-1;L&=~(1<<O),A+=1;var z=32-kt(x)+O;if(30<z){var J=O-O%5;z=(L&(1<<J)-1).toString(32),L>>=J,O-=J,vd=1<<32-kt(x)+O|A<<O|L,yd=z+y}else vd=1<<z|A<<O|L,yd=y}function HO(y){y.return!==null&&(Xg(y,1),JX(y,1,0))}function GO(y){for(;y===mD;)mD=Dx[--Ix],Dx[Ix]=null,gD=Dx[--Ix],Dx[Ix]=null;for(;y===Wg;)Wg=zl[--Vl],zl[Vl]=null,yd=zl[--Vl],zl[Vl]=null,vd=zl[--Vl],zl[Vl]=null}var qo=null,Ko=null,li=!1,Hu=null;function e$(y,x){var A=Wl(5,null,null,0);A.elementType="DELETED",A.stateNode=x,A.return=y,x=y.deletions,x===null?(y.deletions=[A],y.flags|=16):x.push(A)}function t$(y,x){switch(y.tag){case 5:var A=y.type;return x=x.nodeType!==1||A.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(y.stateNode=x,qo=y,Ko=vp(x.firstChild),!0):!1;case 6:return x=y.pendingProps===""||x.nodeType!==3?null:x,x!==null?(y.stateNode=x,qo=y,Ko=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(A=Wg!==null?{id:vd,overflow:yd}:null,y.memoizedState={dehydrated:x,treeContext:A,retryLane:1073741824},A=Wl(18,null,null,0),A.stateNode=x,A.return=y,y.child=A,qo=y,Ko=null,!0):!1;default:return!1}}function jO(y){return(y.mode&1)!==0&&(y.flags&128)===0}function WO(y){if(li){var x=Ko;if(x){var A=x;if(!t$(y,x)){if(jO(y))throw Error(t(418));x=vp(A.nextSibling);var L=qo;x&&t$(y,x)?e$(L,A):(y.flags=y.flags&-4097|2,li=!1,qo=y)}}else{if(jO(y))throw Error(t(418));y.flags=y.flags&-4097|2,li=!1,qo=y}}}function n$(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;qo=y}function vD(y){if(y!==qo)return!1;if(!li)return n$(y),li=!0,!1;var x;if((x=y.tag!==3)&&!(x=y.tag!==5)&&(x=y.type,x=x!=="head"&&x!=="body"&&!OO(y.type,y.memoizedProps)),x&&(x=Ko)){if(jO(y))throw r$(),Error(t(418));for(;x;)e$(y,x),x=vp(x.nextSibling)}if(n$(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));e:{for(y=y.nextSibling,x=0;y;){if(y.nodeType===8){var A=y.data;if(A==="/$"){if(x===0){Ko=vp(y.nextSibling);break e}x--}else A!=="$"&&A!=="$!"&&A!=="$?"||x++}y=y.nextSibling}Ko=null}}else Ko=qo?vp(y.stateNode.nextSibling):null;return!0}function r$(){for(var y=Ko;y;)y=vp(y.nextSibling)}function Px(){Ko=qo=null,li=!1}function XO(y){Hu===null?Hu=[y]:Hu.push(y)}var N1e=w.ReactCurrentBatchConfig;function Iw(y,x,A){if(y=A.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(t(309));var L=A.stateNode}if(!L)throw Error(t(147,y));var O=L,z=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===z?x.ref:(x=function(J){var oe=O.refs;J===null?delete oe[z]:oe[z]=J},x._stringRef=z,x)}if(typeof y!="string")throw Error(t(284));if(!A._owner)throw Error(t(290,y))}return y}function yD(y,x){throw y=Object.prototype.toString.call(x),Error(t(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function i$(y){var x=y._init;return x(y._payload)}function a$(y){function x(Ae,ye){if(y){var Ie=Ae.deletions;Ie===null?(Ae.deletions=[ye],Ae.flags|=16):Ie.push(ye)}}function A(Ae,ye){if(!y)return null;for(;ye!==null;)x(Ae,ye),ye=ye.sibling;return null}function L(Ae,ye){for(Ae=new Map;ye!==null;)ye.key!==null?Ae.set(ye.key,ye):Ae.set(ye.index,ye),ye=ye.sibling;return Ae}function O(Ae,ye){return Ae=Mp(Ae,ye),Ae.index=0,Ae.sibling=null,Ae}function z(Ae,ye,Ie){return Ae.index=Ie,y?(Ie=Ae.alternate,Ie!==null?(Ie=Ie.index,Ie<ye?(Ae.flags|=2,ye):Ie):(Ae.flags|=2,ye)):(Ae.flags|=1048576,ye)}function J(Ae){return y&&Ae.alternate===null&&(Ae.flags|=2),Ae}function oe(Ae,ye,Ie,at){return ye===null||ye.tag!==6?(ye=BB(Ie,Ae.mode,at),ye.return=Ae,ye):(ye=O(ye,Ie),ye.return=Ae,ye)}function pe(Ae,ye,Ie,at){var Kt=Ie.type;return Kt===M?qe(Ae,ye,Ie.props.children,at,Ie.key):ye!==null&&(ye.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===F&&i$(Kt)===ye.type)?(at=O(ye,Ie.props),at.ref=Iw(Ae,ye,Ie),at.return=Ae,at):(at=HD(Ie.type,Ie.key,Ie.props,null,Ae.mode,at),at.ref=Iw(Ae,ye,Ie),at.return=Ae,at)}function ke(Ae,ye,Ie,at){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ie.containerInfo||ye.stateNode.implementation!==Ie.implementation?(ye=FB(Ie,Ae.mode,at),ye.return=Ae,ye):(ye=O(ye,Ie.children||[]),ye.return=Ae,ye)}function qe(Ae,ye,Ie,at,Kt){return ye===null||ye.tag!==7?(ye=ev(Ie,Ae.mode,at,Kt),ye.return=Ae,ye):(ye=O(ye,Ie),ye.return=Ae,ye)}function Je(Ae,ye,Ie){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=BB(""+ye,Ae.mode,Ie),ye.return=Ae,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case E:return Ie=HD(ye.type,ye.key,ye.props,null,Ae.mode,Ie),Ie.ref=Iw(Ae,null,ye),Ie.return=Ae,Ie;case T:return ye=FB(ye,Ae.mode,Ie),ye.return=Ae,ye;case F:var at=ye._init;return Je(Ae,at(ye._payload),Ie)}if(gn(ye)||Q(ye))return ye=ev(ye,Ae.mode,Ie,null),ye.return=Ae,ye;yD(Ae,ye)}return null}function je(Ae,ye,Ie,at){var Kt=ye!==null?ye.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Kt!==null?null:oe(Ae,ye,""+Ie,at);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case E:return Ie.key===Kt?pe(Ae,ye,Ie,at):null;case T:return Ie.key===Kt?ke(Ae,ye,Ie,at):null;case F:return Kt=Ie._init,je(Ae,ye,Kt(Ie._payload),at)}if(gn(Ie)||Q(Ie))return Kt!==null?null:qe(Ae,ye,Ie,at,null);yD(Ae,Ie)}return null}function Nt(Ae,ye,Ie,at,Kt){if(typeof at=="string"&&at!==""||typeof at=="number")return Ae=Ae.get(Ie)||null,oe(ye,Ae,""+at,Kt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case E:return Ae=Ae.get(at.key===null?Ie:at.key)||null,pe(ye,Ae,at,Kt);case T:return Ae=Ae.get(at.key===null?Ie:at.key)||null,ke(ye,Ae,at,Kt);case F:var un=at._init;return Nt(Ae,ye,Ie,un(at._payload),Kt)}if(gn(at)||Q(at))return Ae=Ae.get(Ie)||null,qe(ye,Ae,at,Kt,null);yD(ye,at)}return null}function Gt(Ae,ye,Ie,at){for(var Kt=null,un=null,cn=ye,xn=ye=0,Ra=null;cn!==null&&xn<Ie.length;xn++){cn.index>xn?(Ra=cn,cn=null):Ra=cn.sibling;var fr=je(Ae,cn,Ie[xn],at);if(fr===null){cn===null&&(cn=Ra);break}y&&cn&&fr.alternate===null&&x(Ae,cn),ye=z(fr,ye,xn),un===null?Kt=fr:un.sibling=fr,un=fr,cn=Ra}if(xn===Ie.length)return A(Ae,cn),li&&Xg(Ae,xn),Kt;if(cn===null){for(;xn<Ie.length;xn++)cn=Je(Ae,Ie[xn],at),cn!==null&&(ye=z(cn,ye,xn),un===null?Kt=cn:un.sibling=cn,un=cn);return li&&Xg(Ae,xn),Kt}for(cn=L(Ae,cn);xn<Ie.length;xn++)Ra=Nt(cn,Ae,xn,Ie[xn],at),Ra!==null&&(y&&Ra.alternate!==null&&cn.delete(Ra.key===null?xn:Ra.key),ye=z(Ra,ye,xn),un===null?Kt=Ra:un.sibling=Ra,un=Ra);return y&&cn.forEach(function(Dp){return x(Ae,Dp)}),li&&Xg(Ae,xn),Kt}function $t(Ae,ye,Ie,at){var Kt=Q(Ie);if(typeof Kt!="function")throw Error(t(150));if(Ie=Kt.call(Ie),Ie==null)throw Error(t(151));for(var un=Kt=null,cn=ye,xn=ye=0,Ra=null,fr=Ie.next();cn!==null&&!fr.done;xn++,fr=Ie.next()){cn.index>xn?(Ra=cn,cn=null):Ra=cn.sibling;var Dp=je(Ae,cn,fr.value,at);if(Dp===null){cn===null&&(cn=Ra);break}y&&cn&&Dp.alternate===null&&x(Ae,cn),ye=z(Dp,ye,xn),un===null?Kt=Dp:un.sibling=Dp,un=Dp,cn=Ra}if(fr.done)return A(Ae,cn),li&&Xg(Ae,xn),Kt;if(cn===null){for(;!fr.done;xn++,fr=Ie.next())fr=Je(Ae,fr.value,at),fr!==null&&(ye=z(fr,ye,xn),un===null?Kt=fr:un.sibling=fr,un=fr);return li&&Xg(Ae,xn),Kt}for(cn=L(Ae,cn);!fr.done;xn++,fr=Ie.next())fr=Nt(cn,Ae,xn,fr.value,at),fr!==null&&(y&&fr.alternate!==null&&cn.delete(fr.key===null?xn:fr.key),ye=z(fr,ye,xn),un===null?Kt=fr:un.sibling=fr,un=fr);return y&&cn.forEach(function(fSe){return x(Ae,fSe)}),li&&Xg(Ae,xn),Kt}function Bi(Ae,ye,Ie,at){if(typeof Ie=="object"&&Ie!==null&&Ie.type===M&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case E:e:{for(var Kt=Ie.key,un=ye;un!==null;){if(un.key===Kt){if(Kt=Ie.type,Kt===M){if(un.tag===7){A(Ae,un.sibling),ye=O(un,Ie.props.children),ye.return=Ae,Ae=ye;break e}}else if(un.elementType===Kt||typeof Kt=="object"&&Kt!==null&&Kt.$$typeof===F&&i$(Kt)===un.type){A(Ae,un.sibling),ye=O(un,Ie.props),ye.ref=Iw(Ae,un,Ie),ye.return=Ae,Ae=ye;break e}A(Ae,un);break}else x(Ae,un);un=un.sibling}Ie.type===M?(ye=ev(Ie.props.children,Ae.mode,at,Ie.key),ye.return=Ae,Ae=ye):(at=HD(Ie.type,Ie.key,Ie.props,null,Ae.mode,at),at.ref=Iw(Ae,ye,Ie),at.return=Ae,Ae=at)}return J(Ae);case T:e:{for(un=Ie.key;ye!==null;){if(ye.key===un)if(ye.tag===4&&ye.stateNode.containerInfo===Ie.containerInfo&&ye.stateNode.implementation===Ie.implementation){A(Ae,ye.sibling),ye=O(ye,Ie.children||[]),ye.return=Ae,Ae=ye;break e}else{A(Ae,ye);break}else x(Ae,ye);ye=ye.sibling}ye=FB(Ie,Ae.mode,at),ye.return=Ae,Ae=ye}return J(Ae);case F:return un=Ie._init,Bi(Ae,ye,un(Ie._payload),at)}if(gn(Ie))return Gt(Ae,ye,Ie,at);if(Q(Ie))return $t(Ae,ye,Ie,at);yD(Ae,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,ye!==null&&ye.tag===6?(A(Ae,ye.sibling),ye=O(ye,Ie),ye.return=Ae,Ae=ye):(A(Ae,ye),ye=BB(Ie,Ae.mode,at),ye.return=Ae,Ae=ye),J(Ae)):A(Ae,ye)}return Bi}var Lx=a$(!0),s$=a$(!1),xD=yp(null),_D=null,Rx=null,$O=null;function YO(){$O=Rx=_D=null}function qO(y){var x=xD.current;ii(xD),y._currentValue=x}function KO(y,x,A){for(;y!==null;){var L=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,L!==null&&(L.childLanes|=x)):L!==null&&(L.childLanes&x)!==x&&(L.childLanes|=x),y===A)break;y=y.return}}function Nx(y,x){_D=y,$O=Rx=null,y=y.dependencies,y!==null&&y.firstContext!==null&&((y.lanes&x)!==0&&(bo=!0),y.firstContext=null)}function Hl(y){var x=y._currentValue;if($O!==y)if(y={context:y,memoizedValue:x,next:null},Rx===null){if(_D===null)throw Error(t(308));Rx=y,_D.dependencies={lanes:0,firstContext:y}}else Rx=Rx.next=y;return x}var $g=null;function ZO(y){$g===null?$g=[y]:$g.push(y)}function o$(y,x,A,L){var O=x.interleaved;return O===null?(A.next=A,ZO(x)):(A.next=O.next,O.next=A),x.interleaved=A,xd(y,L)}function xd(y,x){y.lanes|=x;var A=y.alternate;for(A!==null&&(A.lanes|=x),A=y,y=y.return;y!==null;)y.childLanes|=x,A=y.alternate,A!==null&&(A.childLanes|=x),A=y,y=y.return;return A.tag===3?A.stateNode:null}var bp=!1;function QO(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l$(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function _d(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function Sp(y,x,A){var L=y.updateQueue;if(L===null)return null;if(L=L.shared,(ur&2)!==0){var O=L.pending;return O===null?x.next=x:(x.next=O.next,O.next=x),L.pending=x,xd(y,A)}return O=L.interleaved,O===null?(x.next=x,ZO(L)):(x.next=O.next,O.next=x),L.interleaved=x,xd(y,A)}function bD(y,x,A){if(x=x.updateQueue,x!==null&&(x=x.shared,(A&4194240)!==0)){var L=x.lanes;L&=y.pendingLanes,A|=L,x.lanes=A,Sr(y,A)}}function u$(y,x){var A=y.updateQueue,L=y.alternate;if(L!==null&&(L=L.updateQueue,A===L)){var O=null,z=null;if(A=A.firstBaseUpdate,A!==null){do{var J={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};z===null?O=z=J:z=z.next=J,A=A.next}while(A!==null);z===null?O=z=x:z=z.next=x}else O=z=x;A={baseState:L.baseState,firstBaseUpdate:O,lastBaseUpdate:z,shared:L.shared,effects:L.effects},y.updateQueue=A;return}y=A.lastBaseUpdate,y===null?A.firstBaseUpdate=x:y.next=x,A.lastBaseUpdate=x}function SD(y,x,A,L){var O=y.updateQueue;bp=!1;var z=O.firstBaseUpdate,J=O.lastBaseUpdate,oe=O.shared.pending;if(oe!==null){O.shared.pending=null;var pe=oe,ke=pe.next;pe.next=null,J===null?z=ke:J.next=ke,J=pe;var qe=y.alternate;qe!==null&&(qe=qe.updateQueue,oe=qe.lastBaseUpdate,oe!==J&&(oe===null?qe.firstBaseUpdate=ke:oe.next=ke,qe.lastBaseUpdate=pe))}if(z!==null){var Je=O.baseState;J=0,qe=ke=pe=null,oe=z;do{var je=oe.lane,Nt=oe.eventTime;if((L&je)===je){qe!==null&&(qe=qe.next={eventTime:Nt,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var Gt=y,$t=oe;switch(je=x,Nt=A,$t.tag){case 1:if(Gt=$t.payload,typeof Gt=="function"){Je=Gt.call(Nt,Je,je);break e}Je=Gt;break e;case 3:Gt.flags=Gt.flags&-65537|128;case 0:if(Gt=$t.payload,je=typeof Gt=="function"?Gt.call(Nt,Je,je):Gt,je==null)break e;Je=H({},Je,je);break e;case 2:bp=!0}}oe.callback!==null&&oe.lane!==0&&(y.flags|=64,je=O.effects,je===null?O.effects=[oe]:je.push(oe))}else Nt={eventTime:Nt,lane:je,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},qe===null?(ke=qe=Nt,pe=Je):qe=qe.next=Nt,J|=je;if(oe=oe.next,oe===null){if(oe=O.shared.pending,oe===null)break;je=oe,oe=je.next,je.next=null,O.lastBaseUpdate=je,O.shared.pending=null}}while(!0);if(qe===null&&(pe=Je),O.baseState=pe,O.firstBaseUpdate=ke,O.lastBaseUpdate=qe,x=O.shared.interleaved,x!==null){O=x;do J|=O.lane,O=O.next;while(O!==x)}else z===null&&(O.shared.lanes=0);Kg|=J,y.lanes=J,y.memoizedState=Je}}function c$(y,x,A){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var L=y[x],O=L.callback;if(O!==null){if(L.callback=null,L=A,typeof O!="function")throw Error(t(191,O));O.call(L)}}}var Pw={},jc=yp(Pw),Lw=yp(Pw),Rw=yp(Pw);function Yg(y){if(y===Pw)throw Error(t(174));return y}function JO(y,x){switch(Kr(Rw,x),Kr(Lw,y),Kr(jc,Pw),y=x.nodeType,y){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:xe(null,"");break;default:y=y===8?x.parentNode:x,x=y.namespaceURI||null,y=y.tagName,x=xe(x,y)}ii(jc),Kr(jc,x)}function kx(){ii(jc),ii(Lw),ii(Rw)}function h$(y){Yg(Rw.current);var x=Yg(jc.current),A=xe(x,y.type);x!==A&&(Kr(Lw,y),Kr(jc,A))}function eB(y){Lw.current===y&&(ii(jc),ii(Lw))}var gi=yp(0);function wD(y){for(var x=y;x!==null;){if(x.tag===13){var A=x.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||A.data==="$?"||A.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var tB=[];function nB(){for(var y=0;y<tB.length;y++)tB[y]._workInProgressVersionPrimary=null;tB.length=0}var TD=w.ReactCurrentDispatcher,rB=w.ReactCurrentBatchConfig,qg=0,vi=null,fa=null,Pa=null,ED=!1,Nw=!1,kw=0,k1e=0;function xs(){throw Error(t(321))}function iB(y,x){if(x===null)return!1;for(var A=0;A<x.length&&A<y.length;A++)if(!Vu(y[A],x[A]))return!1;return!0}function aB(y,x,A,L,O,z){if(qg=z,vi=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,TD.current=y===null||y.memoizedState===null?U1e:z1e,y=A(L,O),Nw){z=0;do{if(Nw=!1,kw=0,25<=z)throw Error(t(301));z+=1,Pa=fa=null,x.updateQueue=null,TD.current=V1e,y=A(L,O)}while(Nw)}if(TD.current=MD,x=fa!==null&&fa.next!==null,qg=0,Pa=fa=vi=null,ED=!1,x)throw Error(t(300));return y}function sB(){var y=kw!==0;return kw=0,y}function Wc(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pa===null?vi.memoizedState=Pa=y:Pa=Pa.next=y,Pa}function Gl(){if(fa===null){var y=vi.alternate;y=y!==null?y.memoizedState:null}else y=fa.next;var x=Pa===null?vi.memoizedState:Pa.next;if(x!==null)Pa=x,fa=y;else{if(y===null)throw Error(t(310));fa=y,y={memoizedState:fa.memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},Pa===null?vi.memoizedState=Pa=y:Pa=Pa.next=y}return Pa}function Ow(y,x){return typeof x=="function"?x(y):x}function oB(y){var x=Gl(),A=x.queue;if(A===null)throw Error(t(311));A.lastRenderedReducer=y;var L=fa,O=L.baseQueue,z=A.pending;if(z!==null){if(O!==null){var J=O.next;O.next=z.next,z.next=J}L.baseQueue=O=z,A.pending=null}if(O!==null){z=O.next,L=L.baseState;var oe=J=null,pe=null,ke=z;do{var qe=ke.lane;if((qg&qe)===qe)pe!==null&&(pe=pe.next={lane:0,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),L=ke.hasEagerState?ke.eagerState:y(L,ke.action);else{var Je={lane:qe,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null};pe===null?(oe=pe=Je,J=L):pe=pe.next=Je,vi.lanes|=qe,Kg|=qe}ke=ke.next}while(ke!==null&&ke!==z);pe===null?J=L:pe.next=oe,Vu(L,x.memoizedState)||(bo=!0),x.memoizedState=L,x.baseState=J,x.baseQueue=pe,A.lastRenderedState=L}if(y=A.interleaved,y!==null){O=y;do z=O.lane,vi.lanes|=z,Kg|=z,O=O.next;while(O!==y)}else O===null&&(A.lanes=0);return[x.memoizedState,A.dispatch]}function lB(y){var x=Gl(),A=x.queue;if(A===null)throw Error(t(311));A.lastRenderedReducer=y;var L=A.dispatch,O=A.pending,z=x.memoizedState;if(O!==null){A.pending=null;var J=O=O.next;do z=y(z,J.action),J=J.next;while(J!==O);Vu(z,x.memoizedState)||(bo=!0),x.memoizedState=z,x.baseQueue===null&&(x.baseState=z),A.lastRenderedState=z}return[z,L]}function d$(){}function f$(y,x){var A=vi,L=Gl(),O=x(),z=!Vu(L.memoizedState,O);if(z&&(L.memoizedState=O,bo=!0),L=L.queue,uB(g$.bind(null,A,L,y),[y]),L.getSnapshot!==x||z||Pa!==null&&Pa.memoizedState.tag&1){if(A.flags|=2048,Bw(9,m$.bind(null,A,L,O,x),void 0,null),La===null)throw Error(t(349));(qg&30)!==0||p$(A,x,O)}return O}function p$(y,x,A){y.flags|=16384,y={getSnapshot:x,value:A},x=vi.updateQueue,x===null?(x={lastEffect:null,stores:null},vi.updateQueue=x,x.stores=[y]):(A=x.stores,A===null?x.stores=[y]:A.push(y))}function m$(y,x,A,L){x.value=A,x.getSnapshot=L,v$(x)&&y$(y)}function g$(y,x,A){return A(function(){v$(x)&&y$(y)})}function v$(y){var x=y.getSnapshot;y=y.value;try{var A=x();return!Vu(y,A)}catch{return!0}}function y$(y){var x=xd(y,1);x!==null&&Xu(x,y,1,-1)}function x$(y){var x=Wc();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ow,lastRenderedState:y},x.queue=y,y=y.dispatch=F1e.bind(null,vi,y),[x.memoizedState,y]}function Bw(y,x,A,L){return y={tag:y,create:x,destroy:A,deps:L,next:null},x=vi.updateQueue,x===null?(x={lastEffect:null,stores:null},vi.updateQueue=x,x.lastEffect=y.next=y):(A=x.lastEffect,A===null?x.lastEffect=y.next=y:(L=A.next,A.next=y,y.next=L,x.lastEffect=y)),y}function _$(){return Gl().memoizedState}function AD(y,x,A,L){var O=Wc();vi.flags|=y,O.memoizedState=Bw(1|x,A,void 0,L===void 0?null:L)}function CD(y,x,A,L){var O=Gl();L=L===void 0?null:L;var z=void 0;if(fa!==null){var J=fa.memoizedState;if(z=J.destroy,L!==null&&iB(L,J.deps)){O.memoizedState=Bw(x,A,z,L);return}}vi.flags|=y,O.memoizedState=Bw(1|x,A,z,L)}function b$(y,x){return AD(8390656,8,y,x)}function uB(y,x){return CD(2048,8,y,x)}function S$(y,x){return CD(4,2,y,x)}function w$(y,x){return CD(4,4,y,x)}function T$(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function E$(y,x,A){return A=A!=null?A.concat([y]):null,CD(4,4,T$.bind(null,x,y),A)}function cB(){}function A$(y,x){var A=Gl();x=x===void 0?null:x;var L=A.memoizedState;return L!==null&&x!==null&&iB(x,L[1])?L[0]:(A.memoizedState=[y,x],y)}function C$(y,x){var A=Gl();x=x===void 0?null:x;var L=A.memoizedState;return L!==null&&x!==null&&iB(x,L[1])?L[0]:(y=y(),A.memoizedState=[y,x],y)}function M$(y,x,A){return(qg&21)===0?(y.baseState&&(y.baseState=!1,bo=!0),y.memoizedState=A):(Vu(A,x)||(A=vs(),vi.lanes|=A,Kg|=A,y.baseState=!0),x)}function O1e(y,x){var A=Mn;Mn=A!==0&&4>A?A:4,y(!0);var L=rB.transition;rB.transition={};try{y(!1),x()}finally{Mn=A,rB.transition=L}}function D$(){return Gl().memoizedState}function B1e(y,x,A){var L=Ap(y);if(A={lane:L,action:A,hasEagerState:!1,eagerState:null,next:null},I$(y))P$(x,A);else if(A=o$(y,x,A,L),A!==null){var O=$s();Xu(A,y,L,O),L$(A,x,L)}}function F1e(y,x,A){var L=Ap(y),O={lane:L,action:A,hasEagerState:!1,eagerState:null,next:null};if(I$(y))P$(x,O);else{var z=y.alternate;if(y.lanes===0&&(z===null||z.lanes===0)&&(z=x.lastRenderedReducer,z!==null))try{var J=x.lastRenderedState,oe=z(J,A);if(O.hasEagerState=!0,O.eagerState=oe,Vu(oe,J)){var pe=x.interleaved;pe===null?(O.next=O,ZO(x)):(O.next=pe.next,pe.next=O),x.interleaved=O;return}}catch{}finally{}A=o$(y,x,O,L),A!==null&&(O=$s(),Xu(A,y,L,O),L$(A,x,L))}}function I$(y){var x=y.alternate;return y===vi||x!==null&&x===vi}function P$(y,x){Nw=ED=!0;var A=y.pending;A===null?x.next=x:(x.next=A.next,A.next=x),y.pending=x}function L$(y,x,A){if((A&4194240)!==0){var L=x.lanes;L&=y.pendingLanes,A|=L,x.lanes=A,Sr(y,A)}}var MD={readContext:Hl,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},U1e={readContext:Hl,useCallback:function(y,x){return Wc().memoizedState=[y,x===void 0?null:x],y},useContext:Hl,useEffect:b$,useImperativeHandle:function(y,x,A){return A=A!=null?A.concat([y]):null,AD(4194308,4,T$.bind(null,x,y),A)},useLayoutEffect:function(y,x){return AD(4194308,4,y,x)},useInsertionEffect:function(y,x){return AD(4,2,y,x)},useMemo:function(y,x){var A=Wc();return x=x===void 0?null:x,y=y(),A.memoizedState=[y,x],y},useReducer:function(y,x,A){var L=Wc();return x=A!==void 0?A(x):x,L.memoizedState=L.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},L.queue=y,y=y.dispatch=B1e.bind(null,vi,y),[L.memoizedState,y]},useRef:function(y){var x=Wc();return y={current:y},x.memoizedState=y},useState:x$,useDebugValue:cB,useDeferredValue:function(y){return Wc().memoizedState=y},useTransition:function(){var y=x$(!1),x=y[0];return y=O1e.bind(null,y[1]),Wc().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,A){var L=vi,O=Wc();if(li){if(A===void 0)throw Error(t(407));A=A()}else{if(A=x(),La===null)throw Error(t(349));(qg&30)!==0||p$(L,x,A)}O.memoizedState=A;var z={value:A,getSnapshot:x};return O.queue=z,b$(g$.bind(null,L,z,y),[y]),L.flags|=2048,Bw(9,m$.bind(null,L,z,A,x),void 0,null),A},useId:function(){var y=Wc(),x=La.identifierPrefix;if(li){var A=yd,L=vd;A=(L&~(1<<32-kt(L)-1)).toString(32)+A,x=":"+x+"R"+A,A=kw++,0<A&&(x+="H"+A.toString(32)),x+=":"}else A=k1e++,x=":"+x+"r"+A.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},z1e={readContext:Hl,useCallback:A$,useContext:Hl,useEffect:uB,useImperativeHandle:E$,useInsertionEffect:S$,useLayoutEffect:w$,useMemo:C$,useReducer:oB,useRef:_$,useState:function(){return oB(Ow)},useDebugValue:cB,useDeferredValue:function(y){var x=Gl();return M$(x,fa.memoizedState,y)},useTransition:function(){var y=oB(Ow)[0],x=Gl().memoizedState;return[y,x]},useMutableSource:d$,useSyncExternalStore:f$,useId:D$,unstable_isNewReconciler:!1},V1e={readContext:Hl,useCallback:A$,useContext:Hl,useEffect:uB,useImperativeHandle:E$,useInsertionEffect:S$,useLayoutEffect:w$,useMemo:C$,useReducer:lB,useRef:_$,useState:function(){return lB(Ow)},useDebugValue:cB,useDeferredValue:function(y){var x=Gl();return fa===null?x.memoizedState=y:M$(x,fa.memoizedState,y)},useTransition:function(){var y=lB(Ow)[0],x=Gl().memoizedState;return[y,x]},useMutableSource:d$,useSyncExternalStore:f$,useId:D$,unstable_isNewReconciler:!1};function Gu(y,x){if(y&&y.defaultProps){x=H({},x),y=y.defaultProps;for(var A in y)x[A]===void 0&&(x[A]=y[A]);return x}return x}function hB(y,x,A,L){x=y.memoizedState,A=A(L,x),A=A==null?x:H({},x,A),y.memoizedState=A,y.lanes===0&&(y.updateQueue.baseState=A)}var DD={isMounted:function(y){return(y=y._reactInternals)?Ul(y)===y:!1},enqueueSetState:function(y,x,A){y=y._reactInternals;var L=$s(),O=Ap(y),z=_d(L,O);z.payload=x,A!=null&&(z.callback=A),x=Sp(y,z,O),x!==null&&(Xu(x,y,O,L),bD(x,y,O))},enqueueReplaceState:function(y,x,A){y=y._reactInternals;var L=$s(),O=Ap(y),z=_d(L,O);z.tag=1,z.payload=x,A!=null&&(z.callback=A),x=Sp(y,z,O),x!==null&&(Xu(x,y,O,L),bD(x,y,O))},enqueueForceUpdate:function(y,x){y=y._reactInternals;var A=$s(),L=Ap(y),O=_d(A,L);O.tag=2,x!=null&&(O.callback=x),x=Sp(y,O,L),x!==null&&(Xu(x,y,L,A),bD(x,y,L))}};function R$(y,x,A,L,O,z,J){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(L,z,J):x.prototype&&x.prototype.isPureReactComponent?!ww(A,L)||!ww(O,z):!0}function N$(y,x,A){var L=!1,O=xp,z=x.contextType;return typeof z=="object"&&z!==null?z=Hl(z):(O=_o(x)?jg:ys.current,L=x.contextTypes,z=(L=L!=null)?Mx(y,O):xp),x=new x(A,z),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=DD,y.stateNode=x,x._reactInternals=y,L&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=O,y.__reactInternalMemoizedMaskedChildContext=z),x}function k$(y,x,A,L){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(A,L),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(A,L),x.state!==y&&DD.enqueueReplaceState(x,x.state,null)}function dB(y,x,A,L){var O=y.stateNode;O.props=A,O.state=y.memoizedState,O.refs={},QO(y);var z=x.contextType;typeof z=="object"&&z!==null?O.context=Hl(z):(z=_o(x)?jg:ys.current,O.context=Mx(y,z)),O.state=y.memoizedState,z=x.getDerivedStateFromProps,typeof z=="function"&&(hB(y,x,z,A),O.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(x=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),x!==O.state&&DD.enqueueReplaceState(O,O.state,null),SD(y,A,O,L),O.state=y.memoizedState),typeof O.componentDidMount=="function"&&(y.flags|=4194308)}function Ox(y,x){try{var A="",L=x;do A+=ge(L),L=L.return;while(L);var O=A}catch(z){O=`
Error generating stack: `+z.message+`
`+z.stack}return{value:y,source:x,stack:O,digest:null}}function fB(y,x,A){return{value:y,source:null,stack:A??null,digest:x??null}}function pB(y,x){try{console.error(x.value)}catch(A){setTimeout(function(){throw A})}}var H1e=typeof WeakMap=="function"?WeakMap:Map;function O$(y,x,A){A=_d(-1,A),A.tag=3,A.payload={element:null};var L=x.value;return A.callback=function(){OD||(OD=!0,DB=L),pB(y,x)},A}function B$(y,x,A){A=_d(-1,A),A.tag=3;var L=y.type.getDerivedStateFromError;if(typeof L=="function"){var O=x.value;A.payload=function(){return L(O)},A.callback=function(){pB(y,x)}}var z=y.stateNode;return z!==null&&typeof z.componentDidCatch=="function"&&(A.callback=function(){pB(y,x),typeof L!="function"&&(Tp===null?Tp=new Set([this]):Tp.add(this));var J=x.stack;this.componentDidCatch(x.value,{componentStack:J!==null?J:""})}),A}function F$(y,x,A){var L=y.pingCache;if(L===null){L=y.pingCache=new H1e;var O=new Set;L.set(x,O)}else O=L.get(x),O===void 0&&(O=new Set,L.set(x,O));O.has(A)||(O.add(A),y=nSe.bind(null,y,x,A),x.then(y,y))}function U$(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function z$(y,x,A,L,O){return(y.mode&1)===0?(y===x?y.flags|=65536:(y.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(x=_d(-1,1),x.tag=2,Sp(A,x,1))),A.lanes|=1),y):(y.flags|=65536,y.lanes=O,y)}var G1e=w.ReactCurrentOwner,bo=!1;function Xs(y,x,A,L){x.child=y===null?s$(x,null,A,L):Lx(x,y.child,A,L)}function V$(y,x,A,L,O){A=A.render;var z=x.ref;return Nx(x,O),L=aB(y,x,A,L,z,O),A=sB(),y!==null&&!bo?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~O,bd(y,x,O)):(li&&A&&HO(x),x.flags|=1,Xs(y,x,L,O),x.child)}function H$(y,x,A,L,O){if(y===null){var z=A.type;return typeof z=="function"&&!OB(z)&&z.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(x.tag=15,x.type=z,G$(y,x,z,L,O)):(y=HD(A.type,null,L,x,x.mode,O),y.ref=x.ref,y.return=x,x.child=y)}if(z=y.child,(y.lanes&O)===0){var J=z.memoizedProps;if(A=A.compare,A=A!==null?A:ww,A(J,L)&&y.ref===x.ref)return bd(y,x,O)}return x.flags|=1,y=Mp(z,L),y.ref=x.ref,y.return=x,x.child=y}function G$(y,x,A,L,O){if(y!==null){var z=y.memoizedProps;if(ww(z,L)&&y.ref===x.ref)if(bo=!1,x.pendingProps=L=z,(y.lanes&O)!==0)(y.flags&131072)!==0&&(bo=!0);else return x.lanes=y.lanes,bd(y,x,O)}return mB(y,x,A,L,O)}function j$(y,x,A){var L=x.pendingProps,O=L.children,z=y!==null?y.memoizedState:null;if(L.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kr(Fx,Zo),Zo|=A;else{if((A&1073741824)===0)return y=z!==null?z.baseLanes|A:A,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null,transitions:null},x.updateQueue=null,Kr(Fx,Zo),Zo|=y,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=z!==null?z.baseLanes:A,Kr(Fx,Zo),Zo|=L}else z!==null?(L=z.baseLanes|A,x.memoizedState=null):L=A,Kr(Fx,Zo),Zo|=L;return Xs(y,x,O,A),x.child}function W$(y,x){var A=x.ref;(y===null&&A!==null||y!==null&&y.ref!==A)&&(x.flags|=512,x.flags|=2097152)}function mB(y,x,A,L,O){var z=_o(A)?jg:ys.current;return z=Mx(x,z),Nx(x,O),A=aB(y,x,A,L,z,O),L=sB(),y!==null&&!bo?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~O,bd(y,x,O)):(li&&L&&HO(x),x.flags|=1,Xs(y,x,A,O),x.child)}function X$(y,x,A,L,O){if(_o(A)){var z=!0;fD(x)}else z=!1;if(Nx(x,O),x.stateNode===null)PD(y,x),N$(x,A,L),dB(x,A,L,O),L=!0;else if(y===null){var J=x.stateNode,oe=x.memoizedProps;J.props=oe;var pe=J.context,ke=A.contextType;typeof ke=="object"&&ke!==null?ke=Hl(ke):(ke=_o(A)?jg:ys.current,ke=Mx(x,ke));var qe=A.getDerivedStateFromProps,Je=typeof qe=="function"||typeof J.getSnapshotBeforeUpdate=="function";Je||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(oe!==L||pe!==ke)&&k$(x,J,L,ke),bp=!1;var je=x.memoizedState;J.state=je,SD(x,L,J,O),pe=x.memoizedState,oe!==L||je!==pe||xo.current||bp?(typeof qe=="function"&&(hB(x,A,qe,L),pe=x.memoizedState),(oe=bp||R$(x,A,oe,L,je,pe,ke))?(Je||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(x.flags|=4194308)):(typeof J.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=L,x.memoizedState=pe),J.props=L,J.state=pe,J.context=ke,L=oe):(typeof J.componentDidMount=="function"&&(x.flags|=4194308),L=!1)}else{J=x.stateNode,l$(y,x),oe=x.memoizedProps,ke=x.type===x.elementType?oe:Gu(x.type,oe),J.props=ke,Je=x.pendingProps,je=J.context,pe=A.contextType,typeof pe=="object"&&pe!==null?pe=Hl(pe):(pe=_o(A)?jg:ys.current,pe=Mx(x,pe));var Nt=A.getDerivedStateFromProps;(qe=typeof Nt=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(oe!==Je||je!==pe)&&k$(x,J,L,pe),bp=!1,je=x.memoizedState,J.state=je,SD(x,L,J,O);var Gt=x.memoizedState;oe!==Je||je!==Gt||xo.current||bp?(typeof Nt=="function"&&(hB(x,A,Nt,L),Gt=x.memoizedState),(ke=bp||R$(x,A,ke,L,je,Gt,pe)||!1)?(qe||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(L,Gt,pe),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(L,Gt,pe)),typeof J.componentDidUpdate=="function"&&(x.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof J.componentDidUpdate!="function"||oe===y.memoizedProps&&je===y.memoizedState||(x.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||oe===y.memoizedProps&&je===y.memoizedState||(x.flags|=1024),x.memoizedProps=L,x.memoizedState=Gt),J.props=L,J.state=Gt,J.context=pe,L=ke):(typeof J.componentDidUpdate!="function"||oe===y.memoizedProps&&je===y.memoizedState||(x.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||oe===y.memoizedProps&&je===y.memoizedState||(x.flags|=1024),L=!1)}return gB(y,x,A,L,z,O)}function gB(y,x,A,L,O,z){W$(y,x);var J=(x.flags&128)!==0;if(!L&&!J)return O&&ZX(x,A,!1),bd(y,x,z);L=x.stateNode,G1e.current=x;var oe=J&&typeof A.getDerivedStateFromError!="function"?null:L.render();return x.flags|=1,y!==null&&J?(x.child=Lx(x,y.child,null,z),x.child=Lx(x,null,oe,z)):Xs(y,x,oe,z),x.memoizedState=L.state,O&&ZX(x,A,!0),x.child}function $$(y){var x=y.stateNode;x.pendingContext?qX(y,x.pendingContext,x.pendingContext!==x.context):x.context&&qX(y,x.context,!1),JO(y,x.containerInfo)}function Y$(y,x,A,L,O){return Px(),XO(O),x.flags|=256,Xs(y,x,A,L),x.child}var vB={dehydrated:null,treeContext:null,retryLane:0};function yB(y){return{baseLanes:y,cachePool:null,transitions:null}}function q$(y,x,A){var L=x.pendingProps,O=gi.current,z=!1,J=(x.flags&128)!==0,oe;if((oe=J)||(oe=y!==null&&y.memoizedState===null?!1:(O&2)!==0),oe?(z=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(O|=1),Kr(gi,O&1),y===null)return WO(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?((x.mode&1)===0?x.lanes=1:y.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(J=L.children,y=L.fallback,z?(L=x.mode,z=x.child,J={mode:"hidden",children:J},(L&1)===0&&z!==null?(z.childLanes=0,z.pendingProps=J):z=GD(J,L,0,null),y=ev(y,L,A,null),z.return=x,y.return=x,z.sibling=y,x.child=z,x.child.memoizedState=yB(A),x.memoizedState=vB,y):xB(x,J));if(O=y.memoizedState,O!==null&&(oe=O.dehydrated,oe!==null))return j1e(y,x,J,L,oe,O,A);if(z){z=L.fallback,J=x.mode,O=y.child,oe=O.sibling;var pe={mode:"hidden",children:L.children};return(J&1)===0&&x.child!==O?(L=x.child,L.childLanes=0,L.pendingProps=pe,x.deletions=null):(L=Mp(O,pe),L.subtreeFlags=O.subtreeFlags&14680064),oe!==null?z=Mp(oe,z):(z=ev(z,J,A,null),z.flags|=2),z.return=x,L.return=x,L.sibling=z,x.child=L,L=z,z=x.child,J=y.child.memoizedState,J=J===null?yB(A):{baseLanes:J.baseLanes|A,cachePool:null,transitions:J.transitions},z.memoizedState=J,z.childLanes=y.childLanes&~A,x.memoizedState=vB,L}return z=y.child,y=z.sibling,L=Mp(z,{mode:"visible",children:L.children}),(x.mode&1)===0&&(L.lanes=A),L.return=x,L.sibling=null,y!==null&&(A=x.deletions,A===null?(x.deletions=[y],x.flags|=16):A.push(y)),x.child=L,x.memoizedState=null,L}function xB(y,x){return x=GD({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function ID(y,x,A,L){return L!==null&&XO(L),Lx(x,y.child,null,A),y=xB(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function j1e(y,x,A,L,O,z,J){if(A)return x.flags&256?(x.flags&=-257,L=fB(Error(t(422))),ID(y,x,J,L)):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(z=L.fallback,O=x.mode,L=GD({mode:"visible",children:L.children},O,0,null),z=ev(z,O,J,null),z.flags|=2,L.return=x,z.return=x,L.sibling=z,x.child=L,(x.mode&1)!==0&&Lx(x,y.child,null,J),x.child.memoizedState=yB(J),x.memoizedState=vB,z);if((x.mode&1)===0)return ID(y,x,J,null);if(O.data==="$!"){if(L=O.nextSibling&&O.nextSibling.dataset,L)var oe=L.dgst;return L=oe,z=Error(t(419)),L=fB(z,L,void 0),ID(y,x,J,L)}if(oe=(J&y.childLanes)!==0,bo||oe){if(L=La,L!==null){switch(J&-J){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}O=(O&(L.suspendedLanes|J))!==0?0:O,O!==0&&O!==z.retryLane&&(z.retryLane=O,xd(y,O),Xu(L,y,O,-1))}return kB(),L=fB(Error(t(421))),ID(y,x,J,L)}return O.data==="$?"?(x.flags|=128,x.child=y.child,x=rSe.bind(null,y),O._reactRetry=x,null):(y=z.treeContext,Ko=vp(O.nextSibling),qo=x,li=!0,Hu=null,y!==null&&(zl[Vl++]=vd,zl[Vl++]=yd,zl[Vl++]=Wg,vd=y.id,yd=y.overflow,Wg=x),x=xB(x,L.children),x.flags|=4096,x)}function K$(y,x,A){y.lanes|=x;var L=y.alternate;L!==null&&(L.lanes|=x),KO(y.return,x,A)}function _B(y,x,A,L,O){var z=y.memoizedState;z===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:L,tail:A,tailMode:O}:(z.isBackwards=x,z.rendering=null,z.renderingStartTime=0,z.last=L,z.tail=A,z.tailMode=O)}function Z$(y,x,A){var L=x.pendingProps,O=L.revealOrder,z=L.tail;if(Xs(y,x,L.children,A),L=gi.current,(L&2)!==0)L=L&1|2,x.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&K$(y,A,x);else if(y.tag===19)K$(y,A,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}L&=1}if(Kr(gi,L),(x.mode&1)===0)x.memoizedState=null;else switch(O){case"forwards":for(A=x.child,O=null;A!==null;)y=A.alternate,y!==null&&wD(y)===null&&(O=A),A=A.sibling;A=O,A===null?(O=x.child,x.child=null):(O=A.sibling,A.sibling=null),_B(x,!1,O,A,z);break;case"backwards":for(A=null,O=x.child,x.child=null;O!==null;){if(y=O.alternate,y!==null&&wD(y)===null){x.child=O;break}y=O.sibling,O.sibling=A,A=O,O=y}_B(x,!0,A,null,z);break;case"together":_B(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function PD(y,x){(x.mode&1)===0&&y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2)}function bd(y,x,A){if(y!==null&&(x.dependencies=y.dependencies),Kg|=x.lanes,(A&x.childLanes)===0)return null;if(y!==null&&x.child!==y.child)throw Error(t(153));if(x.child!==null){for(y=x.child,A=Mp(y,y.pendingProps),x.child=A,A.return=x;y.sibling!==null;)y=y.sibling,A=A.sibling=Mp(y,y.pendingProps),A.return=x;A.sibling=null}return x.child}function W1e(y,x,A){switch(x.tag){case 3:$$(x),Px();break;case 5:h$(x);break;case 1:_o(x.type)&&fD(x);break;case 4:JO(x,x.stateNode.containerInfo);break;case 10:var L=x.type._context,O=x.memoizedProps.value;Kr(xD,L._currentValue),L._currentValue=O;break;case 13:if(L=x.memoizedState,L!==null)return L.dehydrated!==null?(Kr(gi,gi.current&1),x.flags|=128,null):(A&x.child.childLanes)!==0?q$(y,x,A):(Kr(gi,gi.current&1),y=bd(y,x,A),y!==null?y.sibling:null);Kr(gi,gi.current&1);break;case 19:if(L=(A&x.childLanes)!==0,(y.flags&128)!==0){if(L)return Z$(y,x,A);x.flags|=128}if(O=x.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Kr(gi,gi.current),L)break;return null;case 22:case 23:return x.lanes=0,j$(y,x,A)}return bd(y,x,A)}var Q$,bB,J$,eY;Q$=function(y,x){for(var A=x.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===x)break;for(;A.sibling===null;){if(A.return===null||A.return===x)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},bB=function(){},J$=function(y,x,A,L){var O=y.memoizedProps;if(O!==L){y=x.stateNode,Yg(jc.current);var z=null;switch(A){case"input":O=lt(y,O),L=lt(y,L),z=[];break;case"select":O=H({},O,{value:void 0}),L=H({},L,{value:void 0}),z=[];break;case"textarea":O=ht(y,O),L=ht(y,L),z=[];break;default:typeof O.onClick!="function"&&typeof L.onClick=="function"&&(y.onclick=cD)}gt(A,L);var J;A=null;for(ke in O)if(!L.hasOwnProperty(ke)&&O.hasOwnProperty(ke)&&O[ke]!=null)if(ke==="style"){var oe=O[ke];for(J in oe)oe.hasOwnProperty(J)&&(A||(A={}),A[J]="")}else ke!=="dangerouslySetInnerHTML"&&ke!=="children"&&ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&ke!=="autoFocus"&&(i.hasOwnProperty(ke)?z||(z=[]):(z=z||[]).push(ke,null));for(ke in L){var pe=L[ke];if(oe=O!=null?O[ke]:void 0,L.hasOwnProperty(ke)&&pe!==oe&&(pe!=null||oe!=null))if(ke==="style")if(oe){for(J in oe)!oe.hasOwnProperty(J)||pe&&pe.hasOwnProperty(J)||(A||(A={}),A[J]="");for(J in pe)pe.hasOwnProperty(J)&&oe[J]!==pe[J]&&(A||(A={}),A[J]=pe[J])}else A||(z||(z=[]),z.push(ke,A)),A=pe;else ke==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,oe=oe?oe.__html:void 0,pe!=null&&oe!==pe&&(z=z||[]).push(ke,pe)):ke==="children"?typeof pe!="string"&&typeof pe!="number"||(z=z||[]).push(ke,""+pe):ke!=="suppressContentEditableWarning"&&ke!=="suppressHydrationWarning"&&(i.hasOwnProperty(ke)?(pe!=null&&ke==="onScroll"&&ri("scroll",y),z||oe===pe||(z=[])):(z=z||[]).push(ke,pe))}A&&(z=z||[]).push("style",A);var ke=z;(x.updateQueue=ke)&&(x.flags|=4)}},eY=function(y,x,A,L){A!==L&&(x.flags|=4)};function Fw(y,x){if(!li)switch(y.tailMode){case"hidden":x=y.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?y.tail=null:A.sibling=null;break;case"collapsed":A=y.tail;for(var L=null;A!==null;)A.alternate!==null&&(L=A),A=A.sibling;L===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:L.sibling=null}}function _s(y){var x=y.alternate!==null&&y.alternate.child===y.child,A=0,L=0;if(x)for(var O=y.child;O!==null;)A|=O.lanes|O.childLanes,L|=O.subtreeFlags&14680064,L|=O.flags&14680064,O.return=y,O=O.sibling;else for(O=y.child;O!==null;)A|=O.lanes|O.childLanes,L|=O.subtreeFlags,L|=O.flags,O.return=y,O=O.sibling;return y.subtreeFlags|=L,y.childLanes=A,x}function X1e(y,x,A){var L=x.pendingProps;switch(GO(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(x),null;case 1:return _o(x.type)&&dD(),_s(x),null;case 3:return L=x.stateNode,kx(),ii(xo),ii(ys),nB(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(y===null||y.child===null)&&(vD(x)?x.flags|=4:y===null||y.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Hu!==null&&(LB(Hu),Hu=null))),bB(y,x),_s(x),null;case 5:eB(x);var O=Yg(Rw.current);if(A=x.type,y!==null&&x.stateNode!=null)J$(y,x,A,L,O),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!L){if(x.stateNode===null)throw Error(t(166));return _s(x),null}if(y=Yg(jc.current),vD(x)){L=x.stateNode,A=x.type;var z=x.memoizedProps;switch(L[Gc]=x,L[Mw]=z,y=(x.mode&1)!==0,A){case"dialog":ri("cancel",L),ri("close",L);break;case"iframe":case"object":case"embed":ri("load",L);break;case"video":case"audio":for(O=0;O<Ew.length;O++)ri(Ew[O],L);break;case"source":ri("error",L);break;case"img":case"image":case"link":ri("error",L),ri("load",L);break;case"details":ri("toggle",L);break;case"input":Mt(L,z),ri("invalid",L);break;case"select":L._wrapperState={wasMultiple:!!z.multiple},ri("invalid",L);break;case"textarea":ie(L,z),ri("invalid",L)}gt(A,z),O=null;for(var J in z)if(z.hasOwnProperty(J)){var oe=z[J];J==="children"?typeof oe=="string"?L.textContent!==oe&&(z.suppressHydrationWarning!==!0&&uD(L.textContent,oe,y),O=["children",oe]):typeof oe=="number"&&L.textContent!==""+oe&&(z.suppressHydrationWarning!==!0&&uD(L.textContent,oe,y),O=["children",""+oe]):i.hasOwnProperty(J)&&oe!=null&&J==="onScroll"&&ri("scroll",L)}switch(A){case"input":Re(L),ce(L,z,!0);break;case"textarea":Re(L),_e(L);break;case"select":case"option":break;default:typeof z.onClick=="function"&&(L.onclick=cD)}L=O,x.updateQueue=L,L!==null&&(x.flags|=4)}else{J=O.nodeType===9?O:O.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=le(A)),y==="http://www.w3.org/1999/xhtml"?A==="script"?(y=J.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof L.is=="string"?y=J.createElement(A,{is:L.is}):(y=J.createElement(A),A==="select"&&(J=y,L.multiple?J.multiple=!0:L.size&&(J.size=L.size))):y=J.createElementNS(y,A),y[Gc]=x,y[Mw]=L,Q$(y,x,!1,!1),x.stateNode=y;e:{switch(J=nt(A,L),A){case"dialog":ri("cancel",y),ri("close",y),O=L;break;case"iframe":case"object":case"embed":ri("load",y),O=L;break;case"video":case"audio":for(O=0;O<Ew.length;O++)ri(Ew[O],y);O=L;break;case"source":ri("error",y),O=L;break;case"img":case"image":case"link":ri("error",y),ri("load",y),O=L;break;case"details":ri("toggle",y),O=L;break;case"input":Mt(y,L),O=lt(y,L),ri("invalid",y);break;case"option":O=L;break;case"select":y._wrapperState={wasMultiple:!!L.multiple},O=H({},L,{value:void 0}),ri("invalid",y);break;case"textarea":ie(y,L),O=ht(y,L),ri("invalid",y);break;default:O=L}gt(A,O),oe=O;for(z in oe)if(oe.hasOwnProperty(z)){var pe=oe[z];z==="style"?ot(y,pe):z==="dangerouslySetInnerHTML"?(pe=pe?pe.__html:void 0,pe!=null&&$e(y,pe)):z==="children"?typeof pe=="string"?(A!=="textarea"||pe!=="")&&Ve(y,pe):typeof pe=="number"&&Ve(y,""+pe):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(i.hasOwnProperty(z)?pe!=null&&z==="onScroll"&&ri("scroll",y):pe!=null&&S(y,z,pe,J))}switch(A){case"input":Re(y),ce(y,L,!1);break;case"textarea":Re(y),_e(y);break;case"option":L.value!=null&&y.setAttribute("value",""+fe(L.value));break;case"select":y.multiple=!!L.multiple,z=L.value,z!=null?Cn(y,!!L.multiple,z,!1):L.defaultValue!=null&&Cn(y,!!L.multiple,L.defaultValue,!0);break;default:typeof O.onClick=="function"&&(y.onclick=cD)}switch(A){case"button":case"input":case"select":case"textarea":L=!!L.autoFocus;break e;case"img":L=!0;break e;default:L=!1}}L&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return _s(x),null;case 6:if(y&&x.stateNode!=null)eY(y,x,y.memoizedProps,L);else{if(typeof L!="string"&&x.stateNode===null)throw Error(t(166));if(A=Yg(Rw.current),Yg(jc.current),vD(x)){if(L=x.stateNode,A=x.memoizedProps,L[Gc]=x,(z=L.nodeValue!==A)&&(y=qo,y!==null))switch(y.tag){case 3:uD(L.nodeValue,A,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&uD(L.nodeValue,A,(y.mode&1)!==0)}z&&(x.flags|=4)}else L=(A.nodeType===9?A:A.ownerDocument).createTextNode(L),L[Gc]=x,x.stateNode=L}return _s(x),null;case 13:if(ii(gi),L=x.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(li&&Ko!==null&&(x.mode&1)!==0&&(x.flags&128)===0)r$(),Px(),x.flags|=98560,z=!1;else if(z=vD(x),L!==null&&L.dehydrated!==null){if(y===null){if(!z)throw Error(t(318));if(z=x.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(t(317));z[Gc]=x}else Px(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;_s(x),z=!1}else Hu!==null&&(LB(Hu),Hu=null),z=!0;if(!z)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=A,x):(L=L!==null,L!==(y!==null&&y.memoizedState!==null)&&L&&(x.child.flags|=8192,(x.mode&1)!==0&&(y===null||(gi.current&1)!==0?pa===0&&(pa=3):kB())),x.updateQueue!==null&&(x.flags|=4),_s(x),null);case 4:return kx(),bB(y,x),y===null&&Aw(x.stateNode.containerInfo),_s(x),null;case 10:return qO(x.type._context),_s(x),null;case 17:return _o(x.type)&&dD(),_s(x),null;case 19:if(ii(gi),z=x.memoizedState,z===null)return _s(x),null;if(L=(x.flags&128)!==0,J=z.rendering,J===null)if(L)Fw(z,!1);else{if(pa!==0||y!==null&&(y.flags&128)!==0)for(y=x.child;y!==null;){if(J=wD(y),J!==null){for(x.flags|=128,Fw(z,!1),L=J.updateQueue,L!==null&&(x.updateQueue=L,x.flags|=4),x.subtreeFlags=0,L=A,A=x.child;A!==null;)z=A,y=L,z.flags&=14680066,J=z.alternate,J===null?(z.childLanes=0,z.lanes=y,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=J.childLanes,z.lanes=J.lanes,z.child=J.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=J.memoizedProps,z.memoizedState=J.memoizedState,z.updateQueue=J.updateQueue,z.type=J.type,y=J.dependencies,z.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),A=A.sibling;return Kr(gi,gi.current&1|2),x.child}y=y.sibling}z.tail!==null&&mi()>Ux&&(x.flags|=128,L=!0,Fw(z,!1),x.lanes=4194304)}else{if(!L)if(y=wD(J),y!==null){if(x.flags|=128,L=!0,A=y.updateQueue,A!==null&&(x.updateQueue=A,x.flags|=4),Fw(z,!0),z.tail===null&&z.tailMode==="hidden"&&!J.alternate&&!li)return _s(x),null}else 2*mi()-z.renderingStartTime>Ux&&A!==1073741824&&(x.flags|=128,L=!0,Fw(z,!1),x.lanes=4194304);z.isBackwards?(J.sibling=x.child,x.child=J):(A=z.last,A!==null?A.sibling=J:x.child=J,z.last=J)}return z.tail!==null?(x=z.tail,z.rendering=x,z.tail=x.sibling,z.renderingStartTime=mi(),x.sibling=null,A=gi.current,Kr(gi,L?A&1|2:A&1),x):(_s(x),null);case 22:case 23:return NB(),L=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==L&&(x.flags|=8192),L&&(x.mode&1)!==0?(Zo&1073741824)!==0&&(_s(x),x.subtreeFlags&6&&(x.flags|=8192)):_s(x),null;case 24:return null;case 25:return null}throw Error(t(156,x.tag))}function $1e(y,x){switch(GO(x),x.tag){case 1:return _o(x.type)&&dD(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return kx(),ii(xo),ii(ys),nB(),y=x.flags,(y&65536)!==0&&(y&128)===0?(x.flags=y&-65537|128,x):null;case 5:return eB(x),null;case 13:if(ii(gi),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(t(340));Px()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return ii(gi),null;case 4:return kx(),null;case 10:return qO(x.type._context),null;case 22:case 23:return NB(),null;case 24:return null;default:return null}}var LD=!1,bs=!1,Y1e=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Bx(y,x){var A=y.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(L){Ei(y,x,L)}else A.current=null}function SB(y,x,A){try{A()}catch(L){Ei(y,x,L)}}var tY=!1;function q1e(y,x){if(NO=Q2,y=RX(),AO(y)){if("selectionStart"in y)var A={start:y.selectionStart,end:y.selectionEnd};else e:{A=(A=y.ownerDocument)&&A.defaultView||window;var L=A.getSelection&&A.getSelection();if(L&&L.rangeCount!==0){A=L.anchorNode;var O=L.anchorOffset,z=L.focusNode;L=L.focusOffset;try{A.nodeType,z.nodeType}catch{A=null;break e}var J=0,oe=-1,pe=-1,ke=0,qe=0,Je=y,je=null;t:for(;;){for(var Nt;Je!==A||O!==0&&Je.nodeType!==3||(oe=J+O),Je!==z||L!==0&&Je.nodeType!==3||(pe=J+L),Je.nodeType===3&&(J+=Je.nodeValue.length),(Nt=Je.firstChild)!==null;)je=Je,Je=Nt;for(;;){if(Je===y)break t;if(je===A&&++ke===O&&(oe=J),je===z&&++qe===L&&(pe=J),(Nt=Je.nextSibling)!==null)break;Je=je,je=Je.parentNode}Je=Nt}A=oe===-1||pe===-1?null:{start:oe,end:pe}}else A=null}A=A||{start:0,end:0}}else A=null;for(kO={focusedElem:y,selectionRange:A},Q2=!1,Ut=x;Ut!==null;)if(x=Ut,y=x.child,(x.subtreeFlags&1028)!==0&&y!==null)y.return=x,Ut=y;else for(;Ut!==null;){x=Ut;try{var Gt=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Gt!==null){var $t=Gt.memoizedProps,Bi=Gt.memoizedState,Ae=x.stateNode,ye=Ae.getSnapshotBeforeUpdate(x.elementType===x.type?$t:Gu(x.type,$t),Bi);Ae.__reactInternalSnapshotBeforeUpdate=ye}break;case 3:var Ie=x.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(at){Ei(x,x.return,at)}if(y=x.sibling,y!==null){y.return=x.return,Ut=y;break}Ut=x.return}return Gt=tY,tY=!1,Gt}function Uw(y,x,A){var L=x.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var O=L=L.next;do{if((O.tag&y)===y){var z=O.destroy;O.destroy=void 0,z!==void 0&&SB(x,A,z)}O=O.next}while(O!==L)}}function RD(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var A=x=x.next;do{if((A.tag&y)===y){var L=A.create;A.destroy=L()}A=A.next}while(A!==x)}}function wB(y){var x=y.ref;if(x!==null){var A=y.stateNode;switch(y.tag){case 5:y=A;break;default:y=A}typeof x=="function"?x(y):x.current=y}}function nY(y){var x=y.alternate;x!==null&&(y.alternate=null,nY(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&(delete x[Gc],delete x[Mw],delete x[UO],delete x[P1e],delete x[L1e])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function rY(y){return y.tag===5||y.tag===3||y.tag===4}function iY(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||rY(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function TB(y,x,A){var L=y.tag;if(L===5||L===6)y=y.stateNode,x?A.nodeType===8?A.parentNode.insertBefore(y,x):A.insertBefore(y,x):(A.nodeType===8?(x=A.parentNode,x.insertBefore(y,A)):(x=A,x.appendChild(y)),A=A._reactRootContainer,A!=null||x.onclick!==null||(x.onclick=cD));else if(L!==4&&(y=y.child,y!==null))for(TB(y,x,A),y=y.sibling;y!==null;)TB(y,x,A),y=y.sibling}function EB(y,x,A){var L=y.tag;if(L===5||L===6)y=y.stateNode,x?A.insertBefore(y,x):A.appendChild(y);else if(L!==4&&(y=y.child,y!==null))for(EB(y,x,A),y=y.sibling;y!==null;)EB(y,x,A),y=y.sibling}var Qa=null,ju=!1;function wp(y,x,A){for(A=A.child;A!==null;)aY(y,x,A),A=A.sibling}function aY(y,x,A){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Dt,A)}catch{}switch(A.tag){case 5:bs||Bx(A,x);case 6:var L=Qa,O=ju;Qa=null,wp(y,x,A),Qa=L,ju=O,Qa!==null&&(ju?(y=Qa,A=A.stateNode,y.nodeType===8?y.parentNode.removeChild(A):y.removeChild(A)):Qa.removeChild(A.stateNode));break;case 18:Qa!==null&&(ju?(y=Qa,A=A.stateNode,y.nodeType===8?FO(y.parentNode,A):y.nodeType===1&&FO(y,A),vw(y)):FO(Qa,A.stateNode));break;case 4:L=Qa,O=ju,Qa=A.stateNode.containerInfo,ju=!0,wp(y,x,A),Qa=L,ju=O;break;case 0:case 11:case 14:case 15:if(!bs&&(L=A.updateQueue,L!==null&&(L=L.lastEffect,L!==null))){O=L=L.next;do{var z=O,J=z.destroy;z=z.tag,J!==void 0&&((z&2)!==0||(z&4)!==0)&&SB(A,x,J),O=O.next}while(O!==L)}wp(y,x,A);break;case 1:if(!bs&&(Bx(A,x),L=A.stateNode,typeof L.componentWillUnmount=="function"))try{L.props=A.memoizedProps,L.state=A.memoizedState,L.componentWillUnmount()}catch(oe){Ei(A,x,oe)}wp(y,x,A);break;case 21:wp(y,x,A);break;case 22:A.mode&1?(bs=(L=bs)||A.memoizedState!==null,wp(y,x,A),bs=L):wp(y,x,A);break;default:wp(y,x,A)}}function sY(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var A=y.stateNode;A===null&&(A=y.stateNode=new Y1e),x.forEach(function(L){var O=iSe.bind(null,y,L);A.has(L)||(A.add(L),L.then(O,O))})}}function Wu(y,x){var A=x.deletions;if(A!==null)for(var L=0;L<A.length;L++){var O=A[L];try{var z=y,J=x,oe=J;e:for(;oe!==null;){switch(oe.tag){case 5:Qa=oe.stateNode,ju=!1;break e;case 3:Qa=oe.stateNode.containerInfo,ju=!0;break e;case 4:Qa=oe.stateNode.containerInfo,ju=!0;break e}oe=oe.return}if(Qa===null)throw Error(t(160));aY(z,J,O),Qa=null,ju=!1;var pe=O.alternate;pe!==null&&(pe.return=null),O.return=null}catch(ke){Ei(O,x,ke)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)oY(x,y),x=x.sibling}function oY(y,x){var A=y.alternate,L=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(Wu(x,y),Xc(y),L&4){try{Uw(3,y,y.return),RD(3,y)}catch($t){Ei(y,y.return,$t)}try{Uw(5,y,y.return)}catch($t){Ei(y,y.return,$t)}}break;case 1:Wu(x,y),Xc(y),L&512&&A!==null&&Bx(A,A.return);break;case 5:if(Wu(x,y),Xc(y),L&512&&A!==null&&Bx(A,A.return),y.flags&32){var O=y.stateNode;try{Ve(O,"")}catch($t){Ei(y,y.return,$t)}}if(L&4&&(O=y.stateNode,O!=null)){var z=y.memoizedProps,J=A!==null?A.memoizedProps:z,oe=y.type,pe=y.updateQueue;if(y.updateQueue=null,pe!==null)try{oe==="input"&&z.type==="radio"&&z.name!=null&&mt(O,z),nt(oe,J);var ke=nt(oe,z);for(J=0;J<pe.length;J+=2){var qe=pe[J],Je=pe[J+1];qe==="style"?ot(O,Je):qe==="dangerouslySetInnerHTML"?$e(O,Je):qe==="children"?Ve(O,Je):S(O,qe,Je,ke)}switch(oe){case"input":on(O,z);break;case"textarea":Z(O,z);break;case"select":var je=O._wrapperState.wasMultiple;O._wrapperState.wasMultiple=!!z.multiple;var Nt=z.value;Nt!=null?Cn(O,!!z.multiple,Nt,!1):je!==!!z.multiple&&(z.defaultValue!=null?Cn(O,!!z.multiple,z.defaultValue,!0):Cn(O,!!z.multiple,z.multiple?[]:"",!1))}O[Mw]=z}catch($t){Ei(y,y.return,$t)}}break;case 6:if(Wu(x,y),Xc(y),L&4){if(y.stateNode===null)throw Error(t(162));O=y.stateNode,z=y.memoizedProps;try{O.nodeValue=z}catch($t){Ei(y,y.return,$t)}}break;case 3:if(Wu(x,y),Xc(y),L&4&&A!==null&&A.memoizedState.isDehydrated)try{vw(x.containerInfo)}catch($t){Ei(y,y.return,$t)}break;case 4:Wu(x,y),Xc(y);break;case 13:Wu(x,y),Xc(y),O=y.child,O.flags&8192&&(z=O.memoizedState!==null,O.stateNode.isHidden=z,!z||O.alternate!==null&&O.alternate.memoizedState!==null||(MB=mi())),L&4&&sY(y);break;case 22:if(qe=A!==null&&A.memoizedState!==null,y.mode&1?(bs=(ke=bs)||qe,Wu(x,y),bs=ke):Wu(x,y),Xc(y),L&8192){if(ke=y.memoizedState!==null,(y.stateNode.isHidden=ke)&&!qe&&(y.mode&1)!==0)for(Ut=y,qe=y.child;qe!==null;){for(Je=Ut=qe;Ut!==null;){switch(je=Ut,Nt=je.child,je.tag){case 0:case 11:case 14:case 15:Uw(4,je,je.return);break;case 1:Bx(je,je.return);var Gt=je.stateNode;if(typeof Gt.componentWillUnmount=="function"){L=je,A=je.return;try{x=L,Gt.props=x.memoizedProps,Gt.state=x.memoizedState,Gt.componentWillUnmount()}catch($t){Ei(L,A,$t)}}break;case 5:Bx(je,je.return);break;case 22:if(je.memoizedState!==null){cY(Je);continue}}Nt!==null?(Nt.return=je,Ut=Nt):cY(Je)}qe=qe.sibling}e:for(qe=null,Je=y;;){if(Je.tag===5){if(qe===null){qe=Je;try{O=Je.stateNode,ke?(z=O.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none"):(oe=Je.stateNode,pe=Je.memoizedProps.style,J=pe!=null&&pe.hasOwnProperty("display")?pe.display:null,oe.style.display=Ge("display",J))}catch($t){Ei(y,y.return,$t)}}}else if(Je.tag===6){if(qe===null)try{Je.stateNode.nodeValue=ke?"":Je.memoizedProps}catch($t){Ei(y,y.return,$t)}}else if((Je.tag!==22&&Je.tag!==23||Je.memoizedState===null||Je===y)&&Je.child!==null){Je.child.return=Je,Je=Je.child;continue}if(Je===y)break e;for(;Je.sibling===null;){if(Je.return===null||Je.return===y)break e;qe===Je&&(qe=null),Je=Je.return}qe===Je&&(qe=null),Je.sibling.return=Je.return,Je=Je.sibling}}break;case 19:Wu(x,y),Xc(y),L&4&&sY(y);break;case 21:break;default:Wu(x,y),Xc(y)}}function Xc(y){var x=y.flags;if(x&2){try{e:{for(var A=y.return;A!==null;){if(rY(A)){var L=A;break e}A=A.return}throw Error(t(160))}switch(L.tag){case 5:var O=L.stateNode;L.flags&32&&(Ve(O,""),L.flags&=-33);var z=iY(y);EB(y,z,O);break;case 3:case 4:var J=L.stateNode.containerInfo,oe=iY(y);TB(y,oe,J);break;default:throw Error(t(161))}}catch(pe){Ei(y,y.return,pe)}y.flags&=-3}x&4096&&(y.flags&=-4097)}function K1e(y,x,A){Ut=y,lY(y)}function lY(y,x,A){for(var L=(y.mode&1)!==0;Ut!==null;){var O=Ut,z=O.child;if(O.tag===22&&L){var J=O.memoizedState!==null||LD;if(!J){var oe=O.alternate,pe=oe!==null&&oe.memoizedState!==null||bs;oe=LD;var ke=bs;if(LD=J,(bs=pe)&&!ke)for(Ut=O;Ut!==null;)J=Ut,pe=J.child,J.tag===22&&J.memoizedState!==null?hY(O):pe!==null?(pe.return=J,Ut=pe):hY(O);for(;z!==null;)Ut=z,lY(z),z=z.sibling;Ut=O,LD=oe,bs=ke}uY(y)}else(O.subtreeFlags&8772)!==0&&z!==null?(z.return=O,Ut=z):uY(y)}}function uY(y){for(;Ut!==null;){var x=Ut;if((x.flags&8772)!==0){var A=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:bs||RD(5,x);break;case 1:var L=x.stateNode;if(x.flags&4&&!bs)if(A===null)L.componentDidMount();else{var O=x.elementType===x.type?A.memoizedProps:Gu(x.type,A.memoizedProps);L.componentDidUpdate(O,A.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var z=x.updateQueue;z!==null&&c$(x,z,L);break;case 3:var J=x.updateQueue;if(J!==null){if(A=null,x.child!==null)switch(x.child.tag){case 5:A=x.child.stateNode;break;case 1:A=x.child.stateNode}c$(x,J,A)}break;case 5:var oe=x.stateNode;if(A===null&&x.flags&4){A=oe;var pe=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":pe.autoFocus&&A.focus();break;case"img":pe.src&&(A.src=pe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var ke=x.alternate;if(ke!==null){var qe=ke.memoizedState;if(qe!==null){var Je=qe.dehydrated;Je!==null&&vw(Je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bs||x.flags&512&&wB(x)}catch(je){Ei(x,x.return,je)}}if(x===y){Ut=null;break}if(A=x.sibling,A!==null){A.return=x.return,Ut=A;break}Ut=x.return}}function cY(y){for(;Ut!==null;){var x=Ut;if(x===y){Ut=null;break}var A=x.sibling;if(A!==null){A.return=x.return,Ut=A;break}Ut=x.return}}function hY(y){for(;Ut!==null;){var x=Ut;try{switch(x.tag){case 0:case 11:case 15:var A=x.return;try{RD(4,x)}catch(pe){Ei(x,A,pe)}break;case 1:var L=x.stateNode;if(typeof L.componentDidMount=="function"){var O=x.return;try{L.componentDidMount()}catch(pe){Ei(x,O,pe)}}var z=x.return;try{wB(x)}catch(pe){Ei(x,z,pe)}break;case 5:var J=x.return;try{wB(x)}catch(pe){Ei(x,J,pe)}}}catch(pe){Ei(x,x.return,pe)}if(x===y){Ut=null;break}var oe=x.sibling;if(oe!==null){oe.return=x.return,Ut=oe;break}Ut=x.return}}var Z1e=Math.ceil,ND=w.ReactCurrentDispatcher,AB=w.ReactCurrentOwner,jl=w.ReactCurrentBatchConfig,ur=0,La=null,Ji=null,Ja=0,Zo=0,Fx=yp(0),pa=0,zw=null,Kg=0,kD=0,CB=0,Vw=null,So=null,MB=0,Ux=1/0,Sd=null,OD=!1,DB=null,Tp=null,BD=!1,Ep=null,FD=0,Hw=0,IB=null,UD=-1,zD=0;function $s(){return(ur&6)!==0?mi():UD!==-1?UD:UD=mi()}function Ap(y){return(y.mode&1)===0?1:(ur&2)!==0&&Ja!==0?Ja&-Ja:N1e.transition!==null?(zD===0&&(zD=vs()),zD):(y=Mn,y!==0||(y=window.event,y=y===void 0?16:fX(y.type)),y)}function Xu(y,x,A,L){if(50<Hw)throw Hw=0,IB=null,Error(t(185));da(y,A,L),((ur&2)===0||y!==La)&&(y===La&&((ur&2)===0&&(kD|=A),pa===4&&Cp(y,Ja)),wo(y,L),A===1&&ur===0&&(x.mode&1)===0&&(Ux=mi()+500,pD&&_p()))}function wo(y,x){var A=y.callbackNode;vr(y,x);var L=dr(y,y===La?Ja:0);if(L===0)A!==null&&q2(A),y.callbackNode=null,y.callbackPriority=0;else if(x=L&-L,y.callbackPriority!==x){if(A!=null&&q2(A),x===1)y.tag===0?R1e(fY.bind(null,y)):QX(fY.bind(null,y)),D1e(function(){(ur&6)===0&&_p()}),A=null;else{switch(Ws(L)){case 1:A=Se;break;case 4:A=Oe;break;case 16:A=Ne;break;case 536870912:A=vt;break;default:A=Ne}A=bY(A,dY.bind(null,y))}y.callbackPriority=x,y.callbackNode=A}}function dY(y,x){if(UD=-1,zD=0,(ur&6)!==0)throw Error(t(327));var A=y.callbackNode;if(zx()&&y.callbackNode!==A)return null;var L=dr(y,y===La?Ja:0);if(L===0)return null;if((L&30)!==0||(L&y.expiredLanes)!==0||x)x=VD(y,L);else{x=L;var O=ur;ur|=2;var z=mY();(La!==y||Ja!==x)&&(Sd=null,Ux=mi()+500,Qg(y,x));do try{eSe();break}catch(oe){pY(y,oe)}while(!0);YO(),ND.current=z,ur=O,Ji!==null?x=0:(La=null,Ja=0,x=pa)}if(x!==0){if(x===2&&(O=nr(y),O!==0&&(L=O,x=PB(y,O))),x===1)throw A=zw,Qg(y,0),Cp(y,L),wo(y,mi()),A;if(x===6)Cp(y,L);else{if(O=y.current.alternate,(L&30)===0&&!Q1e(O)&&(x=VD(y,L),x===2&&(z=nr(y),z!==0&&(L=z,x=PB(y,z))),x===1))throw A=zw,Qg(y,0),Cp(y,L),wo(y,mi()),A;switch(y.finishedWork=O,y.finishedLanes=L,x){case 0:case 1:throw Error(t(345));case 2:Jg(y,So,Sd);break;case 3:if(Cp(y,L),(L&130023424)===L&&(x=MB+500-mi(),10<x)){if(dr(y,0)!==0)break;if(O=y.suspendedLanes,(O&L)!==L){$s(),y.pingedLanes|=y.suspendedLanes&O;break}y.timeoutHandle=BO(Jg.bind(null,y,So,Sd),x);break}Jg(y,So,Sd);break;case 4:if(Cp(y,L),(L&4194240)===L)break;for(x=y.eventTimes,O=-1;0<L;){var J=31-kt(L);z=1<<J,J=x[J],J>O&&(O=J),L&=~z}if(L=O,L=mi()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*Z1e(L/1960))-L,10<L){y.timeoutHandle=BO(Jg.bind(null,y,So,Sd),L);break}Jg(y,So,Sd);break;case 5:Jg(y,So,Sd);break;default:throw Error(t(329))}}}return wo(y,mi()),y.callbackNode===A?dY.bind(null,y):null}function PB(y,x){var A=Vw;return y.current.memoizedState.isDehydrated&&(Qg(y,x).flags|=256),y=VD(y,x),y!==2&&(x=So,So=A,x!==null&&LB(x)),y}function LB(y){So===null?So=y:So.push.apply(So,y)}function Q1e(y){for(var x=y;;){if(x.flags&16384){var A=x.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var L=0;L<A.length;L++){var O=A[L],z=O.getSnapshot;O=O.value;try{if(!Vu(z(),O))return!1}catch{return!1}}}if(A=x.child,x.subtreeFlags&16384&&A!==null)A.return=x,x=A;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Cp(y,x){for(x&=~CB,x&=~kD,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var A=31-kt(x),L=1<<A;y[A]=-1,x&=~L}}function fY(y){if((ur&6)!==0)throw Error(t(327));zx();var x=dr(y,0);if((x&1)===0)return wo(y,mi()),null;var A=VD(y,x);if(y.tag!==0&&A===2){var L=nr(y);L!==0&&(x=L,A=PB(y,L))}if(A===1)throw A=zw,Qg(y,0),Cp(y,x),wo(y,mi()),A;if(A===6)throw Error(t(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,Jg(y,So,Sd),wo(y,mi()),null}function RB(y,x){var A=ur;ur|=1;try{return y(x)}finally{ur=A,ur===0&&(Ux=mi()+500,pD&&_p())}}function Zg(y){Ep!==null&&Ep.tag===0&&(ur&6)===0&&zx();var x=ur;ur|=1;var A=jl.transition,L=Mn;try{if(jl.transition=null,Mn=1,y)return y()}finally{Mn=L,jl.transition=A,ur=x,(ur&6)===0&&_p()}}function NB(){Zo=Fx.current,ii(Fx)}function Qg(y,x){y.finishedWork=null,y.finishedLanes=0;var A=y.timeoutHandle;if(A!==-1&&(y.timeoutHandle=-1,M1e(A)),Ji!==null)for(A=Ji.return;A!==null;){var L=A;switch(GO(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&dD();break;case 3:kx(),ii(xo),ii(ys),nB();break;case 5:eB(L);break;case 4:kx();break;case 13:ii(gi);break;case 19:ii(gi);break;case 10:qO(L.type._context);break;case 22:case 23:NB()}A=A.return}if(La=y,Ji=y=Mp(y.current,null),Ja=Zo=x,pa=0,zw=null,CB=kD=Kg=0,So=Vw=null,$g!==null){for(x=0;x<$g.length;x++)if(A=$g[x],L=A.interleaved,L!==null){A.interleaved=null;var O=L.next,z=A.pending;if(z!==null){var J=z.next;z.next=O,L.next=J}A.pending=L}$g=null}return y}function pY(y,x){do{var A=Ji;try{if(YO(),TD.current=MD,ED){for(var L=vi.memoizedState;L!==null;){var O=L.queue;O!==null&&(O.pending=null),L=L.next}ED=!1}if(qg=0,Pa=fa=vi=null,Nw=!1,kw=0,AB.current=null,A===null||A.return===null){pa=1,zw=x,Ji=null;break}e:{var z=y,J=A.return,oe=A,pe=x;if(x=Ja,oe.flags|=32768,pe!==null&&typeof pe=="object"&&typeof pe.then=="function"){var ke=pe,qe=oe,Je=qe.tag;if((qe.mode&1)===0&&(Je===0||Je===11||Je===15)){var je=qe.alternate;je?(qe.updateQueue=je.updateQueue,qe.memoizedState=je.memoizedState,qe.lanes=je.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var Nt=U$(J);if(Nt!==null){Nt.flags&=-257,z$(Nt,J,oe,z,x),Nt.mode&1&&F$(z,ke,x),x=Nt,pe=ke;var Gt=x.updateQueue;if(Gt===null){var $t=new Set;$t.add(pe),x.updateQueue=$t}else Gt.add(pe);break e}else{if((x&1)===0){F$(z,ke,x),kB();break e}pe=Error(t(426))}}else if(li&&oe.mode&1){var Bi=U$(J);if(Bi!==null){(Bi.flags&65536)===0&&(Bi.flags|=256),z$(Bi,J,oe,z,x),XO(Ox(pe,oe));break e}}z=pe=Ox(pe,oe),pa!==4&&(pa=2),Vw===null?Vw=[z]:Vw.push(z),z=J;do{switch(z.tag){case 3:z.flags|=65536,x&=-x,z.lanes|=x;var Ae=O$(z,pe,x);u$(z,Ae);break e;case 1:oe=pe;var ye=z.type,Ie=z.stateNode;if((z.flags&128)===0&&(typeof ye.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(Tp===null||!Tp.has(Ie)))){z.flags|=65536,x&=-x,z.lanes|=x;var at=B$(z,oe,x);u$(z,at);break e}}z=z.return}while(z!==null)}vY(A)}catch(Kt){x=Kt,Ji===A&&A!==null&&(Ji=A=A.return);continue}break}while(!0)}function mY(){var y=ND.current;return ND.current=MD,y===null?MD:y}function kB(){(pa===0||pa===3||pa===2)&&(pa=4),La===null||(Kg&268435455)===0&&(kD&268435455)===0||Cp(La,Ja)}function VD(y,x){var A=ur;ur|=2;var L=mY();(La!==y||Ja!==x)&&(Sd=null,Qg(y,x));do try{J1e();break}catch(O){pY(y,O)}while(!0);if(YO(),ur=A,ND.current=L,Ji!==null)throw Error(t(261));return La=null,Ja=0,pa}function J1e(){for(;Ji!==null;)gY(Ji)}function eSe(){for(;Ji!==null&&!dO();)gY(Ji)}function gY(y){var x=_Y(y.alternate,y,Zo);y.memoizedProps=y.pendingProps,x===null?vY(y):Ji=x,AB.current=null}function vY(y){var x=y;do{var A=x.alternate;if(y=x.return,(x.flags&32768)===0){if(A=X1e(A,x,Zo),A!==null){Ji=A;return}}else{if(A=$1e(A,x),A!==null){A.flags&=32767,Ji=A;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{pa=6,Ji=null;return}}if(x=x.sibling,x!==null){Ji=x;return}Ji=x=y}while(x!==null);pa===0&&(pa=5)}function Jg(y,x,A){var L=Mn,O=jl.transition;try{jl.transition=null,Mn=1,tSe(y,x,A,L)}finally{jl.transition=O,Mn=L}return null}function tSe(y,x,A,L){do zx();while(Ep!==null);if((ur&6)!==0)throw Error(t(327));A=y.finishedWork;var O=y.finishedLanes;if(A===null)return null;if(y.finishedWork=null,y.finishedLanes=0,A===y.current)throw Error(t(177));y.callbackNode=null,y.callbackPriority=0;var z=A.lanes|A.childLanes;if(Hg(y,z),y===La&&(Ji=La=null,Ja=0),(A.subtreeFlags&2064)===0&&(A.flags&2064)===0||BD||(BD=!0,bY(Ne,function(){return zx(),null})),z=(A.flags&15990)!==0,(A.subtreeFlags&15990)!==0||z){z=jl.transition,jl.transition=null;var J=Mn;Mn=1;var oe=ur;ur|=4,AB.current=null,q1e(y,A),oY(A,y),b1e(kO),Q2=!!NO,kO=NO=null,y.current=A,K1e(A),fO(),ur=oe,Mn=J,jl.transition=z}else y.current=A;if(BD&&(BD=!1,Ep=y,FD=O),z=y.pendingLanes,z===0&&(Tp=null),zt(A.stateNode),wo(y,mi()),x!==null)for(L=y.onRecoverableError,A=0;A<x.length;A++)O=x[A],L(O.value,{componentStack:O.stack,digest:O.digest});if(OD)throw OD=!1,y=DB,DB=null,y;return(FD&1)!==0&&y.tag!==0&&zx(),z=y.pendingLanes,(z&1)!==0?y===IB?Hw++:(Hw=0,IB=y):Hw=0,_p(),null}function zx(){if(Ep!==null){var y=Ws(FD),x=jl.transition,A=Mn;try{if(jl.transition=null,Mn=16>y?16:y,Ep===null)var L=!1;else{if(y=Ep,Ep=null,FD=0,(ur&6)!==0)throw Error(t(331));var O=ur;for(ur|=4,Ut=y.current;Ut!==null;){var z=Ut,J=z.child;if((Ut.flags&16)!==0){var oe=z.deletions;if(oe!==null){for(var pe=0;pe<oe.length;pe++){var ke=oe[pe];for(Ut=ke;Ut!==null;){var qe=Ut;switch(qe.tag){case 0:case 11:case 15:Uw(8,qe,z)}var Je=qe.child;if(Je!==null)Je.return=qe,Ut=Je;else for(;Ut!==null;){qe=Ut;var je=qe.sibling,Nt=qe.return;if(nY(qe),qe===ke){Ut=null;break}if(je!==null){je.return=Nt,Ut=je;break}Ut=Nt}}}var Gt=z.alternate;if(Gt!==null){var $t=Gt.child;if($t!==null){Gt.child=null;do{var Bi=$t.sibling;$t.sibling=null,$t=Bi}while($t!==null)}}Ut=z}}if((z.subtreeFlags&2064)!==0&&J!==null)J.return=z,Ut=J;else e:for(;Ut!==null;){if(z=Ut,(z.flags&2048)!==0)switch(z.tag){case 0:case 11:case 15:Uw(9,z,z.return)}var Ae=z.sibling;if(Ae!==null){Ae.return=z.return,Ut=Ae;break e}Ut=z.return}}var ye=y.current;for(Ut=ye;Ut!==null;){J=Ut;var Ie=J.child;if((J.subtreeFlags&2064)!==0&&Ie!==null)Ie.return=J,Ut=Ie;else e:for(J=ye;Ut!==null;){if(oe=Ut,(oe.flags&2048)!==0)try{switch(oe.tag){case 0:case 11:case 15:RD(9,oe)}}catch(Kt){Ei(oe,oe.return,Kt)}if(oe===J){Ut=null;break e}var at=oe.sibling;if(at!==null){at.return=oe.return,Ut=at;break e}Ut=oe.return}}if(ur=O,_p(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Dt,y)}catch{}L=!0}return L}finally{Mn=A,jl.transition=x}}return!1}function yY(y,x,A){x=Ox(A,x),x=O$(y,x,1),y=Sp(y,x,1),x=$s(),y!==null&&(da(y,1,x),wo(y,x))}function Ei(y,x,A){if(y.tag===3)yY(y,y,A);else for(;x!==null;){if(x.tag===3){yY(x,y,A);break}else if(x.tag===1){var L=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Tp===null||!Tp.has(L))){y=Ox(A,y),y=B$(x,y,1),x=Sp(x,y,1),y=$s(),x!==null&&(da(x,1,y),wo(x,y));break}}x=x.return}}function nSe(y,x,A){var L=y.pingCache;L!==null&&L.delete(x),x=$s(),y.pingedLanes|=y.suspendedLanes&A,La===y&&(Ja&A)===A&&(pa===4||pa===3&&(Ja&130023424)===Ja&&500>mi()-MB?Qg(y,0):CB|=A),wo(y,x)}function xY(y,x){x===0&&((y.mode&1)===0?x=1:(x=jr,jr<<=1,(jr&130023424)===0&&(jr=4194304)));var A=$s();y=xd(y,x),y!==null&&(da(y,x,A),wo(y,A))}function rSe(y){var x=y.memoizedState,A=0;x!==null&&(A=x.retryLane),xY(y,A)}function iSe(y,x){var A=0;switch(y.tag){case 13:var L=y.stateNode,O=y.memoizedState;O!==null&&(A=O.retryLane);break;case 19:L=y.stateNode;break;default:throw Error(t(314))}L!==null&&L.delete(x),xY(y,A)}var _Y;_Y=function(y,x,A){if(y!==null)if(y.memoizedProps!==x.pendingProps||xo.current)bo=!0;else{if((y.lanes&A)===0&&(x.flags&128)===0)return bo=!1,W1e(y,x,A);bo=(y.flags&131072)!==0}else bo=!1,li&&(x.flags&1048576)!==0&&JX(x,gD,x.index);switch(x.lanes=0,x.tag){case 2:var L=x.type;PD(y,x),y=x.pendingProps;var O=Mx(x,ys.current);Nx(x,A),O=aB(null,x,L,y,O,A);var z=sB();return x.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,_o(L)?(z=!0,fD(x)):z=!1,x.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,QO(x),O.updater=DD,x.stateNode=O,O._reactInternals=x,dB(x,L,y,A),x=gB(null,x,L,!0,z,A)):(x.tag=0,li&&z&&HO(x),Xs(null,x,O,A),x=x.child),x;case 16:L=x.elementType;e:{switch(PD(y,x),y=x.pendingProps,O=L._init,L=O(L._payload),x.type=L,O=x.tag=sSe(L),y=Gu(L,y),O){case 0:x=mB(null,x,L,y,A);break e;case 1:x=X$(null,x,L,y,A);break e;case 11:x=V$(null,x,L,y,A);break e;case 14:x=H$(null,x,L,Gu(L.type,y),A);break e}throw Error(t(306,L,""))}return x;case 0:return L=x.type,O=x.pendingProps,O=x.elementType===L?O:Gu(L,O),mB(y,x,L,O,A);case 1:return L=x.type,O=x.pendingProps,O=x.elementType===L?O:Gu(L,O),X$(y,x,L,O,A);case 3:e:{if($$(x),y===null)throw Error(t(387));L=x.pendingProps,z=x.memoizedState,O=z.element,l$(y,x),SD(x,L,null,A);var J=x.memoizedState;if(L=J.element,z.isDehydrated)if(z={element:L,isDehydrated:!1,cache:J.cache,pendingSuspenseBoundaries:J.pendingSuspenseBoundaries,transitions:J.transitions},x.updateQueue.baseState=z,x.memoizedState=z,x.flags&256){O=Ox(Error(t(423)),x),x=Y$(y,x,L,A,O);break e}else if(L!==O){O=Ox(Error(t(424)),x),x=Y$(y,x,L,A,O);break e}else for(Ko=vp(x.stateNode.containerInfo.firstChild),qo=x,li=!0,Hu=null,A=s$(x,null,L,A),x.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(Px(),L===O){x=bd(y,x,A);break e}Xs(y,x,L,A)}x=x.child}return x;case 5:return h$(x),y===null&&WO(x),L=x.type,O=x.pendingProps,z=y!==null?y.memoizedProps:null,J=O.children,OO(L,O)?J=null:z!==null&&OO(L,z)&&(x.flags|=32),W$(y,x),Xs(y,x,J,A),x.child;case 6:return y===null&&WO(x),null;case 13:return q$(y,x,A);case 4:return JO(x,x.stateNode.containerInfo),L=x.pendingProps,y===null?x.child=Lx(x,null,L,A):Xs(y,x,L,A),x.child;case 11:return L=x.type,O=x.pendingProps,O=x.elementType===L?O:Gu(L,O),V$(y,x,L,O,A);case 7:return Xs(y,x,x.pendingProps,A),x.child;case 8:return Xs(y,x,x.pendingProps.children,A),x.child;case 12:return Xs(y,x,x.pendingProps.children,A),x.child;case 10:e:{if(L=x.type._context,O=x.pendingProps,z=x.memoizedProps,J=O.value,Kr(xD,L._currentValue),L._currentValue=J,z!==null)if(Vu(z.value,J)){if(z.children===O.children&&!xo.current){x=bd(y,x,A);break e}}else for(z=x.child,z!==null&&(z.return=x);z!==null;){var oe=z.dependencies;if(oe!==null){J=z.child;for(var pe=oe.firstContext;pe!==null;){if(pe.context===L){if(z.tag===1){pe=_d(-1,A&-A),pe.tag=2;var ke=z.updateQueue;if(ke!==null){ke=ke.shared;var qe=ke.pending;qe===null?pe.next=pe:(pe.next=qe.next,qe.next=pe),ke.pending=pe}}z.lanes|=A,pe=z.alternate,pe!==null&&(pe.lanes|=A),KO(z.return,A,x),oe.lanes|=A;break}pe=pe.next}}else if(z.tag===10)J=z.type===x.type?null:z.child;else if(z.tag===18){if(J=z.return,J===null)throw Error(t(341));J.lanes|=A,oe=J.alternate,oe!==null&&(oe.lanes|=A),KO(J,A,x),J=z.sibling}else J=z.child;if(J!==null)J.return=z;else for(J=z;J!==null;){if(J===x){J=null;break}if(z=J.sibling,z!==null){z.return=J.return,J=z;break}J=J.return}z=J}Xs(y,x,O.children,A),x=x.child}return x;case 9:return O=x.type,L=x.pendingProps.children,Nx(x,A),O=Hl(O),L=L(O),x.flags|=1,Xs(y,x,L,A),x.child;case 14:return L=x.type,O=Gu(L,x.pendingProps),O=Gu(L.type,O),H$(y,x,L,O,A);case 15:return G$(y,x,x.type,x.pendingProps,A);case 17:return L=x.type,O=x.pendingProps,O=x.elementType===L?O:Gu(L,O),PD(y,x),x.tag=1,_o(L)?(y=!0,fD(x)):y=!1,Nx(x,A),N$(x,L,O),dB(x,L,O,A),gB(null,x,L,!0,y,A);case 19:return Z$(y,x,A);case 22:return j$(y,x,A)}throw Error(t(156,x.tag))};function bY(y,x){return Y2(y,x)}function aSe(y,x,A,L){this.tag=y,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wl(y,x,A,L){return new aSe(y,x,A,L)}function OB(y){return y=y.prototype,!(!y||!y.isReactComponent)}function sSe(y){if(typeof y=="function")return OB(y)?1:0;if(y!=null){if(y=y.$$typeof,y===B)return 11;if(y===G)return 14}return 2}function Mp(y,x){var A=y.alternate;return A===null?(A=Wl(y.tag,x,y.key,y.mode),A.elementType=y.elementType,A.type=y.type,A.stateNode=y.stateNode,A.alternate=y,y.alternate=A):(A.pendingProps=x,A.type=y.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=y.flags&14680064,A.childLanes=y.childLanes,A.lanes=y.lanes,A.child=y.child,A.memoizedProps=y.memoizedProps,A.memoizedState=y.memoizedState,A.updateQueue=y.updateQueue,x=y.dependencies,A.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},A.sibling=y.sibling,A.index=y.index,A.ref=y.ref,A}function HD(y,x,A,L,O,z){var J=2;if(L=y,typeof y=="function")OB(y)&&(J=1);else if(typeof y=="string")J=5;else e:switch(y){case M:return ev(A.children,O,z,x);case P:J=8,O|=8;break;case I:return y=Wl(12,A,x,O|2),y.elementType=I,y.lanes=z,y;case k:return y=Wl(13,A,x,O),y.elementType=k,y.lanes=z,y;case V:return y=Wl(19,A,x,O),y.elementType=V,y.lanes=z,y;case X:return GD(A,O,z,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case D:J=10;break e;case R:J=9;break e;case B:J=11;break e;case G:J=14;break e;case F:J=16,L=null;break e}throw Error(t(130,y==null?y:typeof y,""))}return x=Wl(J,A,x,O),x.elementType=y,x.type=L,x.lanes=z,x}function ev(y,x,A,L){return y=Wl(7,y,L,x),y.lanes=A,y}function GD(y,x,A,L){return y=Wl(22,y,L,x),y.elementType=X,y.lanes=A,y.stateNode={isHidden:!1},y}function BB(y,x,A){return y=Wl(6,y,null,x),y.lanes=A,y}function FB(y,x,A){return x=Wl(4,y.children!==null?y.children:[],y.key,x),x.lanes=A,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function oSe(y,x,A,L,O){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=L,this.onRecoverableError=O,this.mutableSourceEagerHydrationData=null}function UB(y,x,A,L,O,z,J,oe,pe){return y=new oSe(y,x,A,oe,pe),x===1?(x=1,z===!0&&(x|=8)):x=0,z=Wl(3,null,null,x),y.current=z,z.stateNode=y,z.memoizedState={element:L,isDehydrated:A,cache:null,transitions:null,pendingSuspenseBoundaries:null},QO(z),y}function lSe(y,x,A){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:L==null?null:""+L,children:y,containerInfo:x,implementation:A}}function SY(y){if(!y)return xp;y=y._reactInternals;e:{if(Ul(y)!==y||y.tag!==1)throw Error(t(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(_o(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(t(171))}if(y.tag===1){var A=y.type;if(_o(A))return KX(y,A,x)}return x}function wY(y,x,A,L,O,z,J,oe,pe){return y=UB(A,L,!0,y,O,z,J,oe,pe),y.context=SY(null),A=y.current,L=$s(),O=Ap(A),z=_d(L,O),z.callback=x??null,Sp(A,z,O),y.current.lanes=O,da(y,O,L),wo(y,L),y}function jD(y,x,A,L){var O=x.current,z=$s(),J=Ap(O);return A=SY(A),x.context===null?x.context=A:x.pendingContext=A,x=_d(z,J),x.payload={element:y},L=L===void 0?null:L,L!==null&&(x.callback=L),y=Sp(O,x,J),y!==null&&(Xu(y,O,J,z),bD(y,O,J)),J}function WD(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function TY(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var A=y.retryLane;y.retryLane=A!==0&&A<x?A:x}}function zB(y,x){TY(y,x),(y=y.alternate)&&TY(y,x)}function uSe(){return null}var EY=typeof reportError=="function"?reportError:function(y){console.error(y)};function VB(y){this._internalRoot=y}XD.prototype.render=VB.prototype.render=function(y){var x=this._internalRoot;if(x===null)throw Error(t(409));jD(y,x,null,null)},XD.prototype.unmount=VB.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var x=y.containerInfo;Zg(function(){jD(null,y,null,null)}),x[md]=null}};function XD(y){this._internalRoot=y}XD.prototype.unstable_scheduleHydration=function(y){if(y){var x=Hc();y={blockedOn:null,target:y,priority:x};for(var A=0;A<pp.length&&x!==0&&x<pp[A].priority;A++);pp.splice(A,0,y),A===0&&hX(y)}};function HB(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function $D(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function AY(){}function cSe(y,x,A,L,O){if(O){if(typeof L=="function"){var z=L;L=function(){var ke=WD(J);z.call(ke)}}var J=wY(x,L,y,0,null,!1,!1,"",AY);return y._reactRootContainer=J,y[md]=J.current,Aw(y.nodeType===8?y.parentNode:y),Zg(),J}for(;O=y.lastChild;)y.removeChild(O);if(typeof L=="function"){var oe=L;L=function(){var ke=WD(pe);oe.call(ke)}}var pe=UB(y,0,!1,null,null,!1,!1,"",AY);return y._reactRootContainer=pe,y[md]=pe.current,Aw(y.nodeType===8?y.parentNode:y),Zg(function(){jD(x,pe,A,L)}),pe}function YD(y,x,A,L,O){var z=A._reactRootContainer;if(z){var J=z;if(typeof O=="function"){var oe=O;O=function(){var pe=WD(J);oe.call(pe)}}jD(x,J,y,O)}else J=cSe(A,x,y,O,L);return WD(J)}Da=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var A=Nr(x.pendingLanes);A!==0&&(Sr(x,A|1),wo(x,mi()),(ur&6)===0&&(Ux=mi()+500,_p()))}break;case 13:Zg(function(){var L=xd(y,1);if(L!==null){var O=$s();Xu(L,y,1,O)}}),zB(y,1)}},Ia=function(y){if(y.tag===13){var x=xd(y,134217728);if(x!==null){var A=$s();Xu(x,y,134217728,A)}zB(y,134217728)}},vx=function(y){if(y.tag===13){var x=Ap(y),A=xd(y,x);if(A!==null){var L=$s();Xu(A,y,x,L)}zB(y,x)}},Hc=function(){return Mn},uX=function(y,x){var A=Mn;try{return Mn=y,x()}finally{Mn=A}},yt=function(y,x,A){switch(x){case"input":if(on(y,A),x=A.name,A.type==="radio"&&x!=null){for(A=y;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<A.length;x++){var L=A[x];if(L!==y&&L.form===y.form){var O=hD(L);if(!O)throw Error(t(90));He(L),on(L,O)}}}break;case"textarea":Z(y,A);break;case"select":x=A.value,x!=null&&Cn(y,!!A.multiple,x,!1)}},Ht=RB,Dn=Zg;var hSe={usingClientEntryPoint:!1,Events:[Dw,Ax,hD,Le,Ye,RB]},Gw={findFiberByHostInstance:Gg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dSe={bundleType:Gw.bundleType,version:Gw.version,rendererPackageName:Gw.rendererPackageName,rendererConfig:Gw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=dw(y),y===null?null:y.stateNode},findFiberByHostInstance:Gw.findFiberByHostInstance||uSe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qD=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qD.isDisabled&&qD.supportsFiber)try{Dt=qD.inject(dSe),ut=qD}catch{}}return To.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hSe,To.createPortal=function(y,x){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!HB(x))throw Error(t(200));return lSe(y,x,null,A)},To.createRoot=function(y,x){if(!HB(y))throw Error(t(299));var A=!1,L="",O=EY;return x!=null&&(x.unstable_strictMode===!0&&(A=!0),x.identifierPrefix!==void 0&&(L=x.identifierPrefix),x.onRecoverableError!==void 0&&(O=x.onRecoverableError)),x=UB(y,1,!1,null,null,A,!1,L,O),y[md]=x.current,Aw(y.nodeType===8?y.parentNode:y),new VB(x)},To.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(t(188)):(y=Object.keys(y).join(","),Error(t(268,y)));return y=dw(x),y=y===null?null:y.stateNode,y},To.flushSync=function(y){return Zg(y)},To.hydrate=function(y,x,A){if(!$D(x))throw Error(t(200));return YD(null,y,x,!0,A)},To.hydrateRoot=function(y,x,A){if(!HB(y))throw Error(t(405));var L=A!=null&&A.hydratedSources||null,O=!1,z="",J=EY;if(A!=null&&(A.unstable_strictMode===!0&&(O=!0),A.identifierPrefix!==void 0&&(z=A.identifierPrefix),A.onRecoverableError!==void 0&&(J=A.onRecoverableError)),x=wY(x,null,y,1,A??null,O,!1,z,J),y[md]=x.current,Aw(y),L)for(y=0;y<L.length;y++)A=L[y],O=A._getVersion,O=O(A._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[A,O]:x.mutableSourceEagerHydrationData.push(A,O);return new XD(x)},To.render=function(y,x,A){if(!$D(x))throw Error(t(200));return YD(null,y,x,!1,A)},To.unmountComponentAtNode=function(y){if(!$D(y))throw Error(t(40));return y._reactRootContainer?(Zg(function(){YD(null,null,y,!1,function(){y._reactRootContainer=null,y[md]=null})}),!0):!1},To.unstable_batchedUpdates=RB,To.unstable_renderSubtreeIntoContainer=function(y,x,A,L){if(!$D(A))throw Error(t(200));if(y==null||y._reactInternals===void 0)throw Error(t(38));return YD(y,x,A,!1,L)},To.version="18.3.1-next-f1338f8080-20240426",To}var kY;function doe(){if(kY)return XB.exports;kY=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),XB.exports=wSe(),XB.exports}var OY;function TSe(){if(OY)return KD;OY=1;var n=doe();return KD.createRoot=n.createRoot,KD.hydrateRoot=n.hydrateRoot,KD}var ESe=TSe();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var BY="popstate";function ASe(n={}){function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return cU("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:sA(i)}return MSe(e,t,null,n)}function wi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Qh(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CSe(){return Math.random().toString(36).substring(2,10)}function FY(n,e){return{usr:n.state,key:n.key,idx:e}}function cU(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?MS(e):e,state:t,key:e&&e.key||r||CSe()}}function sA({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function MS(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function MSe(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",l=null,u=c();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function c(){return(s.state||{idx:null}).idx}function h(){o="POP";let g=c(),v=g==null?null:g-u;u=g,l&&l({action:o,location:m.location,delta:v})}function d(g,v){o="PUSH";let b=cU(m.location,g,v);u=c()+1;let S=FY(b,u),w=m.createHref(b);try{s.pushState(S,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}a&&l&&l({action:o,location:m.location,delta:1})}function f(g,v){o="REPLACE";let b=cU(m.location,g,v);u=c();let S=FY(b,u),w=m.createHref(b);s.replaceState(S,"",w),a&&l&&l({action:o,location:m.location,delta:0})}function p(g){return DSe(g)}let m={get action(){return o},get location(){return n(i,s)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(BY,h),l=g,()=>{i.removeEventListener(BY,h),l=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(g){return s.go(g)}};return m}function DSe(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),wi(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:sA(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function foe(n,e,t="/"){return ISe(n,e,t,!1)}function ISe(n,e,t,r){let i=typeof e=="string"?MS(e):e,a=Gf(i.pathname||"/",t);if(a==null)return null;let s=poe(n);PSe(s);let o=null;for(let l=0;o==null&&l<s.length;++l){let u=HSe(a);o=zSe(s[l],u,r)}return o}function poe(n,e=[],t=[],r="",i=!1){let a=(s,o,l=i,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;wi(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let h=Lf([r,c.relativePath]),d=t.concat(c);s.children&&s.children.length>0&&(wi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),poe(s.children,e,d,h,l)),!(s.path==null&&!s.index)&&e.push({path:h,score:FSe(h,s.index),routesMeta:d})};return n.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,o);else for(let u of moe(s.path))a(s,o,!0,u)}),e}function moe(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=moe(r.join("/")),o=[];return o.push(...s.map(l=>l===""?a:[a,l].join("/"))),i&&o.push(...s),o.map(l=>n.startsWith("/")&&l===""?"/":l)}function PSe(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:USe(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var LSe=/^:[\w-]+$/,RSe=3,NSe=2,kSe=1,OSe=10,BSe=-2,UY=n=>n==="*";function FSe(n,e){let t=n.split("/"),r=t.length;return t.some(UY)&&(r+=BSe),e&&(r+=NSe),t.filter(i=>!UY(i)).reduce((i,a)=>i+(LSe.test(a)?RSe:a===""?kSe:OSe),r)}function USe(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function zSe(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",s=[];for(let o=0;o<r.length;++o){let l=r[o],u=o===r.length-1,c=a==="/"?e:e.slice(a.length)||"/",h=DR({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),d=l.route;if(!h&&u&&t&&!r[r.length-1].route.index&&(h=DR({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Lf([a,h.pathname]),pathnameBase:XSe(Lf([a,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(a=Lf([a,h.pathnameBase]))}return s}function DR(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=VSe(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:h},d)=>{if(c==="*"){let p=o[d]||"";s=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const f=o[d];return h&&!f?u[c]=void 0:u[c]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:n}}function VSe(n,e=!1,t=!0){Qh(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,l)=>(r.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function HSe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qh(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Gf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var GSe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function jSe(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?MS(n):n,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=zY(t.substring(1),"/"):a=zY(t,e)):a=e,{pathname:a,search:$Se(r),hash:YSe(i)}}function zY(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qB(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WSe(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function goe(n){let e=WSe(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function voe(n,e,t,r=!1){let i;typeof n=="string"?i=MS(n):(i={...n},wi(!i.pathname||!i.pathname.includes("?"),qB("?","pathname","search",i)),wi(!i.pathname||!i.pathname.includes("#"),qB("#","pathname","hash",i)),wi(!i.search||!i.search.includes("#"),qB("#","search","hash",i)));let a=n===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=t;else{let h=e.length-1;if(!r&&s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),h-=1;i.pathname=d.join("/")}o=h>=0?e[h]:"/"}let l=jSe(i,o),u=s&&s!=="/"&&s.endsWith("/"),c=(a||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Lf=n=>n.join("/").replace(/\/\/+/g,"/"),XSe=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$Se=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,YSe=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,qSe=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function KSe(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function ZSe(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var yoe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xoe(n,e){let t=n;if(typeof t!="string"||!GSe.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(yoe)try{let a=new URL(window.location.href),s=t.startsWith("//")?new URL(a.protocol+t):new URL(t),o=Gf(s.pathname,e);s.origin===a.origin&&o!=null?t=o+s.search+s.hash:i=!0}catch{Qh(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var _oe=["POST","PUT","PATCH","DELETE"];new Set(_oe);var QSe=["GET",..._oe];new Set(QSe);var DS=ee.createContext(null);DS.displayName="DataRouter";var Ok=ee.createContext(null);Ok.displayName="DataRouterState";var JSe=ee.createContext(!1),boe=ee.createContext({isTransitioning:!1});boe.displayName="ViewTransition";var ewe=ee.createContext(new Map);ewe.displayName="Fetchers";var twe=ee.createContext(null);twe.displayName="Await";var Fu=ee.createContext(null);Fu.displayName="Navigation";var a2=ee.createContext(null);a2.displayName="Location";var ip=ee.createContext({outlet:null,matches:[],isDataRoute:!1});ip.displayName="Route";var q9=ee.createContext(null);q9.displayName="RouteError";var Soe="REACT_ROUTER_ERROR",nwe="REDIRECT",rwe="ROUTE_ERROR_RESPONSE";function iwe(n){if(n.startsWith(`${Soe}:${nwe}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function awe(n){if(n.startsWith(`${Soe}:${rwe}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new qSe(e.status,e.statusText,e.data)}catch{}}function swe(n,{relative:e}={}){wi(s2(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=ee.useContext(Fu),{hash:i,pathname:a,search:s}=o2(n,{relative:e}),o=a;return t!=="/"&&(o=a==="/"?t:Lf([t,a])),r.createHref({pathname:o,search:s,hash:i})}function s2(){return ee.useContext(a2)!=null}function tx(){return wi(s2(),"useLocation() may be used only in the context of a <Router> component."),ee.useContext(a2).location}var woe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Toe(n){ee.useContext(Fu).static||ee.useLayoutEffect(n)}function owe(){let{isDataRoute:n}=ee.useContext(ip);return n?_we():lwe()}function lwe(){wi(s2(),"useNavigate() may be used only in the context of a <Router> component.");let n=ee.useContext(DS),{basename:e,navigator:t}=ee.useContext(Fu),{matches:r}=ee.useContext(ip),{pathname:i}=tx(),a=JSON.stringify(goe(r)),s=ee.useRef(!1);return Toe(()=>{s.current=!0}),ee.useCallback((l,u={})=>{if(Qh(s.current,woe),!s.current)return;if(typeof l=="number"){t.go(l);return}let c=voe(l,JSON.parse(a),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Lf([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,a,i,n])}ee.createContext(null);function o2(n,{relative:e}={}){let{matches:t}=ee.useContext(ip),{pathname:r}=tx(),i=JSON.stringify(goe(t));return ee.useMemo(()=>voe(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function uwe(n,e){return Eoe(n,e)}function Eoe(n,e,t,r,i){var b;wi(s2(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=ee.useContext(Fu),{matches:s}=ee.useContext(ip),o=s[s.length-1],l=o?o.params:{},u=o?o.pathname:"/",c=o?o.pathnameBase:"/",h=o&&o.route;{let S=h&&h.path||"";Coe(u,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let d=tx(),f;if(e){let S=typeof e=="string"?MS(e):e;wi(c==="/"||((b=S.pathname)==null?void 0:b.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${S.pathname}" was given in the \`location\` prop.`),f=S}else f=d;let p=f.pathname||"/",m=p;if(c!=="/"){let S=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(S.length).join("/")}let g=foe(n,{pathname:m});Qh(h||g!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Qh(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=pwe(g&&g.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:Lf([c,a.encodeLocation?a.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Lf([c,a.encodeLocation?a.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),s,t,r,i);return e&&v?ee.createElement(a2.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},v):v}function cwe(){let n=xwe(),e=KSe(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=ee.createElement(ee.Fragment,null,ee.createElement("p",null," Hey developer "),ee.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",ee.createElement("code",{style:a},"ErrorBoundary")," or"," ",ee.createElement("code",{style:a},"errorElement")," prop on your route.")),ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},e),t?ee.createElement("pre",{style:i},t):null,s)}var hwe=ee.createElement(cwe,null),Aoe=class extends ee.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=awe(n.digest);t&&(n=t)}let e=n!==void 0?ee.createElement(ip.Provider,{value:this.props.routeContext},ee.createElement(q9.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?ee.createElement(dwe,{error:n},e):e}};Aoe.contextType=JSe;var KB=new WeakMap;function dwe({children:n,error:e}){let{basename:t}=ee.useContext(Fu);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=iwe(e.digest);if(r){let i=KB.get(e);if(i)throw i;let a=xoe(r.location,t);if(yoe&&!KB.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw KB.set(e,s),s}return ee.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function fwe({routeContext:n,match:e,children:t}){let r=ee.useContext(DS);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),ee.createElement(ip.Provider,{value:n},t)}function pwe(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,s=t==null?void 0:t.errors;if(s!=null){let c=a.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);wi(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,c+1))}let o=!1,l=-1;if(t)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(l=c),h.route.id){let{loaderData:d,errors:f}=t,p=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!f||f[h.route.id]===void 0);if(h.route.lazy||p){o=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}let u=t&&r?(c,h)=>{var d,f;r(c,{location:t.location,params:((f=(d=t.matches)==null?void 0:d[0])==null?void 0:f.params)??{},unstable_pattern:ZSe(t.matches),errorInfo:h})}:void 0;return a.reduceRight((c,h,d)=>{let f,p=!1,m=null,g=null;t&&(f=s&&h.route.id?s[h.route.id]:void 0,m=h.route.errorElement||hwe,o&&(l<0&&d===0?(Coe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,g=null):l===d&&(p=!0,g=h.route.hydrateFallbackElement||null)));let v=e.concat(a.slice(0,d+1)),b=()=>{let S;return f?S=m:p?S=g:h.route.Component?S=ee.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=c,ee.createElement(fwe,{match:h,routeContext:{outlet:c,matches:v,isDataRoute:t!=null},children:S})};return t&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?ee.createElement(Aoe,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):b()},null)}function K9(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mwe(n){let e=ee.useContext(DS);return wi(e,K9(n)),e}function gwe(n){let e=ee.useContext(Ok);return wi(e,K9(n)),e}function vwe(n){let e=ee.useContext(ip);return wi(e,K9(n)),e}function Z9(n){let e=vwe(n),t=e.matches[e.matches.length-1];return wi(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ywe(){return Z9("useRouteId")}function xwe(){var r;let n=ee.useContext(q9),e=gwe("useRouteError"),t=Z9("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function _we(){let{router:n}=mwe("useNavigate"),e=Z9("useNavigate"),t=ee.useRef(!1);return Toe(()=>{t.current=!0}),ee.useCallback(async(i,a={})=>{Qh(t.current,woe),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var VY={};function Coe(n,e,t){!e&&!VY[n]&&(VY[n]=!0,Qh(!1,t))}ee.memo(bwe);function bwe({routes:n,future:e,state:t,onError:r}){return Eoe(n,void 0,t,r,e)}function hU(n){wi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Swe({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){wi(!s2(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),l=ee.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof t=="string"&&(t=MS(t));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=t,p=ee.useMemo(()=>{let m=Gf(u,o);return m==null?null:{location:{pathname:m,search:c,hash:h,state:d,key:f},navigationType:r}},[o,u,c,h,d,f,r]);return Qh(p!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:ee.createElement(Fu.Provider,{value:l},ee.createElement(a2.Provider,{children:e,value:p}))}function wwe({children:n,location:e}){return uwe(dU(n),e)}function dU(n,e=[]){let t=[];return ee.Children.forEach(n,(r,i)=>{if(!ee.isValidElement(r))return;let a=[...e,i];if(r.type===ee.Fragment){t.push.apply(t,dU(r.props.children,a));return}wi(r.type===hU,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wi(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=dU(r.props.children,a)),t.push(s)}),t}var lL="get",uL="application/x-www-form-urlencoded";function Bk(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Twe(n){return Bk(n)&&n.tagName.toLowerCase()==="button"}function Ewe(n){return Bk(n)&&n.tagName.toLowerCase()==="form"}function Awe(n){return Bk(n)&&n.tagName.toLowerCase()==="input"}function Cwe(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Mwe(n,e){return n.button===0&&(!e||e==="_self")&&!Cwe(n)}var ZD=null;function Dwe(){if(ZD===null)try{new FormData(document.createElement("form"),0),ZD=!1}catch{ZD=!0}return ZD}var Iwe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ZB(n){return n!=null&&!Iwe.has(n)?(Qh(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uL}"`),null):n}function Pwe(n,e){let t,r,i,a,s;if(Ewe(n)){let o=n.getAttribute("action");r=o?Gf(o,e):null,t=n.getAttribute("method")||lL,i=ZB(n.getAttribute("enctype"))||uL,a=new FormData(n)}else if(Twe(n)||Awe(n)&&(n.type==="submit"||n.type==="image")){let o=n.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||o.getAttribute("action");if(r=l?Gf(l,e):null,t=n.getAttribute("formmethod")||o.getAttribute("method")||lL,i=ZB(n.getAttribute("formenctype"))||ZB(o.getAttribute("enctype"))||uL,a=new FormData(o,n),!Dwe()){let{name:u,type:c,value:h}=n;if(c==="image"){let d=u?`${u}.`:"";a.append(`${d}x`,"0"),a.append(`${d}y`,"0")}else u&&a.append(u,h)}}else{if(Bk(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=lL,r=null,i=uL,s=n}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Q9(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Lwe(n,e,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&Gf(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function Rwe(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Nwe(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function kwe(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await Rwe(a,t);return s.links?s.links():[]}return[]}));return Uwe(r.flat(1).filter(Nwe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function HY(n,e,t,r,i,a){let s=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,o=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return a==="assets"?e.filter((l,u)=>s(l,u)||o(l,u)):a==="data"?e.filter((l,u)=>{var h;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(s(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function Owe(n,e,{includeHydrateFallback:t}={}){return Bwe(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Bwe(n){return[...new Set(n)]}function Fwe(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Uwe(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(Fwe(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function Moe(){let n=ee.useContext(DS);return Q9(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function zwe(){let n=ee.useContext(Ok);return Q9(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var J9=ee.createContext(void 0);J9.displayName="FrameworkContext";function Doe(){let n=ee.useContext(J9);return Q9(n,"You must render this element inside a <HydratedRouter> element"),n}function Vwe(n,e){let t=ee.useContext(J9),[r,i]=ee.useState(!1),[a,s]=ee.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,d=ee.useRef(null);ee.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let m=v=>{v.forEach(b=>{s(b.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[n]),ee.useEffect(()=>{if(r){let m=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(m)}}},[r]);let f=()=>{i(!0)},p=()=>{i(!1),s(!1)};return t?n!=="intent"?[a,d,{}]:[a,d,{onFocus:Ww(o,f),onBlur:Ww(l,p),onMouseEnter:Ww(u,f),onMouseLeave:Ww(c,p),onTouchStart:Ww(h,f)}]:[!1,d,{}]}function Ww(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Hwe({page:n,...e}){let{router:t}=Moe(),r=ee.useMemo(()=>foe(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?ee.createElement(jwe,{page:n,matches:r,...e}):null}function Gwe(n){let{manifest:e,routeModules:t}=Doe(),[r,i]=ee.useState([]);return ee.useEffect(()=>{let a=!1;return kwe(n,e,t).then(s=>{a||i(s)}),()=>{a=!0}},[n,e,t]),r}function jwe({page:n,matches:e,...t}){let r=tx(),{future:i,manifest:a,routeModules:s}=Doe(),{basename:o}=Moe(),{loaderData:l,matches:u}=zwe(),c=ee.useMemo(()=>HY(n,e,u,a,r,"data"),[n,e,u,a,r]),h=ee.useMemo(()=>HY(n,e,u,a,r,"assets"),[n,e,u,a,r]),d=ee.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let m=new Set,g=!1;if(e.forEach(b=>{var w;let S=a.routes[b.route.id];!S||!S.hasLoader||(!c.some(E=>E.route.id===b.route.id)&&b.route.id in l&&((w=s[b.route.id])!=null&&w.shouldRevalidate)||S.hasClientLoader?g=!0:m.add(b.route.id))}),m.size===0)return[];let v=Lwe(n,o,i.unstable_trailingSlashAwareDataRequests,"data");return g&&m.size>0&&v.searchParams.set("_routes",e.filter(b=>m.has(b.route.id)).map(b=>b.route.id).join(",")),[v.pathname+v.search]},[o,i.unstable_trailingSlashAwareDataRequests,l,r,a,c,e,n,s]),f=ee.useMemo(()=>Owe(h,a),[h,a]),p=Gwe(h);return ee.createElement(ee.Fragment,null,d.map(m=>ee.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...t})),f.map(m=>ee.createElement("link",{key:m,rel:"modulepreload",href:m,...t})),p.map(({key:m,link:g})=>ee.createElement("link",{key:m,nonce:t.nonce,...g,crossOrigin:g.crossOrigin??t.crossOrigin})))}function Wwe(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Xwe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xwe&&(window.__reactRouterVersion="7.13.0")}catch{}function $we({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=ee.useRef();i.current==null&&(i.current=ASe({window:r,v5Compat:!0}));let a=i.current,[s,o]=ee.useState({action:a.action,location:a.location}),l=ee.useCallback(u=>{t===!1?o(u):ee.startTransition(()=>o(u))},[t]);return ee.useLayoutEffect(()=>a.listen(l),[a,l]),ee.createElement(Swe,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:t})}var Ioe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Poe=ee.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h,unstable_defaultShouldRevalidate:d,...f},p){let{basename:m,unstable_useTransitions:g}=ee.useContext(Fu),v=typeof u=="string"&&Ioe.test(u),b=xoe(u,m);u=b.to;let S=swe(u,{relative:i}),[w,E,T]=Vwe(r,f),M=Zwe(u,{replace:s,state:o,target:l,preventScrollReset:c,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:d,unstable_useTransitions:g});function P(D){e&&e(D),D.defaultPrevented||M(D)}let I=ee.createElement("a",{...f,...T,href:b.absoluteURL||S,onClick:b.isExternal||a?e:P,ref:Wwe(p,E),target:l,"data-discover":!v&&t==="render"?"true":void 0});return w&&!v?ee.createElement(ee.Fragment,null,I,ee.createElement(Hwe,{page:S})):I});Poe.displayName="Link";var Ywe=ee.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:l,...u},c){let h=o2(s,{relative:u.relative}),d=tx(),f=ee.useContext(Ok),{navigator:p,basename:m}=ee.useContext(Fu),g=f!=null&&nTe(h)&&o===!0,v=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,b=d.pathname,S=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;t||(b=b.toLowerCase(),S=S?S.toLowerCase():null,v=v.toLowerCase()),S&&m&&(S=Gf(S,m)||S);const w=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let E=b===v||!i&&b.startsWith(v)&&b.charAt(w)==="/",T=S!=null&&(S===v||!i&&S.startsWith(v)&&S.charAt(v.length)==="/"),M={isActive:E,isPending:T,isTransitioning:g},P=E?e:void 0,I;typeof r=="function"?I=r(M):I=[r,E?"active":null,T?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let D=typeof a=="function"?a(M):a;return ee.createElement(Poe,{...u,"aria-current":P,className:I,ref:c,style:D,to:s,viewTransition:o},typeof l=="function"?l(M):l)});Ywe.displayName="NavLink";var qwe=ee.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:s=lL,action:o,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,unstable_defaultShouldRevalidate:d,...f},p)=>{let{unstable_useTransitions:m}=ee.useContext(Fu),g=eTe(),v=tTe(o,{relative:u}),b=s.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&Ioe.test(o),w=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let T=E.nativeEvent.submitter,M=(T==null?void 0:T.getAttribute("formmethod"))||s,P=()=>g(T||E.currentTarget,{fetcherKey:e,method:M,navigate:t,replace:i,state:a,relative:u,preventScrollReset:c,viewTransition:h,unstable_defaultShouldRevalidate:d});m&&t!==!1?ee.startTransition(()=>P()):P()};return ee.createElement("form",{ref:p,method:b,action:v,onSubmit:r?l:w,...f,"data-discover":!S&&n==="render"?"true":void 0})});qwe.displayName="Form";function Kwe(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Loe(n){let e=ee.useContext(DS);return wi(e,Kwe(n)),e}function Zwe(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let u=owe(),c=tx(),h=o2(n,{relative:a});return ee.useCallback(d=>{if(Mwe(d,e)){d.preventDefault();let f=t!==void 0?t:sA(c)===sA(h),p=()=>u(n,{replace:f,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});l?ee.startTransition(()=>p()):p()}},[c,u,h,t,r,e,n,i,a,s,o,l])}var Qwe=0,Jwe=()=>`__${String(++Qwe)}__`;function eTe(){let{router:n}=Loe("useSubmit"),{basename:e}=ee.useContext(Fu),t=ywe(),r=n.fetch,i=n.navigate;return ee.useCallback(async(a,s={})=>{let{action:o,method:l,encType:u,formData:c,body:h}=Pwe(a,e);if(s.navigate===!1){let d=s.fetcherKey||Jwe();await r(d,t,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:c,body:h,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,t])}function tTe(n,{relative:e}={}){let{basename:t}=ee.useContext(Fu),r=ee.useContext(ip);wi(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...o2(n||".",{relative:e})},s=tx();if(n==null){a.search=s.search;let o=new URLSearchParams(a.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(h=>h).forEach(h=>o.append("index",h));let c=o.toString();a.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Lf([t,a.pathname])),sA(a)}function nTe(n,{relative:e}={}){let t=ee.useContext(boe);wi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Loe("useViewTransitionState"),i=o2(n,{relative:e});if(!t.isTransitioning)return!1;let a=Gf(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=Gf(t.nextLocation.pathname,r)||t.nextLocation.pathname;return DR(i.pathname,s)!=null||DR(i.pathname,a)!=null}var rTe=doe();const iTe=i2(rTe);function aTe(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const sTe=n=>{switch(n){case"success":return uTe;case"info":return hTe;case"warning":return cTe;case"error":return dTe;default:return null}},oTe=Array(12).fill(0),lTe=({visible:n,className:e})=>st.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},st.createElement("div",{className:"sonner-spinner"},oTe.map((t,r)=>st.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),uTe=st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},st.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cTe=st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},st.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),hTe=st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},st.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),dTe=st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},st.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fTe=st.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},st.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),st.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pTe=()=>{const[n,e]=st.useState(document.hidden);return st.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let fU=1;class mTe{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:fU++,s=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...i,dismissible:o,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,s;const o=i.then(async u=>{if(s=["resolve",u],st.isValidElement(u))a=!1,this.create({id:r,type:"default",message:u});else if(vTe(u)&&!u.ok){a=!1;const h=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description,p=typeof h=="object"&&!st.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:d,...p})}else if(u instanceof Error){a=!1;const h=typeof t.error=="function"?await t.error(u):t.error,d=typeof t.description=="function"?await t.description(u):t.description,p=typeof h=="object"&&!st.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:d,...p})}else if(t.success!==void 0){a=!1;const h=typeof t.success=="function"?await t.success(u):t.success,d=typeof t.description=="function"?await t.description(u):t.description,p=typeof h=="object"&&!st.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:d,...p})}}).catch(async u=>{if(s=["reject",u],t.error!==void 0){a=!1;const c=typeof t.error=="function"?await t.error(u):t.error,h=typeof t.description=="function"?await t.description(u):t.description,f=typeof c=="object"&&!st.isValidElement(c)?c:{message:c};this.create({id:r,type:"error",description:h,...f})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),l=()=>new Promise((u,c)=>o.then(()=>s[0]==="reject"?c(s[1]):u(s[1])).catch(c));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||fU++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Fo=new mTe,gTe=(n,e)=>{const t=(e==null?void 0:e.id)||fU++;return Fo.addToast({title:n,...e,id:t}),t},vTe=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",yTe=gTe,xTe=()=>Fo.toasts,_Te=()=>Fo.getActiveToasts();Object.assign(yTe,{success:Fo.success,info:Fo.info,warning:Fo.warning,error:Fo.error,custom:Fo.custom,message:Fo.message,promise:Fo.promise,dismiss:Fo.dismiss,loading:Fo.loading},{getHistory:xTe,getToasts:_Te});aTe("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function QD(n){return n.label!==void 0}const bTe=3,STe="24px",wTe="16px",GY=4e3,TTe=356,ETe=14,ATe=45,CTe=200;function $c(...n){return n.filter(Boolean).join(" ")}function MTe(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const DTe=n=>{var e,t,r,i,a,s,o,l,u;const{invert:c,toast:h,unstyled:d,interacting:f,setHeights:p,visibleToasts:m,heights:g,index:v,toasts:b,expanded:S,removeToast:w,defaultRichColors:E,closeButton:T,style:M,cancelButtonStyle:P,actionButtonStyle:I,className:D="",descriptionClassName:R="",duration:B,position:k,gap:V,expandByDefault:G,classNames:F,icons:X,closeButtonAriaLabel:j="Close toast"}=n,[Q,H]=st.useState(null),[K,te]=st.useState(null),[Y,de]=st.useState(!1),[ge,se]=st.useState(!1),[he,fe]=st.useState(!1),[Ee,Ce]=st.useState(!1),[Re,He]=st.useState(!1),[pt,lt]=st.useState(0),[Mt,mt]=st.useState(0),on=st.useRef(h.duration||B||GY),ce=st.useRef(null),ln=st.useRef(null),gn=v===0,Cn=v+1<=m,ht=h.type,ie=h.dismissible!==!1,Z=h.className||"",_e=h.descriptionClassName||"",le=st.useMemo(()=>g.findIndex(Le=>Le.toastId===h.id)||0,[g,h.id]),xe=st.useMemo(()=>{var Le;return(Le=h.closeButton)!=null?Le:T},[h.closeButton,T]),we=st.useMemo(()=>h.duration||B||GY,[h.duration,B]),$e=st.useRef(0),Ve=st.useRef(0),ft=st.useRef(0),Vt=st.useRef(null),[Ge,ot]=k.split("-"),Et=st.useMemo(()=>g.reduce((Le,Ye,Ht)=>Ht>=le?Le:Le+Ye.height,0),[g,le]),gt=pTe(),nt=h.invert||c,Zt=ht==="loading";Ve.current=st.useMemo(()=>le*V+Et,[le,Et]),st.useEffect(()=>{on.current=we},[we]),st.useEffect(()=>{de(!0)},[]),st.useEffect(()=>{const Le=ln.current;if(Le){const Ye=Le.getBoundingClientRect().height;return mt(Ye),p(Ht=>[{toastId:h.id,height:Ye,position:h.position},...Ht]),()=>p(Ht=>Ht.filter(Dn=>Dn.toastId!==h.id))}},[p,h.id]),st.useLayoutEffect(()=>{if(!Y)return;const Le=ln.current,Ye=Le.style.height;Le.style.height="auto";const Ht=Le.getBoundingClientRect().height;Le.style.height=Ye,mt(Ht),p(Dn=>Dn.find(gr=>gr.toastId===h.id)?Dn.map(gr=>gr.toastId===h.id?{...gr,height:Ht}:gr):[{toastId:h.id,height:Ht,position:h.position},...Dn])},[Y,h.title,h.description,p,h.id,h.jsx,h.action,h.cancel]);const me=st.useCallback(()=>{se(!0),lt(Ve.current),p(Le=>Le.filter(Ye=>Ye.toastId!==h.id)),setTimeout(()=>{w(h)},CTe)},[h,w,p,Ve]);st.useEffect(()=>{if(h.promise&&ht==="loading"||h.duration===1/0||h.type==="loading")return;let Le;return S||f||gt?(()=>{if(ft.current<$e.current){const Dn=new Date().getTime()-$e.current;on.current=on.current-Dn}ft.current=new Date().getTime()})():(()=>{on.current!==1/0&&($e.current=new Date().getTime(),Le=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),me()},on.current))})(),()=>clearTimeout(Le)},[S,f,h,ht,gt,me]),st.useEffect(()=>{h.delete&&(me(),h.onDismiss==null||h.onDismiss.call(h,h))},[me,h.delete]);function yt(){var Le;if(X!=null&&X.loading){var Ye;return st.createElement("div",{className:$c(F==null?void 0:F.loader,h==null||(Ye=h.classNames)==null?void 0:Ye.loader,"sonner-loader"),"data-visible":ht==="loading"},X.loading)}return st.createElement(lTe,{className:$c(F==null?void 0:F.loader,h==null||(Le=h.classNames)==null?void 0:Le.loader),visible:ht==="loading"})}const tt=h.icon||(X==null?void 0:X[ht])||sTe(ht);var xt,Ze;return st.createElement("li",{tabIndex:0,ref:ln,className:$c(D,Z,F==null?void 0:F.toast,h==null||(e=h.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[ht],h==null||(t=h.classNames)==null?void 0:t[ht]),"data-sonner-toast":"","data-rich-colors":(xt=h.richColors)!=null?xt:E,"data-styled":!(h.jsx||h.unstyled||d),"data-mounted":Y,"data-promise":!!h.promise,"data-swiped":Re,"data-removed":ge,"data-visible":Cn,"data-y-position":Ge,"data-x-position":ot,"data-index":v,"data-front":gn,"data-swiping":he,"data-dismissible":ie,"data-type":ht,"data-invert":nt,"data-swipe-out":Ee,"data-swipe-direction":K,"data-expanded":!!(S||G&&Y),"data-testid":h.testId,style:{"--index":v,"--toasts-before":v,"--z-index":b.length-v,"--offset":`${ge?pt:Ve.current}px`,"--initial-height":G?"auto":`${Mt}px`,...M,...h.style},onDragEnd:()=>{fe(!1),H(null),Vt.current=null},onPointerDown:Le=>{Le.button!==2&&(Zt||!ie||(ce.current=new Date,lt(Ve.current),Le.target.setPointerCapture(Le.pointerId),Le.target.tagName!=="BUTTON"&&(fe(!0),Vt.current={x:Le.clientX,y:Le.clientY})))},onPointerUp:()=>{var Le,Ye,Ht;if(Ee||!ie)return;Vt.current=null;const Dn=Number(((Le=ln.current)==null?void 0:Le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Xn=Number(((Ye=ln.current)==null?void 0:Ye.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),gr=new Date().getTime()-((Ht=ce.current)==null?void 0:Ht.getTime()),Rr=Q==="x"?Dn:Xn,Uc=Math.abs(Rr)/gr;if(Math.abs(Rr)>=ATe||Uc>.11){lt(Ve.current),h.onDismiss==null||h.onDismiss.call(h,h),te(Q==="x"?Dn>0?"right":"left":Xn>0?"down":"up"),me(),Ce(!0);return}else{var Qi,Za;(Qi=ln.current)==null||Qi.style.setProperty("--swipe-amount-x","0px"),(Za=ln.current)==null||Za.style.setProperty("--swipe-amount-y","0px")}He(!1),fe(!1),H(null)},onPointerMove:Le=>{var Ye,Ht,Dn;if(!Vt.current||!ie||((Ye=window.getSelection())==null?void 0:Ye.toString().length)>0)return;const gr=Le.clientY-Vt.current.y,Rr=Le.clientX-Vt.current.x;var Uc;const Qi=(Uc=n.swipeDirections)!=null?Uc:MTe(k);!Q&&(Math.abs(Rr)>1||Math.abs(gr)>1)&&H(Math.abs(Rr)>Math.abs(gr)?"x":"y");let Za={x:0,y:0};const zc=js=>1/(1.5+Math.abs(js)/20);if(Q==="y"){if(Qi.includes("top")||Qi.includes("bottom"))if(Qi.includes("top")&&gr<0||Qi.includes("bottom")&&gr>0)Za.y=gr;else{const js=gr*zc(gr);Za.y=Math.abs(js)<Math.abs(gr)?js:gr}}else if(Q==="x"&&(Qi.includes("left")||Qi.includes("right")))if(Qi.includes("left")&&Rr<0||Qi.includes("right")&&Rr>0)Za.x=Rr;else{const js=Rr*zc(Rr);Za.x=Math.abs(js)<Math.abs(Rr)?js:Rr}(Math.abs(Za.x)>0||Math.abs(Za.y)>0)&&He(!0),(Ht=ln.current)==null||Ht.style.setProperty("--swipe-amount-x",`${Za.x}px`),(Dn=ln.current)==null||Dn.style.setProperty("--swipe-amount-y",`${Za.y}px`)}},xe&&!h.jsx&&ht!=="loading"?st.createElement("button",{"aria-label":j,"data-disabled":Zt,"data-close-button":!0,onClick:Zt||!ie?()=>{}:()=>{me(),h.onDismiss==null||h.onDismiss.call(h,h)},className:$c(F==null?void 0:F.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(Ze=X==null?void 0:X.close)!=null?Ze:fTe):null,(ht||h.icon||h.promise)&&h.icon!==null&&((X==null?void 0:X[ht])!==null||h.icon)?st.createElement("div",{"data-icon":"",className:$c(F==null?void 0:F.icon,h==null||(i=h.classNames)==null?void 0:i.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||yt():null,h.type!=="loading"?tt:null):null,st.createElement("div",{"data-content":"",className:$c(F==null?void 0:F.content,h==null||(a=h.classNames)==null?void 0:a.content)},st.createElement("div",{"data-title":"",className:$c(F==null?void 0:F.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?st.createElement("div",{"data-description":"",className:$c(R,_e,F==null?void 0:F.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),st.isValidElement(h.cancel)?h.cancel:h.cancel&&QD(h.cancel)?st.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||P,onClick:Le=>{QD(h.cancel)&&ie&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Le),me())},className:$c(F==null?void 0:F.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,st.isValidElement(h.action)?h.action:h.action&&QD(h.action)?st.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||I,onClick:Le=>{QD(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Le),!Le.defaultPrevented&&me())},className:$c(F==null?void 0:F.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function jY(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function ITe(n,e){const t={};return[n,e].forEach((r,i)=>{const a=i===1,s=a?"--mobile-offset":"--offset",o=a?wTe:STe;function l(u){["top","right","bottom","left"].forEach(c=>{t[`${s}-${c}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?t[`${s}-${u}`]=o:t[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),t}const PTe=st.forwardRef(function(e,t){const{id:r,invert:i,position:a="bottom-right",hotkey:s=["altKey","KeyT"],expand:o,closeButton:l,className:u,offset:c,mobileOffset:h,theme:d="light",richColors:f,duration:p,style:m,visibleToasts:g=bTe,toastOptions:v,dir:b=jY(),gap:S=ETe,icons:w,containerAriaLabel:E="Notifications"}=e,[T,M]=st.useState([]),P=st.useMemo(()=>r?T.filter(Y=>Y.toasterId===r):T.filter(Y=>!Y.toasterId),[T,r]),I=st.useMemo(()=>Array.from(new Set([a].concat(P.filter(Y=>Y.position).map(Y=>Y.position)))),[P,a]),[D,R]=st.useState([]),[B,k]=st.useState(!1),[V,G]=st.useState(!1),[F,X]=st.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),j=st.useRef(null),Q=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),H=st.useRef(null),K=st.useRef(!1),te=st.useCallback(Y=>{M(de=>{var ge;return(ge=de.find(se=>se.id===Y.id))!=null&&ge.delete||Fo.dismiss(Y.id),de.filter(({id:se})=>se!==Y.id)})},[]);return st.useEffect(()=>Fo.subscribe(Y=>{if(Y.dismiss){requestAnimationFrame(()=>{M(de=>de.map(ge=>ge.id===Y.id?{...ge,delete:!0}:ge))});return}setTimeout(()=>{iTe.flushSync(()=>{M(de=>{const ge=de.findIndex(se=>se.id===Y.id);return ge!==-1?[...de.slice(0,ge),{...de[ge],...Y},...de.slice(ge+1)]:[Y,...de]})})})}),[T]),st.useEffect(()=>{if(d!=="system"){X(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?X("dark"):X("light")),typeof window>"u")return;const Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:de})=>{X(de?"dark":"light")})}catch{Y.addListener(({matches:ge})=>{try{X(ge?"dark":"light")}catch(se){console.error(se)}})}},[d]),st.useEffect(()=>{T.length<=1&&k(!1)},[T]),st.useEffect(()=>{const Y=de=>{var ge;if(s.every(fe=>de[fe]||de.code===fe)){var he;k(!0),(he=j.current)==null||he.focus()}de.code==="Escape"&&(document.activeElement===j.current||(ge=j.current)!=null&&ge.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[s]),st.useEffect(()=>{if(j.current)return()=>{H.current&&(H.current.focus({preventScroll:!0}),H.current=null,K.current=!1)}},[j.current]),st.createElement("section",{ref:t,"aria-label":`${E} ${Q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Y,de)=>{var ge;const[se,he]=Y.split("-");return P.length?st.createElement("ol",{key:Y,dir:b==="auto"?jY():b,tabIndex:-1,ref:j,className:u,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":se,"data-x-position":he,style:{"--front-toast-height":`${((ge=D[0])==null?void 0:ge.height)||0}px`,"--width":`${TTe}px`,"--gap":`${S}px`,...m,...ITe(c,h)},onBlur:fe=>{K.current&&!fe.currentTarget.contains(fe.relatedTarget)&&(K.current=!1,H.current&&(H.current.focus({preventScroll:!0}),H.current=null))},onFocus:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||K.current||(K.current=!0,H.current=fe.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{V||k(!1)},onDragEnd:()=>k(!1),onPointerDown:fe=>{fe.target instanceof HTMLElement&&fe.target.dataset.dismissible==="false"||G(!0)},onPointerUp:()=>G(!1)},P.filter(fe=>!fe.position&&de===0||fe.position===Y).map((fe,Ee)=>{var Ce,Re;return st.createElement(DTe,{key:fe.id,icons:w,index:Ee,toast:fe,defaultRichColors:f,duration:(Ce=v==null?void 0:v.duration)!=null?Ce:p,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:i,visibleToasts:g,closeButton:(Re=v==null?void 0:v.closeButton)!=null?Re:l,interacting:V,position:Y,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,closeButtonAriaLabel:v==null?void 0:v.closeButtonAriaLabel,removeToast:te,toasts:P.filter(He=>He.position==fe.position),heights:D.filter(He=>He.position==fe.position),setHeights:R,expandByDefault:o,gap:S,expanded:B,swipeDirections:e.swipeDirections})})):null}))});function Roe(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=Roe(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function LTe(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=Roe(n))&&(r&&(r+=" "),r+=e);return r}const RTe=(n,e)=>{const t=new Array(n.length+e.length);for(let r=0;r<n.length;r++)t[r]=n[r];for(let r=0;r<e.length;r++)t[n.length+r]=e[r];return t},NTe=(n,e)=>({classGroupId:n,validator:e}),Noe=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),IR="-",WY=[],kTe="arbitrary..",OTe=n=>{const e=FTe(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:s=>{if(s.startsWith("[")&&s.endsWith("]"))return BTe(s);const o=s.split(IR),l=o[0]===""&&o.length>1?1:0;return koe(o,l,e)},getConflictingClassGroupIds:(s,o)=>{if(o){const l=r[s],u=t[s];return l?u?RTe(u,l):l:u||WY}return t[s]||WY}}},koe=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const i=n[e],a=t.nextPart.get(i);if(a){const u=koe(n,e+1,a);if(u)return u}const s=t.validators;if(s===null)return;const o=e===0?n.join(IR):n.slice(e).join(IR),l=s.length;for(let u=0;u<l;u++){const c=s[u];if(c.validator(o))return c.classGroupId}},BTe=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),r=e.slice(0,t);return r?kTe+r:void 0})(),FTe=n=>{const{theme:e,classGroups:t}=n;return UTe(t,e)},UTe=(n,e)=>{const t=Noe();for(const r in n){const i=n[r];eG(i,t,r,e)}return t},eG=(n,e,t,r)=>{const i=n.length;for(let a=0;a<i;a++){const s=n[a];zTe(s,e,t,r)}},zTe=(n,e,t,r)=>{if(typeof n=="string"){VTe(n,e,t);return}if(typeof n=="function"){HTe(n,e,t,r);return}GTe(n,e,t,r)},VTe=(n,e,t)=>{const r=n===""?e:Ooe(e,n);r.classGroupId=t},HTe=(n,e,t,r)=>{if(jTe(n)){eG(n(r),e,t,r);return}e.validators===null&&(e.validators=[]),e.validators.push(NTe(t,n))},GTe=(n,e,t,r)=>{const i=Object.entries(n),a=i.length;for(let s=0;s<a;s++){const[o,l]=i[s];eG(l,Ooe(e,o),t,r)}},Ooe=(n,e)=>{let t=n;const r=e.split(IR),i=r.length;for(let a=0;a<i;a++){const s=r[a];let o=t.nextPart.get(s);o||(o=Noe(),t.nextPart.set(s,o)),t=o}return t},jTe=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,WTe=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),r=Object.create(null);const i=(a,s)=>{t[a]=s,e++,e>n&&(e=0,r=t,t=Object.create(null))};return{get(a){let s=t[a];if(s!==void 0)return s;if((s=r[a])!==void 0)return i(a,s),s},set(a,s){a in t?t[a]=s:i(a,s)}}},pU="!",XY=":",XTe=[],$Y=(n,e,t,r,i)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:r,isExternal:i}),$Te=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const a=[];let s=0,o=0,l=0,u;const c=i.length;for(let m=0;m<c;m++){const g=i[m];if(s===0&&o===0){if(g===XY){a.push(i.slice(l,m)),l=m+1;continue}if(g==="/"){u=m;continue}}g==="["?s++:g==="]"?s--:g==="("?o++:g===")"&&o--}const h=a.length===0?i:i.slice(l);let d=h,f=!1;h.endsWith(pU)?(d=h.slice(0,-1),f=!0):h.startsWith(pU)&&(d=h.slice(1),f=!0);const p=u&&u>l?u-l:void 0;return $Y(a,f,d,p)};if(e){const i=e+XY,a=r;r=s=>s.startsWith(i)?a(s.slice(i.length)):$Y(XTe,!1,s,void 0,!0)}if(t){const i=r;r=a=>t({className:a,parseClassName:i})}return r},YTe=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,r)=>{e.set(t,1e6+r)}),t=>{const r=[];let i=[];for(let a=0;a<t.length;a++){const s=t[a],o=s[0]==="[",l=e.has(s);o||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(s)):i.push(s)}return i.length>0&&(i.sort(),r.push(...i)),r}},qTe=n=>({cache:WTe(n.cacheSize),parseClassName:$Te(n),sortModifiers:YTe(n),...OTe(n)}),KTe=/\s+/,ZTe=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:a}=e,s=[],o=n.trim().split(KTe);let l="";for(let u=o.length-1;u>=0;u-=1){const c=o[u],{isExternal:h,modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:m}=t(c);if(h){l=c+(l.length>0?" "+l:l);continue}let g=!!m,v=r(g?p.substring(0,m):p);if(!v){if(!g){l=c+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=c+(l.length>0?" "+l:l);continue}g=!1}const b=d.length===0?"":d.length===1?d[0]:a(d).join(":"),S=f?b+pU:b,w=S+v;if(s.indexOf(w)>-1)continue;s.push(w);const E=i(v,g);for(let T=0;T<E.length;++T){const M=E[T];s.push(S+M)}l=c+(l.length>0?" "+l:l)}return l},QTe=(...n)=>{let e=0,t,r,i="";for(;e<n.length;)(t=n[e++])&&(r=Boe(t))&&(i&&(i+=" "),i+=r);return i},Boe=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=Boe(n[r]))&&(t&&(t+=" "),t+=e);return t},JTe=(n,...e)=>{let t,r,i,a;const s=l=>{const u=e.reduce((c,h)=>h(c),n());return t=qTe(u),r=t.cache.get,i=t.cache.set,a=o,o(l)},o=l=>{const u=r(l);if(u)return u;const c=ZTe(l,t);return i(l,c),c};return a=s,(...l)=>a(QTe(...l))},eEe=[],ga=n=>{const e=t=>t[n]||eEe;return e.isThemeGetter=!0,e},Foe=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Uoe=/^\((?:(\w[\w-]*):)?(.+)\)$/i,tEe=/^\d+\/\d+$/,nEe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rEe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iEe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,aEe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sEe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Vx=n=>tEe.test(n),jn=n=>!!n&&!Number.isNaN(Number(n)),Ip=n=>!!n&&Number.isInteger(Number(n)),QB=n=>n.endsWith("%")&&jn(n.slice(0,-1)),wd=n=>nEe.test(n),oEe=()=>!0,lEe=n=>rEe.test(n)&&!iEe.test(n),zoe=()=>!1,uEe=n=>aEe.test(n),cEe=n=>sEe.test(n),hEe=n=>!jt(n)&&!Wt(n),dEe=n=>IS(n,Goe,zoe),jt=n=>Foe.test(n),tv=n=>IS(n,joe,lEe),JB=n=>IS(n,vEe,jn),YY=n=>IS(n,Voe,zoe),fEe=n=>IS(n,Hoe,cEe),JD=n=>IS(n,Woe,uEe),Wt=n=>Uoe.test(n),Xw=n=>PS(n,joe),pEe=n=>PS(n,yEe),qY=n=>PS(n,Voe),mEe=n=>PS(n,Goe),gEe=n=>PS(n,Hoe),eI=n=>PS(n,Woe,!0),IS=(n,e,t)=>{const r=Foe.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},PS=(n,e,t=!1)=>{const r=Uoe.exec(n);return r?r[1]?e(r[1]):t:!1},Voe=n=>n==="position"||n==="percentage",Hoe=n=>n==="image"||n==="url",Goe=n=>n==="length"||n==="size"||n==="bg-size",joe=n=>n==="length",vEe=n=>n==="number",yEe=n=>n==="family-name",Woe=n=>n==="shadow",xEe=()=>{const n=ga("color"),e=ga("font"),t=ga("text"),r=ga("font-weight"),i=ga("tracking"),a=ga("leading"),s=ga("breakpoint"),o=ga("container"),l=ga("spacing"),u=ga("radius"),c=ga("shadow"),h=ga("inset-shadow"),d=ga("text-shadow"),f=ga("drop-shadow"),p=ga("blur"),m=ga("perspective"),g=ga("aspect"),v=ga("ease"),b=ga("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],E=()=>[...w(),Wt,jt],T=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],P=()=>[Wt,jt,l],I=()=>[Vx,"full","auto",...P()],D=()=>[Ip,"none","subgrid",Wt,jt],R=()=>["auto",{span:["full",Ip,Wt,jt]},Ip,Wt,jt],B=()=>[Ip,"auto",Wt,jt],k=()=>["auto","min","max","fr",Wt,jt],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],G=()=>["start","end","center","stretch","center-safe","end-safe"],F=()=>["auto",...P()],X=()=>[Vx,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],j=()=>[n,Wt,jt],Q=()=>[...w(),qY,YY,{position:[Wt,jt]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],K=()=>["auto","cover","contain",mEe,dEe,{size:[Wt,jt]}],te=()=>[QB,Xw,tv],Y=()=>["","none","full",u,Wt,jt],de=()=>["",jn,Xw,tv],ge=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[jn,QB,qY,YY],fe=()=>["","none",p,Wt,jt],Ee=()=>["none",jn,Wt,jt],Ce=()=>["none",jn,Wt,jt],Re=()=>[jn,Wt,jt],He=()=>[Vx,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wd],breakpoint:[wd],color:[oEe],container:[wd],"drop-shadow":[wd],ease:["in","out","in-out"],font:[hEe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wd],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wd],shadow:[wd],spacing:["px",jn],text:[wd],"text-shadow":[wd],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Vx,jt,Wt,g]}],container:["container"],columns:[{columns:[jn,jt,Wt,o]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:E()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{start:I()}],end:[{end:I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[Ip,"auto",Wt,jt]}],basis:[{basis:[Vx,"full","auto",o,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[jn,Vx,"auto","initial","none",jt]}],grow:[{grow:["",jn,Wt,jt]}],shrink:[{shrink:["",jn,Wt,jt]}],order:[{order:[Ip,"first","last","none",Wt,jt]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":k()}],"auto-rows":[{"auto-rows":k()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...G(),"normal"]}],"justify-self":[{"justify-self":["auto",...G()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...G(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...G(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...G(),"baseline"]}],"place-self":[{"place-self":["auto",...G()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:F()}],mx:[{mx:F()}],my:[{my:F()}],ms:[{ms:F()}],me:[{me:F()}],mt:[{mt:F()}],mr:[{mr:F()}],mb:[{mb:F()}],ml:[{ml:F()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:X()}],w:[{w:[o,"screen",...X()]}],"min-w":[{"min-w":[o,"screen","none",...X()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...X()]}],h:[{h:["screen","lh",...X()]}],"min-h":[{"min-h":["screen","lh","none",...X()]}],"max-h":[{"max-h":["screen","lh",...X()]}],"font-size":[{text:["base",t,Xw,tv]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Wt,JB]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",QB,jt]}],"font-family":[{font:[pEe,jt,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Wt,jt]}],"line-clamp":[{"line-clamp":[jn,"none",Wt,JB]}],leading:[{leading:[a,...P()]}],"list-image":[{"list-image":["none",Wt,jt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Wt,jt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:j()}],"text-color":[{text:j()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[jn,"from-font","auto",Wt,tv]}],"text-decoration-color":[{decoration:j()}],"underline-offset":[{"underline-offset":[jn,"auto",Wt,jt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wt,jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wt,jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Q()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:K()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ip,Wt,jt],radial:["",Wt,jt],conic:[Ip,Wt,jt]},gEe,fEe]}],"bg-color":[{bg:j()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:j()}],"gradient-via":[{via:j()}],"gradient-to":[{to:j()}],rounded:[{rounded:Y()}],"rounded-s":[{"rounded-s":Y()}],"rounded-e":[{"rounded-e":Y()}],"rounded-t":[{"rounded-t":Y()}],"rounded-r":[{"rounded-r":Y()}],"rounded-b":[{"rounded-b":Y()}],"rounded-l":[{"rounded-l":Y()}],"rounded-ss":[{"rounded-ss":Y()}],"rounded-se":[{"rounded-se":Y()}],"rounded-ee":[{"rounded-ee":Y()}],"rounded-es":[{"rounded-es":Y()}],"rounded-tl":[{"rounded-tl":Y()}],"rounded-tr":[{"rounded-tr":Y()}],"rounded-br":[{"rounded-br":Y()}],"rounded-bl":[{"rounded-bl":Y()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:j()}],"border-color-x":[{"border-x":j()}],"border-color-y":[{"border-y":j()}],"border-color-s":[{"border-s":j()}],"border-color-e":[{"border-e":j()}],"border-color-t":[{"border-t":j()}],"border-color-r":[{"border-r":j()}],"border-color-b":[{"border-b":j()}],"border-color-l":[{"border-l":j()}],"divide-color":[{divide:j()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[jn,Wt,jt]}],"outline-w":[{outline:["",jn,Xw,tv]}],"outline-color":[{outline:j()}],shadow:[{shadow:["","none",c,eI,JD]}],"shadow-color":[{shadow:j()}],"inset-shadow":[{"inset-shadow":["none",h,eI,JD]}],"inset-shadow-color":[{"inset-shadow":j()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:j()}],"ring-offset-w":[{"ring-offset":[jn,tv]}],"ring-offset-color":[{"ring-offset":j()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":j()}],"text-shadow":[{"text-shadow":["none",d,eI,JD]}],"text-shadow-color":[{"text-shadow":j()}],opacity:[{opacity:[jn,Wt,jt]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[jn]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":j()}],"mask-image-linear-to-color":[{"mask-linear-to":j()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":j()}],"mask-image-t-to-color":[{"mask-t-to":j()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":j()}],"mask-image-r-to-color":[{"mask-r-to":j()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":j()}],"mask-image-b-to-color":[{"mask-b-to":j()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":j()}],"mask-image-l-to-color":[{"mask-l-to":j()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":j()}],"mask-image-x-to-color":[{"mask-x-to":j()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":j()}],"mask-image-y-to-color":[{"mask-y-to":j()}],"mask-image-radial":[{"mask-radial":[Wt,jt]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":j()}],"mask-image-radial-to-color":[{"mask-radial-to":j()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[jn]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":j()}],"mask-image-conic-to-color":[{"mask-conic-to":j()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Q()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:K()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Wt,jt]}],filter:[{filter:["","none",Wt,jt]}],blur:[{blur:fe()}],brightness:[{brightness:[jn,Wt,jt]}],contrast:[{contrast:[jn,Wt,jt]}],"drop-shadow":[{"drop-shadow":["","none",f,eI,JD]}],"drop-shadow-color":[{"drop-shadow":j()}],grayscale:[{grayscale:["",jn,Wt,jt]}],"hue-rotate":[{"hue-rotate":[jn,Wt,jt]}],invert:[{invert:["",jn,Wt,jt]}],saturate:[{saturate:[jn,Wt,jt]}],sepia:[{sepia:["",jn,Wt,jt]}],"backdrop-filter":[{"backdrop-filter":["","none",Wt,jt]}],"backdrop-blur":[{"backdrop-blur":fe()}],"backdrop-brightness":[{"backdrop-brightness":[jn,Wt,jt]}],"backdrop-contrast":[{"backdrop-contrast":[jn,Wt,jt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",jn,Wt,jt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[jn,Wt,jt]}],"backdrop-invert":[{"backdrop-invert":["",jn,Wt,jt]}],"backdrop-opacity":[{"backdrop-opacity":[jn,Wt,jt]}],"backdrop-saturate":[{"backdrop-saturate":[jn,Wt,jt]}],"backdrop-sepia":[{"backdrop-sepia":["",jn,Wt,jt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Wt,jt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[jn,"initial",Wt,jt]}],ease:[{ease:["linear","initial",v,Wt,jt]}],delay:[{delay:[jn,Wt,jt]}],animate:[{animate:["none",b,Wt,jt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Wt,jt]}],"perspective-origin":[{"perspective-origin":E()}],rotate:[{rotate:Ee()}],"rotate-x":[{"rotate-x":Ee()}],"rotate-y":[{"rotate-y":Ee()}],"rotate-z":[{"rotate-z":Ee()}],scale:[{scale:Ce()}],"scale-x":[{"scale-x":Ce()}],"scale-y":[{"scale-y":Ce()}],"scale-z":[{"scale-z":Ce()}],"scale-3d":["scale-3d"],skew:[{skew:Re()}],"skew-x":[{"skew-x":Re()}],"skew-y":[{"skew-y":Re()}],transform:[{transform:[Wt,jt,"","none","gpu","cpu"]}],"transform-origin":[{origin:E()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:He()}],"translate-x":[{"translate-x":He()}],"translate-y":[{"translate-y":He()}],"translate-z":[{"translate-z":He()}],"translate-none":["translate-none"],accent:[{accent:j()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:j()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wt,jt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wt,jt]}],fill:[{fill:["none",...j()]}],"stroke-w":[{stroke:[jn,Xw,tv,JB]}],stroke:[{stroke:["none",...j()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_Ee=JTe(xEe);function DE(...n){return _Ee(LTe(n))}const tG=ee.createContext({});function nG(n){const e=ee.useRef(null);return e.current===null&&(e.current=n()),e.current}const Xoe=typeof window<"u",$oe=Xoe?ee.useLayoutEffect:ee.useEffect,Fk=ee.createContext(null);function rG(n,e){n.indexOf(e)===-1&&n.push(e)}function PR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Jh=(n,e,t)=>t>e?e:t<n?n:t;let iG=()=>{};const jf={},Yoe=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function qoe(n){return typeof n=="object"&&n!==null}const Koe=n=>/^0[^.\s]+$/u.test(n);function aG(n){let e;return()=>(e===void 0&&(e=n()),e)}const Pu=n=>n,bEe=(n,e)=>t=>e(n(t)),l2=(...n)=>n.reduce(bEe),oA=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class sG{constructor(){this.subscriptions=[]}add(e){return rG(this.subscriptions,e),()=>PR(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Tc=n=>n*1e3,Cu=n=>n/1e3;function Zoe(n,e){return e?n*(1e3/e):0}const Qoe=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,SEe=1e-7,wEe=12;function TEe(n,e,t,r,i){let a,s,o=0;do s=e+(t-e)/2,a=Qoe(s,r,i)-n,a>0?t=s:e=s;while(Math.abs(a)>SEe&&++o<wEe);return s}function u2(n,e,t,r){if(n===e&&t===r)return Pu;const i=a=>TEe(a,0,1,n,t);return a=>a===0||a===1?a:Qoe(i(a),e,r)}const Joe=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,ele=n=>e=>1-n(1-e),tle=u2(.33,1.53,.69,.99),oG=ele(tle),nle=Joe(oG),rle=n=>(n*=2)<1?.5*oG(n):.5*(2-Math.pow(2,-10*(n-1))),lG=n=>1-Math.sin(Math.acos(n)),ile=ele(lG),ale=Joe(lG),EEe=u2(.42,0,1,1),AEe=u2(0,0,.58,1),sle=u2(.42,0,.58,1),CEe=n=>Array.isArray(n)&&typeof n[0]!="number",ole=n=>Array.isArray(n)&&typeof n[0]=="number",MEe={linear:Pu,easeIn:EEe,easeInOut:sle,easeOut:AEe,circIn:lG,circInOut:ale,circOut:ile,backIn:oG,backInOut:nle,backOut:tle,anticipate:rle},DEe=n=>typeof n=="string",KY=n=>{if(ole(n)){iG(n.length===4);const[e,t,r,i]=n;return u2(e,t,r,i)}else if(DEe(n))return MEe[n];return n},tI=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function IEe(n,e){let t=new Set,r=new Set,i=!1,a=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(c){s.has(c)&&(u.schedule(c),n()),c(o)}const u={schedule:(c,h=!1,d=!1)=>{const p=d&&i?t:r;return h&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{r.delete(c),s.delete(c)},process:c=>{if(o=c,i){a=!0;return}i=!0,[t,r]=[r,t],t.forEach(l),t.clear(),i=!1,a&&(a=!1,u.process(c))}};return u}const PEe=40;function lle(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,s=tI.reduce((S,w)=>(S[w]=IEe(a),S),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:f,postRender:p}=s,m=()=>{const S=jf.useManualTiming?i.timestamp:performance.now();t=!1,jf.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,PEe),1)),i.timestamp=S,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),f.process(i),p.process(i),i.isProcessing=!1,t&&e&&(r=!1,n(m))},g=()=>{t=!0,r=!0,i.isProcessing||n(m)};return{schedule:tI.reduce((S,w)=>{const E=s[w];return S[w]=(T,M=!1,P=!1)=>(t||g(),E.schedule(T,M,P)),S},{}),cancel:S=>{for(let w=0;w<tI.length;w++)s[tI[w]].cancel(S)},state:i,steps:s}}const{schedule:ni,cancel:yg,state:ss,steps:eF}=lle(typeof requestAnimationFrame<"u"?requestAnimationFrame:Pu,!0);let cL;function LEe(){cL=void 0}const ho={now:()=>(cL===void 0&&ho.set(ss.isProcessing||jf.useManualTiming?ss.timestamp:performance.now()),cL),set:n=>{cL=n,queueMicrotask(LEe)}},ule=n=>e=>typeof e=="string"&&e.startsWith(n),cle=ule("--"),REe=ule("var(--"),uG=n=>REe(n)?NEe.test(n.split("/*")[0].trim()):!1,NEe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function ZY(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const LS={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},lA={...LS,transform:n=>Jh(0,1,n)},nI={...LS,default:1},IE=n=>Math.round(n*1e5)/1e5,cG=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function kEe(n){return n==null}const OEe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hG=(n,e)=>t=>!!(typeof t=="string"&&OEe.test(t)&&t.startsWith(n)||e&&!kEe(t)&&Object.prototype.hasOwnProperty.call(t,e)),hle=(n,e,t)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(cG);return{[n]:parseFloat(i),[e]:parseFloat(a),[t]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},BEe=n=>Jh(0,255,n),tF={...LS,transform:n=>Math.round(BEe(n))},n0={test:hG("rgb","red"),parse:hle("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+tF.transform(n)+", "+tF.transform(e)+", "+tF.transform(t)+", "+IE(lA.transform(r))+")"};function FEe(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mU={test:hG("#"),parse:FEe,transform:n0.transform},c2=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Yp=c2("deg"),jh=c2("%"),Xt=c2("px"),UEe=c2("vh"),zEe=c2("vw"),QY={...jh,parse:n=>jh.parse(n)/100,transform:n=>jh.transform(n*100)},q_={test:hG("hsl","hue"),parse:hle("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+jh.transform(IE(e))+", "+jh.transform(IE(t))+", "+IE(lA.transform(r))+")"},sa={test:n=>n0.test(n)||mU.test(n)||q_.test(n),parse:n=>n0.test(n)?n0.parse(n):q_.test(n)?q_.parse(n):mU.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?n0.transform(n):q_.transform(n),getAnimatableNone:n=>{const e=sa.parse(n);return e.alpha=0,sa.transform(e)}},VEe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function HEe(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(cG))==null?void 0:e.length)||0)+(((t=n.match(VEe))==null?void 0:t.length)||0)>0}const dle="number",fle="color",GEe="var",jEe="var(",JY="${}",WEe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uA(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(WEe,l=>(sa.test(l)?(r.color.push(a),i.push(fle),t.push(sa.parse(l))):l.startsWith(jEe)?(r.var.push(a),i.push(GEe),t.push(l)):(r.number.push(a),i.push(dle),t.push(parseFloat(l))),++a,JY)).split(JY);return{values:t,split:o,indexes:r,types:i}}function ple(n){return uA(n).values}function mle(n){const{split:e,types:t}=uA(n),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=t[s];o===dle?a+=IE(i[s]):o===fle?a+=sa.transform(i[s]):a+=i[s]}return a}}const XEe=n=>typeof n=="number"?0:sa.test(n)?sa.getAnimatableNone(n):n;function $Ee(n){const e=ple(n);return mle(n)(e.map(XEe))}const xg={test:HEe,parse:ple,createTransformer:mle,getAnimatableNone:$Ee};function nF(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function YEe({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,a=0,s=0;if(!e)i=a=s=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;i=nF(l,o,n+1/3),a=nF(l,o,n),s=nF(l,o,n-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function LR(n,e){return t=>t>0?e:n}const bi=(n,e,t)=>n+(e-n)*t,rF=(n,e,t)=>{const r=n*n,i=t*(e*e-r)+r;return i<0?0:Math.sqrt(i)},qEe=[mU,n0,q_],KEe=n=>qEe.find(e=>e.test(n));function eq(n){const e=KEe(n);if(!e)return!1;let t=e.parse(n);return e===q_&&(t=YEe(t)),t}const tq=(n,e)=>{const t=eq(n),r=eq(e);if(!t||!r)return LR(n,e);const i={...t};return a=>(i.red=rF(t.red,r.red,a),i.green=rF(t.green,r.green,a),i.blue=rF(t.blue,r.blue,a),i.alpha=bi(t.alpha,r.alpha,a),n0.transform(i))},gU=new Set(["none","hidden"]);function ZEe(n,e){return gU.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function QEe(n,e){return t=>bi(n,e,t)}function dG(n){return typeof n=="number"?QEe:typeof n=="string"?uG(n)?LR:sa.test(n)?tq:tAe:Array.isArray(n)?gle:typeof n=="object"?sa.test(n)?tq:JEe:LR}function gle(n,e){const t=[...n],r=t.length,i=n.map((a,s)=>dG(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)t[s]=i[s](a);return t}}function JEe(n,e){const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=dG(n[i])(n[i],e[i]));return i=>{for(const a in r)t[a]=r[a](i);return t}}function eAe(n,e){const t=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],s=n.indexes[a][r[a]],o=n.values[s]??0;t[i]=o,r[a]++}return t}const tAe=(n,e)=>{const t=xg.createTransformer(e),r=uA(n),i=uA(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?gU.has(n)&&!i.values.length||gU.has(e)&&!r.values.length?ZEe(n,e):l2(gle(eAe(r,i),i.values),t):LR(n,e)};function vle(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?bi(n,e,t):dG(n)(n,e)}const nAe=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ni.update(e,t),stop:()=>yg(e),now:()=>ss.isProcessing?ss.timestamp:ho.now()}},yle=(n,e,t=10)=>{let r="";const i=Math.max(Math.round(e/t),2);for(let a=0;a<i;a++)r+=Math.round(n(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},RR=2e4;function fG(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<RR;)e+=t,r=n.next(e);return e>=RR?1/0:e}function rAe(n,e=100,t){const r=t({...n,keyframes:[0,e]}),i=Math.min(fG(r),RR);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Cu(i)}}const iAe=5;function xle(n,e,t){const r=Math.max(e-iAe,0);return Zoe(t-n(r),e-r)}const Ii={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},iF=.001;function aAe({duration:n=Ii.duration,bounce:e=Ii.bounce,velocity:t=Ii.velocity,mass:r=Ii.mass}){let i,a,s=1-e;s=Jh(Ii.minDamping,Ii.maxDamping,s),n=Jh(Ii.minDuration,Ii.maxDuration,Cu(n)),s<1?(i=u=>{const c=u*s,h=c*n,d=c-t,f=vU(u,s),p=Math.exp(-h);return iF-d/f*p},a=u=>{const h=u*s*n,d=h*t+t,f=Math.pow(s,2)*Math.pow(u,2)*n,p=Math.exp(-h),m=vU(Math.pow(u,2),s);return(-i(u)+iF>0?-1:1)*((d-f)*p)/m}):(i=u=>{const c=Math.exp(-u*n),h=(u-t)*n+1;return-iF+c*h},a=u=>{const c=Math.exp(-u*n),h=(t-u)*(n*n);return c*h});const o=5/n,l=oAe(i,a,o);if(n=Tc(n),isNaN(l))return{stiffness:Ii.stiffness,damping:Ii.damping,duration:n};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:n}}}const sAe=12;function oAe(n,e,t){let r=t;for(let i=1;i<sAe;i++)r=r-n(r)/e(r);return r}function vU(n,e){return n*Math.sqrt(1-e*e)}const lAe=["duration","bounce"],uAe=["stiffness","damping","mass"];function nq(n,e){return e.some(t=>n[t]!==void 0)}function cAe(n){let e={velocity:Ii.velocity,stiffness:Ii.stiffness,damping:Ii.damping,mass:Ii.mass,isResolvedFromDuration:!1,...n};if(!nq(n,uAe)&&nq(n,lAe))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),i=r*r,a=2*Jh(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:Ii.mass,stiffness:i,damping:a}}else{const t=aAe(n);e={...e,...t,mass:Ii.mass},e.isResolvedFromDuration=!0}return e}function NR(n=Ii.visualDuration,e=Ii.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:i}=t;const a=t.keyframes[0],s=t.keyframes[t.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:c,duration:h,velocity:d,isResolvedFromDuration:f}=cAe({...t,velocity:-Cu(t.velocity||0)}),p=d||0,m=u/(2*Math.sqrt(l*c)),g=s-a,v=Cu(Math.sqrt(l/c)),b=Math.abs(g)<5;r||(r=b?Ii.restSpeed.granular:Ii.restSpeed.default),i||(i=b?Ii.restDelta.granular:Ii.restDelta.default);let S;if(m<1){const E=vU(v,m);S=T=>{const M=Math.exp(-m*v*T);return s-M*((p+m*v*g)/E*Math.sin(E*T)+g*Math.cos(E*T))}}else if(m===1)S=E=>s-Math.exp(-v*E)*(g+(p+v*g)*E);else{const E=v*Math.sqrt(m*m-1);S=T=>{const M=Math.exp(-m*v*T),P=Math.min(E*T,300);return s-M*((p+m*v*g)*Math.sinh(P)+E*g*Math.cosh(P))/E}}const w={calculatedDuration:f&&h||null,next:E=>{const T=S(E);if(f)o.done=E>=h;else{let M=E===0?p:0;m<1&&(M=E===0?Tc(p):xle(S,E,T));const P=Math.abs(M)<=r,I=Math.abs(s-T)<=i;o.done=P&&I}return o.value=o.done?s:T,o},toString:()=>{const E=Math.min(fG(w),RR),T=yle(M=>w.next(E*M).value,E,30);return E+"ms "+T},toTransition:()=>{}};return w}NR.applyToOptions=n=>{const e=rAe(n,100,NR);return n.ease=e.ease,n.duration=Tc(e.duration),n.type="keyframes",n};function yU({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:c}){const h=n[0],d={done:!1,value:h},f=P=>o!==void 0&&P<o||l!==void 0&&P>l,p=P=>o===void 0?l:l===void 0||Math.abs(o-P)<Math.abs(l-P)?o:l;let m=t*e;const g=h+m,v=s===void 0?g:s(g);v!==g&&(m=v-h);const b=P=>-m*Math.exp(-P/r),S=P=>v+b(P),w=P=>{const I=b(P),D=S(P);d.done=Math.abs(I)<=u,d.value=d.done?v:D};let E,T;const M=P=>{f(d.value)&&(E=P,T=NR({keyframes:[d.value,p(d.value)],velocity:xle(S,P,d.value),damping:i,stiffness:a,restDelta:u,restSpeed:c}))};return M(0),{calculatedDuration:null,next:P=>{let I=!1;return!T&&E===void 0&&(I=!0,w(P),M(P)),E!==void 0&&P>=E?T.next(P-E):(!I&&w(P),d)}}}function hAe(n,e,t){const r=[],i=t||jf.mix||vle,a=n.length-1;for(let s=0;s<a;s++){let o=i(n[s],n[s+1]);if(e){const l=Array.isArray(e)?e[s]||Pu:e;o=l2(l,o)}r.push(o)}return r}function dAe(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const a=n.length;if(iG(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=hAe(e,r,i),l=o.length,u=c=>{if(s&&c<n[0])return e[0];let h=0;if(l>1)for(;h<n.length-2&&!(c<n[h+1]);h++);const d=oA(n[h],n[h+1],c);return o[h](d)};return t?c=>u(Jh(n[0],n[a-1],c)):u}function fAe(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=oA(0,e,r);n.push(bi(t,1,i))}}function pAe(n){const e=[0];return fAe(e,n.length-1),e}function mAe(n,e){return n.map(t=>t*e)}function gAe(n,e){return n.map(()=>e||sle).splice(0,n.length-1)}function PE({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=CEe(r)?r.map(KY):KY(r),a={done:!1,value:e[0]},s=mAe(t&&t.length===e.length?t:pAe(e),n),o=dAe(s,e,{ease:Array.isArray(i)?i:gAe(e,i)});return{calculatedDuration:n,next:l=>(a.value=o(l),a.done=l>=n,a)}}const vAe=n=>n!==null;function pG(n,{repeat:e,repeatType:t="loop"},r,i=1){const a=n.filter(vAe),o=i<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!o||r===void 0?a[o]:r}const yAe={decay:yU,inertia:yU,tween:PE,keyframes:PE,spring:NR};function _le(n){typeof n.type=="string"&&(n.type=yAe[n.type])}class mG{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const xAe=n=>n/100;class gG extends mG{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:t}=this.options;t&&t.updatedAt!==ho.now()&&this.tick(ho.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;_le(e);const{type:t=PE,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=e;let{keyframes:o}=e;const l=t||PE;l!==PE&&typeof o[0]!="number"&&(this.mixKeyframes=l2(xAe,vle(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=fG(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:h,repeatType:d,repeatDelay:f,type:p,onUpdate:m,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let S=this.currentTime,w=r;if(h){const P=Math.min(this.currentTime,i)/o;let I=Math.floor(P),D=P%1;!D&&P>=1&&(D=1),D===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(d==="reverse"?(D=1-D,f&&(D-=f/o)):d==="mirror"&&(w=s)),S=Jh(0,1,D)*o}const E=b?{done:!1,value:c[0]}:w.next(S);a&&(E.value=a(E.value));let{done:T}=E;!b&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return M&&p!==yU&&(E.value=pG(c,this.options,g,this.speed)),m&&m(E.value),M&&this.finish(),E}then(e,t){return this.finished.then(e,t)}get duration(){return Cu(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cu(e)}get time(){return Cu(this.currentTime)}set time(e){var t;e=Tc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ho.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Cu(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=nAe,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ho.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function _Ae(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const r0=n=>n*180/Math.PI,xU=n=>{const e=r0(Math.atan2(n[1],n[0]));return _U(e)},bAe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:xU,rotateZ:xU,skewX:n=>r0(Math.atan(n[1])),skewY:n=>r0(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},_U=n=>(n=n%360,n<0&&(n+=360),n),rq=xU,iq=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),aq=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),SAe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:iq,scaleY:aq,scale:n=>(iq(n)+aq(n))/2,rotateX:n=>_U(r0(Math.atan2(n[6],n[5]))),rotateY:n=>_U(r0(Math.atan2(-n[2],n[0]))),rotateZ:rq,rotate:rq,skewX:n=>r0(Math.atan(n[4])),skewY:n=>r0(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function bU(n){return n.includes("scale")?1:0}function SU(n,e){if(!n||n==="none")return bU(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(t)r=SAe,i=t;else{const o=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=bAe,i=o}if(!i)return bU(e);const a=r[e],s=i[1].split(",").map(TAe);return typeof a=="function"?a(s):s[a]}const wAe=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return SU(t,e)};function TAe(n){return parseFloat(n.trim())}const RS=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],NS=new Set(RS),sq=n=>n===LS||n===Xt,EAe=new Set(["x","y","z"]),AAe=RS.filter(n=>!EAe.has(n));function CAe(n){const e=[];return AAe.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Jm={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>SU(e,"x"),y:(n,{transform:e})=>SU(e,"y")};Jm.translateX=Jm.x;Jm.translateY=Jm.y;const Cy=new Set;let wU=!1,TU=!1,EU=!1;function ble(){if(TU){const n=Array.from(Cy).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const i=CAe(r);i.length&&(t.set(r,i),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=t.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))==null||o.set(s)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}TU=!1,wU=!1,Cy.forEach(n=>n.complete(EU)),Cy.clear()}function Sle(){Cy.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(TU=!0)})}function MAe(){EU=!0,Sle(),ble(),EU=!1}class vG{constructor(e,t,r,i,a,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(Cy.add(this),wU||(wU=!0,ni.read(Sle),ni.resolveKeyframes(ble))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),s=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&t){const o=r.readValue(t,s);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=s),i&&a===void 0&&i.set(e[0])}_Ae(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Cy.delete(this)}cancel(){this.state==="scheduled"&&(Cy.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const DAe=n=>n.startsWith("--");function IAe(n,e,t){DAe(e)?n.style.setProperty(e,t):n.style[e]=t}const PAe=aG(()=>window.ScrollTimeline!==void 0),LAe={};function RAe(n,e){const t=aG(n);return()=>LAe[e]??t()}const wle=RAe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),jT=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,oq={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jT([0,.65,.55,1]),circOut:jT([.55,0,1,.45]),backIn:jT([.31,.01,.66,-.59]),backOut:jT([.33,1.53,.69,.99])};function Tle(n,e){if(n)return typeof n=="function"?wle()?yle(n,e):"ease-out":ole(n)?jT(n):Array.isArray(n)?n.map(t=>Tle(t,e)||oq.easeOut):oq[n]}function NAe(n,e,t,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeOut",times:l}={},u=void 0){const c={[e]:t};l&&(c.offset=l);const h=Tle(o,i);Array.isArray(h)&&(c.easing=h);const d={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"};return u&&(d.pseudoElement=u),n.animate(c,d)}function Ele(n){return typeof n=="function"&&"applyToOptions"in n}function kAe({type:n,...e}){return Ele(n)&&wle()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Ale extends mG{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:a,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!a,this.allowFlatten=s,this.options=e,iG(typeof e.type!="string");const u=kAe(e);this.animation=NAe(t,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const c=pG(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(c):IAe(t,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r,i;const e=(t=this.options)==null?void 0:t.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(r=this.animation).commitStyles)==null||i.call(r))}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Cu(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cu(e)}get time(){return Cu(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Tc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&PAe()?(this.animation.timeline=e,Pu):t(this)}}const Cle={anticipate:rle,backInOut:nle,circInOut:ale};function OAe(n){return n in Cle}function BAe(n){typeof n.ease=="string"&&OAe(n.ease)&&(n.ease=Cle[n.ease])}const aF=10;class FAe extends Ale{constructor(e){BAe(e),_le(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:i,element:a,...s}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const o=new gG({...s,autoplay:!1}),l=Math.max(aF,ho.now()-this.startTime),u=Jh(0,aF,l-aF);t.setWithVelocity(o.sample(Math.max(0,l-u)).value,o.sample(l).value,u),o.stop()}}const lq=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(xg.test(n)||n==="0")&&!n.startsWith("url("));function UAe(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function zAe(n,e,t,r){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],s=lq(i,e),o=lq(a,e);return!s||!o?!1:UAe(n)||(t==="spring"||Ele(t))&&r}function AU(n){n.duration=0,n.type="keyframes"}const VAe=new Set(["opacity","clipPath","filter","transform"]),HAe=aG(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function GAe(n){var c;const{motionValue:e,name:t,repeatDelay:r,repeatType:i,damping:a,type:s}=n;if(!(((c=e==null?void 0:e.owner)==null?void 0:c.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return HAe()&&t&&VAe.has(t)&&(t!=="transform"||!u)&&!l&&!r&&i!=="mirror"&&a!==0&&s!=="inertia"}const jAe=40;class WAe extends mG{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",keyframes:o,name:l,motionValue:u,element:c,...h}){var p;super(),this.stop=()=>{var m,g;this._animation&&(this._animation.stop(),(m=this.stopTimeline)==null||m.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=ho.now();const d={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:a,repeatType:s,name:l,motionValue:u,element:c,...h},f=(c==null?void 0:c.KeyframeResolver)||vG;this.keyframeResolver=new f(o,(m,g,v)=>this.onKeyframesResolved(m,g,d,!v),l,u,c),(p=this.keyframeResolver)==null||p.scheduleResolve()}onKeyframesResolved(e,t,r,i){var g,v;this.keyframeResolver=void 0;const{name:a,type:s,velocity:o,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=ho.now(),zAe(e,a,s,o)||((jf.instantAnimations||!l)&&(c==null||c(pG(e,r,t))),e[0]=e[e.length-1],AU(r),r.repeat=0);const d={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>jAe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},f=!u&&GAe(d),p=(v=(g=d.motionValue)==null?void 0:g.owner)==null?void 0:v.current,m=f?new FAe({...d,element:p}):new gG(d);m.finished.then(()=>{this.notifyFinished()}).catch(Pu),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),MAe()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function Mle(n,e,t,r=0,i=1){const a=Array.from(n).sort((u,c)=>u.sortNodePosition(c)).indexOf(e),s=n.size,o=(s-1)*r;return typeof t=="function"?t(a,s):i===1?a*r:o-a*r}const XAe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $Ae(n){const e=XAe.exec(n);if(!e)return[,];const[,t,r,i]=e;return[`--${t??r}`,i]}function Dle(n,e,t=1){const[r,i]=$Ae(n);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return Yoe(s)?parseFloat(s):s}return uG(i)?Dle(i,e,t+1):i}const YAe={type:"spring",stiffness:500,damping:25,restSpeed:10},qAe=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),KAe={type:"keyframes",duration:.8},ZAe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QAe=(n,{keyframes:e})=>e.length>2?KAe:NS.has(n)?n.startsWith("scale")?qAe(e[1]):YAe:ZAe,JAe=n=>n!==null;function eCe(n,{repeat:e,repeatType:t="loop"},r){const i=n.filter(JAe),a=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[a]}function Ile(n,e){if(n!=null&&n.inherit&&e){const{inherit:t,...r}=n;return{...e,...r}}return n}function yG(n,e){const t=(n==null?void 0:n[e])??(n==null?void 0:n.default)??n;return t!==n?Ile(t,n):t}function tCe({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const xG=(n,e,t,r={},i,a)=>s=>{const o=yG(r,n)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Tc(l);const c={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:d=>{e.set(d),o.onUpdate&&o.onUpdate(d)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:n,motionValue:e,element:a?void 0:i};tCe(o)||Object.assign(c,QAe(n,c)),c.duration&&(c.duration=Tc(c.duration)),c.repeatDelay&&(c.repeatDelay=Tc(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(AU(c),c.delay===0&&(h=!0)),(jf.instantAnimations||jf.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(h=!0,AU(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,h&&!a&&e.get()!==void 0){const d=eCe(c.keyframes,o);if(d!==void 0){ni.update(()=>{c.onUpdate(d),c.onComplete()});return}}return o.isSync?new gG(c):new WAe(c)};function uq(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function _G(n,e,t,r){if(typeof e=="function"){const[i,a]=uq(r);e=e(t!==void 0?t:n.custom,i,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,a]=uq(r);e=e(t!==void 0?t:n.custom,i,a)}return e}function gb(n,e,t){const r=n.getProps();return _G(r,e,t!==void 0?t:r.custom,n)}const Ple=new Set(["width","height","top","left","right","bottom",...RS]),cq=30,nCe=n=>!isNaN(parseFloat(n));class rCe{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=ho.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ho.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=nCe(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new sG);const r=this.events[e].add(t);return e==="change"?()=>{r(),ni.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ho.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>cq)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,cq);return Zoe(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Q1(n,e){return new rCe(n,e)}const CU=n=>Array.isArray(n);function iCe(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Q1(t))}function aCe(n){return CU(n)?n[n.length-1]||0:n}function sCe(n,e){const t=gb(n,e);let{transitionEnd:r={},transition:i={},...a}=t||{};a={...a,...r};for(const s in a){const o=aCe(a[s]);iCe(n,s,o)}}const Ns=n=>!!(n&&n.getVelocity);function oCe(n){return!!(Ns(n)&&n.add)}function MU(n,e){const t=n.getValue("willChange");if(oCe(t))return t.add(e);if(!t&&jf.WillChange){const r=new jf.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function bG(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const lCe="framerAppearId",Lle="data-"+bG(lCe);function Rle(n){return n.props[Lle]}function uCe({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Nle(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:a,transitionEnd:s,...o}=e;const l=n.getDefaultTransition();a=a?Ile(a,l):l;const u=a==null?void 0:a.reduceMotion;r&&(a=r);const c=[],h=i&&n.animationState&&n.animationState.getState()[i];for(const d in o){const f=n.getValue(d,n.latestValues[d]??null),p=o[d];if(p===void 0||h&&uCe(h,d))continue;const m={delay:t,...yG(a||{},d)},g=f.get();if(g!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===g&&!m.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const w=Rle(n);if(w){const E=window.MotionHandoffAnimation(w,d,ni);E!==null&&(m.startTime=E,v=!0)}}MU(n,d);const b=u??n.shouldReduceMotion;f.start(xG(d,f,p,b&&Ple.has(d)?{type:!1}:m,n,v));const S=f.animation;S&&c.push(S)}if(s){const d=()=>ni.update(()=>{s&&sCe(n,s)});c.length?Promise.all(c).then(d):d()}return c}function DU(n,e,t={}){var l;const r=gb(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const a=r?()=>Promise.all(Nle(n,r,t)):()=>Promise.resolve(),s=n.variantChildren&&n.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=i;return cCe(n,e,u,c,h,d,t)}:()=>Promise.resolve(),{when:o}=i;if(o){const[u,c]=o==="beforeChildren"?[a,s]:[s,a];return u().then(()=>c())}else return Promise.all([a(),s(t.delay)])}function cCe(n,e,t=0,r=0,i=0,a=1,s){const o=[];for(const l of n.variantChildren)l.notify("AnimationStart",e),o.push(DU(l,e,{...s,delay:t+(typeof r=="function"?0:r)+Mle(n.variantChildren,l,r,i,a)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function hCe(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>DU(n,a,t));r=Promise.all(i)}else if(typeof e=="string")r=DU(n,e,t);else{const i=typeof e=="function"?gb(n,e,t.custom):e;r=Promise.all(Nle(n,i,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const dCe={test:n=>n==="auto",parse:n=>n},kle=n=>e=>e.test(n),Ole=[LS,Xt,jh,Yp,zEe,UEe,dCe],hq=n=>Ole.find(kle(n));function fCe(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||Koe(n):!0}const pCe=new Set(["brightness","contrast","saturate","opacity"]);function mCe(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(cG)||[];if(!r)return n;const i=t.replace(r,"");let a=pCe.has(e)?1:0;return r!==t&&(a*=100),e+"("+a+i+")"}const gCe=/\b([a-z-]*)\(.*?\)/gu,IU={...xg,getAnimatableNone:n=>{const e=n.match(gCe);return e?e.map(mCe).join(" "):n}},dq={...LS,transform:Math.round},vCe={rotate:Yp,rotateX:Yp,rotateY:Yp,rotateZ:Yp,scale:nI,scaleX:nI,scaleY:nI,scaleZ:nI,skew:Yp,skewX:Yp,skewY:Yp,distance:Xt,translateX:Xt,translateY:Xt,translateZ:Xt,x:Xt,y:Xt,z:Xt,perspective:Xt,transformPerspective:Xt,opacity:lA,originX:QY,originY:QY,originZ:Xt},SG={borderWidth:Xt,borderTopWidth:Xt,borderRightWidth:Xt,borderBottomWidth:Xt,borderLeftWidth:Xt,borderRadius:Xt,borderTopLeftRadius:Xt,borderTopRightRadius:Xt,borderBottomRightRadius:Xt,borderBottomLeftRadius:Xt,width:Xt,maxWidth:Xt,height:Xt,maxHeight:Xt,top:Xt,right:Xt,bottom:Xt,left:Xt,inset:Xt,insetBlock:Xt,insetBlockStart:Xt,insetBlockEnd:Xt,insetInline:Xt,insetInlineStart:Xt,insetInlineEnd:Xt,padding:Xt,paddingTop:Xt,paddingRight:Xt,paddingBottom:Xt,paddingLeft:Xt,paddingBlock:Xt,paddingBlockStart:Xt,paddingBlockEnd:Xt,paddingInline:Xt,paddingInlineStart:Xt,paddingInlineEnd:Xt,margin:Xt,marginTop:Xt,marginRight:Xt,marginBottom:Xt,marginLeft:Xt,marginBlock:Xt,marginBlockStart:Xt,marginBlockEnd:Xt,marginInline:Xt,marginInlineStart:Xt,marginInlineEnd:Xt,fontSize:Xt,backgroundPositionX:Xt,backgroundPositionY:Xt,...vCe,zIndex:dq,fillOpacity:lA,strokeOpacity:lA,numOctaves:dq},yCe={...SG,color:sa,backgroundColor:sa,outlineColor:sa,fill:sa,stroke:sa,borderColor:sa,borderTopColor:sa,borderRightColor:sa,borderBottomColor:sa,borderLeftColor:sa,filter:IU,WebkitFilter:IU},Ble=n=>yCe[n];function Fle(n,e){let t=Ble(n);return t!==IU&&(t=xg),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const xCe=new Set(["auto","none","0"]);function _Ce(n,e,t){let r=0,i;for(;r<n.length&&!i;){const a=n[r];typeof a=="string"&&!xCe.has(a)&&uA(a).values.length&&(i=n[r]),r++}if(i&&t)for(const a of e)n[a]=Fle(t,i)}class bCe extends vG{constructor(e,t,r,i,a){super(e,t,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),uG(h))){const d=Dle(h,t.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!Ple.has(r)||e.length!==2)return;const[i,a]=e,s=hq(i),o=hq(a),l=ZY(i),u=ZY(a);if(l!==u&&Jm[r]){this.needsMeasurement=!0;return}if(s!==o)if(sq(s)&&sq(o))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else Jm[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||fCe(e[i]))&&r.push(i);r.length&&_Ce(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jm[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,s=r[a];r[a]=Jm[t](e.measureViewportBox(),window.getComputedStyle(e.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const SCe=new Set(["opacity","clipPath","filter","transform"]);function Ule(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const i=(t==null?void 0:t[n])??r.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n).filter(r=>r!=null)}const zle=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function PU(n){return qoe(n)&&"offsetHeight"in n}const{schedule:wG}=lle(queueMicrotask,!1),tc={x:!1,y:!1};function Vle(){return tc.x||tc.y}function wCe(n){return n==="x"||n==="y"?tc[n]?null:(tc[n]=!0,()=>{tc[n]=!1}):tc.x||tc.y?null:(tc.x=tc.y=!0,()=>{tc.x=tc.y=!1})}function Hle(n,e){const t=Ule(n),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[t,i,()=>r.abort()]}function TCe(n){return!(n.pointerType==="touch"||Vle())}function ECe(n,e,t={}){const[r,i,a]=Hle(n,t);return r.forEach(s=>{let o=!1,l=!1,u;const c=()=>{s.removeEventListener("pointerleave",p)},h=g=>{u&&(u(g),u=void 0),c()},d=g=>{o=!1,window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d),l&&(l=!1,h(g))},f=()=>{o=!0,window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",d,i)},p=g=>{if(g.pointerType!=="touch"){if(o){l=!0;return}h(g)}},m=g=>{if(!TCe(g))return;l=!1;const v=e(s,g);typeof v=="function"&&(u=v,s.addEventListener("pointerleave",p,i))};s.addEventListener("pointerenter",m,i),s.addEventListener("pointerdown",f,i)}),a}const Gle=(n,e)=>e?n===e?!0:Gle(n,e.parentElement):!1,TG=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,ACe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CCe(n){return ACe.has(n.tagName)||n.isContentEditable===!0}const MCe=new Set(["INPUT","SELECT","TEXTAREA"]);function DCe(n){return MCe.has(n.tagName)||n.isContentEditable===!0}const hL=new WeakSet;function fq(n){return e=>{e.key==="Enter"&&n(e)}}function sF(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ICe=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=fq(()=>{if(hL.has(t))return;sF(t,"down");const i=fq(()=>{sF(t,"up")}),a=()=>sF(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function pq(n){return TG(n)&&!Vle()}const mq=new WeakSet;function PCe(n,e,t={}){const[r,i,a]=Hle(n,t),s=o=>{const l=o.currentTarget;if(!pq(o)||mq.has(o))return;hL.add(l),t.stopPropagation&&mq.add(o);const u=e(l,o),c=(f,p)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",d),hL.has(l)&&hL.delete(l),pq(f)&&typeof u=="function"&&u(f,{success:p})},h=f=>{c(f,l===window||l===document||t.useGlobalTarget||Gle(l,f.target))},d=f=>{c(f,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",d,i)};return r.forEach(o=>{(t.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),PU(o)&&(o.addEventListener("focus",u=>ICe(u,i)),!CCe(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function EG(n){return qoe(n)&&"ownerSVGElement"in n}const dL=new WeakMap;let qp;const jle=(n,e,t)=>(r,i)=>i&&i[0]?i[0][n+"Size"]:EG(r)&&"getBBox"in r?r.getBBox()[e]:r[t],LCe=jle("inline","width","offsetWidth"),RCe=jle("block","height","offsetHeight");function NCe({target:n,borderBoxSize:e}){var t;(t=dL.get(n))==null||t.forEach(r=>{r(n,{get width(){return LCe(n,e)},get height(){return RCe(n,e)}})})}function kCe(n){n.forEach(NCe)}function OCe(){typeof ResizeObserver>"u"||(qp=new ResizeObserver(kCe))}function BCe(n,e){qp||OCe();const t=Ule(n);return t.forEach(r=>{let i=dL.get(r);i||(i=new Set,dL.set(r,i)),i.add(e),qp==null||qp.observe(r)}),()=>{t.forEach(r=>{const i=dL.get(r);i==null||i.delete(e),i!=null&&i.size||qp==null||qp.unobserve(r)})}}const fL=new Set;let K_;function FCe(){K_=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};fL.forEach(e=>e(n))},window.addEventListener("resize",K_)}function UCe(n){return fL.add(n),K_||FCe(),()=>{fL.delete(n),!fL.size&&typeof K_=="function"&&(window.removeEventListener("resize",K_),K_=void 0)}}function gq(n,e){return typeof n=="function"?UCe(n):BCe(n,e)}function zCe(n){return EG(n)&&n.tagName==="svg"}const VCe=[...Ole,sa,xg],HCe=n=>VCe.find(kle(n)),vq=()=>({translate:0,scale:1,origin:0,originPoint:0}),Z_=()=>({x:vq(),y:vq()}),yq=()=>({min:0,max:0}),_a=()=>({x:yq(),y:yq()}),GCe=new WeakMap;function Uk(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function cA(n){return typeof n=="string"||Array.isArray(n)}const AG=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],CG=["initial",...AG];function zk(n){return Uk(n.animate)||CG.some(e=>cA(n[e]))}function Wle(n){return!!(zk(n)||n.variants)}function jCe(n,e,t){for(const r in e){const i=e[r],a=t[r];if(Ns(i))n.addValue(r,i);else if(Ns(a))n.addValue(r,Q1(i,{owner:n}));else if(a!==i)if(n.hasValue(r)){const s=n.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=n.getStaticValue(r);n.addValue(r,Q1(s!==void 0?s:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const LU={current:null},Xle={current:!1},WCe=typeof window<"u";function XCe(){if(Xle.current=!0,!!WCe)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>LU.current=n.matches;n.addEventListener("change",e),e()}else LU.current=!1}const xq=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let kR={};function $le(n){kR=n}function $Ce(){return kR}class YCe{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,skipAnimations:a,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=vG,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=ho.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ni.render(this.render,!1,!0))};const{latestValues:u,renderState:c}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=a,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=zk(t),this.isVariantNode=Wle(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const f in d){const p=d[f];u[f]!==void 0&&Ns(p)&&p.set(u[f])}}mount(e){var t,r;if(this.hasBeenMounted)for(const i in this.initialValues)(t=this.values.get(i))==null||t.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,GCe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,a)=>this.bindToMotionValue(a,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Xle.current||XCe(),this.shouldReduceMotion=LU.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),yg(this.notifyUpdate),yg(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&SCe.has(e)&&this.current instanceof HTMLElement){const{factory:s,keyframes:o,times:l,ease:u,duration:c}=t.accelerate,h=new Ale({element:this.current,name:e,keyframes:o,times:l,ease:u,duration:Tc(c)}),d=s(h);this.valueSubscriptions.set(e,()=>{d(),h.cancel()});return}const r=NS.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",s=>{this.latestValues[e]=s,this.props.onUpdate&&ni.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;typeof window<"u"&&window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kR){const t=kR[e];if(!t)continue;const{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_a()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<xq.length;r++){const i=xq[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=jCe(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Q1(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Yoe(r)||Koe(r))?r=parseFloat(r):!HCe(r)&&xg.test(t)&&(r=Fle(e,t)),this.setBaseTarget(e,Ns(r)?r.get():r)),Ns(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var a;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const s=_G(this.props,t,(a=this.presenceContext)==null?void 0:a.custom);s&&(r=s[e])}if(t&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ns(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new sG),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){wG.render(this.render)}}class Yle extends YCe{constructor(){super(...arguments),this.KeyframeResolver=bCe}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ns(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Lg{constructor(e){this.isMounted=!1,this.node=e}update(){}}function qle({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function qCe({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function KCe(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function oF(n){return n===void 0||n===1}function RU({scale:n,scaleX:e,scaleY:t}){return!oF(n)||!oF(e)||!oF(t)}function Ov(n){return RU(n)||Kle(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Kle(n){return _q(n.x)||_q(n.y)}function _q(n){return n&&n!=="0%"}function OR(n,e,t){const r=n-t,i=e*r;return t+i}function bq(n,e,t,r,i){return i!==void 0&&(n=OR(n,i,r)),OR(n,t,r)+e}function NU(n,e=0,t=1,r,i){n.min=bq(n.min,e,t,r,i),n.max=bq(n.max,e,t,r,i)}function Zle(n,{x:e,y:t}){NU(n.x,e.translate,e.scale,e.originPoint),NU(n.y,t.translate,t.scale,t.originPoint)}const Sq=.999999999999,wq=1.0000000000001;function ZCe(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=t[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&J_(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,Zle(n,s)),r&&Ov(a.latestValues)&&J_(n,a.latestValues))}e.x<wq&&e.x>Sq&&(e.x=1),e.y<wq&&e.y>Sq&&(e.y=1)}function Q_(n,e){n.min=n.min+e,n.max=n.max+e}function Tq(n,e,t,r,i=.5){const a=bi(n.min,n.max,i);NU(n,e,t,a,r)}function J_(n,e){Tq(n.x,e.x,e.scaleX,e.scale,e.originX),Tq(n.y,e.y,e.scaleY,e.scale,e.originY)}function Qle(n,e){return qle(KCe(n.getBoundingClientRect(),e))}function QCe(n,e,t){const r=Qle(n,t),{scroll:i}=e;return i&&(Q_(r.x,i.offset.x),Q_(r.y,i.offset.y)),r}const JCe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eMe=RS.length;function tMe(n,e,t){let r="",i=!0;for(let a=0;a<eMe;a++){const s=RS[a],o=n[s];if(o===void 0)continue;let l=!0;if(typeof o=="number")l=o===(s.startsWith("scale")?1:0);else{const u=parseFloat(o);l=s.startsWith("scale")?u===1:u===0}if(!l||t){const u=zle(o,SG[s]);if(!l){i=!1;const c=JCe[s]||s;r+=`${c}(${u}) `}t&&(e[s]=u)}}return r=r.trim(),t?r=t(e,i?"":r):i&&(r="none"),r}function MG(n,e,t){const{style:r,vars:i,transformOrigin:a}=n;let s=!1,o=!1;for(const l in e){const u=e[l];if(NS.has(l)){s=!0;continue}else if(cle(l)){i[l]=u;continue}else{const c=zle(u,SG[l]);l.startsWith("origin")?(o=!0,a[l]=c):r[l]=c}}if(e.transform||(s||t?r.transform=tMe(e,n.transform,t):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=a;r.transformOrigin=`${l} ${u} ${c}`}}function Jle(n,{style:e,vars:t},r,i){const a=n.style;let s;for(s in e)a[s]=e[s];i==null||i.applyProjectionStyles(a,r);for(s in t)a.setProperty(s,t[s])}function Eq(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const $w={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Xt.test(n))n=parseFloat(n);else return n;const t=Eq(n,e.target.x),r=Eq(n,e.target.y);return`${t}% ${r}%`}},nMe={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=xg.parse(n);if(i.length>5)return r;const a=xg.createTransformer(n),s=typeof i[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=bi(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}},kU={borderRadius:{...$w,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$w,borderTopRightRadius:$w,borderBottomLeftRadius:$w,borderBottomRightRadius:$w,boxShadow:nMe};function eue(n,{layout:e,layoutId:t}){return NS.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!kU[n]||n==="opacity")}function DG(n,e,t){var s;const r=n.style,i=e==null?void 0:e.style,a={};if(!r)return a;for(const o in r)(Ns(r[o])||i&&Ns(i[o])||eue(o,n)||((s=t==null?void 0:t.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(a[o]=r[o]);return a}function rMe(n){return window.getComputedStyle(n)}class iMe extends Yle{constructor(){super(...arguments),this.type="html",this.renderInstance=Jle}readValueFromInstance(e,t){var r;if(NS.has(t))return(r=this.projection)!=null&&r.isProjecting?bU(t):wAe(e,t);{const i=rMe(e),a=(cle(t)?i.getPropertyValue(t):i[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Qle(e,t)}build(e,t,r){MG(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return DG(e,t,r)}}const aMe={offset:"stroke-dashoffset",array:"stroke-dasharray"},sMe={offset:"strokeDashoffset",array:"strokeDasharray"};function oMe(n,e,t=1,r=0,i=!0){n.pathLength=1;const a=i?aMe:sMe;n[a.offset]=`${-r}`,n[a.array]=`${e} ${t}`}const lMe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function tue(n,{attrX:e,attrY:t,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:s=0,...o},l,u,c){if(MG(n,o,u),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:h,style:d}=n;h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete h.transformBox);for(const f of lMe)h[f]!==void 0&&(d[f]=h[f],delete h[f]);e!==void 0&&(h.x=e),t!==void 0&&(h.y=t),r!==void 0&&(h.scale=r),i!==void 0&&oMe(h,i,a,s,!1)}const nue=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),rue=n=>typeof n=="string"&&n.toLowerCase()==="svg";function uMe(n,e,t,r){Jle(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(nue.has(i)?i:bG(i),e.attrs[i])}function iue(n,e,t){const r=DG(n,e,t);for(const i in n)if(Ns(n[i])||Ns(e[i])){const a=RS.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=n[i]}return r}class cMe extends Yle{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_a}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(NS.has(t)){const r=Ble(t);return r&&r.default||0}return t=nue.has(t)?t:bG(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return iue(e,t,r)}build(e,t,r){tue(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){uMe(e,t,r,i)}mount(e){this.isSVGTag=rue(e.tagName),super.mount(e)}}const hMe=CG.length;function aue(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?aue(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<hMe;t++){const r=CG[t],i=n.props[r];(cA(i)||i===!1)&&(e[r]=i)}return e}function sue(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const dMe=[...AG].reverse(),fMe=AG.length;function pMe(n){return e=>Promise.all(e.map(({animation:t,options:r})=>hCe(n,t,r)))}function mMe(n){let e=pMe(n),t=Aq(),r=!0;const i=l=>(u,c)=>{var d;const h=gb(n,c,l==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:p,...m}=h;u={...u,...m,...p}}return u};function a(l){e=l(n)}function s(l){const{props:u}=n,c=aue(n.parent)||{},h=[],d=new Set;let f={},p=1/0;for(let g=0;g<fMe;g++){const v=dMe[g],b=t[v],S=u[v]!==void 0?u[v]:c[v],w=cA(S),E=v===l?b.isActive:null;E===!1&&(p=g);let T=S===c[v]&&S!==u[v]&&w;if(T&&r&&n.manuallyAnimateOnMount&&(T=!1),b.protectedKeys={...f},!b.isActive&&E===null||!S&&!b.prevProp||Uk(S)||typeof S=="boolean")continue;if(v==="exit"&&b.isActive&&E!==!0){b.prevResolvedValues&&(f={...f,...b.prevResolvedValues});continue}const M=gMe(b.prevProp,S);let P=M||v===l&&b.isActive&&!T&&w||g>p&&w,I=!1;const D=Array.isArray(S)?S:[S];let R=D.reduce(i(v),{});E===!1&&(R={});const{prevResolvedValues:B={}}=b,k={...B,...R},V=X=>{P=!0,d.has(X)&&(I=!0,d.delete(X)),b.needsAnimating[X]=!0;const j=n.getValue(X);j&&(j.liveStyle=!1)};for(const X in k){const j=R[X],Q=B[X];if(f.hasOwnProperty(X))continue;let H=!1;CU(j)&&CU(Q)?H=!sue(j,Q):H=j!==Q,H?j!=null?V(X):d.add(X):j!==void 0&&d.has(X)?V(X):b.protectedKeys[X]=!0}b.prevProp=S,b.prevResolvedValues=R,b.isActive&&(f={...f,...R}),r&&n.blockInitialAnimation&&(P=!1);const G=T&&M;P&&(!G||I)&&h.push(...D.map(X=>{const j={type:v};if(typeof X=="string"&&r&&!G&&n.manuallyAnimateOnMount&&n.parent){const{parent:Q}=n,H=gb(Q,X);if(Q.enteringChildren&&H){const{delayChildren:K}=H.transition||{};j.delay=Mle(Q.enteringChildren,n,K)}}return{animation:X,options:j}}))}if(d.size){const g={};if(typeof u.initial!="boolean"){const v=gb(n,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(g.transition=v.transition)}d.forEach(v=>{const b=n.getBaseTarget(v),S=n.getValue(v);S&&(S.liveStyle=!0),g[v]=b??null}),h.push({animation:g})}let m=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!n.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(h):Promise.resolve()}function o(l,u){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)==null||h.forEach(d=>{var f;return(f=d.animationState)==null?void 0:f.setActive(l,u)}),t[l].isActive=u;const c=s(l);for(const d in t)t[d].protectedKeys={};return c}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>t,reset:()=>{t=Aq()}}}function gMe(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!sue(e,n):!1}function nv(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Aq(){return{animate:nv(!0),whileInView:nv(),whileHover:nv(),whileTap:nv(),whileDrag:nv(),whileFocus:nv(),exit:nv()}}function Cq(n,e){n.min=e.min,n.max=e.max}function $u(n,e){Cq(n.x,e.x),Cq(n.y,e.y)}function Mq(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const oue=1e-4,vMe=1-oue,yMe=1+oue,lue=.01,xMe=0-lue,_Me=0+lue;function fo(n){return n.max-n.min}function bMe(n,e,t){return Math.abs(n-e)<=t}function Dq(n,e,t,r=.5){n.origin=r,n.originPoint=bi(e.min,e.max,n.origin),n.scale=fo(t)/fo(e),n.translate=bi(t.min,t.max,n.origin)-n.originPoint,(n.scale>=vMe&&n.scale<=yMe||isNaN(n.scale))&&(n.scale=1),(n.translate>=xMe&&n.translate<=_Me||isNaN(n.translate))&&(n.translate=0)}function LE(n,e,t,r){Dq(n.x,e.x,t.x,r?r.originX:void 0),Dq(n.y,e.y,t.y,r?r.originY:void 0)}function Iq(n,e,t){n.min=t.min+e.min,n.max=n.min+fo(e)}function SMe(n,e,t){Iq(n.x,e.x,t.x),Iq(n.y,e.y,t.y)}function Pq(n,e,t){n.min=e.min-t.min,n.max=n.min+fo(e)}function BR(n,e,t){Pq(n.x,e.x,t.x),Pq(n.y,e.y,t.y)}function Lq(n,e,t,r,i){return n-=e,n=OR(n,1/t,r),i!==void 0&&(n=OR(n,1/i,r)),n}function wMe(n,e=0,t=1,r=.5,i,a=n,s=n){if(jh.test(e)&&(e=parseFloat(e),e=bi(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=bi(a.min,a.max,r);n===a&&(o-=e),n.min=Lq(n.min,e,t,o,i),n.max=Lq(n.max,e,t,o,i)}function Rq(n,e,[t,r,i],a,s){wMe(n,e[t],e[r],e[i],e.scale,a,s)}const TMe=["x","scaleX","originX"],EMe=["y","scaleY","originY"];function Nq(n,e,t,r){Rq(n.x,e,TMe,t?t.x:void 0,r?r.x:void 0),Rq(n.y,e,EMe,t?t.y:void 0,r?r.y:void 0)}function kq(n){return n.translate===0&&n.scale===1}function uue(n){return kq(n.x)&&kq(n.y)}function Oq(n,e){return n.min===e.min&&n.max===e.max}function AMe(n,e){return Oq(n.x,e.x)&&Oq(n.y,e.y)}function Bq(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function cue(n,e){return Bq(n.x,e.x)&&Bq(n.y,e.y)}function Fq(n){return fo(n.x)/fo(n.y)}function Uq(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function oh(n){return[n("x"),n("y")]}function CMe(n,e,t){let r="";const i=n.x.translate/e.x,a=n.y.translate/e.y,s=(t==null?void 0:t.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:d,skewX:f,skewY:p}=t;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),d&&(r+=`rotateY(${d}deg) `),f&&(r+=`skewX(${f}deg) `),p&&(r+=`skewY(${p}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const hue=["TopLeft","TopRight","BottomLeft","BottomRight"],MMe=hue.length,zq=n=>typeof n=="string"?parseFloat(n):n,Vq=n=>typeof n=="number"||Xt.test(n);function DMe(n,e,t,r,i,a){i?(n.opacity=bi(0,t.opacity??1,IMe(r)),n.opacityExit=bi(e.opacity??1,0,PMe(r))):a&&(n.opacity=bi(e.opacity??1,t.opacity??1,r));for(let s=0;s<MMe;s++){const o=`border${hue[s]}Radius`;let l=Hq(e,o),u=Hq(t,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Vq(l)===Vq(u)?(n[o]=Math.max(bi(zq(l),zq(u),r),0),(jh.test(u)||jh.test(l))&&(n[o]+="%")):n[o]=u}(e.rotate||t.rotate)&&(n.rotate=bi(e.rotate||0,t.rotate||0,r))}function Hq(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const IMe=due(0,.5,ile),PMe=due(.5,.95,Pu);function due(n,e,t){return r=>r<n?0:r>e?1:t(oA(n,e,r))}function LMe(n,e,t){const r=Ns(n)?n:Q1(n);return r.start(xG("",r,e,t)),r.animation}function hA(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const RMe=(n,e)=>n.depth-e.depth;class NMe{constructor(){this.children=[],this.isDirty=!1}add(e){rG(this.children,e),this.isDirty=!0}remove(e){PR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(RMe),this.isDirty=!1,this.children.forEach(e)}}function kMe(n,e){const t=ho.now(),r=({timestamp:i})=>{const a=i-t;a>=e&&(yg(r),n(a-e))};return ni.setup(r,!0),()=>yg(r)}function pL(n){return Ns(n)?n.get():n}class OMe{constructor(){this.members=[]}add(e){rG(this.members,e);for(let t=this.members.length-1;t>=0;t--){const r=this.members[t];if(r===e||r===this.lead||r===this.prevLead)continue;const i=r.instance;i&&i.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&PR(this.members,r)}e.scheduleRender()}remove(e){if(PR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const a=this.members[i],s=a.instance;if(a.isPresent!==!1&&(!s||s.isConnected!==!1)){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,a=e.options.layoutDependency;if(!(i!==void 0&&a!==void 0&&i===a)){const l=r.instance;l&&l.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const mL={hasAnimatedSinceResize:!0,hasEverUpdated:!1},lF=["","X","Y","Z"],BMe=1e3;let FMe=0;function uF(n,e,t,r){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),r&&(r[n]=0))}function fue(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Rle(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ni,!(i||a))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&fue(r)}function pue({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=FMe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(VMe),this.nodes.forEach(WMe),this.nodes.forEach(XMe),this.nodes.forEach(HMe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new NMe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new sG),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=EG(s)&&!zCe(s),this.instance=s;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),n){let c,h=0;const d=()=>this.root.updateBlockedByResize=!1;ni.read(()=>{h=window.innerWidth}),n(s,()=>{const f=window.innerWidth;f!==h&&(h=f,this.root.updateBlockedByResize=!0,c&&c(),c=kMe(d,250),mL.hasAnimatedSinceResize&&(mL.hasAnimatedSinceResize=!1,this.nodes.forEach(Wq)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h,hasRelativeLayoutChanged:d,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||ZMe,{onLayoutAnimationStart:m,onLayoutAnimationComplete:g}=u.getProps(),v=!this.targetLayout||!cue(this.targetLayout,f),b=!h&&d;if(this.options.layoutRoot||this.resumeFrom||b||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...yG(p,"layout"),onPlay:m,onComplete:g};(u.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(c,b)}else h||Wq(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yg(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($Me),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fue(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Gq);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(jq);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(jMe),this.nodes.forEach(UMe),this.nodes.forEach(zMe)):this.nodes.forEach(jq),this.clearAllSnapshots();const o=ho.now();ss.delta=Jh(0,1e3/60,o-ss.timestamp),ss.timestamp=o,ss.isProcessing=!0,eF.update.process(ss),eF.preRender.process(ss),eF.render.process(ss),ss.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wG.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(GMe),this.sharedNodes.forEach(YMe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ni.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ni.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fo(this.snapshot.measuredBox.x)&&!fo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=_a(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!uue(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Ov(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),QMe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return _a();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(JMe))){const{scroll:c}=this.root;c&&(Q_(o.x,c.offset.x),Q_(o.y,c.offset.y))}return o}removeElementScroll(s){var l;const o=_a();if($u(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:d}=c;c!==this.root&&h&&d.layoutScroll&&(h.wasRoot&&$u(o,s),Q_(o.x,h.offset.x),Q_(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const l=_a();$u(l,s);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&J_(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ov(c.latestValues)&&J_(l,c.latestValues)}return Ov(this.latestValues)&&J_(l,this.latestValues),l}removeTransform(s){const o=_a();$u(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ov(u.latestValues))continue;RU(u.latestValues)&&u.updateSnapshot();const c=_a(),h=u.measurePageBox();$u(c,h),Nq(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ov(this.latestValues)&&Nq(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ss.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:h}=this.options;if(!this.layout||!(c||h))return;this.resolvedRelativeTargetAt=ss.timestamp;const d=this.getClosestProjectingParent();d&&this.linkedParentVersion!==d.layoutVersion&&!d.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(d&&d.layout?this.createRelativeTarget(d,this.layout.layoutBox,d.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=_a(),this.targetWithTransforms=_a()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),SMe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$u(this.target,this.layout.layoutBox),Zle(this.target,this.targetDelta)):$u(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,d&&!!d.resumingFrom==!!this.resumingFrom&&!d.options.layoutScroll&&d.target&&this.animationProgress!==1?this.createRelativeTarget(d,this.target,d.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||RU(this.parent.latestValues)||Kle(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(s,o,l){this.relativeParent=s,this.linkedParentVersion=s.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_a(),this.relativeTargetOrigin=_a(),BR(this.relativeTargetOrigin,o,l),$u(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var p;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ss.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;$u(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,d=this.treeScale.y;ZCe(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=_a());const{target:f}=s;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Mq(this.prevProjectionDelta.x,this.projectionDelta.x),Mq(this.prevProjectionDelta.y,this.projectionDelta.y)),LE(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==d||!Uq(this.projectionDelta.x,this.prevProjectionDelta.x)||!Uq(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Z_(),this.projectionDelta=Z_(),this.projectionDeltaWithTransform=Z_()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=Z_();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const d=_a(),f=l?l.source:void 0,p=this.layout?this.layout.source:void 0,m=f!==p,g=this.getStack(),v=!g||g.members.length<=1,b=!!(m&&!v&&this.options.crossfade===!0&&!this.path.some(KMe));this.animationProgress=0;let S;this.mixTargetDelta=w=>{const E=w/1e3;Xq(h.x,s.x,E),Xq(h.y,s.y,E),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(BR(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qMe(this.relativeTarget,this.relativeTargetOrigin,d,E),S&&AMe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=_a()),$u(S,this.relativeTarget)),m&&(this.animationValues=c,DMe(c,u,this.latestValues,E,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){var o,l,u;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(yg(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ni.update(()=>{mL.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Q1(0)),this.currentAnimation=LMe(this.motionValue,[0,1e3],{...s,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),s.onUpdate&&s.onUpdate(c)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(BMe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&mue(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||_a();const h=fo(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const d=fo(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+d}$u(o,l),J_(o,c),LE(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new OMe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&uF("z",s,u,this.animationValues);for(let c=0;c<lF.length;c++)uF(`rotate${lF[c]}`,s,u,this.animationValues),uF(`skew${lF[c]}`,s,u,this.animationValues);s.render();for(const c in u)s.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);s.scheduleRender()}applyProjectionStyles(s,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){s.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,s.visibility="",s.opacity="",s.pointerEvents=pL(o==null?void 0:o.pointerEvents)||"",s.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(s.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,s.pointerEvents=pL(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ov(this.latestValues)&&(s.transform=l?l({},""):"none",this.hasProjected=!1);return}s.visibility="";const c=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=CMe(this.projectionDeltaWithTransform,this.treeScale,c);l&&(h=l(c,h)),s.transform=h;const{x:d,y:f}=this.projectionDelta;s.transformOrigin=`${d.origin*100}% ${f.origin*100}% 0`,u.animationValues?s.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:s.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in kU){if(c[p]===void 0)continue;const{correct:m,applyTo:g,isCSSVariable:v}=kU[p],b=h==="none"?c[p]:m(c[p],u);if(g){const S=g.length;for(let w=0;w<S;w++)s[g[w]]=b}else v?this.options.visualElement.renderState.vars[p]=b:s[p]=b}this.options.layoutId&&(s.pointerEvents=u===this?pL(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(Gq),this.root.sharedNodes.clear()}}}function UMe(n){n.updateLayout()}function zMe(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:a}=n.options,s=e.source!==n.layout.source;a==="size"?oh(h=>{const d=s?e.measuredBox[h]:e.layoutBox[h],f=fo(d);d.min=r[h].min,d.max=d.min+f}):mue(a,e.layoutBox,r)&&oh(h=>{const d=s?e.measuredBox[h]:e.layoutBox[h],f=fo(r[h]);d.max=d.min+f,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+f)});const o=Z_();LE(o,r,e.layoutBox);const l=Z_();s?LE(l,n.applyTransform(i,!0),e.measuredBox):LE(l,r,e.layoutBox);const u=!uue(o);let c=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:d,layout:f}=h;if(d&&f){const p=_a();BR(p,e.layoutBox,d.layoutBox);const m=_a();BR(m,r,f.layoutBox),cue(p,m)||(c=!0),h.options.layoutRoot&&(n.relativeTarget=m,n.relativeTargetOrigin=p,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function VMe(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function HMe(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function GMe(n){n.clearSnapshot()}function Gq(n){n.clearMeasurements()}function jq(n){n.isLayoutDirty=!1}function jMe(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Wq(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function WMe(n){n.resolveTargetDelta()}function XMe(n){n.calcProjection()}function $Me(n){n.resetSkewAndRotation()}function YMe(n){n.removeLeadSnapshot()}function Xq(n,e,t){n.translate=bi(e.translate,0,t),n.scale=bi(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function $q(n,e,t,r){n.min=bi(e.min,t.min,r),n.max=bi(e.max,t.max,r)}function qMe(n,e,t,r){$q(n.x,e.x,t.x,r),$q(n.y,e.y,t.y,r)}function KMe(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const ZMe={duration:.45,ease:[.4,0,.1,1]},Yq=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),qq=Yq("applewebkit/")&&!Yq("chrome/")?Math.round:Pu;function Kq(n){n.min=qq(n.min),n.max=qq(n.max)}function QMe(n){Kq(n.x),Kq(n.y)}function mue(n,e,t){return n==="position"||n==="preserve-aspect"&&!bMe(Fq(e),Fq(t),.2)}function JMe(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const e2e=pue({attachResizeListener:(n,e)=>hA(n,"resize",e),measureScroll:()=>{var n,e;return{x:document.documentElement.scrollLeft||((n=document.body)==null?void 0:n.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),cF={current:void 0},gue=pue({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!cF.current){const n=new e2e({});n.mount(window),n.setOptions({layoutScroll:!0}),cF.current=n}return cF.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),IG=ee.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Zq(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function t2e(...n){return e=>{let t=!1;const r=n.map(i=>{const a=Zq(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():Zq(n[i],null)}}}}function n2e(...n){return ee.useCallback(t2e(...n),n)}class r2e extends ee.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=t.offsetParent,i=PU(r)&&r.offsetWidth||0,a=PU(r)&&r.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=i-s.width-s.left,s.bottom=a-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function i2e({children:n,isPresent:e,anchorX:t,anchorY:r,root:i,pop:a}){var d;const s=ee.useId(),o=ee.useRef(null),l=ee.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:u}=ee.useContext(IG),c=((d=n.props)==null?void 0:d.ref)??(n==null?void 0:n.ref),h=n2e(o,c);return ee.useInsertionEffect(()=>{const{width:f,height:p,top:m,left:g,right:v,bottom:b}=l.current;if(e||a===!1||!o.current||!f||!p)return;const S=t==="left"?`left: ${g}`:`right: ${v}`,w=r==="bottom"?`bottom: ${b}`:`top: ${m}`;o.current.dataset.motionPopId=s;const E=document.createElement("style");u&&(E.nonce=u);const T=i??document.head;return T.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${S}px !important;
            ${w}px !important;
          }
        `),()=>{T.contains(E)&&T.removeChild(E)}},[e]),C.jsx(r2e,{isPresent:e,childRef:o,sizeRef:l,pop:a,children:a===!1?n:ee.cloneElement(n,{ref:h})})}const a2e=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:s,anchorX:o,anchorY:l,root:u})=>{const c=nG(s2e),h=ee.useId();let d=!0,f=ee.useMemo(()=>(d=!1,{id:h,initial:e,isPresent:t,custom:i,onExitComplete:p=>{c.set(p,!0);for(const m of c.values())if(!m)return;r&&r()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[t,c,r]);return a&&d&&(f={...f}),ee.useMemo(()=>{c.forEach((p,m)=>c.set(m,!1))},[t]),ee.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),n=C.jsx(i2e,{pop:s==="popLayout",isPresent:t,anchorX:o,anchorY:l,root:u,children:n}),C.jsx(Fk.Provider,{value:f,children:n})};function s2e(){return new Map}function vue(n=!0){const e=ee.useContext(Fk);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:i}=e,a=ee.useId();ee.useEffect(()=>{if(n)return i(a)},[n]);const s=ee.useCallback(()=>n&&r&&r(a),[a,r,n]);return!t&&r?[!1,s]:[!0]}const rI=n=>n.key||"";function Qq(n){const e=[];return ee.Children.forEach(n,t=>{ee.isValidElement(t)&&e.push(t)}),e}const o2e=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:s=!1,anchorX:o="left",anchorY:l="top",root:u})=>{const[c,h]=vue(s),d=ee.useMemo(()=>Qq(n),[n]),f=s&&!c?[]:d.map(rI),p=ee.useRef(!0),m=ee.useRef(d),g=nG(()=>new Map),v=ee.useRef(new Set),[b,S]=ee.useState(d),[w,E]=ee.useState(d);$oe(()=>{p.current=!1,m.current=d;for(let P=0;P<w.length;P++){const I=rI(w[P]);f.includes(I)?(g.delete(I),v.current.delete(I)):g.get(I)!==!0&&g.set(I,!1)}},[w,f.length,f.join("-")]);const T=[];if(d!==b){let P=[...d];for(let I=0;I<w.length;I++){const D=w[I],R=rI(D);f.includes(R)||(P.splice(I,0,D),T.push(D))}return a==="wait"&&T.length&&(P=T),E(Qq(P)),S(d),null}const{forceRender:M}=ee.useContext(tG);return C.jsx(C.Fragment,{children:w.map(P=>{const I=rI(P),D=s&&!c?!1:d===w||f.includes(I),R=()=>{if(v.current.has(I))return;if(v.current.add(I),g.has(I))g.set(I,!0);else return;let B=!0;g.forEach(k=>{k||(B=!1)}),B&&(M==null||M(),E(m.current),s&&(h==null||h()),r&&r())};return C.jsx(a2e,{isPresent:D,initial:!p.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:u,onExitComplete:D?void 0:R,anchorX:o,anchorY:l,children:P},I)})})},yue=ee.createContext({strict:!1}),Jq={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let eK=!1;function l2e(){if(eK)return;const n={};for(const e in Jq)n[e]={isEnabled:t=>Jq[e].some(r=>!!t[r])};$le(n),eK=!0}function xue(){return l2e(),$Ce()}function u2e(n){const e=xue();for(const t in n)e[t]={...e[t],...n[t]};$le(e)}const c2e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function FR(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||c2e.has(n)}let _ue=n=>!FR(n);function h2e(n){typeof n=="function"&&(_ue=e=>e.startsWith("on")?!FR(e):n(e))}try{h2e(require("@emotion/is-prop-valid").default)}catch{}function d2e(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(_ue(i)||t===!0&&FR(i)||!e&&!FR(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}const Vk=ee.createContext({});function f2e(n,e){if(zk(n)){const{initial:t,animate:r}=n;return{initial:t===!1||cA(t)?t:void 0,animate:cA(r)?r:void 0}}return n.inherit!==!1?e:{}}function p2e(n){const{initial:e,animate:t}=f2e(n,ee.useContext(Vk));return ee.useMemo(()=>({initial:e,animate:t}),[tK(e),tK(t)])}function tK(n){return Array.isArray(n)?n.join(" "):n}const PG=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bue(n,e,t){for(const r in e)!Ns(e[r])&&!eue(r,t)&&(n[r]=e[r])}function m2e({transformTemplate:n},e){return ee.useMemo(()=>{const t=PG();return MG(t,e,n),Object.assign({},t.vars,t.style)},[e])}function g2e(n,e){const t=n.style||{},r={};return bue(r,t,n),Object.assign(r,m2e(n,e)),r}function v2e(n,e){const t={},r=g2e(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const Sue=()=>({...PG(),attrs:{}});function y2e(n,e,t,r){const i=ee.useMemo(()=>{const a=Sue();return tue(a,e,rue(r),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};bue(a,n.style,n),i.style={...a,...i.style}}return i}const x2e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function LG(n){return typeof n!="string"||n.includes("-")?!1:!!(x2e.indexOf(n)>-1||/[A-Z]/u.test(n))}function _2e(n,e,t,{latestValues:r},i,a=!1,s){const l=(s??LG(n)?y2e:v2e)(e,r,i,n),u=d2e(e,typeof n=="string",a),c=n!==ee.Fragment?{...u,...l,ref:t}:{},{children:h}=e,d=ee.useMemo(()=>Ns(h)?h.get():h,[h]);return ee.createElement(n,{...c,children:d})}function b2e({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,i){return{latestValues:S2e(t,r,i,n),renderState:e()}}function S2e(n,e,t,r){const i={},a=r(n,{});for(const d in a)i[d]=pL(a[d]);let{initial:s,animate:o}=n;const l=zk(n),u=Wle(n);e&&u&&!l&&n.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let c=t?t.initial===!1:!1;c=c||s===!1;const h=c?o:s;if(h&&typeof h!="boolean"&&!Uk(h)){const d=Array.isArray(h)?h:[h];for(let f=0;f<d.length;f++){const p=_G(n,d[f]);if(p){const{transitionEnd:m,transition:g,...v}=p;for(const b in v){let S=v[b];if(Array.isArray(S)){const w=c?S.length-1:0;S=S[w]}S!==null&&(i[b]=S)}for(const b in m)i[b]=m[b]}}}return i}const wue=n=>(e,t)=>{const r=ee.useContext(Vk),i=ee.useContext(Fk),a=()=>b2e(n,e,r,i);return t?a():nG(a)},w2e=wue({scrapeMotionValuesFromProps:DG,createRenderState:PG}),T2e=wue({scrapeMotionValuesFromProps:iue,createRenderState:Sue}),E2e=Symbol.for("motionComponentSymbol");function A2e(n,e,t){const r=ee.useRef(t);ee.useInsertionEffect(()=>{r.current=t});const i=ee.useRef(null);return ee.useCallback(a=>{var o;a&&((o=n.onMount)==null||o.call(n,a)),e&&(a?e.mount(a):e.unmount());const s=r.current;if(typeof s=="function")if(a){const l=s(a);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):s(a);else s&&(s.current=a)},[e])}const Tue=ee.createContext({});function N_(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function C2e(n,e,t,r,i,a){var S,w;const{visualElement:s}=ee.useContext(Vk),o=ee.useContext(yue),l=ee.useContext(Fk),u=ee.useContext(IG),c=u.reducedMotion,h=u.skipAnimations,d=ee.useRef(null),f=ee.useRef(!1);r=r||o.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:s,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c,skipAnimations:h,isSVG:a}),f.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const p=d.current,m=ee.useContext(Tue);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&M2e(d.current,t,i,m);const g=ee.useRef(!1);ee.useInsertionEffect(()=>{p&&g.current&&p.update(t,l)});const v=t[Lle],b=ee.useRef(!!v&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,v))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,v)));return $oe(()=>{f.current=!0,p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),b.current&&p.animationState&&p.animationState.animateChanges())}),ee.useEffect(()=>{p&&(!b.current&&p.animationState&&p.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var E;(E=window.MotionHandoffMarkAsComplete)==null||E.call(window,v)}),b.current=!1),p.enteringChildren=void 0)}),p}function M2e(n,e,t,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Eue(n.parent)),n.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&N_(o),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function Eue(n){if(n)return n.options.allowProjection!==!1?n.projection:Eue(n.parent)}function hF(n,{forwardMotionProps:e=!1,type:t}={},r,i){r&&u2e(r);const a=t?t==="svg":LG(n),s=a?T2e:w2e;function o(u,c){let h;const d={...ee.useContext(IG),...u,layoutId:D2e(u)},{isStatic:f}=d,p=p2e(u),m=s(u,f);if(!f&&Xoe){I2e();const g=P2e(d);h=g.MeasureLayout,p.visualElement=C2e(n,m,d,i,g.ProjectionNode,a)}return C.jsxs(Vk.Provider,{value:p,children:[h&&p.visualElement?C.jsx(h,{visualElement:p.visualElement,...d}):null,_2e(n,u,A2e(m,p.visualElement,c),m,f,e,a)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=ee.forwardRef(o);return l[E2e]=n,l}function D2e({layoutId:n}){const e=ee.useContext(tG).id;return e&&n!==void 0?e+"-"+n:n}function I2e(n,e){ee.useContext(yue).strict}function P2e(n){const e=xue(),{drag:t,layout:r}=e;if(!t&&!r)return{};const i={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function L2e(n,e){if(typeof Proxy>"u")return hF;const t=new Map,r=(a,s)=>hF(a,s,n,e),i=(a,s)=>r(a,s);return new Proxy(i,{get:(a,s)=>s==="create"?r:(t.has(s)||t.set(s,hF(s,void 0,n,e)),t.get(s))})}const R2e=(n,e)=>e.isSVG??LG(n)?new cMe(e):new iMe(e,{allowProjection:n!==ee.Fragment});class N2e extends Lg{constructor(e){super(e),e.animationState||(e.animationState=mMe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Uk(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let k2e=0;class O2e extends Lg{constructor(){super(...arguments),this.id=k2e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const B2e={animation:{Feature:N2e},exit:{Feature:O2e}};function h2(n){return{point:{x:n.pageX,y:n.pageY}}}const F2e=n=>e=>TG(e)&&n(e,h2(e));function RE(n,e,t,r){return hA(n,e,F2e(t),r)}const Aue=({current:n})=>n?n.ownerDocument.defaultView:null,nK=(n,e)=>Math.abs(n-e);function U2e(n,e){const t=nK(n.x,e.x),r=nK(n.y,e.y);return Math.sqrt(t**2+r**2)}const rK=new Set(["auto","scroll"]);class Cue{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:s=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=f=>{this.handleScroll(f.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=fF(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=U2e(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:g}=f,{timestamp:v}=ss;this.history.push({...g,timestamp:v});const{onStart:b,onMove:S}=this.handlers;p||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=dF(p,this.transformPagePoint),ni.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:v}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=fF(f.type==="pointercancel"?this.lastMoveEventInfo:dF(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,b),g&&g(f,b)},!TG(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=s,this.contextWindow=i||window;const l=h2(e),u=dF(l,this.transformPagePoint),{point:c}=u,{timestamp:h}=ss;this.history=[{...c,timestamp:h}];const{onSessionStart:d}=t;d&&d(e,fF(u,this.history)),this.removeListeners=l2(RE(this.contextWindow,"pointermove",this.handlePointerMove),RE(this.contextWindow,"pointerup",this.handlePointerUp),RE(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(rK.has(r.overflowX)||rK.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},a={x:i.x-t.x,y:i.y-t.y};a.x===0&&a.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=a.x,this.lastMoveEventInfo.point.y+=a.y):this.history.length>0&&(this.history[0].x-=a.x,this.history[0].y-=a.y),this.scrollPositions.set(e,i),ni.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),yg(this.updatePoint)}}function dF(n,e){return e?{point:e(n.point)}:n}function iK(n,e){return{x:n.x-e.x,y:n.y-e.y}}function fF({point:n},e){return{point:n,delta:iK(n,Mue(e)),offset:iK(n,z2e(e)),velocity:V2e(e,.1)}}function z2e(n){return n[0]}function Mue(n){return n[n.length-1]}function V2e(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=Mue(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Tc(e)));)t--;if(!r)return{x:0,y:0};r===n[0]&&n.length>2&&i.timestamp-r.timestamp>Tc(e)*2&&(r=n[1]);const a=Cu(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function H2e(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?bi(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?bi(t,n,r.max):Math.min(n,t)),n}function aK(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function G2e(n,{top:e,left:t,bottom:r,right:i}){return{x:aK(n.x,t,i),y:aK(n.y,e,r)}}function sK(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function j2e(n,e){return{x:sK(n.x,e.x),y:sK(n.y,e.y)}}function W2e(n,e){let t=.5;const r=fo(n),i=fo(e);return i>r?t=oA(e.min,e.max-r,n.min):r>i&&(t=oA(n.min,n.max-i,e.min)),Jh(0,1,t)}function X2e(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const OU=.35;function $2e(n=OU){return n===!1?n=0:n===!0&&(n=OU),{x:oK(n,"left","right"),y:oK(n,"top","bottom")}}function oK(n,e,t){return{min:lK(n,e),max:lK(n,t)}}function lK(n,e){return typeof n=="number"?n:n[e]||0}const Y2e=new WeakMap;class q2e{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_a(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{t&&this.snapToCursor(h2(h).point),this.stopAnimation()},s=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:m}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wCe(f),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=d,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oh(v=>{let b=this.getAxisMotionValue(v).get()||0;if(jh.test(b)){const{projection:S}=this.visualElement;if(S&&S.layout){const w=S.layout.layoutBox[v];w&&(b=fo(w)*(parseFloat(b)/100))}}this.originPoint[v]=b}),m&&ni.update(()=>m(h,d),!1,!0),MU(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d;const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=Z2e(v),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),g&&ni.update(()=>g(h,d),!1,!0)},l=(h,d)=>{this.latestPointerEvent=h,this.latestPanInfo=d,this.stop(h,d),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:c}=this.getProps();this.panSession=new Cue(e,{onSessionStart:a,onStart:s,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,distanceThreshold:r,contextWindow:Aue(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,i=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:s}=i;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&ni.postRender(()=>o(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!iI(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=H2e(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&N_(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=G2e(r.layoutBox,e):this.constraints=!1,this.elastic=$2e(t),i!==this.constraints&&!N_(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&oh(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=X2e(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!N_(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=QCe(r,i.root,this.visualElement.getTransformPagePoint());let s=j2e(i.layout.layoutBox,a);if(t){const o=t(qCe(s));this.hasMutatedConstraints=!!o,o&&(s=qle(o))}return s}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=oh(c=>{if(!iI(c,t,this.currentDirection))return;let h=l&&l[c]||{};s&&(h={min:0,max:0});const d=i?200:1e6,f=i?40:1e7,p={type:"inertia",velocity:r?e[c]:0,bounceStiffness:d,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(c,p)});return Promise.all(u).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return MU(this.visualElement,e),r.start(xG(e,r,0,t,this.visualElement,!1))}stopAnimation(){oh(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){oh(t=>{const{drag:r}=this.getProps();if(!iI(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(t);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[t],l=a.get()||0;a.set(e[t]-bi(s,o,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!N_(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};oh(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=W2e({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),oh(s=>{if(!iI(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(bi(l,u,i[s]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Y2e.set(this.visualElement,this);const e=this.visualElement.current,t=RE(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps(),d=u.target,f=d!==e&&DCe(d);c&&h&&!f&&this.start(u)});let r;const i=()=>{const{dragConstraints:u}=this.getProps();N_(u)&&u.current&&(this.constraints=this.resolveRefConstraints(),r||(r=K2e(e,u.current,()=>this.scalePositionWithinConstraints())))},{projection:a}=this.visualElement,s=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ni.read(i);const o=hA(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(oh(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=u[h].translate,d.set(d.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),t(),s(),l&&l(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=OU,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function uK(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function K2e(n,e,t){const r=gq(n,uK(t)),i=gq(e,uK(t));return()=>{r(),i()}}function iI(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Z2e(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Q2e extends Lg{constructor(e){super(e),this.removeGroupControls=Pu,this.removeListeners=Pu,this.controls=new q2e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Pu}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const pF=n=>(e,t)=>{n&&ni.update(()=>n(e,t),!1,!0)};class J2e extends Lg{constructor(){super(...arguments),this.removePointerDownListener=Pu}onPointerDown(e){this.session=new Cue(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Aue(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:pF(e),onStart:pF(t),onMove:pF(r),onEnd:(a,s)=>{delete this.session,i&&ni.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=RE(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let mF=!1;class eDe extends ee.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(t.group&&t.group.add(a),r&&r.register&&i&&r.register(a),mF&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),mL.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:a}=this.props,{projection:s}=r;return s&&(s.isPresent=a,e.layoutDependency!==t&&s.setOptions({...s.options,layoutDependency:t}),mF=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==a?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||ni.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wG.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;mF=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Due(n){const[e,t]=vue(),r=ee.useContext(tG);return C.jsx(eDe,{...n,layoutGroup:r,switchLayoutGroup:ee.useContext(Tue),isPresent:e,safeToRemove:t})}const tDe={pan:{Feature:J2e},drag:{Feature:Q2e,ProjectionNode:gue,MeasureLayout:Due}};function cK(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,a=r[i];a&&ni.postRender(()=>a(e,h2(e)))}class nDe extends Lg{mount(){const{current:e}=this.node;e&&(this.unmount=ECe(e,(t,r)=>(cK(this.node,r,"Start"),i=>cK(this.node,i,"End"))))}unmount(){}}class rDe extends Lg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=l2(hA(this.node.current,"focus",()=>this.onFocus()),hA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hK(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),a=r[i];a&&ni.postRender(()=>a(e,h2(e)))}class iDe extends Lg{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:r}=this.node.props;this.unmount=PCe(e,(i,a)=>(hK(this.node,a,"Start"),(s,{success:o})=>hK(this.node,s,o?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const BU=new WeakMap,gF=new WeakMap,aDe=n=>{const e=BU.get(n.target);e&&e(n)},sDe=n=>{n.forEach(aDe)};function oDe({root:n,...e}){const t=n||document;gF.has(t)||gF.set(t,{});const r=gF.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(sDe,{root:n,...e})),r[i]}function lDe(n,e,t){const r=oDe(e);return BU.set(n,t),r.observe(n),()=>{BU.delete(n),r.unobserve(n)}}const uDe={some:0,all:1};class cDe extends Lg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:a}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:uDe[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),d=u?c:h;d&&d(l)};return lDe(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hDe(e,t))&&this.startObserver()}unmount(){}}function hDe({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const dDe={inView:{Feature:cDe},tap:{Feature:iDe},focus:{Feature:rDe},hover:{Feature:nDe}},fDe={layout:{ProjectionNode:gue,MeasureLayout:Due}},pDe={...B2e,...dDe,...tDe,...fDe},Kn=L2e(pDe,R2e);function mDe({onContentSelect:n}){const[e,t]=ee.useState([{id:"project-7",title:" ",items:[{id:"task-7-1",title:" "},{id:"task-7-2",title:" "},{id:"task-7-3",title:" ",subItems:[{id:"theory-7-3",title:"",isActive:!0},{id:"training-7-3",title:""}]}]},{id:"project-10",title:" ",items:[{id:"task-10-1",title:" "},{id:"task-10-2",title:" "},{id:"task-10-3",title:" "}]}]),[r,i]=ee.useState(["project-7","project-10"]),[a,s]=ee.useState(["task-7-1","task-7-2","task-7-3","task-10-1","task-10-2","task-10-3"]),o=u=>{i(c=>c.includes(u)?c.filter(h=>h!==u):[...c,u])},l=u=>{s(c=>c.includes(u)?c.filter(h=>h!==u):[...c,u])};return C.jsxs("div",{className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-4 h-full overflow-y-auto",children:[C.jsxs("h3",{className:"text-lg font-semibold mb-4 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-list-ul text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("div",{className:"space-y-2",children:e.map(u=>C.jsxs("div",{className:"space-y-1",children:[C.jsxs("button",{onClick:()=>o(u.id),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-[var(--light-pink)]/30 transition-colors text-left",children:[C.jsx("span",{className:"text-[var(--text-primary)]",children:u.title}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${r.includes(u.id)?"transform rotate-180":""}`})]}),r.includes(u.id)&&u.items&&C.jsx("div",{className:"ml-5 space-y-1",children:u.items.map(c=>C.jsx("div",{className:"space-y-1",children:c.subItems?C.jsxs(C.Fragment,{children:[C.jsxs("button",{onClick:()=>l(c.id),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-[var(--light-pink)]/30 transition-colors text-left",children:[C.jsx("span",{className:"text-[var(--text-primary)]",children:c.title}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${a.includes(c.id)?"transform rotate-180":""}`})]}),a.includes(c.id)&&c.subItems&&C.jsx("div",{className:"ml-5 space-y-1",children:c.subItems.map(h=>C.jsx("button",{className:DE("w-full px-3 py-2 rounded-lg transition-colors text-left",h.isActive?"bg-[var(--brand-pink)]/10 text-[var(--brand-pink)] font-medium":"hover:bg-[var(--light-pink)]/30 text-[var(--text-primary)]"),onClick:()=>{t(d=>d.map(f=>{var p;return{...f,items:(p=f.items)==null?void 0:p.map(m=>{var g;return{...m,subItems:(g=m.subItems)==null?void 0:g.map(v=>({...v,isActive:v.id===h.id}))}})}})),h.id==="theory-7-3"?n==null||n("theory"):h.id==="training-7-3"&&(n==null||n("training"))},children:h.title},h.id))})]}):C.jsx("button",{className:"w-full px-3 py-2 rounded-lg hover:bg-[var(--light-pink)]/30 transition-colors text-left text-[var(--text-primary)]",children:c.title})},c.id))})]},u.id))})]})}const Iue=ee.createContext({dragDropManager:void 0});function Xl(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var dK=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),fK=function(){return Math.random().toString(36).substring(7).split("").join(".")},pK={INIT:"@@redux/INIT"+fK(),REPLACE:"@@redux/REPLACE"+fK()};function gDe(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function Pue(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Xl(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Xl(1));return t(Pue)(n,e)}if(typeof n!="function")throw new Error(Xl(2));var i=n,a=e,s=[],o=s,l=!1;function u(){o===s&&(o=s.slice())}function c(){if(l)throw new Error(Xl(3));return a}function h(m){if(typeof m!="function")throw new Error(Xl(4));if(l)throw new Error(Xl(5));var g=!0;return u(),o.push(m),function(){if(g){if(l)throw new Error(Xl(6));g=!1,u();var b=o.indexOf(m);o.splice(b,1),s=null}}}function d(m){if(!gDe(m))throw new Error(Xl(7));if(typeof m.type>"u")throw new Error(Xl(8));if(l)throw new Error(Xl(9));try{l=!0,a=i(a,m)}finally{l=!1}for(var g=s=o,v=0;v<g.length;v++){var b=g[v];b()}return m}function f(m){if(typeof m!="function")throw new Error(Xl(10));i=m,d({type:pK.REPLACE})}function p(){var m,g=h;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Xl(11));function S(){b.next&&b.next(c())}S();var w=g(S);return{unsubscribe:w}}},m[dK]=function(){return this},m}return d({type:pK.INIT}),r={dispatch:d,subscribe:h,getState:c,replaceReducer:f},r[dK]=p,r}function kn(n,e,...t){if(vDe()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return t[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function vDe(){return typeof process<"u"&&!0}function yDe(n,e,t){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:t||null,n)}function xDe(n,e){return n.filter(t=>t!==e)}function Lue(n){return typeof n=="object"}function _De(n,e){const t=new Map,r=a=>{t.set(a,t.has(a)?t.get(a)+1:1)};n.forEach(r),e.forEach(r);const i=[];return t.forEach((a,s)=>{a===1&&i.push(s)}),i}function bDe(n,e){return n.filter(t=>e.indexOf(t)>-1)}const RG="dnd-core/INIT_COORDS",Hk="dnd-core/BEGIN_DRAG",NG="dnd-core/PUBLISH_DRAG_SOURCE",Gk="dnd-core/HOVER",jk="dnd-core/DROP",Wk="dnd-core/END_DRAG";function mK(n,e){return{type:RG,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const SDe={type:RG,payload:{clientOffset:null,sourceClientOffset:null}};function wDe(n){return function(t=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:a,getSourceClientOffset:s}=r,o=n.getMonitor(),l=n.getRegistry();n.dispatch(mK(a)),TDe(t,o,l);const u=CDe(t,o);if(u==null){n.dispatch(SDe);return}let c=null;if(a){if(!s)throw new Error("getSourceClientOffset must be defined");EDe(s),c=s(u)}n.dispatch(mK(a,c));const d=l.getSource(u).beginDrag(o,u);if(d==null)return;ADe(d),l.pinSource(u);const f=l.getSourceType(u);return{type:Hk,payload:{itemType:f,item:d,sourceId:u,clientOffset:a||null,sourceClientOffset:c||null,isSourcePublic:!!i}}}}function TDe(n,e,t){kn(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(r){kn(t.getSource(r),"Expected sourceIds to be registered.")})}function EDe(n){kn(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function ADe(n){kn(Lue(n),"Item must be an object.")}function CDe(n,e){let t=null;for(let r=n.length-1;r>=0;r--)if(e.canDragSource(n[r])){t=n[r];break}return t}function MDe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DDe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){MDe(n,i,t[i])})}return n}function IDe(n){return function(t={}){const r=n.getMonitor(),i=n.getRegistry();PDe(r),NDe(r).forEach((s,o)=>{const l=LDe(s,o,i,r),u={type:jk,payload:{dropResult:DDe({},t,l)}};n.dispatch(u)})}}function PDe(n){kn(n.isDragging(),"Cannot call drop while not dragging."),kn(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function LDe(n,e,t,r){const i=t.getTarget(n);let a=i?i.drop(r,n):void 0;return RDe(a),typeof a>"u"&&(a=e===0?{}:r.getDropResult()),a}function RDe(n){kn(typeof n>"u"||Lue(n),"Drop result must either be an object or undefined.")}function NDe(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function kDe(n){return function(){const t=n.getMonitor(),r=n.getRegistry();ODe(t);const i=t.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(t,i),r.unpinSource()),{type:Wk}}}function ODe(n){kn(n.isDragging(),"Cannot call endDrag while not dragging.")}function FU(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function BDe(n){return function(t,{clientOffset:r}={}){FDe(t);const i=t.slice(0),a=n.getMonitor(),s=n.getRegistry(),o=a.getItemType();return zDe(i,s,o),UDe(i,a,s),VDe(i,a,s),{type:Gk,payload:{targetIds:i,clientOffset:r||null}}}}function FDe(n){kn(Array.isArray(n),"Expected targetIds to be an array.")}function UDe(n,e,t){kn(e.isDragging(),"Cannot call hover while not dragging."),kn(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<n.length;r++){const i=n[r];kn(n.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const a=t.getTarget(i);kn(a,"Expected targetIds to be registered.")}}function zDe(n,e,t){for(let r=n.length-1;r>=0;r--){const i=n[r],a=e.getTargetType(i);FU(a,t)||n.splice(r,1)}}function VDe(n,e,t){n.forEach(function(r){t.getTarget(r).hover(e,r)})}function HDe(n){return function(){if(n.getMonitor().isDragging())return{type:NG}}}function GDe(n){return{beginDrag:wDe(n),publishDragSource:HDe(n),hover:BDe(n),drop:IDe(n),endDrag:kDe(n)}}class jDe{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function r(a){return(...s)=>{const o=a.apply(e,s);typeof o<"u"&&t(o)}}const i=GDe(this);return Object.keys(i).reduce((a,s)=>{const o=i[s];return a[s]=r(o),a},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function WDe(n,e){return{x:n.x+e.x,y:n.y+e.y}}function Rue(n,e){return{x:n.x-e.x,y:n.y-e.y}}function XDe(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:r}=n;return!e||!t||!r?null:Rue(WDe(e,r),t)}function $De(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:Rue(e,t)}const NE=[],kG=[];NE.__IS_NONE__=!0;kG.__IS_ALL__=!0;function YDe(n,e){return n===NE?!1:n===kG||typeof e>"u"?!0:bDe(e,n).length>0}class qDe{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;kn(typeof e=="function","listener must be a function."),kn(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const a=()=>{const s=this.store.getState(),o=s.stateId;try{o===i||o===i+1&&!YDe(s.dirtyHandlerIds,r)||e()}finally{i=o}};return this.store.subscribe(a)}subscribeToOffsetChange(e){kn(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return kn(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(kn(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return FU(r,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(kn(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),a=this.getItemType();if(a&&!FU(i,a))return!1;const s=this.getTargetIds();if(!s.length)return!1;const o=s.indexOf(e);return r?o===s.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return XDe(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return $De(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const gK=typeof global<"u"?global:self,Nue=gK.MutationObserver||gK.WebKitMutationObserver;function kue(n){return function(){const t=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(t),clearInterval(r),n()}}}function KDe(n){let e=1;const t=new Nue(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const ZDe=typeof Nue=="function"?KDe:kue;class QDe{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=ZDe(this.flush),this.requestErrorThrow=kue(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class JDe{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class eIe{create(e){const t=this.freeTasks,r=t.length?t.pop():new JDe(this.onError,i=>t[t.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const Oue=new QDe,tIe=new eIe(Oue.registerPendingError);function nIe(n){Oue.enqueueTask(tIe.create(n))}const OG="dnd-core/ADD_SOURCE",BG="dnd-core/ADD_TARGET",FG="dnd-core/REMOVE_SOURCE",Xk="dnd-core/REMOVE_TARGET";function rIe(n){return{type:OG,payload:{sourceId:n}}}function iIe(n){return{type:BG,payload:{targetId:n}}}function aIe(n){return{type:FG,payload:{sourceId:n}}}function sIe(n){return{type:Xk,payload:{targetId:n}}}function oIe(n){kn(typeof n.canDrag=="function","Expected canDrag to be a function."),kn(typeof n.beginDrag=="function","Expected beginDrag to be a function."),kn(typeof n.endDrag=="function","Expected endDrag to be a function.")}function lIe(n){kn(typeof n.canDrop=="function","Expected canDrop to be a function."),kn(typeof n.hover=="function","Expected hover to be a function."),kn(typeof n.drop=="function","Expected beginDrag to be a function.")}function UU(n,e){if(e&&Array.isArray(n)){n.forEach(t=>UU(t,!1));return}kn(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var yu;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(yu||(yu={}));let uIe=0;function cIe(){return uIe++}function hIe(n){const e=cIe().toString();switch(n){case yu.SOURCE:return`S${e}`;case yu.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function vK(n){switch(n[0]){case"S":return yu.SOURCE;case"T":return yu.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function yK(n,e){const t=n.entries();let r=!1;do{const{done:i,value:[,a]}=t.next();if(a===e)return!0;r=!!i}while(!r);return!1}class dIe{addSource(e,t){UU(e),oIe(t);const r=this.addHandler(yu.SOURCE,e,t);return this.store.dispatch(rIe(r)),r}addTarget(e,t){UU(e,!0),lIe(t);const r=this.addHandler(yu.TARGET,e,t);return this.store.dispatch(iIe(r)),r}containsHandler(e){return yK(this.dragSources,e)||yK(this.dropTargets,e)}getSource(e,t=!1){return kn(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return kn(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return kn(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return kn(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return vK(e)===yu.SOURCE}isTargetId(e){return vK(e)===yu.TARGET}removeSource(e){kn(this.getSource(e),"Expected an existing source."),this.store.dispatch(aIe(e)),nIe(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){kn(this.getTarget(e),"Expected an existing target."),this.store.dispatch(sIe(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);kn(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){kn(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const i=hIe(e);return this.types.set(i,t),e===yu.SOURCE?this.dragSources.set(i,r):e===yu.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const fIe=(n,e)=>n===e;function pIe(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function mIe(n,e,t=fIe){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!t(n[r],e[r]))return!1;return!0}function gIe(n=NE,e){switch(e.type){case Gk:break;case OG:case BG:case Xk:case FG:return NE;case Hk:case NG:case Wk:case jk:default:return kG}const{targetIds:t=[],prevTargetIds:r=[]}=e.payload,i=_De(t,r);if(!(i.length>0||!mIe(t,r)))return NE;const s=r[r.length-1],o=t[t.length-1];return s!==o&&(s&&i.push(s),o&&i.push(o)),i}function vIe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function yIe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){vIe(n,i,t[i])})}return n}const xK={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function xIe(n=xK,e){const{payload:t}=e;switch(e.type){case RG:case Hk:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case Gk:return pIe(n.clientOffset,t.clientOffset)?n:yIe({},n,{clientOffset:t.clientOffset});case Wk:case jk:return xK;default:return n}}function _Ie(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hx(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){_Ie(n,i,t[i])})}return n}const bIe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function SIe(n=bIe,e){const{payload:t}=e;switch(e.type){case Hk:return Hx({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case NG:return Hx({},n,{isSourcePublic:!0});case Gk:return Hx({},n,{targetIds:t.targetIds});case Xk:return n.targetIds.indexOf(t.targetId)===-1?n:Hx({},n,{targetIds:xDe(n.targetIds,t.targetId)});case jk:return Hx({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case Wk:return Hx({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function wIe(n=0,e){switch(e.type){case OG:case BG:return n+1;case FG:case Xk:return n-1;default:return n}}function TIe(n=0){return n+1}function EIe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AIe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){EIe(n,i,t[i])})}return n}function CIe(n={},e){return{dirtyHandlerIds:gIe(n.dirtyHandlerIds,{type:e.type,payload:AIe({},e.payload,{prevTargetIds:yDe(n,"dragOperation.targetIds",[])})}),dragOffset:xIe(n.dragOffset,e),refCount:wIe(n.refCount,e),dragOperation:SIe(n.dragOperation,e),stateId:TIe(n.stateId)}}function MIe(n,e=void 0,t={},r=!1){const i=DIe(r),a=new qDe(i,new dIe(i)),s=new jDe(i,a),o=n(s,e,t);return s.receiveBackend(o),s}function DIe(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Pue(CIe,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function IIe(n,e){if(n==null)return{};var t=PIe(n,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function PIe(n,e){if(n==null)return{};var t={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}let _K=0;const gL=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var LIe=ee.memo(function(e){var{children:t}=e,r=IIe(e,["children"]);const[i,a]=RIe(r);return ee.useEffect(()=>{if(a){const s=Bue();return++_K,()=>{--_K===0&&(s[gL]=null)}}},[]),C.jsx(Iue.Provider,{value:i,children:t})});function RIe(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=NIe(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function NIe(n,e=Bue(),t,r){const i=e;return i[gL]||(i[gL]={dragDropManager:MIe(n,e,t,r)}),i[gL]}function Bue(){return typeof global<"u"?global:window}var vF,bK;function kIe(){return bK||(bK=1,vF=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,i,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(i=r;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){var s=a[i];if(!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}),vF}var OIe=kIe();const BIe=i2(OIe),Fy=typeof window<"u"?ee.useLayoutEffect:ee.useEffect;function FIe(n,e,t){const[r,i]=ee.useState(()=>e(n)),a=ee.useCallback(()=>{const s=e(n);BIe(r,s)||(i(s),t&&t())},[r,n,t]);return Fy(a),[r,a]}function UIe(n,e,t){const[r,i]=FIe(n,e,t);return Fy(function(){const s=n.getHandlerId();if(s!=null)return n.subscribeToStateChange(i,{handlerIds:[s]})},[n,i]),r}function Fue(n,e,t){return UIe(e,n||(()=>({})),()=>t.reconnect())}function Uue(n,e){const t=[];return typeof n!="function"&&t.push(n),ee.useMemo(()=>typeof n=="function"?n():n,t)}function zIe(n){return ee.useMemo(()=>n.hooks.dragSource(),[n])}function VIe(n){return ee.useMemo(()=>n.hooks.dragPreview(),[n])}let yF=!1,xF=!1;class HIe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){kn(!yF,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return yF=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{yF=!1}}isDragging(){if(!this.sourceId)return!1;kn(!xF,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return xF=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{xF=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let _F=!1;class GIe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;kn(!_F,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return _F=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{_F=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function jIe(n,e,t){const r=t.getRegistry(),i=r.addTarget(n,e);return[i,()=>r.removeTarget(i)]}function WIe(n,e,t){const r=t.getRegistry(),i=r.addSource(n,e);return[i,()=>r.removeSource(i)]}function zU(n,e,t,r){let i;if(i!==void 0)return!!i;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const a=Object.keys(n),s=Object.keys(e);if(a.length!==s.length)return!1;const o=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<a.length;l++){const u=a[l];if(!o(u))return!1;const c=n[u],h=e[u];if(i=void 0,i===!1||i===void 0&&c!==h)return!1}return!0}function VU(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function XIe(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function $Ie(n){return(e=null,t=null)=>{if(!ee.isValidElement(e)){const a=e;return n(a,t),a}const r=e;return XIe(r),YIe(r,t?a=>n(a,t):n)}}function zue(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const i=$Ie(r);e[t]=()=>i}}),e}function SK(n,e){typeof n=="function"?n(e):n.current=e}function YIe(n,e){const t=n.ref;return kn(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?ee.cloneElement(n,{ref:r=>{SK(t,r),SK(e,r)}}):ee.cloneElement(n,{ref:e})}class qIe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!zU(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!zU(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=zue({dragSource:(t,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,VU(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,VU(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class KIe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!zU(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=zue({dropTarget:(t,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,VU(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function kS(){const{dragDropManager:n}=ee.useContext(Iue);return kn(n!=null,"Expected drag drop context"),n}function ZIe(n,e){const t=kS(),r=ee.useMemo(()=>new qIe(t.getBackend()),[t]);return Fy(()=>(r.dragSourceOptions=n||null,r.reconnect(),()=>r.disconnectDragSource()),[r,n]),Fy(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function QIe(){const n=kS();return ee.useMemo(()=>new HIe(n),[n])}class JIe{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(t):r={},r??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const r=this.spec,i=this.monitor,{isDragging:a}=r;return a?a(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:i}=e;i&&i(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function ePe(n,e,t){const r=ee.useMemo(()=>new JIe(n,e,t),[e,t]);return ee.useEffect(()=>{r.spec=n},[n]),r}function tPe(n){return ee.useMemo(()=>{const e=n.type;return kn(e!=null,"spec.type must be defined"),e},[n])}function nPe(n,e,t){const r=kS(),i=ePe(n,e,t),a=tPe(n);Fy(function(){if(a!=null){const[o,l]=WIe(a,i,r);return e.receiveHandlerId(o),t.receiveHandlerId(o),l}},[r,e,t,i,a])}function rPe(n,e){const t=Uue(n);kn(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=QIe(),i=ZIe(t.options,t.previewOptions);return nPe(t,r,i),[Fue(t.collect,r,i),zIe(i),VIe(i)]}function iPe(n){return ee.useMemo(()=>n.hooks.dropTarget(),[n])}function aPe(n){const e=kS(),t=ee.useMemo(()=>new KIe(e.getBackend()),[e]);return Fy(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function sPe(){const n=kS();return ee.useMemo(()=>new GIe(n),[n])}function oPe(n){const{accept:e}=n;return ee.useMemo(()=>(kn(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class lPe{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function uPe(n,e){const t=ee.useMemo(()=>new lPe(n,e),[e]);return ee.useEffect(()=>{t.spec=n},[n]),t}function cPe(n,e,t){const r=kS(),i=uPe(n,e),a=oPe(n);Fy(function(){const[o,l]=jIe(a,i,r);return e.receiveHandlerId(o),t.receiveHandlerId(o),l},[r,e,i,t,a.map(s=>s.toString()).join("|")])}function hPe(n,e){const t=Uue(n),r=sPe(),i=aPe(t.options);return cPe(t,r,i),[Fue(t.collect,r,i),iPe(i)]}function Vue(n){let e=null;return()=>(e==null&&(e=n()),e)}function dPe(n,e){return n.filter(t=>t!==e)}function fPe(n,e){const t=new Set,r=a=>t.add(a);n.forEach(r),e.forEach(r);const i=[];return t.forEach(a=>i.push(a)),i}class pPe{enter(e){const t=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=fPe(this.entered.filter(r),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=dPe(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class mPe{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(t[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Hue="__NATIVE_FILE__",Gue="__NATIVE_URL__",jue="__NATIVE_TEXT__",Wue="__NATIVE_HTML__",wK=Object.freeze(Object.defineProperty({__proto__:null,FILE:Hue,HTML:Wue,TEXT:jue,URL:Gue},Symbol.toStringTag,{value:"Module"}));function bF(n,e,t){const r=e.reduce((i,a)=>i||n.getData(a),"");return r??t}const HU={[Hue]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[Wue]:{exposeProperties:{html:(n,e)=>bF(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[Gue]:{exposeProperties:{urls:(n,e)=>bF(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[jue]:{exposeProperties:{text:(n,e)=>bF(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function gPe(n,e){const t=HU[n];if(!t)throw new Error(`native type ${n} has no configuration`);const r=new mPe(t);return r.loadDataTransfer(e),r}function SF(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(HU).filter(t=>{const r=HU[t];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const vPe=Vue(()=>/firefox/i.test(navigator.userAgent)),Xue=Vue(()=>!!window.safari);class TK{interpolate(e){const{xs:t,ys:r,c1s:i,c2s:a,c3s:s}=this;let o=t.length-1;if(e===t[o])return r[o];let l=0,u=s.length-1,c;for(;l<=u;){c=Math.floor(.5*(l+u));const f=t[c];if(f<e)l=c+1;else if(f>e)u=c-1;else return r[c]}o=Math.max(0,u);const h=e-t[o],d=h*h;return r[o]+i[o]*h+a[o]*d+s[o]*h*d}constructor(e,t){const{length:r}=e,i=[];for(let f=0;f<r;f++)i.push(f);i.sort((f,p)=>e[f]<e[p]?-1:1);const a=[],s=[];let o,l;for(let f=0;f<r-1;f++)o=e[f+1]-e[f],l=t[f+1]-t[f],a.push(o),s.push(l/o);const u=[s[0]];for(let f=0;f<a.length-1;f++){const p=s[f],m=s[f+1];if(p*m<=0)u.push(0);else{o=a[f];const g=a[f+1],v=o+g;u.push(3*v/((v+g)/p+(v+o)/m))}}u.push(s[s.length-1]);const c=[],h=[];let d;for(let f=0;f<u.length-1;f++){d=s[f];const p=u[f],m=1/a[f],g=p+u[f+1]-d-d;c.push((d-p-g)*m),h.push(g*m*m)}this.xs=e,this.ys=t,this.c1s=u,this.c2s=c,this.c3s=h}}const yPe=1;function $ue(n){const e=n.nodeType===yPe?n:n.parentElement;if(!e)return null;const{top:t,left:r}=e.getBoundingClientRect();return{x:r,y:t}}function aI(n){return{x:n.clientX,y:n.clientY}}function xPe(n){var e;return n.nodeName==="IMG"&&(vPe()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function _Pe(n,e,t,r){let i=n?e.width:t,a=n?e.height:r;return Xue()&&n&&(a/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:a}}function bPe(n,e,t,r,i){const a=xPe(e),o=$ue(a?n:e),l={x:t.x-o.x,y:t.y-o.y},{offsetWidth:u,offsetHeight:c}=n,{anchorX:h,anchorY:d}=r,{dragPreviewWidth:f,dragPreviewHeight:p}=_Pe(a,e,u,c),m=()=>{let T=new TK([0,.5,1],[l.y,l.y/c*p,l.y+p-c]).interpolate(d);return Xue()&&a&&(T+=(window.devicePixelRatio-1)*p),T},g=()=>new TK([0,.5,1],[l.x,l.x/u*f,l.x+f-u]).interpolate(h),{offsetX:v,offsetY:b}=i,S=v===0||v,w=b===0||b;return{x:S?v:g(),y:w?b:m()}}class SPe{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function wPe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function EK(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.forEach(function(i){wPe(n,i,t[i])})}return n}class TPe{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const i=s=>this.handleDragStart(s,e),a=s=>this.handleSelectStart(s);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",a),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",a),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=s=>this.handleDragEnter(s,e),i=s=>this.handleDragOver(s,e),a=s=>this.handleDrop(s,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",a),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",a)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return EK({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return EK({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(wK).some(t=>wK[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=gPe(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const a=this.sourceNodes.get(i);return a&&$ue(a)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:a}=this;this.dragStartSourceIds=null;const s=aI(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:o}=i,l=SF(o);if(this.monitor.isDragging()){if(o&&typeof o.setDragImage=="function"){const c=this.monitor.getSourceId(),h=this.sourceNodes.get(c),d=this.sourcePreviewNodes.get(c)||h;if(d){const{anchorX:f,anchorY:p,offsetX:m,offsetY:g}=this.getCurrentSourcePreviewNodeOptions(),S=bPe(h,d,s,{anchorX:f,anchorY:p},{offsetX:m,offsetY:g});o.setDragImage(d,S.x,S.y)}}try{o==null||o.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(o&&!o.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:o}=i,l=SF(o);l&&this.beginDragNativeItem(l,o)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:a}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,a.length>0&&this.actions.hover(a,{clientOffset:aI(i)}),a.some(o=>this.monitor.canDropOnTarget(o))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var a;(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:a}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=aI(i),this.scheduleHover(a),(a||[]).some(o=>this.monitor.canDropOnTarget(o))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var a;i.preventDefault(),(a=this.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else SF(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:a}=this;this.dropTargetIds=[],this.actions.hover(a,{clientOffset:aI(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))},this.options=new SPe(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new pPe(this.isNodeInDocument)}}const EPe=function(e,t,r){return new TPe(e,t,r)},UR=[{primary:"bg-blue-500",secondary:"bg-blue-50",border:"border-blue-300",text:"text-blue-700"},{primary:"bg-green-500",secondary:"bg-green-50",border:"border-green-300",text:"text-green-700"},{primary:"bg-purple-500",secondary:"bg-purple-50",border:"border-purple-300",text:"text-purple-700"},{primary:"bg-orange-500",secondary:"bg-orange-50",border:"border-orange-300",text:"text-orange-700"},{primary:"bg-pink-500",secondary:"bg-pink-50",border:"border-pink-300",text:"text-pink-700"}],APe=({step:n,index:e,onMove:t,isHovering:r,isDragging:i,onDragEnd:a})=>{const s=UR[n.colorIndex%UR.length],[{opacity:o},l]=rPe({type:"STEP",item:{id:n.id,index:e},collect:h=>({opacity:h.isDragging()?.7:1}),end:()=>{a()}}),[{isOver:u},c]=hPe({accept:"STEP",hover:h=>{h.index!==e&&t(h.index,e)},collect:h=>({isOver:h.isOver()})});return C.jsx("div",{ref:h=>l(c(h)),className:`p-3 bg-white rounded-lg border ${s.border} cursor-move transition-all duration-300 hover:shadow-md ${r||u?"shadow-lg scale-102":""}`,style:{opacity:o},children:C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("div",{className:`w-2 h-10 ${s.primary} rounded-full`}),C.jsx("span",{className:`w-8 h-8 rounded-full ${s.secondary} ${s.text} flex items-center justify-center font-medium text-sm`,children:e+1}),C.jsx("span",{className:"text-gray-700 flex-1 font-medium",children:n.text}),C.jsx("i",{className:`fa-solid fa-grip-vertical ${s.text} opacity-70`})]})})},CPe=ee.memo(APe),AK=({index:n,isActive:e})=>C.jsx("div",{className:`h-1 my-1 transition-all duration-300 ${e?"bg-blue-500 rounded-full":"bg-transparent"}`,children:e&&C.jsx("div",{className:"flex justify-center -mt-2",children:C.jsx("div",{className:"w-3 h-3 border-2 border-blue-500 bg-white rotate-45"})})});function MPe(){const n=["","","","",""],[e,t]=ee.useState(n.map((S,w)=>({id:`step-${w}`,text:S,order:w,colorIndex:w})).sort(()=>Math.random()-.5)),[r,i]=ee.useState(!1),[a,s]=ee.useState(!1),[o,l]=ee.useState(null),[u,c]=ee.useState(null),[h,d]=ee.useState(!1),[f,p]=ee.useState(null),m=(S,w)=>{S!==w&&(p(S),S<w?c(w+1):c(w),l(w))},g=()=>{if(f!==null&&u!==null&&u!==f){const S=[...e],[w]=S.splice(f,1),E=u>f?u-1:u;S.splice(E,0,w),t(S)}l(null),c(null),p(null)},v=()=>{const w=e.map(E=>E.text).every((E,T)=>E===n[T]);s(w),i(!0),d(!0)},b=()=>{t(n.map((S,w)=>({id:`step-${w}`,text:S,order:w,colorIndex:w})).sort(()=>Math.random()-.5)),i(!1),s(!1),l(null),c(null),d(!1),p(null)};return C.jsx(LIe,{backend:EPe,children:C.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg shadow-xl p-6 border border-blue-100",children:[C.jsxs("div",{className:"flex items-center justify-between mb-6",children:[C.jsxs("h3",{className:"text-xl font-semibold text-blue-700 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-wrench mr-3 text-2xl text-blue-600"}),""]}),C.jsxs("div",{className:"flex gap-2",children:[C.jsxs("button",{onClick:b,className:"px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors flex items-center gap-2 border border-blue-200",children:[C.jsx("i",{className:"fa-solid fa-rotate-right text-blue-600"}),""]}),C.jsxs("button",{onClick:v,disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[C.jsx("i",{className:"fa-solid fa-check"}),""]})]})]}),C.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[C.jsxs("div",{className:"lg:w-1/2",children:[C.jsxs("h4",{className:"font-medium mb-4 text-blue-700 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-hand-pointer mr-2 text-blue-600"}),""]}),C.jsx("p",{className:"text-gray-600 text-sm mb-4",children:""}),C.jsxs("div",{className:"space-y-0",children:[e.map((S,w)=>C.jsxs(C.Fragment,{children:[u===w&&C.jsx(AK,{index:w,isActive:!0}),C.jsx(CPe,{step:S,index:w,onMove:m,isHovering:o===w,isDragging:f===w,onDragEnd:g},S.id)]})),u===e.length&&C.jsx(AK,{index:e.length,isActive:!0})]})]}),C.jsxs("div",{className:"lg:w-1/2",children:[C.jsxs("h4",{className:"font-medium mb-4 text-blue-700 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-circle-info mr-2 text-blue-600"}),""]}),h?C.jsxs("div",{className:`p-4 rounded-lg border ${a?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[C.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[C.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${a?"bg-green-100":"bg-red-100"}`,children:C.jsx("i",{className:`fa-solid ${a?"fa-check":"fa-xmark"} text-2xl ${a?"text-green-600":"text-red-600"}`})}),C.jsxs("div",{children:[C.jsx("p",{className:`text-lg font-semibold ${a?"text-green-700":"text-red-700"}`,children:a?"":""}),C.jsx("p",{className:"text-gray-600 text-sm",children:a?"":""})]})]}),!a&&C.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[C.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-3",children:""}),C.jsx("div",{className:"space-y-2",children:n.map((S,w)=>{const T=UR[w%UR.length];return C.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[C.jsx("div",{className:`w-2 h-8 ${T.primary} rounded-full mt-1`}),C.jsx("span",{className:`w-6 h-6 rounded-full ${T.secondary} ${T.text} flex items-center justify-center font-medium text-xs flex-shrink-0`,children:w+1}),C.jsx("span",{className:"text-gray-700",children:S})]},w)})})]})]}):C.jsxs("div",{className:"p-4 bg-white rounded-lg border border-blue-200 shadow-sm",children:[C.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:C.jsx("i",{className:"fa-solid fa-lightbulb text-blue-600 text-xl"})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-blue-700 font-medium",children:""}),C.jsx("p",{className:"text-gray-600 text-sm",children:""})]})]}),C.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-100",children:[C.jsx("h5",{className:"text-sm font-medium text-blue-700 mb-3",children:""}),C.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[C.jsxs("li",{className:"flex items-start gap-2",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-blue-600 mt-1"}),C.jsx("span",{children:""})]}),C.jsxs("li",{className:"flex items-start gap-2",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-blue-600 mt-1"}),C.jsx("span",{children:""})]}),C.jsxs("li",{className:"flex items-start gap-2",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-blue-600 mt-1"}),C.jsx("span",{children:""})]}),C.jsxs("li",{className:"flex items-start gap-2",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-blue-600 mt-1"}),C.jsx("span",{children:'""'})]})]})]})]})]})]})]})})}const wF=["https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=%E4%B8%AD%E5%8F%B7%E6%A3%98%E8%BD%AE%E6%89%B3%E6%89%8B%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=f0f7bb9462752e3f94b30cab3ea09de8","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=%E4%B8%AD%E5%8F%B7%E7%9F%AD%E6%8E%A5%E6%9D%86%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=bba5dbd3f5d6debd821c35aeb459c697","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=13%E5%8F%B7%E5%85%AD%E8%A7%92%E5%A5%97%E7%AD%92%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=2d4f1a96cac44404b09fe5263d306b1c","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=HW4%E9%95%BF%E5%A5%97%E7%AD%92%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=07e75173a380d56134aba791ca5a0505","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=HW6%E9%95%BF%E5%A5%97%E7%AD%92%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=915d518cfb8952765a07bd9bd3fd0a65","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=PDR%E5%A5%97%E7%AD%92%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=d84fd0aefb08764932e8e2157702e986","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=%E6%A9%A1%E8%83%B6%E9%94%A4%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=94e0b4670aa4abfc01a14b3a3e6d5324","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=%E5%90%B8%E5%8A%9B%E6%B3%B5%EF%BC%8C%E4%B8%93%E4%B8%9A%E7%BB%B4%E4%BF%AE%E5%B7%A5%E5%85%B7&sign=1ce2eb5d43b0397a5865faddea4813d6"],TF=["https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=%E5%BC%B9%E6%80%A7%E5%9E%AB%E5%9C%88%EF%BC%8C%E6%9C%BA%E6%A2%B0%E9%9B%B6%E4%BB%B6&sign=408185e2a3778af68a2c0b02a82ed839","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=%E5%9E%AB%E7%89%87%EF%BC%8C%E6%9C%BA%E6%A2%B0%E9%9B%B6%E4%BB%B6&sign=277cfbc097698768bd709921eac9c1ab","https://space.coze.cn/api/coze_space/gen_image?image_size=square&prompt=%E5%BC%B9%E6%80%A7%E6%8C%A1%E5%9C%88%EF%BC%8C%E6%9C%BA%E6%A2%B0%E9%9B%B6%E4%BB%B6&sign=7f75b35996ec27b8c5a097e27f570bff"],Fi=["https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%8B%86%E5%8D%B8%E4%B8%89%E7%9B%B8%E7%BA%BF%E6%9D%9F%E8%BF%9E%E6%8E%A5%E5%99%A8%E5%9B%BA%E5%AE%9A%E8%9E%BA%E6%AF%8D%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=d149e41b311eac5bcc526a8d2e90aa6d","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E5%8F%96%E4%B8%8B%E4%B8%89%E7%9B%B8%E7%BA%BF%E6%9D%9F%E6%8E%A5%E5%A4%B4%E5%8F%8A%E7%9B%B8%E5%85%B3%E9%83%A8%E4%BB%B6%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=d2eb6fa4e38a1a6f805b825daaa557b2","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%9D%BE%E5%BC%80%E5%B9%B6%E5%8F%96%E5%87%BA%E4%B8%89%E7%9B%B8%E4%BA%A4%E6%B5%81%E7%BA%BF%E6%9D%9F%E8%BF%9E%E6%8E%A5%E5%99%A8%E5%9B%BA%E5%AE%9A%E8%9E%BA%E6%A0%93%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=4ca1962d8d258b8f18baff8f03be4dc4","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E5%8F%96%E4%B8%8B%E4%B8%89%E7%9B%B8%E4%BA%A4%E6%B5%81%E7%BA%BF%E6%9D%9F%E8%BF%9E%E6%8E%A5%E5%99%A8%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=892ce1b76b56926571dfa2c3a535f91a","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%8B%86%E5%8D%B8%E7%94%B5%E6%9C%BA%E9%80%9F%E5%BA%A6%E7%BC%96%E7%A0%81%E5%99%A8%E7%9B%96%E6%9D%BF%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=6d06b181f61ee634a2886d8161fe4b91","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%8B%86%E5%8D%B8%E7%94%B5%E6%9C%BA%E9%80%9F%E5%BA%A6%E7%BC%96%E7%A0%81%E5%99%A8%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=3590da36b58c5cce52d2e771873bab59","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%8B%86%E5%8D%B8%E8%BD%B4%E6%89%BF%E5%BA%95%E5%BA%A7%E5%9B%BA%E5%AE%9A%E8%9E%BA%E6%A0%93%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=21417ef0d8857f1599f217a3c0c29c35","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%9D%BE%E5%BC%80%E5%90%8E%E7%AB%AF%E7%9B%96%E5%9B%BA%E5%AE%9A%E8%9E%BA%E6%A0%93%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=35bd4cbb7fcfdf751e542a3300fb1777","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E5%8F%96%E5%87%BA%E5%90%8E%E7%AB%AF%E7%9B%96%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=a3358906cfee4b68086db8e1742a399d","https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%8B%86%E5%8D%B8%E8%BD%AC%E5%AD%90%E5%89%8D%E7%AB%AF%E5%BC%B9%E6%80%A7%E6%8C%A1%E5%9C%88%E7%9A%84%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&sign=9edc5318f96c1b1a9dd5ab7565b91867"];function DPe({onSelectText:n}){const[e,t]=ee.useState({intro:!0,skills:!0,scenario:!0,preparation:!0,steps:!0,conclusion:!0,quiz:!0}),[r,i]=ee.useState(null),[a,s]=ee.useState(""),[o,l]=ee.useState({x:0,y:0}),[u,c]=ee.useState(!1),[h,d]=ee.useState(null),f=ee.useRef(null),p=v=>{t(b=>({...b,[v]:!b[v]}))},m=()=>{i(null)};ee.useEffect(()=>{const v=()=>{const b=window.getSelection();if(!b||b.isCollapsed){c(!1);return}const S=b.toString().trim();if(S.length<5){c(!1);return}s(S);const w=b.getRangeAt(0);if(f.current){const E=f.current.getBoundingClientRect(),T=w.getBoundingClientRect(),M=document.createRange(),P=w.endOffset-1;P>=0?(M.setStart(w.endContainer,P),M.setEnd(w.endContainer,w.endOffset)):(M.setStart(w.endContainer,0),M.setEnd(w.endContainer,1));const I=M.getBoundingClientRect(),D=80,R=32;let B=I.left-E.left+I.width/2-D/2,k=I.bottom-E.top+f.current.scrollTop+15;const V=E.width,G=E.height;B<10?B=10:B+D>V-10&&(B=V-D-10),k+R>G-10+f.current.scrollTop&&(k=T.top-E.top+f.current.scrollTop-R-15,k<10+f.current.scrollTop&&(k=10+f.current.scrollTop)),l({x:B,y:k}),c(!0)}};return window.addEventListener("mouseup",v),window.addEventListener("touchend",v),()=>{window.removeEventListener("mouseup",v),window.removeEventListener("touchend",v)}},[]);const g=()=>{a&&n&&n(a),c(!1)};return C.jsxs("div",{ref:f,className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 h-full overflow-y-auto relative",children:[C.jsx("h1",{className:"text-lg font-semibold mb-6 text-[var(--text-primary)] border-b border-[var(--light-pink)] pb-3",children:""}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>p("intro"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.intro?"transform rotate-180":""}`})]}),e.intro&&C.jsx(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:C.jsx("p",{className:"text-[var(--text-primary)] leading-relaxed",children:""})})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>p("skills"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.skills?"transform rotate-180":""}`})]}),e.skills&&C.jsx(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-[var(--light-pink)] p-4",children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center text-lg",children:[C.jsx("span",{className:"bg-[var(--brand-pink)] text-white rounded-full w-6 h-6 flex items-center justify-center mr-2 text-sm",children:"1"}),""]}),C.jsxs("div",{className:"space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-secondary)] space-y-1",children:[C.jsx("li",{children:" / "}),C.jsx("li",{children:""}),C.jsx("li",{children:""})]})]})]})]}),C.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-[var(--light-pink)] p-4",children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center text-lg",children:[C.jsx("span",{className:"bg-[var(--brand-pink)] text-white rounded-full w-6 h-6 flex items-center justify-center mr-2 text-sm",children:"2"}),""]}),C.jsxs("div",{className:"space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-secondary)] space-y-1",children:[C.jsx("li",{children:" / "}),C.jsx("li",{children:""}),C.jsx("li",{children:"1+X "})]})]})]})]}),C.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-[var(--light-pink)] p-4",children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center text-lg",children:[C.jsx("span",{className:"bg-[var(--brand-pink)] text-white rounded-full w-6 h-6 flex items-center justify-center mr-2 text-sm",children:"3"}),""]}),C.jsxs("div",{className:"space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-secondary)] space-y-1",children:[C.jsx("li",{children:" / "}),C.jsx("li",{children:""}),C.jsx("li",{children:""})]})]})]})]}),C.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-[var(--light-pink)] p-4",children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center text-lg",children:[C.jsx("span",{className:"bg-[var(--brand-pink)] text-white rounded-full w-6 h-6 flex items-center justify-center mr-2 text-sm",children:"4"}),""]}),C.jsxs("div",{className:"space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/50 rounded-lg p-2",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-secondary)] space-y-1",children:[C.jsx("li",{children:" / "}),C.jsx("li",{children:""}),C.jsx("li",{children:""})]})]})]})]})]})})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>p("scenario"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.scenario?"transform rotate-180":""}`})]}),e.scenario&&C.jsx(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:C.jsx("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4",children:C.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[C.jsxs("div",{className:"flex-1",children:[C.jsx("p",{className:"text-[var(--text-primary)] leading-relaxed mb-4",children:""}),C.jsx("p",{className:"text-[var(--brand-pink)] font-medium italic border-l-4 border-[var(--brand-pink)] pl-3 py-2 bg-[var(--bg-primary)]/30 rounded-r-lg",children:"..."})]}),C.jsx("div",{className:"flex-1 relative rounded-lg overflow-hidden",children:C.jsx("video",{src:"https://e.necibook.com/api/media/api/v1/media/showImage/2021466316601610240",alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity",controls:!0,muted:!0,preload:"metadata"})})]})})})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>p("preparation"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.preparation?"transform rotate-180":""}`})]}),e.preparation&&C.jsxs(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"space-y-4 pl-1",children:[C.jsxs("div",{children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-toolbox text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("div",{className:"grid grid-cols-4 gap-3",children:["","","13","HW4","HW6","PDR","",""].map((v,b)=>C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-2 text-center cursor-pointer hover:shadow-md transition-shadow",children:[C.jsxs("div",{className:"mb-2 relative rounded overflow-hidden h-24",children:[C.jsx("img",{src:wF[b],alt:v,className:"w-full h-full object-cover hover:opacity-90 transition-opacity",loading:"lazy"}),C.jsxs("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center space-x-4",children:[C.jsx("button",{onClick:S=>{S.stopPropagation(),i(wF[b])},className:"text-white text-xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-search-plus"})}),C.jsx("button",{onClick:S=>{S.stopPropagation(),n&&n(`[]${wF[b]}`)},className:"text-white text-xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-robot"})})]})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:v})]},b))})]}),C.jsxs("div",{children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-box-open text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("div",{className:"grid grid-cols-4 gap-3",children:["","",""].map((v,b)=>C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-2 text-center cursor-pointer hover:shadow-md transition-shadow",children:[C.jsxs("div",{className:"mb-2 relative rounded overflow-hidden h-24",children:[C.jsx("img",{src:TF[b],alt:v,className:"w-full h-full object-cover hover:opacity-90 transition-opacity",loading:"lazy"}),C.jsxs("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center space-x-4",children:[C.jsx("button",{onClick:S=>{S.stopPropagation(),i(TF[b])},className:"text-white text-xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-search-plus"})}),C.jsx("button",{onClick:S=>{S.stopPropagation(),n&&n(`[]${TF[b]}`)},className:"text-white text-xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-robot"})})]})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:v})]},b))}),C.jsx("p",{className:"mt-2 text-sm text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4",children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-screwdriver-wrench text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4",children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-shield-alt text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4",children:[C.jsxs("h4",{className:"font-medium mb-3 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-clock text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"90"})]})]})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>p("steps"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.steps?"transform rotate-180":""}`})]}),e.steps&&C.jsxs(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:[C.jsx("div",{className:"mb-6",children:C.jsx("img",{src:"https://e.necibook.com/api/media/api/v1/media/showImage/2021490180977266688",alt:"",className:"w-full h-auto rounded-lg object-cover"})}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h3",{className:"text-xl font-medium mb-4 text-[var(--text-primary)] bg-[var(--bg-primary)] px-4 py-2 rounded-lg",children:""}),C.jsxs("div",{className:"space-y-6 ml-4",children:[C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4",children:[C.jsx("h4",{className:"font-medium mb-3 text-[var(--text-primary)]",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer",children:[C.jsx("img",{src:"https://e.necibook.com/api/media/api/v1/media/showImage/2021476739061174272",alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity",loading:"lazy"}),C.jsxs("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center space-x-8",children:[C.jsx("button",{onClick:v=>{v.stopPropagation(),i("https://e.necibook.com/api/media/api/v1/media/showImage/2021476739061174272")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-search-plus"})}),C.jsx("button",{onClick:v=>{v.stopPropagation(),d("https://e.necibook.com/api/media/api/v1/media/showImage/2021476739061174272"),n&&n("[]https://e.necibook.com/api/media/api/v1/media/showImage/2021476739061174272")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-robot"})})]})]})}),C.jsxs("div",{className:"md:w-1/2 space-y-2 text-sm",children:[C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:"13"})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]})]})]})]}),C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4",children:[C.jsx("h4",{className:"font-medium mb-3 text-[var(--text-primary)]",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[C.jsxs("div",{className:"md:w-1/2 space-y-2 text-sm",children:[C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]})]}),C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer",onClick:()=>i(Fi[1]),children:[C.jsx("img",{src:Fi[1],alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("i",{className:"fa-solid fa-search-plus text-white text-2xl"})})]})})]})]}),C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4",children:[C.jsx("h4",{className:"font-medium mb-3 text-[var(--text-primary)]",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start",children:[C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer",onClick:()=>i(Fi[2]),children:[C.jsx("img",{src:Fi[2],alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("i",{className:"fa-solid fa-search-plus text-white text-2xl"})})]})}),C.jsxs("div",{className:"md:w-1/2 space-y-2 text-sm",children:[C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:"HW4"})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--warning-orange)] font-medium",children:""})]})]})]})]})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h3",{className:"text-xl font-medium mb-4 text-[var(--text-primary)] bg-[var(--bg-primary)] px-4 py-2 rounded-lg",children:""}),C.jsxs("div",{className:"space-y-6 ml-4",children:[C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[C.jsx("h4",{className:"font-medium mb-4 text-[var(--text-primary)] text-lg",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-5 items-start",children:[C.jsxs("div",{className:"md:w-1/2 space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:"PDR"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]})]}),C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer shadow-sm",onClick:()=>i(Fi[4]),children:[C.jsx("img",{src:Fi[4],alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity rounded-lg",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("button",{className:"bg-white/20 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/30 transition-colors",onClick:v=>{v.stopPropagation(),i(Fi[4])},children:C.jsx("i",{className:"fa-solid fa-search-plus text-xl"})})})]})})]})]}),C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[C.jsx("h4",{className:"font-medium mb-4 text-[var(--text-primary)] text-lg",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-5 items-start",children:[C.jsxs("div",{className:"md:w-1/2 space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:"HW4"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--warning-orange)] font-medium",children:""})]})]}),C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer shadow-sm",onClick:()=>i(Fi[5]),children:[C.jsx("img",{src:Fi[5],alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity rounded-lg",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("button",{className:"bg-white/20 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/30 transition-colors",onClick:v=>{v.stopPropagation(),i(Fi[5])},children:C.jsx("i",{className:"fa-solid fa-search-plus text-xl"})})})]})})]})]})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h3",{className:"text-xl font-medium mb-4 text-[var(--text-primary)] bg-[var(--bg-primary)] px-4 py-2 rounded-lg",children:""}),C.jsxs("div",{className:"space-y-6 ml-4",children:[C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[C.jsx("h4",{className:"font-medium mb-4 text-[var(--text-primary)] text-lg",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-5 items-start",children:[C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer shadow-sm h-48",onClick:()=>i(Fi[6]),children:[C.jsx("img",{src:Fi[6],alt:"",className:"w-full h-full object-cover hover:opacity-90 transition-opacity rounded-lg",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("button",{className:"bg-white/20 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/30 transition-colors",onClick:v=>{v.stopPropagation(),i(Fi[6])},children:C.jsx("i",{className:"fa-solid fa-search-plus text-xl"})})})]})}),C.jsxs("div",{className:"md:w-1/2 space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:"HW4"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--warning-orange)] font-medium",children:""})]})]})]})]}),C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[C.jsx("h4",{className:"font-medium mb-4 text-[var(--text-primary)] text-lg",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-5 items-start",children:[C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer shadow-sm",onClick:()=>i(Fi[7]),children:[C.jsx("img",{src:Fi[7],alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity rounded-lg",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("button",{className:"bg-white/20 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/30 transition-colors",onClick:v=>{v.stopPropagation(),i(Fi[7])},children:C.jsx("i",{className:"fa-solid fa-search-plus text-xl"})})})]})}),C.jsxs("div",{className:"md:w-1/2 space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:"HW6"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--warning-orange)] font-medium",children:""})]})]})]})]}),C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-5 shadow-sm hover:shadow-md transition-shadow",children:[C.jsx("h4",{className:"font-medium mb-4 text-[var(--text-primary)] text-lg",children:" "}),C.jsxs("div",{className:"flex flex-col md:flex-row gap-5 items-start",children:[C.jsx("div",{className:"md:w-1/2",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer shadow-sm",onClick:()=>i(Fi[8]),children:[C.jsx("img",{src:Fi[8],alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity rounded-lg",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("button",{className:"bg-white/20 backdrop-blur-sm text-white p-3 rounded-full hover:bg-white/30 transition-colors",onClick:v=>{v.stopPropagation(),i(Fi[8])},children:C.jsx("i",{className:"fa-solid fa-search-plus text-xl"})})})]})}),C.jsxs("div",{className:"md:w-1/2 space-y-3 text-sm",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)]/30 rounded-lg p-3",children:[C.jsx("p",{className:"font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-[var(--warning-orange)] font-medium",children:""})]})]})]})]})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h3",{className:"text-xl font-medium mb-4 text-[var(--text-primary)] bg-[var(--bg-primary)] px-4 py-2 rounded-lg",children:""}),C.jsx("div",{className:"space-y-6 ml-4",children:C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4",children:[C.jsx("h4",{className:"font-medium mb-3 text-[var(--text-primary)]",children:" "}),C.jsxs("div",{className:"space-y-2 text-sm",children:[C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--text-secondary)]",children:""})]}),C.jsxs("p",{children:[C.jsx("strong",{className:"text-[var(--text-primary)]",children:""})," ",C.jsx("span",{className:"text-[var(--warning-orange)] font-medium",children:""})]})]}),C.jsxs("div",{className:"mt-3 relative rounded-lg overflow-hidden cursor-pointer",onClick:()=>i(Fi[9]),children:[C.jsx("img",{src:Fi[9],alt:"",className:"w-full h-auto object-cover hover:opacity-90 transition-opacity",loading:"lazy"}),C.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:C.jsx("i",{className:"fa-solid fa-search-plus text-white text-2xl"})})]})]})})]})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>p("conclusion"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.conclusion?"transform rotate-180":""}`})]}),e.conclusion&&C.jsx(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 space-y-3",children:[C.jsxs("div",{className:"flex",children:[C.jsx("i",{className:"fa-solid fa-check-circle text-[var(--success-green)] mt-1 mr-3"}),C.jsxs("p",{className:"text-[var(--text-primary)]",children:[C.jsx("strong",{children:""}),""]})]}),C.jsxs("div",{className:"flex",children:[C.jsx("i",{className:"fa-solid fa-check-circle text-[var(--success-green)] mt-1 mr-3"}),C.jsxs("p",{className:"text-[var(--text-primary)]",children:[C.jsx("strong",{children:""}),""]})]}),C.jsxs("div",{className:"flex",children:[C.jsx("i",{className:"fa-solid fa-check-circle text-[var(--success-green)] mt-1 mr-3"}),C.jsxs("p",{className:"text-[var(--text-primary)]",children:[C.jsx("strong",{children:""}),""]})]}),C.jsxs("div",{className:"flex",children:[C.jsx("i",{className:"fa-solid fa-check-circle text-[var(--success-green)] mt-1 mr-3"}),C.jsxs("p",{className:"text-[var(--text-primary)]",children:[C.jsx("strong",{children:""}),""]})]})]})})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>p("quiz"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.quiz?"transform rotate-180":""}`})]}),e.quiz&&C.jsx(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:C.jsx("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:C.jsx(MPe,{})})})]}),u&&C.jsx(Kn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute z-40",style:{left:`${o.x}px`,top:`${o.y}px`},children:C.jsxs("button",{onClick:g,className:"bg-[var(--brand-pink)] text-white px-3 py-1.5 rounded-full shadow-lg hover:bg-[var(--brand-pink)]/90 transition-colors flex items-center text-sm whitespace-nowrap min-w-[80px] justify-center",children:[C.jsx("i",{className:"fa-solid fa-robot mr-1"}),"AI"]})}),r&&C.jsx(Kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",onClick:m,children:C.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",onClick:v=>v.stopPropagation(),children:[C.jsx("button",{className:"absolute -top-12 right-0 text-white text-2xl hover:text-gray-300",onClick:m,children:C.jsx("i",{className:"fa-solid fa-times"})}),C.jsx("img",{src:r,alt:"",className:"max-w-full max-h-[90vh] object-contain rounded-lg"})]})})]})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var GU=function(n,e){return GU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},GU(n,e)};function be(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");GU(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var IPe=(function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n})(),PPe=(function(){function n(){this.browser=new IPe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n})(),bn=new PPe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(bn.wxa=!0,bn.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?bn.worker=!0:!bn.hasGlobalWindow||"Deno"in window||typeof navigator<"u"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Node.js")>-1?(bn.node=!0,bn.svgSupported=!0):LPe(navigator.userAgent,bn);function LPe(n,e){var t=e.browser,r=n.match(/Firefox\/([\d.]+)/),i=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),a=n.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(n);r&&(t.firefox=!0,t.version=r[1]),i&&(t.ie=!0,t.version=i[1]),a&&(t.edge=!0,t.version=a[1],t.newEdge=+a[1].split(".")[0]>18),s&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11);var o=e.domSupported=typeof document<"u";if(o){var l=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in l||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in l)&&!("OTransition"in l),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}}var UG=12,Yue="sans-serif",Wf=UG+"px "+Yue,RPe=20,NPe=100,kPe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function OPe(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var r=String.fromCharCode(t+32),i=(n.charCodeAt(t)-RPe)/NPe;e[r]=i}return e}var BPe=OPe(kPe),Dc={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:(function(){var n,e;return function(t,r){if(!n){var i=Dc.createCanvas();n=i&&i.getContext("2d")}if(n)return e!==r&&(e=n.font=r||Wf),n.measureText(t);t=t||"",r=r||Wf;var a=/((?:\d+)?\.?\d*)px/.exec(r),s=a&&+a[1]||UG,o=0;if(r.indexOf("mono")>=0)o=s*t.length;else for(var l=0;l<t.length;l++){var u=BPe[t[l]];o+=u==null?s:u*s}return{width:o}}})(),loadImage:function(n,e,t){var r=new Image;return r.onload=e,r.onerror=t,r.src=n,r}},que=ed(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),Kue=ed(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),OS=Object.prototype.toString,$k=Array.prototype,FPe=$k.forEach,UPe=$k.filter,zG=$k.slice,zPe=$k.map,CK=(function(){}).constructor,sI=CK?CK.prototype:null,VG="__proto__",VPe=2311;function Zue(){return VPe++}function HG(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Tt(n){if(n==null||typeof n!="object")return n;var e=n,t=OS.call(n);if(t==="[object Array]"){if(!kE(n)){e=[];for(var r=0,i=n.length;r<i;r++)e[r]=Tt(n[r])}}else if(Kue[t]){if(!kE(n)){var a=n.constructor;if(a.from)e=a.from(n);else{e=new a(n.length);for(var r=0,i=n.length;r<i;r++)e[r]=n[r]}}}else if(!que[t]&&!kE(n)&&!J1(n)){e={};for(var s in n)n.hasOwnProperty(s)&&s!==VG&&(e[s]=Tt(n[s]))}return e}function en(n,e,t){if(!Lt(e)||!Lt(n))return t?Tt(e):n;for(var r in e)if(e.hasOwnProperty(r)&&r!==VG){var i=n[r],a=e[r];Lt(a)&&Lt(i)&&!Be(a)&&!Be(i)&&!J1(a)&&!J1(i)&&!MK(a)&&!MK(i)&&!kE(a)&&!kE(i)?en(i,a,t):(t||!(r in n))&&(n[r]=Tt(e[r]))}return n}function GG(n,e){for(var t=n[0],r=1,i=n.length;r<i;r++)t=en(t,n[r],e);return t}function Pe(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==VG&&(n[t]=e[t]);return n}function Pt(n,e,t){for(var r=An(e),i=0,a=r.length;i<a;i++){var s=r[i];(t?e[s]!=null:n[s]==null)&&(n[s]=e[s])}return n}function Jt(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t}return-1}function HPe(n,e){var t=n.prototype;function r(){}r.prototype=e.prototype,n.prototype=new r;for(var i in t)t.hasOwnProperty(i)&&(n.prototype[i]=t[i]);n.prototype.constructor=n,n.superClass=e}function Zi(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var a=r[i];a!=="constructor"&&(t?e[a]!=null:n[a]==null)&&(n[a]=e[a])}else Pt(n,e,t)}function Fs(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function W(n,e,t){if(n&&e)if(n.forEach&&n.forEach===FPe)n.forEach(e,t);else if(n.length===+n.length)for(var r=0,i=n.length;r<i;r++)e.call(t,n[r],r,n);else for(var a in n)n.hasOwnProperty(a)&&e.call(t,n[a],a,n)}function Ue(n,e,t){if(!n)return[];if(!e)return jG(n);if(n.map&&n.map===zPe)return n.map(e,t);for(var r=[],i=0,a=n.length;i<a;i++)r.push(e.call(t,n[i],i,n));return r}function ed(n,e,t,r){if(n&&e){for(var i=0,a=n.length;i<a;i++)t=e.call(r,t,n[i],i,n);return t}}function er(n,e,t){if(!n)return[];if(!e)return jG(n);if(n.filter&&n.filter===UPe)return n.filter(e,t);for(var r=[],i=0,a=n.length;i<a;i++)e.call(t,n[i],i,n)&&r.push(n[i]);return r}function nx(n,e,t){if(n&&e){for(var r=0,i=n.length;r<i;r++)if(e.call(t,n[r],r,n))return n[r]}}function An(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function GPe(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return function(){return n.apply(e,t.concat(zG.call(arguments)))}}var Qe=sI&&St(sI.bind)?sI.call.bind(sI.bind):GPe;function Qt(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(zG.call(arguments)))}}function Be(n){return Array.isArray?Array.isArray(n):OS.call(n)==="[object Array]"}function St(n){return typeof n=="function"}function Ke(n){return typeof n=="string"}function jU(n){return OS.call(n)==="[object String]"}function Ln(n){return typeof n=="number"}function Lt(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function MK(n){return!!que[OS.call(n)]}function Xo(n){return!!Kue[OS.call(n)]}function J1(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function Yk(n){return n.colorStops!=null}function jPe(n){return n.image!=null}function WPe(n){return OS.call(n)==="[object RegExp]"}function Bs(n){return n!==n}function fs(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,r=n.length;t<r;t++)if(n[t]!=null)return n[t]}function dt(n,e){return n??e}function Ll(n,e,t){return n??e??t}function jG(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return zG.apply(n,e)}function qk(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function Us(n,e){if(!n)throw new Error(e)}function Mu(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Que="__ec_primitive__";function zR(n){n[Que]=!0}function kE(n){return n[Que]}var XPe=(function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return An(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var r in t)t.hasOwnProperty(r)&&e(t[r],r)},n})(),Jue=typeof Map=="function";function $Pe(){return Jue?new Map:new XPe}var YPe=(function(){function n(e){var t=Be(e);this.data=$Pe();var r=this;e instanceof n?e.each(i):e&&W(e,i);function i(a,s){t?r.set(a,s):r.set(s,a)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(r,i){e.call(t,r,i)})},n.prototype.keys=function(){var e=this.data.keys();return Jue?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n})();function ct(n){return new YPe(n)}function dA(n,e){for(var t=new n.constructor(n.length+e.length),r=0;r<n.length;r++)t[r]=n[r];for(var i=n.length,r=0;r<e.length;r++)t[r+i]=e[r];return t}function Kk(n,e){var t;if(Object.create)t=Object.create(n);else{var r=function(){};r.prototype=n,t=new r}return e&&Pe(t,e),t}function ece(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function it(n,e){return n.hasOwnProperty(e)}function ki(){}var vL=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var WU=function(n,e){return WU=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},WU(n,e)};function Hr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");WU(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function rx(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function ro(n,e){return n[0]=e[0],n[1]=e[1],n}function Rf(n){return[n[0],n[1]]}function WG(n,e,t){return n[0]=e,n[1]=t,n}function DK(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function XU(n,e,t,r){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n}function i0(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function $U(n){return Math.sqrt(qPe(n))}function qPe(n){return n[0]*n[0]+n[1]*n[1]}function yL(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function BS(n,e){var t=$U(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function YU(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var eg=YU;function KPe(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var My=KPe;function xL(n,e,t,r){return n[0]=e[0]+r*(t[0]-e[0]),n[1]=e[1]+r*(t[1]-e[1]),n}function Oi(n,e,t){var r=e[0],i=e[1];return n[0]=t[0]*r+t[2]*i+t[4],n[1]=t[1]*r+t[3]*i+t[5],n}function tg(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function ng(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var Gx=(function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n})(),ZPe=(function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Gx(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var r=e.offsetX,i=e.offsetY,a=r-this._x,s=i-this._y;this._x=r,this._y=i,t.drift(a,s,e),this.handler.dispatchToElement(new Gx(t,e),"drag",e.event);var o=this.handler.findHover(r,i,t).target,l=this._dropTarget;this._dropTarget=o,t!==o&&(l&&o!==l&&this.handler.dispatchToElement(new Gx(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new Gx(o,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Gx(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Gx(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n})(),Uu=(function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,r,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof t=="function"&&(i=r,r=t,t=null),!r||!e)return this;var s=this._$eventProcessor;t!=null&&s&&s.normalizeQuery&&(t=s.normalizeQuery(t)),a[e]||(a[e]=[]);for(var o=0;o<a[e].length;o++)if(a[e][o].h===r)return this;var l={h:r,query:t,ctx:i||this,callAtLast:r.zrEventfulCallAtLast},u=a[e].length-1,c=a[e][u];return c&&c.callAtLast?a[e].splice(u,0,l):a[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var r=this._$handlers;if(!r)return this;if(!e)return this._$handlers={},this;if(t){if(r[e]){for(var i=[],a=0,s=r[e].length;a<s;a++)r[e][a].h!==t&&i.push(r[e][a]);r[e]=i}r[e]&&r[e].length===0&&delete r[e]}else delete r[e];return this},n.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var s=t.length,o=i.length,l=0;l<o;l++){var u=i[l];if(!(a&&a.filter&&u.query!=null&&!a.filter(e,u.query)))switch(s){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,t[0]);break;case 2:u.h.call(u.ctx,t[0],t[1]);break;default:u.h.apply(u.ctx,t);break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this._$handlers)return this;var i=this._$handlers[e],a=this._$eventProcessor;if(i)for(var s=t.length,o=t[s-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(a&&a.filter&&c.query!=null&&!a.filter(e,c.query)))switch(s){case 0:c.h.call(o);break;case 1:c.h.call(o,t[0]);break;case 2:c.h.call(o,t[0],t[1]);break;default:c.h.apply(o,t.slice(1,s-1));break}}return a&&a.afterTrigger&&a.afterTrigger(e),this},n})(),QPe=Math.log(2);function qU(n,e,t,r,i,a){var s=r+"-"+i,o=n.length;if(a.hasOwnProperty(s))return a[s];if(e===1){var l=Math.round(Math.log((1<<o)-1&~i)/QPe);return n[t][l]}for(var u=r|1<<t,c=t+1;r&1<<c;)c++;for(var h=0,d=0,f=0;d<o;d++){var p=1<<d;p&i||(h+=(f%2?-1:1)*n[t][d]*qU(n,e-1,c,u,i|p,a),f++)}return a[s]=h,h}function IK(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],r={},i=qU(t,8,0,0,0,r);if(i!==0){for(var a=[],s=0;s<8;s++)for(var o=0;o<8;o++)a[o]==null&&(a[o]=0),a[o]+=((s+o)%2?-1:1)*qU(t,7,s===0?1:0,1<<s,1<<o,r)/i*e[s];return function(l,u,c){var h=u*a[6]+c*a[7]+1;l[0]=(u*a[0]+c*a[1]+a[2])/h,l[1]=(u*a[3]+c*a[4]+a[5])/h}}}var VR="___zrEVENTSAVED",EF=[];function JPe(n,e,t,r,i){return KU(EF,e,r,i,!0)&&KU(n,t,EF[0],EF[1])}function eLe(n,e){n&&t(n),e&&t(e);function t(r){var i=r[VR];i&&(i.clearMarkers&&i.clearMarkers(),delete r[VR])}}function KU(n,e,t,r,i){if(e.getBoundingClientRect&&bn.domSupported&&!tce(e)){var a=e[VR]||(e[VR]={}),s=tLe(e,a),o=nLe(s,a,i);if(o)return o(n,t,r),!0}return!1}function tLe(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var r=["left","right"],i=["top","bottom"],a=0;a<4;a++){var s=document.createElement("div"),o=s.style,l=a%2,u=(a>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",r[l]+":0",i[u]+":0",r[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),n.appendChild(s),t.push(s)}return e.clearMarkers=function(){W(t,function(c){c.parentNode&&c.parentNode.removeChild(c)})},t}function nLe(n,e,t){for(var r=t?"invTrans":"trans",i=e[r],a=e.srcCoords,s=[],o=[],l=!0,u=0;u<4;u++){var c=n[u].getBoundingClientRect(),h=2*u,d=c.left,f=c.top;s.push(d,f),l=l&&a&&d===a[h]&&f===a[h+1],o.push(n[u].offsetLeft,n[u].offsetTop)}return l&&i?i:(e.srcCoords=s,e[r]=t?IK(o,s):IK(s,o))}function tce(n){return n.nodeName.toUpperCase()==="CANVAS"}var rLe=/([&<>"'])/g,iLe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function lo(n){return n==null?"":(n+"").replace(rLe,function(e,t){return iLe[t]})}var aLe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,AF=[],sLe=bn.browser.firefox&&+bn.browser.version.split(".")[0]<39;function ZU(n,e,t,r){return t=t||{},r?PK(n,e,t):sLe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):PK(n,e,t),t}function PK(n,e,t){if(bn.domSupported&&n.getBoundingClientRect){var r=e.clientX,i=e.clientY;if(tce(n)){var a=n.getBoundingClientRect();t.zrX=r-a.left,t.zrY=i-a.top;return}else if(KU(AF,n,r,i)){t.zrX=AF[0],t.zrY=AF[1];return}}t.zrX=t.zrY=0}function XG(n){return n||window.event}function eu(n,e,t){if(e=XG(e),e.zrX!=null)return e;var r=e.type,i=r&&r.indexOf("touch")>=0;if(i){var s=r!=="touchend"?e.targetTouches[0]:e.changedTouches[0];s&&ZU(n,s,e,t)}else{ZU(n,e,e,t);var a=oLe(e);e.zrDelta=a?a/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&aLe.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function oLe(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,r=n.deltaY;if(t==null||r==null)return e;var i=Math.abs(r!==0?r:t),a=r>0?-1:r<0?1:t>0?-1:1;return 3*i*a}function QU(n,e,t,r){n.addEventListener(e,t,r)}function lLe(n,e,t,r){n.removeEventListener(e,t,r)}var Xf=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function LK(n){return n.which===2||n.which===3}var uLe=(function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,r){return this._doTrack(e,t,r),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,r){var i=e.touches;if(i){for(var a={points:[],touches:[],target:t,event:e},s=0,o=i.length;s<o;s++){var l=i[s],u=ZU(r,l,{});a.points.push([u.zrX,u.zrY]),a.touches.push(l)}this._track.push(a)}},n.prototype._recognize=function(e){for(var t in CF)if(CF.hasOwnProperty(t)){var r=CF[t](this._track,e);if(r)return r}},n})();function RK(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function cLe(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var CF={pinch:function(n,e){var t=n.length;if(t){var r=(n[t-1]||{}).points,i=(n[t-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=RK(r)/RK(i);!isFinite(a)&&(a=1),e.pinchScale=a;var s=cLe(r);return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:n[0].target,event:e}}}}};function Ya(){return[1,0,0,1,0,0]}function Zk(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function Qk(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function Wh(n,e,t){var r=e[0]*t[0]+e[2]*t[1],i=e[1]*t[0]+e[3]*t[1],a=e[0]*t[2]+e[2]*t[3],s=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=r,n[1]=i,n[2]=a,n[3]=s,n[4]=o,n[5]=l,n}function td(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function Rg(n,e,t,r){r===void 0&&(r=[0,0]);var i=e[0],a=e[2],s=e[4],o=e[1],l=e[3],u=e[5],c=Math.sin(t),h=Math.cos(t);return n[0]=i*h+o*c,n[1]=-i*c+o*h,n[2]=a*h+l*c,n[3]=-a*c+h*l,n[4]=h*(s-r[0])+c*(u-r[1])+r[0],n[5]=h*(u-r[1])-c*(s-r[0])+r[1],n}function $G(n,e,t){var r=t[0],i=t[1];return n[0]=e[0]*r,n[1]=e[1]*i,n[2]=e[2]*r,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*i,n}function Ic(n,e){var t=e[0],r=e[2],i=e[4],a=e[1],s=e[3],o=e[5],l=t*s-a*r;return l?(l=1/l,n[0]=s*l,n[1]=-a*l,n[2]=-r*l,n[3]=t*l,n[4]=(r*o-s*i)*l,n[5]=(a*i-t*o)*l,n):null}function hLe(n){var e=Ya();return Qk(e,n),e}var Ct=(function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,r=this.y-e.y;return Math.sqrt(t*t+r*r)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,r=this.y;return this.x=e[0]*t+e[2]*r+e[4],this.y=e[1]*t+e[3]*r+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,r){e.x=t,e.y=r},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,r){e.x=t.x+r.x,e.y=t.y+r.y},n.sub=function(e,t,r){e.x=t.x-r.x,e.y=t.y-r.y},n.scale=function(e,t,r){e.x=t.x*r,e.y=t.y*r},n.scaleAndAdd=function(e,t,r,i){e.x=t.x+r.x*i,e.y=t.y+r.y*i},n.lerp=function(e,t,r,i){var a=1-i;e.x=a*t.x+i*r.x,e.y=a*t.y+i*r.y},n})(),a0=Math.min,eb=Math.max,JU=Math.abs,NK=["x","y"],dLe=["width","height"],rv=new Ct,iv=new Ct,av=new Ct,sv=new Ct,Tl=nce(),WT=Tl.minTv,ez=Tl.maxTv,OE=[0,0],Rt=(function(){function n(e,t,r,i){n.set(this,e,t,r,i)}return n.set=function(e,t,r,i,a){return i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),e.x=t,e.y=r,e.width=i,e.height=a,e},n.prototype.union=function(e){var t=a0(e.x,this.x),r=a0(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=eb(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=eb(e.y+e.height,this.y+this.height)-r:this.height=e.height,this.x=t,this.y=r},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,r=e.width/t.width,i=e.height/t.height,a=Ya();return td(a,a,[-t.x,-t.y]),$G(a,a,[r,i]),td(a,a,[e.x,e.y]),a},n.prototype.intersect=function(e,t,r){return n.intersect(this,e,t,r)},n.intersect=function(e,t,r,i){r&&Ct.set(r,0,0);var a=i&&i.outIntersectRect||null,s=i&&i.clamp;if(a&&(a.x=a.y=a.width=a.height=NaN),!e||!t)return!1;e instanceof n||(e=n.set(fLe,e.x,e.y,e.width,e.height)),t instanceof n||(t=n.set(pLe,t.x,t.y,t.width,t.height));var o=!!r;Tl.reset(i,o);var l=Tl.touchThreshold,u=e.x+l,c=e.x+e.width-l,h=e.y+l,d=e.y+e.height-l,f=t.x+l,p=t.x+t.width-l,m=t.y+l,g=t.y+t.height-l;if(u>c||h>d||f>p||m>g)return!1;var v=!(c<f||p<u||d<m||g<h);return(o||a)&&(OE[0]=1/0,OE[1]=0,kK(u,c,f,p,0,o,a,s),kK(h,d,m,g,1,o,a,s),o&&Ct.copy(r,v?Tl.useDir?Tl.dirMinTv:WT:ez)),v},n.contain=function(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height},n.prototype.contain=function(e,t){return n.contain(this,e,t)},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e},n.applyTransform=function(e,t,r){if(!r){e!==t&&n.copy(e,t);return}if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var i=r[0],a=r[3],s=r[4],o=r[5];e.x=t.x*i+s,e.y=t.y*a+o,e.width=t.width*i,e.height=t.height*a,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}rv.x=av.x=t.x,rv.y=sv.y=t.y,iv.x=sv.x=t.x+t.width,iv.y=av.y=t.y+t.height,rv.transform(r),sv.transform(r),iv.transform(r),av.transform(r),e.x=a0(rv.x,iv.x,av.x,sv.x),e.y=a0(rv.y,iv.y,av.y,sv.y);var l=eb(rv.x,iv.x,av.x,sv.x),u=eb(rv.y,iv.y,av.y,sv.y);e.width=l-e.x,e.height=u-e.y},n})(),fLe=new Rt(0,0,0,0),pLe=new Rt(0,0,0,0);function kK(n,e,t,r,i,a,s,o){var l=JU(e-t),u=JU(r-n),c=a0(l,u),h=NK[i],d=NK[1-i],f=dLe[i];e<t||r<n?l<u?(a&&(ez[h]=-l),o&&(s[h]=e,s[f]=0)):(a&&(ez[h]=u),o&&(s[h]=n,s[f]=0)):(s&&(s[h]=eb(n,t),s[f]=a0(e,r)-s[h]),a&&(c<OE[0]||Tl.useDir)&&(OE[0]=a0(c,OE[0]),(l<u||!Tl.bidirectional)&&(WT[h]=l,WT[d]=0,Tl.useDir&&Tl.calcDirMTV()),(l>=u||!Tl.bidirectional)&&(WT[h]=-u,WT[d]=0,Tl.useDir&&Tl.calcDirMTV())))}function nce(){var n=0,e=new Ct,t=new Ct,r={minTv:new Ct,maxTv:new Ct,useDir:!1,dirMinTv:new Ct,touchThreshold:0,bidirectional:!0,negativeSize:!1,reset:function(a,s){r.touchThreshold=0,a&&a.touchThreshold!=null&&(r.touchThreshold=eb(0,a.touchThreshold)),r.negativeSize=!1,s&&(r.minTv.set(1/0,1/0),r.maxTv.set(0,0),r.useDir=!1,a&&a.direction!=null&&(r.useDir=!0,r.dirMinTv.copy(r.minTv),t.copy(r.minTv),n=a.direction,r.bidirectional=a.bidirectional==null||!!a.bidirectional,r.bidirectional||e.set(Math.cos(n),Math.sin(n))))},calcDirMTV:function(){var a=r.minTv,s=r.dirMinTv,o=a.y*a.y+a.x*a.x,l=Math.sin(n),u=Math.cos(n),c=l*a.y+u*a.x;if(i(c)){i(a.x)&&i(a.y)&&s.set(0,0);return}if(t.x=o*u/c,t.y=o*l/c,i(t.x)&&i(t.y)){s.set(0,0);return}(r.bidirectional||e.dot(t)>0)&&t.len()<s.len()&&s.copy(t)}};function i(a){return JU(a)<1e-10}return r}var rce="silent";function mLe(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:gLe}}function gLe(){Xf(this.event)}var vLe=(function(n){Hr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e})(Uu),Yw=(function(){function n(e,t){this.x=e,this.y=t}return n})(),yLe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],MF=new Rt(0,0,0,0),ice=(function(n){Hr(e,n);function e(t,r,i,a,s){var o=n.call(this)||this;return o._hovered=new Yw(0,0),o.storage=t,o.painter=r,o.painterRoot=a,o._pointerSize=s,i=i||new vLe,o.proxy=null,o.setHandlerProxy(i),o._draggingMgr=new ZPe(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(W(yLe,function(r){t.on&&t.on(r,this[r],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var r=t.zrX,i=t.zrY,a=ace(this,r,i),s=this._hovered,o=s.target;o&&!o.__zr&&(s=this.findHover(s.x,s.y),o=s.target);var l=this._hovered=a?new Yw(r,i):this.findHover(r,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),o&&u!==o&&this.dispatchToElement(s,"mouseout",t),this.dispatchToElement(l,"mousemove",t),u&&u!==o&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var r=t.zrEventControl;r!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),r!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Yw(0,0)},e.prototype.dispatch=function(t,r){var i=this[t];i&&i.call(this,r)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var r=this.proxy;r.setCursor&&r.setCursor(t)},e.prototype.dispatchToElement=function(t,r,i){t=t||{};var a=t.target;if(!(a&&a.silent)){for(var s="on"+r,o=mLe(r,t,i);a&&(a[s]&&(o.cancelBubble=!!a[s].call(a,o)),a.trigger(r,o),a=a.__hostTarget?a.__hostTarget:a.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(r,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[s]=="function"&&l[s].call(l,o),l.trigger&&l.trigger(r,o)}))}},e.prototype.findHover=function(t,r,i){var a=this.storage.getDisplayList(),s=new Yw(t,r);if(OK(a,s,t,r,i),this._pointerSize&&!s.target){for(var o=[],l=this._pointerSize,u=l/2,c=new Rt(t-u,r-u,l,l),h=a.length-1;h>=0;h--){var d=a[h];d!==i&&!d.ignore&&!d.ignoreCoarsePointer&&(!d.parent||!d.parent.ignoreCoarsePointer)&&(MF.copy(d.getBoundingRect()),d.transform&&MF.applyTransform(d.transform),MF.intersect(c)&&o.push(d))}if(o.length)for(var f=4,p=Math.PI/12,m=Math.PI*2,g=0;g<u;g+=f)for(var v=0;v<m;v+=p){var b=t+g*Math.cos(v),S=r+g*Math.sin(v);if(OK(o,s,b,S,i),s.target)return s}}return s},e.prototype.processGesture=function(t,r){this._gestureMgr||(this._gestureMgr=new uLe);var i=this._gestureMgr;r==="start"&&i.clear();var a=i.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(r==="end"&&i.clear(),a){var s=a.type;t.gestureEvent=s;var o=new Yw;o.target=a.target,this.dispatchToElement(o,s,a.event)}},e})(Uu);W(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){ice.prototype[n]=function(e){var t=e.zrX,r=e.zrY,i=ace(this,t,r),a,s;if((n!=="mouseup"||!i)&&(a=this.findHover(t,r),s=a.target),n==="mousedown")this._downEl=s,this._downPoint=[e.zrX,e.zrY],this._upEl=s;else if(n==="mouseup")this._upEl=s;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||eg(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,n,e)}});function xLe(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var r=n,i=void 0,a=!1;r;){if(r.ignoreClip&&(a=!0),!a){var s=r.getClipPath();if(s&&!s.contain(e,t))return!1}r.silent&&(i=!0);var o=r.__hostTarget;r=o?r.ignoreHostSilent?null:o:r.parent}return i?rce:!0}return!1}function OK(n,e,t,r,i){for(var a=n.length-1;a>=0;a--){var s=n[a],o=void 0;if(s!==i&&!s.ignore&&(o=xLe(s,t,r))&&(!e.topTarget&&(e.topTarget=s),o!==rce)){e.target=s;break}}}function ace(n,e,t){var r=n.painter;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var sce=32,qw=7;function _Le(n){for(var e=0;n>=sce;)e|=n&1,n>>=1;return n+e}function BK(n,e,t,r){var i=e+1;if(i===t)return 1;if(r(n[i++],n[e])<0){for(;i<t&&r(n[i],n[i-1])<0;)i++;bLe(n,e,i)}else for(;i<t&&r(n[i],n[i-1])>=0;)i++;return i-e}function bLe(n,e,t){for(t--;e<t;){var r=n[e];n[e++]=n[t],n[t--]=r}}function FK(n,e,t,r,i){for(r===e&&r++;r<t;r++){for(var a=n[r],s=e,o=r,l;s<o;)l=s+o>>>1,i(a,n[l])<0?o=l:s=l+1;var u=r-s;switch(u){case 3:n[s+3]=n[s+2];case 2:n[s+2]=n[s+1];case 1:n[s+1]=n[s];break;default:for(;u>0;)n[s+u]=n[s+u-1],u--}n[s]=a}}function DF(n,e,t,r,i,a){var s=0,o=0,l=1;if(a(n,e[t+i])>0){for(o=r-i;l<o&&a(n,e[t+i+l])>0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}else{for(o=i+1;l<o&&a(n,e[t+i-l])<=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=s;s=i-l,l=i-u}for(s++;s<l;){var c=s+(l-s>>>1);a(n,e[t+c])>0?s=c+1:l=c}return l}function IF(n,e,t,r,i,a){var s=0,o=0,l=1;if(a(n,e[t+i])<0){for(o=i+1;l<o&&a(n,e[t+i-l])<0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=s;s=i-l,l=i-u}else{for(o=r-i;l<o&&a(n,e[t+i+l])>=0;)s=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),s+=i,l+=i}for(s++;s<l;){var c=s+(l-s>>>1);a(n,e[t+c])<0?l=c:s=c+1}return l}function SLe(n,e){var t=qw,r,i,a=0,s=[];r=[],i=[];function o(f,p){r[a]=f,i[a]=p,a+=1}function l(){for(;a>1;){var f=a-2;if(f>=1&&i[f-1]<=i[f]+i[f+1]||f>=2&&i[f-2]<=i[f]+i[f-1])i[f-1]<i[f+1]&&f--;else if(i[f]>i[f+1])break;c(f)}}function u(){for(;a>1;){var f=a-2;f>0&&i[f-1]<i[f+1]&&f--,c(f)}}function c(f){var p=r[f],m=i[f],g=r[f+1],v=i[f+1];i[f]=m+v,f===a-3&&(r[f+1]=r[f+2],i[f+1]=i[f+2]),a--;var b=IF(n[g],n,p,m,0,e);p+=b,m-=b,m!==0&&(v=DF(n[p+m-1],n,g,v,v-1,e),v!==0&&(m<=v?h(p,m,g,v):d(p,m,g,v)))}function h(f,p,m,g){var v=0;for(v=0;v<p;v++)s[v]=n[f+v];var b=0,S=m,w=f;if(n[w++]=n[S++],--g===0){for(v=0;v<p;v++)n[w+v]=s[b+v];return}if(p===1){for(v=0;v<g;v++)n[w+v]=n[S+v];n[w+g]=s[b];return}for(var E=t,T,M,P;;){T=0,M=0,P=!1;do if(e(n[S],s[b])<0){if(n[w++]=n[S++],M++,T=0,--g===0){P=!0;break}}else if(n[w++]=s[b++],T++,M=0,--p===1){P=!0;break}while((T|M)<E);if(P)break;do{if(T=IF(n[S],s,b,p,0,e),T!==0){for(v=0;v<T;v++)n[w+v]=s[b+v];if(w+=T,b+=T,p-=T,p<=1){P=!0;break}}if(n[w++]=n[S++],--g===0){P=!0;break}if(M=DF(s[b],n,S,g,0,e),M!==0){for(v=0;v<M;v++)n[w+v]=n[S+v];if(w+=M,S+=M,g-=M,g===0){P=!0;break}}if(n[w++]=s[b++],--p===1){P=!0;break}E--}while(T>=qw||M>=qw);if(P)break;E<0&&(E=0),E+=2}if(t=E,t<1&&(t=1),p===1){for(v=0;v<g;v++)n[w+v]=n[S+v];n[w+g]=s[b]}else{if(p===0)throw new Error;for(v=0;v<p;v++)n[w+v]=s[b+v]}}function d(f,p,m,g){var v=0;for(v=0;v<g;v++)s[v]=n[m+v];var b=f+p-1,S=g-1,w=m+g-1,E=0,T=0;if(n[w--]=n[b--],--p===0){for(E=w-(g-1),v=0;v<g;v++)n[E+v]=s[v];return}if(g===1){for(w-=p,b-=p,T=w+1,E=b+1,v=p-1;v>=0;v--)n[T+v]=n[E+v];n[w]=s[S];return}for(var M=t;;){var P=0,I=0,D=!1;do if(e(s[S],n[b])<0){if(n[w--]=n[b--],P++,I=0,--p===0){D=!0;break}}else if(n[w--]=s[S--],I++,P=0,--g===1){D=!0;break}while((P|I)<M);if(D)break;do{if(P=p-IF(s[S],n,f,p,p-1,e),P!==0){for(w-=P,b-=P,p-=P,T=w+1,E=b+1,v=P-1;v>=0;v--)n[T+v]=n[E+v];if(p===0){D=!0;break}}if(n[w--]=s[S--],--g===1){D=!0;break}if(I=g-DF(n[b],s,0,g,g-1,e),I!==0){for(w-=I,S-=I,g-=I,T=w+1,E=S+1,v=0;v<I;v++)n[T+v]=s[E+v];if(g<=1){D=!0;break}}if(n[w--]=n[b--],--p===0){D=!0;break}M--}while(P>=qw||I>=qw);if(D)break;M<0&&(M=0),M+=2}if(t=M,t<1&&(t=1),g===1){for(w-=p,b-=p,T=w+1,E=b+1,v=p-1;v>=0;v--)n[T+v]=n[E+v];n[w]=s[S]}else{if(g===0)throw new Error;for(E=w-(g-1),v=0;v<g;v++)n[E+v]=s[v]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:o}}function _L(n,e,t,r){t||(t=0),r||(r=n.length);var i=r-t;if(!(i<2)){var a=0;if(i<sce){a=BK(n,t,r,e),FK(n,t,r,t+a,e);return}var s=SLe(n,e),o=_Le(i);do{if(a=BK(n,t,r,e),a<o){var l=i;l>o&&(l=o),FK(n,t,t+l,t+a,e),a=l}s.pushRun(t,a),s.mergeRuns(),i-=a,t+=a}while(i!==0);s.forceMergeRuns()}}var Cl=1,XT=2,k_=4,UK=!1;function PF(){UK||(UK=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function zK(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var wLe=(function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=zK}return n.prototype.traverse=function(e,t){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var r=this._displayList;return(e||!r.length)&&this.updateDisplayList(t),r},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,r=this._displayList,i=0,a=t.length;i<a;i++)this._updateAndAddDisplayable(t[i],null,e);r.length=this._displayListLen,_L(r,zK)},n.prototype._updateAndAddDisplayable=function(e,t,r){if(!(e.ignore&&!r)){e.beforeUpdate(),e.update(),e.afterUpdate();var i=e.getClipPath(),a=t&&t.length,s=0,o=e.__clipPaths;if(!e.ignoreClip&&(a||i)){if(o||(o=e.__clipPaths=[]),a)for(var l=0;l<t.length;l++)o[s++]=t[l];for(var u=i,c=e;u;)u.parent=c,u.updateTransform(),o[s++]=u,c=u,u=u.getClipPath()}if(o&&(o.length=s),e.childrenRef){for(var h=e.childrenRef(),d=0;d<h.length;d++){var f=h[d];e.__dirty&&(f.__dirty|=Cl),this._updateAndAddDisplayable(f,o,r)}e.__dirty=0}else{var p=e;isNaN(p.z)&&(PF(),p.z=0),isNaN(p.z2)&&(PF(),p.z2=0),isNaN(p.zlevel)&&(PF(),p.zlevel=0),this._displayList[this._displayListLen++]=p}var m=e.getDecalElement&&e.getDecalElement();m&&this._updateAndAddDisplayable(m,o,r);var g=e.getTextGuideLine();g&&this._updateAndAddDisplayable(g,o,r);var v=e.getTextContent();v&&this._updateAndAddDisplayable(v,o,r)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,r=e.length;t<r;t++)this.delRoot(e[t]);return}var i=Jt(this._roots,e);i>=0&&this._roots.splice(i,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n})(),HR;HR=bn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};var BE={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)))},elasticOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/r)+1)},elasticInOut:function(n){var e,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=r/4):e=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/r)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-BE.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?BE.bounceIn(n*2)*.5:BE.bounceOut(n*2-1)*.5+.5}},oI=Math.pow,hg=Math.sqrt,GR=1e-8,oce=1e-4,VK=hg(3),lI=1/3,Nh=rx(),xu=rx(),vb=rx();function rg(n){return n>-GR&&n<GR}function lce(n){return n>GR||n<-GR}function ba(n,e,t,r,i){var a=1-i;return a*a*(a*n+3*i*e)+i*i*(i*r+3*a*t)}function HK(n,e,t,r,i){var a=1-i;return 3*(((e-n)*a+2*(t-e)*i)*a+(r-t)*i*i)}function jR(n,e,t,r,i,a){var s=r+3*(e-t)-n,o=3*(t-e*2+n),l=3*(e-n),u=n-i,c=o*o-3*s*l,h=o*l-9*s*u,d=l*l-3*o*u,f=0;if(rg(c)&&rg(h))if(rg(o))a[0]=0;else{var p=-l/o;p>=0&&p<=1&&(a[f++]=p)}else{var m=h*h-4*c*d;if(rg(m)){var g=h/c,p=-o/s+g,v=-g/2;p>=0&&p<=1&&(a[f++]=p),v>=0&&v<=1&&(a[f++]=v)}else if(m>0){var b=hg(m),S=c*o+1.5*s*(-h+b),w=c*o+1.5*s*(-h-b);S<0?S=-oI(-S,lI):S=oI(S,lI),w<0?w=-oI(-w,lI):w=oI(w,lI);var p=(-o-(S+w))/(3*s);p>=0&&p<=1&&(a[f++]=p)}else{var E=(2*c*o-3*s*h)/(2*hg(c*c*c)),T=Math.acos(E)/3,M=hg(c),P=Math.cos(T),p=(-o-2*M*P)/(3*s),v=(-o+M*(P+VK*Math.sin(T)))/(3*s),I=(-o+M*(P-VK*Math.sin(T)))/(3*s);p>=0&&p<=1&&(a[f++]=p),v>=0&&v<=1&&(a[f++]=v),I>=0&&I<=1&&(a[f++]=I)}}return f}function uce(n,e,t,r,i){var a=6*t-12*e+6*n,s=9*e+3*r-3*n-9*t,o=3*e-3*n,l=0;if(rg(s)){if(lce(a)){var u=-o/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*s*o;if(rg(c))i[0]=-a/(2*s);else if(c>0){var h=hg(c),u=(-a+h)/(2*s),d=(-a-h)/(2*s);u>=0&&u<=1&&(i[l++]=u),d>=0&&d<=1&&(i[l++]=d)}}return l}function _g(n,e,t,r,i,a){var s=(e-n)*i+n,o=(t-e)*i+e,l=(r-t)*i+t,u=(o-s)*i+s,c=(l-o)*i+o,h=(c-u)*i+u;a[0]=n,a[1]=s,a[2]=u,a[3]=h,a[4]=h,a[5]=c,a[6]=l,a[7]=r}function cce(n,e,t,r,i,a,s,o,l,u,c){var h,d=.005,f=1/0,p,m,g,v;Nh[0]=l,Nh[1]=u;for(var b=0;b<1;b+=.05)xu[0]=ba(n,t,i,s,b),xu[1]=ba(e,r,a,o,b),g=My(Nh,xu),g<f&&(h=b,f=g);f=1/0;for(var S=0;S<32&&!(d<oce);S++)p=h-d,m=h+d,xu[0]=ba(n,t,i,s,p),xu[1]=ba(e,r,a,o,p),g=My(xu,Nh),p>=0&&g<f?(h=p,f=g):(vb[0]=ba(n,t,i,s,m),vb[1]=ba(e,r,a,o,m),v=My(vb,Nh),m<=1&&v<f?(h=m,f=v):d*=.5);return c&&(c[0]=ba(n,t,i,s,h),c[1]=ba(e,r,a,o,h)),hg(f)}function TLe(n,e,t,r,i,a,s,o,l){for(var u=n,c=e,h=0,d=1/l,f=1;f<=l;f++){var p=f*d,m=ba(n,t,i,s,p),g=ba(e,r,a,o,p),v=m-u,b=g-c;h+=Math.sqrt(v*v+b*b),u=m,c=g}return h}function Wa(n,e,t,r){var i=1-r;return i*(i*n+2*r*e)+r*r*t}function tz(n,e,t,r){return 2*((1-r)*(e-n)+r*(t-e))}function ELe(n,e,t,r,i){var a=n-2*e+t,s=2*(e-n),o=n-r,l=0;if(rg(a)){if(lce(s)){var u=-o/s;u>=0&&u<=1&&(i[l++]=u)}}else{var c=s*s-4*a*o;if(rg(c)){var u=-s/(2*a);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var h=hg(c),u=(-s+h)/(2*a),d=(-s-h)/(2*a);u>=0&&u<=1&&(i[l++]=u),d>=0&&d<=1&&(i[l++]=d)}}return l}function hce(n,e,t){var r=n+t-2*e;return r===0?.5:(n-e)/r}function fA(n,e,t,r,i){var a=(e-n)*r+n,s=(t-e)*r+e,o=(s-a)*r+a;i[0]=n,i[1]=a,i[2]=o,i[3]=o,i[4]=s,i[5]=t}function dce(n,e,t,r,i,a,s,o,l){var u,c=.005,h=1/0;Nh[0]=s,Nh[1]=o;for(var d=0;d<1;d+=.05){xu[0]=Wa(n,t,i,d),xu[1]=Wa(e,r,a,d);var f=My(Nh,xu);f<h&&(u=d,h=f)}h=1/0;for(var p=0;p<32&&!(c<oce);p++){var m=u-c,g=u+c;xu[0]=Wa(n,t,i,m),xu[1]=Wa(e,r,a,m);var f=My(xu,Nh);if(m>=0&&f<h)u=m,h=f;else{vb[0]=Wa(n,t,i,g),vb[1]=Wa(e,r,a,g);var v=My(vb,Nh);g<=1&&v<h?(u=g,h=v):c*=.5}}return l&&(l[0]=Wa(n,t,i,u),l[1]=Wa(e,r,a,u)),hg(h)}function ALe(n,e,t,r,i,a,s){for(var o=n,l=e,u=0,c=1/s,h=1;h<=s;h++){var d=h*c,f=Wa(n,t,i,d),p=Wa(e,r,a,d),m=f-o,g=p-l;u+=Math.sqrt(m*m+g*g),o=f,l=p}return u}var CLe=/cubic-bezier\(([0-9,\.e ]+)\)/;function YG(n){var e=n&&CLe.exec(n);if(e){var t=e[1].split(","),r=+Mu(t[0]),i=+Mu(t[1]),a=+Mu(t[2]),s=+Mu(t[3]);if(isNaN(r+i+a+s))return;var o=[];return function(l){return l<=0?0:l>=1?1:jR(0,r,a,1,l,o)&&ba(0,i,s,1,o[0])}}}var MLe=(function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||ki,this.ondestroy=e.ondestroy||ki,this.onrestart=e.onrestart||ki,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var r=this._life,i=e-this._startTime-this._pausedTime,a=i/r;a<0&&(a=0),a=Math.min(a,1);var s=this.easingFunc,o=s?s(a):a;if(this.onframe(o),a===1)if(this.loop){var l=i%r;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=St(e)?e:BE[e]||YG(e)},n})(),fce=(function(){function n(e){this.value=e}return n})(),DLe=(function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new fce(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,r=e.next;t?t.next=r:this.head=r,r?r.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n})(),eS=(function(){function n(e){this._list=new DLe,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var r=this._list,i=this._map,a=null;if(i[e]==null){var s=r.len(),o=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var l=r.head;r.remove(l),delete i[l.key],a=l.value,this._lastRemovedEntry=l}o?o.value=t:o=new fce(t),o.key=e,r.insertEntry(o),i[e]=o}return a},n.prototype.get=function(e){var t=this._map[e],r=this._list;if(t!=null)return t!==r.tail&&(r.remove(t),r.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n})(),GK={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ec(n){return n=Math.round(n),n<0?0:n>255?255:n}function ILe(n){return n=Math.round(n),n<0?0:n>360?360:n}function pA(n){return n<0?0:n>1?1:n}function LF(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?Ec(parseFloat(e)/100*255):Ec(parseInt(e,10))}function dg(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?pA(parseFloat(e)/100):pA(parseFloat(e))}function RF(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function ig(n,e,t){return n+(e-n)*t}function Jl(n,e,t,r,i){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function nz(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var pce=new eS(20),uI=null;function jx(n,e){uI&&nz(uI,e),uI=pce.put(n,uI||e.slice())}function jo(n,e){if(n){e=e||[];var t=pce.get(n);if(t)return nz(e,t);n=n+"";var r=n.replace(/ /g,"").toLowerCase();if(r in GK)return nz(e,GK[r]),jx(n,e),e;var i=r.length;if(r.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(r.slice(1,4),16);if(!(a>=0&&a<=4095)){Jl(e,0,0,0,1);return}return Jl(e,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(r.slice(4),16)/15:1),jx(n,e),e}else if(i===7||i===9){var a=parseInt(r.slice(1,7),16);if(!(a>=0&&a<=16777215)){Jl(e,0,0,0,1);return}return Jl(e,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(r.slice(7),16)/255:1),jx(n,e),e}return}var s=r.indexOf("("),o=r.indexOf(")");if(s!==-1&&o+1===i){var l=r.substr(0,s),u=r.substr(s+1,o-(s+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Jl(e,+u[0],+u[1],+u[2],1):Jl(e,0,0,0,1);c=dg(u.pop());case"rgb":if(u.length>=3)return Jl(e,LF(u[0]),LF(u[1]),LF(u[2]),u.length===3?c:dg(u[3])),jx(n,e),e;Jl(e,0,0,0,1);return;case"hsla":if(u.length!==4){Jl(e,0,0,0,1);return}return u[3]=dg(u[3]),rz(u,e),jx(n,e),e;case"hsl":if(u.length!==3){Jl(e,0,0,0,1);return}return rz(u,e),jx(n,e),e;default:return}}Jl(e,0,0,0,1)}}function rz(n,e){var t=(parseFloat(n[0])%360+360)%360/360,r=dg(n[1]),i=dg(n[2]),a=i<=.5?i*(r+1):i+r-i*r,s=i*2-a;return e=e||[],Jl(e,Ec(RF(s,a,t+1/3)*255),Ec(RF(s,a,t)*255),Ec(RF(s,a,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function PLe(n){if(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.min(e,t,r),a=Math.max(e,t,r),s=a-i,o=(a+i)/2,l,u;if(s===0)l=0,u=0;else{o<.5?u=s/(a+i):u=s/(2-a-i);var c=((a-e)/6+s/2)/s,h=((a-t)/6+s/2)/s,d=((a-r)/6+s/2)/s;e===a?l=d-h:t===a?l=1/3+c-d:r===a&&(l=2/3+h-c),l<0&&(l+=1),l>1&&(l-=1)}var f=[l*360,u,o];return n[3]!=null&&f.push(n[3]),f}}function iz(n,e){var t=jo(n);if(t){for(var r=0;r<3;r++)e<0?t[r]=t[r]*(1-e)|0:t[r]=(255-t[r])*e+t[r]|0,t[r]>255?t[r]=255:t[r]<0&&(t[r]=0);return Xh(t,t.length===4?"rgba":"rgb")}}function NF(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){t=t||[];var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),s=e[i],o=e[a],l=r-i;return t[0]=Ec(ig(s[0],o[0],l)),t[1]=Ec(ig(s[1],o[1],l)),t[2]=Ec(ig(s[2],o[2],l)),t[3]=pA(ig(s[3],o[3],l)),t}}function LLe(n,e,t){if(!(!(e&&e.length)||!(n>=0&&n<=1))){var r=n*(e.length-1),i=Math.floor(r),a=Math.ceil(r),s=jo(e[i]),o=jo(e[a]),l=r-i,u=Xh([Ec(ig(s[0],o[0],l)),Ec(ig(s[1],o[1],l)),Ec(ig(s[2],o[2],l)),pA(ig(s[3],o[3],l))],"rgba");return t?{color:u,leftIndex:i,rightIndex:a,value:r}:u}}function fg(n,e,t,r){var i=jo(n);if(n)return i=PLe(i),e!=null&&(i[0]=ILe(St(e)?e(i[0]):e)),t!=null&&(i[1]=dg(St(t)?t(i[1]):t)),r!=null&&(i[2]=dg(St(r)?r(i[2]):r)),Xh(rz(i),"rgba")}function WR(n,e){var t=jo(n);if(t&&e!=null)return t[3]=pA(e),Xh(t,"rgba")}function Xh(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function XR(n,e){var t=jo(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}var jK=new eS(100);function az(n){if(Ke(n)){var e=jK.get(n);return e||(e=iz(n,-.1),jK.put(n,e)),e}else if(Yk(n)){var t=Pe({},n);return t.colorStops=Ue(n.colorStops,function(r){return{offset:r.offset,color:iz(r.color,-.1)}}),t}return n}var $R=Math.round;function mA(n){var e;if(!n||n==="transparent")n="none";else if(typeof n=="string"&&n.indexOf("rgba")>-1){var t=jo(n);t&&(n="rgb("+t[0]+","+t[1]+","+t[2]+")",e=t[3])}return{color:n,opacity:e??1}}var WK=1e-4;function ag(n){return n<WK&&n>-WK}function cI(n){return $R(n*1e3)/1e3}function sz(n){return $R(n*1e4)/1e4}function RLe(n){return"matrix("+cI(n[0])+","+cI(n[1])+","+cI(n[2])+","+cI(n[3])+","+sz(n[4])+","+sz(n[5])+")"}var NLe={left:"start",right:"end",center:"middle",middle:"middle"};function kLe(n,e,t){return t==="top"?n+=e/2:t==="bottom"&&(n-=e/2),n}function OLe(n){return n&&(n.shadowBlur||n.shadowOffsetX||n.shadowOffsetY)}function BLe(n){var e=n.style,t=n.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),t[0],t[1]].join(",")}function mce(n){return n&&!!n.image}function FLe(n){return n&&!!n.svgElement}function qG(n){return mce(n)||FLe(n)}function gce(n){return n.type==="linear"}function vce(n){return n.type==="radial"}function yce(n){return n&&(n.type==="linear"||n.type==="radial")}function Jk(n){return"url(#"+n+")"}function xce(n){var e=n.getGlobalScale(),t=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(t)/Math.log(10)),1)}function _ce(n){var e=n.x||0,t=n.y||0,r=(n.rotation||0)*vL,i=dt(n.scaleX,1),a=dt(n.scaleY,1),s=n.skewX||0,o=n.skewY||0,l=[];return(e||t)&&l.push("translate("+e+"px,"+t+"px)"),r&&l.push("rotate("+r+")"),(i!==1||a!==1)&&l.push("scale("+i+","+a+")"),(s||o)&&l.push("skew("+$R(s*vL)+"deg, "+$R(o*vL)+"deg)"),l.join(" ")}var ULe=(function(){return bn.hasGlobalWindow&&St(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})(),oz=Array.prototype.slice;function Fd(n,e,t){return(e-n)*t+n}function kF(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=Fd(e[a],t[a],r);return n}function zLe(n,e,t,r){for(var i=e.length,a=i&&e[0].length,s=0;s<i;s++){n[s]||(n[s]=[]);for(var o=0;o<a;o++)n[s][o]=Fd(e[s][o],t[s][o],r)}return n}function hI(n,e,t,r){for(var i=e.length,a=0;a<i;a++)n[a]=e[a]+t[a]*r;return n}function XK(n,e,t,r){for(var i=e.length,a=i&&e[0].length,s=0;s<i;s++){n[s]||(n[s]=[]);for(var o=0;o<a;o++)n[s][o]=e[s][o]+t[s][o]*r}return n}function VLe(n,e){for(var t=n.length,r=e.length,i=t>r?e:n,a=Math.min(t,r),s=i[a-1]||{color:[0,0,0,0],offset:0},o=a;o<Math.max(t,r);o++)i.push({offset:s.offset,color:s.color.slice()})}function HLe(n,e,t){var r=n,i=e;if(!(!r.push||!i.push)){var a=r.length,s=i.length;if(a!==s){var o=a>s;if(o)r.length=s;else for(var l=a;l<s;l++)r.push(t===1?i[l]:oz.call(i[l]))}for(var u=r[0]&&r[0].length,l=0;l<r.length;l++)if(t===1)isNaN(r[l])&&(r[l]=i[l]);else for(var c=0;c<u;c++)isNaN(r[l][c])&&(r[l][c]=i[l][c])}}function FE(n){if(Fs(n)){var e=n.length;if(Fs(n[0])){for(var t=[],r=0;r<e;r++)t.push(oz.call(n[r]));return t}return oz.call(n)}return n}function bL(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function GLe(n){return Fs(n&&n[0])?2:1}var dI=0,SL=1,bce=2,$T=3,lz=4,uz=5,$K=6;function YK(n){return n===lz||n===uz}function fI(n){return n===SL||n===bce}var Kw=[0,0,0,0],jLe=(function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,r){this._needsSort=!0;var i=this.keyframes,a=i.length,s=!1,o=$K,l=t;if(Fs(t)){var u=GLe(t);o=u,(u===1&&!Ln(t[0])||u===2&&!Ln(t[0][0]))&&(s=!0)}else if(Ln(t)&&!Bs(t))o=dI;else if(Ke(t))if(!isNaN(+t))o=dI;else{var c=jo(t);c&&(l=c,o=$T)}else if(Yk(t)){var h=Pe({},l);h.colorStops=Ue(t.colorStops,function(f){return{offset:f.offset,color:jo(f.color)}}),gce(t)?o=lz:vce(t)&&(o=uz),l=h}a===0?this.valType=o:(o!==this.valType||o===$K)&&(s=!0),this.discrete=this.discrete||s;var d={time:e,value:l,rawValue:t,percent:0};return r&&(d.easing=r,d.easingFunc=St(r)?r:BE[r]||YG(r)),i.push(d),d},n.prototype.prepare=function(e,t){var r=this.keyframes;this._needsSort&&r.sort(function(m,g){return m.time-g.time});for(var i=this.valType,a=r.length,s=r[a-1],o=this.discrete,l=fI(i),u=YK(i),c=0;c<a;c++){var h=r[c],d=h.value,f=s.value;h.percent=h.time/e,o||(l&&c!==a-1?HLe(d,f,i):u&&VLe(d.colorStops,f.colorStops))}if(!o&&i!==uz&&t&&this.needsAnimate()&&t.needsAnimate()&&i===t.valType&&!t._finished){this._additiveTrack=t;for(var p=r[0].value,c=0;c<a;c++)i===dI?r[c].additiveValue=r[c].value-p:i===$T?r[c].additiveValue=hI([],r[c].value,p,-1):fI(i)&&(r[c].additiveValue=i===SL?hI([],r[c].value,p,-1):XK([],r[c].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r=this._additiveTrack!=null,i=r?"additiveValue":"value",a=this.valType,s=this.keyframes,o=s.length,l=this.propName,u=a===$T,c,h=this._lastFr,d=Math.min,f,p;if(o===1)f=p=s[0];else{if(t<0)c=0;else if(t<this._lastFrP){var m=d(h+1,o-1);for(c=m;c>=0&&!(s[c].percent<=t);c--);c=d(c,o-2)}else{for(c=h;c<o&&!(s[c].percent>t);c++);c=d(c-1,o-2)}p=s[c+1],f=s[c]}if(f&&p){this._lastFr=c,this._lastFrP=t;var g=p.percent-f.percent,v=g===0?1:d((t-f.percent)/g,1);p.easingFunc&&(v=p.easingFunc(v));var b=r?this._additiveValue:u?Kw:e[l];if((fI(a)||u)&&!b&&(b=this._additiveValue=[]),this.discrete)e[l]=v<1?f.rawValue:p.rawValue;else if(fI(a))a===SL?kF(b,f[i],p[i],v):zLe(b,f[i],p[i],v);else if(YK(a)){var S=f[i],w=p[i],E=a===lz;e[l]={type:E?"linear":"radial",x:Fd(S.x,w.x,v),y:Fd(S.y,w.y,v),colorStops:Ue(S.colorStops,function(M,P){var I=w.colorStops[P];return{offset:Fd(M.offset,I.offset,v),color:bL(kF([],M.color,I.color,v))}}),global:w.global},E?(e[l].x2=Fd(S.x2,w.x2,v),e[l].y2=Fd(S.y2,w.y2,v)):e[l].r=Fd(S.r,w.r,v)}else if(u)kF(b,f[i],p[i],v),r||(e[l]=bL(b));else{var T=Fd(f[i],p[i],v);r?this._additiveValue=T:e[l]=T}r&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,r=this.propName,i=this._additiveValue;t===dI?e[r]=e[r]+i:t===$T?(jo(e[r],Kw),hI(Kw,Kw,i,1),e[r]=bL(Kw)):t===SL?hI(e[r],e[r],i,1):t===bce&&XK(e[r],e[r],i,1)},n})(),KG=(function(){function n(e,t,r,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&i){HG("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=r}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,r){return this.whenWithKeys(e,t,An(t),r)},n.prototype.whenWithKeys=function(e,t,r,i){for(var a=this._tracks,s=0;s<r.length;s++){var o=r[s],l=a[o];if(!l){l=a[o]=new jLe(o);var u=void 0,c=this._getAdditiveTrack(o);if(c){var h=c.keyframes,d=h[h.length-1];u=d&&d.value,c.valType===$T&&u&&(u=bL(u))}else u=this._target[o];if(u==null)continue;e>0&&l.addKeyframe(0,FE(u),i),this._trackKeys.push(o)}l.addKeyframe(e,FE(t[o]),i)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,r=0;r<t;r++)e[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var r=0;r<t.length;r++)t[r].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,r=0;r<t.length;r++)e[t[r]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,r=this._additiveAnimators;if(r)for(var i=0;i<r.length;i++){var a=r[i].getTrack(e);a&&(t=a)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,r=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var s=this._trackKeys[a],o=this._tracks[s],l=this._getAdditiveTrack(s),u=o.keyframes,c=u.length;if(o.prepare(i,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var h=u[c-1];h&&(t._target[o.propName]=h.rawValue),o.setFinished()}else r.push(o)}if(r.length||this._force){var d=new MLe({life:i,loop:this._loop,delay:this._delay||0,onframe:function(f){t._started=2;var p=t._additiveAnimators;if(p){for(var m=!1,g=0;g<p.length;g++)if(p[g]._clip){m=!0;break}m||(t._additiveAnimators=null)}for(var g=0;g<r.length;g++)r[g].step(t._target,f);var v=t._onframeCbs;if(v)for(var g=0;g<v.length;g++)v[g](t._target,f)},ondestroy:function(){t._doneCallback()}});this._clip=d,this.animation&&this.animation.addClip(d),e&&d.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return Ue(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var r=this._tracks,i=this._trackKeys,a=0;a<e.length;a++){var s=r[e[a]];s&&!s.isFinished()&&(t?s.step(this._target,1):this._started===1&&s.step(this._target,0),s.setFinished())}for(var o=!0,a=0;a<i.length;a++)if(!r[i[a]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},n.prototype.saveTo=function(e,t,r){if(e){t=t||this._trackKeys;for(var i=0;i<t.length;i++){var a=t[i],s=this._tracks[a];if(!(!s||s.isFinished())){var o=s.keyframes,l=o[r?0:o.length-1];l&&(e[a]=FE(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||An(e);for(var r=0;r<t.length;r++){var i=t[r],a=this._tracks[i];if(a){var s=a.keyframes;if(s.length>1){var o=s.pop();a.addKeyframe(o.time,e[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},n})();function tb(){return new Date().getTime()}var WLe=(function(n){Hr(e,n);function e(t){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,t=t||{},r.stage=t.stage||{},r}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var r=t.getClip();r&&this.addClip(r)},e.prototype.removeClip=function(t){if(t.animation){var r=t.prev,i=t.next;r?r.next=i:this._head=i,i?i.prev=r:this._tail=r,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var r=t.getClip();r&&this.removeClip(r),t.animation=null},e.prototype.update=function(t){for(var r=tb()-this._pausedTime,i=r-this._time,a=this._head;a;){var s=a.next,o=a.step(r,i);o&&(a.ondestroy(),this.removeClip(a)),a=s}this._time=r,t||(this.trigger("frame",i),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function r(){t._running&&(HR(r),!t._paused&&t.update())}HR(r)},e.prototype.start=function(){this._running||(this._time=tb(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=tb(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=tb()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var r=t.next;t.prev=t.next=t.animation=null,t=r}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,r){r=r||{},this.start();var i=new KG(t,r.loop);return this.addAnimator(i),i},e})(Uu),XLe=300,OF=bn.domSupported,BF=(function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},r=Ue(n,function(i){var a=i.replace("mouse","pointer");return t.hasOwnProperty(a)?a:i});return{mouse:n,touch:e,pointer:r}})(),qK={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},KK=!1;function cz(n){var e=n.pointerType;return e==="pen"||e==="touch"}function $Le(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function FF(n){n&&(n.zrByTouch=!0)}function YLe(n,e){return eu(n.dom,new qLe(n,e),!0)}function Sce(n,e){for(var t=e,r=!1;t&&t.nodeType!==9&&!(r=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return r}var qLe=(function(){function n(e,t){this.stopPropagation=ki,this.stopImmediatePropagation=ki,this.preventDefault=ki,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n})(),nc={mousedown:function(n){n=eu(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=eu(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=eu(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=eu(this.dom,n);var e=n.toElement||n.relatedTarget;Sce(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){KK=!0,n=eu(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){KK||(n=eu(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=eu(this.dom,n),FF(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),nc.mousemove.call(this,n),nc.mousedown.call(this,n)},touchmove:function(n){n=eu(this.dom,n),FF(n),this.handler.processGesture(n,"change"),nc.mousemove.call(this,n)},touchend:function(n){n=eu(this.dom,n),FF(n),this.handler.processGesture(n,"end"),nc.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<XLe&&nc.click.call(this,n)},pointerdown:function(n){nc.mousedown.call(this,n)},pointermove:function(n){cz(n)||nc.mousemove.call(this,n)},pointerup:function(n){nc.mouseup.call(this,n)},pointerout:function(n){cz(n)||nc.mouseout.call(this,n)}};W(["click","dblclick","contextmenu"],function(n){nc[n]=function(e){e=eu(this.dom,e),this.trigger(n,e)}});var hz={pointermove:function(n){cz(n)||hz.mousemove.call(this,n)},pointerup:function(n){hz.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function KLe(n,e){var t=e.domHandlers;bn.pointerEventsSupported?W(BF.pointer,function(r){wL(e,r,function(i){t[r].call(n,i)})}):(bn.touchEventsSupported&&W(BF.touch,function(r){wL(e,r,function(i){t[r].call(n,i),$Le(e)})}),W(BF.mouse,function(r){wL(e,r,function(i){i=XG(i),e.touching||t[r].call(n,i)})}))}function ZLe(n,e){bn.pointerEventsSupported?W(qK.pointer,t):bn.touchEventsSupported||W(qK.mouse,t);function t(r){function i(a){a=XG(a),Sce(n,a.target)||(a=YLe(n,a),e.domHandlers[r].call(n,a))}wL(e,r,i,{capture:!0})}}function wL(n,e,t,r){n.mounted[e]=t,n.listenerOpts[e]=r,QU(n.domTarget,e,t,r)}function UF(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&lLe(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var ZK=(function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n})(),QLe=(function(n){Hr(e,n);function e(t,r){var i=n.call(this)||this;return i.__pointerCapturing=!1,i.dom=t,i.painterRoot=r,i._localHandlerScope=new ZK(t,nc),OF&&(i._globalHandlerScope=new ZK(document,hz)),KLe(i,i._localHandlerScope),i}return e.prototype.dispose=function(){UF(this._localHandlerScope),OF&&UF(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,OF&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var r=this._globalHandlerScope;t?ZLe(this,r):UF(r)}},e})(Uu),wce=1;bn.hasGlobalWindow&&(wce=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var YR=wce,dz=.4,fz="#333",pz="#ccc",JLe="#eee",QK=Zk,JK=5e-5;function ov(n){return n>JK||n<-JK}var lv=[],Wx=[],zF=Ya(),VF=Math.abs,If=(function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return ov(this.rotation)||ov(this.x)||ov(this.y)||ov(this.scaleX-1)||ov(this.scaleY-1)||ov(this.skewX)||ov(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),r=this.transform;if(!(t||e)){r&&(QK(r),this.invTransform=null);return}r=r||Ya(),t?this.getLocalTransform(r):QK(r),e&&(t?Wh(r,e,r):Qk(r,e)),this.transform=r,this._resolveGlobalScaleRatio(r)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(lv);var r=lv[0]<0?-1:1,i=lv[1]<0?-1:1,a=((lv[0]-r)*t+r)/lv[0]||0,s=((lv[1]-i)*t+i)/lv[1]||0;e[0]*=a,e[1]*=a,e[2]*=s,e[3]*=s}this.invTransform=this.invTransform||Ya(),Ic(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],r=e[2]*e[2]+e[3]*e[3],i=Math.atan2(e[1],e[0]),a=Math.PI/2+i-Math.atan2(e[3],e[2]);r=Math.sqrt(r)*Math.cos(a),t=Math.sqrt(t),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(e.invTransform=e.invTransform||Ya(),Wh(Wx,e.invTransform,t),t=Wx);var r=this.originX,i=this.originY;(r||i)&&(zF[4]=r,zF[5]=i,Wh(Wx,t,zF),Wx[4]-=r,Wx[5]-=i,t=Wx),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&Oi(r,r,i),r},n.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&Oi(r,r,i),r},n.prototype.getLineScale=function(){var e=this.transform;return e&&VF(e[0]-1)>1e-10&&VF(e[3]-1)>1e-10?Math.sqrt(VF(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){qR(this,e)},n.getLocalTransform=function(e,t){t=t||[];var r=e.originX||0,i=e.originY||0,a=e.scaleX,s=e.scaleY,o=e.anchorX,l=e.anchorY,u=e.rotation||0,c=e.x,h=e.y,d=e.skewX?Math.tan(e.skewX):0,f=e.skewY?Math.tan(-e.skewY):0;if(r||i||o||l){var p=r+o,m=i+l;t[4]=-p*a-d*m*s,t[5]=-m*s-f*p*a}else t[4]=t[5]=0;return t[0]=a,t[3]=s,t[1]=f*a,t[2]=d*s,u&&Rg(t,t,u),t[4]+=r+c,t[5]+=i+h,t},n.initDefaultProps=(function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0})(),n})(),nd=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function qR(n,e){for(var t=0;t<nd.length;t++){var r=nd[t];n[r]=e[r]}}function $h(n){pI||(pI=new eS(100)),n=n||Wf;var e=pI.get(n);return e||(e={font:n,strWidthCache:new eS(500),asciiWidthMap:null,asciiWidthMapTried:!1,stWideCharWidth:Dc.measureText("",n).width,asciiCharWidth:Dc.measureText("a",n).width},pI.put(n,e)),e}var pI;function eRe(n){if(!(HF>=eZ)){n=n||Wf;for(var e=[],t=+new Date,r=0;r<=127;r++)e[r]=Dc.measureText(String.fromCharCode(r),n).width;var i=+new Date-t;return i>16?HF=eZ:i>2&&HF++,e}}var HF=0,eZ=5;function Tce(n,e){return n.asciiWidthMapTried||(n.asciiWidthMap=eRe(n.font),n.asciiWidthMapTried=!0),0<=e&&e<=127?n.asciiWidthMap!=null?n.asciiWidthMap[e]:n.asciiCharWidth:n.stWideCharWidth}function Yh(n,e){var t=n.strWidthCache,r=t.get(e);return r==null&&(r=Dc.measureText(e,n.font).width,t.put(e,r)),r}function tZ(n,e,t,r){var i=Yh($h(e),n),a=d2(e),s=tS(0,i,t),o=Dy(0,a,r),l=new Rt(s,o,i,a);return l}function e3(n,e,t,r){var i=((n||"")+"").split(`
`),a=i.length;if(a===1)return tZ(i[0],e,t,r);for(var s=new Rt(0,0,0,0),o=0;o<i.length;o++){var l=tZ(i[o],e,t,r);o===0?s.copy(l):s.union(l)}return s}function tS(n,e,t,r){return t==="right"?r?n+=e:n-=e:t==="center"&&(r?n+=e/2:n-=e/2),n}function Dy(n,e,t,r){return t==="middle"?r?n+=e/2:n-=e/2:t==="bottom"&&(r?n+=e:n-=e),n}function d2(n){return $h(n).stWideCharWidth}function Pc(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function KR(n,e,t){var r=e.position||"inside",i=e.distance!=null?e.distance:5,a=t.height,s=t.width,o=a/2,l=t.x,u=t.y,c="left",h="top";if(r instanceof Array)l+=Pc(r[0],t.width),u+=Pc(r[1],t.height),c=null,h=null;else switch(r){case"left":l-=i,u+=o,c="right",h="middle";break;case"right":l+=i+s,u+=o,h="middle";break;case"top":l+=s/2,u-=i,c="center",h="bottom";break;case"bottom":l+=s/2,u+=a+i,c="center";break;case"inside":l+=s/2,u+=o,c="center",h="middle";break;case"insideLeft":l+=i,u+=o,h="middle";break;case"insideRight":l+=s-i,u+=o,c="right",h="middle";break;case"insideTop":l+=s/2,u+=i,c="center";break;case"insideBottom":l+=s/2,u+=a-i,c="center",h="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=s-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=a-i,h="bottom";break;case"insideBottomRight":l+=s-i,u+=a-i,c="right",h="bottom";break}return n=n||{},n.x=l,n.y=u,n.align=c,n.verticalAlign=h,n}var GF="__zr_normal__",jF=nd.concat(["ignore"]),tRe=ed(nd,function(n,e){return n[e]=!0,n},{ignore:!1}),Xx={},nRe=new Rt(0,0,0,0),mI=[],t3=(function(){function n(e){this.id=Zue(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,r){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var r=this.textConfig,i=r.local,a=t.innerTransformable,s=void 0,o=void 0,l=!1;a.parent=i?this:null;var u=!1;a.copyTransform(t);var c=r.position!=null,h=r.autoOverflowArea,d=void 0;if((h||c)&&(d=nRe,r.layoutRect?d.copy(r.layoutRect):d.copy(this.getBoundingRect()),i||d.applyTransform(this.transform)),c){this.calculateTextPosition?this.calculateTextPosition(Xx,r,d):KR(Xx,r,d),a.x=Xx.x,a.y=Xx.y,s=Xx.align,o=Xx.verticalAlign;var f=r.origin;if(f&&r.rotation!=null){var p=void 0,m=void 0;f==="center"?(p=d.width*.5,m=d.height*.5):(p=Pc(f[0],d.width),m=Pc(f[1],d.height)),u=!0,a.originX=-a.x+p+(i?0:d.x),a.originY=-a.y+m+(i?0:d.y)}}r.rotation!=null&&(a.rotation=r.rotation);var g=r.offset;g&&(a.x+=g[0],a.y+=g[1],u||(a.originX=-g[0],a.originY=-g[1]));var v=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={});if(h){var b=v.overflowRect=v.overflowRect||new Rt(0,0,0,0);a.getLocalTransform(mI),Ic(mI,mI),Rt.copy(b,d),b.applyTransform(mI)}else v.overflowRect=null;var S=r.inside==null?typeof r.position=="string"&&r.position.indexOf("inside")>=0:r.inside,w=void 0,E=void 0,T=void 0;S&&this.canBeInsideText()?(w=r.insideFill,E=r.insideStroke,(w==null||w==="auto")&&(w=this.getInsideTextFill()),(E==null||E==="auto")&&(E=this.getInsideTextStroke(w),T=!0)):(w=r.outsideFill,E=r.outsideStroke,(w==null||w==="auto")&&(w=this.getOutsideFill()),(E==null||E==="auto")&&(E=this.getOutsideStroke(w),T=!0)),w=w||"#000",(w!==v.fill||E!==v.stroke||T!==v.autoStroke||s!==v.align||o!==v.verticalAlign)&&(l=!0,v.fill=w,v.stroke=E,v.autoStroke=T,v.align=s,v.verticalAlign=o,t.setDefaultTextStyle(v)),t.__dirty|=Cl,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?pz:fz},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),r=typeof t=="string"&&jo(t);r||(r=[255,255,255,1]);for(var i=r[3],a=this.__zr.isDarkMode(),s=0;s<3;s++)r[s]=r[s]*i+(a?0:255)*(1-i);return r[3]=1,Xh(r,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Pe(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Lt(e))for(var r=e,i=An(r),a=0;a<i.length;a++){var s=i[a];this.attrKV(s,e[s])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,r=0;r<this.animators.length;r++){var i=this.animators[r],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==GF)){var s=i.targetName,o=s?t[s]:t;i.saveTo(o)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,jF)},n.prototype._savePrimaryToNormal=function(e,t,r){for(var i=0;i<r.length;i++){var a=r[i];e[a]!=null&&!(a in t)&&(t[a]=this[a])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(GF,!1,e)},n.prototype.useState=function(e,t,r,i){var a=e===GF,s=this.hasState();if(!(!s&&a)){var o=this.currentStates,l=this.stateTransition;if(!(Jt(o,e)>=0&&(t||o.length===1))){var u;if(this.stateProxy&&!a&&(u=this.stateProxy(e)),u||(u=this.states&&this.states[e]),!u&&!a){HG("State "+e+" not exists.");return}a||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,u,this._normalState,t,!r&&!this.__inHover&&l&&l.duration>0,l);var h=this._textContent,d=this._textGuide;return h&&h.useState(e,t,r,c),d&&d.useState(e,t,r,c),a?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Cl),u}}},n.prototype.useStates=function(e,t,r){if(!e.length)this.clearStates();else{var i=[],a=this.currentStates,s=e.length,o=s===a.length;if(o){for(var l=0;l<s;l++)if(e[l]!==a[l]){o=!1;break}}if(o)return;for(var l=0;l<s;l++){var u=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,e)),c||(c=this.states[u]),c&&i.push(c)}var h=i[s-1],d=!!(h&&h.hoverLayer||r);d&&this._toggleHoverLayerFlag(!0);var f=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(f),this._applyStateObj(e.join(","),f,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,g=this._textGuide;m&&m.useStates(e,t,d),g&&g.useStates(e,t,d),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Cl)}},n.prototype.isSilent=function(){for(var e=this;e;){if(e.silent)return!0;var t=e.__hostTarget;e=t?e.ignoreHostSilent?null:t:e.parent}return!1},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=Jt(this.currentStates,e);if(t>=0){var r=this.currentStates.slice();r.splice(t,1),this.useStates(r)}},n.prototype.replaceState=function(e,t,r){var i=this.currentStates.slice(),a=Jt(i,e),s=Jt(i,t)>=0;a>=0?s?i.splice(a,1):i[a]=t:r&&!s&&i.push(t),this.useStates(i)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},r,i=0;i<e.length;i++){var a=e[i];Pe(t,a),a.textConfig&&(r=r||{},Pe(r,a.textConfig))}return r&&(t.textConfig=r),t},n.prototype._applyStateObj=function(e,t,r,i,a,s){var o=!(t&&i);t&&t.textConfig?(this.textConfig=Pe({},i?this.textConfig:r.textConfig),Pe(this.textConfig,t.textConfig)):o&&r.textConfig&&(this.textConfig=r.textConfig);for(var l={},u=!1,c=0;c<jF.length;c++){var h=jF[c],d=a&&tRe[h];t&&t[h]!=null?d?(u=!0,l[h]=t[h]):this[h]=t[h]:o&&r[h]!=null&&(d?(u=!0,l[h]=r[h]):this[h]=r[h])}if(!a)for(var c=0;c<this.animators.length;c++){var f=this.animators[c],p=f.targetName;f.getLoop()||f.__changeFinalValue(p?(t||r)[p]:t||r)}u&&this._transitionState(e,l,s)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new If,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Pe(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=Cl;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,r=this._textGuide;t&&(t.__inHover=e),r&&(r.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.addAnimator(t[r]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var r=0;r<t.length;r++)e.animation.removeAnimator(t[r]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,r){var i=e?this[e]:this,a=new KG(i,t,r);return e&&(a.targetName=e),this.addAnimator(a,e),a},n.prototype.addAnimator=function(e,t){var r=this.__zr,i=this;e.during(function(){i.updateDuringAnimation(t)}).done(function(){var a=i.animators,s=Jt(a,e);s>=0&&a.splice(s,1)}),this.animators.push(e),r&&r.animation.addAnimator(e),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var r=this.animators,i=r.length,a=[],s=0;s<i;s++){var o=r[s];!e||e===o.scope?o.stop(t):a.push(o)}return this.animators=a,this},n.prototype.animateTo=function(e,t,r){WF(this,e,t,r)},n.prototype.animateFrom=function(e,t,r){WF(this,e,t,r,!0)},n.prototype._transitionState=function(e,t,r,i){for(var a=WF(this,t,r,i),s=0;s<a.length;s++)a[s].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=(function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.ignoreHostSilent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=Cl;function t(r,i,a,s){Object.defineProperty(e,r,{get:function(){if(!this[i]){var l=this[i]=[];o(this,l)}return this[i]},set:function(l){this[a]=l[0],this[s]=l[1],this[i]=l,o(this,l)}});function o(l,u){Object.defineProperty(u,0,{get:function(){return l[a]},set:function(c){l[a]=c}}),Object.defineProperty(u,1,{get:function(){return l[s]},set:function(c){l[s]=c}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))})(),n})();Zi(t3,Uu);Zi(t3,If);function WF(n,e,t,r,i){t=t||{};var a=[];Ece(n,"",n,e,t,r,a,i);var s=a.length,o=!1,l=t.done,u=t.aborted,c=function(){o=!0,s--,s<=0&&(o?l&&l():u&&u())},h=function(){s--,s<=0&&(o?l&&l():u&&u())};s||l&&l(),a.length>0&&t.during&&a[0].during(function(p,m){t.during(m)});for(var d=0;d<a.length;d++){var f=a[d];c&&f.done(c),h&&f.aborted(h),t.force&&f.duration(t.duration),f.start(t.easing)}return a}function XF(n,e,t){for(var r=0;r<t;r++)n[r]=e[r]}function rRe(n){return Fs(n[0])}function iRe(n,e,t){if(Fs(e[t]))if(Fs(n[t])||(n[t]=[]),Xo(e[t])){var r=e[t].length;n[t].length!==r&&(n[t]=new e[t].constructor(r),XF(n[t],e[t],r))}else{var i=e[t],a=n[t],s=i.length;if(rRe(i))for(var o=i[0].length,l=0;l<s;l++)a[l]?XF(a[l],i[l],o):a[l]=Array.prototype.slice.call(i[l]);else XF(a,i,s);a.length=i.length}else n[t]=e[t]}function aRe(n,e){return n===e||Fs(n)&&Fs(e)&&sRe(n,e)}function sRe(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function Ece(n,e,t,r,i,a,s,o){for(var l=An(r),u=i.duration,c=i.delay,h=i.additive,d=i.setToFinal,f=!Lt(a),p=n.animators,m=[],g=0;g<l.length;g++){var v=l[g],b=r[v];if(b!=null&&t[v]!=null&&(f||a[v]))if(Lt(b)&&!Fs(b)&&!Yk(b)){if(e){o||(t[v]=b,n.updateDuringAnimation(e));continue}Ece(n,v,t[v],b,i,a&&a[v],s,o)}else m.push(v);else o||(t[v]=b,n.updateDuringAnimation(e),m.push(v))}var S=m.length;if(!h&&S)for(var w=0;w<p.length;w++){var E=p[w];if(E.targetName===e){var T=E.stopTracks(m);if(T){var M=Jt(p,E);p.splice(M,1)}}}if(i.force||(m=er(m,function(R){return!aRe(r[R],t[R])}),S=m.length),S>0||i.force&&!s.length){var P=void 0,I=void 0,D=void 0;if(o){I={},d&&(P={});for(var w=0;w<S;w++){var v=m[w];I[v]=t[v],d?P[v]=r[v]:t[v]=r[v]}}else if(d){D={};for(var w=0;w<S;w++){var v=m[w];D[v]=FE(t[v]),iRe(t,r,v)}}var E=new KG(t,!1,!1,h?er(p,function(B){return B.targetName===e}):null);E.targetName=e,i.scope&&(E.scope=i.scope),d&&P&&E.whenWithKeys(0,P,m),D&&E.whenWithKeys(0,D,m),E.whenWithKeys(u??500,o?I:r,m).delay(c||0),n.addAnimator(E,e),s.push(E)}}var wt=(function(n){Hr(e,n);function e(t){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var r=this._children,i=0;i<r.length;i++)if(r[i].name===t)return r[i]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,r){if(t&&t!==this&&t.parent!==this&&r&&r.parent===this){var i=this._children,a=i.indexOf(r);a>=0&&(i.splice(a,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,r){var i=Jt(this._children,t);return i>=0&&this.replaceAt(r,i),this},e.prototype.replaceAt=function(t,r){var i=this._children,a=i[r];if(t&&t!==this&&t.parent!==this&&t!==a){i[r]=t,a.parent=null;var s=this.__zr;s&&a.removeSelfFromZr(s),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var r=this.__zr;r&&r!==t.__zr&&t.addSelfToZr(r),r&&r.refresh()},e.prototype.remove=function(t){var r=this.__zr,i=this._children,a=Jt(i,t);return a<0?this:(i.splice(a,1),t.parent=null,r&&t.removeSelfFromZr(r),r&&r.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,r=this.__zr,i=0;i<t.length;i++){var a=t[i];r&&a.removeSelfFromZr(r),a.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,r){for(var i=this._children,a=0;a<i.length;a++){var s=i[a];t.call(r,s,a)}return this},e.prototype.traverse=function(t,r){for(var i=0;i<this._children.length;i++){var a=this._children[i],s=t.call(r,a);a.isGroup&&!s&&a.traverse(t,r)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++){var i=this._children[r];i.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var r=new Rt(0,0,0,0),i=t||this._children,a=[],s=null,o=0;o<i.length;o++){var l=i[o];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(a);c?(Rt.applyTransform(r,u,c),s=s||r.clone(),s.union(r)):(s=s||u.clone(),s.union(u))}}return s||r},e})(t3);wt.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var TL={},Ace={};function oRe(n){delete Ace[n]}function lRe(n){if(!n)return!1;if(typeof n=="string")return XR(n,1)<dz;if(n.colorStops){for(var e=n.colorStops,t=0,r=e.length,i=0;i<r;i++)t+=XR(e[i].color,1);return t/=r,t<dz}return!1}var uRe=(function(){function n(e,t,r){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=t,this.id=e;var a=new wLe,s=r.renderer||"canvas";TL[s]||(s=An(TL)[0]),r.useDirtyRect=r.useDirtyRect==null?!1:r.useDirtyRect;var o=new TL[s](t,a,r,e),l=r.ssr||o.ssrOnly;this.storage=a,this.painter=o;var u=!bn.node&&!bn.worker&&!l?new QLe(o.getViewportRoot(),o.root):null,c=r.useCoarsePointer,h=c==null||c==="auto"?bn.touchEventsSupported:!!c,d=44,f;h&&(f=dt(r.pointerSize,d)),this.handler=new ice(a,o,u,o.root,f),this.animation=new WLe({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){this._disposed||!e||(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){this._disposed||!e||(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this._disposed||(this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh())},n.prototype.setBackgroundColor=function(e){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=lRe(e))},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){this._disposed||(e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},n.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},n.prototype.flush=function(){this._disposed||this._flush(!1)},n.prototype._flush=function(e){var t,r=tb();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var i=tb();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},n.prototype.resize=function(e){this._disposed||(e=e||{},this.painter.resize(e.width,e.height),this.handler.resize())},n.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},n.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},n.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this._disposed||this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){if(!this._disposed)return this.handler.findHover(e,t)},n.prototype.on=function(e,t,r){return this._disposed||this.handler.on(e,t,r),this},n.prototype.off=function(e,t){this._disposed||this.handler.off(e,t)},n.prototype.trigger=function(e,t){this._disposed||this.handler.trigger(e,t)},n.prototype.clear=function(){if(!this._disposed){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof wt&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},n.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,oRe(this.id))},n})();function nZ(n,e){var t=new uRe(Zue(),n,e);return Ace[t.id]=t,t}function cRe(n,e){TL[n]=e}var mz;function hRe(n){if(typeof mz=="function")return mz(n)}function dRe(n){mz=n}var rZ=1e-4,Cce=20;function fRe(n){return n.replace(/^\s+|\s+$/g,"")}var Rl=Math.min,Ni=Math.max,Bh=Math.abs;function Jn(n,e,t,r){var i=e[0],a=e[1],s=t[0],o=t[1],l=a-i,u=o-s;if(l===0)return u===0?s:(s+o)/2;if(r)if(l>0){if(n<=i)return s;if(n>=a)return o}else{if(n>=i)return s;if(n<=a)return o}else{if(n===i)return s;if(n===a)return o}return(n-i)/l*u+s}var Xe=pRe;function pRe(n,e,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return ZR(n,e,t)}function ZR(n,e,t){return Ke(n)?fRe(n).match(/%$/)?parseFloat(n)/100*e+(t||0):parseFloat(n):n==null?NaN:+n}function Wi(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),Cce),n=(+n).toFixed(e),t?n:+n}function Du(n){return n.sort(function(e,t){return e-t}),n}function Fh(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return mRe(n)}function mRe(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),r=t>0?+e.slice(t+1):0,i=t>0?t:e.length,a=e.indexOf("."),s=a<0?0:i-1-a;return Math.max(0,s-r)}function Mce(n,e){var t=Math.log,r=Math.LN10,i=Math.floor(t(n[1]-n[0])/r),a=Math.round(t(Bh(e[1]-e[0]))/r),s=Math.min(Math.max(-i+a,0),20);return isFinite(s)?s:20}function gRe(n,e){var t=ed(n,function(f,p){return f+(isNaN(p)?0:p)},0);if(t===0)return[];for(var r=Math.pow(10,e),i=Ue(n,function(f){return(isNaN(f)?0:f)/t*r*100}),a=r*100,s=Ue(i,function(f){return Math.floor(f)}),o=ed(s,function(f,p){return f+p},0),l=Ue(i,function(f,p){return f-s[p]});o<a;){for(var u=Number.NEGATIVE_INFINITY,c=null,h=0,d=l.length;h<d;++h)l[h]>u&&(u=l[h],c=h);++s[c],l[c]=0,++o}return Ue(s,function(f){return f/r})}function vRe(n,e){var t=Math.max(Fh(n),Fh(e)),r=n+e;return t>Cce?r:Wi(r,t)}var iZ=9007199254740991;function Dce(n){var e=Math.PI*2;return(n%e+e)%e}function gA(n){return n>-rZ&&n<rZ}var yRe=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function ix(n){if(n instanceof Date)return n;if(Ke(n)){var e=yRe.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function xRe(n){return Math.pow(10,ZG(n))}function ZG(n){if(n===0)return 0;var e=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,e)>=10&&e++,e}function Ice(n,e){var t=ZG(n),r=Math.pow(10,t),i=n/r,a;return i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10,n=a*r,t>=-20?+n.toFixed(t<0?-t:0):n}function $F(n,e){var t=(n.length-1)*e+1,r=Math.floor(t),i=+n[r-1],a=t-r;return a?i+a*(n[r]-i):i}function aZ(n){n.sort(function(l,u){return o(l,u,0)?-1:1});for(var e=-1/0,t=1,r=0;r<n.length;){for(var i=n[r].interval,a=n[r].close,s=0;s<2;s++)i[s]<=e&&(i[s]=e,a[s]=s?1:1-t),e=i[s],t=a[s];i[0]===i[1]&&a[0]*a[1]!==1?n.splice(r,1):r++}return n;function o(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&o(l,u,1))}}function $f(n){var e=parseFloat(n);return e==n&&(e!==0||!Ke(n)||n.indexOf("x")<=0)?e:NaN}function Pce(n){return!isNaN($f(n))}function Lce(){return Math.round(Math.random()*9)}function Rce(n,e){return e===0?n:Rce(e,n%e)}function sZ(n,e){return n==null?e:e==null?n:n*e/Rce(n,e)}var _Re="[ECharts] ",bRe=typeof console<"u"&&console.warn&&console.log;function SRe(n,e,t){bRe&&console[n](_Re+e)}function Nce(n,e){SRe("error",n)}function Qn(n){throw new Error(n)}function oZ(n,e,t){return(e-n)*t+n}var kce="series\0",Oce="\0_ec_\0";function br(n){return n instanceof Array?n:n==null?[]:[n]}function Uy(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var r=0,i=t.length;r<i;r++){var a=t[r];!n.emphasis[e].hasOwnProperty(a)&&n[e].hasOwnProperty(a)&&(n.emphasis[e][a]=n[e][a])}}}var lZ=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function FS(n){return Lt(n)&&!Be(n)&&!(n instanceof Date)?n.value:n}function wRe(n){return Lt(n)&&!(n instanceof Array)}function Bce(n,e,t){var r=t==="normalMerge",i=t==="replaceMerge",a=t==="replaceAll";n=n||[],e=(e||[]).slice();var s=ct();W(e,function(l,u){if(!Lt(l)){e[u]=null;return}});var o=TRe(n,s,t);return(r||i)&&ERe(o,n,s,e),r&&ARe(o,e),r||i?CRe(o,e,i):a&&MRe(o,e),DRe(o),o}function TRe(n,e,t){var r=[];if(t==="replaceAll")return r;for(var i=0;i<n.length;i++){var a=n[i];a&&a.id!=null&&e.set(a.id,i),r.push({existing:t==="replaceMerge"||vA(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return r}function ERe(n,e,t,r){W(r,function(i,a){if(!(!i||i.id==null)){var s=UE(i.id),o=t.get(s);if(o!=null){var l=n[o];Us(!l.newOption,'Duplicated option on id "'+s+'".'),l.newOption=i,l.existing=e[o],r[a]=null}}})}function ARe(n,e){W(e,function(t,r){if(!(!t||t.name==null))for(var i=0;i<n.length;i++){var a=n[i].existing;if(!n[i].newOption&&a&&(a.id==null||t.id==null)&&!vA(t)&&!vA(a)&&Fce("name",a,t)){n[i].newOption=t,e[r]=null;return}}})}function CRe(n,e,t){W(e,function(r){if(r){for(var i,a=0;(i=n[a])&&(i.newOption||vA(i.existing)||i.existing&&r.id!=null&&!Fce("id",r,i.existing));)a++;i?(i.newOption=r,i.brandNew=t):n.push({newOption:r,brandNew:t,existing:null,keyInfo:null}),a++}})}function MRe(n,e){W(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function DRe(n){var e=ct();W(n,function(t){var r=t.existing;r&&e.set(r.id,t)}),W(n,function(t){var r=t.newOption;Us(!r||r.id==null||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&r.id!=null&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),W(n,function(t,r){var i=t.existing,a=t.newOption,s=t.keyInfo;if(Lt(a)){if(s.name=a.name!=null?UE(a.name):i?i.name:kce+r,i)s.id=UE(i.id);else if(a.id!=null)s.id=UE(a.id);else{var o=0;do s.id="\0"+s.name+"\0"+o++;while(e.get(s.id))}e.set(s.id,t)}})}function Fce(n,e,t){var r=oa(e[n],null),i=oa(t[n],null);return r!=null&&i!=null&&r===i}function UE(n){return oa(n,"")}function oa(n,e){return n==null?e:Ke(n)?n:Ln(n)||jU(n)?n+"":e}function QG(n){var e=n.name;return!!(e&&e.indexOf(kce))}function vA(n){return n&&n.id!=null&&UE(n.id).indexOf(Oce)===0}function IRe(n){return Oce+n}function PRe(n,e,t){W(n,function(r){var i=r.newOption;Lt(i)&&(r.keyInfo.mainType=e,r.keyInfo.subType=LRe(e,i,r.existing,t))})}function LRe(n,e,t,r){var i=e.type?e.type:t?t.subType:r.determineSubType(n,e);return i}function RRe(n,e){var t={},r={};return i(n||[],t),i(e||[],r,t),[a(t),a(r)];function i(s,o,l){for(var u=0,c=s.length;u<c;u++){var h=oa(s[u].seriesId,null);if(h==null)return;for(var d=br(s[u].dataIndex),f=l&&l[h],p=0,m=d.length;p<m;p++){var g=d[p];f&&f[g]?f[g]=null:(o[h]||(o[h]={}))[g]=1}}}function a(s,o){var l=[];for(var u in s)if(s.hasOwnProperty(u)&&s[u]!=null)if(o)l.push(+u);else{var c=a(s[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function zy(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return Be(e.dataIndex)?Ue(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return Be(e.name)?Ue(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function mn(){var n="__ec_inner_"+NRe++;return function(e){return e[n]||(e[n]={})}}var NRe=Lce();function yb(n,e,t){var r=JG(e,t),i=r.mainTypeSpecified,a=r.queryOptionMap,s=r.others,o=s,l=t?t.defaultMainType:null;return!i&&l&&a.set(l,{}),a.each(function(u,c){var h=US(n,c,u,{useDefault:l===c,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[c+"Models"]=h.models,o[c+"Model"]=h.models[0]}),o}function JG(n,e){var t;if(Ke(n)){var r={};r[n+"Index"]=0,t=r}else t=n;var i=ct(),a={},s=!1;return W(t,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){a[l]=o;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],h=(u[2]||"").toLowerCase();if(!(!c||!h||e&&e.includeMainTypes&&Jt(e.includeMainTypes,c)<0)){s=s||!!c;var d=i.get(c)||i.set(c,{});d[h]=o}}),{mainTypeSpecified:s,queryOptionMap:i,others:a}}var fi={useDefault:!0,enableAll:!1,enableNone:!1},kRe={useDefault:!1,enableAll:!0,enableNone:!0};function US(n,e,t,r){r=r||fi;var i=t.index,a=t.id,s=t.name,o={models:null,specified:i!=null||a!=null||s!=null};if(!o.specified){var l=void 0;return o.models=r.useDefault&&(l=n.getComponent(e))?[l]:[],o}if(i==="none"||i===!1){if(r.enableNone)return o.models=[],o;i=-1}return i==="all"&&(r.enableAll?i=a=s=null:i=-1),o.models=n.queryComponents({mainType:e,index:i,id:a,name:s}),o}function Uce(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function ORe(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function BRe(n){return n==="auto"?bn.domSupported?"html":"richText":n||"html"}function gz(n,e){var t=ct(),r=[];return W(n,function(i){var a=e(i);(t.get(a)||(r.push(a),t.set(a,[]))).push(i)}),{keys:r,buckets:t}}function zce(n,e,t,r,i){var a=e==null||e==="auto";if(r==null)return r;if(Ln(r)){var s=oZ(t||0,r,i);return Wi(s,a?Math.max(Fh(t||0),Fh(r)):e)}else{if(Ke(r))return i<1?t:r;for(var o=[],l=t,u=r,c=Math.max(l?l.length:0,u.length),h=0;h<c;++h){var d=n.getDimensionInfo(h);if(d&&d.type==="ordinal")o[h]=(i<1&&l?l:u)[h];else{var f=l&&l[h]?l[h]:0,p=u[h],s=oZ(f,p,i);o[h]=Wi(s,a?Math.max(Fh(f),Fh(p)):e)}}return o}}var pg=(function(){function n(){}return n.prototype.reset=function(e,t,r,i){return this._list=e,this._step=i=i||1,this._idx=t,this._end=r??(i>0?e.length:0),this.item=null,this.key=NaN,this},n.prototype.next=function(){return(this._step>0?this._idx<this._end:this._idx>=this._end)?(this.item=this._list[this._idx],this.key=this._idx=this._idx+this._step,!0):!1},n})();function YF(n){n.option=n.parentModel=n.ecModel=null}var FRe=".",uv="___EC__COMPONENT__CONTAINER___",Vce="___EC__EXTENDED_CLASS___";function Uh(n){var e={main:"",sub:""};if(n){var t=n.split(FRe);e.main=t[0]||"",e.sub=t[1]||""}return e}function URe(n){Us(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function zRe(n){return!!(n&&n[Vce])}function ej(n,e){n.$constructor=n,n.extend=function(t){var r=this,i;return VRe(r)?i=(function(a){be(s,a);function s(){return a.apply(this,arguments)||this}return s})(r):(i=function(){(t.$constructor||r).apply(this,arguments)},HPe(i,this)),Pe(i.prototype,t),i[Vce]=!0,i.extend=this.extend,i.superCall=jRe,i.superApply=WRe,i.superClass=r,i}}function VRe(n){return St(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function Hce(n,e){n.extend=e.extend}var HRe=Math.round(Math.random()*10);function GRe(n){var e=["__\0is_clz",HRe++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function jRe(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];return this.superClass.prototype[e].apply(n,t)}function WRe(n,e,t){return this.superClass.prototype[e].apply(n,t)}function n3(n){var e={};n.registerClass=function(r){var i=r.type||r.prototype.type;if(i){URe(i),r.prototype.type=i;var a=Uh(i);if(!a.sub)e[a.main]=r;else if(a.sub!==uv){var s=t(a);s[a.sub]=r}}return r},n.getClass=function(r,i,a){var s=e[r];if(s&&s[uv]&&(s=i?s[i]:null),a&&!s)throw new Error(i?"Component "+r+"."+(i||"")+" is used but not imported.":r+".type should be specified.");return s},n.getClassesByMainType=function(r){var i=Uh(r),a=[],s=e[i.main];return s&&s[uv]?W(s,function(o,l){l!==uv&&a.push(o)}):a.push(s),a},n.hasClass=function(r){var i=Uh(r);return!!e[i.main]},n.getAllClassMainTypes=function(){var r=[];return W(e,function(i,a){r.push(a)}),r},n.hasSubTypes=function(r){var i=Uh(r),a=e[i.main];return a&&a[uv]};function t(r){var i=e[r.main];return(!i||!i[uv])&&(i=e[r.main]={},i[uv]=!0),i}}function Vy(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(r,i,a){for(var s={},o=0;o<n.length;o++){var l=n[o][1];if(!(i&&Jt(i,l)>=0||a&&Jt(a,l)<0)){var u=r.getShallow(l,e);u!=null&&(s[n[o][0]]=u)}}return s}}var XRe=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],$Re=Vy(XRe),YRe=(function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return $Re(this,e,t)},n})(),vz=new eS(50);function qRe(n){if(typeof n=="string"){var e=vz.get(n);return e&&e.image}else return n}function tj(n,e,t,r,i){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var a=vz.get(n),s={hostEl:t,cb:r,cbPayload:i};return a?(e=a.image,!r3(e)&&a.pending.push(s)):(e=Dc.loadImage(n,uZ,uZ),e.__zrImageSrc=n,vz.put(n,e.__cachedImgObj={image:e,pending:[s]})),e}else return n;else return e}function uZ(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],r=t.cb;r&&r(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function r3(n){return n&&n.width&&n.height}var qF=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function KRe(n,e,t,r,i,a){if(!t){n.text="",n.isTruncated=!1;return}var s=(e+"").split(`
`);a=Gce(t,r,i,a);for(var o=!1,l={},u=0,c=s.length;u<c;u++)jce(l,s[u],a),s[u]=l.textLine,o=o||l.isTruncated;n.text=s.join(`
`),n.isTruncated=o}function Gce(n,e,t,r){r=r||{};var i=Pe({},r);t=dt(t,"..."),i.maxIterations=dt(r.maxIterations,2);var a=i.minChar=dt(r.minChar,0),s=i.fontMeasureInfo=$h(e),o=s.asciiCharWidth;i.placeholder=dt(r.placeholder,"");for(var l=n=Math.max(0,n-1),u=0;u<a&&l>=o;u++)l-=o;var c=Yh(s,t);return c>l&&(t="",c=0),l=n-c,i.ellipsis=t,i.ellipsisWidth=c,i.contentWidth=l,i.containerWidth=n,i}function jce(n,e,t){var r=t.containerWidth,i=t.contentWidth,a=t.fontMeasureInfo;if(!r){n.textLine="",n.isTruncated=!1;return}var s=Yh(a,e);if(s<=r){n.textLine=e,n.isTruncated=!1;return}for(var o=0;;o++){if(s<=i||o>=t.maxIterations){e+=t.ellipsis;break}var l=o===0?ZRe(e,i,a):s>0?Math.floor(e.length*i/s):0;e=e.substr(0,l),s=Yh(a,e)}e===""&&(e=t.placeholder),n.textLine=e,n.isTruncated=!0}function ZRe(n,e,t){for(var r=0,i=0,a=n.length;i<a&&r<e;i++)r+=Tce(t,n.charCodeAt(i));return i}function QRe(n,e,t,r){var i=nj(n),a=e.overflow,s=e.padding,o=s?s[1]+s[3]:0,l=s?s[0]+s[2]:0,u=e.font,c=a==="truncate",h=d2(u),d=dt(e.lineHeight,h),f=e.lineOverflow==="truncate",p=!1,m=e.width;m==null&&t!=null&&(m=t-o);var g=e.height;g==null&&r!=null&&(g=r-l);var v;m!=null&&(a==="break"||a==="breakAll")?v=i?Wce(i,e.font,m,a==="breakAll",0).lines:[]:v=i?i.split(`
`):[];var b=v.length*d;if(g==null&&(g=b),b>g&&f){var S=Math.floor(g/d);p=p||v.length>S,v=v.slice(0,S),b=v.length*d}if(i&&c&&m!=null)for(var w=Gce(m,u,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),E={},T=0;T<v.length;T++)jce(E,v[T],w),v[T]=E.textLine,p=p||E.isTruncated;for(var M=g,P=0,I=$h(u),T=0;T<v.length;T++)P=Math.max(Yh(I,v[T]),P);m==null&&(m=P);var D=m;return M+=l,D+=o,{lines:v,height:g,outerWidth:D,outerHeight:M,lineHeight:d,calculatedLineHeight:h,contentWidth:P,contentHeight:b,width:m,isTruncated:p}}var JRe=(function(){function n(){}return n})(),cZ=(function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n})(),eNe=(function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return n})();function tNe(n,e,t,r,i){var a=new eNe,s=nj(n);if(!s)return a;var o=e.padding,l=o?o[1]+o[3]:0,u=o?o[0]+o[2]:0,c=e.width;c==null&&t!=null&&(c=t-l);var h=e.height;h==null&&r!=null&&(h=r-u);for(var d=e.overflow,f=(d==="break"||d==="breakAll")&&c!=null?{width:c,accumWidth:0,breakAll:d==="breakAll"}:null,p=qF.lastIndex=0,m;(m=qF.exec(s))!=null;){var g=m.index;g>p&&KF(a,s.substring(p,g),e,f),KF(a,m[2],e,f,m[1]),p=qF.lastIndex}p<s.length&&KF(a,s.substring(p,s.length),e,f);var v=[],b=0,S=0,w=d==="truncate",E=e.lineOverflow==="truncate",T={};function M(se,he,fe){se.width=he,se.lineHeight=fe,b+=fe,S=Math.max(S,he)}e:for(var P=0;P<a.lines.length;P++){for(var I=a.lines[P],D=0,R=0,B=0;B<I.tokens.length;B++){var k=I.tokens[B],V=k.styleName&&e.rich[k.styleName]||{},G=k.textPadding=V.padding,F=G?G[1]+G[3]:0,X=k.font=V.font||e.font;k.contentHeight=d2(X);var j=dt(V.height,k.contentHeight);if(k.innerHeight=j,G&&(j+=G[0]+G[2]),k.height=j,k.lineHeight=Ll(V.lineHeight,e.lineHeight,j),k.align=V&&V.align||i,k.verticalAlign=V&&V.verticalAlign||"middle",E&&h!=null&&b+k.lineHeight>h){var Q=a.lines.length;B>0?(I.tokens=I.tokens.slice(0,B),M(I,R,D),a.lines=a.lines.slice(0,P+1)):a.lines=a.lines.slice(0,P),a.isTruncated=a.isTruncated||a.lines.length<Q;break e}var H=V.width,K=H==null||H==="auto";if(typeof H=="string"&&H.charAt(H.length-1)==="%")k.percentWidth=H,v.push(k),k.contentWidth=Yh($h(X),k.text);else{if(K){var te=V.backgroundColor,Y=te&&te.image;Y&&(Y=qRe(Y),r3(Y)&&(k.width=Math.max(k.width,Y.width*j/Y.height)))}var de=w&&c!=null?c-R:null;de!=null&&de<k.width?!K||de<F?(k.text="",k.width=k.contentWidth=0):(KRe(T,k.text,de-F,X,e.ellipsis,{minChar:e.truncateMinChar}),k.text=T.text,a.isTruncated=a.isTruncated||T.isTruncated,k.width=k.contentWidth=Yh($h(X),k.text)):k.contentWidth=Yh($h(X),k.text)}k.width+=F,R+=k.width,V&&(D=Math.max(D,k.lineHeight))}M(I,R,D)}a.outerWidth=a.width=dt(c,S),a.outerHeight=a.height=dt(h,b),a.contentHeight=b,a.contentWidth=S,a.outerWidth+=l,a.outerHeight+=u;for(var P=0;P<v.length;P++){var k=v[P],ge=k.percentWidth;k.width=parseInt(ge,10)/100*a.width}return a}function KF(n,e,t,r,i){var a=e==="",s=i&&t.rich[i]||{},o=n.lines,l=s.font||t.font,u=!1,c,h;if(r){var d=s.padding,f=d?d[1]+d[3]:0;if(s.width!=null&&s.width!=="auto"){var p=Pc(s.width,r.width)+f;o.length>0&&p+r.accumWidth>r.width&&(c=e.split(`
`),u=!0),r.accumWidth=p}else{var m=Wce(e,l,r.width,r.breakAll,r.accumWidth);r.accumWidth=m.accumWidth+f,h=m.linesWidths,c=m.lines}}c||(c=e.split(`
`));for(var g=$h(l),v=0;v<c.length;v++){var b=c[v],S=new JRe;if(S.styleName=i,S.text=b,S.isLineHolder=!b&&!a,typeof s.width=="number"?S.width=s.width:S.width=h?h[v]:Yh(g,b),!v&&!u){var w=(o[o.length-1]||(o[0]=new cZ)).tokens,E=w.length;E===1&&w[0].isLineHolder?w[0]=S:(b||!E||a)&&w.push(S)}else o.push(new cZ([S]))}}function nNe(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var rNe=ed(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function iNe(n){return nNe(n)?!!rNe[n]:!0}function Wce(n,e,t,r,i){for(var a=[],s=[],o="",l="",u=0,c=0,h=$h(e),d=0;d<n.length;d++){var f=n.charAt(d);if(f===`
`){l&&(o+=l,c+=u),a.push(o),s.push(c),o="",l="",u=0,c=0;continue}var p=Tce(h,f.charCodeAt(0)),m=r?!1:!iNe(f);if(a.length?c+p>t:i+c+p>t){c?(o||l)&&(m?(o||(o=l,l="",u=0,c=u),a.push(o),s.push(c-u),l+=f,u+=p,o="",c=u):(l&&(o+=l,l="",u=0),a.push(o),s.push(c),o=f,c=p)):m?(a.push(l),s.push(u),l=f,u=p):(a.push(f),s.push(p));continue}c+=p,m?(l+=f,u+=p):(l&&(o+=l,l="",u=0),o+=f)}return l&&(o+=l),o&&(a.push(o),s.push(c)),a.length===1&&(c+=i),{accumWidth:c,lines:a,linesWidths:s}}function hZ(n,e,t,r,i,a){if(n.baseX=t,n.baseY=r,n.outerWidth=n.outerHeight=null,!!e){var s=e.width*2,o=e.height*2;Rt.set(dZ,tS(t,s,i),Dy(r,o,a),s,o),Rt.intersect(e,dZ,null,fZ);var l=fZ.outIntersectRect;n.outerWidth=l.width,n.outerHeight=l.height,n.baseX=tS(l.x,l.width,i,!0),n.baseY=Dy(l.y,l.height,a,!0)}}var dZ=new Rt(0,0,0,0),fZ={outIntersectRect:{},clamp:!0};function nj(n){return n!=null?n+="":n=""}function aNe(n){var e=nj(n.text),t=n.font,r=Yh($h(t),e),i=d2(t);return yz(n,r,i,null)}function yz(n,e,t,r){var i=new Rt(tS(n.x||0,e,n.textAlign),Dy(n.y||0,t,n.textBaseline),e,t),a=r??(Xce(n)?n.lineWidth:0);return a>0&&(i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a),i}function Xce(n){var e=n.stroke;return e!=null&&e!=="none"&&n.lineWidth>0}var xz="__zr_style_"+Math.round(Math.random()*10),Iy={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},i3={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Iy[xz]=!0;var pZ=["z","z2","invisible"],sNe=["invisible"],Nu=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var r=An(t),i=0;i<r.length;i++){var a=r[i];a==="style"?this.useStyle(t[a]):n.prototype.attrKV.call(this,a,t[a])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,r,i,a){var s=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&oNe(this,t,r)||s&&!s[0]&&!s[3])return!1;if(i&&this.__clipPaths&&this.__clipPaths.length){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(a&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,r){return this.rectContain(t,r)},e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.rectContain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();return a.contain(i[0],i[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var r=this.transform,i=this.getBoundingRect(),a=this.style,s=a.shadowBlur||0,o=a.shadowOffsetX||0,l=a.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Rt(0,0,0,0)),r?Rt.applyTransform(t,i,r):t.copy(i),(s||o||l)&&(t.width+=s*2+Math.abs(o),t.height+=s*2+Math.abs(l),t.x=Math.min(t.x,t.x+o-s),t.y=Math.min(t.y,t.y+l-s));var u=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-u),t.y=Math.floor(t.y-u),t.width=Math.ceil(t.width+1+u*2),t.height=Math.ceil(t.height+1+u*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Rt(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,r){t!=="style"?n.prototype.attrKV.call(this,t,r):this.style?this.setStyle(r):this.useStyle(r)},e.prototype.setStyle=function(t,r){return typeof t=="string"?this.style[t]=r:Pe(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=XT,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&XT)},e.prototype.styleUpdated=function(){this.__dirty&=~XT},e.prototype.createStyle=function(t){return Kk(Iy,t)},e.prototype.useStyle=function(t){t[xz]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[xz]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.style&&!r.style&&(r.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,r,pZ)},e.prototype._applyStateObj=function(t,r,i,a,s,o){n.prototype._applyStateObj.call(this,t,r,i,a,s,o);var l=!(r&&a),u;if(r&&r.style?s?a?u=r.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,r.style)):(u=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(u,r.style)):l&&(u=i.style),u)if(s){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var h=An(c),d=0;d<h.length;d++){var f=h[d];f in u&&(u[f]=u[f],this.style[f]=c[f])}for(var p=An(u),d=0;d<p.length;d++){var f=p[d];this.style[f]=this.style[f]}this._transitionState(t,{style:u},o,this.getAnimationStyleProps())}else this.useStyle(u);for(var m=this.__inHover?sNe:pZ,d=0;d<m.length;d++){var f=m[d];r&&r[f]!=null?this[f]=r[f]:l&&i[f]!=null&&(this[f]=i[f])}},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var s=t[a];s.style&&(i=i||{},this._mergeStyle(i,s.style))}return i&&(r.style=i),r},e.prototype._mergeStyle=function(t,r){return Pe(t,r),t},e.prototype.getAnimationStyleProps=function(){return i3},e.initDefaultProps=(function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=Cl|XT})(),e})(t3),ZF=new Rt(0,0,0,0),QF=new Rt(0,0,0,0);function oNe(n,e,t){return ZF.copy(n.getBoundingRect()),n.transform&&ZF.applyTransform(n.transform),QF.width=e,QF.height=t,!ZF.intersect(QF)}var Vo=Math.min,Ho=Math.max,JF=Math.sin,e4=Math.cos,cv=Math.PI*2,gI=rx(),vI=rx(),yI=rx();function a3(n,e,t){if(n.length!==0){for(var r=n[0],i=r[0],a=r[0],s=r[1],o=r[1],l=1;l<n.length;l++)r=n[l],i=Vo(i,r[0]),a=Ho(a,r[0]),s=Vo(s,r[1]),o=Ho(o,r[1]);e[0]=i,e[1]=s,t[0]=a,t[1]=o}}function mZ(n,e,t,r,i,a){i[0]=Vo(n,t),i[1]=Vo(e,r),a[0]=Ho(n,t),a[1]=Ho(e,r)}var gZ=[],vZ=[];function lNe(n,e,t,r,i,a,s,o,l,u){var c=uce,h=ba,d=c(n,t,i,s,gZ);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var f=0;f<d;f++){var p=h(n,t,i,s,gZ[f]);l[0]=Vo(p,l[0]),u[0]=Ho(p,u[0])}d=c(e,r,a,o,vZ);for(var f=0;f<d;f++){var m=h(e,r,a,o,vZ[f]);l[1]=Vo(m,l[1]),u[1]=Ho(m,u[1])}l[0]=Vo(n,l[0]),u[0]=Ho(n,u[0]),l[0]=Vo(s,l[0]),u[0]=Ho(s,u[0]),l[1]=Vo(e,l[1]),u[1]=Ho(e,u[1]),l[1]=Vo(o,l[1]),u[1]=Ho(o,u[1])}function uNe(n,e,t,r,i,a,s,o){var l=hce,u=Wa,c=Ho(Vo(l(n,t,i),1),0),h=Ho(Vo(l(e,r,a),1),0),d=u(n,t,i,c),f=u(e,r,a,h);s[0]=Vo(n,i,d),s[1]=Vo(e,a,f),o[0]=Ho(n,i,d),o[1]=Ho(e,a,f)}function cNe(n,e,t,r,i,a,s,o,l){var u=tg,c=ng,h=Math.abs(i-a);if(h%cv<1e-4&&h>1e-4){o[0]=n-t,o[1]=e-r,l[0]=n+t,l[1]=e+r;return}if(gI[0]=e4(i)*t+n,gI[1]=JF(i)*r+e,vI[0]=e4(a)*t+n,vI[1]=JF(a)*r+e,u(o,gI,vI),c(l,gI,vI),i=i%cv,i<0&&(i=i+cv),a=a%cv,a<0&&(a=a+cv),i>a&&!s?a+=cv:i<a&&s&&(i+=cv),s){var d=a;a=i,i=d}for(var f=0;f<a;f+=Math.PI/2)f>i&&(yI[0]=e4(f)*t+n,yI[1]=JF(f)*r+e,u(o,yI,o),c(l,yI,l))}var wr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},hv=[],dv=[],Yc=[],Pp=[],qc=[],Kc=[],t4=Math.min,n4=Math.max,fv=Math.cos,pv=Math.sin,Td=Math.abs,_z=Math.PI,Kp=_z*2,r4=typeof Float32Array<"u",Zw=[];function i4(n){var e=Math.round(n/_z*1e8)/1e8;return e%2*_z}function s3(n,e){var t=i4(n[0]);t<0&&(t+=Kp);var r=t-n[0],i=n[1];i+=r,!e&&i-t>=Kp?i=t+Kp:e&&t-i>=Kp?i=t-Kp:!e&&t>i?i=t+(Kp-i4(t-i)):e&&t<i&&(i=t-(Kp-i4(i-t))),n[0]=t,n[1]=i}var rd=(function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,r){r=r||0,r>0&&(this._ux=Td(r/YR/e)||0,this._uy=Td(r/YR/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(wr.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var r=Td(e-this._xi),i=Td(t-this._yi),a=r>this._ux||i>this._uy;if(this.addData(wr.L,e,t),this._ctx&&a&&this._ctx.lineTo(e,t),a)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var s=r*r+i*i;s>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=s)}return this},n.prototype.bezierCurveTo=function(e,t,r,i,a,s){return this._drawPendingPt(),this.addData(wr.C,e,t,r,i,a,s),this._ctx&&this._ctx.bezierCurveTo(e,t,r,i,a,s),this._xi=a,this._yi=s,this},n.prototype.quadraticCurveTo=function(e,t,r,i){return this._drawPendingPt(),this.addData(wr.Q,e,t,r,i),this._ctx&&this._ctx.quadraticCurveTo(e,t,r,i),this._xi=r,this._yi=i,this},n.prototype.arc=function(e,t,r,i,a,s){this._drawPendingPt(),Zw[0]=i,Zw[1]=a,s3(Zw,s),i=Zw[0],a=Zw[1];var o=a-i;return this.addData(wr.A,e,t,r,r,i,o,0,s?0:1),this._ctx&&this._ctx.arc(e,t,r,i,a,s),this._xi=fv(a)*r+e,this._yi=pv(a)*r+t,this},n.prototype.arcTo=function(e,t,r,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,r,i,a),this},n.prototype.rect=function(e,t,r,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,r,i),this.addData(wr.R,e,t,r,i),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(wr.Z);var e=this._ctx,t=this._x0,r=this._y0;return e&&e.closePath(),this._xi=t,this._yi=r,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){if(this._saveData){var t=e.length;!(this.data&&this.data.length===t)&&r4&&(this.data=new Float32Array(t));for(var r=0;r<t;r++)this.data[r]=e[r];this._len=t}},n.prototype.appendPath=function(e){if(this._saveData){e instanceof Array||(e=[e]);for(var t=e.length,r=0,i=this._len,a=0;a<t;a++)r+=e[a].len();var s=this.data;if(r4&&(s instanceof Float32Array||!s)&&(this.data=new Float32Array(i+r),i>0&&s))for(var o=0;o<i;o++)this.data[o]=s[o];for(var a=0;a<t;a++)for(var l=e[a].data,o=0;o<l.length;o++)this.data[i++]=l[o];this._len=i}},n.prototype.addData=function(e,t,r,i,a,s,o,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var h=0;h<arguments.length;h++)c[this._len++]=arguments[h]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,r4&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){Yc[0]=Yc[1]=qc[0]=qc[1]=Number.MAX_VALUE,Pp[0]=Pp[1]=Kc[0]=Kc[1]=-Number.MAX_VALUE;var e=this.data,t=0,r=0,i=0,a=0,s;for(s=0;s<this._len;){var o=e[s++],l=s===1;switch(l&&(t=e[s],r=e[s+1],i=t,a=r),o){case wr.M:t=i=e[s++],r=a=e[s++],qc[0]=i,qc[1]=a,Kc[0]=i,Kc[1]=a;break;case wr.L:mZ(t,r,e[s],e[s+1],qc,Kc),t=e[s++],r=e[s++];break;case wr.C:lNe(t,r,e[s++],e[s++],e[s++],e[s++],e[s],e[s+1],qc,Kc),t=e[s++],r=e[s++];break;case wr.Q:uNe(t,r,e[s++],e[s++],e[s],e[s+1],qc,Kc),t=e[s++],r=e[s++];break;case wr.A:var u=e[s++],c=e[s++],h=e[s++],d=e[s++],f=e[s++],p=e[s++]+f;s+=1;var m=!e[s++];l&&(i=fv(f)*h+u,a=pv(f)*d+c),cNe(u,c,h,d,f,p,m,qc,Kc),t=fv(p)*h+u,r=pv(p)*d+c;break;case wr.R:i=t=e[s++],a=r=e[s++];var g=e[s++],v=e[s++];mZ(i,a,i+g,a+v,qc,Kc);break;case wr.Z:t=i,r=a;break}tg(Yc,Yc,qc),ng(Pp,Pp,Kc)}return s===0&&(Yc[0]=Yc[1]=Pp[0]=Pp[1]=0),new Rt(Yc[0],Yc[1],Pp[0]-Yc[0],Pp[1]-Yc[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,r=this._ux,i=this._uy,a=0,s=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,h=0,d=0;d<t;){var f=e[d++],p=d===1;p&&(a=e[d],s=e[d+1],o=a,l=s);var m=-1;switch(f){case wr.M:a=o=e[d++],s=l=e[d++];break;case wr.L:{var g=e[d++],v=e[d++],b=g-a,S=v-s;(Td(b)>r||Td(S)>i||d===t-1)&&(m=Math.sqrt(b*b+S*S),a=g,s=v);break}case wr.C:{var w=e[d++],E=e[d++],g=e[d++],v=e[d++],T=e[d++],M=e[d++];m=TLe(a,s,w,E,g,v,T,M,10),a=T,s=M;break}case wr.Q:{var w=e[d++],E=e[d++],g=e[d++],v=e[d++];m=ALe(a,s,w,E,g,v,10),a=g,s=v;break}case wr.A:var P=e[d++],I=e[d++],D=e[d++],R=e[d++],B=e[d++],k=e[d++],V=k+B;d+=1,p&&(o=fv(B)*D+P,l=pv(B)*R+I),m=n4(D,R)*t4(Kp,Math.abs(k)),a=fv(V)*D+P,s=pv(V)*R+I;break;case wr.R:{o=a=e[d++],l=s=e[d++];var G=e[d++],F=e[d++];m=G*2+F*2;break}case wr.Z:{var b=o-a,S=l-s;m=Math.sqrt(b*b+S*S),a=o,s=l;break}}m>=0&&(u[h++]=m,c+=m)}return this._pathLen=c,c},n.prototype.rebuildPath=function(e,t){var r=this.data,i=this._ux,a=this._uy,s=this._len,o,l,u,c,h,d,f=t<1,p,m,g=0,v=0,b,S=0,w,E;if(!(f&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,m=this._pathLen,b=t*m,!b)))e:for(var T=0;T<s;){var M=r[T++],P=T===1;switch(P&&(u=r[T],c=r[T+1],o=u,l=c),M!==wr.L&&S>0&&(e.lineTo(w,E),S=0),M){case wr.M:o=u=r[T++],l=c=r[T++],e.moveTo(u,c);break;case wr.L:{h=r[T++],d=r[T++];var I=Td(h-u),D=Td(d-c);if(I>i||D>a){if(f){var R=p[v++];if(g+R>b){var B=(b-g)/R;e.lineTo(u*(1-B)+h*B,c*(1-B)+d*B);break e}g+=R}e.lineTo(h,d),u=h,c=d,S=0}else{var k=I*I+D*D;k>S&&(w=h,E=d,S=k)}break}case wr.C:{var V=r[T++],G=r[T++],F=r[T++],X=r[T++],j=r[T++],Q=r[T++];if(f){var R=p[v++];if(g+R>b){var B=(b-g)/R;_g(u,V,F,j,B,hv),_g(c,G,X,Q,B,dv),e.bezierCurveTo(hv[1],dv[1],hv[2],dv[2],hv[3],dv[3]);break e}g+=R}e.bezierCurveTo(V,G,F,X,j,Q),u=j,c=Q;break}case wr.Q:{var V=r[T++],G=r[T++],F=r[T++],X=r[T++];if(f){var R=p[v++];if(g+R>b){var B=(b-g)/R;fA(u,V,F,B,hv),fA(c,G,X,B,dv),e.quadraticCurveTo(hv[1],dv[1],hv[2],dv[2]);break e}g+=R}e.quadraticCurveTo(V,G,F,X),u=F,c=X;break}case wr.A:var H=r[T++],K=r[T++],te=r[T++],Y=r[T++],de=r[T++],ge=r[T++],se=r[T++],he=!r[T++],fe=te>Y?te:Y,Ee=Td(te-Y)>.001,Ce=de+ge,Re=!1;if(f){var R=p[v++];g+R>b&&(Ce=de+ge*(b-g)/R,Re=!0),g+=R}if(Ee&&e.ellipse?e.ellipse(H,K,te,Y,se,de,Ce,he):e.arc(H,K,fe,de,Ce,he),Re)break e;P&&(o=fv(de)*te+H,l=pv(de)*Y+K),u=fv(Ce)*te+H,c=pv(Ce)*Y+K;break;case wr.R:o=u=r[T],l=c=r[T+1],h=r[T++],d=r[T++];var He=r[T++],pt=r[T++];if(f){var R=p[v++];if(g+R>b){var lt=b-g;e.moveTo(h,d),e.lineTo(h+t4(lt,He),d),lt-=He,lt>0&&e.lineTo(h+He,d+t4(lt,pt)),lt-=pt,lt>0&&e.lineTo(h+n4(He-lt,0),d+pt),lt-=He,lt>0&&e.lineTo(h,d+n4(pt-lt,0));break e}g+=R}e.rect(h,d,He,pt);break;case wr.Z:if(f){var R=p[v++];if(g+R>b){var B=(b-g)/R;e.lineTo(u*(1-B)+o*B,c*(1-B)+l*B);break e}g+=R}e.closePath(),u=o,c=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.prototype.canSave=function(){return!!this._saveData},n.CMD=wr,n.initDefaultProps=(function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0})(),n})();function tm(n,e,t,r,i,a,s){if(i===0)return!1;var o=i,l=0,u=n;if(s>e+o&&s>r+o||s<e-o&&s<r-o||a>n+o&&a>t+o||a<n-o&&a<t-o)return!1;if(n!==t)l=(e-r)/(n-t),u=(n*r-t*e)/(n-t);else return Math.abs(a-n)<=o/2;var c=l*a-s+u,h=c*c/(l*l+1);return h<=o/2*o/2}function hNe(n,e,t,r,i,a,s,o,l,u,c){if(l===0)return!1;var h=l;if(c>e+h&&c>r+h&&c>a+h&&c>o+h||c<e-h&&c<r-h&&c<a-h&&c<o-h||u>n+h&&u>t+h&&u>i+h&&u>s+h||u<n-h&&u<t-h&&u<i-h&&u<s-h)return!1;var d=cce(n,e,t,r,i,a,s,o,u,c,null);return d<=h/2}function $ce(n,e,t,r,i,a,s,o,l){if(s===0)return!1;var u=s;if(l>e+u&&l>r+u&&l>a+u||l<e-u&&l<r-u&&l<a-u||o>n+u&&o>t+u&&o>i+u||o<n-u&&o<t-u&&o<i-u)return!1;var c=dce(n,e,t,r,i,a,o,l,null);return c<=u/2}var yZ=Math.PI*2;function Dl(n){return n%=yZ,n<0&&(n+=yZ),n}var Qw=Math.PI*2;function dNe(n,e,t,r,i,a,s,o,l){if(s===0)return!1;var u=s;o-=n,l-=e;var c=Math.sqrt(o*o+l*l);if(c-u>t||c+u<t)return!1;if(Math.abs(r-i)%Qw<1e-4)return!0;if(a){var h=r;r=Dl(i),i=Dl(h)}else r=Dl(r),i=Dl(i);r>i&&(i+=Qw);var d=Math.atan2(l,o);return d<0&&(d+=Qw),d>=r&&d<=i||d+Qw>=r&&d+Qw<=i}function Ud(n,e,t,r,i,a){if(a>e&&a>r||a<e&&a<r||r===e)return 0;var s=(a-e)/(r-e),o=r<e?1:-1;(s===1||s===0)&&(o=r<e?.5:-.5);var l=s*(t-n)+n;return l===i?1/0:l>i?o:0}var Lp=rd.CMD,mv=Math.PI*2,fNe=1e-4;function pNe(n,e){return Math.abs(n-e)<fNe}var so=[-1,-1,-1],gu=[-1,-1];function mNe(){var n=gu[0];gu[0]=gu[1],gu[1]=n}function gNe(n,e,t,r,i,a,s,o,l,u){if(u>e&&u>r&&u>a&&u>o||u<e&&u<r&&u<a&&u<o)return 0;var c=jR(e,r,a,o,u,so);if(c===0)return 0;for(var h=0,d=-1,f=void 0,p=void 0,m=0;m<c;m++){var g=so[m],v=g===0||g===1?.5:1,b=ba(n,t,i,s,g);b<l||(d<0&&(d=uce(e,r,a,o,gu),gu[1]<gu[0]&&d>1&&mNe(),f=ba(e,r,a,o,gu[0]),d>1&&(p=ba(e,r,a,o,gu[1]))),d===2?g<gu[0]?h+=f<e?v:-v:g<gu[1]?h+=p<f?v:-v:h+=o<p?v:-v:g<gu[0]?h+=f<e?v:-v:h+=o<f?v:-v)}return h}function vNe(n,e,t,r,i,a,s,o){if(o>e&&o>r&&o>a||o<e&&o<r&&o<a)return 0;var l=ELe(e,r,a,o,so);if(l===0)return 0;var u=hce(e,r,a);if(u>=0&&u<=1){for(var c=0,h=Wa(e,r,a,u),d=0;d<l;d++){var f=so[d]===0||so[d]===1?.5:1,p=Wa(n,t,i,so[d]);p<s||(so[d]<u?c+=h<e?f:-f:c+=a<h?f:-f)}return c}else{var f=so[0]===0||so[0]===1?.5:1,p=Wa(n,t,i,so[0]);return p<s?0:a<e?f:-f}}function yNe(n,e,t,r,i,a,s,o){if(o-=e,o>t||o<-t)return 0;var l=Math.sqrt(t*t-o*o);so[0]=-l,so[1]=l;var u=Math.abs(r-i);if(u<1e-4)return 0;if(u>=mv-1e-4){r=0,i=mv;var c=a?1:-1;return s>=so[0]+n&&s<=so[1]+n?c:0}if(r>i){var h=r;r=i,i=h}r<0&&(r+=mv,i+=mv);for(var d=0,f=0;f<2;f++){var p=so[f];if(p+n>s){var m=Math.atan2(o,p),c=a?1:-1;m<0&&(m=mv+m),(m>=r&&m<=i||m+mv>=r&&m+mv<=i)&&(m>Math.PI/2&&m<Math.PI*1.5&&(c=-c),d+=c)}}return d}function Yce(n,e,t,r,i){for(var a=n.data,s=n.len(),o=0,l=0,u=0,c=0,h=0,d,f,p=0;p<s;){var m=a[p++],g=p===1;switch(m===Lp.M&&p>1&&(t||(o+=Ud(l,u,c,h,r,i))),g&&(l=a[p],u=a[p+1],c=l,h=u),m){case Lp.M:c=a[p++],h=a[p++],l=c,u=h;break;case Lp.L:if(t){if(tm(l,u,a[p],a[p+1],e,r,i))return!0}else o+=Ud(l,u,a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Lp.C:if(t){if(hNe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else o+=gNe(l,u,a[p++],a[p++],a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Lp.Q:if(t){if($ce(l,u,a[p++],a[p++],a[p],a[p+1],e,r,i))return!0}else o+=vNe(l,u,a[p++],a[p++],a[p],a[p+1],r,i)||0;l=a[p++],u=a[p++];break;case Lp.A:var v=a[p++],b=a[p++],S=a[p++],w=a[p++],E=a[p++],T=a[p++];p+=1;var M=!!(1-a[p++]);d=Math.cos(E)*S+v,f=Math.sin(E)*w+b,g?(c=d,h=f):o+=Ud(l,u,d,f,r,i);var P=(r-v)*w/S+v;if(t){if(dNe(v,b,w,E,E+T,M,e,P,i))return!0}else o+=yNe(v,b,w,E,E+T,M,P,i);l=Math.cos(E+T)*S+v,u=Math.sin(E+T)*w+b;break;case Lp.R:c=l=a[p++],h=u=a[p++];var I=a[p++],D=a[p++];if(d=c+I,f=h+D,t){if(tm(c,h,d,h,e,r,i)||tm(d,h,d,f,e,r,i)||tm(d,f,c,f,e,r,i)||tm(c,f,c,h,e,r,i))return!0}else o+=Ud(d,h,d,f,r,i),o+=Ud(c,f,c,h,r,i);break;case Lp.Z:if(t){if(tm(l,u,c,h,e,r,i))return!0}else o+=Ud(l,u,c,h,r,i);l=c,u=h;break}}return!t&&!pNe(u,h)&&(o+=Ud(l,u,c,h,r,i)||0),o!==0}function xNe(n,e,t){return Yce(n,0,!1,e,t)}function _Ne(n,e,t,r){return Yce(n,e,!0,t,r)}var QR=Pt({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Iy),bNe={style:Pt({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},i3.style)},a4=nd.concat(["invisible","culling","z","z2","zlevel","parent"]),vn=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var r=this.style;if(r.decal){var i=this._decalEl=this._decalEl||new e;i.buildPath===e.prototype.buildPath&&(i.buildPath=function(l){t.buildPath(l,t.shape)}),i.silent=!0;var a=i.style;for(var s in r)a[s]!==r[s]&&(a[s]=r[s]);a.fill=r.fill?r.decal:null,a.decal=null,a.shadowColor=null,r.strokeFirst&&(a.stroke=null);for(var o=0;o<a4.length;++o)i[a4[o]]=this[a4[o]];i.__dirty|=Cl}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var r=An(t);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<r.length;a++){var s=r[a],o=t[s];s==="style"?this.style?Pe(this.style,o):this.useStyle(o):s==="shape"?Pe(this.shape,o):n.prototype.attrKV.call(this,s,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(Ke(t)){var r=XR(t,0);return r>.5?fz:r>.2?JLe:pz}else if(t)return pz}return fz},e.prototype.getInsideTextStroke=function(t){var r=this.style.fill;if(Ke(r)){var i=this.__zr,a=!!(i&&i.isDarkMode()),s=XR(t,0)<dz;if(a===s)return r}},e.prototype.buildPath=function(t,r,i){},e.prototype.pathUpdated=function(){this.__dirty&=~k_},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new rd(!1)},e.prototype.hasStroke=function(){var t=this.style,r=t.stroke;return!(r==null||r==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,r=this.style,i=!t;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var s=this.path;(a||this.__dirty&k_)&&(s.beginPath(),this.buildPath(s,this.shape,!1),this.pathUpdated()),t=s.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||i){o.copy(t);var l=r.strokeNoScale?this.getLineScale():1,u=r.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(o.width+=u/l,o.height+=u/l,o.x-=u/l/2,o.y-=u/l/2)}return o}return t},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect(),s=this.style;if(t=i[0],r=i[1],a.contain(t,r)){var o=this.path;if(this.hasStroke()){var l=s.lineWidth,u=s.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),_Ne(o,l/u,t,r)))return!0}if(this.hasFill())return xNe(o,t,r)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=k_,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,r){t==="shape"?this.setShape(r):n.prototype.attrKV.call(this,t,r)},e.prototype.setShape=function(t,r){var i=this.shape;return i||(i=this.shape={}),typeof t=="string"?i[t]=r:Pe(i,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&k_)},e.prototype.createStyle=function(t){return Kk(QR,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var r=this._normalState;t.shape&&!r.shape&&(r.shape=Pe({},this.shape))},e.prototype._applyStateObj=function(t,r,i,a,s,o){n.prototype._applyStateObj.call(this,t,r,i,a,s,o);var l=!(r&&a),u;if(r&&r.shape?s?a?u=r.shape:(u=Pe({},i.shape),Pe(u,r.shape)):(u=Pe({},a?this.shape:i.shape),Pe(u,r.shape)):l&&(u=i.shape),u)if(s){this.shape=Pe({},this.shape);for(var c={},h=An(u),d=0;d<h.length;d++){var f=h[d];typeof u[f]=="object"?this.shape[f]=u[f]:c[f]=u[f]}this._transitionState(t,{shape:c},o)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var r=n.prototype._mergeStates.call(this,t),i,a=0;a<t.length;a++){var s=t[a];s.shape&&(i=i||{},this._mergeStyle(i,s.shape))}return i&&(r.shape=i),r},e.prototype.getAnimationStyleProps=function(){return bNe},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var r=(function(a){Hr(s,a);function s(o){var l=a.call(this,o)||this;return t.init&&t.init.call(l,o),l}return s.prototype.getDefaultStyle=function(){return Tt(t.style)},s.prototype.getDefaultShape=function(){return Tt(t.shape)},s})(e);for(var i in t)typeof t[i]=="function"&&(r.prototype[i]=t[i]);return r},e.initDefaultProps=(function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=Cl|XT|k_})(),e})(Nu),SNe=Pt({strokeFirst:!0,font:Wf,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},QR),nS=(function(n){Hr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){return Xce(this.style)},e.prototype.hasFill=function(){var t=this.style,r=t.fill;return r!=null&&r!=="none"},e.prototype.createStyle=function(t){return Kk(SNe,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){return this._rect||(this._rect=aNe(this.style)),this._rect},e.initDefaultProps=(function(){var t=e.prototype;t.dirtyRectTolerance=10})(),e})(Nu);nS.prototype.type="tspan";var wNe=Pt({x:0,y:0},Iy),TNe={style:Pt({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},i3.style)};function ENe(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Ka=(function(n){Hr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return Kk(wNe,t)},e.prototype._getSize=function(t){var r=this.style,i=r[t];if(i!=null)return i;var a=ENe(r.image)?r.image:this.__image;if(!a)return 0;var s=t==="width"?"height":"width",o=r[s];return o==null?a[t]:a[t]/a[s]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return TNe},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Rt(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e})(Nu);Ka.prototype.type="image";function ANe(n,e){var t=e.x,r=e.y,i=e.width,a=e.height,s=e.r,o,l,u,c;i<0&&(t=t+i,i=-i),a<0&&(r=r+a,a=-a),typeof s=="number"?o=l=u=c=s:s instanceof Array?s.length===1?o=l=u=c=s[0]:s.length===2?(o=u=s[0],l=c=s[1]):s.length===3?(o=s[0],l=c=s[1],u=s[2]):(o=s[0],l=s[1],u=s[2],c=s[3]):o=l=u=c=0;var h;o+l>i&&(h=o+l,o*=i/h,l*=i/h),u+c>i&&(h=u+c,u*=i/h,c*=i/h),l+u>a&&(h=l+u,l*=a/h,u*=a/h),o+c>a&&(h=o+c,o*=a/h,c*=a/h),n.moveTo(t+o,r),n.lineTo(t+i-l,r),l!==0&&n.arc(t+i-l,r+l,l,-Math.PI/2,0),n.lineTo(t+i,r+a-u),u!==0&&n.arc(t+i-u,r+a-u,u,0,Math.PI/2),n.lineTo(t+c,r+a),c!==0&&n.arc(t+c,r+a-c,c,Math.PI/2,Math.PI),n.lineTo(t,r+o),o!==0&&n.arc(t+o,r+o,o,Math.PI,Math.PI*1.5)}var nb=Math.round;function o3(n,e,t){if(e){var r=e.x1,i=e.x2,a=e.y1,s=e.y2;n.x1=r,n.x2=i,n.y1=a,n.y2=s;var o=t&&t.lineWidth;return o&&(nb(r*2)===nb(i*2)&&(n.x1=n.x2=Il(r,o,!0)),nb(a*2)===nb(s*2)&&(n.y1=n.y2=Il(a,o,!0))),n}}function qce(n,e,t){if(e){var r=e.x,i=e.y,a=e.width,s=e.height;n.x=r,n.y=i,n.width=a,n.height=s;var o=t&&t.lineWidth;return o&&(n.x=Il(r,o,!0),n.y=Il(i,o,!0),n.width=Math.max(Il(r+a,o,!1)-n.x,a===0?0:1),n.height=Math.max(Il(i+s,o,!1)-n.y,s===0?0:1)),n}}function Il(n,e,t){if(!e)return n;var r=nb(n*2);return(r+nb(e))%2===0?r/2:(r+(t?1:-1))/2}var CNe=(function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n})(),MNe={},fn=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new CNe},e.prototype.buildPath=function(t,r){var i,a,s,o;if(this.subPixelOptimize){var l=qce(MNe,r,this.style);i=l.x,a=l.y,s=l.width,o=l.height,l.r=r.r,r=l}else i=r.x,a=r.y,s=r.width,o=r.height;r.r?ANe(t,r):t.rect(i,a,s,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e})(vn);fn.prototype.type="rect";var xZ={fill:"#000"},_Z=2,Zc={},DNe={style:Pt({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},i3.style)},On=(function(n){Hr(e,n);function e(t){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=xZ,r.attr(t),r}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var r=this._children[t];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var r=this.innerTransformable;return r?r.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,LNe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Rt(0,0,0,0),r=this._children,i=[],a=null,s=0;s<r.length;s++){var o=r[s],l=o.getBoundingRect(),u=o.getLocalTransform(i);u?(t.copy(l),t.applyTransform(u),a=a||t.clone(),a.union(t)):(a=a||l.clone(),a.union(l))}this._rect=a||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||xZ},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,r){if(!r)return t;var i=r.rich,a=t.rich||i&&{};return Pe(t,r),i&&a?(this._mergeRich(a,i),t.rich=a):a&&(t.rich=a),t},e.prototype._mergeRich=function(t,r){for(var i=An(r),a=0;a<i.length;a++){var s=i[a];t[s]=t[s]||{},Pe(t[s],r[s])}},e.prototype.getAnimationStyleProps=function(){return DNe},e.prototype._getOrCreateChild=function(t){var r=this._children[this._childCursor];return(!r||!(r instanceof t))&&(r=new t),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},e.prototype._updatePlainTexts=function(){var t=this.style,r=t.font||Wf,i=t.padding,a=this._defaultStyle,s=t.x||0,o=t.y||0,l=t.align||a.align||"left",u=t.verticalAlign||a.verticalAlign||"top";hZ(Zc,a.overflowRect,s,o,l,u),s=Zc.baseX,o=Zc.baseY;var c=CZ(t),h=QRe(c,t,Zc.outerWidth,Zc.outerHeight),d=s4(t),f=!!t.backgroundColor,p=h.outerHeight,m=h.outerWidth,g=h.lines,v=h.lineHeight;this.isTruncated=!!h.isTruncated;var b=s,S=Dy(o,h.contentHeight,u);if(d||i){var w=tS(s,m,l),E=Dy(o,p,u);d&&this._renderBackground(t,t,w,E,m,p)}S+=v/2,i&&(b=AZ(s,l,i),u==="top"?S+=i[0]:u==="bottom"&&(S-=i[2]));for(var T=0,M=!1,P=!1,I=EZ("fill"in t?t.fill:(P=!0,a.fill)),D=TZ("stroke"in t?t.stroke:!f&&(!a.autoStroke||P)?(T=_Z,M=!0,a.stroke):null),R=t.textShadowBlur>0,B=0;B<g.length;B++){var k=this._getOrCreateChild(nS),V=k.createStyle();k.useStyle(V),V.text=g[B],V.x=b,V.y=S,V.textAlign=l,V.textBaseline="middle",V.opacity=t.opacity,V.strokeFirst=!0,R&&(V.shadowBlur=t.textShadowBlur||0,V.shadowColor=t.textShadowColor||"transparent",V.shadowOffsetX=t.textShadowOffsetX||0,V.shadowOffsetY=t.textShadowOffsetY||0),V.stroke=D,V.fill=I,D&&(V.lineWidth=t.lineWidth||T,V.lineDash=t.lineDash,V.lineDashOffset=t.lineDashOffset||0),V.font=r,SZ(V,t),S+=v,k.setBoundingRect(yz(V,h.contentWidth,h.calculatedLineHeight,M?0:null))}},e.prototype._updateRichTexts=function(){var t=this.style,r=this._defaultStyle,i=t.align||r.align,a=t.verticalAlign||r.verticalAlign,s=t.x||0,o=t.y||0;hZ(Zc,r.overflowRect,s,o,i,a),s=Zc.baseX,o=Zc.baseY;var l=CZ(t),u=tNe(l,t,Zc.outerWidth,Zc.outerHeight,i),c=u.width,h=u.outerWidth,d=u.outerHeight,f=t.padding;this.isTruncated=!!u.isTruncated;var p=tS(s,h,i),m=Dy(o,d,a),g=p,v=m;f&&(g+=f[3],v+=f[0]);var b=g+c;s4(t)&&this._renderBackground(t,t,p,m,h,d);for(var S=!!t.backgroundColor,w=0;w<u.lines.length;w++){for(var E=u.lines[w],T=E.tokens,M=T.length,P=E.lineHeight,I=E.width,D=0,R=g,B=b,k=M-1,V=void 0;D<M&&(V=T[D],!V.align||V.align==="left");)this._placeToken(V,t,P,v,R,"left",S),I-=V.width,R+=V.width,D++;for(;k>=0&&(V=T[k],V.align==="right");)this._placeToken(V,t,P,v,B,"right",S),I-=V.width,B-=V.width,k--;for(R+=(c-(R-g)-(b-B)-I)/2;D<=k;)V=T[D],this._placeToken(V,t,P,v,R+V.width/2,"center",S),R+=V.width,D++;v+=P}},e.prototype._placeToken=function(t,r,i,a,s,o,l){var u=r.rich[t.styleName]||{};u.text=t.text;var c=t.verticalAlign,h=a+i/2;c==="top"?h=a+t.height/2:c==="bottom"&&(h=a+i-t.height/2);var d=!t.isLineHolder&&s4(u);d&&this._renderBackground(u,r,o==="right"?s-t.width:o==="center"?s-t.width/2:s,h-t.height/2,t.width,t.height);var f=!!u.backgroundColor,p=t.textPadding;p&&(s=AZ(s,o,p),h-=t.height/2-p[0]-t.innerHeight/2);var m=this._getOrCreateChild(nS),g=m.createStyle();m.useStyle(g);var v=this._defaultStyle,b=!1,S=0,w=!1,E=EZ("fill"in u?u.fill:"fill"in r?r.fill:(b=!0,v.fill)),T=TZ("stroke"in u?u.stroke:"stroke"in r?r.stroke:!f&&!l&&(!v.autoStroke||b)?(S=_Z,w=!0,v.stroke):null),M=u.textShadowBlur>0||r.textShadowBlur>0;g.text=t.text,g.x=s,g.y=h,M&&(g.shadowBlur=u.textShadowBlur||r.textShadowBlur||0,g.shadowColor=u.textShadowColor||r.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||r.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||r.textShadowOffsetY||0),g.textAlign=o,g.textBaseline="middle",g.font=t.font||Wf,g.opacity=Ll(u.opacity,r.opacity,1),SZ(g,u),T&&(g.lineWidth=Ll(u.lineWidth,r.lineWidth,S),g.lineDash=dt(u.lineDash,r.lineDash),g.lineDashOffset=r.lineDashOffset||0,g.stroke=T),E&&(g.fill=E),m.setBoundingRect(yz(g,t.contentWidth,t.contentHeight,w?0:null))},e.prototype._renderBackground=function(t,r,i,a,s,o){var l=t.backgroundColor,u=t.borderWidth,c=t.borderColor,h=l&&l.image,d=l&&!h,f=t.borderRadius,p=this,m,g;if(d||t.lineHeight||u&&c){m=this._getOrCreateChild(fn),m.useStyle(m.createStyle()),m.style.fill=null;var v=m.shape;v.x=i,v.y=a,v.width=s,v.height=o,v.r=f,m.dirtyShape()}if(d){var b=m.style;b.fill=l||null,b.fillOpacity=dt(t.fillOpacity,1)}else if(h){g=this._getOrCreateChild(Ka),g.onload=function(){p.dirtyStyle()};var S=g.style;S.image=l.image,S.x=i,S.y=a,S.width=s,S.height=o}if(u&&c){var b=m.style;b.lineWidth=u,b.stroke=c,b.strokeOpacity=dt(t.strokeOpacity,1),b.lineDash=t.borderDash,b.lineDashOffset=t.borderDashOffset||0,m.strokeContainThreshold=0,m.hasFill()&&m.hasStroke()&&(b.strokeFirst=!0,b.lineWidth*=2)}var w=(m||g).style;w.shadowBlur=t.shadowBlur||0,w.shadowColor=t.shadowColor||"transparent",w.shadowOffsetX=t.shadowOffsetX||0,w.shadowOffsetY=t.shadowOffsetY||0,w.opacity=Ll(t.opacity,r.opacity,1)},e.makeFont=function(t){var r="";return Zce(t)&&(r=[t.fontStyle,t.fontWeight,Kce(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),r&&Mu(r)||t.textFont||t.font},e})(Nu),INe={left:!0,right:1,center:1},PNe={top:1,bottom:1,middle:1},bZ=["fontStyle","fontWeight","fontSize","fontFamily"];function Kce(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?UG+"px":n+"px"}function SZ(n,e){for(var t=0;t<bZ.length;t++){var r=bZ[t],i=e[r];i!=null&&(n[r]=i)}}function Zce(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function LNe(n){return wZ(n),W(n.rich,wZ),n}function wZ(n){if(n){n.font=On.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||INe[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||PNe[t]?t:"top";var r=n.padding;r&&(n.padding=qk(n.padding))}}function TZ(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function EZ(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function AZ(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function CZ(n){var e=n.text;return e!=null&&(e+=""),e}function s4(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var Ft=mn(),bz=function(n,e,t,r){if(r){var i=Ft(r);i.dataIndex=t,i.dataType=e,i.seriesIndex=n,i.ssrType="chart",r.type==="group"&&r.traverse(function(a){var s=Ft(a);s.seriesIndex=n,s.dataIndex=t,s.dataType=e,s.ssrType="chart"})}},MZ=1,DZ={},Qce=mn(),rj=mn(),ij=0,f2=1,l3=2,yo=["emphasis","blur","select"],yA=["normal","emphasis","blur","select"],zS=10,RNe=9,Py="highlight",EL="downplay",JR="select",Sz="unselect",eN="toggleSelect",aj="selectchanged";function $x(n){return n!=null&&n!=="none"}function u3(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function Jce(n){u3(n,"emphasis",l3)}function ehe(n){n.hoverState===l3&&u3(n,"normal",ij)}function sj(n){u3(n,"blur",f2)}function the(n){n.hoverState===f2&&u3(n,"normal",ij)}function NNe(n){n.selected=!0}function kNe(n){n.selected=!1}function IZ(n,e,t){e(n,t)}function ap(n,e,t){IZ(n,e,t),n.isGroup&&n.traverse(function(r){IZ(r,e,t)})}function tN(n,e){switch(e){case"emphasis":n.hoverState=l3;break;case"normal":n.hoverState=ij;break;case"blur":n.hoverState=f2;break;case"select":n.selected=!0}}function ONe(n,e,t,r){for(var i=n.style,a={},s=0;s<e.length;s++){var o=e[s],l=i[o];a[o]=l??(r&&r[o])}for(var s=0;s<n.animators.length;s++){var u=n.animators[s];u.__fromStateTransition&&u.__fromStateTransition.indexOf(t)<0&&u.targetName==="style"&&u.saveTo(a,e)}return a}function BNe(n,e,t,r){var i=t&&Jt(t,"select")>=0,a=!1;if(n instanceof vn){var s=Qce(n),o=i&&s.selectFill||s.normalFill,l=i&&s.selectStroke||s.normalStroke;if($x(o)||$x(l)){r=r||{};var u=r.style||{};u.fill==="inherit"?(a=!0,r=Pe({},r),u=Pe({},u),u.fill=o):!$x(u.fill)&&$x(o)?(a=!0,r=Pe({},r),u=Pe({},u),u.fill=az(o)):!$x(u.stroke)&&$x(l)&&(a||(r=Pe({},r),u=Pe({},u)),u.stroke=az(l)),r.style=u}}if(r&&r.z2==null){a||(r=Pe({},r));var c=n.z2EmphasisLift;r.z2=n.z2+(c??zS)}return r}function FNe(n,e,t){if(t&&t.z2==null){t=Pe({},t);var r=n.z2SelectLift;t.z2=n.z2+(r??RNe)}return t}function UNe(n,e,t){var r=Jt(n.currentStates,e)>=0,i=n.style.opacity,a=r?null:ONe(n,["opacity"],e,{opacity:1});t=t||{};var s=t.style||{};return s.opacity==null&&(t=Pe({},t),s=Pe({opacity:r?i:a.opacity*.1},s),t.style=s),t}function o4(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return BNe(this,n,e,t);if(n==="blur")return UNe(this,n,t);if(n==="select")return FNe(this,n,t)}return t}function Hy(n){n.stateProxy=o4;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=o4),t&&(t.stateProxy=o4)}function PZ(n,e){!ahe(n,e)&&!n.__highByOuter&&ap(n,Jce)}function LZ(n,e){!ahe(n,e)&&!n.__highByOuter&&ap(n,ehe)}function Yf(n,e){n.__highByOuter|=1<<(e||0),ap(n,Jce)}function qf(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&ap(n,ehe)}function nhe(n){ap(n,sj)}function oj(n){ap(n,the)}function rhe(n){ap(n,NNe)}function ihe(n){ap(n,kNe)}function ahe(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function she(n){var e=n.getModel(),t=[],r=[];e.eachComponent(function(i,a){var s=rj(a),o=i==="series",l=o?n.getViewOfSeriesModel(a):n.getViewOfComponentModel(a);!o&&r.push(l),s.isBlured&&(l.group.traverse(function(u){the(u)}),o&&t.push(a)),s.isBlured=!1}),W(r,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(t,!1,e)})}function wz(n,e,t,r){var i=r.getModel();t=t||"coordinateSystem";function a(u,c){for(var h=0;h<c.length;h++){var d=u.getItemGraphicEl(c[h]);d&&oj(d)}}if(n!=null&&!(!e||e==="none")){var s=i.getSeriesByIndex(n),o=s.coordinateSystem;o&&o.master&&(o=o.master);var l=[];i.eachSeries(function(u){var c=s===u,h=u.coordinateSystem;h&&h.master&&(h=h.master);var d=h&&o?h===o:c;if(!(t==="series"&&!c||t==="coordinateSystem"&&!d||e==="series"&&c)){var f=r.getViewOfSeriesModel(u);if(f.group.traverse(function(g){g.__highByOuter&&c&&e==="self"||sj(g)}),Fs(e))a(u.getData(),e);else if(Lt(e))for(var p=An(e),m=0;m<p.length;m++)a(u.getData(p[m]),e[p[m]]);l.push(u),rj(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var h=r.getViewOfComponentModel(c);h&&h.toggleBlurSeries&&h.toggleBlurSeries(l,!0,i)}})}}function Tz(n,e,t){if(!(n==null||e==null)){var r=t.getModel().getComponent(n,e);if(r){rj(r).isBlured=!0;var i=t.getViewOfComponentModel(r);!i||!i.focusBlurEnabled||i.group.traverse(function(a){sj(a)})}}}function zNe(n,e,t){var r=n.seriesIndex,i=n.getData(e.dataType);if(i){var a=zy(i,e);a=(Be(a)?a[0]:a)||0;var s=i.getItemGraphicEl(a);if(!s)for(var o=i.count(),l=0;!s&&l<o;)s=i.getItemGraphicEl(l++);if(s){var u=Ft(s);wz(r,u.focus,u.blurScope,t)}else{var c=n.get(["emphasis","focus"]),h=n.get(["emphasis","blurScope"]);c!=null&&wz(r,c,h,t)}}}function lj(n,e,t,r){var i={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return i;var a=r.getModel().getComponent(n,e);if(!a)return i;var s=r.getViewOfComponentModel(a);if(!s||!s.findHighDownDispatchers)return i;for(var o=s.findHighDownDispatchers(t),l,u=0;u<o.length;u++)if(Ft(o[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function VNe(n,e,t){var r=Ft(n),i=lj(r.componentMainType,r.componentIndex,r.componentHighDownName,t),a=i.dispatchers,s=i.focusSelf;a?(s&&Tz(r.componentMainType,r.componentIndex,t),W(a,function(o){return PZ(o,e)})):(wz(r.seriesIndex,r.focus,r.blurScope,t),r.focus==="self"&&Tz(r.componentMainType,r.componentIndex,t),PZ(n,e))}function HNe(n,e,t){she(t);var r=Ft(n),i=lj(r.componentMainType,r.componentIndex,r.componentHighDownName,t).dispatchers;i?W(i,function(a){return LZ(a,e)}):LZ(n,e)}function GNe(n,e,t){if(Az(e)){var r=e.dataType,i=n.getData(r),a=zy(i,e);Be(a)||(a=[a]),n[e.type===eN?"toggleSelect":e.type===JR?"select":"unselect"](a,r)}}function RZ(n){var e=n.getAllData();W(e,function(t){var r=t.data,i=t.type;r.eachItemGraphicEl(function(a,s){n.isSelected(s,i)?rhe(a):ihe(a)})})}function jNe(n){var e=[];return n.eachSeries(function(t){var r=t.getAllData();W(r,function(i){i.data;var a=i.type,s=t.getSelectedDataIndices();if(s.length>0){var o={dataIndex:s,seriesIndex:t.seriesIndex};a!=null&&(o.dataType=a),e.push(o)}})}),e}function Ly(n,e,t){s0(n,!0),ap(n,Hy),Ez(n,e,t)}function WNe(n){s0(n,!1)}function Yr(n,e,t,r){r?WNe(n):Ly(n,e,t)}function Ez(n,e,t){var r=Ft(n);e!=null?(r.focus=e,r.blurScope=t):r.focus&&(r.focus=null)}var NZ=["emphasis","blur","select"],XNe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function ua(n,e,t,r){t=t||"itemStyle";for(var i=0;i<NZ.length;i++){var a=NZ[i],s=e.getModel([a,t]),o=n.ensureState(a);o.style=r?r(s):s[XNe[t]]()}}function s0(n,e){var t=e===!1,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||r.__highDownDispatcher)&&(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!t)}function xA(n){return!!(n&&n.__highDownDispatcher)}function $Ne(n,e,t){var r=Ft(n);r.componentMainType=e.mainType,r.componentIndex=e.componentIndex,r.componentHighDownName=t}function YNe(n){var e=DZ[n];return e==null&&MZ<=32&&(e=DZ[n]=MZ++),e}function Az(n){var e=n.type;return e===JR||e===Sz||e===eN}function kZ(n){var e=n.type;return e===Py||e===EL}function qNe(n){var e=Qce(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var Yx=rd.CMD,KNe=[[],[],[]],OZ=Math.sqrt,ZNe=Math.atan2;function ohe(n,e){if(e){var t=n.data,r=n.len(),i,a,s,o,l,u,c=Yx.M,h=Yx.C,d=Yx.L,f=Yx.R,p=Yx.A,m=Yx.Q;for(s=0,o=0;s<r;){switch(i=t[s++],o=s,a=0,i){case c:a=1;break;case d:a=1;break;case h:a=3;break;case m:a=2;break;case p:var g=e[4],v=e[5],b=OZ(e[0]*e[0]+e[1]*e[1]),S=OZ(e[2]*e[2]+e[3]*e[3]),w=ZNe(-e[1]/S,e[0]/b);t[s]*=b,t[s++]+=g,t[s]*=S,t[s++]+=v,t[s++]*=b,t[s++]*=S,t[s++]+=w,t[s++]+=w,s+=2,o=s;break;case f:u[0]=t[s++],u[1]=t[s++],Oi(u,u,e),t[o++]=u[0],t[o++]=u[1],u[0]+=t[s++],u[1]+=t[s++],Oi(u,u,e),t[o++]=u[0],t[o++]=u[1]}for(l=0;l<a;l++){var E=KNe[l];E[0]=t[s++],E[1]=t[s++],Oi(E,E,e),t[o++]=E[0],t[o++]=E[1]}}n.increaseVersion()}}var l4=Math.sqrt,xI=Math.sin,_I=Math.cos,Jw=Math.PI;function BZ(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Cz(n,e){return(n[0]*e[0]+n[1]*e[1])/(BZ(n)*BZ(e))}function FZ(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(Cz(n,e))}function UZ(n,e,t,r,i,a,s,o,l,u,c){var h=l*(Jw/180),d=_I(h)*(n-t)/2+xI(h)*(e-r)/2,f=-1*xI(h)*(n-t)/2+_I(h)*(e-r)/2,p=d*d/(s*s)+f*f/(o*o);p>1&&(s*=l4(p),o*=l4(p));var m=(i===a?-1:1)*l4((s*s*(o*o)-s*s*(f*f)-o*o*(d*d))/(s*s*(f*f)+o*o*(d*d)))||0,g=m*s*f/o,v=m*-o*d/s,b=(n+t)/2+_I(h)*g-xI(h)*v,S=(e+r)/2+xI(h)*g+_I(h)*v,w=FZ([1,0],[(d-g)/s,(f-v)/o]),E=[(d-g)/s,(f-v)/o],T=[(-1*d-g)/s,(-1*f-v)/o],M=FZ(E,T);if(Cz(E,T)<=-1&&(M=Jw),Cz(E,T)>=1&&(M=0),M<0){var P=Math.round(M/Jw*1e6)/1e6;M=Jw*2+P%2*Jw}c.addData(u,b,S,s,o,w,M,h,a)}var QNe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,JNe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function eke(n){var e=new rd;if(!n)return e;var t=0,r=0,i=t,a=r,s,o=rd.CMD,l=n.match(QNe);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],h=c.charAt(0),d=void 0,f=c.match(JNe)||[],p=f.length,m=0;m<p;m++)f[m]=parseFloat(f[m]);for(var g=0;g<p;){var v=void 0,b=void 0,S=void 0,w=void 0,E=void 0,T=void 0,M=void 0,P=t,I=r,D=void 0,R=void 0;switch(h){case"l":t+=f[g++],r+=f[g++],d=o.L,e.addData(d,t,r);break;case"L":t=f[g++],r=f[g++],d=o.L,e.addData(d,t,r);break;case"m":t+=f[g++],r+=f[g++],d=o.M,e.addData(d,t,r),i=t,a=r,h="l";break;case"M":t=f[g++],r=f[g++],d=o.M,e.addData(d,t,r),i=t,a=r,h="L";break;case"h":t+=f[g++],d=o.L,e.addData(d,t,r);break;case"H":t=f[g++],d=o.L,e.addData(d,t,r);break;case"v":r+=f[g++],d=o.L,e.addData(d,t,r);break;case"V":r=f[g++],d=o.L,e.addData(d,t,r);break;case"C":d=o.C,e.addData(d,f[g++],f[g++],f[g++],f[g++],f[g++],f[g++]),t=f[g-2],r=f[g-1];break;case"c":d=o.C,e.addData(d,f[g++]+t,f[g++]+r,f[g++]+t,f[g++]+r,f[g++]+t,f[g++]+r),t+=f[g-2],r+=f[g-1];break;case"S":v=t,b=r,D=e.len(),R=e.data,s===o.C&&(v+=t-R[D-4],b+=r-R[D-3]),d=o.C,P=f[g++],I=f[g++],t=f[g++],r=f[g++],e.addData(d,v,b,P,I,t,r);break;case"s":v=t,b=r,D=e.len(),R=e.data,s===o.C&&(v+=t-R[D-4],b+=r-R[D-3]),d=o.C,P=t+f[g++],I=r+f[g++],t+=f[g++],r+=f[g++],e.addData(d,v,b,P,I,t,r);break;case"Q":P=f[g++],I=f[g++],t=f[g++],r=f[g++],d=o.Q,e.addData(d,P,I,t,r);break;case"q":P=f[g++]+t,I=f[g++]+r,t+=f[g++],r+=f[g++],d=o.Q,e.addData(d,P,I,t,r);break;case"T":v=t,b=r,D=e.len(),R=e.data,s===o.Q&&(v+=t-R[D-4],b+=r-R[D-3]),t=f[g++],r=f[g++],d=o.Q,e.addData(d,v,b,t,r);break;case"t":v=t,b=r,D=e.len(),R=e.data,s===o.Q&&(v+=t-R[D-4],b+=r-R[D-3]),t+=f[g++],r+=f[g++],d=o.Q,e.addData(d,v,b,t,r);break;case"A":S=f[g++],w=f[g++],E=f[g++],T=f[g++],M=f[g++],P=t,I=r,t=f[g++],r=f[g++],d=o.A,UZ(P,I,t,r,T,M,S,w,E,d,e);break;case"a":S=f[g++],w=f[g++],E=f[g++],T=f[g++],M=f[g++],P=t,I=r,t+=f[g++],r+=f[g++],d=o.A,UZ(P,I,t,r,T,M,S,w,E,d,e);break}}(h==="z"||h==="Z")&&(d=o.Z,e.addData(d),t=i,r=a),s=d}return e.toStatic(),e}var lhe=(function(n){Hr(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e})(vn);function uhe(n){return n.setData!=null}function che(n,e){var t=eke(n),r=Pe({},e);return r.buildPath=function(i){var a=uhe(i);if(a&&i.canSave()){i.appendPath(t);var s=i.getContext();s&&i.rebuildPath(s,1)}else{var s=a?i.getContext():i;s&&t.rebuildPath(s,1)}},r.applyTransform=function(i){ohe(t,i),this.dirtyShape()},r}function hhe(n,e){return new lhe(che(n,e))}function tke(n,e){var t=che(n,e),r=(function(i){Hr(a,i);function a(s){var o=i.call(this,s)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return a})(lhe);return r}function nke(n,e){for(var t=[],r=n.length,i=0;i<r;i++){var a=n[i];t.push(a.getUpdatedPathProxy(!0))}var s=new vn(e);return s.createPathProxy(),s.buildPath=function(o){if(uhe(o)){o.appendPath(t);var l=o.getContext();l&&o.rebuildPath(l,1)}},s}function uj(n,e){e=e||{};var t=new vn;return n.shape&&t.setShape(n.shape),t.setStyle(n.style),e.bakeTransform?ohe(t.path,n.getComputedTransform()):e.toLocal?t.setLocalTransform(n.getComputedTransform()):t.copyTransform(n),t.buildPath=n.buildPath,t.applyTransform=t.applyTransform,t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel,t}var rke=(function(){function n(){this.cx=0,this.cy=0,this.r=0}return n})(),sp=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new rke},e.prototype.buildPath=function(t,r){t.moveTo(r.cx+r.r,r.cy),t.arc(r.cx,r.cy,r.r,0,Math.PI*2)},e})(vn);sp.prototype.type="circle";var ike=(function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n})(),c3=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new ike},e.prototype.buildPath=function(t,r){var i=.5522848,a=r.cx,s=r.cy,o=r.rx,l=r.ry,u=o*i,c=l*i;t.moveTo(a-o,s),t.bezierCurveTo(a-o,s-c,a-u,s-l,a,s-l),t.bezierCurveTo(a+u,s-l,a+o,s-c,a+o,s),t.bezierCurveTo(a+o,s+c,a+u,s+l,a,s+l),t.bezierCurveTo(a-u,s+l,a-o,s+c,a-o,s),t.closePath()},e})(vn);c3.prototype.type="ellipse";var dhe=Math.PI,u4=dhe*2,gv=Math.sin,qx=Math.cos,ake=Math.acos,Ss=Math.atan2,zZ=Math.abs,zE=Math.sqrt,YT=Math.max,Qc=Math.min,Ju=1e-4;function ske(n,e,t,r,i,a,s,o){var l=t-n,u=r-e,c=s-i,h=o-a,d=h*l-c*u;if(!(d*d<Ju))return d=(c*(e-a)-h*(n-i))/d,[n+d*l,e+d*u]}function bI(n,e,t,r,i,a,s){var o=n-t,l=e-r,u=(s?a:-a)/zE(o*o+l*l),c=u*l,h=-u*o,d=n+c,f=e+h,p=t+c,m=r+h,g=(d+p)/2,v=(f+m)/2,b=p-d,S=m-f,w=b*b+S*S,E=i-a,T=d*m-p*f,M=(S<0?-1:1)*zE(YT(0,E*E*w-T*T)),P=(T*S-b*M)/w,I=(-T*b-S*M)/w,D=(T*S+b*M)/w,R=(-T*b+S*M)/w,B=P-g,k=I-v,V=D-g,G=R-v;return B*B+k*k>V*V+G*G&&(P=D,I=R),{cx:P,cy:I,x0:-c,y0:-h,x1:P*(i/E-1),y1:I*(i/E-1)}}function oke(n){var e;if(Be(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function lke(n,e){var t,r=YT(e.r,0),i=YT(e.r0||0,0),a=r>0,s=i>0;if(!(!a&&!s)){if(a||(r=i,i=0),i>r){var o=r;r=i,i=o}var l=e.startAngle,u=e.endAngle;if(!(isNaN(l)||isNaN(u))){var c=e.cx,h=e.cy,d=!!e.clockwise,f=zZ(u-l),p=f>u4&&f%u4;if(p>Ju&&(f=p),!(r>Ju))n.moveTo(c,h);else if(f>u4-Ju)n.moveTo(c+r*qx(l),h+r*gv(l)),n.arc(c,h,r,l,u,!d),i>Ju&&(n.moveTo(c+i*qx(u),h+i*gv(u)),n.arc(c,h,i,u,l,d));else{var m=void 0,g=void 0,v=void 0,b=void 0,S=void 0,w=void 0,E=void 0,T=void 0,M=void 0,P=void 0,I=void 0,D=void 0,R=void 0,B=void 0,k=void 0,V=void 0,G=r*qx(l),F=r*gv(l),X=i*qx(u),j=i*gv(u),Q=f>Ju;if(Q){var H=e.cornerRadius;H&&(t=oke(H),m=t[0],g=t[1],v=t[2],b=t[3]);var K=zZ(r-i)/2;if(S=Qc(K,v),w=Qc(K,b),E=Qc(K,m),T=Qc(K,g),I=M=YT(S,w),D=P=YT(E,T),(M>Ju||P>Ju)&&(R=r*qx(u),B=r*gv(u),k=i*qx(l),V=i*gv(l),f<dhe)){var te=ske(G,F,k,V,R,B,X,j);if(te){var Y=G-te[0],de=F-te[1],ge=R-te[0],se=B-te[1],he=1/gv(ake((Y*ge+de*se)/(zE(Y*Y+de*de)*zE(ge*ge+se*se)))/2),fe=zE(te[0]*te[0]+te[1]*te[1]);I=Qc(M,(r-fe)/(he+1)),D=Qc(P,(i-fe)/(he-1))}}}if(!Q)n.moveTo(c+G,h+F);else if(I>Ju){var Ee=Qc(v,I),Ce=Qc(b,I),Re=bI(k,V,G,F,r,Ee,d),He=bI(R,B,X,j,r,Ce,d);n.moveTo(c+Re.cx+Re.x0,h+Re.cy+Re.y0),I<M&&Ee===Ce?n.arc(c+Re.cx,h+Re.cy,I,Ss(Re.y0,Re.x0),Ss(He.y0,He.x0),!d):(Ee>0&&n.arc(c+Re.cx,h+Re.cy,Ee,Ss(Re.y0,Re.x0),Ss(Re.y1,Re.x1),!d),n.arc(c,h,r,Ss(Re.cy+Re.y1,Re.cx+Re.x1),Ss(He.cy+He.y1,He.cx+He.x1),!d),Ce>0&&n.arc(c+He.cx,h+He.cy,Ce,Ss(He.y1,He.x1),Ss(He.y0,He.x0),!d))}else n.moveTo(c+G,h+F),n.arc(c,h,r,l,u,!d);if(!(i>Ju)||!Q)n.lineTo(c+X,h+j);else if(D>Ju){var Ee=Qc(m,D),Ce=Qc(g,D),Re=bI(X,j,R,B,i,-Ce,d),He=bI(G,F,k,V,i,-Ee,d);n.lineTo(c+Re.cx+Re.x0,h+Re.cy+Re.y0),D<P&&Ee===Ce?n.arc(c+Re.cx,h+Re.cy,D,Ss(Re.y0,Re.x0),Ss(He.y0,He.x0),!d):(Ce>0&&n.arc(c+Re.cx,h+Re.cy,Ce,Ss(Re.y0,Re.x0),Ss(Re.y1,Re.x1),!d),n.arc(c,h,i,Ss(Re.cy+Re.y1,Re.cx+Re.x1),Ss(He.cy+He.y1,He.cx+He.x1),d),Ee>0&&n.arc(c+He.cx,h+He.cy,Ee,Ss(He.y1,He.x1),Ss(He.y0,He.x0),!d))}else n.lineTo(c+X,h+j),n.arc(c,h,i,u,l,d)}n.closePath()}}}var uke=(function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n})(),zs=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new uke},e.prototype.buildPath=function(t,r){lke(t,r)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e})(vn);zs.prototype.type="sector";var cke=(function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n})(),p2=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new cke},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,s=Math.PI*2;t.moveTo(i+r.r,a),t.arc(i,a,r.r,0,s,!1),t.moveTo(i+r.r0,a),t.arc(i,a,r.r0,0,s,!0)},e})(vn);p2.prototype.type="ring";function hke(n,e,t,r){var i=[],a=[],s=[],o=[],l,u,c,h;if(r){c=[1/0,1/0],h=[-1/0,-1/0];for(var d=0,f=n.length;d<f;d++)tg(c,c,n[d]),ng(h,h,n[d]);tg(c,c,r[0]),ng(h,h,r[1])}for(var d=0,f=n.length;d<f;d++){var p=n[d];if(t)l=n[d?d-1:f-1],u=n[(d+1)%f];else if(d===0||d===f-1){i.push(Rf(n[d]));continue}else l=n[d-1],u=n[d+1];i0(a,u,l),yL(a,a,e);var m=YU(p,l),g=YU(p,u),v=m+g;v!==0&&(m/=v,g/=v),yL(s,a,-m),yL(o,a,g);var b=DK([],p,s),S=DK([],p,o);r&&(ng(b,b,c),tg(b,b,h),ng(S,S,c),tg(S,S,h)),i.push(b),i.push(S)}return t&&i.push(i.shift()),i}function fhe(n,e,t){var r=e.smooth,i=e.points;if(i&&i.length>=2){if(r){var a=hke(i,r,t,e.smoothConstraint);n.moveTo(i[0][0],i[0][1]);for(var s=i.length,o=0;o<(t?s:s-1);o++){var l=a[o*2],u=a[o*2+1],c=i[(o+1)%s];n.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{n.moveTo(i[0][0],i[0][1]);for(var o=1,h=i.length;o<h;o++)n.lineTo(i[o][0],i[o][1])}t&&n.closePath()}}var dke=(function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n})(),Vs=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new dke},e.prototype.buildPath=function(t,r){fhe(t,r,!0)},e})(vn);Vs.prototype.type="polygon";var fke=(function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n})(),gs=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new fke},e.prototype.buildPath=function(t,r){fhe(t,r,!1)},e})(vn);gs.prototype.type="polyline";var pke={},mke=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n})(),Xi=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new mke},e.prototype.buildPath=function(t,r){var i,a,s,o;if(this.subPixelOptimize){var l=o3(pke,r,this.style);i=l.x1,a=l.y1,s=l.x2,o=l.y2}else i=r.x1,a=r.y1,s=r.x2,o=r.y2;var u=r.percent;u!==0&&(t.moveTo(i,a),u<1&&(s=i*(1-u)+s*u,o=a*(1-u)+o*u),t.lineTo(s,o))},e.prototype.pointAt=function(t){var r=this.shape;return[r.x1*(1-t)+r.x2*t,r.y1*(1-t)+r.y2*t]},e})(vn);Xi.prototype.type="line";var Eo=[],gke=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n})();function VZ(n,e,t){var r=n.cpx2,i=n.cpy2;return r!=null||i!=null?[(t?HK:ba)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?HK:ba)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?tz:Wa)(n.x1,n.cpx1,n.x2,e),(t?tz:Wa)(n.y1,n.cpy1,n.y2,e)]}var m2=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new gke},e.prototype.buildPath=function(t,r){var i=r.x1,a=r.y1,s=r.x2,o=r.y2,l=r.cpx1,u=r.cpy1,c=r.cpx2,h=r.cpy2,d=r.percent;d!==0&&(t.moveTo(i,a),c==null||h==null?(d<1&&(fA(i,l,s,d,Eo),l=Eo[1],s=Eo[2],fA(a,u,o,d,Eo),u=Eo[1],o=Eo[2]),t.quadraticCurveTo(l,u,s,o)):(d<1&&(_g(i,l,c,s,d,Eo),l=Eo[1],c=Eo[2],s=Eo[3],_g(a,u,h,o,d,Eo),u=Eo[1],h=Eo[2],o=Eo[3]),t.bezierCurveTo(l,u,c,h,s,o)))},e.prototype.pointAt=function(t){return VZ(this.shape,t,!1)},e.prototype.tangentAt=function(t){var r=VZ(this.shape,t,!0);return BS(r,r)},e})(vn);m2.prototype.type="bezier-curve";var vke=(function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n})(),h3=(function(n){Hr(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new vke},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,s=Math.max(r.r,0),o=r.startAngle,l=r.endAngle,u=r.clockwise,c=Math.cos(o),h=Math.sin(o);t.moveTo(c*s+i,h*s+a),t.arc(i,a,s,o,l,!u)},e})(vn);h3.prototype.type="arc";var d3=(function(n){Hr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,r=this.shapeChanged(),i=0;i<t.length;i++)r=r||t[i].shapeChanged();r&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],r=this.getGlobalScale(),i=0;i<t.length;i++)t[i].path||t[i].createPathProxy(),t[i].path.setScale(r[0],r[1],t[i].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,r){for(var i=r.paths||[],a=0;a<i.length;a++)i[a].buildPath(t,i[a].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],r=0;r<t.length;r++)t[r].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),vn.prototype.getBoundingRect.call(this)},e})(vn),phe=(function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n})(),VS=(function(n){Hr(e,n);function e(t,r,i,a,s,o){var l=n.call(this,s)||this;return l.x=t??0,l.y=r??0,l.x2=i??1,l.y2=a??0,l.type="linear",l.global=o||!1,l}return e})(phe),mhe=(function(n){Hr(e,n);function e(t,r,i,a,s){var o=n.call(this,a)||this;return o.x=t??.5,o.y=r??.5,o.r=i??.5,o.type="radial",o.global=s||!1,o}return e})(phe),c4=Math.min,yke=Math.max,SI=Math.abs,vv=[0,0],yv=[0,0],Oa=nce(),wI=Oa.minTv,TI=Oa.maxTv,ghe=(function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new Ct;for(var r=0;r<2;r++)this._axes[r]=new Ct;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var r=this._corners,i=this._axes,a=e.x,s=e.y,o=a+e.width,l=s+e.height;if(r[0].set(a,s),r[1].set(o,s),r[2].set(o,l),r[3].set(a,l),t)for(var u=0;u<4;u++)r[u].transform(t);Ct.sub(i[0],r[1],r[0]),Ct.sub(i[1],r[3],r[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(r[0])},n.prototype.intersect=function(e,t,r){var i=!0,a=!t;return t&&Ct.set(t,0,0),Oa.reset(r,!a),!this._intersectCheckOneSide(this,e,a,1)&&(i=!1,a)||!this._intersectCheckOneSide(e,this,a,-1)&&(i=!1,a)||!a&&!Oa.negativeSize&&Ct.copy(t,i?Oa.useDir?Oa.dirMinTv:wI:TI),i},n.prototype._intersectCheckOneSide=function(e,t,r,i){for(var a=!0,s=0;s<2;s++){var o=e._axes[s];if(e._getProjMinMaxOnAxis(s,e._corners,vv),e._getProjMinMaxOnAxis(s,t._corners,yv),Oa.negativeSize||vv[1]<yv[0]||vv[0]>yv[1]){if(a=!1,Oa.negativeSize||r)return a;var l=SI(yv[0]-vv[1]),u=SI(vv[0]-yv[1]);c4(l,u)>TI.len()&&(l<u?Ct.scale(TI,o,-l*i):Ct.scale(TI,o,u*i))}else if(!r){var l=SI(yv[0]-vv[1]),u=SI(vv[0]-yv[1]);(Oa.useDir||c4(l,u)<wI.len())&&((l<u||!Oa.bidirectional)&&(Ct.scale(wI,o,l*i),Oa.useDir&&Oa.calcDirMTV()),(l>=u||!Oa.bidirectional)&&(Ct.scale(wI,o,-u*i),Oa.useDir&&Oa.calcDirMTV()))}}return a},n.prototype._getProjMinMaxOnAxis=function(e,t,r){for(var i=this._axes[e],a=this._origin,s=t[0].dot(i)+a[e],o=s,l=s,u=1;u<t.length;u++){var c=t[u].dot(i)+a[e];o=c4(c,o),l=yke(c,l)}r[0]=o+Oa.touchThreshold,r[1]=l-Oa.touchThreshold,Oa.negativeSize=r[1]<r[0]},n})(),xke=[],_ke=(function(n){Hr(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,r){t.call(r,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,r){r?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,r){r=r||!1;for(var i=0;i<t.length;i++)this.addDisplayable(t[i],r)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var r=this._cursor;r<this._displayables.length;r++)t&&t(this._displayables[r]);for(var r=0;r<this._temporaryDisplayables.length;r++)t&&t(this._temporaryDisplayables[r])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var r=this._displayables[t];r.parent=this,r.update(),r.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var r=this._temporaryDisplayables[t];r.parent=this,r.update(),r.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Rt(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var i=this._displayables[r],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(xke)),t.union(a)}this._rect=t}return this._rect},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var s=0;s<this._displayables.length;s++){var o=this._displayables[s];if(o.contain(t,r))return!0}return!1},e})(Nu),vhe=mn();function HS(n,e,t,r,i){var a;if(e&&e.ecModel){var s=e.ecModel.getUpdatePayload();a=s&&s.animation}var o=e&&e.isAnimationEnabled(),l=n==="update";if(o){var u=void 0,c=void 0,h=void 0;r?(u=dt(r.duration,200),c=dt(r.easing,"cubicOut"),h=0):(u=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),h=e.getShallow(l?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(u=a.duration),a.easing!=null&&(c=a.easing),a.delay!=null&&(h=a.delay)),St(h)&&(h=h(t,i)),St(u)&&(u=u(t));var d={duration:u||0,delay:h,easing:c};return d}else return null}function cj(n,e,t,r,i,a,s){var o=!1,l;St(i)?(s=a,a=i,i=null):Lt(i)&&(a=i.cb,s=i.during,o=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=n==="leave";u||e.stopAnimation("leave");var c=HS(n,r,i,u?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null);if(c&&c.duration>0){var h=c.duration,d=c.delay,f=c.easing,p={duration:h,delay:d||0,easing:f,done:a,force:!!a||!!s,setToFinal:!u,scope:n,during:s};o?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!o&&e.attr(t),s&&s(1),a&&a()}function Vn(n,e,t,r,i,a){cj("update",n,e,t,r,i,a)}function Vr(n,e,t,r,i,a){cj("enter",n,e,t,r,i,a)}function xb(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function bg(n,e,t,r,i,a){xb(n)||cj("leave",n,e,t,r,i,a)}function HZ(n,e,t,r){n.removeTextContent(),n.removeTextGuideLine(),bg(n,{style:{opacity:0}},e,t,r)}function Nf(n,e,t){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(i){i.isGroup||HZ(i,e,t,r)}):HZ(n,e,t,r)}function ku(n){vhe(n).oldStyle=n.style}function bke(n){return vhe(n).oldStyle}var Mz={},Yt=["x","y"],Yi=["width","height"];function Ske(n){return vn.extend(n)}var wke=tke;function Tke(n,e){return wke(n,e)}function Nc(n,e){Mz[n]=e}function nN(n){if(Mz.hasOwnProperty(n))return Mz[n]}function _A(n,e,t,r){var i=hhe(n,e);return t&&(r==="center"&&(t=xhe(t,i.getBoundingRect())),_he(i,t)),i}function yhe(n,e,t){var r=new Ka({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(i){if(t==="center"){var a={width:i.width,height:i.height};r.setStyle(xhe(e,a))}}});return r}function xhe(n,e){var t=e.width/e.height,r=n.height*t,i;r<=n.width?i=n.height:(r=n.width,i=r/t);var a=n.x+n.width/2,s=n.y+n.height/2;return{x:a-r/2,y:s-i/2,width:r,height:i}}var wu=nke;function _he(n,e){if(n.applyTransform){var t=n.getBoundingRect(),r=t.calculateTransform(e);n.applyTransform(r)}}function rS(n,e){return o3(n,n,{lineWidth:e}),n}function Eke(n,e){return qce(n,n,e),n}var AL=Il;function Ry(n,e){for(var t=Zk([]);n&&n!==e;)Wh(t,n.getLocalTransform(),t),n=n.parent;return t}function Ac(n,e,t){return e&&!Fs(e)&&(e=If.getLocalTransform(e)),t&&(e=Ic([],e)),Oi([],n,e)}function f3(n,e,t){var r=e[4]===0||e[5]===0||e[0]===0?1:Bh(2*e[4]/e[0]),i=e[4]===0||e[5]===0||e[2]===0?1:Bh(2*e[4]/e[2]),a=[n==="left"?-r:n==="right"?r:0,n==="top"?-i:n==="bottom"?i:0];return a=Ac(a,e,t),Bh(a[0])>Bh(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function GZ(n){return!n.isGroup}function Ake(n){return n.shape!=null}function g2(n,e,t){if(!n||!e)return;function r(s){var o={};return s.traverse(function(l){GZ(l)&&l.anid&&(o[l.anid]=l)}),o}function i(s){var o={x:s.x,y:s.y,rotation:s.rotation};return Ake(s)&&(o.shape=Tt(s.shape)),o}var a=r(n);e.traverse(function(s){if(GZ(s)&&s.anid){var o=a[s.anid];if(o){var l=i(s);s.attr(i(o)),Vn(s,l,t,Ft(s).dataIndex)}}})}function bhe(n,e){return Ue(n,function(t){var r=t[0];r=Ni(r,e.x),r=Rl(r,e.x+e.width);var i=t[1];return i=Ni(i,e.y),i=Rl(i,e.y+e.height),[r,i]})}function Cke(n,e){var t=Ni(n.x,e.x),r=Rl(n.x+n.width,e.x+e.width),i=Ni(n.y,e.y),a=Rl(n.y+n.height,e.y+e.height);if(r>=t&&a>=i)return{x:t,y:i,width:r-t,height:a-i}}function v2(n,e,t){var r=Pe({rectHover:!0},e),i=r.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(i.image=n.slice(8),Pt(i,t),new Ka(r)):_A(n.replace("path://",""),r,t,"center")}function qT(n,e,t,r,i){for(var a=0,s=i[i.length-1];a<i.length;a++){var o=i[a];if(She(n,e,t,r,o[0],o[1],s[0],s[1]))return!0;s=o}}function She(n,e,t,r,i,a,s,o){var l=t-n,u=r-e,c=s-i,h=o-a,d=h4(c,h,l,u);if(Mke(d))return!1;var f=n-i,p=e-a,m=h4(f,p,l,u)/d;if(m<0||m>1)return!1;var g=h4(f,p,c,h)/d;return!(g<0||g>1)}function h4(n,e,t,r){return n*r-t*e}function Mke(n){return n<=1e-6&&n>=-1e-6}function Gy(n,e,t,r,i){return e==null||(Ln(e)?Zr[0]=Zr[1]=Zr[2]=Zr[3]=e:(Zr[0]=e[0],Zr[1]=e[1],Zr[2]=e[2],Zr[3]=e[3]),r&&(Zr[0]=Ni(0,Zr[0]),Zr[1]=Ni(0,Zr[1]),Zr[2]=Ni(0,Zr[2]),Zr[3]=Ni(0,Zr[3])),t&&(Zr[0]=-Zr[0],Zr[1]=-Zr[1],Zr[2]=-Zr[2],Zr[3]=-Zr[3]),jZ(n,Zr,"x","width",3,1,i&&i[0]||0),jZ(n,Zr,"y","height",0,2,i&&i[1]||0)),n}var Zr=[0,0,0,0];function jZ(n,e,t,r,i,a,s){var o=e[a]+e[i],l=n[r];n[r]+=o,s=Ni(0,Rl(s,l)),n[r]<s?(n[r]=s,n[t]+=e[i]>=0?-e[i]:e[a]>=0?l+e[a]:Bh(o)>1e-8?(l-s)*e[i]/o:0):n[t]-=e[i]}function op(n){var e=n.itemTooltipOption,t=n.componentModel,r=n.itemName,i=Ke(e)?{formatter:e}:e,a=t.mainType,s=t.componentIndex,o={componentType:a,name:r,$vars:["name"]};o[a+"Index"]=s;var l=n.formatterParamsExtra;l&&W(An(l),function(c){it(o,c)||(o[c]=l[c],o.$vars.push(c))});var u=Ft(n.el);u.componentMainType=a,u.componentIndex=s,u.tooltipConfig={name:r,option:Pt({content:r,encodeHTMLContent:!0,formatterParams:o},i)}}function Dz(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function Ng(n,e){if(n)if(Be(n))for(var t=0;t<n.length;t++)Dz(n[t],e);else Dz(n,e)}function hj(n){return!n||Bh(n[1])<EI&&Bh(n[2])<EI||Bh(n[0])<EI&&Bh(n[3])<EI}var EI=1e-5;function bA(n,e){return n?Rt.copy(n,e):e.clone()}function dj(n,e){return e?Qk(n||Ya(),e):void 0}function jy(n){return{z:n.get("z")||0,zlevel:n.get("zlevel")||0}}function whe(n){var e=-1/0,t=1/0;Dz(n,function(a){r(a),r(a.getTextContent()),r(a.getTextGuideLine())});function r(a){if(!(!a||a.isGroup)){var s=a.currentStates;if(s.length)for(var o=0;o<s.length;o++)i(a.states[s[o]]);i(a)}}function i(a){if(a){var s=a.z2;s>e&&(e=s),s<t&&(t=s)}}return t>e&&(t=e=0),{min:t,max:e}}function p3(n,e,t){The(n,e,t,-1/0)}function The(n,e,t,r){if(n.ignoreModelZ)return r;var i=n.getTextContent(),a=n.getTextGuideLine(),s=n.isGroup;if(s)for(var o=n.childrenRef(),l=0;l<o.length;l++)r=Ni(The(o[l],e,t,r),r);else n.z=e,n.zlevel=t,r=Ni(n.z2||0,r);if(i&&(i.z=e,i.zlevel=t,isFinite(r)&&(i.z2=r+2)),a){var u=n.textGuideLineConfig;a.z=e,a.zlevel=t,isFinite(r)&&(a.z2=r+(u&&u.showAbove?1:-1))}return r}Nc("circle",sp);Nc("ellipse",c3);Nc("sector",zs);Nc("ring",p2);Nc("polygon",Vs);Nc("polyline",gs);Nc("rect",fn);Nc("line",Xi);Nc("bezierCurve",m2);Nc("arc",h3);const ax=Object.freeze(Object.defineProperty({__proto__:null,Arc:h3,BezierCurve:m2,BoundingRect:Rt,Circle:sp,CompoundPath:d3,Ellipse:c3,Group:wt,Image:Ka,IncrementalDisplayable:_ke,Line:Xi,LinearGradient:VS,OrientedBoundingRect:ghe,Path:vn,Point:Ct,Polygon:Vs,Polyline:gs,RadialGradient:mhe,Rect:fn,Ring:p2,Sector:zs,Text:On,WH:Yi,XY:Yt,applyTransform:Ac,calcZ2Range:whe,clipPointsByRect:bhe,clipRectByRect:Cke,createIcon:v2,ensureCopyRect:bA,ensureCopyTransform:dj,expandOrShrinkRect:Gy,extendPath:Tke,extendShape:Ske,getShapeClass:nN,getTransform:Ry,groupTransition:g2,initProps:Vr,isBoundingRectAxisAligned:hj,isElementRemoved:xb,lineLineIntersect:She,linePolygonIntersect:qT,makeImage:yhe,makePath:_A,mergePath:wu,registerShape:Nc,removeElement:bg,removeElementWithFadeOut:Nf,resizePath:_he,retrieveZInfo:jy,setTooltipConfig:op,subPixelOptimize:AL,subPixelOptimizeLine:rS,subPixelOptimizeRect:Eke,transformDirection:f3,traverseElements:Ng,traverseUpdateZ:p3,updateProps:Vn},Symbol.toStringTag,{value:"Module"}));var m3={};function Ehe(n,e){for(var t=0;t<yo.length;t++){var r=yo[t],i=e[r],a=n.ensureState(r);a.style=a.style||{},a.style.text=i}var s=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(s,!0)}function Iz(n,e,t){var r=n.labelFetcher,i=n.labelDataIndex,a=n.labelDimIndex,s=e.normal,o;r&&(o=r.getFormattedLabel(i,"normal",null,a,s&&s.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=St(n.defaultText)?n.defaultText(i,n,t):n.defaultText);for(var l={normal:o},u=0;u<yo.length;u++){var c=yo[u],h=e[c];l[c]=dt(r?r.getFormattedLabel(i,c,null,a,h&&h.get("formatter")):null,o)}return l}function Aa(n,e,t,r){t=t||m3;for(var i=n instanceof On,a=!1,s=0;s<yA.length;s++){var o=e[yA[s]];if(o&&o.getShallow("show")){a=!0;break}}var l=i?n:n.getTextContent();if(a){i||(l||(l=new On,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var u=Iz(t,e),c=e.normal,h=!!c.getShallow("show"),d=Er(c,r&&r.normal,t,!1,!i);d.text=u.normal,i||n.setTextConfig(rN(c,t,!1));for(var s=0;s<yo.length;s++){var f=yo[s],o=e[f];if(o){var p=l.ensureState(f),m=!!dt(o.getShallow("show"),h);if(m!==h&&(p.ignore=!m),p.style=Er(o,r&&r[f],t,!0,!i),p.style.text=u[f],!i){var g=n.ensureState(f);g.textConfig=rN(o,t,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(d.x=l.style.x),l.style.y!=null&&(d.y=l.style.y),l.ignore=!h,l.useStyle(d),l.dirty(),t.enableTextSetter&&(GS(l).setLabelText=function(v){var b=Iz(t,e,v);Ehe(l,b)})}else l&&(l.ignore=!0);n.dirty()}function ca(n,e){e=e||"label";for(var t={normal:n.getModel(e)},r=0;r<yo.length;r++){var i=yo[r];t[i]=n.getModel([i,e])}return t}function Er(n,e,t,r,i){var a={};return Dke(a,n,t,r,i),e&&Pe(a,e),a}function rN(n,e,t){e=e||{};var r={},i,a=n.getShallow("rotate"),s=dt(n.getShallow("distance"),t?null:5),o=n.getShallow("offset");return i=n.getShallow("position")||(t?null:"inside"),i==="outside"&&(i=e.defaultOutsidePosition||"top"),i!=null&&(r.position=i),o!=null&&(r.offset=o),a!=null&&(a*=Math.PI/180,r.rotation=a),s!=null&&(r.distance=s),r.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",e.autoOverflowArea!=null&&(r.autoOverflowArea=e.autoOverflowArea),e.layoutRect!=null&&(r.layoutRect=e.layoutRect),r}function Dke(n,e,t,r,i){t=t||m3;var a=e.ecModel,s=a&&a.option.textStyle,o=Ike(e),l;if(o){l={};var u="richInheritPlainLabel",c=dt(e.get(u),a?a.get(u):void 0);for(var h in o)if(o.hasOwnProperty(h)){var d=e.getModel(["rich",h]);YZ(l[h]={},d,s,e,c,t,r,i,!1,!0)}}l&&(n.rich=l);var f=e.get("overflow");f&&(n.overflow=f);var p=e.get("lineOverflow");p&&(n.lineOverflow=p);var m=n,g=e.get("minMargin");if(g!=null)g=Ln(g)?g/2:0,m.margin=[g,g,g,g],m.__marginType=rb.minMargin;else{var v=e.get("textMargin");v!=null&&(m.margin=qk(v),m.__marginType=rb.textMargin)}YZ(n,e,s,null,null,t,r,i,!0,!1)}function Ike(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||m3).rich;if(t){e=e||{};for(var r=An(t),i=0;i<r.length;i++){var a=r[i];e[a]=1}}n=n.parentModel}return e}var WZ=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],XZ=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],$Z=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function YZ(n,e,t,r,i,a,s,o,l,u){t=!s&&t||m3;var c=a&&a.inheritColor,h=e.getShallow("color"),d=e.getShallow("textBorderColor"),f=dt(e.getShallow("opacity"),t.opacity);(h==="inherit"||h==="auto")&&(c?h=c:h=null),(d==="inherit"||d==="auto")&&(c?d=c:d=null),o||(h=h||t.color,d=d||t.textBorderColor),h!=null&&(n.fill=h),d!=null&&(n.stroke=d);var p=dt(e.getShallow("textBorderWidth"),t.textBorderWidth);p!=null&&(n.lineWidth=p);var m=dt(e.getShallow("textBorderType"),t.textBorderType);m!=null&&(n.lineDash=m);var g=dt(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);g!=null&&(n.lineDashOffset=g),!s&&f==null&&!u&&(f=a&&a.defaultOpacity),f!=null&&(n.opacity=f),!s&&!o&&n.fill==null&&a.inheritColor&&(n.fill=a.inheritColor);for(var v=0;v<WZ.length;v++){var b=WZ[v],S=i!==!1&&r?Ll(e.getShallow(b),r.getShallow(b),t[b]):dt(e.getShallow(b),t[b]);S!=null&&(n[b]=S)}for(var v=0;v<XZ.length;v++){var b=XZ[v],S=e.getShallow(b);S!=null&&(n[b]=S)}if(n.verticalAlign==null){var w=e.getShallow("baseline");w!=null&&(n.verticalAlign=w)}if(!l||!a.disableBox){for(var v=0;v<$Z.length;v++){var b=$Z[v],S=e.getShallow(b);S!=null&&(n[b]=S)}var E=e.getShallow("borderType");E!=null&&(n.borderDash=E),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&c&&(n.backgroundColor=c),(n.borderColor==="auto"||n.borderColor==="inherit")&&c&&(n.borderColor=c)}}function fj(n,e){var t=e&&e.getModel("textStyle");return Mu([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var GS=mn();function Ahe(n,e,t,r){if(n){var i=GS(n);i.prevValue=i.value,i.value=t;var a=e.normal;i.valueAnimation=a.get("valueAnimation"),i.valueAnimation&&(i.precision=a.get("precision"),i.defaultInterpolatedText=r,i.statesModels=e)}}function Che(n,e,t,r,i){var a=GS(n);if(!a.valueAnimation||a.prevValue===a.value)return;var s=a.defaultInterpolatedText,o=dt(a.interpolatedValue,a.prevValue),l=a.value;function u(c){var h=zce(t,a.precision,o,l,c);a.interpolatedValue=c===1?null:h;var d=Iz({labelDataIndex:e,labelFetcher:i,defaultText:s?s(h):h+""},a.statesModels,h);Ehe(n,d)}n.percent=0,(a.prevValue==null?Vr:Vn)(n,{percent:1},r,e,null,u)}var rb={minMargin:1,textMargin:2},Pke=["textStyle","color"],d4=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],f4=new On,Lke=(function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(Pke):null)},n.prototype.getFont=function(){return fj({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<d4.length;r++)t[d4[r]]=this.getShallow(d4[r]);return f4.useStyle(t),f4.update(),f4.getBoundingRect()},n})(),Mhe=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Rke=Vy(Mhe),Nke=(function(){function n(){}return n.prototype.getLineStyle=function(e){return Rke(this,e)},n})(),Dhe=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],kke=Vy(Dhe),Oke=(function(){function n(){}return n.prototype.getItemStyle=function(e,t){return kke(this,e,t)},n})(),Sn=(function(){function n(e,t,r){this.parentModel=t,this.ecModel=r,this.option=e}return n.prototype.init=function(e,t,r){},n.prototype.mergeOption=function(e,t){en(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var r=this.option,i=r==null?r:r[e];if(i==null&&!t){var a=this.parentModel;a&&(i=a.getShallow(e))}return i},n.prototype.getModel=function(e,t){var r=e!=null,i=r?this.parsePath(e):null,a=r?this._doGet(i):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new n(a,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Tt(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!bn.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var r=this.option;if(!e)return r;for(var i=0;i<e.length&&!(e[i]&&(r=r&&typeof r=="object"?r[e[i]]:null,r==null));i++);return r==null&&t&&(r=t._doGet(this.resolveParentPath(e),t.parentModel)),r},n})();ej(Sn);GRe(Sn);Zi(Sn,Nke);Zi(Sn,Oke);Zi(Sn,YRe);Zi(Sn,Lke);var Bke=Math.round(Math.random()*10);function jS(n){return[n||"",Bke++].join("_")}function Fke(n){var e={};n.registerSubTypeDefaulter=function(t,r){var i=Uh(t);e[i.main]=r},n.determineSubType=function(t,r){var i=r.type;if(!i){var a=Uh(t).main;n.hasSubTypes(t)&&e[a]&&(i=e[a](r))}return i}}function Uke(n,e){n.topologicalTravel=function(a,s,o,l){if(!a.length)return;var u=t(s),c=u.graph,h=u.noEntryList,d={};for(W(a,function(b){d[b]=!0});h.length;){var f=h.pop(),p=c[f],m=!!d[f];m&&(o.call(l,f,p.originalDeps.slice()),delete d[f]),W(p.successor,m?v:g)}W(d,function(){var b="";throw new Error(b)});function g(b){c[b].entryCount--,c[b].entryCount===0&&h.push(b)}function v(b){d[b]=!0,g(b)}};function t(a){var s={},o=[];return W(a,function(l){var u=r(s,l),c=u.originalDeps=e(l),h=i(c,a);u.entryCount=h.length,u.entryCount===0&&o.push(l),W(h,function(d){Jt(u.predecessor,d)<0&&u.predecessor.push(d);var f=r(s,d);Jt(f.successor,d)<0&&f.successor.push(l)})}),{graph:s,noEntryList:o}}function r(a,s){return a[s]||(a[s]={predecessor:[],successor:[]}),a[s]}function i(a,s){var o=[];return W(a,function(l){Jt(s,l)>=0&&o.push(l)}),o}}function kg(n,e){return en(en({},n,!0),e,!0)}const zke={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},Vke={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var iN="ZH",pj="EN",_b=pj,CL={},mj={},Ihe=bn.domSupported?(function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage||_b).toUpperCase();return n.indexOf(iN)>-1?iN:_b})():_b;function Phe(n,e){n=n.toUpperCase(),mj[n]=new Sn(e),CL[n]=e}function Hke(n){if(Ke(n)){var e=CL[n.toUpperCase()]||{};return n===iN||n===pj?Tt(e):en(Tt(e),Tt(CL[_b]),!1)}else return en(Tt(n),Tt(CL[_b]),!1)}function Pz(n){return mj[n]}function Gke(){return mj[_b]}Phe(pj,zke);Phe(iN,Vke);var Lz=null;function jke(n){Lz||(Lz=n)}function $i(){return Lz}var gj=1e3,vj=gj*60,VE=vj*60,Tu=VE*24,qZ=Tu*365,Wke={year:/({yyyy}|{yy})/,month:/({MMMM}|{MMM}|{MM}|{M})/,day:/({dd}|{d})/,hour:/({HH}|{H}|{hh}|{h})/,minute:/({mm}|{m})/,second:/({ss}|{s})/,millisecond:/({SSS}|{S})/},ML={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}"},Xke="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}",AI="{yyyy}-{MM}-{dd}",KZ={year:"{yyyy}",month:"{yyyy}-{MM}",day:AI,hour:AI+" "+ML.hour,minute:AI+" "+ML.minute,second:AI+" "+ML.second,millisecond:Xke},wl=["year","month","day","hour","minute","second","millisecond"],$ke=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Yke(n){return!Ke(n)&&!St(n)?qke(n):n}function qke(n){n=n||{};var e={},t=!0;return W(wl,function(r){t&&(t=n[r]==null)}),W(wl,function(r,i){var a=n[r];e[r]={};for(var s=null,o=i;o>=0;o--){var l=wl[o],u=Lt(a)&&!Be(a)?a[l]:a,c=void 0;Be(u)?(c=u.slice(),s=c[0]||""):Ke(u)?(s=u,c=[s]):(s==null?s=ML[r]:Wke[l].test(s)||(s=e[l][l][0]+" "+s),c=[s],t&&(c[1]="{primary|"+s+"}")),e[r][l]=c}}),e}function Rp(n,e){return n+="","0000".substr(0,e-n.length)+n}function HE(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function Kke(n){return n===HE(n)}function Zke(n){switch(n){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function g3(n,e,t,r){var i=ix(n),a=i[Lhe(t)](),s=i[yj(t)]()+1,o=Math.floor((s-1)/3)+1,l=i[xj(t)](),u=i["get"+(t?"UTC":"")+"Day"](),c=i[_j(t)](),h=(c-1)%12+1,d=i[bj(t)](),f=i[Sj(t)](),p=i[wj(t)](),m=c>=12?"pm":"am",g=m.toUpperCase(),v=r instanceof Sn?r:Pz(r||Ihe)||Gke(),b=v.getModel("time"),S=b.get("month"),w=b.get("monthAbbr"),E=b.get("dayOfWeek"),T=b.get("dayOfWeekAbbr");return(e||"").replace(/{a}/g,m+"").replace(/{A}/g,g+"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,Rp(a%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,S[s-1]).replace(/{MMM}/g,w[s-1]).replace(/{MM}/g,Rp(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,Rp(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,E[u]).replace(/{ee}/g,T[u]).replace(/{e}/g,u+"").replace(/{HH}/g,Rp(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,Rp(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,Rp(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,Rp(f,2)).replace(/{s}/g,f+"").replace(/{SSS}/g,Rp(p,3)).replace(/{S}/g,p+"")}function Qke(n,e,t,r,i){var a=null;if(Ke(t))a=t;else if(St(t)){var s={time:n.time,level:n.time.level},o=$i();o&&o.makeAxisLabelFormatterParamBreak(s,n.break),a=t(n.value,e,s)}else{var l=n.time;if(l){var u=t[l.lowerTimeUnit][l.upperTimeUnit];a=u[Math.min(l.level,u.length-1)]||""}else{var c=ib(n.value,i);a=t[c][c][0]}}return g3(new Date(n.value),a,i,r)}function ib(n,e){var t=ix(n),r=t[yj(e)]()+1,i=t[xj(e)](),a=t[_j(e)](),s=t[bj(e)](),o=t[Sj(e)](),l=t[wj(e)](),u=l===0,c=u&&o===0,h=c&&s===0,d=h&&a===0,f=d&&i===1,p=f&&r===1;return p?"year":f?"month":d?"day":h?"hour":c?"minute":u?"second":"millisecond"}function Rz(n,e,t){switch(e){case"year":n[Rhe(t)](0);case"month":n[Nhe(t)](1);case"day":n[khe(t)](0);case"hour":n[Ohe(t)](0);case"minute":n[Bhe(t)](0);case"second":n[Fhe(t)](0)}return n}function Lhe(n){return n?"getUTCFullYear":"getFullYear"}function yj(n){return n?"getUTCMonth":"getMonth"}function xj(n){return n?"getUTCDate":"getDate"}function _j(n){return n?"getUTCHours":"getHours"}function bj(n){return n?"getUTCMinutes":"getMinutes"}function Sj(n){return n?"getUTCSeconds":"getSeconds"}function wj(n){return n?"getUTCMilliseconds":"getMilliseconds"}function Jke(n){return n?"setUTCFullYear":"setFullYear"}function Rhe(n){return n?"setUTCMonth":"setMonth"}function Nhe(n){return n?"setUTCDate":"setDate"}function khe(n){return n?"setUTCHours":"setHours"}function Ohe(n){return n?"setUTCMinutes":"setMinutes"}function Bhe(n){return n?"setUTCSeconds":"setSeconds"}function Fhe(n){return n?"setUTCMilliseconds":"setMilliseconds"}function Uhe(n){if(!Pce(n))return Ke(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function zhe(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,r){return r.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var y2=qk;function Nz(n,e,t){var r="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&Mu(c)?c:"-"}function a(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var s=e==="time",o=n instanceof Date;if(s||o){var l=s?ix(n):n;if(isNaN(+l)){if(o)return"-"}else return g3(l,r,t)}if(e==="ordinal")return jU(n)?i(n):Ln(n)&&a(n)?n+"":"-";var u=$f(n);return a(u)?Uhe(u):jU(n)?i(n):typeof n=="boolean"?n+"":"-"}var ZZ=["a","b","c","d","e","f","g"],p4=function(n,e){return"{"+n+(e??"")+"}"};function Vhe(n,e,t){Be(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var s=ZZ[a];n=n.replace(p4(s),p4(s,0))}for(var o=0;o<r;o++)for(var l=0;l<i.length;l++){var u=e[o][i[l]];n=n.replace(p4(ZZ[l],o),t?lo(u):u)}return n}function e3e(n,e,t){return W(e,function(r,i){n=n.replace("{"+i+"}",r)}),n}function t3e(n,e){var t=Ke(n)?{color:n,extraCssText:e}:n||{},r=t.color,i=t.type;e=t.extraCssText;var a=t.renderMode||"html";if(!r)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+lo(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+lo(r)+";"+(e||"")+'"></span>';var s=t.markerId||"markerX";return{renderMode:a,content:"{"+s+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function Wy(n,e){return e=e||"transparent",Ke(n)?n:Lt(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function aN(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var DL={},m4={},x2=(function(){function n(){this._normalMasterList=[],this._nonSeriesBoxMasterList=[]}return n.prototype.create=function(e,t){this._nonSeriesBoxMasterList=r(DL),this._normalMasterList=r(m4);function r(i,a){var s=[];return W(i,function(o,l){var u=o.create(e,t);s=s.concat(u||[])}),s}},n.prototype.update=function(e,t){W(this._normalMasterList,function(r){r.update&&r.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._normalMasterList.concat(this._nonSeriesBoxMasterList)},n.register=function(e,t){if(e==="matrix"||e==="calendar"){DL[e]=t;return}m4[e]=t},n.get=function(e){return m4[e]||DL[e]},n})();function n3e(n){return!!DL[n]}var kz={coord:1,coord2:2};function r3e(n){Hhe.set(n.fullType,{getCoord2:void 0}).getCoord2=n.getCoord2}var Hhe=ct();function i3e(n){var e=n.getShallow("coord",!0),t=kz.coord;if(e==null){var r=Hhe.get(n.type);r&&r.getCoord2&&(t=kz.coord2,e=r.getCoord2(n))}return{coord:e,from:t}}var kh={none:0,dataCoordSys:1,boxCoordSys:2};function Ghe(n,e){var t=n.getShallow("coordinateSystem"),r=n.getShallow("coordinateSystemUsage",!0),i=kh.none;if(t){var a=n.mainType==="series";r==null&&(r=a?"data":"box"),r==="data"?(i=kh.dataCoordSys,a||(i=kh.none)):r==="box"&&(i=kh.boxCoordSys,!a&&!n3e(t)&&(i=kh.none))}return{coordSysType:t,kind:i}}function _2(n){var e=n.targetModel,t=n.coordSysType,r=n.coordSysProvider,i=n.isDefaultDataCoordSys;n.allowNotFound;var a=Ghe(e),s=a.kind,o=a.coordSysType;if(i&&s!==kh.dataCoordSys&&(s=kh.dataCoordSys,o=t),s===kh.none||o!==t)return!1;var l=r(t,e);return l?(s===kh.dataCoordSys?e.coordinateSystem=l:e.boxCoordinateSystem=l,!0):!1}var jhe=function(n,e){var t=e.getReferringComponents(n,fi).models[0];return t&&t.coordinateSystem},IL=W,Whe=["left","right","top","bottom","width","height"],o0=[["width","left","right"],["height","top","bottom"]];function Tj(n,e,t,r,i){var a=0,s=0;r==null&&(r=1/0),i==null&&(i=1/0);var o=0;e.eachChild(function(l,u){var c=l.getBoundingRect(),h=e.childAt(u+1),d=h&&h.getBoundingRect(),f,p;if(n==="horizontal"){var m=c.width+(d?-d.x+c.x:0);f=a+m,f>r||l.newline?(a=0,f=m,s+=o+t,o=c.height):o=Math.max(o,c.height)}else{var g=c.height+(d?-d.y+c.y:0);p=s+g,p>i||l.newline?(a+=o+t,s=0,p=g,o=c.width):o=Math.max(o,c.width)}l.newline||(l.x=a,l.y=s,l.markRedraw(),n==="horizontal"?a=f+t:s=p+t)})}var Ny=Tj;Qt(Tj,"vertical");Qt(Tj,"horizontal");function Xhe(n,e){return{left:n.getShallow("left",e),top:n.getShallow("top",e),right:n.getShallow("right",e),bottom:n.getShallow("bottom",e),width:n.getShallow("width",e),height:n.getShallow("height",e)}}function a3e(n,e){var t=ha(n,e,{enableLayoutOnlyByCenter:!0}),r=n.getBoxLayoutParams(),i,a;if(t.type===KT.point)a=t.refPoint,i=qr(r,{width:e.getWidth(),height:e.getHeight()});else{var s=n.get("center"),o=Be(s)?s:[s,s];i=qr(r,t.refContainer),a=t.boxCoordFrom===kz.coord2?t.refPoint:[Xe(o[0],i.width)+i.x,Xe(o[1],i.height)+i.y]}return{viewRect:i,center:a}}function $he(n,e){var t=a3e(n,e),r=t.viewRect,i=t.center,a=n.get("radius");Be(a)||(a=[0,a]);var s=Xe(r.width,e.getWidth()),o=Xe(r.height,e.getHeight()),l=Math.min(s,o),u=Xe(a[0],l/2),c=Xe(a[1],l/2);return{cx:i[0],cy:i[1],r0:u,r:c,viewRect:r}}function qr(n,e,t){t=y2(t||0);var r=e.width,i=e.height,a=Xe(n.left,r),s=Xe(n.top,i),o=Xe(n.right,r),l=Xe(n.bottom,i),u=Xe(n.width,r),c=Xe(n.height,i),h=t[2]+t[0],d=t[1]+t[3],f=n.aspect;switch(isNaN(u)&&(u=r-o-d-a),isNaN(c)&&(c=i-l-h-s),f!=null&&(isNaN(u)&&isNaN(c)&&(f>r/i?u=r*.8:c=i*.8),isNaN(u)&&(u=f*c),isNaN(c)&&(c=u/f)),isNaN(a)&&(a=r-o-u-d),isNaN(s)&&(s=i-l-c-h),n.left||n.right){case"center":a=r/2-u/2-t[3];break;case"right":a=r-u-d;break}switch(n.top||n.bottom){case"middle":case"center":s=i/2-c/2-t[0];break;case"bottom":s=i-c-h;break}a=a||0,s=s||0,isNaN(u)&&(u=r-d-a-(o||0)),isNaN(c)&&(c=i-h-s-(l||0));var p=new Rt((e.x||0)+a+t[3],(e.y||0)+s+t[0],u,c);return p.margin=t,p}function Yhe(n,e,t){var r=n.getShallow("preserveAspect",!0);if(!r)return e;var i=e.width/e.height;if(Math.abs(Math.atan(t)-Math.atan(i))<1e-9)return e;var a=n.getShallow("preserveAspectAlign",!0),s=n.getShallow("preserveAspectVerticalAlign",!0),o={width:e.width,height:e.height},l=r==="cover";return i>t&&!l||i<t&&l?(o.width=e.height*t,a==="left"?o.left=0:a==="right"?o.right=0:o.left="center"):(o.height=e.width/t,s==="top"?o.top=0:s==="bottom"?o.bottom=0:o.top="middle"),qr(o,e)}var KT={rect:1,point:2};function ha(n,e,t){var r,i,a,s=n.boxCoordinateSystem,o;if(s){var l=i3e(n),u=l.coord,c=l.from;if(s.dataToLayout){a=KT.rect,o=c;var h=s.dataToLayout(u);r=h.contentRect||h.rect}else t&&t.enableLayoutOnlyByCenter&&s.dataToPoint&&(a=KT.point,o=c,i=s.dataToPoint(u))}return a==null&&(a=KT.rect),a===KT.rect&&(r||(r={x:0,y:0,width:e.getWidth(),height:e.getHeight()}),i=[r.x+r.width/2,r.y+r.height/2]),{type:a,refContainer:r,refPoint:i,boxCoordFrom:o}}function v3(n,e,t,r,i,a){var s=!i||!i.hv||i.hv[0],o=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(a=a||n,a.x=n.x,a.y=n.y,!s&&!o)return!1;var u;if(l==="raw")u=n.type==="group"?new Rt(0,0,+e.width||0,+e.height||0):n.getBoundingRect();else if(u=n.getBoundingRect(),n.needLocalTransform()){var c=n.getLocalTransform();u=u.clone(),u.applyTransform(c)}var h=qr(Pt({width:u.width,height:u.height},e),t,r),d=s?h.x-u.x:0,f=o?h.y-u.y:0;return l==="raw"?(a.x=d,a.y=f):(a.x+=d,a.y+=f),a===n&&n.markRedraw(),!0}function s3e(n,e){return n[o0[e][0]]!=null||n[o0[e][1]]!=null&&n[o0[e][2]]!=null}function SA(n){var e=n.layoutMode||n.constructor.layoutMode;return Lt(e)?e:e?{type:e}:null}function id(n,e,t){var r=t&&t.ignoreSize;!Be(r)&&(r=[r,r]);var i=s(o0[0],0),a=s(o0[1],1);l(o0[0],n,i),l(o0[1],n,a);function s(u,c){var h={},d=0,f={},p=0,m=2;if(IL(u,function(b){f[b]=n[b]}),IL(u,function(b){it(e,b)&&(h[b]=f[b]=e[b]),o(h,b)&&d++,o(f,b)&&p++}),r[c])return o(e,u[1])?f[u[2]]=null:o(e,u[2])&&(f[u[1]]=null),f;if(p===m||!d)return f;if(d>=m)return h;for(var g=0;g<u.length;g++){var v=u[g];if(!it(h,v)&&it(n,v)){h[v]=n[v];break}}return h}function o(u,c){return u[c]!=null&&u[c]!=="auto"}function l(u,c,h){IL(u,function(d){c[d]=h[d]})}}function sx(n){return qhe({},n)}function qhe(n,e){return e&&n&&IL(Whe,function(t){it(e,t)&&(n[t]=e[t])}),n}var o3e=mn(),_n=(function(n){be(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.uid=jS("ec_cpt_model"),a}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=SA(this),a=i?sx(t):{},s=r.getTheme();en(t,s.get(this.mainType)),en(t,this.getDefaultOption()),i&&id(t,a,i)},e.prototype.mergeOption=function(t,r){en(this.option,t,!0);var i=SA(this);i&&id(this.option,t,i)},e.prototype.optionUpdated=function(t,r){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!zRe(t))return t.defaultOption;var r=o3e(this);if(!r.defaultOption){for(var i=[],a=t;a;){var s=a.prototype.defaultOption;s&&i.push(s),a=a.superClass}for(var o={},l=i.length-1;l>=0;l--)o=en(o,i[l],!0);r.defaultOption=o}return r.defaultOption},e.prototype.getReferringComponents=function(t,r){var i=t+"Index",a=t+"Id";return US(this.ecModel,t,{index:this.get(i,!0),id:this.get(a,!0)},r)},e.prototype.getBoxLayoutParams=function(){return Xhe(this,!1)},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=(function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0})(),e})(Sn);Hce(_n,Sn);n3(_n);Fke(_n);Uke(_n,l3e);function l3e(n){var e=[];return W(_n.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Ue(e,function(t){return Uh(t).main}),n!=="dataset"&&Jt(e,"dataset")<=0&&e.unshift("dataset"),e}var ve={color:{},darkColor:{},size:{}},Di=ve.color={theme:["#5070dd","#b6d634","#505372","#ff994d","#0ca8df","#ffd10a","#fb628b","#785db0","#3fbe95"],neutral00:"#fff",neutral05:"#f4f7fd",neutral10:"#e8ebf0",neutral15:"#dbdee4",neutral20:"#cfd2d7",neutral25:"#c3c5cb",neutral30:"#b7b9be",neutral35:"#aaacb2",neutral40:"#9ea0a5",neutral45:"#929399",neutral50:"#86878c",neutral55:"#797b7f",neutral60:"#6d6e73",neutral65:"#616266",neutral70:"#54555a",neutral75:"#48494d",neutral80:"#3c3c41",neutral85:"#303034",neutral90:"#232328",neutral95:"#17171b",neutral99:"#000",accent05:"#eff1f9",accent10:"#e0e4f2",accent15:"#d0d6ec",accent20:"#c0c9e6",accent25:"#b1bbdf",accent30:"#a1aed9",accent35:"#91a0d3",accent40:"#8292cc",accent45:"#7285c6",accent50:"#6578ba",accent55:"#5c6da9",accent60:"#536298",accent65:"#4a5787",accent70:"#404c76",accent75:"#374165",accent80:"#2e3654",accent85:"#252b43",accent90:"#1b2032",accent95:"#121521",transparent:"rgba(0,0,0,0)",highlight:"rgba(255,231,130,0.8)"};Pe(Di,{primary:Di.neutral80,secondary:Di.neutral70,tertiary:Di.neutral60,quaternary:Di.neutral50,disabled:Di.neutral20,border:Di.neutral30,borderTint:Di.neutral20,borderShade:Di.neutral40,background:Di.neutral05,backgroundTint:"rgba(234,237,245,0.5)",backgroundTransparent:"rgba(255,255,255,0)",backgroundShade:Di.neutral10,shadow:"rgba(0,0,0,0.2)",shadowTint:"rgba(129,130,136,0.2)",axisLine:Di.neutral70,axisLineTint:Di.neutral40,axisTick:Di.neutral70,axisTickMinor:Di.neutral60,axisLabel:Di.neutral70,axisSplitLine:Di.neutral15,axisMinorSplitLine:Di.neutral05});for(var xv in Di)if(Di.hasOwnProperty(xv)){var QZ=Di[xv];xv==="theme"?ve.darkColor.theme=Di.theme.slice():xv==="highlight"?ve.darkColor.highlight="rgba(255,231,130,0.4)":xv.indexOf("accent")===0?ve.darkColor[xv]=fg(QZ,null,function(n){return n*.5},function(n){return Math.min(1,1.3-n)}):ve.darkColor[xv]=fg(QZ,null,function(n){return n*.9},function(n){return 1-Math.pow(n,1.5)})}ve.size={xxs:2,xs:5,s:10,m:15,l:20,xl:30,xxl:40,xxxl:50};var Khe="";typeof navigator<"u"&&(Khe=navigator.platform||"");var Kx="rgba(0, 0, 0, 0.2)",Zhe=ve.color.theme[0],u3e=fg(Zhe,null,null,.9);const c3e={darkMode:"auto",colorBy:"series",color:ve.color.theme,gradientColor:[u3e,Zhe],aria:{decal:{decals:[{color:Kx,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Kx,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Kx,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Kx,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Kx,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Kx,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Khe.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Qhe=ct(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Bl="original",qa="arrayRows",Fl="objectRows",kc="keyedColumns",mg="typedArray",Jhe="unknown",Cc="column",ox="row",os={Must:1,Might:2,Not:3},ede=mn();function h3e(n){ede(n).datasetMap=ct()}function tde(n,e,t){var r={},i=Aj(e);if(!i||!n)return r;var a=[],s=[],o=e.ecModel,l=ede(o).datasetMap,u=i.uid+"_"+t.seriesLayoutBy,c,h;n=n.slice(),W(n,function(m,g){var v=Lt(m)?m:n[g]={name:m};v.type==="ordinal"&&c==null&&(c=g,h=p(v)),r[v.name]=[]});var d=l.get(u)||l.set(u,{categoryWayDim:h,valueWayDim:0});W(n,function(m,g){var v=m.name,b=p(m);if(c==null){var S=d.valueWayDim;f(r[v],S,b),f(s,S,b),d.valueWayDim+=b}else if(c===g)f(r[v],0,b),f(a,0,b);else{var S=d.categoryWayDim;f(r[v],S,b),f(s,S,b),d.categoryWayDim+=b}});function f(m,g,v){for(var b=0;b<v;b++)m.push(g+b)}function p(m){var g=m.dimsDef;return g?g.length:1}return a.length&&(r.itemName=a),s.length&&(r.seriesName=s),r}function Ej(n,e,t){var r={},i=Aj(n);if(!i)return r;var a=e.sourceFormat,s=e.dimensionsDefine,o;(a===Fl||a===kc)&&W(s,function(c,h){(Lt(c)?c.name:c)==="name"&&(o=h)});var l=(function(){for(var c={},h={},d=[],f=0,p=Math.min(5,t);f<p;f++){var m=rde(e.data,a,e.seriesLayoutBy,s,e.startIndex,f);d.push(m);var g=m===os.Not;if(g&&c.v==null&&f!==o&&(c.v=f),(c.n==null||c.n===c.v||!g&&d[c.n]===os.Not)&&(c.n=f),v(c)&&d[c.n]!==os.Not)return c;g||(m===os.Might&&h.v==null&&f!==o&&(h.v=f),(h.n==null||h.n===h.v)&&(h.n=f))}function v(b){return b.v!=null&&b.n!=null}return v(c)?c:v(h)?h:null})();if(l){r.value=[l.v];var u=o??l.n;r.itemName=[u],r.seriesName=[u]}return r}function Aj(n){var e=n.get("data",!0);if(!e)return US(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},fi).models[0]}function d3e(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:US(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},fi).models}function nde(n,e){return rde(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function rde(n,e,t,r,i,a){var s,o=5;if(Xo(n))return os.Not;var l,u;if(r){var c=r[a];Lt(c)?(l=c.name,u=c.type):Ke(c)&&(l=c)}if(u!=null)return u==="ordinal"?os.Must:os.Not;if(e===qa){var h=n;if(t===ox){for(var d=h[a],f=0;f<(d||[]).length&&f<o;f++)if((s=w(d[i+f]))!=null)return s}else for(var f=0;f<h.length&&f<o;f++){var p=h[i+f];if(p&&(s=w(p[a]))!=null)return s}}else if(e===Fl){var m=n;if(!l)return os.Not;for(var f=0;f<m.length&&f<o;f++){var g=m[f];if(g&&(s=w(g[l]))!=null)return s}}else if(e===kc){var v=n;if(!l)return os.Not;var d=v[l];if(!d||Xo(d))return os.Not;for(var f=0;f<d.length&&f<o;f++)if((s=w(d[f]))!=null)return s}else if(e===Bl)for(var b=n,f=0;f<b.length&&f<o;f++){var g=b[f],S=FS(g);if(!Be(S))return os.Not;if((s=w(S[a]))!=null)return s}function w(E){var T=Ke(E);if(E!=null&&Number.isFinite(Number(E))&&E!=="")return T?os.Might:os.Not;if(T&&E!=="-")return os.Must}return os.Not}var Oz=ct();function f3e(n,e){Us(Oz.get(n)==null&&e),Oz.set(n,e)}function p3e(n,e,t){var r=Oz.get(e);if(!r)return t;var i=r(n);return i?t.concat(i):t}var JZ=mn(),m3e=mn(),Cj=(function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,r){var i=br(this.get("color",!0)),a=this.get("colorLayer",!0);return ide(this,JZ,i,a,e,t,r)},n.prototype.clearColorPalette=function(){v3e(this,JZ)},n})();function Bz(n,e,t,r){var i=br(n.get(["aria","decal","decals"]));return ide(n,m3e,i,null,e,t,r)}function g3e(n,e){for(var t=n.length,r=0;r<t;r++)if(n[r].length>e)return n[r];return n[t-1]}function ide(n,e,t,r,i,a,s){a=a||n;var o=e(a),l=o.paletteIdx||0,u=o.paletteNameMap=o.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=s==null||!r?t:g3e(r,s);if(c=c||t,!(!c||!c.length)){var h=c[l];return i&&(u[i]=h),o.paletteIdx=(l+1)%c.length,h}}function v3e(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var CI,eT,eQ,tQ="\0_ec_inner",y3e=1,Mj=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,r,i,a,s,o){a=a||{},this.option=null,this._theme=new Sn(a),this._locale=new Sn(s),this._optionManager=o},e.prototype.setOption=function(t,r,i){var a=iQ(r);this._optionManager.setOption(t,i,a),this._resetOption(null,a)},e.prototype.resetOption=function(t,r){return this._resetOption(t,iQ(r))},e.prototype._resetOption=function(t,r){var i=!1,a=this._optionManager;if(!t||t==="recreate"){var s=a.mountOption(t==="recreate");!this.option||t==="recreate"?eQ(this,s):(this.restoreData(),this._mergeOption(s,r)),i=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=a.getTimelineOption(this);o&&(i=!0,this._mergeOption(o,r))}if(!t||t==="recreate"||t==="media"){var l=a.getMediaOption(this);l.length&&W(l,function(u){i=!0,this._mergeOption(u,r)},this)}return i},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,r){var i=this.option,a=this._componentsMap,s=this._componentsCount,o=[],l=ct(),u=r&&r.replaceMergeMainTypeMap;h3e(this),W(t,function(h,d){h!=null&&(_n.hasClass(d)?d&&(o.push(d),l.set(d,!0)):i[d]=i[d]==null?Tt(h):en(i[d],h,!0))}),u&&u.each(function(h,d){_n.hasClass(d)&&!l.get(d)&&(o.push(d),l.set(d,!0))}),_n.topologicalTravel(o,_n.getAllClassMainTypes(),c,this);function c(h){var d=p3e(this,h,br(t[h])),f=a.get(h),p=f?u&&u.get(h)?"replaceMerge":"normalMerge":"replaceAll",m=Bce(f,d,p);PRe(m,h,_n),i[h]=null,a.set(h,null),s.set(h,0);var g=[],v=[],b=0,S;W(m,function(w,E){var T=w.existing,M=w.newOption;if(!M)T&&(T.mergeOption({},this),T.optionUpdated({},!1));else{var P=h==="series",I=_n.getClass(h,w.keyInfo.subType,!P);if(!I)return;if(h==="tooltip"){if(S)return;S=!0}if(T&&T.constructor===I)T.name=w.keyInfo.name,T.mergeOption(M,this),T.optionUpdated(M,!1);else{var D=Pe({componentIndex:E},w.keyInfo);T=new I(M,this,this,D),Pe(T,D),w.brandNew&&(T.__requireNewView=!0),T.init(M,this,this),T.optionUpdated(null,!0)}}T?(g.push(T.option),v.push(T),b++):(g.push(void 0),v.push(void 0))},this),i[h]=g,a.set(h,v),s.set(h,b),h==="series"&&CI(this)}this._seriesIndices||CI(this)},e.prototype.getOption=function(){var t=Tt(this.option);return W(t,function(r,i){if(_n.hasClass(i)){for(var a=br(r),s=a.length,o=!1,l=s-1;l>=0;l--)a[l]&&!vA(a[l])?o=!0:(a[l]=null,!o&&s--);a.length=s,t[i]=a}}),delete t[tQ],t},e.prototype.setTheme=function(t){this._theme=new Sn(t),this._resetOption("recreate",null)},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,r){var i=this._componentsMap.get(t);if(i){var a=i[r||0];if(a)return a;if(r==null){for(var s=0;s<i.length;s++)if(i[s])return i[s]}}},e.prototype.queryComponents=function(t){var r=t.mainType;if(!r)return[];var i=t.index,a=t.id,s=t.name,o=this._componentsMap.get(r);if(!o||!o.length)return[];var l;return i!=null?(l=[],W(br(i),function(u){o[u]&&l.push(o[u])})):a!=null?l=nQ("id",a,o):s!=null?l=nQ("name",s,o):l=er(o,function(u){return!!u}),rQ(l,t)},e.prototype.findComponents=function(t){var r=t.query,i=t.mainType,a=o(r),s=a?this.queryComponents(a):er(this._componentsMap.get(i),function(u){return!!u});return l(rQ(s,t));function o(u){var c=i+"Index",h=i+"Id",d=i+"Name";return u&&(u[c]!=null||u[h]!=null||u[d]!=null)?{mainType:i,index:u[c],id:u[h],name:u[d]}:null}function l(u){return t.filter?er(u,t.filter):u}},e.prototype.eachComponent=function(t,r,i){var a=this._componentsMap;if(St(t)){var s=r,o=t;a.each(function(h,d){for(var f=0;h&&f<h.length;f++){var p=h[f];p&&o.call(s,d,p,p.componentIndex)}})}else for(var l=Ke(t)?a.get(t):Lt(t)?this.findComponents(t):null,u=0;l&&u<l.length;u++){var c=l[u];c&&r.call(i,c,c.componentIndex)}},e.prototype.getSeriesByName=function(t){var r=oa(t,null);return er(this._componentsMap.get("series"),function(i){return!!i&&r!=null&&i.name===r})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return er(this._componentsMap.get("series"),function(r){return!!r&&r.subType===t})},e.prototype.getSeries=function(){return er(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,r){eT(this),W(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];t.call(r,a,i)},this)},e.prototype.eachRawSeries=function(t,r){W(this._componentsMap.get("series"),function(i){i&&t.call(r,i,i.componentIndex)})},e.prototype.eachSeriesByType=function(t,r,i){eT(this),W(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];s.subType===t&&r.call(i,s,a)},this)},e.prototype.eachRawSeriesByType=function(t,r,i){return W(this.getSeriesByType(t),r,i)},e.prototype.isSeriesFiltered=function(t){return eT(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,r){eT(this);var i=[];W(this._seriesIndices,function(a){var s=this._componentsMap.get("series")[a];t.call(r,s,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=ct(i)},e.prototype.restoreData=function(t){CI(this);var r=this._componentsMap,i=[];r.each(function(a,s){_n.hasClass(s)&&i.push(s)}),_n.topologicalTravel(i,_n.getAllClassMainTypes(),function(a){W(r.get(a),function(s){s&&(a!=="series"||!x3e(s,t))&&s.restoreData()})})},e.internalField=(function(){CI=function(t){var r=t._seriesIndices=[];W(t._componentsMap.get("series"),function(i){i&&r.push(i.componentIndex)}),t._seriesIndicesMap=ct(r)},eT=function(t){},eQ=function(t,r){t.option={},t.option[tQ]=y3e,t._componentsMap=ct({series:[]}),t._componentsCount=ct();var i=r.aria;Lt(i)&&i.enabled==null&&(i.enabled=!0),_3e(r,t._theme.option),en(r,c3e,!1),t._mergeOption(r,null)}})(),e})(Sn);function x3e(n,e){if(e){var t=e.seriesIndex,r=e.seriesId,i=e.seriesName;return t!=null&&n.componentIndex!==t||r!=null&&n.id!==r||i!=null&&n.name!==i}}function _3e(n,e){var t=n.color&&!n.colorLayer;W(e,function(r,i){i==="colorLayer"&&t||i==="color"&&n.color||_n.hasClass(i)||(typeof r=="object"?n[i]=n[i]?en(n[i],r,!1):Tt(r):n[i]==null&&(n[i]=r))})}function nQ(n,e,t){if(Be(e)){var r=ct();return W(e,function(a){if(a!=null){var s=oa(a,null);s!=null&&r.set(a,!0)}}),er(t,function(a){return a&&r.get(a[n])})}else{var i=oa(e,null);return er(t,function(a){return a&&i!=null&&a[n]===i})}}function rQ(n,e){return e.hasOwnProperty("subType")?er(n,function(t){return t&&t.subType===e.subType}):n}function iQ(n){var e=ct();return n&&W(br(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Zi(Mj,Cj);var b3e=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ade=(function(){function n(e){W(b3e,function(t){this[t]=Qe(e[t],e)},this)}return n})(),S3e=/^(min|max)?(.+)$/,w3e=(function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,r){e&&(W(br(e.series),function(s){s&&s.data&&Xo(s.data)&&zR(s.data)}),W(br(e.dataset),function(s){s&&s.source&&Xo(s.source)&&zR(s.source)})),e=Tt(e);var i=this._optionBackup,a=T3e(e,t,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Tt(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,r=this._timelineOptions;if(r.length){var i=e.getComponent("timeline");i&&(t=Tt(r[i.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),r=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,s=[],o=[];if(!i.length&&!a)return o;for(var l=0,u=i.length;l<u;l++)E3e(i[l].query,t,r)&&s.push(l);return!s.length&&a&&(s=[-1]),s.length&&!C3e(s,this._currentMediaIndices)&&(o=Ue(s,function(c){return Tt(c===-1?a.option:i[c].option)})),this._currentMediaIndices=s,o},n})();function T3e(n,e,t){var r=[],i,a,s=n.baseOption,o=n.timeline,l=n.options,u=n.media,c=!!n.media,h=!!(l||o||s&&s.timeline);s?(a=s,a.timeline||(a.timeline=o)):((h||c)&&(n.options=n.media=null),a=n),c&&Be(u)&&W(u,function(f){f&&f.option&&(f.query?r.push(f):i||(i=f))}),d(a),W(l,function(f){return d(f)}),W(r,function(f){return d(f.option)});function d(f){W(e,function(p){p(f,t)})}return{baseOption:a,timelineOptions:l||[],mediaDefault:i,mediaList:r}}function E3e(n,e,t){var r={width:e,height:t,aspectratio:e/t},i=!0;return W(n,function(a,s){var o=s.match(S3e);if(!(!o||!o[1]||!o[2])){var l=o[1],u=o[2].toLowerCase();A3e(r[u],a,l)||(i=!1)}}),i}function A3e(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function C3e(n,e){return n.join(",")===e.join(",")}var Yu=W,wA=Lt,aQ=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function g4(n){var e=n&&n.itemStyle;if(e)for(var t=0,r=aQ.length;t<r;t++){var i=aQ[t],a=e.normal,s=e.emphasis;a&&a[i]&&(n[i]=n[i]||{},n[i].normal?en(n[i].normal,a[i]):n[i].normal=a[i],a[i]=null),s&&s[i]&&(n[i]=n[i]||{},n[i].emphasis?en(n[i].emphasis,s[i]):n[i].emphasis=s[i],s[i]=null)}}function Ls(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var r=n[e].normal,i=n[e].emphasis;r&&(t?(n[e].normal=n[e].emphasis=null,Pt(n[e],r)):n[e]=r),i&&(n.emphasis=n.emphasis||{},n.emphasis[e]=i,i.focus&&(n.emphasis.focus=i.focus),i.blurScope&&(n.emphasis.blurScope=i.blurScope))}}function ZT(n){Ls(n,"itemStyle"),Ls(n,"lineStyle"),Ls(n,"areaStyle"),Ls(n,"label"),Ls(n,"labelLine"),Ls(n,"upperLabel"),Ls(n,"edgeLabel")}function Gi(n,e){var t=wA(n)&&n[e],r=wA(t)&&t.textStyle;if(r)for(var i=0,a=lZ.length;i<a;i++){var s=lZ[i];r.hasOwnProperty(s)&&(t[s]=r[s])}}function tu(n){n&&(ZT(n),Gi(n,"label"),n.emphasis&&Gi(n.emphasis,"label"))}function M3e(n){if(wA(n)){g4(n),ZT(n),Gi(n,"label"),Gi(n,"upperLabel"),Gi(n,"edgeLabel"),n.emphasis&&(Gi(n.emphasis,"label"),Gi(n.emphasis,"upperLabel"),Gi(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(g4(e),tu(e));var t=n.markLine;t&&(g4(t),tu(t));var r=n.markArea;r&&tu(r);var i=n.data;if(n.type==="graph"){i=i||n.nodes;var a=n.links||n.edges;if(a&&!Xo(a))for(var s=0;s<a.length;s++)tu(a[s]);W(n.categories,function(u){ZT(u)})}if(i&&!Xo(i))for(var s=0;s<i.length;s++)tu(i[s]);if(e=n.markPoint,e&&e.data)for(var o=e.data,s=0;s<o.length;s++)tu(o[s]);if(t=n.markLine,t&&t.data)for(var l=t.data,s=0;s<l.length;s++)Be(l[s])?(tu(l[s][0]),tu(l[s][1])):tu(l[s]);n.type==="gauge"?(Gi(n,"axisLabel"),Gi(n,"title"),Gi(n,"detail")):n.type==="treemap"?(Ls(n.breadcrumb,"itemStyle"),W(n.levels,function(u){ZT(u)})):n.type==="tree"&&ZT(n.leaves)}}function Ed(n){return Be(n)?n:n?[n]:[]}function sQ(n){return(Be(n)?n[0]:n)||{}}function D3e(n,e){Yu(Ed(n.series),function(r){wA(r)&&M3e(r)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),Yu(t,function(r){Yu(Ed(n[r]),function(i){i&&(Gi(i,"axisLabel"),Gi(i.axisPointer,"label"))})}),Yu(Ed(n.parallel),function(r){var i=r&&r.parallelAxisDefault;Gi(i,"axisLabel"),Gi(i&&i.axisPointer,"label")}),Yu(Ed(n.calendar),function(r){Ls(r,"itemStyle"),Gi(r,"dayLabel"),Gi(r,"monthLabel"),Gi(r,"yearLabel")}),Yu(Ed(n.radar),function(r){Gi(r,"name"),r.name&&r.axisName==null&&(r.axisName=r.name,delete r.name),r.nameGap!=null&&r.axisNameGap==null&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),Yu(Ed(n.geo),function(r){wA(r)&&(tu(r),Yu(Ed(r.regions),function(i){tu(i)}))}),Yu(Ed(n.timeline),function(r){tu(r),Ls(r,"label"),Ls(r,"itemStyle"),Ls(r,"controlStyle",!0);var i=r.data;Be(i)&&W(i,function(a){Lt(a)&&(Ls(a,"label"),Ls(a,"itemStyle"))})}),Yu(Ed(n.toolbox),function(r){Ls(r,"iconStyle"),Yu(r.feature,function(i){Ls(i,"iconStyle")})}),Gi(sQ(n.axisPointer),"label"),Gi(sQ(n.tooltip).axisPointer,"label")}function I3e(n,e){for(var t=e.split(","),r=n,i=0;i<t.length&&(r=r&&r[t[i]],r!=null);i++);return r}function P3e(n,e,t,r){for(var i=e.split(","),a=n,s,o=0;o<i.length-1;o++)s=i[o],a[s]==null&&(a[s]={}),a=a[s];a[i[o]]==null&&(a[i[o]]=t)}function oQ(n){n&&W(L3e,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var L3e=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],R3e=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],v4=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function tT(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<v4.length;t++){var r=v4[t][1],i=v4[t][0];e[r]!=null&&(e[i]=e[r])}}function lQ(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function uQ(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function N3e(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function sde(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&sde(n[t].children,e)}function ode(n,e){D3e(n,e),n.series=br(n.series),W(n.series,function(t){if(Lt(t)){var r=t.type;if(r==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(r==="pie"||r==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),lQ(t.label);var i=t.data;if(i&&!Xo(i))for(var a=0;a<i.length;a++)lQ(i[a]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(r==="gauge"){var s=I3e(t,"pointer.color");s!=null&&P3e(t,"itemStyle.color",s)}else if(r==="bar"){tT(t),tT(t.backgroundStyle),tT(t.emphasis);var i=t.data;if(i&&!Xo(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(tT(i[a]),tT(i[a]&&i[a].emphasis))}else if(r==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),uQ(t),sde(t.data,uQ)}else r==="graph"||r==="sankey"?N3e(t):r==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Pt(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),oQ(t)}}),n.dataRange&&(n.visualMap=n.dataRange),W(R3e,function(t){var r=n[t];r&&(Be(r)||(r=[r]),W(r,function(i){oQ(i)}))})}function k3e(n){var e=ct();n.eachSeries(function(t){var r=t.get("stack");if(r){var i=e.get(r)||e.set(r,[]),a=t.getData(),s={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:t};if(!s.stackedDimension||!(s.isStackedByIndex||s.stackedByDimension))return;i.push(s)}}),e.each(function(t){if(t.length!==0){var r=t[0].seriesModel,i=r.get("stackOrder")||"seriesAsc";i==="seriesDesc"&&t.reverse(),W(t,function(a,s){a.data.setCalculationInfo("stackedOnSeries",s>0?t[s-1].seriesModel:null)}),O3e(t)}})}function O3e(n){W(n,function(e,t){var r=[],i=[NaN,NaN],a=[e.stackResultDimension,e.stackedOverDimension],s=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";s.modify(a,function(u,c,h){var d=s.get(e.stackedDimension,h);if(isNaN(d))return i;var f,p;o?p=s.getRawIndex(h):f=s.get(e.stackedByDimension,h);for(var m=NaN,g=t-1;g>=0;g--){var v=n[g];if(o||(p=v.data.rawIndexOf(v.stackedByDimension,f)),p>=0){var b=v.data.getByRawIndex(v.stackResultDimension,p);if(l==="all"||l==="positive"&&b>0||l==="negative"&&b<0||l==="samesign"&&d>=0&&b>0||l==="samesign"&&d<=0&&b<0){d=vRe(d,b),m=b;break}}}return r[0]=d,r[1]=m,r})})}var y3=(function(){function n(e){this.data=e.data||(e.sourceFormat===kc?{}:[]),this.sourceFormat=e.sourceFormat||Jhe,this.seriesLayoutBy=e.seriesLayoutBy||Cc,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var r=0;r<t.length;r++){var i=t[r];i.type==null&&nde(this,r)===os.Must&&(i.type="ordinal")}}return n})();function Dj(n){return n instanceof y3}function Fz(n,e,t){t=t||lde(n);var r=e.seriesLayoutBy,i=F3e(n,t,r,e.sourceHeader,e.dimensions),a=new y3({data:n,sourceFormat:t,seriesLayoutBy:r,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Tt(e)});return a}function Ij(n){return new y3({data:n,sourceFormat:Xo(n)?mg:Bl})}function B3e(n){return new y3({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Tt(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function lde(n){var e=Jhe;if(Xo(n))e=mg;else if(Be(n)){n.length===0&&(e=qa);for(var t=0,r=n.length;t<r;t++){var i=n[t];if(i!=null){if(Be(i)||Xo(i)){e=qa;break}else if(Lt(i)){e=Fl;break}}}}else if(Lt(n)){for(var a in n)if(it(n,a)&&Fs(n[a])){e=kc;break}}return e}function F3e(n,e,t,r,i){var a,s;if(!n)return{dimensionsDefine:cQ(i),startIndex:s,dimensionsDetectedCount:a};if(e===qa){var o=n;r==="auto"||r==null?hQ(function(u){u!=null&&u!=="-"&&(Ke(u)?s==null&&(s=1):s=0)},t,o,10):s=Ln(r)?r:r?1:0,!i&&s===1&&(i=[],hQ(function(u,c){i[c]=u!=null?u+"":""},t,o,1/0)),a=i?i.length:t===ox?o.length:o[0]?o[0].length:null}else if(e===Fl)i||(i=U3e(n));else if(e===kc)i||(i=[],W(n,function(u,c){i.push(c)}));else if(e===Bl){var l=FS(n[0]);a=Be(l)&&l.length||1}return{startIndex:s,dimensionsDefine:cQ(i),dimensionsDetectedCount:a}}function U3e(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return An(t)}function cQ(n){if(n){var e=ct();return Ue(n,function(t,r){t=Lt(t)?t:{name:t};var i={name:t.name,displayName:t.displayName,type:t.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=e.get(i.name);return a?i.name+="-"+a.count++:e.set(i.name,{count:1}),i})}}function hQ(n,e,t,r){if(e===ox)for(var i=0;i<t.length&&i<r;i++)n(t[i]?t[i][0]:null,i);else for(var a=t[0]||[],i=0;i<a.length&&i<r;i++)n(a[i],i)}function ude(n){var e=n.sourceFormat;return e===Fl||e===kc}var _v,bv,Sv,wv,dQ,fQ,cde=(function(){function n(e,t){var r=Dj(e)?e:Ij(e);this._source=r;var i=this._data=r.data,a=r.sourceFormat;r.seriesLayoutBy,a===mg&&(this._offset=0,this._dimSize=t,this._data=i),fQ(this,i,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=(function(){var e=n.prototype;e.pure=!1,e.persistent=!0})(),n.internalField=(function(){var e;fQ=function(s,o,l){var u=l.sourceFormat,c=l.seriesLayoutBy,h=l.startIndex,d=l.dimensionsDefine,f=dQ[Pj(u,c)];if(Pe(s,f),u===mg)s.getItem=t,s.count=i,s.fillStorage=r;else{var p=hde(u,c);s.getItem=Qe(p,null,o,h,d);var m=dde(u,c);s.count=Qe(m,null,o,h,d)}};var t=function(s,o){s=s-this._offset,o=o||[];for(var l=this._data,u=this._dimSize,c=u*s,h=0;h<u;h++)o[h]=l[c+h];return o},r=function(s,o,l,u){for(var c=this._data,h=this._dimSize,d=0;d<h;d++){for(var f=u[d],p=f[0]==null?1/0:f[0],m=f[1]==null?-1/0:f[1],g=o-s,v=l[d],b=0;b<g;b++){var S=c[b*h+d];v[s+b]=S,S<p&&(p=S),S>m&&(m=S)}f[0]=p,f[1]=m}},i=function(){return this._data?this._data.length/this._dimSize:0};dQ=(e={},e[qa+"_"+Cc]={pure:!0,appendData:a},e[qa+"_"+ox]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Fl]={pure:!0,appendData:a},e[kc]={pure:!0,appendData:function(s){var o=this._data;W(s,function(l,u){for(var c=o[u]||(o[u]=[]),h=0;h<(l||[]).length;h++)c.push(l[h])})}},e[Bl]={appendData:a},e[mg]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},e);function a(s){for(var o=0;o<s.length;o++)this._data.push(s[o])}})(),n})(),MI=function(n){Be(n)||Nce("series.data or dataset.source must be an array.")};_v={},_v[qa+"_"+Cc]=MI,_v[qa+"_"+ox]=MI,_v[Fl]=MI,_v[kc]=function(n,e){for(var t=0;t<e.length;t++){var r=e[t].name;r==null&&Nce("dimension name must not be null/undefined.")}},_v[Bl]=MI;var pQ=function(n,e,t,r){return n[r]},z3e=(bv={},bv[qa+"_"+Cc]=function(n,e,t,r){return n[r+e]},bv[qa+"_"+ox]=function(n,e,t,r,i){r+=e;for(var a=i||[],s=n,o=0;o<s.length;o++){var l=s[o];a[o]=l?l[r]:null}return a},bv[Fl]=pQ,bv[kc]=function(n,e,t,r,i){for(var a=i||[],s=0;s<t.length;s++){var o=t[s].name,l=o!=null?n[o]:null;a[s]=l?l[r]:null}return a},bv[Bl]=pQ,bv);function hde(n,e){var t=z3e[Pj(n,e)];return t}var mQ=function(n,e,t){return n.length},V3e=(Sv={},Sv[qa+"_"+Cc]=function(n,e,t){return Math.max(0,n.length-e)},Sv[qa+"_"+ox]=function(n,e,t){var r=n[0];return r?Math.max(0,r.length-e):0},Sv[Fl]=mQ,Sv[kc]=function(n,e,t){var r=t[0].name,i=r!=null?n[r]:null;return i?i.length:0},Sv[Bl]=mQ,Sv);function dde(n,e){var t=V3e[Pj(n,e)];return t}var y4=function(n,e,t){return n[e]},H3e=(wv={},wv[qa]=y4,wv[Fl]=function(n,e,t){return n[t]},wv[kc]=y4,wv[Bl]=function(n,e,t){var r=FS(n);return r instanceof Array?r[e]:r},wv[mg]=y4,wv);function fde(n){var e=H3e[n];return e}function Pj(n,e){return n===qa?n+"_"+e:n}function iS(n,e,t){if(n){var r=n.getRawDataItem(e);if(r!=null){var i=n.getStore(),a=i.getSource().sourceFormat;if(t!=null){var s=n.getDimensionIndex(t),o=i.getDimensionProperty(s);return fde(a)(r,s,o)}else{var l=r;return a===Bl&&(l=FS(r)),l}}}}var G3e=/\{@(.+?)\}/g,x3=(function(){function n(){}return n.prototype.getDataParams=function(e,t){var r=this.getData(t),i=this.getRawValue(e,t),a=r.getRawIndex(e),s=r.getName(e),o=r.getRawDataItem(e),l=r.getItemVisual(e,"style"),u=l&&l[r.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,h=this.mainType,d=h==="series",f=r.userOutput&&r.userOutput.get();return{componentType:h,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:d?this.subType:null,seriesIndex:this.seriesIndex,seriesId:d?this.id:null,seriesName:d?this.name:null,name:s,dataIndex:a,data:o,dataType:t,value:i,color:u,borderColor:c,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,r,i,a,s){t=t||"normal";var o=this.getData(r),l=this.getDataParams(e,r);if(s&&(l.value=s.interpolatedValue),i!=null&&Be(l.value)&&(l.value=l.value[i]),!a){var u=o.getItemModel(e);a=u.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if(St(a))return l.status=t,l.dimensionIndex=i,a(l);if(Ke(a)){var c=Vhe(a,l);return c.replace(G3e,function(h,d){var f=d.length,p=d;p.charAt(0)==="["&&p.charAt(f-1)==="]"&&(p=+p.slice(1,f-1));var m=iS(o,e,p);if(s&&Be(s.interpolatedValue)){var g=o.getDimensionIndex(p);g>=0&&(m=s.interpolatedValue[g])}return m!=null?m+"":""})}},n.prototype.getRawValue=function(e,t){return iS(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,r){},n})();function gQ(n){var e,t;return Lt(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function GE(n){return new j3e(n)}var j3e=(function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,r=e&&e.skip;if(this._dirty&&t){var i=this.context;i.data=i.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!r&&(a=this._plan(this.context));var s=c(this._modBy),o=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;(s!==l||o!==u)&&(a="reset");function c(b){return!(b>=1)&&(b=1),b}var h;(this._dirty||a==="reset")&&(this._dirty=!1,h=this._doReset(r)),this._modBy=l,this._modDataCount=u;var d=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,p=Math.min(d!=null?this._dueIndex+d:1/0,this._dueEnd);if(!r&&(h||f<p)){var m=this._progress;if(Be(m))for(var g=0;g<m.length;g++)this._doProgress(m[g],f,p,l,u);else this._doProgress(m,f,p,l,u)}this._dueIndex=p;var v=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=v}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,r,i,a){vQ.reset(t,r,i,a),this._callingProgress=e,this._callingProgress({start:t,end:r,count:r-t,next:vQ.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,r;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(r=t.forceFirstProgress,t=t.progress),Be(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n})(),vQ=(function(){var n,e,t,r,i,a={reset:function(l,u,c,h){e=l,n=u,t=c,r=h,i=Math.ceil(r/t),a.next=t>1&&r>0?o:s}};return a;function s(){return e<n?e++:null}function o(){var l=e%i*t+Math.ceil(e/i),u=e>=n?null:l<r?l:e;return e++,u}})();function gg(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!Ln(n)&&n!=null&&n!=="-"&&(n=+ix(n)),n==null||n===""?NaN:Number(n))}var W3e=ct({number:function(n){return parseFloat(n)},time:function(n){return+ix(n)},trim:function(n){return Ke(n)?Mu(n):n}});function pde(n){return W3e.get(n)}var mde={lt:function(n,e){return n<e},lte:function(n,e){return n<=e},gt:function(n,e){return n>e},gte:function(n,e){return n>=e}},X3e=(function(){function n(e,t){if(!Ln(t)){var r="";Qn(r)}this._opFn=mde[e],this._rvalFloat=$f(t)}return n.prototype.evaluate=function(e){return Ln(e)?this._opFn(e,this._rvalFloat):this._opFn($f(e),this._rvalFloat)},n})(),gde=(function(){function n(e,t){var r=e==="desc";this._resultLT=r?1:-1,t==null&&(t=r?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var r=Ln(e)?e:$f(e),i=Ln(t)?t:$f(t),a=isNaN(r),s=isNaN(i);if(a&&(r=this._incomparable),s&&(i=this._incomparable),a&&s){var o=Ke(e),l=Ke(t);o&&(r=l?e:0),l&&(i=o?t:0)}return r<i?this._resultLT:r>i?-this._resultLT:0},n})(),$3e=(function(){function n(e,t){this._rval=t,this._isEQ=e,this._rvalTypeof=typeof t,this._rvalFloat=$f(t)}return n.prototype.evaluate=function(e){var t=e===this._rval;if(!t){var r=typeof e;r!==this._rvalTypeof&&(r==="number"||this._rvalTypeof==="number")&&(t=$f(e)===this._rvalFloat)}return this._isEQ?t:!t},n})();function Y3e(n,e){return n==="eq"||n==="ne"?new $3e(n==="eq",e):it(mde,n)?new X3e(n,e):null}var q3e=(function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return gg(e,t)},n})();function K3e(n,e){var t=new q3e,r=n.data,i=t.sourceFormat=n.sourceFormat,a=n.startIndex,s="";n.seriesLayoutBy!==Cc&&Qn(s);var o=[],l={},u=n.dimensionsDefine;if(u)W(u,function(m,g){var v=m.name,b={index:g,name:v,displayName:m.displayName};if(o.push(b),v!=null){var S="";it(l,v)&&Qn(S),l[v]=b}});else for(var c=0;c<n.dimensionsDetectedCount;c++)o.push({index:c});var h=hde(i,Cc);e.__isBuiltIn&&(t.getRawDataItem=function(m){return h(r,a,o,m)},t.getRawData=Qe(Z3e,null,n)),t.cloneRawData=Qe(Q3e,null,n);var d=dde(i,Cc);t.count=Qe(d,null,r,a,o);var f=fde(i);t.retrieveValue=function(m,g){var v=h(r,a,o,m);return p(v,g)};var p=t.retrieveValueFromItem=function(m,g){if(m!=null){var v=o[g];if(v)return f(m,g,v.name)}};return t.getDimensionInfo=Qe(J3e,null,o,l),t.cloneAllDimensionInfo=Qe(eOe,null,o),t}function Z3e(n){var e=n.sourceFormat;if(!Lj(e)){var t="";Qn(t)}return n.data}function Q3e(n){var e=n.sourceFormat,t=n.data;if(!Lj(e)){var r="";Qn(r)}if(e===qa){for(var i=[],a=0,s=t.length;a<s;a++)i.push(t[a].slice());return i}else if(e===Fl){for(var i=[],a=0,s=t.length;a<s;a++)i.push(Pe({},t[a]));return i}}function J3e(n,e,t){if(t!=null){if(Ln(t)||!isNaN(t)&&!it(e,t))return n[t];if(it(e,t))return e[t]}}function eOe(n){return Tt(n)}var vde=ct();function tOe(n){n=Tt(n);var e=n.type,t="";e||Qn(t);var r=e.split(":");r.length!==2&&Qn(t);var i=!1;r[0]==="echarts"&&(e=r[1],i=!0),n.__isBuiltIn=i,vde.set(e,n)}function nOe(n,e,t){var r=br(n),i=r.length,a="";i||Qn(a);for(var s=0,o=i;s<o;s++){var l=r[s];e=rOe(l,e),s!==o-1&&(e.length=Math.max(e.length,1))}return e}function rOe(n,e,t,r){var i="";e.length||Qn(i),Lt(n)||Qn(i);var a=n.type,s=vde.get(a);s||Qn(i);var o=Ue(e,function(u){return K3e(u,s)}),l=br(s.transform({upstream:o[0],upstreamList:o,config:Tt(n.config)}));return Ue(l,function(u,c){var h="";Lt(u)||Qn(h),u.data||Qn(h);var d=lde(u.data);Lj(d)||Qn(h);var f,p=e[0];if(p&&c===0&&!u.dimensions){var m=p.startIndex;m&&(u.data=p.data.slice(0,m).concat(u.data)),f={seriesLayoutBy:Cc,sourceHeader:m,dimensions:p.metaRawOption.dimensions}}else f={seriesLayoutBy:Cc,sourceHeader:0,dimensions:u.dimensions};return Fz(u.data,f,null)})}function Lj(n){return n===qa||n===Fl}var _3="undefined",iOe=typeof Uint32Array===_3?Array:Uint32Array,aOe=typeof Uint16Array===_3?Array:Uint16Array,yde=typeof Int32Array===_3?Array:Int32Array,yQ=typeof Float64Array===_3?Array:Float64Array,xde={float:yQ,int:yde,ordinal:Array,number:Array,time:yQ},x4;function Zx(n){return n>65535?iOe:aOe}function Qx(){return[1/0,-1/0]}function sOe(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function xQ(n,e,t,r,i){var a=xde[t||"float"];if(i){var s=n[e],o=s&&s.length;if(o!==r){for(var l=new a(r),u=0;u<o;u++)l[u]=s[u];n[e]=l}}else n[e]=new a(r)}var Uz=(function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=ct()}return n.prototype.initData=function(e,t,r){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=e.getSource(),a=this.defaultDimValueGetter=x4[i.sourceFormat];this._dimValueGetter=r||a,this._rawExtent=[],ude(i),this._dimensions=Ue(t,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var r=this._calcDimNameToIdx,i=this._dimensions,a=r.get(e);if(a!=null){if(i[a].type===t)return a}else a=i.length;return i[a]={type:t},r.set(e,a),this._chunks[a]=new xde[t||"float"](this._rawCount),this._rawExtent[a]=Qx(),a},n.prototype.collectOrdinalMeta=function(e,t){var r=this._chunks[e],i=this._dimensions[e],a=this._rawExtent,s=i.ordinalOffset||0,o=r.length;s===0&&(a[e]=Qx());for(var l=a[e],u=s;u<o;u++){var c=r[u]=t.parseAndCollect(r[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=t,i.ordinalOffset=o,i.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],r=t.ordinalMeta;return r},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,r=this.count();t.appendData(e);var i=t.count();return t.persistent||(i+=r),r<i&&this._initDataFromProvider(r,i,!0),[r,i]},n.prototype.appendValues=function(e,t){for(var r=this._chunks,i=this._dimensions,a=i.length,s=this._rawExtent,o=this.count(),l=o+Math.max(e.length,t||0),u=0;u<a;u++){var c=i[u];xQ(r,u,c.type,l,!0)}for(var h=[],d=o;d<l;d++)for(var f=d-o,p=0;p<a;p++){var c=i[p],m=x4.arrayRows.call(this,e[f]||h,c.property,f,p);r[p][d]=m;var g=s[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}return this._rawCount=this._count=l,{start:o,end:l}},n.prototype._initDataFromProvider=function(e,t,r){for(var i=this._provider,a=this._chunks,s=this._dimensions,o=s.length,l=this._rawExtent,u=Ue(s,function(b){return b.property}),c=0;c<o;c++){var h=s[c];l[c]||(l[c]=Qx()),xQ(a,c,h.type,t,r)}if(i.fillStorage)i.fillStorage(e,t,a,l);else for(var d=[],f=e;f<t;f++){d=i.getItem(f,d);for(var p=0;p<o;p++){var m=a[p],g=this._dimValueGetter(d,u[p],f,p);m[f]=g;var v=l[p];g<v[0]&&(v[0]=g),g>v[1]&&(v[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var r=this._chunks[e];return r?r[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var r=[],i=[];if(t==null){t=e,e=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=e;for(var a=0,s=i.length;a<s;a++)r.push(this.get(i[a],t));return r},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var r=this._chunks[e];return r?r[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],r=0;if(t)for(var i=0,a=this.count();i<a;i++){var s=this.get(e,i);isNaN(s)||(r+=s)}return r},n.prototype.getMedian=function(e){var t=[];this.each([e],function(a){isNaN(a)||t.push(a)});var r=t.sort(function(a,s){return a-s}),i=this.count();return i===0?0:i%2===1?r[(i-1)/2]:(r[i/2]+r[i/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,r=t[e];if(r!=null&&r<this._count&&r===e)return e;for(var i=0,a=this._count-1;i<=a;){var s=(i+a)/2|0;if(t[s]<e)i=s+1;else if(t[s]>e)a=s-1;else return s}return-1},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var r=t.constructor,i=this._count;if(r===Array){e=new r(i);for(var a=0;a<i;a++)e[a]=t[a]}else e=new r(t.buffer,0,i)}else{var r=Zx(this._rawCount);e=new r(this.count());for(var a=0;a<e.length;a++)e[a]=a}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var r=this.clone(),i=r.count(),a=Zx(r._rawCount),s=new a(i),o=[],l=e.length,u=0,c=e[0],h=r._chunks,d=0;d<i;d++){var f=void 0,p=r.getRawIndex(d);if(l===0)f=t(d);else if(l===1){var m=h[c][p];f=t(m,d)}else{for(var g=0;g<l;g++)o[g]=h[e[g]][p];o[g]=d,f=t.apply(null,o)}f&&(s[u++]=p)}return u<i&&(r._indices=s),r._count=u,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(e){var t=this.clone(),r=t._count;if(!r)return this;var i=An(e),a=i.length;if(!a)return this;var s=t.count(),o=Zx(t._rawCount),l=new o(s),u=0,c=i[0],h=e[c][0],d=e[c][1],f=t._chunks,p=!1;if(!t._indices){var m=0;if(a===1){for(var g=f[i[0]],v=0;v<r;v++){var b=g[v];(b>=h&&b<=d||isNaN(b))&&(l[u++]=m),m++}p=!0}else if(a===2){for(var g=f[i[0]],S=f[i[1]],w=e[i[1]][0],E=e[i[1]][1],v=0;v<r;v++){var b=g[v],T=S[v];(b>=h&&b<=d||isNaN(b))&&(T>=w&&T<=E||isNaN(T))&&(l[u++]=m),m++}p=!0}}if(!p)if(a===1)for(var v=0;v<s;v++){var M=t.getRawIndex(v),b=f[i[0]][M];(b>=h&&b<=d||isNaN(b))&&(l[u++]=M)}else for(var v=0;v<s;v++){for(var P=!0,M=t.getRawIndex(v),I=0;I<a;I++){var D=i[I],b=f[D][M];(b<e[D][0]||b>e[D][1])&&(P=!1)}P&&(l[u++]=t.getRawIndex(v))}return u<s&&(t._indices=l),t._count=u,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var r=this.clone(e);return this._updateDims(r,e,t),r},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,r){for(var i=e._chunks,a=[],s=t.length,o=e.count(),l=[],u=e._rawExtent,c=0;c<t.length;c++)u[t[c]]=Qx();for(var h=0;h<o;h++){for(var d=e.getRawIndex(h),f=0;f<s;f++)l[f]=i[t[f]][d];l[s]=h;var p=r&&r.apply(null,l);if(p!=null){typeof p!="object"&&(a[0]=p,p=a);for(var c=0;c<p.length;c++){var m=t[c],g=p[c],v=u[m],b=i[m];b&&(b[d]=g),g<v[0]&&(v[0]=g),g>v[1]&&(v[1]=g)}}}},n.prototype.lttbDownSample=function(e,t){var r=this.clone([e],!0),i=r._chunks,a=i[e],s=this.count(),o=0,l=Math.floor(1/t),u=this.getRawIndex(0),c,h,d,f=new(Zx(this._rawCount))(Math.min((Math.ceil(s/l)+2)*2,s));f[o++]=u;for(var p=1;p<s-1;p+=l){for(var m=Math.min(p+l,s-1),g=Math.min(p+l*2,s),v=(g+m)/2,b=0,S=m;S<g;S++){var w=this.getRawIndex(S),E=a[w];isNaN(E)||(b+=E)}b/=g-m;var T=p,M=Math.min(p+l,s),P=p-1,I=a[u];c=-1,d=T;for(var D=-1,R=0,S=T;S<M;S++){var w=this.getRawIndex(S),E=a[w];if(isNaN(E)){R++,D<0&&(D=w);continue}h=Math.abs((P-v)*(E-I)-(P-S)*(b-I)),h>c&&(c=h,d=w)}R>0&&R<M-T&&(f[o++]=Math.min(D,d),d=Math.max(D,d)),f[o++]=d,u=d}return f[o++]=this.getRawIndex(s-1),r._count=o,r._indices=f,r.getRawIndex=this._getRawIdx,r},n.prototype.minmaxDownSample=function(e,t){for(var r=this.clone([e],!0),i=r._chunks,a=Math.floor(1/t),s=i[e],o=this.count(),l=new(Zx(this._rawCount))(Math.ceil(o/a)*2),u=0,c=0;c<o;c+=a){var h=c,d=s[this.getRawIndex(h)],f=c,p=s[this.getRawIndex(f)],m=a;c+a>o&&(m=o-c);for(var g=0;g<m;g++){var v=this.getRawIndex(c+g),b=s[v];b<d&&(d=b,h=c+g),b>p&&(p=b,f=c+g)}var S=this.getRawIndex(h),w=this.getRawIndex(f);h<f?(l[u++]=S,l[u++]=w):(l[u++]=w,l[u++]=S)}return r._count=u,r._indices=l,r._updateGetRawIdx(),r},n.prototype.downSample=function(e,t,r,i){for(var a=this.clone([e],!0),s=a._chunks,o=[],l=Math.floor(1/t),u=s[e],c=this.count(),h=a._rawExtent[e]=Qx(),d=new(Zx(this._rawCount))(Math.ceil(c/l)),f=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,o.length=l);for(var m=0;m<l;m++){var g=this.getRawIndex(p+m);o[m]=u[g]}var v=r(o),b=this.getRawIndex(Math.min(p+i(o,v)||0,c-1));u[b]=v,v<h[0]&&(h[0]=v),v>h[1]&&(h[1]=v),d[f++]=b}return a._count=f,a._indices=d,a._updateGetRawIdx(),a},n.prototype.each=function(e,t){if(this._count)for(var r=e.length,i=this._chunks,a=0,s=this.count();a<s;a++){var o=this.getRawIndex(a);switch(r){case 0:t(a);break;case 1:t(i[e[0]][o],a);break;case 2:t(i[e[0]][o],i[e[1]][o],a);break;default:for(var l=0,u=[];l<r;l++)u[l]=i[e[l]][o];u[l]=a,t.apply(null,u)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],r=Qx();if(!t)return r;var i=this.count(),a=!this._indices,s;if(a)return this._rawExtent[e].slice();if(s=this._extent[e],s)return s.slice();s=r;for(var o=s[0],l=s[1],u=0;u<i;u++){var c=this.getRawIndex(u),h=t[c];h<o&&(o=h),h>l&&(l=h)}return s=[o,l],this._extent[e]=s,s},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var r=[],i=this._chunks,a=0;a<i.length;a++)r.push(i[a][t]);return r},n.prototype.clone=function(e,t){var r=new n,i=this._chunks,a=e&&ed(e,function(o,l){return o[l]=!0,o},{});if(a)for(var s=0;s<i.length;s++)r._chunks[s]=a[s]?sOe(i[s]):i[s];else r._chunks=i;return this._copyCommonProps(r),t||(r._indices=this._cloneIndices()),r._updateGetRawIdx(),r},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Tt(this._extent),e._rawExtent=Tt(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var r=this._indices.length;t=new e(r);for(var i=0;i<r;i++)t[i]=this._indices[i]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=(function(){function e(t,r,i,a){return gg(t[a],this._dimensions[a])}x4={arrayRows:e,objectRows:function(t,r,i,a){return gg(t[r],this._dimensions[a])},keyedColumns:e,original:function(t,r,i,a){var s=t&&(t.value==null?t:t.value);return gg(s instanceof Array?s[a]:s,this._dimensions[a])},typedArray:function(t,r,i,a){return t[a]}}})(),n})(),_de=(function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),r=!!t.length,i,a;if(DI(e)){var s=e,o=void 0,l=void 0,u=void 0;if(r){var c=t[0];c.prepareSource(),u=c.getSource(),o=u.data,l=u.sourceFormat,a=[c._getVersionSign()]}else o=s.get("data",!0),l=Xo(o)?mg:Bl,a=[];var h=this._getSourceMetaRawOption()||{},d=u&&u.metaRawOption||{},f=dt(h.seriesLayoutBy,d.seriesLayoutBy)||null,p=dt(h.sourceHeader,d.sourceHeader),m=dt(h.dimensions,d.dimensions),g=f!==d.seriesLayoutBy||!!p!=!!d.sourceHeader||m;i=g?[Fz(o,{seriesLayoutBy:f,sourceHeader:p,dimensions:m},l)]:[]}else{var v=e;if(r){var b=this._applyTransform(t);i=b.sourceList,a=b.upstreamSignList}else{var S=v.get("source",!0);i=[Fz(S,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},n.prototype._applyTransform=function(e){var t=this._sourceHost,r=t.get("transform",!0),i=t.get("fromTransformResult",!0);if(i!=null){var a="";e.length!==1&&bQ(a)}var s,o=[],l=[];return W(e,function(u){u.prepareSource();var c=u.getSource(i||0),h="";i!=null&&!c&&bQ(h),o.push(c),l.push(u._getVersionSign())}),r?s=nOe(r,o,{datasetIndex:t.componentIndex}):i!=null&&(s=[B3e(o[0])]),{sourceList:s,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var r=e[t];if(r._isDirty()||this._upstreamSignList[t]!==r._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,r){var i=0,a=this._storeList,s=a[i];s||(s=a[i]={});var o=s[r];if(!o){var l=this._getUpstreamSourceManagers()[0];DI(this._sourceHost)&&l?o=l._innerGetDataStore(e,t,r):(o=new Uz,o.initData(new cde(t,e.length),e)),s[r]=o}return o},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(DI(e)){var t=Aj(e);return t?[t.getSourceManager()]:[]}else return Ue(d3e(e),function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,r,i;if(DI(e))t=e.get("seriesLayoutBy",!0),r=e.get("sourceHeader",!0),i=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=e;t=a.get("seriesLayoutBy",!0),r=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:r,dimensions:i}},n})();function _Q(n){var e=n.option.transform;e&&zR(n.option.transform)}function DI(n){return n.mainType==="series"}function bQ(n){throw new Error(n)}var oOe="line-height:1";function bde(n){var e=n.lineHeight;return e==null?oOe:"line-height:"+lo(e+"")+"px"}function Sde(n,e){var t=n.color||ve.color.tertiary,r=n.fontSize||12,i=n.fontWeight||"400",a=n.color||ve.color.secondary,s=n.fontSize||14,o=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+lo(r+"")+"px;color:"+lo(t)+";font-weight:"+lo(i+""),valueStyle:"font-size:"+lo(s+"")+"px;color:"+lo(a)+";font-weight:"+lo(o+"")}:{nameStyle:{fontSize:r,fill:t,fontWeight:i},valueStyle:{fontSize:s,fill:a,fontWeight:o}}}var lOe=[0,10,20,30],uOe=["",`
`,`

`,`


`];function qi(n,e){return e.type=n,e}function zz(n){return n.type==="section"}function wde(n){return zz(n)?cOe:hOe}function Tde(n){if(zz(n)){var e=0,t=n.blocks.length,r=t>1||t>0&&!n.noHeader;return W(n.blocks,function(i){var a=Tde(i);a>=e&&(e=a+ +(r&&(!a||zz(i)&&!i.noHeader)))}),e}return 0}function cOe(n,e,t,r){var i=e.noHeader,a=dOe(Tde(e)),s=[],o=e.blocks||[];Us(!o||Be(o)),o=o||[];var l=n.orderMode;if(e.sortBlocks&&l){o=o.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(it(u,l)){var c=new gde(u[l],null);o.sort(function(m,g){return c.evaluate(m.sortParam,g.sortParam)})}else l==="seriesDesc"&&o.reverse()}W(o,function(m,g){var v=e.valueFormatter,b=wde(m)(v?Pe(Pe({},n),{valueFormatter:v}):n,m,g>0?a.html:0,r);b!=null&&s.push(b)});var h=n.renderMode==="richText"?s.join(a.richText):Vz(r,s.join(""),i?t:a.html);if(i)return h;var d=Nz(e.header,"ordinal",n.useUTC),f=Sde(r,n.renderMode).nameStyle,p=bde(r);return n.renderMode==="richText"?Ede(n,d,f)+a.richText+h:Vz(r,'<div style="'+f+";"+p+';">'+lo(d)+"</div>"+h,t)}function hOe(n,e,t,r){var i=n.renderMode,a=e.noName,s=e.noValue,o=!e.markerType,l=e.name,u=n.useUTC,c=e.valueFormatter||n.valueFormatter||function(w){return w=Be(w)?w:[w],Ue(w,function(E,T){return Nz(E,Be(f)?f[T]:f,u)})};if(!(a&&s)){var h=o?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||ve.color.secondary,i),d=a?"":Nz(l,"ordinal",u),f=e.valueType,p=s?[]:c(e.value,e.dataIndex),m=!o||!a,g=!o&&a,v=Sde(r,i),b=v.nameStyle,S=v.valueStyle;return i==="richText"?(o?"":h)+(a?"":Ede(n,d,b))+(s?"":mOe(n,p,m,g,S)):Vz(r,(o?"":h)+(a?"":fOe(d,!o,b))+(s?"":pOe(p,m,g,S)),t)}}function SQ(n,e,t,r,i,a){if(n){var s=wde(n),o={useUTC:i,renderMode:t,orderMode:r,markupStyleCreator:e,valueFormatter:n.valueFormatter};return s(o,n,0,a)}}function dOe(n){return{html:lOe[n],richText:uOe[n]}}function Vz(n,e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0",a=bde(n);return'<div style="'+i+";"+a+';">'+e+r+"</div>"}function fOe(n,e,t){var r=e?"margin-left:2px":"";return'<span style="'+t+";"+r+'">'+lo(n)+"</span>"}function pOe(n,e,t,r){var i=t?"10px":"20px",a=e?"float:right;margin-left:"+i:"";return n=Be(n)?n:[n],'<span style="'+a+";"+r+'">'+Ue(n,function(s){return lo(s)}).join("&nbsp;&nbsp;")+"</span>"}function Ede(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function mOe(n,e,t,r,i){var a=[i],s=r?10:20;return t&&a.push({padding:[0,0,0,s],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(Be(e)?e.join("  "):e,a)}function Ade(n,e){var t=n.getData().getItemVisual(e,"style"),r=t[n.visualDrawType];return Wy(r)}function Cde(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var _4=(function(){function n(){this.richTextStyles={},this._nextStyleNameId=Lce()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,r){var i=r==="richText"?this._generateStyleName():null,a=t3e({color:t,type:e,renderMode:r,markerId:i});return Ke(a)?a:(this.richTextStyles[i]=a.style,a.content)},n.prototype.wrapRichTextStyle=function(e,t){var r={};Be(t)?W(t,function(a){return Pe(r,a)}):Pe(r,t);var i=this._generateStyleName();return this.richTextStyles[i]=r,"{"+i+"|"+e+"}"},n})();function Mde(n){var e=n.series,t=n.dataIndex,r=n.multipleSeries,i=e.getData(),a=i.mapDimensionsAll("defaultedTooltip"),s=a.length,o=e.getRawValue(t),l=Be(o),u=Ade(e,t),c,h,d,f;if(s>1||l&&!s){var p=gOe(o,e,t,a,u);c=p.inlineValues,h=p.inlineValueTypes,d=p.blocks,f=p.inlineValues[0]}else if(s){var m=i.getDimensionInfo(a[0]);f=c=iS(i,t,a[0]),h=m.type}else f=c=l?o[0]:o;var g=QG(e),v=g&&e.name||"",b=i.getName(t),S=r?v:b;return qi("section",{header:v,noHeader:r||!g,sortParam:f,blocks:[qi("nameValue",{markerType:"item",markerColor:u,name:S,noName:!Mu(S),value:c,valueType:h,dataIndex:t})].concat(d||[])})}function gOe(n,e,t,r,i){var a=e.getData(),s=ed(n,function(h,d,f){var p=a.getDimensionInfo(f);return h=h||p&&p.tooltip!==!1&&p.displayName!=null},!1),o=[],l=[],u=[];r.length?W(r,function(h){c(iS(a,t,h),h)}):W(n,c);function c(h,d){var f=a.getDimensionInfo(d);!f||f.otherDims.tooltip===!1||(s?u.push(qi("nameValue",{markerType:"subItem",markerColor:i,name:f.displayName,value:h,valueType:f.type})):(o.push(h),l.push(f.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:u}}var Np=mn();function II(n,e){return n.getName(e)||n.getId(e)}var PL="__universalTransitionEnabled",Cr=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,r,i){this.seriesIndex=this.componentIndex,this.dataTask=GE({count:yOe,reset:xOe}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,i);var a=Np(this).sourceManager=new _de(this);a.prepareSource();var s=this.getInitialData(t,i);TQ(s,this),this.dataTask.context.data=s,Np(this).dataBeforeProcessed=s,wQ(this),this._initSelectedMapFromData(s)},e.prototype.mergeDefaultAndTheme=function(t,r){var i=SA(this),a=i?sx(t):{},s=this.subType;_n.hasClass(s)&&(s+="Series"),en(t,r.getTheme().get(this.subType)),en(t,this.getDefaultOption()),Uy(t,"label",["show"]),this.fillDataTextStyle(t.data),i&&id(t,a,i)},e.prototype.mergeOption=function(t,r){t=en(this.option,t,!0),this.fillDataTextStyle(t.data);var i=SA(this);i&&id(this.option,t,i);var a=Np(this).sourceManager;a.dirty(),a.prepareSource();var s=this.getInitialData(t,r);TQ(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,Np(this).dataBeforeProcessed=s,wQ(this),this._initSelectedMapFromData(s)},e.prototype.fillDataTextStyle=function(t){if(t&&!Xo(t))for(var r=["show"],i=0;i<t.length;i++)t[i]&&t[i].label&&Uy(t[i],"label",r)},e.prototype.getInitialData=function(t,r){},e.prototype.appendData=function(t){var r=this.getRawData();r.appendData(t.data)},e.prototype.getData=function(t){var r=Hz(this);if(r){var i=r.context.data;return t==null||!i.getLinkedData?i:i.getLinkedData(t)}else return Np(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var r=Hz(this);if(r){var i=r.context;i.outputData=t,r!==this.dataTask&&(i.data=t)}Np(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return ct(t)},e.prototype.getSourceManager=function(){return Np(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return Np(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.indicesOfNearest=function(t,r,i,a){var s=this.getData(),o=this.coordinateSystem,l=o&&o.getAxis(t);if(!o||!l)return[];var u=l.dataToCoord(i);a==null&&(a=1/0);var c=[],h=1/0,d=-1,f=0;return s.each(r,function(p,m){var g=l.dataToCoord(p),v=u-g,b=Math.abs(v);b<=a&&((b<h||b===h&&v>=0&&d<0)&&(h=b,d=v,f=0),v===d&&(c[f++]=m))}),c.length=f,c},e.prototype.formatTooltip=function(t,r,i){return Mde({series:this,dataIndex:t,multipleSeries:r})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(bn.node&&!(t&&t.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,r,i){var a=this.ecModel,s=Cj.prototype.getColorFromPalette.call(this,t,r,i);return s||(s=a.getColorFromPalette(t,r,i)),s},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,r){this._innerSelect(this.getData(r),t)},e.prototype.unselect=function(t,r){var i=this.option.selectedMap;if(i){var a=this.option.selectedMode,s=this.getData(r);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var l=t[o],u=II(s,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},e.prototype.toggleSelect=function(t,r){for(var i=[],a=0;a<t.length;a++)i[0]=t[a],this.isSelected(t[a],r)?this.unselect(i,r):this.select(i,r)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,r=An(t),i=[],a=0;a<r.length;a++){var s=t[r[a]];s>=0&&i.push(s)}return i},e.prototype.isSelected=function(t,r){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(r);return(i==="all"||i[II(a,t)])&&!a.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[PL])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,r){var i,a,s=this.option,o=s.selectedMode,l=r.length;if(!(!o||!l)){if(o==="series")s.selectedMap="all";else if(o==="multiple"){Lt(s.selectedMap)||(s.selectedMap={});for(var u=s.selectedMap,c=0;c<l;c++){var h=r[c],d=II(t,h);u[d]=!0,this._selectedDataIndicesMap[d]=t.getRawIndex(h)}}else if(o==="single"||o===!0){var f=r[l-1],d=II(t,f);s.selectedMap=(i={},i[d]=!0,i),this._selectedDataIndicesMap=(a={},a[d]=t.getRawIndex(f),a)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var r=[];t.hasItemOption&&t.each(function(i){var a=t.getRawDataItem(i);a&&a.selected&&r.push(i)}),r.length>0&&this._innerSelect(t,r)}},e.registerClass=function(t){return _n.registerClass(t)},e.protoInitialize=(function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"})(),e})(_n);Zi(Cr,x3);Zi(Cr,Cj);Hce(Cr,_n);function wQ(n){var e=n.name;QG(n)||(n.name=vOe(n)||e)}function vOe(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),r=[];return W(t,function(i){var a=e.getDimensionInfo(i);a.displayName&&r.push(a.displayName)}),r.join(" ")}function yOe(n){return n.model.getRawData().count()}function xOe(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),_Oe}function _Oe(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function TQ(n,e){W(dA(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,Qt(bOe,e))})}function bOe(n,e){var t=Hz(n);return t&&t.setOutputEnd((e||this).count()),e}function Hz(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var r=t.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(n.uid))}return r}}var Gr=(function(){function n(){this.group=new wt,this.uid=jS("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){},n.prototype.updateLayout=function(e,t,r,i){},n.prototype.updateVisual=function(e,t,r,i){},n.prototype.toggleBlurSeries=function(e,t,r){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n})();ej(Gr);n3(Gr);function WS(){var n=mn();return function(e){var t=n(e),r=e.pipelineContext,i=!!t.large,a=!!t.progressiveRender,s=t.large=!!(r&&r.large),o=t.progressiveRender=!!(r&&r.progressiveRender);return(i!==s||a!==o)&&"reset"}}var Dde=mn(),SOe=WS(),mr=(function(){function n(){this.group=new wt,this.uid=jS("viewChart"),this.renderTask=GE({plan:wOe,reset:TOe}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,r,i){},n.prototype.highlight=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&AQ(a,i,"emphasis")},n.prototype.downplay=function(e,t,r,i){var a=e.getData(i&&i.dataType);a&&AQ(a,i,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateLayout=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.updateVisual=function(e,t,r,i){this.render(e,t,r,i)},n.prototype.eachRendered=function(e){Ng(this.group,e)},n.markUpdateMethod=function(e,t){Dde(e).updateMethod=t},n.protoInitialize=(function(){var e=n.prototype;e.type="chart"})(),n})();function EQ(n,e,t){n&&xA(n)&&(e==="emphasis"?Yf:qf)(n,t)}function AQ(n,e,t){var r=zy(n,e),i=e&&e.highlightKey!=null?YNe(e.highlightKey):null;r!=null?W(br(r),function(a){EQ(n.getItemGraphicEl(a),t,i)}):n.eachItemGraphicEl(function(a){EQ(a,t,i)})}ej(mr);n3(mr);function wOe(n){return SOe(n.model)}function TOe(n){var e=n.model,t=n.ecModel,r=n.api,i=n.payload,a=e.pipelineContext.progressiveRender,s=n.view,o=i&&Dde(i).updateMethod,l=a?"incrementalPrepareRender":o&&s[o]?o:"render";return l!=="render"&&s[l](e,t,r,i),EOe[l]}var EOe={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},sN="\0__throttleOriginMethod",CQ="\0__throttleRate",MQ="\0__throttleType";function Rj(n,e,t){var r,i=0,a=0,s=null,o,l,u,c;e=e||0;function h(){a=new Date().getTime(),s=null,n.apply(l,u||[])}var d=function(){for(var f=[],p=0;p<arguments.length;p++)f[p]=arguments[p];r=new Date().getTime(),l=this,u=f;var m=c||e,g=c||t;c=null,o=r-(g?i:a)-m,clearTimeout(s),g?s=setTimeout(h,m):o>=0?h():s=setTimeout(h,-o),i=r};return d.clear=function(){s&&(clearTimeout(s),s=null)},d.debounceNextCall=function(f){c=f},d}function XS(n,e,t,r){var i=n[e];if(i){var a=i[sN]||i,s=i[MQ],o=i[CQ];if(o!==t||s!==r){if(t==null||!r)return n[e]=a;i=n[e]=Rj(a,t,r==="debounce"),i[sN]=a,i[MQ]=r,i[CQ]=t}return i}}function TA(n,e){var t=n[e];t&&t[sN]&&(t.clear&&t.clear(),n[e]=t[sN])}var DQ=mn(),IQ={itemStyle:Vy(Dhe,!0),lineStyle:Vy(Mhe,!0)},AOe={lineStyle:"stroke",itemStyle:"fill"};function Ide(n,e){var t=n.visualStyleMapper||IQ[e];return t||(console.warn("Unknown style type '"+e+"'."),IQ.itemStyle)}function Pde(n,e){var t=n.visualDrawType||AOe[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var COe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=n.getModel(r),a=Ide(n,r),s=a(i),o=i.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var l=Pde(n,r),u=s[l],c=St(u)?u:null,h=s.fill==="auto"||s.stroke==="auto";if(!s[l]||c||h){var d=n.getColorFromPalette(n.name,null,e.getSeriesCount());s[l]||(s[l]=d,t.setVisual("colorFromPalette",!0)),s.fill=s.fill==="auto"||St(s.fill)?d:s.fill,s.stroke=s.stroke==="auto"||St(s.stroke)?d:s.stroke}if(t.setVisual("style",s),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&c)return t.setVisual("colorFromPalette",!1),{dataEach:function(f,p){var m=n.getDataParams(p),g=Pe({},s);g[l]=c(m),f.setItemVisual(p,"style",g)}}}},nT=new Sn,MOe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),r=n.visualStyleAccessPath||"itemStyle",i=Ide(n,r),a=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(s,o){var l=s.getRawDataItem(o);if(l&&l[r]){nT.option=l[r];var u=i(nT),c=s.ensureUniqueItemVisual(o,"style");Pe(c,u),nT.option.decal&&(s.setItemVisual(o,"decal",nT.option.decal),nT.option.decal.dirty=!0),a in u&&s.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},DOe={performRawSeries:!0,overallReset:function(n){var e=ct();n.eachSeries(function(t){var r=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+r,a=e.get(i);a||(a={},e.set(i,a)),DQ(t).scope=a}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var r=t.getRawData(),i={},a=t.getData(),s=DQ(t).scope,o=t.visualStyleAccessPath||"itemStyle",l=Pde(t,o);a.each(function(u){var c=a.getRawIndex(u);i[c]=u}),r.each(function(u){var c=i[u],h=a.getItemVisual(c,"colorFromPalette");if(h){var d=a.ensureUniqueItemVisual(c,"style"),f=r.getName(u)||u+"",p=r.count();d[l]=t.getColorFromPalette(f,s,p)}})}})}},PI=Math.PI;function IOe(n,e){e=e||{},Pt(e,{text:"loading",textColor:ve.color.primary,fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255,255,255,0.8)",showSpinner:!0,color:ve.color.theme[0],spinnerRadius:10,lineWidth:5,zlevel:0});var t=new wt,r=new fn({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(r);var i=new On({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new fn({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(a);var s;return e.showSpinner&&(s=new h3({shape:{startAngle:-PI/2,endAngle:-PI/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),s.animateShape(!0).when(1e3,{endAngle:PI*3/2}).start("circularInOut"),s.animateShape(!0).when(1e3,{startAngle:PI*3/2}).delay(300).start("circularInOut"),t.add(s)),t.resize=function(){var o=i.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,u=(n.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),c=n.getHeight()/2;e.showSpinner&&s.setShape({cx:u,cy:c}),a.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var Lde=(function(){function n(e,t,r,i){this._stageTaskMap=ct(),this.ecInstance=e,this.api=t,r=this._dataProcessorHandlers=r.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=r.concat(i)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(r){var i=r.overallTask;i&&i.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var r=this._pipelineMap.get(e.__pipeline.id),i=r.context,a=!t&&r.progressiveEnabled&&(!i||i.progressiveRender)&&e.__idxInPipeline>r.blockIndex,s=a?r.step:null,o=i&&i.modDataCount,l=o!=null?Math.ceil(o/s):null;return{step:s,modBy:l,modDataCount:o}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var r=this._pipelineMap.get(e.uid),i=e.getData(),a=i.count(),s=r.progressiveEnabled&&t.incrementalPrepareRender&&a>=r.threshold,o=e.get("large")&&a>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?a:null;e.pipelineContext=r.context={progressiveRender:s,modDataCount:l,large:o}},n.prototype.restorePipelines=function(e){var t=this,r=t._pipelineMap=ct();e.eachSeries(function(i){var a=i.getProgressive(),s=i.uid;r.set(s,{id:s,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),t._pipe(i,i.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),r=this.api;W(this._allHandlers,function(i){var a=e.get(i.uid)||e.set(i.uid,{}),s="";Us(!(i.reset&&i.overallReset),s),i.reset&&this._createSeriesStageTask(i,a,t,r),i.overallReset&&this._createOverallStageTask(i,a,t,r)},this)},n.prototype.prepareView=function(e,t,r,i){var a=e.renderTask,s=a.context;s.model=t,s.ecModel=r,s.api=i,a.__block=!e.incrementalPrepareRender,this._pipe(t,a)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,r){this._performStageTasks(this._visualHandlers,e,t,r)},n.prototype._performStageTasks=function(e,t,r,i){i=i||{};var a=!1,s=this;W(e,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=s._stageTaskMap.get(l.uid),h=c.seriesTaskMap,d=c.overallTask;if(d){var f,p=d.agentStubMap;p.each(function(g){o(i,g)&&(g.dirty(),f=!0)}),f&&d.dirty(),s.updatePayload(d,r);var m=s.getPerformArgs(d,i.block);p.each(function(g){g.perform(m)}),d.perform(m)&&(a=!0)}else h&&h.each(function(g,v){o(i,g)&&g.dirty();var b=s.getPerformArgs(g,i.block);b.skip=!l.performRawSeries&&t.isSeriesFiltered(g.context.model),s.updatePayload(g,r),g.perform(b)&&(a=!0)})}});function o(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=a||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(r){t=r.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,r,i){var a=this,s=t.seriesTaskMap,o=t.seriesTaskMap=ct(),l=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(c):l?r.eachRawSeriesByType(l,c):u&&u(r,i).each(c);function c(h){var d=h.uid,f=o.set(d,s&&s.get(d)||GE({plan:kOe,reset:OOe,count:FOe}));f.context={model:h,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:a},a._pipe(h,f)}},n.prototype._createOverallStageTask=function(e,t,r,i){var a=this,s=t.overallTask=t.overallTask||GE({reset:POe});s.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:a};var o=s.agentStubMap,l=s.agentStubMap=ct(),u=e.seriesType,c=e.getTargetSeries,h=!0,d=!1,f="";Us(!e.createOnAllSeries,f),u?r.eachRawSeriesByType(u,p):c?c(r,i).each(p):(h=!1,W(r.getSeries(),p));function p(m){var g=m.uid,v=l.set(g,o&&o.get(g)||(d=!0,GE({reset:LOe,onDirty:NOe})));v.context={model:m,overallProgress:h},v.agent=s,v.__block=h,a._pipe(m,v)}d&&s.dirty()},n.prototype._pipe=function(e,t){var r=e.uid,i=this._pipelineMap.get(r);!i.head&&(i.head=t),i.tail&&i.tail.pipe(t),i.tail=t,t.__idxInPipeline=i.count++,t.__pipeline=i},n.wrapStageHandler=function(e,t){return St(e)&&(e={overallReset:e,seriesType:UOe(e)}),e.uid=jS("stageHandler"),t&&(e.visualType=t),e},n})();function POe(n){n.overallReset(n.ecModel,n.api,n.payload)}function LOe(n){return n.overallProgress&&ROe}function ROe(){this.agent.dirty(),this.getDownstream().dirty()}function NOe(){this.agent&&this.agent.dirty()}function kOe(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function OOe(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=br(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?Ue(e,function(t,r){return Rde(r)}):BOe}var BOe=Rde(0);function Rde(n){return function(e,t){var r=t.data,i=t.resetDefines[n];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function FOe(n){return n.data.count()}function UOe(n){oN=null;try{n(EA,Nde)}catch{}return oN}var EA={},Nde={},oN;kde(EA,Mj);kde(Nde,ade);EA.eachSeriesByType=EA.eachRawSeriesByType=function(n){oN=n};EA.eachComponent=function(n){n.mainType==="series"&&n.subType&&(oN=n.subType)};function kde(n,e){for(var t in e.prototype)n[t]=ki}var At=ve.darkColor,zOe=At.background,rT=function(){return{axisLine:{lineStyle:{color:At.axisLine}},splitLine:{lineStyle:{color:At.axisSplitLine}},splitArea:{areaStyle:{color:[At.backgroundTint,At.backgroundTransparent]}},minorSplitLine:{lineStyle:{color:At.axisMinorSplitLine}},axisLabel:{color:At.axisLabel},axisName:{}}},PQ={label:{color:At.secondary},itemStyle:{borderColor:At.borderTint},dividerLineStyle:{color:At.border}},Ode={darkMode:!0,color:At.theme,backgroundColor:zOe,axisPointer:{lineStyle:{color:At.border},crossStyle:{color:At.borderShade},label:{color:At.tertiary}},legend:{textStyle:{color:At.secondary},pageTextStyle:{color:At.tertiary}},textStyle:{color:At.secondary},title:{textStyle:{color:At.primary},subtextStyle:{color:At.quaternary}},toolbox:{iconStyle:{borderColor:At.accent50}},tooltip:{backgroundColor:At.neutral20,defaultBorderColor:At.border,textStyle:{color:At.tertiary}},dataZoom:{borderColor:At.accent10,textStyle:{color:At.tertiary},brushStyle:{color:At.backgroundTint},handleStyle:{color:At.neutral00,borderColor:At.accent20},moveHandleStyle:{color:At.accent40},emphasis:{handleStyle:{borderColor:At.accent50}},dataBackground:{lineStyle:{color:At.accent30},areaStyle:{color:At.accent20}},selectedDataBackground:{lineStyle:{color:At.accent50},areaStyle:{color:At.accent30}}},visualMap:{textStyle:{color:At.secondary},handleStyle:{borderColor:At.neutral30}},timeline:{lineStyle:{color:At.accent10},label:{color:At.tertiary},controlStyle:{color:At.accent30,borderColor:At.accent30}},calendar:{itemStyle:{color:At.neutral00,borderColor:At.neutral20},dayLabel:{color:At.tertiary},monthLabel:{color:At.secondary},yearLabel:{color:At.secondary}},matrix:{x:PQ,y:PQ,backgroundColor:{borderColor:At.axisLine},body:{itemStyle:{borderColor:At.borderTint}}},timeAxis:rT(),logAxis:rT(),valueAxis:rT(),categoryAxis:rT(),line:{symbol:"circle"},graph:{color:At.theme},gauge:{title:{color:At.secondary},axisLine:{lineStyle:{color:[[1,At.neutral05]]}},axisLabel:{color:At.axisLabel},detail:{color:At.primary}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}},funnel:{itemStyle:{borderColor:At.background}},radar:(function(){var n=rT();return n.axisName={color:At.axisLabel},n.axisLine.lineStyle.color=At.neutral20,n})(),treemap:{breadcrumb:{itemStyle:{color:At.neutral20,textStyle:{color:At.secondary}},emphasis:{itemStyle:{color:At.neutral30}}}},sunburst:{itemStyle:{borderColor:At.background}},map:{itemStyle:{borderColor:At.border,areaColor:At.neutral10},label:{color:At.tertiary},emphasis:{label:{color:At.primary},itemStyle:{areaColor:At.highlight}},select:{label:{color:At.primary},itemStyle:{areaColor:At.highlight}}},geo:{itemStyle:{borderColor:At.border,areaColor:At.neutral10},emphasis:{label:{color:At.primary},itemStyle:{areaColor:At.highlight}},select:{label:{color:At.primary},itemStyle:{color:At.highlight}}}};Ode.categoryAxis.splitLine.show=!1;var VOe=(function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},r={},i={};if(Ke(e)){var a=Uh(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var s=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};W(e,function(l,u){for(var c=!1,h=0;h<s.length;h++){var d=s[h],f=u.lastIndexOf(d);if(f>0&&f===u.length-d.length){var p=u.slice(0,f);p!=="data"&&(t.mainType=p,t[d.toLowerCase()]=l,c=!0)}}o.hasOwnProperty(u)&&(r[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:t,dataQuery:r,otherQuery:i}},n.prototype.filter=function(e,t){var r=this.eventInfo;if(!r)return!0;var i=r.targetEl,a=r.packedEvent,s=r.model,o=r.view;if(!s||!o)return!0;var l=t.cptQuery,u=t.dataQuery;return c(l,s,"mainType")&&c(l,s,"subType")&&c(l,s,"index","componentIndex")&&c(l,s,"name")&&c(l,s,"id")&&c(u,a,"name")&&c(u,a,"dataIndex")&&c(u,a,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,i,a));function c(h,d,f,p){return h[f]==null||d[p||f]===h[f]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n})(),Gz=["symbol","symbolSize","symbolRotate","symbolOffset"],LQ=Gz.concat(["symbolKeepAspect"]),HOe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var r={},i={},a=!1,s=0;s<Gz.length;s++){var o=Gz[s],l=n.get(o);St(l)?(a=!0,i[o]=l):r[o]=l}if(r.symbol=r.symbol||n.defaultSymbol,t.setVisual(Pe({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),e.isSeriesFiltered(n))return;var u=An(i);function c(h,d){for(var f=n.getRawValue(d),p=n.getDataParams(d),m=0;m<u.length;m++){var g=u[m];h.setItemVisual(d,g,i[g](f,p))}}return{dataEach:a?c:null}}},GOe={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function r(i,a){for(var s=i.getItemModel(a),o=0;o<LQ.length;o++){var l=LQ[o],u=s.getShallow(l,!0);u!=null&&i.setItemVisual(a,l,u)}}return{dataEach:t.hasItemOption?r:null}}};function Nj(n,e,t){switch(t){case"color":var r=n.getItemVisual(e,"style");return r[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function b2(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function Bde(n,e,t,r){switch(t){case"color":var i=n.ensureUniqueItemVisual(e,"style");i[n.getVisual("drawType")]=r,n.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(e,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(e,t,r);break}}function Fde(n,e){function t(r,i){var a=[];return r.eachComponent({mainType:"series",subType:n,query:i},function(s){a.push(s.seriesIndex)}),a}W([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){e(r[0],function(i,a,s){i=Pe({},i),s.dispatchAction(Pe(i,{type:r[1],seriesIndex:t(a,i)}))})})}function Jx(n,e,t,r,i){var a=n+e;t.isSilent(a)||r.eachComponent({mainType:"series",subType:"pie"},function(s){for(var o=s.seriesIndex,l=s.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===o){var h=s.getData(),d=zy(h,i.fromActionPayload);t.trigger(a,{type:a,seriesId:s.id,name:Be(d)?h.getName(d[0]):h.getName(d),selected:Ke(l)?l:Pe({},l)})}})}function jOe(n,e,t){n.on("selectchanged",function(r){var i=t.getModel();r.isFromClick?(Jx("map","selectchanged",e,i,r),Jx("pie","selectchanged",e,i,r)):r.fromAction==="select"?(Jx("map","selected",e,i,r),Jx("pie","selected",e,i,r)):r.fromAction==="unselect"&&(Jx("map","unselected",e,i,r),Jx("pie","unselected",e,i,r))})}function l0(n,e,t){for(var r;n&&!(e(n)&&(r=n,t));)n=n.__hostTarget||n.parent;return r}var WOe=Math.round(Math.random()*9),XOe=typeof Object.defineProperty=="function",$Oe=(function(){function n(){this._id="__ec_inner_"+WOe++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var r=this._guard(e);return XOe?Object.defineProperty(r,this._id,{value:t,enumerable:!1,configurable:!0}):r[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n})(),YOe=vn.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r+a),n.lineTo(t-i,r+a),n.closePath()}}),qOe=vn.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,r=e.cy,i=e.width/2,a=e.height/2;n.moveTo(t,r-a),n.lineTo(t+i,r),n.lineTo(t,r+a),n.lineTo(t-i,r),n.closePath()}}),KOe=vn.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),s=i/2,o=s*s/(a-s),l=r-a+s+o,u=Math.asin(o/s),c=Math.cos(u)*s,h=Math.sin(u),d=Math.cos(u),f=s*.6,p=s*.7;n.moveTo(t-c,l+o),n.arc(t,l,s,Math.PI-u,Math.PI*2+u),n.bezierCurveTo(t+c-h*f,l+o+d*f,t,r-p,t,r),n.bezierCurveTo(t,r-p,t-c+h*f,l+o+d*f,t-c,l+o),n.closePath()}}),ZOe=vn.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,r=e.width,i=e.x,a=e.y,s=r/3*2;n.moveTo(i,a),n.lineTo(i+s,a+t),n.lineTo(i,a+t/4*3),n.lineTo(i-s,a+t),n.lineTo(i,a),n.closePath()}}),QOe={line:Xi,rect:fn,roundRect:fn,square:fn,circle:sp,diamond:qOe,pin:KOe,arrow:ZOe,triangle:YOe},JOe={line:function(n,e,t,r,i){i.x1=n,i.y1=e+r/2,i.x2=n+t,i.y2=e+r/2},rect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r},roundRect:function(n,e,t,r,i){i.x=n,i.y=e,i.width=t,i.height=r,i.r=Math.min(t,r)/4},square:function(n,e,t,r,i){var a=Math.min(t,r);i.x=n,i.y=e,i.width=a,i.height=a},circle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.r=Math.min(t,r)/2},diamond:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r},pin:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},arrow:function(n,e,t,r,i){i.x=n+t/2,i.y=e+r/2,i.width=t,i.height=r},triangle:function(n,e,t,r,i){i.cx=n+t/2,i.cy=e+r/2,i.width=t,i.height=r}},lN={};W(QOe,function(n,e){lN[e]=new n});var eBe=vn.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var r=KR(n,e,t),i=this.shape;return i&&i.symbolType==="pin"&&e.position==="inside"&&(r.y=t.y+t.height*.4),r},buildPath:function(n,e,t){var r=e.symbolType;if(r!=="none"){var i=lN[r];i||(r="rect",i=lN[r]),JOe[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(n,i.shape,t)}}});function tBe(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||ve.color.neutral00,t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function Ki(n,e,t,r,i,a,s){var o=n.indexOf("empty")===0;o&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=yhe(n.slice(8),new Rt(e,t,r,i),s?"center":"cover"):n.indexOf("path://")===0?l=_A(n.slice(7),{},new Rt(e,t,r,i),s?"center":"cover"):l=new eBe({shape:{symbolType:n,x:e,y:t,width:r,height:i}}),l.__isEmptyBrush=o,l.setColor=tBe,a&&l.setColor(a),l}function $S(n){return Be(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function lx(n,e){if(n!=null)return Be(n)||(n=[n,n]),[Xe(n[0],e[0])||0,Xe(dt(n[1],n[0]),e[1])||0]}function u0(n){return isFinite(n)}function nBe(n,e,t){var r=e.x==null?0:e.x,i=e.x2==null?1:e.x2,a=e.y==null?0:e.y,s=e.y2==null?0:e.y2;e.global||(r=r*t.width+t.x,i=i*t.width+t.x,a=a*t.height+t.y,s=s*t.height+t.y),r=u0(r)?r:0,i=u0(i)?i:1,a=u0(a)?a:0,s=u0(s)?s:0;var o=n.createLinearGradient(r,a,i,s);return o}function rBe(n,e,t){var r=t.width,i=t.height,a=Math.min(r,i),s=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(s=s*r+t.x,o=o*i+t.y,l=l*a),s=u0(s)?s:.5,o=u0(o)?o:.5,l=l>=0&&u0(l)?l:.5;var u=n.createRadialGradient(s,o,0,s,o,l);return u}function jz(n,e,t){for(var r=e.type==="radial"?rBe(n,e,t):nBe(n,e,t),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}function iBe(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function LI(n){return parseInt(n,10)}function ab(n,e,t){var r=["width","height"][e],i=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],s=["paddingRight","paddingBottom"][e];if(t[r]!=null&&t[r]!=="auto")return parseFloat(t[r]);var o=document.defaultView.getComputedStyle(n);return(n[i]||LI(o[r])||LI(n.style[r]))-(LI(o[a])||0)-(LI(o[s])||0)|0}function aBe(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:Ln(n)?[n]:Be(n)?n:null}function kj(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&aBe(e.lineDash,e.lineWidth),r=e.lineDashOffset;if(t){var i=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;i&&i!==1&&(t=Ue(t,function(a){return a/i}),r/=i)}return[t,r]}var sBe=new rd(!0);function uN(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function RQ(n){return typeof n=="string"&&n!=="none"}function cN(n){var e=n.fill;return e!=null&&e!=="none"}function NQ(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function kQ(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function Wz(n,e,t){var r=tj(e.image,e.__image,t);if(r3(r)){var i=n.createPattern(r,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(e.x||0,e.y||0),a.rotateSelf(0,0,(e.rotation||0)*vL),a.scaleSelf(e.scaleX||1,e.scaleY||1),i.setTransform(a)}return i}}function oBe(n,e,t,r){var i,a=uN(t),s=cN(t),o=t.strokePercent,l=o<1,u=!e.path;(!e.silent||l)&&u&&e.createPathProxy();var c=e.path||sBe,h=e.__dirty;if(!r){var d=t.fill,f=t.stroke,p=s&&!!d.colorStops,m=a&&!!f.colorStops,g=s&&!!d.image,v=a&&!!f.image,b=void 0,S=void 0,w=void 0,E=void 0,T=void 0;(p||m)&&(T=e.getBoundingRect()),p&&(b=h?jz(n,d,T):e.__canvasFillGradient,e.__canvasFillGradient=b),m&&(S=h?jz(n,f,T):e.__canvasStrokeGradient,e.__canvasStrokeGradient=S),g&&(w=h||!e.__canvasFillPattern?Wz(n,d,e):e.__canvasFillPattern,e.__canvasFillPattern=w),v&&(E=h||!e.__canvasStrokePattern?Wz(n,f,e):e.__canvasStrokePattern,e.__canvasStrokePattern=E),p?n.fillStyle=b:g&&(w?n.fillStyle=w:s=!1),m?n.strokeStyle=S:v&&(E?n.strokeStyle=E:a=!1)}var M=e.getGlobalScale();c.setScale(M[0],M[1],e.segmentIgnoreThreshold);var P,I;n.setLineDash&&t.lineDash&&(i=kj(e),P=i[0],I=i[1]);var D=!0;(u||h&k_)&&(c.setDPR(n.dpr),l?c.setContext(null):(c.setContext(n),D=!1),c.reset(),e.buildPath(c,e.shape,r),c.toStatic(),e.pathUpdated()),D&&c.rebuildPath(n,l?o:1),P&&(n.setLineDash(P),n.lineDashOffset=I),r||(t.strokeFirst?(a&&kQ(n,t),s&&NQ(n,t)):(s&&NQ(n,t),a&&kQ(n,t))),P&&n.setLineDash([])}function lBe(n,e,t){var r=e.__image=tj(t.image,e.__image,e,e.onload);if(!(!r||!r3(r))){var i=t.x||0,a=t.y||0,s=e.getWidth(),o=e.getHeight(),l=r.width/r.height;if(s==null&&o!=null?s=o*l:o==null&&s!=null?o=s/l:s==null&&o==null&&(s=r.width,o=r.height),t.sWidth&&t.sHeight){var u=t.sx||0,c=t.sy||0;n.drawImage(r,u,c,t.sWidth,t.sHeight,i,a,s,o)}else if(t.sx&&t.sy){var u=t.sx,c=t.sy,h=s-u,d=o-c;n.drawImage(r,u,c,h,d,i,a,s,o)}else n.drawImage(r,i,a,s,o)}}function uBe(n,e,t){var r,i=t.text;if(i!=null&&(i+=""),i){n.font=t.font||Wf,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var a=void 0,s=void 0;n.setLineDash&&t.lineDash&&(r=kj(e),a=r[0],s=r[1]),a&&(n.setLineDash(a),n.lineDashOffset=s),t.strokeFirst?(uN(t)&&n.strokeText(i,t.x,t.y),cN(t)&&n.fillText(i,t.x,t.y)):(cN(t)&&n.fillText(i,t.x,t.y),uN(t)&&n.strokeText(i,t.x,t.y)),a&&n.setLineDash([])}}var OQ=["shadowBlur","shadowOffsetX","shadowOffsetY"],BQ=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Ude(n,e,t,r,i){var a=!1;if(!r&&(t=t||{},e===t))return!1;if(r||e.opacity!==t.opacity){Go(n,i),a=!0;var s=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(s)?Iy.opacity:s}(r||e.blend!==t.blend)&&(a||(Go(n,i),a=!0),n.globalCompositeOperation=e.blend||Iy.blend);for(var o=0;o<OQ.length;o++){var l=OQ[o];(r||e[l]!==t[l])&&(a||(Go(n,i),a=!0),n[l]=n.dpr*(e[l]||0))}return(r||e.shadowColor!==t.shadowColor)&&(a||(Go(n,i),a=!0),n.shadowColor=e.shadowColor||Iy.shadowColor),a}function FQ(n,e,t,r,i){var a=AA(e,i.inHover),s=r?null:t&&AA(t,i.inHover)||{};if(a===s)return!1;var o=Ude(n,a,s,r,i);if((r||a.fill!==s.fill)&&(o||(Go(n,i),o=!0),RQ(a.fill)&&(n.fillStyle=a.fill)),(r||a.stroke!==s.stroke)&&(o||(Go(n,i),o=!0),RQ(a.stroke)&&(n.strokeStyle=a.stroke)),(r||a.opacity!==s.opacity)&&(o||(Go(n,i),o=!0),n.globalAlpha=a.opacity==null?1:a.opacity),e.hasStroke()){var l=a.lineWidth,u=l/(a.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==u&&(o||(Go(n,i),o=!0),n.lineWidth=u)}for(var c=0;c<BQ.length;c++){var h=BQ[c],d=h[0];(r||a[d]!==s[d])&&(o||(Go(n,i),o=!0),n[d]=a[d]||h[1])}return o}function cBe(n,e,t,r,i){return Ude(n,AA(e,i.inHover),t&&AA(t,i.inHover),r,i)}function zde(n,e){var t=e.transform,r=n.dpr||1;t?n.setTransform(r*t[0],r*t[1],r*t[2],r*t[3],r*t[4],r*t[5]):n.setTransform(r,0,0,r,0,0)}function hBe(n,e,t){for(var r=!1,i=0;i<n.length;i++){var a=n[i];r=r||a.isZeroArea(),zde(e,a),e.beginPath(),a.buildPath(e,a.shape),e.clip()}t.allClipped=r}function dBe(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var UQ=1,zQ=2,VQ=3,HQ=4;function fBe(n){var e=cN(n),t=uN(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function Go(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function AA(n,e){return e&&n.__hoverStyle||n.style}function Vde(n,e){c0(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function c0(n,e,t,r){var i=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~Cl,e.__isRendered=!1;return}var a=e.__clipPaths,s=t.prevElClipPaths,o=!1,l=!1;if((!s||iBe(a,s))&&(s&&s.length&&(Go(n,t),n.restore(),l=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),a&&a.length&&(Go(n,t),n.save(),hBe(a,n,t),o=!0),t.prevElClipPaths=a),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=t.prevEl;u||(l=o=!0);var c=e instanceof vn&&e.autoBatch&&fBe(e.style);o||dBe(i,u.transform)?(Go(n,t),zde(n,e)):c||Go(n,t);var h=AA(e,t.inHover);e instanceof vn?(t.lastDrawType!==UQ&&(l=!0,t.lastDrawType=UQ),FQ(n,e,u,l,t),(!c||!t.batchFill&&!t.batchStroke)&&n.beginPath(),oBe(n,e,h,c),c&&(t.batchFill=h.fill||"",t.batchStroke=h.stroke||"")):e instanceof nS?(t.lastDrawType!==VQ&&(l=!0,t.lastDrawType=VQ),FQ(n,e,u,l,t),uBe(n,e,h)):e instanceof Ka?(t.lastDrawType!==zQ&&(l=!0,t.lastDrawType=zQ),cBe(n,e,u,l,t),lBe(n,e,h)):e.getTemporalDisplayables&&(t.lastDrawType!==HQ&&(l=!0,t.lastDrawType=HQ),pBe(n,e,t)),c&&r&&Go(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function pBe(n,e,t){var r=e.getDisplayables(),i=e.getTemporalDisplayables();n.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},s,o;for(s=e.getCursor(),o=r.length;s<o;s++){var l=r[s];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),c0(n,l,a,s===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),c0(n,l,a,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),a.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var b4=new $Oe,GQ=new eS(100),jQ=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function aS(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),r=e.getZr(),i=r.painter.type==="svg";n.dirty&&b4.delete(n);var a=b4.get(n);if(a)return a;var s=Pt(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});s.backgroundColor==="none"&&(s.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=s.rotation,o.scaleX=o.scaleY=i?1:1/t,b4.set(n,o),n.dirty=!1,o;function l(u){for(var c=[t],h=!0,d=0;d<jQ.length;++d){var f=s[jQ[d]];if(f!=null&&!Be(f)&&!Ke(f)&&!Ln(f)&&typeof f!="boolean"){h=!1;break}c.push(f)}var p;if(h){p=c.join(",")+(i?"-svg":"");var m=GQ.get(p);m&&(i?u.svgElement=m:u.image=m)}var g=Gde(s.dashArrayX),v=mBe(s.dashArrayY),b=Hde(s.symbol),S=gBe(g),w=jde(v),E=!i&&Dc.createCanvas(),T=i&&{tag:"g",attrs:{},key:"dcl",children:[]},M=I(),P;E&&(E.width=M.width*t,E.height=M.height*t,P=E.getContext("2d")),D(),h&&GQ.put(p,E||T),u.image=E,u.svgElement=T,u.svgWidth=M.width,u.svgHeight=M.height;function I(){for(var R=1,B=0,k=S.length;B<k;++B)R=sZ(R,S[B]);for(var V=1,B=0,k=b.length;B<k;++B)V=sZ(V,b[B].length);R*=V;var G=w*S.length*b.length;return{width:Math.max(1,Math.min(R,s.maxTileWidth)),height:Math.max(1,Math.min(G,s.maxTileHeight))}}function D(){P&&(P.clearRect(0,0,E.width,E.height),s.backgroundColor&&(P.fillStyle=s.backgroundColor,P.fillRect(0,0,E.width,E.height)));for(var R=0,B=0;B<v.length;++B)R+=v[B];if(R<=0)return;for(var k=-w,V=0,G=0,F=0;k<M.height;){if(V%2===0){for(var X=G/2%b.length,j=0,Q=0,H=0;j<M.width*2;){for(var K=0,B=0;B<g[F].length;++B)K+=g[F][B];if(K<=0)break;if(Q%2===0){var te=(1-s.symbolSize)*.5,Y=j+g[F][Q]*te,de=k+v[V]*te,ge=g[F][Q]*s.symbolSize,se=v[V]*s.symbolSize,he=H/2%b[X].length;fe(Y,de,ge,se,b[X][he])}j+=g[F][Q],++H,++Q,Q===g[F].length&&(Q=0)}++F,F===g.length&&(F=0)}k+=v[V],++G,++V,V===v.length&&(V=0)}function fe(Ee,Ce,Re,He,pt){var lt=i?1:t,Mt=Ki(pt,Ee*lt,Ce*lt,Re*lt,He*lt,s.color,s.symbolKeepAspect);if(i){var mt=r.painter.renderOneToVNode(Mt);mt&&T.children.push(mt)}else Vde(P,Mt)}}}}function Hde(n){if(!n||n.length===0)return[["rect"]];if(Ke(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!Ke(n[t])){e=!1;break}if(e)return Hde([n]);for(var r=[],t=0;t<n.length;++t)Ke(n[t])?r.push([n[t]]):r.push(n[t]);return r}function Gde(n){if(!n||n.length===0)return[[0,0]];if(Ln(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,r=0;r<n.length;++r)if(!Ln(n[r])){t=!1;break}if(t)return Gde([n]);for(var i=[],r=0;r<n.length;++r)if(Ln(n[r])){var e=Math.ceil(n[r]);i.push([e,e])}else{var e=Ue(n[r],function(o){return Math.ceil(o)});e.length%2===1?i.push(e.concat(e)):i.push(e)}return i}function mBe(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(Ln(n)){var e=Math.ceil(n);return[e,e]}var t=Ue(n,function(r){return Math.ceil(r)});return n.length%2?t.concat(t):t}function gBe(n){return Ue(n,function(e){return jde(e)})}function jde(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function vBe(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var r=t.getData();r.hasItemVisual()&&r.each(function(s){var o=r.getItemVisual(s,"decal");if(o){var l=r.ensureUniqueItemVisual(s,"style");l.decal=aS(o,e)}});var i=r.getVisual("decal");if(i){var a=r.getVisual("style");a.decal=aS(i,e)}}})}var rc=new Uu,Wde={};function yBe(n,e){Wde[n]=e}function xBe(n){return Wde[n]}var Xde={};function _Be(n,e){Xde[n]=e}function bBe(n){return Xde[n]}var SBe=1,wBe=800,TBe=900,EBe=1e3,ABe=2e3,CBe=5e3,$de=1e3,MBe=1100,Oj=2e3,Yde=3e3,DBe=4e3,b3=4500,IBe=4600,PBe=5e3,LBe=6e3,qde=7e3,RBe={PROCESSOR:{FILTER:EBe,SERIES_FILTER:wBe,STATISTIC:CBe},VISUAL:{LAYOUT:$de,PROGRESSIVE_LAYOUT:MBe,GLOBAL:Oj,CHART:Yde,POST_CHART_LAYOUT:IBe,COMPONENT:DBe,BRUSH:PBe,CHART_ITEM:b3,ARIA:LBe,DECAL:qde}},ea="__flagInMainProcess",RI="__mainProcessVersion",Na="__pendingUpdate",S4="__needsUpdateStatus",WQ=/^[a-zA-Z0-9_]+$/,w4="__connectUpdateStatus",XQ=0,NBe=1,kBe=2;function Kde(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return Qde(this,n,e)}}function Zde(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Qde(this,n,e)}}function Qde(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),Uu.prototype[e].apply(n,t)}var Jde=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(Uu),efe=Jde.prototype;efe.on=Zde("on");efe.off=Zde("off");var Tv,T4,NI,Ad,kI,E4,A4,e_,t_,$Q,YQ,C4,qQ,OI,KQ,tfe,$l,ZQ,n_,nfe=(function(n){be(e,n);function e(t,r,i){var a=n.call(this,new VOe)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},a._dom=t;var s="canvas",o="auto",l=!1;a[RI]=1,i.ssr&&dRe(function(d){var f=Ft(d),p=f.dataIndex;if(p!=null){var m=ct();return m.set("series_index",f.seriesIndex),m.set("data_index",p),f.ssrType&&m.set("ssr_type",f.ssrType),m}});var u=a._zr=nZ(t,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:dt(i.useDirtyRect,l),useCoarsePointer:dt(i.useCoarsePointer,o),pointerSize:i.pointerSize});a._ssr=i.ssr,a._throttledZrFlush=Rj(Qe(u.flush,u),17),a._updateTheme(r),a._locale=Hke(i.locale||Ihe),a._coordSysMgr=new x2;var c=a._api=KQ(a);function h(d,f){return d.__prio-f.__prio}return _L(dN,h),_L(Yz,h),a._scheduler=new Lde(a,c,Yz,dN),a._messageCenter=new Jde,a._initEvents(),a.resize=Qe(a.resize,a),u.animation.on("frame",a._onframe,a),$Q(u,a),YQ(u,a),zR(a),a}return e.prototype._onframe=function(){if(!this._disposed){ZQ(this);var t=this._scheduler;if(this[Na]){var r=this[Na].silent;this[ea]=!0,n_(this);try{Tv(this),Ad.update.call(this,null,this[Na].updateParams)}catch(l){throw this[ea]=!1,this[Na]=null,l}this._zr.flush(),this[ea]=!1,this[Na]=null,e_.call(this,r),t_.call(this,r)}else if(t.unfinished){var i=SBe,a=this._model,s=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(a),t.performDataProcessorTasks(a),E4(this,a),t.performVisualTasks(a),OI(this,this._model,s,"remain",{}),i-=+new Date-o}while(i>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,r,i){if(!this[ea]){if(this._disposed){this.id;return}var a,s,o;if(Lt(r)&&(i=r.lazyUpdate,a=r.silent,s=r.replaceMerge,o=r.transition,r=r.notMerge),this[ea]=!0,n_(this),!this._model||r){var l=new w3e(this._api),u=this._theme,c=this._model=new Mj;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(t,{replaceMerge:s},qz);var h={seriesTransition:o,optionChanged:!0};if(i)this[Na]={silent:a,updateParams:h},this[ea]=!1,this.getZr().wakeUp();else{try{Tv(this),Ad.update.call(this,null,h)}catch(d){throw this[Na]=null,this[ea]=!1,d}this._ssr||this._zr.flush(),this[Na]=null,this[ea]=!1,e_.call(this,a),t_.call(this,a)}}},e.prototype.setTheme=function(t,r){if(!this[ea]){if(this._disposed){this.id;return}var i=this._model;if(i){var a=r&&r.silent,s=null;this[Na]&&(a==null&&(a=this[Na].silent),s=this[Na].updateParams,this[Na]=null),this[ea]=!0,n_(this);try{this._updateTheme(t),i.setTheme(this._theme),Tv(this),Ad.update.call(this,{type:"setTheme"},s)}catch(o){throw this[ea]=!1,o}this[ea]=!1,e_.call(this,a),t_.call(this,a)}}},e.prototype._updateTheme=function(t){Ke(t)&&(t=rfe[t]),t&&(t=Tt(t),t&&ode(t,!0),this._theme=t)},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||bn.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var r=this._zr.painter;return r.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var r=this._zr.painter;return r.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){var t=this._zr,r=t.storage.getDisplayList();return W(r,function(i){i.stopAnimation(null,!0)}),t.painter.toDataURL()},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var r=t.excludeComponents,i=this._model,a=[],s=this;W(r,function(l){i.eachComponent({mainType:l},function(u){var c=s._componentsMap[u.__viewId];c.group.ignore||(a.push(c),c.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return W(a,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var r=t.type==="svg",i=this.group,a=Math.min,s=Math.max,o=1/0;if(QQ[i]){var l=o,u=o,c=-o,h=-o,d=[],f=t&&t.pixelRatio||this.getDevicePixelRatio();W(jE,function(S,w){if(S.group===i){var E=r?S.getZr().painter.getSvgDom().innerHTML:S.renderToCanvas(Tt(t)),T=S.getDom().getBoundingClientRect();l=a(T.left,l),u=a(T.top,u),c=s(T.right,c),h=s(T.bottom,h),d.push({dom:E,left:T.left,top:T.top})}}),l*=f,u*=f,c*=f,h*=f;var p=c-l,m=h-u,g=Dc.createCanvas(),v=nZ(g,{renderer:r?"svg":"canvas"});if(v.resize({width:p,height:m}),r){var b="";return W(d,function(S){var w=S.left-l,E=S.top-u;b+='<g transform="translate('+w+","+E+')">'+S.dom+"</g>"}),v.painter.getSvgRoot().innerHTML=b,t.connectedBackgroundColor&&v.painter.setBackgroundColor(t.connectedBackgroundColor),v.refreshImmediately(),v.painter.toDataURL()}else return t.connectedBackgroundColor&&v.add(new fn({shape:{x:0,y:0,width:p,height:m},style:{fill:t.connectedBackgroundColor}})),W(d,function(S){var w=new Ka({style:{x:S.left*f-l,y:S.top*f-u,image:S.dom}});v.add(w)}),v.refreshImmediately(),g.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,r,i){return kI(this,"convertToPixel",t,r,i)},e.prototype.convertToLayout=function(t,r,i){return kI(this,"convertToLayout",t,r,i)},e.prototype.convertFromPixel=function(t,r,i){return kI(this,"convertFromPixel",t,r,i)},e.prototype.containPixel=function(t,r){if(this._disposed){this.id;return}var i=this._model,a,s=yb(i,t);return W(s,function(o,l){l.indexOf("Models")>=0&&W(o,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)a=a||!!c.containPoint(r);else if(l==="seriesModels"){var h=this._chartsMap[u.__viewId];h&&h.containPoint&&(a=a||h.containPoint(r,u))}},this)},this),!!a},e.prototype.getVisual=function(t,r){var i=this._model,a=yb(i,t,{defaultMainType:"series"}),s=a.seriesModel,o=s.getData(),l=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?o.indexOfRawIndex(a.dataIndex):null;return l!=null?Nj(o,l,r):b2(o,r)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;W(OBe,function(i){var a=function(s){var o=t.getModel(),l=s.target,u,c=i==="globalout";if(c?u={}:l&&l0(l,function(m){var g=Ft(m);if(g&&g.dataIndex!=null){var v=g.dataModel||o.getSeriesByIndex(g.seriesIndex);return u=v&&v.getDataParams(g.dataIndex,g.dataType,l)||{},!0}else if(g.eventData)return u=Pe({},g.eventData),!0},!0),u){var h=u.componentType,d=u.componentIndex;(h==="markLine"||h==="markPoint"||h==="markArea")&&(h="series",d=u.seriesIndex);var f=h&&d!=null&&o.getComponent(h,d),p=f&&t[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];u.event=s,u.type=i,t._$eventProcessor.eventInfo={targetEl:l,packedEvent:u,model:f,view:p},t.trigger(i,u)}};a.zrEventfulCallAtLast=!0,t._zr.on(i,a,t)});var r=this._messageCenter;W($z,function(i,a){r.on(a,function(s){t.trigger(a,s)})}),jOe(r,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&Uce(this.getDom(),Fj,"");var r=this,i=r._api,a=r._model;W(r._componentsViews,function(s){s.dispose(a,i)}),W(r._chartsViews,function(s){s.dispose(a,i)}),r._zr.dispose(),r._dom=r._model=r._chartsMap=r._componentsMap=r._chartsViews=r._componentsViews=r._scheduler=r._api=r._zr=r._throttledZrFlush=r._theme=r._coordSysMgr=r._messageCenter=null,delete jE[r.id]},e.prototype.resize=function(t){if(!this[ea]){if(this._disposed){this.id;return}this._zr.resize(t);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!r){var i=r.resetOption("media"),a=t&&t.silent;this[Na]&&(a==null&&(a=this[Na].silent),i=!0,this[Na]=null),this[ea]=!0,n_(this);try{i&&Tv(this),Ad.update.call(this,{type:"resize",animation:Pe({duration:0},t&&t.animation)})}catch(s){throw this[ea]=!1,s}this[ea]=!1,e_.call(this,a),t_.call(this,a)}}},e.prototype.showLoading=function(t,r){if(this._disposed){this.id;return}if(Lt(t)&&(r=t,t=""),t=t||"default",this.hideLoading(),!!Kz[t]){var i=Kz[t](this._api,r),a=this._zr;this._loadingFX=i,a.add(i)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var r=Pe({},t);return r.type=Xz[t.type],r},e.prototype.dispatchAction=function(t,r){if(this._disposed){this.id;return}if(Lt(r)||(r={silent:!!r}),!!hN[t.type]&&this._model){if(this[ea]){this._pendingActions.push(t);return}var i=r.silent;A4.call(this,t,i);var a=r.flush;a?this._zr.flush():a!==!1&&bn.browser.weChat&&this._throttledZrFlush(),e_.call(this,i),t_.call(this,i)}},e.prototype.updateLabelLayout=function(){rc.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var r=t.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(r);a.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=(function(){Tv=function(h){var d=h._scheduler;d.restorePipelines(h._model),d.prepareStageTasks(),T4(h,!0),T4(h,!1),d.plan()},T4=function(h,d){for(var f=h._model,p=h._scheduler,m=d?h._componentsViews:h._chartsViews,g=d?h._componentsMap:h._chartsMap,v=h._zr,b=h._api,S=0;S<m.length;S++)m[S].__alive=!1;d?f.eachComponent(function(T,M){T!=="series"&&w(M)}):f.eachSeries(w);function w(T){var M=T.__requireNewView;T.__requireNewView=!1;var P="_ec_"+T.id+"_"+T.type,I=!M&&g[P];if(!I){var D=Uh(T.type),R=d?Gr.getClass(D.main,D.sub):mr.getClass(D.sub);I=new R,I.init(f,b),g[P]=I,m.push(I),v.add(I.group)}T.__viewId=I.__id=P,I.__alive=!0,I.__model=T,I.group.__ecComponentInfo={mainType:T.mainType,index:T.componentIndex},!d&&p.prepareView(I,T,f,b)}for(var S=0;S<m.length;){var E=m[S];E.__alive?S++:(!d&&E.renderTask.dispose(),v.remove(E.group),E.dispose(f,b),m.splice(S,1),g[E.__id]===E&&delete g[E.__id],E.__id=E.group.__ecComponentInfo=null)}},NI=function(h,d,f,p,m){var g=h._model;if(g.setUpdatePayload(f),!p){W([].concat(h._componentsViews).concat(h._chartsViews),E);return}var v={};v[p+"Id"]=f[p+"Id"],v[p+"Index"]=f[p+"Index"],v[p+"Name"]=f[p+"Name"];var b={mainType:p,query:v};m&&(b.subType=m);var S=f.excludeSeriesId,w;S!=null&&(w=ct(),W(br(S),function(T){var M=oa(T,null);M!=null&&w.set(M,!0)})),g&&g.eachComponent(b,function(T){var M=w&&w.get(T.id)!=null;if(!M)if(kZ(f))if(T instanceof Cr)f.type===Py&&!f.notBlur&&!T.get(["emphasis","disabled"])&&zNe(T,f,h._api);else{var P=lj(T.mainType,T.componentIndex,f.name,h._api),I=P.focusSelf,D=P.dispatchers;f.type===Py&&I&&!f.notBlur&&Tz(T.mainType,T.componentIndex,h._api),D&&W(D,function(R){f.type===Py?Yf(R):qf(R)})}else Az(f)&&T instanceof Cr&&(GNe(T,f,h._api),RZ(T),$l(h))},h),g&&g.eachComponent(b,function(T){var M=w&&w.get(T.id)!=null;M||E(h[p==="series"?"_chartsMap":"_componentsMap"][T.__viewId])},h);function E(T){T&&T.__alive&&T[d]&&T[d](T.__model,g,h._api,f)}},Ad={prepareAndUpdate:function(h){Tv(this),Ad.update.call(this,h,h&&{optionChanged:h.newOption!=null})},update:function(h,d){var f=this._model,p=this._api,m=this._zr,g=this._coordSysMgr,v=this._scheduler;if(f){f.setUpdatePayload(h),v.restoreData(f,h),v.performSeriesTasks(f),g.create(f,p),v.performDataProcessorTasks(f,h),E4(this,f),g.update(f,p),r(f),v.performVisualTasks(f,h);var b=f.get("backgroundColor")||"transparent";m.setBackgroundColor(b);var S=f.get("darkMode");S!=null&&S!=="auto"&&m.setDarkMode(S),C4(this,f,p,h,d),rc.trigger("afterupdate",f,p)}},updateTransform:function(h){var d=this,f=this._model,p=this._api;if(f){f.setUpdatePayload(h);var m=[];f.eachComponent(function(v,b){if(v!=="series"){var S=d.getViewOfComponentModel(b);if(S&&S.__alive)if(S.updateTransform){var w=S.updateTransform(b,f,p,h);w&&w.update&&m.push(S)}else m.push(S)}});var g=ct();f.eachSeries(function(v){var b=d._chartsMap[v.__viewId];if(b.updateTransform){var S=b.updateTransform(v,f,p,h);S&&S.update&&g.set(v.uid,1)}else g.set(v.uid,1)}),r(f),this._scheduler.performVisualTasks(f,h,{setDirty:!0,dirtyMap:g}),OI(this,f,p,h,{},g),rc.trigger("afterupdate",f,p)}},updateView:function(h){var d=this._model;d&&(d.setUpdatePayload(h),mr.markUpdateMethod(h,"updateView"),r(d),this._scheduler.performVisualTasks(d,h,{setDirty:!0}),C4(this,d,this._api,h,{}),rc.trigger("afterupdate",d,this._api))},updateVisual:function(h){var d=this,f=this._model;f&&(f.setUpdatePayload(h),f.eachSeries(function(p){p.getData().clearAllVisual()}),mr.markUpdateMethod(h,"updateVisual"),r(f),this._scheduler.performVisualTasks(f,h,{visualType:"visual",setDirty:!0}),f.eachComponent(function(p,m){if(p!=="series"){var g=d.getViewOfComponentModel(m);g&&g.__alive&&g.updateVisual(m,f,d._api,h)}}),f.eachSeries(function(p){var m=d._chartsMap[p.__viewId];m.updateVisual(p,f,d._api,h)}),rc.trigger("afterupdate",f,this._api))},updateLayout:function(h){Ad.update.call(this,h)}};function t(h,d,f,p,m){if(h._disposed){h.id;return}for(var g=h._model,v=h._coordSysMgr.getCoordinateSystems(),b,S=yb(g,f),w=0;w<v.length;w++){var E=v[w];if(E[d]&&(b=E[d](g,S,p,m))!=null)return b}}kI=t,E4=function(h,d){var f=h._chartsMap,p=h._scheduler;d.eachSeries(function(m){p.updateStreamModes(m,f[m.__viewId])})},A4=function(h,d){var f=this,p=this.getModel(),m=h.type,g=h.escapeConnect,v=hN[m],b=(v.update||"update").split(":"),S=b.pop(),w=b[0]!=null&&Uh(b[0]);this[ea]=!0,n_(this);var E=[h],T=!1;h.batch&&(T=!0,E=Ue(h.batch,function(F){return F=Pt(Pe({},F),h),F.batch=null,F}));var M=[],P,I=[],D=v.nonRefinedEventType,R=Az(h),B=kZ(h);if(B&&she(this._api),W(E,function(F){var X=v.action(F,p,f._api);if(v.refineEvent?I.push(X):P=X,P=P||Pe({},F),P.type=D,M.push(P),B){var j=JG(h),Q=j.queryOptionMap,H=j.mainTypeSpecified,K=H?Q.keys()[0]:"series";NI(f,S,F,K),$l(f)}else R?(NI(f,S,F,"series"),$l(f)):w&&NI(f,S,F,w.main,w.sub)}),S!=="none"&&!B&&!R&&!w)try{this[Na]?(Tv(this),Ad.update.call(this,h),this[Na]=null):Ad[S].call(this,h)}catch(F){throw this[ea]=!1,F}if(T?P={type:D,escapeConnect:g,batch:M}:P=M[0],this[ea]=!1,!d){var k=void 0;if(v.refineEvent){var V=v.refineEvent(I,h,p,this._api).eventContent;Us(Lt(V)),k=Pt({type:v.refinedEventType},V),k.fromAction=h.type,k.fromActionPayload=h,k.escapeConnect=!0}var G=this._messageCenter;G.trigger(P.type,P),k&&G.trigger(k.type,k)}},e_=function(h){for(var d=this._pendingActions;d.length;){var f=d.shift();A4.call(this,f,h)}},t_=function(h){!h&&this.trigger("updated")},$Q=function(h,d){h.on("rendered",function(f){d.trigger("rendered",f),h.animation.isFinished()&&!d[Na]&&!d._scheduler.unfinished&&!d._pendingActions.length&&d.trigger("finished")})},YQ=function(h,d){h.on("mouseover",function(f){var p=f.target,m=l0(p,xA);m&&(VNe(m,f,d._api),$l(d))}).on("mouseout",function(f){var p=f.target,m=l0(p,xA);m&&(HNe(m,f,d._api),$l(d))}).on("click",function(f){var p=f.target,m=l0(p,function(b){return Ft(b).dataIndex!=null},!0);if(m){var g=m.selected?"unselect":"select",v=Ft(m);d._api.dispatchAction({type:g,dataType:v.dataType,dataIndexInside:v.dataIndex,seriesIndex:v.seriesIndex,isFromClick:!0})}})};function r(h){h.clearColorPalette(),h.eachSeries(function(d){d.clearColorPalette()})}function i(h){var d=[],f=[],p=!1;if(h.eachComponent(function(b,S){var w=S.get("zlevel")||0,E=S.get("z")||0,T=S.getZLevelKey();p=p||!!T,(b==="series"?f:d).push({zlevel:w,z:E,idx:S.componentIndex,type:b,key:T})}),p){var m=d.concat(f),g,v;_L(m,function(b,S){return b.zlevel===S.zlevel?b.z-S.z:b.zlevel-S.zlevel}),W(m,function(b){var S=h.getComponent(b.type,b.idx),w=b.zlevel,E=b.key;g!=null&&(w=Math.max(g,w)),E?(w===g&&E!==v&&w++,v=E):v&&(w===g&&w++,v=""),g=w,S.setZLevel(w)})}}C4=function(h,d,f,p,m){i(d),qQ(h,d,f,p,m),W(h._chartsViews,function(g){g.__alive=!1}),OI(h,d,f,p,m),W(h._chartsViews,function(g){g.__alive||g.remove(d,f)})},qQ=function(h,d,f,p,m,g){W(g||h._componentsViews,function(v){var b=v.__model;u(b,v),v.render(b,d,f,p),l(b,v),c(b,v)})},OI=function(h,d,f,p,m,g){var v=h._scheduler;m=Pe(m||{},{updatedSeries:d.getSeries()}),rc.trigger("series:beforeupdate",d,f,m);var b=!1;d.eachSeries(function(S){var w=h._chartsMap[S.__viewId];w.__alive=!0;var E=w.renderTask;v.updatePayload(E,p),u(S,w),g&&g.get(S.uid)&&E.dirty(),E.perform(v.getPerformArgs(E))&&(b=!0),w.group.silent=!!S.get("silent"),o(S,w),RZ(S)}),v.unfinished=b||v.unfinished,rc.trigger("series:layoutlabels",d,f,m),rc.trigger("series:transition",d,f,m),d.eachSeries(function(S){var w=h._chartsMap[S.__viewId];l(S,w),c(S,w)}),s(h,d),rc.trigger("series:afterupdate",d,f,m)},$l=function(h){h[S4]=!0,h.getZr().wakeUp()},n_=function(h){h[RI]=(h[RI]+1)%1e3},ZQ=function(h){h[S4]&&(h.getZr().storage.traverse(function(d){xb(d)||a(d)}),h[S4]=!1)};function a(h){for(var d=[],f=h.currentStates,p=0;p<f.length;p++){var m=f[p];m==="emphasis"||m==="blur"||m==="select"||d.push(m)}h.selected&&h.states.select&&d.push("select"),h.hoverState===l3&&h.states.emphasis?d.push("emphasis"):h.hoverState===f2&&h.states.blur&&d.push("blur"),h.useStates(d)}function s(h,d){var f=h._zr,p=f.storage,m=0;p.traverse(function(g){g.isGroup||m++}),m>d.get("hoverLayerThreshold")&&!bn.node&&!bn.worker&&d.eachSeries(function(g){if(!g.preventUsingHoverLayer){var v=h._chartsMap[g.__viewId];v.__alive&&v.eachRendered(function(b){b.states.emphasis&&(b.states.emphasis.hoverLayer=!0)})}})}function o(h,d){var f=h.get("blendMode")||null;d.eachRendered(function(p){p.isGroup||(p.style.blend=f)})}function l(h,d){if(!h.preventAutoZ){var f=jy(h);d.eachRendered(function(p){return p3(p,f.z,f.zlevel),!0})}}function u(h,d){d.eachRendered(function(f){if(!xb(f)){var p=f.getTextContent(),m=f.getTextGuideLine();f.stateTransition&&(f.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),f.hasState()?(f.prevStates=f.currentStates,f.clearStates()):f.prevStates&&(f.prevStates=null)}})}function c(h,d){var f=h.getModel("stateAnimation"),p=h.isAnimationEnabled(),m=f.get("duration"),g=m>0?{duration:m,delay:f.get("delay"),easing:f.get("easing")}:null;d.eachRendered(function(v){if(v.states&&v.states.emphasis){if(xb(v))return;if(v instanceof vn&&qNe(v),v.__dirty){var b=v.prevStates;b&&v.useStates(b)}if(p){v.stateTransition=g;var S=v.getTextContent(),w=v.getTextGuideLine();S&&(S.stateTransition=g),w&&(w.stateTransition=g)}v.__dirty&&a(v)}})}KQ=function(h){return new((function(d){be(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.prototype.getCoordinateSystems=function(){return h._coordSysMgr.getCoordinateSystems()},f.prototype.getComponentByElement=function(p){for(;p;){var m=p.__ecComponentInfo;if(m!=null)return h._model.getComponent(m.mainType,m.index);p=p.parent}},f.prototype.enterEmphasis=function(p,m){Yf(p,m),$l(h)},f.prototype.leaveEmphasis=function(p,m){qf(p,m),$l(h)},f.prototype.enterBlur=function(p){nhe(p),$l(h)},f.prototype.leaveBlur=function(p){oj(p),$l(h)},f.prototype.enterSelect=function(p){rhe(p),$l(h)},f.prototype.leaveSelect=function(p){ihe(p),$l(h)},f.prototype.getModel=function(){return h.getModel()},f.prototype.getViewOfComponentModel=function(p){return h.getViewOfComponentModel(p)},f.prototype.getViewOfSeriesModel=function(p){return h.getViewOfSeriesModel(p)},f.prototype.getMainProcessVersion=function(){return h[RI]},f})(ade))(h)},tfe=function(h){function d(f,p){for(var m=0;m<f.length;m++){var g=f[m];g[w4]=p}}W(Xz,function(f,p){h._messageCenter.on(p,function(m){if(QQ[h.group]&&h[w4]!==XQ){if(m&&m.escapeConnect)return;var g=h.makeActionFromEvent(m),v=[];W(jE,function(b){b!==h&&b.group===h.group&&v.push(b)}),d(v,XQ),W(v,function(b){b[w4]!==NBe&&b.dispatchAction(g)}),d(v,kBe)}})})}})(),e})(Uu),Bj=nfe.prototype;Bj.on=Kde("on");Bj.off=Kde("off");Bj.one=function(n,e,t){var r=this;function i(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];e&&e.apply&&e.apply(this,a),r.off(n,i)}this.on.call(this,n,i,t)};var OBe=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var hN={},Xz={},$z={},Yz=[],qz=[],dN=[],rfe={},Kz={},jE={},QQ={},BBe=+new Date-0,Fj="_echarts_instance_";function ife(n,e,t){{var r=FBe(n);if(r)return r}var i=new nfe(n,e,t);return i.id="ec_"+BBe++,jE[i.id]=i,Uce(n,Fj,i.id),tfe(i),rc.trigger("afterinit",i),i}function FBe(n){return jE[ORe(n,Fj)]}function afe(n,e){rfe[n]=e}function sfe(n){Jt(qz,n)<0&&qz.push(n)}function ofe(n,e){zj(Yz,n,e,ABe)}function UBe(n){Uj("afterinit",n)}function zBe(n){Uj("afterupdate",n)}function Uj(n,e){rc.on(n,e)}function dd(n,e,t){var r,i,a,s,o;St(e)&&(t=e,e=""),Lt(n)?(r=n.type,i=n.event,s=n.update,o=n.publishNonRefinedEvent,t||(t=n.action),a=n.refineEvent):(r=n,i=e);function l(c){return c.toLowerCase()}i=l(i||r);var u=a?l(r):i;hN[r]||(Us(WQ.test(r)&&WQ.test(i)),a&&Us(i!==r),hN[r]={actionType:r,refinedEventType:i,nonRefinedEventType:u,update:s,action:t,refineEvent:a},$z[i]=1,a&&o&&($z[u]=1),Xz[u]=r)}function VBe(n,e){x2.register(n,e)}function HBe(n,e){zj(dN,n,e,$de,"layout")}function ux(n,e){zj(dN,n,e,Yde,"visual")}var JQ=[];function zj(n,e,t,r,i){if((St(e)||Lt(e))&&(t=e,e=r),!(Jt(JQ,t)>=0)){JQ.push(t);var a=Lde.wrapStageHandler(t,i);a.__prio=e,a.__raw=t,n.push(a)}}function lfe(n,e){Kz[n]=e}function GBe(n,e,t){var r=xBe("registerMap");r&&r(n,e,t)}var jBe=tOe;ux(Oj,COe);ux(b3,MOe);ux(b3,DOe);ux(Oj,HOe);ux(b3,GOe);ux(qde,vBe);sfe(ode);ofe(TBe,k3e);lfe("default",IOe);dd({type:Py,event:Py,update:Py},ki);dd({type:EL,event:EL,update:EL},ki);dd({type:JR,event:aj,update:JR,action:ki,refineEvent:Vj,publishNonRefinedEvent:!0});dd({type:Sz,event:aj,update:Sz,action:ki,refineEvent:Vj,publishNonRefinedEvent:!0});dd({type:eN,event:aj,update:eN,action:ki,refineEvent:Vj,publishNonRefinedEvent:!0});function Vj(n,e,t,r){return{eventContent:{selected:jNe(t),isFromClick:e.isFromClick||!1}}}afe("default",{});afe("dark",Ode);var eJ=[],WBe={registerPreprocessor:sfe,registerProcessor:ofe,registerPostInit:UBe,registerPostUpdate:zBe,registerUpdateLifecycle:Uj,registerAction:dd,registerCoordinateSystem:VBe,registerLayout:HBe,registerVisual:ux,registerTransform:jBe,registerLoading:lfe,registerMap:GBe,registerImpl:yBe,PRIORITY:RBe,ComponentModel:_n,ComponentView:Gr,SeriesModel:Cr,ChartView:mr,registerComponentModel:function(n){_n.registerClass(n)},registerComponentView:function(n){Gr.registerClass(n)},registerSeriesModel:function(n){Cr.registerClass(n)},registerChartView:function(n){mr.registerClass(n)},registerCustomSeries:function(n,e){_Be(n,e)},registerSubTypeDefaulter:function(n,e){_n.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){cRe(n,e)}};function sn(n){if(Be(n)){W(n,function(e){sn(e)});return}Jt(eJ,n)>=0||(eJ.push(n),St(n)&&(n={install:n}),n.install(WBe))}function iT(n){return n==null?0:n.length||1}function tJ(n){return n}var Kf=(function(){function n(e,t,r,i,a,s){this._old=e,this._new=t,this._oldKeyGetter=r||tJ,this._newKeyGetter=i||tJ,this.context=a,this._diffModeMultiple=s==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,r={},i=new Array(e.length),a=new Array(t.length);this._initIndexMap(e,null,i,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var s=0;s<e.length;s++){var o=i[s],l=r[o],u=iT(l);if(u>1){var c=l.shift();l.length===1&&(r[o]=l[0]),this._update&&this._update(c,s)}else u===1?(r[o]=null,this._update&&this._update(l,s)):this._remove&&this._remove(s)}this._performRestAdd(a,r)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,r={},i={},a=[],s=[];this._initIndexMap(e,r,a,"_oldKeyGetter"),this._initIndexMap(t,i,s,"_newKeyGetter");for(var o=0;o<a.length;o++){var l=a[o],u=r[l],c=i[l],h=iT(u),d=iT(c);if(h>1&&d===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(h===1&&d>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(h===1&&d===1)this._update&&this._update(c,u),i[l]=null;else if(h>1&&d>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(h>1)for(var f=0;f<h;f++)this._remove&&this._remove(u[f]);else this._remove&&this._remove(u)}this._performRestAdd(s,i)},n.prototype._performRestAdd=function(e,t){for(var r=0;r<e.length;r++){var i=e[r],a=t[i],s=iT(a);if(s>1)for(var o=0;o<s;o++)this._add&&this._add(a[o]);else s===1&&this._add&&this._add(a);t[i]=null}},n.prototype._initIndexMap=function(e,t,r,i){for(var a=this._diffModeMultiple,s=0;s<e.length;s++){var o="_ec_"+this[i](e[s],s);if(a||(r[s]=o),!!t){var l=t[o],u=iT(l);u===0?(t[o]=s,a&&r.push(o)):u===1?t[o]=[l,s]:l.push(s)}}},n})(),XBe=(function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n})();function $Be(n,e){var t={},r=t.encode={},i=ct(),a=[],s=[],o={};W(n.dimensions,function(d){var f=n.getDimensionInfo(d),p=f.coordDim;if(p){var m=f.coordDimIndex;M4(r,p)[m]=d,f.isExtraCoord||(i.set(p,1),YBe(f.type)&&(a[0]=d),M4(o,p)[m]=n.getDimensionIndex(f.name)),f.defaultTooltip&&s.push(d)}Qhe.each(function(g,v){var b=M4(r,v),S=f.otherDims[v];S!=null&&S!==!1&&(b[S]=f.name)})});var l=[],u={};i.each(function(d,f){var p=r[f];u[f]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=Ue(l,function(d){return n.getDimensionInfo(d).storeDimIndex}),t.encodeFirstDimNotExtra=u;var c=r.label;c&&c.length&&(a=c.slice());var h=r.tooltip;return h&&h.length?s=h.slice():s.length||(s=a.slice()),r.defaultedLabel=a,r.defaultedTooltip=s,t.userOutput=new XBe(o,e),t}function M4(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function fN(n){return n==="category"?"ordinal":n==="time"?"time":"float"}function YBe(n){return!(n==="ordinal"||n==="time")}var LL=(function(){function n(e){this.otherDims={},e!=null&&Pe(this,e)}return n})(),qBe=mn(),KBe={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},ufe=(function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=dfe(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return dt(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=ude(this.source),r=!ffe(e),i="",a=[],s=0,o=0;s<e;s++){var l=void 0,u=void 0,c=void 0,h=this.dimensions[o];if(h&&h.storeDimIndex===s)l=t?h.name:null,u=h.type,c=h.ordinalMeta,o++;else{var d=this.getSourceDimension(s);d&&(l=t?d.name:null,u=d.type)}a.push({property:l,type:u,ordinalMeta:c}),t&&l!=null&&(!h||!h.isCalculationCoord)&&(i+=r?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=KBe[u]||"f",c&&(i+=c.uid),i+="$"}var f=this.source,p=[f.seriesLayoutBy,f.startIndex,i].join("$$");return{dimensions:a,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,r=0;t<this._fullDimCount;t++){var i=void 0,a=this.dimensions[r];if(a&&a.storeDimIndex===t)a.isCalculationCoord||(i=a.name),r++;else{var s=this.getSourceDimension(t);s&&(i=s.name)}e.push(i)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n})();function cfe(n){return n instanceof ufe}function hfe(n){for(var e=ct(),t=0;t<(n||[]).length;t++){var r=n[t],i=Lt(r)?r.name:r;i!=null&&e.get(i)==null&&e.set(i,t)}return e}function dfe(n){var e=qBe(n);return e.dimNameMap||(e.dimNameMap=hfe(n.dimensionsDefine))}function ffe(n){return n>30}var aT=Lt,kp=Ue,ZBe=typeof Int32Array>"u"?Array:Int32Array,QBe="e\0\0",nJ=-1,JBe=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],eFe=["_approximateExtent"],rJ,BI,sT,oT,D4,lT,I4,mo=(function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var r,i=!1;cfe(e)?(r=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(i=!0,r=e),r=r||["x","y"];for(var a={},s=[],o={},l=!1,u={},c=0;c<r.length;c++){var h=r[c],d=Ke(h)?new LL({name:h}):h instanceof LL?h:new LL(h),f=d.name;d.type=d.type||"float",d.coordDim||(d.coordDim=f,d.coordDimIndex=0);var p=d.otherDims=d.otherDims||{};s.push(f),a[f]=d,u[f]!=null&&(l=!0),d.createInvertedIndices&&(o[f]=[]);var m=c;Ln(d.storeDimIndex)&&(m=d.storeDimIndex),p.itemName===0&&(this._nameDimIdx=m),p.itemId===0&&(this._idDimIdx=m),i&&(d.storeDimIndex=c)}if(this.dimensions=s,this._dimInfos=a,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var g=this._dimIdxToName=ct();W(s,function(v){g.set(a[v].storeDimIndex,v)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var r=this._dimIdxToName.get(t);if(r!=null)return r;var i=this._schema.getSourceDimension(t);if(i)return i.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var r=this._getDimInfo(e);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(Ln(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(r){return t.hasOwnProperty(r)?t[r]:void 0}:function(r){return t[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var r=this._dimSummary;if(t==null)return r.encodeFirstDimNotExtra[e];var i=r.encode[e];return i?i[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,r=t.encode[e];return(r||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,r){var i=this,a;if(e instanceof Uz&&(a=e),!a){var s=this.dimensions,o=Dj(e)||Fs(e)?new cde(e,s.length):e;a=new Uz;var l=kp(s,function(u){return{type:i._dimInfos[u].type,property:u}});a.initData(o,l,r)}this._store=a,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=$Be(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var r=this._store.appendValues(e,t&&t.length),i=r.start,a=r.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=i;o<a;o++){var l=o-i;this._nameList[o]=t[l],s&&I4(this,o)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,r=0;r<t.length;r++){var i=this._dimInfos[t[r]];i.ordinalMeta&&e.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==mg&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var r=this._store,i=r.getProvider();this._updateOrdinalMeta();var a=this._nameList,s=this._idList,o=i.getSource().sourceFormat,l=o===Bl;if(l&&!i.pure)for(var u=[],c=e;c<t;c++){var h=i.getItem(c,u);if(!this.hasItemOption&&wRe(h)&&(this.hasItemOption=!0),h){var d=h.name;a[c]==null&&d!=null&&(a[c]=oa(d,null));var f=h.id;s[c]==null&&f!=null&&(s[c]=oa(f,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<t;c++)I4(this,c);rJ(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){aT(e)?Pe(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),r=this._nameList[t];return r==null&&this._nameDimIdx!=null&&(r=sT(this,this._nameDimIdx,t)),r==null&&(r=""),r},n.prototype._getCategory=function(e,t){var r=this._store.get(e,t),i=this._store.getOrdinalMeta(e);return i?i.categories[r]:r},n.prototype.getId=function(e){return BI(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.get(i.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var r=this._store,i=this._dimInfos[e];if(i)return r.getByRawIndex(i.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var r=this,i=this._store;return Be(e)?i.getValues(kp(e,function(a){return r._getStoreDimIndex(a)}),t):i.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,r=0,i=t.length;r<i;r++)if(isNaN(this._store.get(t[r],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,r=this._store.count();t<r;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var r=e&&this._invertedIndicesMap[e],i=r&&r[t];return i==null||isNaN(i)?nJ:i},n.prototype.each=function(e,t,r){St(e)&&(r=t,t=e,e=[]);var i=r||this,a=kp(oT(e),this._getStoreDimIndex,this);this._store.each(a,i?Qe(t,i):t)},n.prototype.filterSelf=function(e,t,r){St(e)&&(r=t,t=e,e=[]);var i=r||this,a=kp(oT(e),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?Qe(t,i):t),this},n.prototype.selectRange=function(e){var t=this,r={},i=An(e);return W(i,function(a){var s=t._getStoreDimIndex(a);r[s]=e[a]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(e,t,r){St(e)&&(r=t,t=e,e=[]),r=r||this;var i=[];return this.each(e,function(){i.push(t&&t.apply(this,arguments))},r),i},n.prototype.map=function(e,t,r,i){var a=r||i||this,s=kp(oT(e),this._getStoreDimIndex,this),o=lT(this);return o._store=this._store.map(s,a?Qe(t,a):t),o},n.prototype.modify=function(e,t,r,i){var a=r||i||this,s=kp(oT(e),this._getStoreDimIndex,this);this._store.modify(s,a?Qe(t,a):t)},n.prototype.downSample=function(e,t,r,i){var a=lT(this);return a._store=this._store.downSample(this._getStoreDimIndex(e),t,r,i),a},n.prototype.minmaxDownSample=function(e,t){var r=lT(this);return r._store=this._store.minmaxDownSample(this._getStoreDimIndex(e),t),r},n.prototype.lttbDownSample=function(e,t){var r=lT(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),r},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,r=this.getRawDataItem(e);return new Sn(r,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new Kf(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(r){return BI(e,r)},function(r){return BI(t,r)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},aT(e)?Pe(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var r=this._itemVisuals[e],i=r&&r[t];return i??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var r=this._itemVisuals,i=r[e];i||(i=r[e]={});var a=i[t];return a==null&&(a=this.getVisual(t),Be(a)?a=a.slice():aT(a)&&(a=Pe({},a)),i[t]=a),a},n.prototype.setItemVisual=function(e,t,r){var i=this._itemVisuals[e]||{};this._itemVisuals[e]=i,aT(t)?Pe(i,t):i[t]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){aT(e)?Pe(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,r){this._itemLayouts[e]=r?Pe(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var r=this.hostModel&&this.hostModel.seriesIndex;bz(r,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){W(this._graphicEls,function(r,i){r&&e&&e.call(t,r,i)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:kp(this.dimensions,this._getDimInfo,this),this.hostModel)),D4(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var r=this[e];St(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var i=r.apply(this,arguments);return t.apply(this,[i].concat(jG(arguments)))})},n.internalField=(function(){rJ=function(e){var t=e._invertedIndicesMap;W(t,function(r,i){var a=e._dimInfos[i],s=a.ordinalMeta,o=e._store;if(s){r=t[i]=new ZBe(s.categories.length);for(var l=0;l<r.length;l++)r[l]=nJ;for(var l=0;l<o.count();l++)r[o.get(a.storeDimIndex,l)]=l}})},sT=function(e,t,r){return oa(e._getCategory(t,r),null)},BI=function(e,t){var r=e._idList[t];return r==null&&e._idDimIdx!=null&&(r=sT(e,e._idDimIdx,t)),r==null&&(r=QBe+t),r},oT=function(e){return Be(e)||(e=e!=null?[e]:[]),e},lT=function(e){var t=new n(e._schema?e._schema:kp(e.dimensions,e._getDimInfo,e),e.hostModel);return D4(t,e),t},D4=function(e,t){W(JBe.concat(t.__wrappedMethods||[]),function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e.__wrappedMethods=t.__wrappedMethods,W(eFe,function(r){e[r]=Tt(t[r])}),e._calculationInfo=Pe({},t._calculationInfo)},I4=function(e,t){var r=e._nameList,i=e._idList,a=e._nameDimIdx,s=e._idDimIdx,o=r[t],l=i[t];if(o==null&&a!=null&&(r[t]=o=sT(e,a,t)),l==null&&s!=null&&(i[t]=l=sT(e,s,t)),l==null&&o!=null){var u=e._nameRepeatCount,c=u[o]=(u[o]||0)+1;l=o,c>1&&(l+="__ec__"+c),i[t]=l}}})(),n})();function S2(n,e){Dj(n)||(n=Ij(n)),e=e||{};var t=e.coordDimensions||[],r=e.dimensionsDefine||n.dimensionsDefine||[],i=ct(),a=[],s=nFe(n,t,r,e.dimensionsCount),o=e.canOmitUnusedDimensions&&ffe(s),l=r===n.dimensionsDefine,u=l?dfe(n):hfe(r),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(n,s));for(var h=ct(c),d=new yde(s),f=0;f<d.length;f++)d[f]=-1;function p(I){var D=d[I];if(D<0){var R=r[I],B=Lt(R)?R:{name:R},k=new LL,V=B.name;V!=null&&u.get(V)!=null&&(k.name=k.displayName=V),B.type!=null&&(k.type=B.type),B.displayName!=null&&(k.displayName=B.displayName);var G=a.length;return d[I]=G,k.storeDimIndex=I,a.push(k),k}return a[D]}if(!o)for(var f=0;f<s;f++)p(f);h.each(function(I,D){var R=br(I).slice();if(R.length===1&&!Ke(R[0])&&R[0]<0){h.set(D,!1);return}var B=h.set(D,[]);W(R,function(k,V){var G=Ke(k)?u.get(k):k;G!=null&&G<s&&(B[V]=G,g(p(G),D,V))})});var m=0;W(t,function(I){var D,R,B,k;if(Ke(I))D=I,k={};else{k=I,D=k.name;var V=k.ordinalMeta;k.ordinalMeta=null,k=Pe({},k),k.ordinalMeta=V,R=k.dimsDef,B=k.otherDims,k.name=k.coordDim=k.coordDimIndex=k.dimsDef=k.otherDims=null}var G=h.get(D);if(G!==!1){if(G=br(G),!G.length)for(var F=0;F<(R&&R.length||1);F++){for(;m<s&&p(m).coordDim!=null;)m++;m<s&&G.push(m++)}W(G,function(X,j){var Q=p(X);if(l&&k.type!=null&&(Q.type=k.type),g(Pt(Q,k),D,j),Q.name==null&&R){var H=R[j];!Lt(H)&&(H={name:H}),Q.name=Q.displayName=H.name,Q.defaultTooltip=H.defaultTooltip}B&&Pt(Q.otherDims,B)})}});function g(I,D,R){Qhe.get(D)!=null?I.otherDims[D]=R:(I.coordDim=D,I.coordDimIndex=R,i.set(D,!0))}var v=e.generateCoord,b=e.generateCoordCount,S=b!=null;b=v?b||1:0;var w=v||"value";function E(I){I.name==null&&(I.name=I.coordDim)}if(o)W(a,function(I){E(I)}),a.sort(function(I,D){return I.storeDimIndex-D.storeDimIndex});else for(var T=0;T<s;T++){var M=p(T),P=M.coordDim;P==null&&(M.coordDim=rFe(w,i,S),M.coordDimIndex=0,(!v||b<=0)&&(M.isExtraCoord=!0),b--),E(M),M.type==null&&(nde(n,T)===os.Must||M.isExtraCoord&&(M.otherDims.itemName!=null||M.otherDims.seriesName!=null))&&(M.type="ordinal")}return tFe(a),new ufe({source:n,dimensions:a,fullDimensionCount:s,dimensionOmitted:o})}function tFe(n){for(var e=ct(),t=0;t<n.length;t++){var r=n[t],i=r.name,a=e.get(i)||0;a>0&&(r.name=i+(a-1)),a++,e.set(i,a)}}function nFe(n,e,t,r){var i=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,r||0);return W(e,function(a){var s;Lt(a)&&(s=a.dimsDef)&&(i=Math.max(i,s.length))}),i}function rFe(n,e,t){if(t||e.hasKey(n)){for(var r=0;e.hasKey(n+r);)r++;n+=r}return e.set(n,!0),n}var iFe=(function(){function n(e){this.coordSysDims=[],this.axisMap=ct(),this.categoryAxisMap=ct(),this.coordSysName=e}return n})();function aFe(n){var e=n.get("coordinateSystem"),t=new iFe(e),r=sFe[e];if(r)return r(n,t,t.axisMap,t.categoryAxisMap),t}var sFe={cartesian2d:function(n,e,t,r){var i=n.getReferringComponents("xAxis",fi).models[0],a=n.getReferringComponents("yAxis",fi).models[0];e.coordSysDims=["x","y"],t.set("x",i),t.set("y",a),r_(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),r_(a)&&(r.set("y",a),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(n,e,t,r){var i=n.getReferringComponents("singleAxis",fi).models[0];e.coordSysDims=["single"],t.set("single",i),r_(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(n,e,t,r){var i=n.getReferringComponents("polar",fi).models[0],a=i.findAxisModel("radiusAxis"),s=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],t.set("radius",a),t.set("angle",s),r_(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),r_(s)&&(r.set("angle",s),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(n,e,t,r){e.coordSysDims=["lng","lat"]},parallel:function(n,e,t,r){var i=n.ecModel,a=i.getComponent("parallel",n.get("parallelIndex")),s=e.coordSysDims=a.dimensions.slice();W(a.parallelAxisIndex,function(o,l){var u=i.getComponent("parallelAxis",o),c=s[l];t.set(c,u),r_(u)&&(r.set(c,u),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=l))})},matrix:function(n,e,t,r){var i=n.getReferringComponents("matrix",fi).models[0];e.coordSysDims=["x","y"];var a=i.getDimensionModel("x"),s=i.getDimensionModel("y");t.set("x",a),t.set("y",s),r.set("x",a),r.set("y",s)}};function r_(n){return n.get("type")==="category"}function oFe(n,e,t){t=t||{};var r=t.byIndex,i=t.stackedCoordDimension,a,s,o;lFe(e)?a=e:(s=e.schema,a=s.dimensions,o=e.store);var l=!!(n&&n.get("stack")),u,c,h,d;if(W(a,function(b,S){Ke(b)&&(a[S]=b={name:b}),l&&!b.isExtraCoord&&(!r&&!u&&b.ordinalMeta&&(u=b),!c&&b.type!=="ordinal"&&b.type!=="time"&&(!i||i===b.coordDim)&&(c=b))}),c&&!r&&!u&&(r=!0),c){h="__\0ecstackresult_"+n.id,d="__\0ecstackedover_"+n.id,u&&(u.createInvertedIndices=!0);var f=c.coordDim,p=c.type,m=0;W(a,function(b){b.coordDim===f&&m++});var g={name:h,coordDim:f,coordDimIndex:m,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},v={name:d,coordDim:d,coordDimIndex:m+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};s?(o&&(g.storeDimIndex=o.ensureCalculationDimension(d,p),v.storeDimIndex=o.ensureCalculationDimension(h,p)),s.appendCalculationDimension(g),s.appendCalculationDimension(v)):(a.push(g),a.push(v))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:r,stackedOverDimension:d,stackResultDimension:h}}function lFe(n){return!cfe(n.schema)}function Sg(n,e){return!!e&&e===n.getCalculationInfo("stackedDimension")}function pfe(n,e){return Sg(n,e)?n.getCalculationInfo("stackResultDimension"):e}function uFe(n,e){var t=n.get("coordinateSystem"),r=x2.get(t),i;return e&&e.coordSysDims&&(i=Ue(e.coordSysDims,function(a){var s={name:a},o=e.axisMap.get(a);if(o){var l=o.get("type");s.type=fN(l)}return s})),i||(i=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),i}function cFe(n,e,t){var r,i;return t&&W(n,function(a,s){var o=a.coordDim,l=t.categoryAxisMap.get(o);l&&(r==null&&(r=s),a.ordinalMeta=l.getOrdinalMeta(),e&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&r!=null&&(n[r].otherDims.itemName=0),r}function lp(n,e,t){t=t||{};var r=e.getSourceManager(),i,a=!1;n?(a=!0,i=Ij(n)):(i=r.getSource(),a=i.sourceFormat===Bl);var s=aFe(e),o=uFe(e,s),l=t.useEncodeDefaulter,u=St(l)?l:l?Qt(tde,o,e):null,c={coordDimensions:o,generateCoord:t.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!a},h=S2(i,c),d=cFe(h.dimensions,t.createInvertedIndices,s),f=a?null:r.getSharedDataStore(h),p=oFe(e,{schema:h,store:f}),m=new mo(h,e);m.setCalculationInfo(p);var g=d!=null&&hFe(i)?function(v,b,S,w){return w===d?S:this.defaultDimValueGetter(v,b,S,w)}:null;return m.hasItemOption=!1,m.initData(a?i:f,null,g),m}function hFe(n){if(n.sourceFormat===Bl){var e=dFe(n.data||[]);return!Be(FS(e))}}function dFe(n){for(var e=0;e<n.length&&n[e]==null;)e++;return n[e]}function Zz(n){return n.type==="interval"||n.type==="log"}function fFe(n,e,t,r,i){var a={},s=a.interval=Ice(e/t);r!=null&&s<r&&(s=a.interval=r),i!=null&&s>i&&(s=a.interval=i);var o=a.intervalPrecision=CA(s),l=a.niceTickExtent=[Wi(Math.ceil(n[0]/s)*s,o),Wi(Math.floor(n[1]/s)*s,o)];return pFe(l,n),a}function P4(n){var e=Math.pow(10,ZG(n)),t=n/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,Wi(t*e)}function CA(n){return Fh(n)+2}function iJ(n,e,t){n[e]=Math.max(Math.min(n[e],t[1]),t[0])}function pFe(n,e){!isFinite(n[0])&&(n[0]=e[0]),!isFinite(n[1])&&(n[1]=e[1]),iJ(n,0,e),iJ(n,1,e),n[0]>n[1]&&(n[0]=n[1])}function Hj(n,e){return n>=e[0]&&n<=e[1]}var mFe=(function(){function n(){this.normalize=aJ,this.scale=sJ}return n.prototype.updateMethods=function(e){e.hasBreaks()?(this.normalize=Qe(e.normalize,e),this.scale=Qe(e.scale,e)):(this.normalize=aJ,this.scale=sJ)},n})();function aJ(n,e){return e[1]===e[0]?.5:(n-e[0])/(e[1]-e[0])}function sJ(n,e){return n*(e[1]-e[0])+e[0]}function Qz(n,e,t){var r=Math.log(n);return[Math.log(t?e[0]:Math.max(0,e[0]))/r,Math.log(t?e[1]:Math.max(0,e[1]))/r]}var Og=(function(){function n(e){this._calculator=new mFe,this._setting=e||{},this._extent=[1/0,-1/0];var t=$i();t&&(this._brkCtx=t.createScaleBreakContext(),this._brkCtx.update(this._extent))}return n.prototype.getSetting=function(e){return this._setting[e]},n.prototype._innerUnionExtent=function(e){var t=this._extent;this._innerSetExtent(e[0]<t[0]?e[0]:t[0],e[1]>t[1]?e[1]:t[1])},n.prototype.unionExtentFromData=function(e,t){this._innerUnionExtent(e.getApproximateExtent(t))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(e,t){this._innerSetExtent(e,t)},n.prototype._innerSetExtent=function(e,t){var r=this._extent;isNaN(e)||(r[0]=e),isNaN(t)||(r[1]=t),this._brkCtx&&this._brkCtx.update(r)},n.prototype.setBreaksFromOption=function(e){var t=$i();t&&this._innerSetBreak(t.parseAxisBreakOption(e,Qe(this.parse,this)))},n.prototype._innerSetBreak=function(e){this._brkCtx&&(this._brkCtx.setBreaks(e),this._calculator.updateMethods(this._brkCtx),this._brkCtx.update(this._extent))},n.prototype._innerGetBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},n.prototype.hasBreaks=function(){return this._brkCtx?this._brkCtx.hasBreaks():!1},n.prototype._getExtentSpanWithBreaks=function(){return this._brkCtx&&this._brkCtx.hasBreaks()?this._brkCtx.getExtentSpan():this._extent[1]-this._extent[0]},n.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(e){this._isBlank=e},n})();n3(Og);var gFe=0,MA=(function(){function n(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++gFe,this._onCollect=e.onCollect}return n.createByAxisModel=function(e){var t=e.option,r=t.data,i=r&&Ue(r,vFe);return new n({categories:i,needCollect:!i,deduplication:t.dedplication!==!1})},n.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},n.prototype.parseAndCollect=function(e){var t,r=this._needCollect;if(!Ke(e)&&!r)return e;if(r&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,this._onCollect&&this._onCollect(e,t),t;var i=this._getOrCreateMap();return t=i.get(e),t==null&&(r?(t=this.categories.length,this.categories[t]=e,i.set(e,t),this._onCollect&&this._onCollect(e,t)):t=NaN),t},n.prototype._getOrCreateMap=function(){return this._map||(this._map=ct(this.categories))},n})();function vFe(n){return Lt(n)&&n.value!=null?n.value:n+""}var sS=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;r.type="ordinal";var i=r.getSetting("ordinalMeta");return i||(i=new MA({})),Be(i)&&(i=new MA({categories:Ue(i,function(a){return Lt(a)?a.value:a})})),r._ordinalMeta=i,r._extent=r.getSetting("extent")||[0,i.categories.length-1],r}return e.prototype.parse=function(t){return t==null?NaN:Ke(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return Hj(t,this._extent)&&t>=0&&t<this._ordinalMeta.categories.length},e.prototype.normalize=function(t){return t=this._getTickNumber(t),this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(this._calculator.scale(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],r=this._extent,i=r[0];i<=r[1];)t.push({value:i}),i++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var r=t.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],s=0,o=this._ordinalMeta.categories.length,l=Math.min(o,r.length);s<l;++s){var u=r[s];i[s]=u,a[u]=s}for(var c=0;s<o;++s){for(;a[c]!=null;)c++;i.push(c),a[c]=s}},e.prototype._getTickNumber=function(t){var r=this._ticksByOrdinalNumber;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getRawOrdinalNumber=function(t){var r=this._ordinalNumbersByTick;return r&&t>=0&&t<r.length?r[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var r=this.getRawOrdinalNumber(t.value),i=this._ordinalMeta.categories[r];return i==null?"":i+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e})(Og);Og.registerClass(sS);var Op=Wi,Zf=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t==null||t===""?NaN:Number(t)},e.prototype.contain=function(t){return Hj(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=CA(t)},e.prototype.getTicks=function(t){t=t||{};var r=this._interval,i=this._extent,a=this._niceExtent,s=this._intervalPrecision,o=$i(),l=[];if(!r)return l;if(t.breakTicks==="only_break"&&o)return o.addBreaksToTicks(l,this._brkCtx.breaks,this._extent),l;var u=1e4;i[0]<a[0]&&(t.expandToNicedExtent?l.push({value:Op(a[0]-r,s)}):l.push({value:i[0]}));for(var c=function(p,m){return Math.round((m-p)/r)},h=a[0];h<=a[1];){if(l.push({value:h}),h=Op(h+r,s),this._brkCtx){var d=this._brkCtx.calcNiceTickMultiple(h,c);d>=0&&(h=Op(h+d*r,s))}if(l.length>0&&h===l[l.length-1].value)break;if(l.length>u)return[]}var f=l.length?l[l.length-1].value:a[1];return i[1]>f&&(t.expandToNicedExtent?l.push({value:Op(f+r,s)}):l.push({value:i[1]})),o&&o.pruneTicksByBreak(t.pruneByBreak,l,this._brkCtx.breaks,function(p){return p.value},this._interval,this._extent),t.breakTicks!=="none"&&o&&o.addBreaksToTicks(l,this._brkCtx.breaks,this._extent),l},e.prototype.getMinorTicks=function(t){for(var r=this.getTicks({expandToNicedExtent:!0}),i=[],a=this.getExtent(),s=1;s<r.length;s++){var o=r[s],l=r[s-1];if(!(l.break||o.break)){for(var u=0,c=[],h=o.value-l.value,d=h/t,f=CA(d);u<t-1;){var p=Op(l.value+(u+1)*d,f);p>a[0]&&p<a[1]&&c.push(p),u++}var m=$i();m&&m.pruneTicksByBreak("auto",c,this._getNonTransBreaks(),function(g){return g},this._interval,a),i.push(c)}}return i},e.prototype._getNonTransBreaks=function(){return this._brkCtx?this._brkCtx.breaks:[]},e.prototype.getLabel=function(t,r){if(t==null)return"";var i=r&&r.precision;i==null?i=Fh(t.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=Op(t.value,i,!0);return Uhe(a)},e.prototype.calcNiceTicks=function(t,r,i){t=t||5;var a=this._extent.slice(),s=this._getExtentSpanWithBreaks();if(isFinite(s)){s<0&&(s=-s,a.reverse(),this._innerSetExtent(a[0],a[1]),a=this._extent.slice());var o=fFe(a,s,t,r,i);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var r=this._extent.slice();if(r[0]===r[1])if(r[0]!==0){var i=Math.abs(r[0]);t.fixMax||(r[1]+=i/2),r[0]-=i/2}else r[1]=1;var a=r[1]-r[0];isFinite(a)||(r[0]=0,r[1]=1),this._innerSetExtent(r[0],r[1]),r=this._extent.slice(),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var s=this._interval,o=this._intervalPrecision;t.fixMin||(r[0]=Op(Math.floor(r[0]/s)*s,o)),t.fixMax||(r[1]=Op(Math.ceil(r[1]/s)*s,o)),this._innerSetExtent(r[0],r[1])},e.prototype.setNiceExtent=function(t,r){this._niceExtent=[t,r]},e.type="interval",e})(Og);Og.registerClass(Zf);var mfe=typeof Float32Array<"u",yFe=mfe?Float32Array:Array;function zh(n){return Be(n)?mfe?new Float32Array(n):n:new yFe(n)}var Jz="__ec_stack_";function gfe(n){return n.get("stack")||Jz+n.seriesIndex}function Gj(n){return n.dim+n.index}function xFe(n){var e=[],t=n.axis,r="axis0";if(t.type==="category"){for(var i=t.getBandWidth(),a=0;a<n.count;a++)e.push(Pt({bandWidth:i,axisKey:r,stackId:Jz+a},n));for(var s=xfe(e),o=[],a=0;a<n.count;a++){var l=s[r][Jz+a];l.offsetCenter=l.offset+l.width/2,o.push(l)}return o}}function vfe(n,e){var t=[];return e.eachSeriesByType(n,function(r){Sfe(r)&&t.push(r)}),t}function _Fe(n){var e={};W(n,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var h=l.getData(),d=c.dim+"_"+c.index,f=h.getDimensionIndex(h.mapDimension(c.dim)),p=h.getStore(),m=0,g=p.count();m<g;++m){var v=p.get(f,m);e[d]?e[d].push(v):e[d]=[v]}});var t={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(i){i.sort(function(l,u){return l-u});for(var a=null,s=1;s<i.length;++s){var o=i[s]-i[s-1];o>0&&(a=a===null?o:Math.min(a,o))}t[r]=a}}return t}function yfe(n){var e=_Fe(n),t=[];return W(n,function(r){var i=r.coordinateSystem,a=i.getBaseAxis(),s=a.getExtent(),o;if(a.type==="category")o=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var l=a.dim+"_"+a.index,u=e[l],c=Math.abs(s[1]-s[0]),h=a.scale.getExtent(),d=Math.abs(h[1]-h[0]);o=u?c/d*u:c}else{var f=r.getData();o=Math.abs(s[1]-s[0])/f.count()}var p=Xe(r.get("barWidth"),o),m=Xe(r.get("barMaxWidth"),o),g=Xe(r.get("barMinWidth")||(wfe(r)?.5:1),o),v=r.get("barGap"),b=r.get("barCategoryGap"),S=r.get("defaultBarGap");t.push({bandWidth:o,barWidth:p,barMaxWidth:m,barMinWidth:g,barGap:v,barCategoryGap:b,defaultBarGap:S,axisKey:Gj(a),stackId:gfe(r)})}),xfe(t)}function xfe(n){var e={};W(n,function(r,i){var a=r.axisKey,s=r.bandWidth,o=e[a]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:r.defaultBarGap||0,stacks:{}},l=o.stacks;e[a]=o;var u=r.stackId;l[u]||o.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=r.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(o.remainedWidth,c),o.remainedWidth-=c);var h=r.barMaxWidth;h&&(l[u].maxWidth=h);var d=r.barMinWidth;d&&(l[u].minWidth=d);var f=r.barGap;f!=null&&(o.gap=f);var p=r.barCategoryGap;p!=null&&(o.categoryGap=p)});var t={};return W(e,function(r,i){t[i]={};var a=r.stacks,s=r.bandWidth,o=r.categoryGap;if(o==null){var l=An(a).length;o=Math.max(35-l*4,15)+"%"}var u=Xe(o,s),c=Xe(r.gap,1),h=r.remainedWidth,d=r.autoWidthCount,f=(h-u)/(d+(d-1)*c);f=Math.max(f,0),W(a,function(v){var b=v.maxWidth,S=v.minWidth;if(v.width){var w=v.width;b&&(w=Math.min(w,b)),S&&(w=Math.max(w,S)),v.width=w,h-=w+c*w,d--}else{var w=f;b&&b<w&&(w=Math.min(b,h)),S&&S>w&&(w=S),w!==f&&(v.width=w,h-=w+c*w,d--)}}),f=(h-u)/(d+(d-1)*c),f=Math.max(f,0);var p=0,m;W(a,function(v,b){v.width||(v.width=f),m=v,p+=v.width*(1+c)}),m&&(p-=m.width*c);var g=-p/2;W(a,function(v,b){t[i][b]=t[i][b]||{bandWidth:s,offset:g,width:v.width},g+=v.width*(1+c)})}),t}function bFe(n,e,t){if(n&&e){var r=n[Gj(e)];return r}}function _fe(n,e){var t=vfe(n,e),r=yfe(t);W(t,function(i){var a=i.getData(),s=i.coordinateSystem,o=s.getBaseAxis(),l=gfe(i),u=r[Gj(o)][l],c=u.offset,h=u.width;a.setLayout({bandWidth:u.bandWidth,offset:c,size:h})})}function bfe(n){return{seriesType:n,plan:WS(),reset:function(e){if(Sfe(e)){var t=e.getData(),r=e.coordinateSystem,i=r.getBaseAxis(),a=r.getOtherAxis(i),s=t.getDimensionIndex(t.mapDimension(a.dim)),o=t.getDimensionIndex(t.mapDimension(i.dim)),l=e.get("showBackground",!0),u=t.mapDimension(a.dim),c=t.getCalculationInfo("stackResultDimension"),h=Sg(t,u)&&!!t.getCalculationInfo("stackedOnSeries"),d=a.isHorizontal(),f=SFe(i,a),p=wfe(e),m=e.get("barMinHeight")||0,g=c&&t.getDimensionIndex(c),v=t.getLayout("size"),b=t.getLayout("offset");return{progress:function(S,w){for(var E=S.count,T=p&&zh(E*3),M=p&&l&&zh(E*3),P=p&&zh(E),I=r.master.getRect(),D=d?I.width:I.height,R,B=w.getStore(),k=0;(R=S.next())!=null;){var V=B.get(h?g:s,R),G=B.get(o,R),F=f,X=void 0;h&&(X=+V-B.get(s,R));var j=void 0,Q=void 0,H=void 0,K=void 0;if(d){var te=r.dataToPoint([V,G]);if(h){var Y=r.dataToPoint([X,G]);F=Y[0]}j=F,Q=te[1]+b,H=te[0]-F,K=v,Math.abs(H)<m&&(H=(H<0?-1:1)*m)}else{var te=r.dataToPoint([G,V]);if(h){var Y=r.dataToPoint([G,X]);F=Y[1]}j=te[0]+b,Q=F,H=v,K=te[1]-F,Math.abs(K)<m&&(K=(K<=0?-1:1)*m)}p?(T[k]=j,T[k+1]=Q,T[k+2]=d?H:K,M&&(M[k]=d?I.x:j,M[k+1]=d?Q:I.y,M[k+2]=D),P[R]=R):w.setItemLayout(R,{x:j,y:Q,width:H,height:K}),k+=3}p&&w.setLayout({largePoints:T,largeDataIndices:P,largeBackgroundPoints:M,valueAxisHorizontal:d})}}}}}}function Sfe(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function wfe(n){return n.pipelineContext&&n.pipelineContext.large}function SFe(n,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var wFe=function(n,e,t,r){for(;t<r;){var i=t+r>>>1;n[i][1]<e?t=i+1:r=i}return t},jj=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="time",r}return e.prototype.getLabel=function(t){var r=this.getSetting("useUTC");return g3(t.value,KZ[Zke(HE(this._minLevelUnit))]||KZ.second,r,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,r,i){var a=this.getSetting("useUTC"),s=this.getSetting("locale");return Qke(t,r,i,s,a)},e.prototype.getTicks=function(t){t=t||{};var r=this._interval,i=this._extent,a=$i(),s=[];if(!r)return s;var o=this.getSetting("useUTC");if(a&&t.breakTicks==="only_break")return $i().addBreaksToTicks(s,this._brkCtx.breaks,this._extent),s;var l=ib(i[1],o);s.push({value:i[0],time:{level:0,upperTimeUnit:l,lowerTimeUnit:l}});var u=IFe(this._minLevelUnit,this._approxInterval,o,i,this._getExtentSpanWithBreaks(),this._brkCtx);s=s.concat(u);var c=ib(i[1],o);s.push({value:i[1],time:{level:0,upperTimeUnit:c,lowerTimeUnit:c}});var h=this.getSetting("useUTC"),d=wl.length-1,f=0;return W(s,function(p){d=Math.min(d,Jt(wl,p.time.upperTimeUnit)),f=Math.max(f,p.time.level)}),a&&$i().pruneTicksByBreak(t.pruneByBreak,s,this._brkCtx.breaks,function(p){return p.value},this._approxInterval,this._extent),a&&t.breakTicks!=="none"&&$i().addBreaksToTicks(s,this._brkCtx.breaks,this._extent,function(p){for(var m=Math.max(Jt(wl,ib(p.vmin,h)),Jt(wl,ib(p.vmax,h))),g=0,v=0;v<wl.length;v++)if(!Tfe(wl[v],p.vmin,p.vmax,h)){g=v;break}var b=Math.min(g,d),S=Math.max(b,m);return{level:f,lowerTimeUnit:wl[S],upperTimeUnit:wl[b]}}),s},e.prototype.calcNiceExtent=function(t){var r=this.getExtent();if(r[0]===r[1]&&(r[0]-=Tu,r[1]+=Tu),r[1]===-1/0&&r[0]===1/0){var i=new Date;r[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),r[0]=r[1]-Tu}this._innerSetExtent(r[0],r[1]),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,r,i){t=t||10;var a=this._getExtentSpanWithBreaks();this._approxInterval=a/t,r!=null&&this._approxInterval<r&&(this._approxInterval=r),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=FI.length,o=Math.min(wFe(FI,this._approxInterval,0,s),s-1);this._interval=FI[o][1],this._intervalPrecision=CA(this._interval),this._minLevelUnit=FI[Math.max(o-1,0)][0]},e.prototype.parse=function(t){return Ln(t)?t:+ix(t)},e.prototype.contain=function(t){return Hj(t,this._extent)},e.prototype.normalize=function(t){return this._calculator.normalize(t,this._extent)},e.prototype.scale=function(t){return this._calculator.scale(t,this._extent)},e.type="time",e})(Zf),FI=[["second",gj],["minute",vj],["hour",VE],["quarter-day",VE*6],["half-day",VE*12],["day",Tu*1.2],["half-week",Tu*3.5],["week",Tu*7],["month",Tu*31],["quarter",Tu*95],["half-year",qZ/2],["year",qZ]];function Tfe(n,e,t,r){return Rz(new Date(e),n,r).getTime()===Rz(new Date(t),n,r).getTime()}function TFe(n,e){return n/=Tu,n>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function EFe(n){var e=30*Tu;return n/=e,n>6?6:n>3?3:n>2?2:1}function AFe(n){return n/=VE,n>12?12:n>6?6:n>3.5?4:n>2?2:1}function oJ(n,e){return n/=e?vj:gj,n>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function CFe(n){return Ice(n)}function MFe(n,e,t){var r=Math.max(0,Jt(wl,e)-1);return Rz(new Date(n),wl[r],t).getTime()}function DFe(n,e){var t=new Date(0);t[n](1);var r=t.getTime();t[n](1+e);var i=t.getTime()-r;return function(a,s){return Math.max(0,Math.round((s-a)/i))}}function IFe(n,e,t,r,i,a){var s=1e4,o=$ke,l=0;function u(k,V,G,F,X,j,Q){for(var H=DFe(X,k),K=V,te=new Date(K);K<G&&K<=r[1]&&(Q.push({value:K}),!(l++>s));)if(te[X](te[F]()+k),K=te.getTime(),a){var Y=a.calcNiceTickMultiple(K,H);Y>0&&(te[X](te[F]()+Y*k),K=te.getTime())}Q.push({value:K,notAdd:!0})}function c(k,V,G){var F=[],X=!V.length;if(!Tfe(HE(k),r[0],r[1],t)){X&&(V=[{value:MFe(r[0],k,t)},{value:r[1]}]);for(var j=0;j<V.length-1;j++){var Q=V[j].value,H=V[j+1].value;if(Q!==H){var K=void 0,te=void 0,Y=void 0,de=!1;switch(k){case"year":K=Math.max(1,Math.round(e/Tu/365)),te=Lhe(t),Y=Jke(t);break;case"half-year":case"quarter":case"month":K=EFe(e),te=yj(t),Y=Rhe(t);break;case"week":case"half-week":case"day":K=TFe(e),te=xj(t),Y=Nhe(t),de=!0;break;case"half-day":case"quarter-day":case"hour":K=AFe(e),te=_j(t),Y=khe(t);break;case"minute":K=oJ(e,!0),te=bj(t),Y=Ohe(t);break;case"second":K=oJ(e,!1),te=Sj(t),Y=Bhe(t);break;case"millisecond":K=CFe(e),te=wj(t),Y=Fhe(t);break}H>=r[0]&&Q<=r[1]&&u(K,Q,H,te,Y,de,F),k==="year"&&G.length>1&&j===0&&G.unshift({value:G[0].value-K})}}for(var j=0;j<F.length;j++)G.push(F[j])}}for(var h=[],d=[],f=0,p=0,m=0;m<o.length;++m){var g=HE(o[m]);if(Kke(o[m])){c(o[m],h[h.length-1]||[],d);var v=o[m+1]?HE(o[m+1]):null;if(g!==v){if(d.length){p=f,d.sort(function(k,V){return k.value-V.value});for(var b=[],S=0;S<d.length;++S){var w=d[S].value;(S===0||d[S-1].value!==w)&&(b.push(d[S]),w>=r[0]&&w<=r[1]&&f++)}var E=i/e;if(f>E*1.5&&p>E/1.5||(h.push(b),f>E||n===o[m]))break}d=[]}}}for(var T=er(Ue(h,function(k){return er(k,function(V){return V.value>=r[0]&&V.value<=r[1]&&!V.notAdd})}),function(k){return k.length>0}),M=[],P=T.length-1,m=0;m<T.length;++m)for(var I=T[m],D=0;D<I.length;++D){var R=ib(I[D].value,t);M.push({value:I[D].value,time:{level:P-m,upperTimeUnit:R,lowerTimeUnit:R}})}M.sort(function(k,V){return k.value-V.value});for(var B=[],m=0;m<M.length;++m)(m===0||M[m].value!==M[m-1].value)&&B.push(M[m]);return B}Og.registerClass(jj);var e8=Wi,PFe=Math.floor,LFe=Math.ceil,UI=Math.pow,zI=Math.log,Efe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new Zf,t}return e.prototype.getTicks=function(t){t=t||{};var r=this._extent.slice(),i=this._originalScale.getExtent(),a=n.prototype.getTicks.call(this,t),s=this.base,o=this._originalScale._innerGetBreaks(),l=$i();return Ue(a,function(u){var c=u.value,h=null,d=UI(s,c);c===r[0]&&this._fixMin?h=i[0]:c===r[1]&&this._fixMax&&(h=i[1]);var f;if(l){var p=l.getTicksLogTransformBreak(u,s,o,VI);f=p.vBreak,h==null&&(h=p.brkRoundingCriterion)}return h!=null&&(d=VI(d,h)),{value:d,break:f}},this)},e.prototype._getNonTransBreaks=function(){return this._originalScale._innerGetBreaks()},e.prototype.setExtent=function(t,r){this._originalScale.setExtent(t,r);var i=Qz(this.base,[t,r]);n.prototype.setExtent.call(this,i[0],i[1])},e.prototype.getExtent=function(){var t=this.base,r=n.prototype.getExtent.call(this);r[0]=UI(t,r[0]),r[1]=UI(t,r[1]);var i=this._originalScale.getExtent();return this._fixMin&&(r[0]=VI(r[0],i[0])),this._fixMax&&(r[1]=VI(r[1],i[1])),r},e.prototype.unionExtentFromData=function(t,r){this._originalScale.unionExtentFromData(t,r);var i=Qz(this.base,t.getApproximateExtent(r),!0);this._innerUnionExtent(i)},e.prototype.calcNiceTicks=function(t){t=t||10;var r=this._extent.slice(),i=this._getExtentSpanWithBreaks();if(!(!isFinite(i)||i<=0)){var a=xRe(i),s=t/i*a;for(s<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var o=[e8(LFe(r[0]/a)*a),e8(PFe(r[1]/a)*a)];this._interval=a,this._intervalPrecision=CA(a),this._niceExtent=o}},e.prototype.calcNiceExtent=function(t){n.prototype.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.contain=function(t){return t=zI(t)/zI(this.base),n.prototype.contain.call(this,t)},e.prototype.normalize=function(t){return t=zI(t)/zI(this.base),n.prototype.normalize.call(this,t)},e.prototype.scale=function(t){return t=n.prototype.scale.call(this,t),UI(this.base,t)},e.prototype.setBreaksFromOption=function(t){var r=$i();if(r){var i=r.logarithmicParseBreaksFromOption(t,this.base,Qe(this.parse,this)),a=i.parsedOriginal,s=i.parsedLogged;this._originalScale._innerSetBreak(a),this._innerSetBreak(s)}},e.type="log",e})(Zf);function VI(n,e){return e8(n,Fh(e))}Og.registerClass(Efe);var RFe=(function(){function n(e,t,r){this._prepareParams(e,t,r)}return n.prototype._prepareParams=function(e,t,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var i=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var a=t.get("min",!0);a==null&&(a=t.get("startValue",!0));var s=this._modelMinRaw=a;St(s)?this._modelMinNum=HI(e,s({min:r[0],max:r[1]})):s!=="dataMin"&&(this._modelMinNum=HI(e,s));var o=this._modelMaxRaw=t.get("max",!0);if(St(o)?this._modelMaxNum=HI(e,o({min:r[0],max:r[1]})):o!=="dataMax"&&(this._modelMaxNum=HI(e,o)),i)this._axisDataLen=t.getCategories().length;else{var l=t.get("boundaryGap"),u=Be(l)?l:[l||0,l||0];typeof u[0]=="boolean"||typeof u[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Pc(u[0],1),Pc(u[1],1)]}},n.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,r=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,s=e?null:r-t||Math.abs(t),o=this._modelMinRaw==="dataMin"?t:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?r:this._modelMaxNum,u=o!=null,c=l!=null;o==null&&(o=e?i?0:NaN:t-a[0]*s),l==null&&(l=e?i?i-1:NaN:r+a[1]*s),(o==null||!isFinite(o))&&(o=NaN),(l==null||!isFinite(l))&&(l=NaN);var h=Bs(o)||Bs(l)||e&&!i;this._needCrossZero&&(o>0&&l>0&&!u&&(o=0),o<0&&l<0&&!c&&(l=0));var d=this._determinedMin,f=this._determinedMax;return d!=null&&(o=d,u=!0),f!=null&&(l=f,c=!0),{min:o,max:l,minFixed:u,maxFixed:c,isBlank:h}},n.prototype.modifyDataMinMax=function(e,t){this[kFe[e]]=t},n.prototype.setDeterminedMinMax=function(e,t){var r=NFe[e];this[r]=t},n.prototype.freeze=function(){this.frozen=!0},n})(),NFe={min:"_determinedMin",max:"_determinedMax"},kFe={min:"_dataMin",max:"_dataMax"};function Afe(n,e,t){var r=n.rawExtentInfo;return r||(r=new RFe(n,e,t),n.rawExtentInfo=r,r)}function HI(n,e){return e==null?null:Bs(e)?NaN:n.parse(e)}function Cfe(n,e){var t=n.type,r=Afe(n,e,n.getExtent()).calculate();n.setBlank(r.isBlank);var i=r.min,a=r.max,s=e.ecModel;if(s&&t==="time"){var o=vfe("bar",s),l=!1;if(W(o,function(h){l=l||h.getBaseAxis()===e.axis}),l){var u=yfe(o),c=OFe(i,a,e,u);i=c.min,a=c.max}}return{extent:[i,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function OFe(n,e,t,r){var i=t.axis.getExtent(),a=Math.abs(i[1]-i[0]),s=bFe(r,t.axis);if(s===void 0)return{min:n,max:e};var o=1/0;W(s,function(f){o=Math.min(f.offset,o)});var l=-1/0;W(s,function(f){l=Math.max(f.offset+f.width,l)}),o=Math.abs(o),l=Math.abs(l);var u=o+l,c=e-n,h=1-(o+l)/a,d=c/h-c;return e+=d*(l/u),n-=d*(o/u),{min:n,max:e}}function oS(n,e){var t=e,r=Cfe(n,t),i=r.extent,a=t.get("splitNumber");n instanceof Efe&&(n.base=t.get("logBase"));var s=n.type,o=t.get("interval"),l=s==="interval"||s==="time";n.setBreaksFromOption(Dfe(t)),n.setExtent(i[0],i[1]),n.calcNiceExtent({splitNumber:a,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:l?t.get("minInterval"):null,maxInterval:l?t.get("maxInterval"):null}),o!=null&&n.setInterval&&n.setInterval(o)}function S3(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new sS({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new jj({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(Og.getClass(e)||Zf)}}function BFe(n){var e=n.scale.getExtent(),t=e[0],r=e[1];return!(t>0&&r>0||t<0&&r<0)}function YS(n){var e=n.getLabelModel().get("formatter");if(n.type==="time"){var t=Yke(e);return function(i,a){return n.scale.getFormattedLabel(i,a,t)}}else{if(Ke(e))return function(i){var a=n.scale.getLabel(i),s=e.replace("{value}",a??"");return s};if(St(e)){if(n.type==="category")return function(i,a){return e(pN(n,i),i.value-n.scale.getExtent()[0],null)};var r=$i();return function(i,a){var s=null;return r&&(s=r.makeAxisLabelFormatterParamBreak(s,i.break)),e(pN(n,i),a,s)}}else return function(i){return n.scale.getLabel(i)}}}function pN(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function Wj(n){var e=n.get("interval");return e??"auto"}function Mfe(n){return n.type==="category"&&Wj(n.getLabelModel())===0}function mN(n,e){var t={};return W(n.mapDimensionsAll(e),function(r){t[pfe(n,r)]=!0}),An(t)}function FFe(n,e,t){e&&W(mN(e,t),function(r){var i=e.getApproximateExtent(r);i[0]<n[0]&&(n[0]=i[0]),i[1]>n[1]&&(n[1]=i[1])})}function lS(n){return n==="middle"||n==="center"}function DA(n){return n.getShallow("show")}function Dfe(n){var e=n.get("breaks",!0);if(e!=null)return!$i()||!UFe(n.axis)?void 0:e}function UFe(n){return(n.dim==="x"||n.dim==="y"||n.dim==="z"||n.dim==="single")&&n.type!=="category"}var w2=(function(){function n(){}return n.prototype.getNeedCrossZero=function(){var e=this.option;return!e.scale},n.prototype.getCoordSysModel=function(){},n})(),zFe=1e-8;function lJ(n,e){return Math.abs(n-e)<zFe}function $v(n,e,t){var r=0,i=n[0];if(!i)return!1;for(var a=1;a<n.length;a++){var s=n[a];r+=Ud(i[0],i[1],s[0],s[1],e,t),i=s}var o=n[0];return(!lJ(i[0],o[0])||!lJ(i[1],o[1]))&&(r+=Ud(i[0],i[1],o[0],o[1],e,t)),r!==0}var VFe=[];function L4(n,e){for(var t=0;t<n.length;t++)Oi(n[t],n[t],e)}function uJ(n,e,t,r){for(var i=0;i<n.length;i++){var a=n[i];r&&(a=r.project(a)),a&&isFinite(a[0])&&isFinite(a[1])&&(tg(e,e,a),ng(t,t,a))}}function HFe(n){for(var e=0,t=0,r=0,i=n.length,a=n[i-1][0],s=n[i-1][1],o=0;o<i;o++){var l=n[o][0],u=n[o][1],c=a*u-l*s;e+=c,t+=(a+l)*c,r+=(s+u)*c,a=l,s=u}return e?[t/e/3,r/e/3,e]:[n[0][0]||0,n[0][1]||0]}var Ife=(function(){function n(e){this.name=e}return n.prototype.setCenter=function(e){this._center=e},n.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},n})(),cJ=(function(){function n(e,t){this.type="polygon",this.exterior=e,this.interiors=t}return n})(),hJ=(function(){function n(e){this.type="linestring",this.points=e}return n})(),Pfe=(function(n){be(e,n);function e(t,r,i){var a=n.call(this,t)||this;return a.type="geoJSON",a.geometries=r,a._center=i&&[i[0],i[1]],a}return e.prototype.calcCenter=function(){for(var t=this.geometries,r,i=0,a=0;a<t.length;a++){var s=t[a],o=s.exterior,l=o&&o.length;l>i&&(r=s,i=l)}if(r)return HFe(r.exterior);var u=this.getBoundingRect();return[u.x+u.width/2,u.y+u.height/2]},e.prototype.getBoundingRect=function(t){var r=this._rect;if(r&&!t)return r;var i=[1/0,1/0],a=[-1/0,-1/0],s=this.geometries;return W(s,function(o){o.type==="polygon"?uJ(o.exterior,i,a,t):W(o.points,function(l){uJ(l,i,a,t)})}),isFinite(i[0])&&isFinite(i[1])&&isFinite(a[0])&&isFinite(a[1])||(i[0]=i[1]=a[0]=a[1]=0),r=new Rt(i[0],i[1],a[0]-i[0],a[1]-i[1]),t||(this._rect=r),r},e.prototype.contain=function(t){var r=this.getBoundingRect(),i=this.geometries;if(!r.contain(t[0],t[1]))return!1;e:for(var a=0,s=i.length;a<s;a++){var o=i[a];if(o.type==="polygon"){var l=o.exterior,u=o.interiors;if($v(l,t[0],t[1])){for(var c=0;c<(u?u.length:0);c++)if($v(u[c],t[0],t[1]))continue e;return!0}}}return!1},e.prototype.transformTo=function(t,r,i,a){var s=this.getBoundingRect(),o=s.width/s.height;i?a||(a=i/o):i=o*a;for(var l=new Rt(t,r,i,a),u=s.calculateTransform(l),c=this.geometries,h=0;h<c.length;h++){var d=c[h];d.type==="polygon"?(L4(d.exterior,u),W(d.interiors,function(f){L4(f,u)})):W(d.points,function(f){L4(f,u)})}s=this._rect,s.copy(l),this._center=[s.x+s.width/2,s.y+s.height/2]},e.prototype.cloneShallow=function(t){t==null&&(t=this.name);var r=new e(t,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},e})(Ife),GFe=(function(n){be(e,n);function e(t,r){var i=n.call(this,t)||this;return i.type="geoSVG",i._elOnlyForCalculate=r,i}return e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,r=t.getBoundingRect(),i=[r.x+r.width/2,r.y+r.height/2],a=Zk(VFe),s=t;s&&!s.isGeoSVGGraphicRoot;)Wh(a,s.getLocalTransform(),a),s=s.parent;return Ic(a,a),Oi(i,i,a),i},e})(Ife);function jFe(n){if(!n.UTF8Encoding)return n;var e=n,t=e.UTF8Scale;t==null&&(t=1024);var r=e.features;return W(r,function(i){var a=i.geometry,s=a.encodeOffsets,o=a.coordinates;if(s)switch(a.type){case"LineString":a.coordinates=Lfe(o,s,t);break;case"Polygon":R4(o,s,t);break;case"MultiLineString":R4(o,s,t);break;case"MultiPolygon":W(o,function(l,u){return R4(l,s[u],t)})}}),e.UTF8Encoding=!1,e}function R4(n,e,t){for(var r=0;r<n.length;r++)n[r]=Lfe(n[r],e[r],t)}function Lfe(n,e,t){for(var r=[],i=e[0],a=e[1],s=0;s<n.length;s+=2){var o=n.charCodeAt(s)-64,l=n.charCodeAt(s+1)-64;o=o>>1^-(o&1),l=l>>1^-(l&1),o+=i,l+=a,i=o,a=l,r.push([o/t,l/t])}return r}function WFe(n,e){return n=jFe(n),Ue(er(n.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var r=t.properties,i=t.geometry,a=[];switch(i.type){case"Polygon":var s=i.coordinates;a.push(new cJ(s[0],s.slice(1)));break;case"MultiPolygon":W(i.coordinates,function(l){l[0]&&a.push(new cJ(l[0],l.slice(1)))});break;case"LineString":a.push(new hJ([i.coordinates]));break;case"MultiLineString":a.push(new hJ(i.coordinates))}var o=new Pfe(r[e||"name"],a,r.cp);return o.properties=r,o})}var XFe=mn(),WE=mn(),Lc={estimate:1,determine:2};function gN(n){return{out:{noPxChangeTryDetermine:[]},kind:n}}function Rfe(n,e){var t=Ue(e,function(r){return n.scale.parse(r)});return n.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function $Fe(n,e){var t=n.getLabelModel().get("customValues");if(t){var r=YS(n),i=n.scale.getExtent(),a=Rfe(n,t),s=er(a,function(o){return o>=i[0]&&o<=i[1]});return{labels:Ue(s,function(o){var l={value:o};return{formattedLabel:r(l),rawLabel:n.scale.getLabel(l),tickValue:o,time:void 0,break:void 0}})}}return n.type==="category"?qFe(n,e):ZFe(n)}function YFe(n,e,t){var r=n.getTickModel().get("customValues");if(r){var i=n.scale.getExtent(),a=Rfe(n,r);return{ticks:er(a,function(s){return s>=i[0]&&s<=i[1]})}}return n.type==="category"?KFe(n,e):{ticks:Ue(n.scale.getTicks(t),function(s){return s.value})}}function qFe(n,e){var t=n.getLabelModel(),r=Nfe(n,t,e);return!t.get("show")||n.scale.isBlank()?{labels:[]}:r}function Nfe(n,e,t){var r=JFe(n),i=Wj(e),a=t.kind===Lc.estimate;if(!a){var s=Ofe(r,i);if(s)return s}var o,l;St(i)?o=Ufe(n,i):(l=i==="auto"?e4e(n,t):i,o=Ffe(n,l));var u={labels:o,labelCategoryInterval:l};return a?t.out.noPxChangeTryDetermine.push(function(){return t8(r,i,u),!0}):t8(r,i,u),u}function KFe(n,e){var t=QFe(n),r=Wj(e),i=Ofe(t,r);if(i)return i;var a,s;if((!e.get("show")||n.scale.isBlank())&&(a=[]),St(r))a=Ufe(n,r,!0);else if(r==="auto"){var o=Nfe(n,n.getLabelModel(),gN(Lc.determine));s=o.labelCategoryInterval,a=Ue(o.labels,function(l){return l.tickValue})}else s=r,a=Ffe(n,s,!0);return t8(t,r,{ticks:a,tickCategoryInterval:s})}function ZFe(n){var e=n.scale.getTicks(),t=YS(n);return{labels:Ue(e,function(r,i){return{formattedLabel:t(r,i),rawLabel:n.scale.getLabel(r),tickValue:r.value,time:r.time,break:r.break}})}}var QFe=kfe("axisTick"),JFe=kfe("axisLabel");function kfe(n){return function(t){return WE(t)[n]||(WE(t)[n]={list:[]})}}function Ofe(n,e){for(var t=0;t<n.list.length;t++)if(n.list[t].key===e)return n.list[t].value}function t8(n,e,t){return n.list.push({key:e,value:t}),t}function e4e(n,e){if(e.kind===Lc.estimate){var t=n.calculateCategoryInterval(e);return e.out.noPxChangeTryDetermine.push(function(){return WE(n).autoInterval=t,!0}),t}var r=WE(n).autoInterval;return r??(WE(n).autoInterval=n.calculateCategoryInterval(e))}function t4e(n,e){var t=e.kind,r=r4e(n),i=YS(n),a=(r.axisRotate-r.labelRotate)/180*Math.PI,s=n.scale,o=s.getExtent(),l=s.count();if(o[1]-o[0]<1)return 0;var u=1,c=40;l>c&&(u=Math.max(1,Math.floor(l/c)));for(var h=o[0],d=n.dataToCoord(h+1)-n.dataToCoord(h),f=Math.abs(d*Math.cos(a)),p=Math.abs(d*Math.sin(a)),m=0,g=0;h<=o[1];h+=u){var v=0,b=0,S=e3(i({value:h}),r.font,"center","top");v=S.width*1.3,b=S.height*1.3,m=Math.max(m,v,7),g=Math.max(g,b,7)}var w=m/f,E=g/p;isNaN(w)&&(w=1/0),isNaN(E)&&(E=1/0);var T=Math.max(0,Math.floor(Math.min(w,E)));if(t===Lc.estimate)return e.out.noPxChangeTryDetermine.push(Qe(n4e,null,n,T,l)),T;var M=Bfe(n,T,l);return M??T}function n4e(n,e,t){return Bfe(n,e,t)==null}function Bfe(n,e,t){var r=XFe(n.model),i=n.getExtent(),a=r.lastAutoInterval,s=r.lastTickCount;if(a!=null&&s!=null&&Math.abs(a-e)<=1&&Math.abs(s-t)<=1&&a>e&&r.axisExtent0===i[0]&&r.axisExtent1===i[1])return a;r.lastTickCount=t,r.lastAutoInterval=e,r.axisExtent0=i[0],r.axisExtent1=i[1]}function r4e(n){var e=n.getLabelModel();return{axisRotate:n.getRotate?n.getRotate():n.isHorizontal&&!n.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function Ffe(n,e,t){var r=YS(n),i=n.scale,a=i.getExtent(),s=n.getLabelModel(),o=[],l=Math.max((e||0)+1,1),u=a[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var h=Mfe(n),d=s.get("showMinLabel")||h,f=s.get("showMaxLabel")||h;d&&u!==a[0]&&m(a[0]);for(var p=u;p<=a[1];p+=l)m(p);f&&p-l!==a[1]&&m(a[1]);function m(g){var v={value:g};o.push(t?g:{formattedLabel:r(v),rawLabel:i.getLabel(v),tickValue:g,time:void 0,break:void 0})}return o}function Ufe(n,e,t){var r=n.scale,i=YS(n),a=[];return W(r.getTicks(),function(s){var o=r.getLabel(s),l=s.value;e(s.value,o)&&a.push(t?l:{formattedLabel:i(s),rawLabel:o,tickValue:l,time:void 0,break:void 0})}),a}var dJ=[0,1],Oc=(function(){function n(e,t,r){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=r||[0,0]}return n.prototype.contain=function(e){var t=this._extent,r=Math.min(t[0],t[1]),i=Math.max(t[0],t[1]);return e>=r&&e<=i},n.prototype.containData=function(e){return this.scale.contain(this.scale.parse(e))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(e){return Mce(e||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(e,t){var r=this._extent;r[0]=e,r[1]=t},n.prototype.dataToCoord=function(e,t){var r=this._extent,i=this.scale;return e=i.normalize(i.parse(e)),this.onBand&&i.type==="ordinal"&&(r=r.slice(),fJ(r,i.count())),Jn(e,dJ,r,t)},n.prototype.coordToData=function(e,t){var r=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(r=r.slice(),fJ(r,i.count()));var a=Jn(e,r,dJ,t);return this.scale.scale(a)},n.prototype.pointToData=function(e,t){},n.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),r=YFe(this,t,{breakTicks:e.breakTicks,pruneByBreak:e.pruneByBreak}),i=r.ticks,a=Ue(i,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),s=t.get("alignWithLabel");return i4e(this,a,s,e.clamp),a},n.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var r=this.scale.getMinorTicks(t),i=Ue(r,function(a){return Ue(a,function(s){return{coord:this.dataToCoord(s),tickValue:s}},this)},this);return i},n.prototype.getViewLabels=function(e){return e=e||gN(Lc.determine),$Fe(this,e).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),r=t[1]-t[0]+(this.onBand?1:0);r===0&&(r=1);var i=Math.abs(e[1]-e[0]);return Math.abs(i)/r},n.prototype.calculateCategoryInterval=function(e){return e=e||gN(Lc.determine),t4e(this,e)},n})();function fJ(n,e){var t=n[1]-n[0],r=e,i=t/r/2;n[0]+=i,n[1]-=i}function i4e(n,e,t,r){var i=e.length;if(!n.onBand||t||!i)return;var a=n.getExtent(),s,o;if(i===1)e[0].coord=a[0],e[0].onBand=!0,s=e[1]={coord:a[1],tickValue:e[0].tickValue,onBand:!0};else{var l=e[i-1].tickValue-e[0].tickValue,u=(e[i-1].coord-e[0].coord)/l;W(e,function(f){f.coord-=u/2,f.onBand=!0});var c=n.scale.getExtent();o=1+c[1]-e[i-1].tickValue,s={coord:e[i-1].coord+u*o,tickValue:c[1]+1,onBand:!0},e.push(s)}var h=a[0]>a[1];d(e[0].coord,a[0])&&(r?e[0].coord=a[0]:e.shift()),r&&d(a[0],e[0].coord)&&e.unshift({coord:a[0],onBand:!0}),d(a[1],s.coord)&&(r?s.coord=a[1]:e.pop()),r&&d(s.coord,a[1])&&e.push({coord:a[1],onBand:!0});function d(f,p){return f=Wi(f),p=Wi(p),h?f>p:f<p}}var uT=Math.PI*2,Ev=rd.CMD,a4e=["top","right","bottom","left"];function s4e(n,e,t,r,i){var a=t.width,s=t.height;switch(n){case"top":r.set(t.x+a/2,t.y-e),i.set(0,-1);break;case"bottom":r.set(t.x+a/2,t.y+s+e),i.set(0,1);break;case"left":r.set(t.x-e,t.y+s/2),i.set(-1,0);break;case"right":r.set(t.x+a+e,t.y+s/2),i.set(1,0);break}}function o4e(n,e,t,r,i,a,s,o,l){s-=n,o-=e;var u=Math.sqrt(s*s+o*o);s/=u,o/=u;var c=s*t+n,h=o*t+e;if(Math.abs(r-i)%uT<1e-4)return l[0]=c,l[1]=h,u-t;if(a){var d=r;r=Dl(i),i=Dl(d)}else r=Dl(r),i=Dl(i);r>i&&(i+=uT);var f=Math.atan2(o,s);if(f<0&&(f+=uT),f>=r&&f<=i||f+uT>=r&&f+uT<=i)return l[0]=c,l[1]=h,u-t;var p=t*Math.cos(r)+n,m=t*Math.sin(r)+e,g=t*Math.cos(i)+n,v=t*Math.sin(i)+e,b=(p-s)*(p-s)+(m-o)*(m-o),S=(g-s)*(g-s)+(v-o)*(v-o);return b<S?(l[0]=p,l[1]=m,Math.sqrt(b)):(l[0]=g,l[1]=v,Math.sqrt(S))}function vN(n,e,t,r,i,a,s,o){var l=i-n,u=a-e,c=t-n,h=r-e,d=Math.sqrt(c*c+h*h);c/=d,h/=d;var f=l*c+u*h,p=f/d;o&&(p=Math.min(Math.max(p,0),1)),p*=d;var m=s[0]=n+p*c,g=s[1]=e+p*h;return Math.sqrt((m-i)*(m-i)+(g-a)*(g-a))}function zfe(n,e,t,r,i,a,s){t<0&&(n=n+t,t=-t),r<0&&(e=e+r,r=-r);var o=n+t,l=e+r,u=s[0]=Math.min(Math.max(i,n),o),c=s[1]=Math.min(Math.max(a,e),l);return Math.sqrt((u-i)*(u-i)+(c-a)*(c-a))}var ac=[];function l4e(n,e,t){var r=zfe(e.x,e.y,e.width,e.height,n.x,n.y,ac);return t.set(ac[0],ac[1]),r}function u4e(n,e,t){for(var r=0,i=0,a=0,s=0,o,l,u=1/0,c=e.data,h=n.x,d=n.y,f=0;f<c.length;){var p=c[f++];f===1&&(r=c[f],i=c[f+1],a=r,s=i);var m=u;switch(p){case Ev.M:a=c[f++],s=c[f++],r=a,i=s;break;case Ev.L:m=vN(r,i,c[f],c[f+1],h,d,ac,!0),r=c[f++],i=c[f++];break;case Ev.C:m=cce(r,i,c[f++],c[f++],c[f++],c[f++],c[f],c[f+1],h,d,ac),r=c[f++],i=c[f++];break;case Ev.Q:m=dce(r,i,c[f++],c[f++],c[f],c[f+1],h,d,ac),r=c[f++],i=c[f++];break;case Ev.A:var g=c[f++],v=c[f++],b=c[f++],S=c[f++],w=c[f++],E=c[f++];f+=1;var T=!!(1-c[f++]);o=Math.cos(w)*b+g,l=Math.sin(w)*S+v,f<=1&&(a=o,s=l);var M=(h-g)*S/b+g;m=o4e(g,v,S,w,w+E,T,M,d,ac),r=Math.cos(w+E)*b+g,i=Math.sin(w+E)*S+v;break;case Ev.R:a=r=c[f++],s=i=c[f++];var P=c[f++],I=c[f++];m=zfe(a,s,P,I,h,d,ac);break;case Ev.Z:m=vN(r,i,a,s,h,d,ac,!0),r=a,i=s;break}m<u&&(u=m,t.set(ac[0],ac[1]))}return u}var _c=new Ct,Lr=new Ct,Li=new Ct,Vh=new Ct,Oh=new Ct;function pJ(n,e){if(n){var t=n.getTextGuideLine(),r=n.getTextContent();if(r&&t){var i=n.textGuideLineConfig||{},a=[[0,0],[0,0],[0,0]],s=i.candidates||a4e,o=r.getBoundingRect().clone();o.applyTransform(r.getComputedTransform());var l=1/0,u=i.anchor,c=n.getComputedTransform(),h=c&&Ic([],c),d=e.get("length2")||0;u&&Li.copy(u);for(var f=0;f<s.length;f++){var p=s[f];s4e(p,0,o,_c,Vh),Ct.scaleAndAdd(Lr,_c,Vh,d),Lr.transform(h);var m=n.getBoundingRect(),g=u?u.distance(Lr):n instanceof vn?u4e(Lr,n.path,Li):l4e(Lr,m,Li);g<l&&(l=g,Lr.transform(c),Li.transform(c),Li.toArray(a[0]),Lr.toArray(a[1]),_c.toArray(a[2]))}Vfe(a,e.get("minTurnAngle")),t.setShape({points:a})}}}var yN=[],oo=new Ct;function Vfe(n,e){if(e<=180&&e>0){e=e/180*Math.PI,_c.fromArray(n[0]),Lr.fromArray(n[1]),Li.fromArray(n[2]),Ct.sub(Vh,_c,Lr),Ct.sub(Oh,Li,Lr);var t=Vh.len(),r=Oh.len();if(!(t<.001||r<.001)){Vh.scale(1/t),Oh.scale(1/r);var i=Vh.dot(Oh),a=Math.cos(e);if(a<i){var s=vN(Lr.x,Lr.y,Li.x,Li.y,_c.x,_c.y,yN,!1);oo.fromArray(yN),oo.scaleAndAdd(Oh,s/Math.tan(Math.PI-e));var o=Li.x!==Lr.x?(oo.x-Lr.x)/(Li.x-Lr.x):(oo.y-Lr.y)/(Li.y-Lr.y);if(isNaN(o))return;o<0?Ct.copy(oo,Lr):o>1&&Ct.copy(oo,Li),oo.toArray(n[1])}}}}function c4e(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,_c.fromArray(n[0]),Lr.fromArray(n[1]),Li.fromArray(n[2]),Ct.sub(Vh,Lr,_c),Ct.sub(Oh,Li,Lr);var r=Vh.len(),i=Oh.len();if(!(r<.001||i<.001)){Vh.scale(1/r),Oh.scale(1/i);var a=Vh.dot(e),s=Math.cos(t);if(a<s){var o=vN(Lr.x,Lr.y,Li.x,Li.y,_c.x,_c.y,yN,!1);oo.fromArray(yN);var l=Math.PI/2,u=Math.acos(Oh.dot(e)),c=l+u-t;if(c>=l)Ct.copy(oo,Li);else{oo.scaleAndAdd(Oh,o/Math.tan(Math.PI/2-c));var h=Li.x!==Lr.x?(oo.x-Lr.x)/(Li.x-Lr.x):(oo.y-Lr.y)/(Li.y-Lr.y);if(isNaN(h))return;h<0?Ct.copy(oo,Lr):h>1&&Ct.copy(oo,Li)}oo.toArray(n[1])}}}}function N4(n,e,t,r){var i=t==="normal",a=i?n:n.ensureState(t);a.ignore=e;var s=r.get("smooth");s&&s===!0&&(s=.3),a.shape=a.shape||{},s>0&&(a.shape.smooth=s);var o=r.getModel("lineStyle").getLineStyle();i?n.useStyle(o):a.style=o}function h4e(n,e){var t=e.smooth,r=e.points;if(r)if(n.moveTo(r[0][0],r[0][1]),t>0&&r.length>=3){var i=eg(r[0],r[1]),a=eg(r[1],r[2]);if(!i||!a){n.lineTo(r[1][0],r[1][1]),n.lineTo(r[2][0],r[2][1]);return}var s=Math.min(i,a)*t,o=xL([],r[1],r[0],s/i),l=xL([],r[1],r[2],s/a),u=xL([],o,l,.5);n.bezierCurveTo(o[0],o[1],o[0],o[1],u[0],u[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],r[2][0],r[2][1])}else for(var c=1;c<r.length;c++)n.lineTo(r[c][0],r[c][1])}function Xj(n,e,t){var r=n.getTextGuideLine(),i=n.getTextContent();if(!i){r&&n.removeTextGuideLine();return}for(var a=e.normal,s=a.get("show"),o=i.ignore,l=0;l<yA.length;l++){var u=yA[l],c=e[u],h=u==="normal";if(c){var d=c.get("show"),f=h?o:dt(i.states[u]&&i.states[u].ignore,o);if(f||!dt(d,s)){var p=h?r:r&&r.states[u];p&&(p.ignore=!0),r&&N4(r,!0,u,c);continue}r||(r=new gs,n.setTextGuideLine(r),!h&&(o||!s)&&N4(r,!0,"normal",e.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),N4(r,!1,u,c)}}if(r){Pt(r.style,t),r.style.fill=null;var m=a.get("showAbove"),g=n.textGuideLineConfig=n.textGuideLineConfig||{};g.showAbove=m||!1,r.buildPath=h4e}}function $j(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},r=0;r<yo.length;r++){var i=yo[r];t[i]=n.getModel([i,e])}return t}var mJ=["label","labelLine","layoutOption","priority","defaultAttr","marginForce","minMarginForce","marginDefault","suggestIgnore"],d4e=1,xN=2,Hfe=d4e|xN;function _N(n,e,t){t=t||Hfe,e?n.dirty|=t:n.dirty&=~t}function Gfe(n,e){return e=e||Hfe,n.dirty==null||!!(n.dirty&e)}function ad(n){if(n)return Gfe(n)&&jfe(n,n.label,n),n}function jfe(n,e,t){var r=e.getComputedTransform();n.transform=dj(n.transform,r);var i=n.localRect=bA(n.localRect,e.getBoundingRect()),a=e.style,s=a.margin,o=t&&t.marginForce,l=t&&t.minMarginForce,u=t&&t.marginDefault,c=a.__marginType;c==null&&u&&(s=u,c=rb.textMargin);for(var h=0;h<4;h++)k4[h]=c===rb.minMargin&&l&&l[h]!=null?l[h]:o&&o[h]!=null?o[h]:s?s[h]:0;c===rb.textMargin&&Gy(i,k4,!1,!1);var d=n.rect=bA(n.rect,i);return r&&d.applyTransform(r),c===rb.minMargin&&Gy(d,k4,!1,!1),n.axisAligned=hj(r),(n.label=n.label||{}).ignore=e.ignore,_N(n,!1),_N(n,!0,xN),n}var k4=[0,0,0,0];function f4e(n,e,t){return n.transform=dj(n.transform,t),n.localRect=bA(n.localRect,e),n.rect=bA(n.rect,e),t&&n.rect.applyTransform(t),n.axisAligned=hj(t),n.obb=void 0,(n.label=n.label||{}).ignore=!1,n}function n8(n,e){if(n){n.label.x+=e.x,n.label.y+=e.y,n.label.markRedraw();var t=n.transform;t&&(t[4]+=e.x,t[5]+=e.y);var r=n.rect;r&&(r.x+=e.x,r.y+=e.y);var i=n.obb;i&&i.fromBoundingRect(n.localRect,t)}}function r8(n,e){for(var t=0;t<mJ.length;t++){var r=mJ[t];n[r]==null&&(n[r]=e[r])}return ad(n)}function gJ(n){var e=n.obb;return(!e||Gfe(n,xN))&&(n.obb=e=e||new ghe,e.fromBoundingRect(n.localRect,n.transform),_N(n,!1,xN)),e}function i8(n,e,t,r,i){var a=n.length,s=Yt[e],o=Yi[e];if(a<2)return!1;n.sort(function(M,P){return M.rect[s]-P.rect[s]});for(var l=0,u,c=!1,h=0;h<a;h++){var d=n[h],f=d.rect;u=f[s]-l,u<0&&(f[s]-=u,d.label[s]-=u,c=!0),l=f[s]+f[o]}var p=n[0],m=n[a-1],g,v;b(),g<0&&E(-g,.8),v<0&&E(v,.8),b(),S(g,v,1),S(v,g,-1),b(),g<0&&T(-g),v<0&&T(v);function b(){g=p.rect[s]-t,v=r-m.rect[s]-m.rect[o]}function S(M,P,I){if(M<0){var D=Math.min(P,-M);if(D>0){w(D*I,0,a);var R=D+M;R<0&&E(-R*I,1)}else E(-M*I,1)}}function w(M,P,I){M!==0&&(c=!0);for(var D=P;D<I;D++){var R=n[D],B=R.rect;B[s]+=M,R.label[s]+=M}}function E(M,P){for(var I=[],D=0,R=1;R<a;R++){var B=n[R-1].rect,k=Math.max(n[R].rect[s]-B[s]-B[o],0);I.push(k),D+=k}if(D){var V=Math.min(Math.abs(M)/D,P);if(M>0)for(var R=0;R<a-1;R++){var G=I[R]*V;w(G,0,R+1)}else for(var R=a-1;R>0;R--){var G=I[R-1]*V;w(-G,R,a)}}}function T(M){var P=M<0?-1:1;M=Math.abs(M);for(var I=Math.ceil(M/(a-1)),D=0;D<a-1;D++)if(P>0?w(I,0,D+1):w(-I,a-D-1,a),M-=I,M<=0)return}return c}function p4e(n){for(var e=0;e<n.length;e++){var t=n[e],r=t.defaultAttr,i=t.labelLine;t.label.attr("ignore",r.ignore),i&&i.attr("ignore",r.labelGuideIgnore)}}function Wfe(n){var e=[];n.sort(function(u,c){return(c.suggestIgnore?1:0)-(u.suggestIgnore?1:0)||c.priority-u.priority});function t(u){if(!u.ignore){var c=u.ensureState("emphasis");c.ignore==null&&(c.ignore=!1)}u.ignore=!0}for(var r=0;r<n.length;r++){var i=ad(n[r]);if(!i.label.ignore){for(var a=i.label,s=i.labelLine,o=!1,l=0;l<e.length;l++)if(w3(i,e[l],null,{touchThreshold:.05})){o=!0;break}o?(t(a),s&&t(s)):e.push(i)}}}function w3(n,e,t,r){return!n||!e||n.label&&n.label.ignore||e.label&&e.label.ignore||!n.rect.intersect(e.rect,t,r)?!1:n.axisAligned&&e.axisAligned?!0:gJ(n).intersect(gJ(e),t,r)}function m4e(n){if(n){for(var e=[],t=0;t<n.length;t++)e.push(n[t].slice());return e}}function g4e(n,e){var t=n.label,r=e&&e.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:t.style.align,verticalAlign:t.style.verticalAlign,labelLinePoints:m4e(r&&r.shape.points)}}var vJ=["align","verticalAlign","width","height","fontSize"],Ys=new If,O4=mn(),v4e=mn();function GI(n,e,t){for(var r=0;r<t.length;r++){var i=t[r];e[i]!=null&&(n[i]=e[i])}}var jI=["x","y","rotation"],y4e=(function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(e,t,r,i,a){var s=i.style,o=i.__hostTarget,l=o.textConfig||{},u=i.getComputedTransform(),c=i.getBoundingRect().plain();Rt.applyTransform(c,c,u),u?Ys.setLocalTransform(u):(Ys.x=Ys.y=Ys.rotation=Ys.originX=Ys.originY=0,Ys.scaleX=Ys.scaleY=1),Ys.rotation=Dl(Ys.rotation);var h=i.__hostTarget,d;if(h){d=h.getBoundingRect().plain();var f=h.getComputedTransform();Rt.applyTransform(d,d,f)}var p=d&&h.getTextGuideLine();this._labelList.push({label:i,labelLine:p,seriesModel:r,dataIndex:e,dataType:t,layoutOptionOrCb:a,layoutOption:null,rect:c,hostRect:d,priority:d?d.width*d.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:p&&p.ignore,x:Ys.x,y:Ys.y,scaleX:Ys.scaleX,scaleY:Ys.scaleY,rotation:Ys.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(e){var t=this;this._chartViewList.push(e);var r=e.__model,i=r.get("labelLayout");(St(i)||An(i).length)&&e.group.traverse(function(a){if(a.ignore)return!0;var s=a.getTextContent(),o=Ft(a);s&&!s.disableLabelLayout&&t._addLabel(o.dataIndex,o.dataType,r,s,i)})},n.prototype.updateLayoutConfig=function(e){var t=e.getWidth(),r=e.getHeight();function i(S,w){return function(){pJ(S,w)}}for(var a=0;a<this._labelList.length;a++){var s=this._labelList[a],o=s.label,l=o.__hostTarget,u=s.defaultAttr,c=void 0;St(s.layoutOptionOrCb)?c=s.layoutOptionOrCb(g4e(s,l)):c=s.layoutOptionOrCb,c=c||{},s.layoutOption=c;var h=Math.PI/180;l&&l.setTextConfig({local:!1,position:c.x!=null||c.y!=null?null:u.attachedPos,rotation:c.rotate!=null?c.rotate*h:u.attachedRot,offset:[c.dx||0,c.dy||0]});var d=!1;if(c.x!=null?(o.x=Xe(c.x,t),o.setStyle("x",0),d=!0):(o.x=u.x,o.setStyle("x",u.style.x)),c.y!=null?(o.y=Xe(c.y,r),o.setStyle("y",0),d=!0):(o.y=u.y,o.setStyle("y",u.style.y)),c.labelLinePoints){var f=l.getTextGuideLine();f&&(f.setShape({points:c.labelLinePoints}),d=!1)}var p=O4(o);p.needsUpdateLabelLine=d,o.rotation=c.rotate!=null?c.rotate*h:u.rotation,o.scaleX=u.scaleX,o.scaleY=u.scaleY;for(var m=0;m<vJ.length;m++){var g=vJ[m];o.setStyle(g,c[g]!=null?c[g]:u.style[g])}if(c.draggable){if(o.draggable=!0,o.cursor="move",l){var v=s.seriesModel;if(s.dataIndex!=null){var b=s.seriesModel.getData(s.dataType);v=b.getItemModel(s.dataIndex)}o.on("drag",i(l,v.getModel("labelLine")))}}else o.off("drag"),o.cursor=u.cursor}},n.prototype.layout=function(e){var t=e.getWidth(),r=e.getHeight(),i=[];W(this._labelList,function(l){l.defaultAttr.ignore||i.push(r8({},l))});var a=er(i,function(l){return l.layoutOption.moveOverlap==="shiftX"}),s=er(i,function(l){return l.layoutOption.moveOverlap==="shiftY"});i8(a,0,0,t),i8(s,1,0,r);var o=er(i,function(l){return l.layoutOption.hideOverlap});p4e(o),Wfe(o)},n.prototype.processLabelsOverall=function(){var e=this;W(this._chartViewList,function(t){var r=t.__model,i=t.ignoreLabelLineUpdate,a=r.isAnimationEnabled();t.group.traverse(function(s){if(s.ignore&&!s.forceLabelAnimation)return!0;var o=!i,l=s.getTextContent();!o&&l&&(o=O4(l).needsUpdateLabelLine),o&&e._updateLabelLine(s,r),a&&e._animateLabels(s,r)})})},n.prototype._updateLabelLine=function(e,t){var r=e.getTextContent(),i=Ft(e),a=i.dataIndex;if(r&&a!=null){var s=t.getData(i.dataType),o=s.getItemModel(a),l={},u=s.getItemVisual(a,"style");if(u){var c=s.getVisual("drawType");l.stroke=u[c]}var h=o.getModel("labelLine");Xj(e,$j(o),l),pJ(e,h)}},n.prototype._animateLabels=function(e,t){var r=e.getTextContent(),i=e.getTextGuideLine();if(r&&(e.forceLabelAnimation||!r.ignore&&!r.invisible&&!e.disableLabelAnimation&&!xb(e))){var a=O4(r),s=a.oldLayout,o=Ft(e),l=o.dataIndex,u={x:r.x,y:r.y,rotation:r.rotation},c=t.getData(o.dataType);if(s){r.attr(s);var d=e.prevStates;d&&(Jt(d,"select")>=0&&r.attr(a.oldLayoutSelect),Jt(d,"emphasis")>=0&&r.attr(a.oldLayoutEmphasis)),Vn(r,u,t,l)}else if(r.attr(u),!GS(r).valueAnimation){var h=dt(r.style.opacity,1);r.style.opacity=0,Vr(r,{style:{opacity:h}},t,l)}if(a.oldLayout=u,r.states.select){var f=a.oldLayoutSelect={};GI(f,u,jI),GI(f,r.states.select,jI)}if(r.states.emphasis){var p=a.oldLayoutEmphasis={};GI(p,u,jI),GI(p,r.states.emphasis,jI)}Che(r,l,c,t,t)}if(i&&!i.ignore&&!i.invisible){var a=v4e(i),s=a.oldLayout,m={points:i.shape.points};s?(i.attr({shape:s}),Vn(i,{shape:m},t)):(i.setShape(m),i.style.strokePercent=0,Vr(i,{style:{strokePercent:1}},t)),a.oldLayout=m}},n})(),B4=mn();function x4e(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){var i=B4(t).labelManager;i||(i=B4(t).labelManager=new y4e),i.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(e,t,r){var i=B4(t).labelManager;r.updatedSeries.forEach(function(a){i.addLabelsOfSeries(t.getViewOfSeriesModel(a))}),i.updateLayoutConfig(t),i.layout(t),i.processLabelsOverall()})}var F4=Math.sin,U4=Math.cos,Xfe=Math.PI,Av=Math.PI*2,_4e=180/Xfe,$fe=(function(){function n(){}return n.prototype.reset=function(e){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,e||4)},n.prototype.moveTo=function(e,t){this._add("M",e,t)},n.prototype.lineTo=function(e,t){this._add("L",e,t)},n.prototype.bezierCurveTo=function(e,t,r,i,a,s){this._add("C",e,t,r,i,a,s)},n.prototype.quadraticCurveTo=function(e,t,r,i){this._add("Q",e,t,r,i)},n.prototype.arc=function(e,t,r,i,a,s){this.ellipse(e,t,r,r,0,i,a,s)},n.prototype.ellipse=function(e,t,r,i,a,s,o,l){var u=o-s,c=!l,h=Math.abs(u),d=ag(h-Av)||(c?u>=Av:-u>=Av),f=u>0?u%Av:u%Av+Av,p=!1;d?p=!0:ag(h)?p=!1:p=f>=Xfe==!!c;var m=e+r*U4(s),g=t+i*F4(s);this._start&&this._add("M",m,g);var v=Math.round(a*_4e);if(d){var b=1/this._p,S=(c?1:-1)*(Av-b);this._add("A",r,i,v,1,+c,e+r*U4(s+S),t+i*F4(s+S)),b>.01&&this._add("A",r,i,v,0,+c,m,g)}else{var w=e+r*U4(o),E=t+i*F4(o);this._add("A",r,i,v,+p,+c,w,E)}},n.prototype.rect=function(e,t,r,i){this._add("M",e,t),this._add("l",r,0),this._add("l",0,i),this._add("l",-r,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(e,t,r,i,a,s,o,l,u){for(var c=[],h=this._p,d=1;d<arguments.length;d++){var f=arguments[d];if(isNaN(f)){this._invalid=!0;return}c.push(Math.round(f*h)/h)}this._d.push(e+c.join(" ")),this._start=e==="Z"},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n})(),Yj="none",b4e=Math.round;function S4e(n){var e=n.fill;return e!=null&&e!==Yj}function w4e(n){var e=n.stroke;return e!=null&&e!==Yj}var a8=["lineCap","miterLimit","lineJoin"],T4e=Ue(a8,function(n){return"stroke-"+n.toLowerCase()});function E4e(n,e,t,r){var i=e.opacity==null?1:e.opacity;if(t instanceof Ka){n("opacity",i);return}if(S4e(e)){var a=mA(e.fill);n("fill",a.color);var s=e.fillOpacity!=null?e.fillOpacity*a.opacity*i:a.opacity*i;s<1&&n("fill-opacity",s)}else n("fill",Yj);if(w4e(e)){var o=mA(e.stroke);n("stroke",o.color);var l=e.strokeNoScale?t.getLineScale():1,u=l?(e.lineWidth||0)/l:0,c=e.strokeOpacity!=null?e.strokeOpacity*o.opacity*i:o.opacity*i,h=e.strokeFirst;if(u!==1&&n("stroke-width",u),h&&n("paint-order",h?"stroke":"fill"),c<1&&n("stroke-opacity",c),e.lineDash){var d=kj(t),f=d[0],p=d[1];f&&(p=b4e(p||0),n("stroke-dasharray",f.join(",")),(p||r)&&n("stroke-dashoffset",p))}for(var m=0;m<a8.length;m++){var g=a8[m];if(e[g]!==QR[g]){var v=e[g]||QR[g];v&&n(T4e[m],v)}}}}var Yfe="http://www.w3.org/2000/svg",qfe="http://www.w3.org/1999/xlink",A4e="http://www.w3.org/2000/xmlns/",C4e="http://www.w3.org/XML/1998/namespace",yJ="ecmeta_";function Kfe(n){return document.createElementNS(Yfe,n)}function Sa(n,e,t,r,i){return{tag:n,attrs:t||{},children:r,text:i,key:e}}function M4e(n,e){var t=[];if(e)for(var r in e){var i=e[r],a=r;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),t.push(a))}return"<"+n+" "+t.join(" ")+">"}function D4e(n){return"</"+n+">"}function qj(n,e){e=e||{};var t=e.newline?`
`:"";function r(i){var a=i.children,s=i.tag,o=i.attrs,l=i.text;return M4e(s,o)+(s!=="style"?lo(l):l||"")+(a?""+t+Ue(a,function(u){return r(u)}).join(t)+t:"")+D4e(s)}return r(n)}function I4e(n,e,t){t=t||{};var r=t.newline?`
`:"",i=" {"+r,a=r+"}",s=Ue(An(n),function(l){return l+i+Ue(An(n[l]),function(u){return u+":"+n[l][u]+";"}).join(r)+a}).join(r),o=Ue(An(e),function(l){return"@keyframes "+l+i+Ue(An(e[l]),function(u){return u+i+Ue(An(e[l][u]),function(c){var h=e[l][u][c];return c==="d"&&(h='path("'+h+'")'),c+":"+h+";"}).join(r)+a}).join(r)+a}).join(r);return!s&&!o?"":["<![CDATA[",s,o,"]]>"].join(r)}function s8(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function xJ(n,e,t,r){return Sa("svg","root",{width:n,height:e,xmlns:Yfe,"xmlns:xlink":qfe,version:"1.1",baseProfile:"full",viewBox:r?"0 0 "+n+" "+e:!1},t)}var P4e=0;function Zfe(){return P4e++}var _J={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Bv="transform-origin";function L4e(n,e,t){var r=Pe({},n.shape);Pe(r,e),n.buildPath(t,r);var i=new $fe;return i.reset(xce(n)),t.rebuildPath(i,1),i.generateStr(),i.getStr()}function R4e(n,e){var t=e.originX,r=e.originY;(t||r)&&(n[Bv]=t+"px "+r+"px")}var N4e={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Qfe(n,e){var t=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[t]=n,t}function k4e(n,e,t){var r=n.shape.paths,i={},a,s;if(W(r,function(l){var u=s8(t.zrId);u.animation=!0,T3(l,{},u,!0);var c=u.cssAnims,h=u.cssNodes,d=An(c),f=d.length;if(f){s=d[f-1];var p=c[s];for(var m in p){var g=p[m];i[m]=i[m]||{d:""},i[m].d+=g.d||""}for(var v in h){var b=h[v].animation;b.indexOf(s)>=0&&(a=b)}}}),!!a){e.d=!1;var o=Qfe(i,t);return a.replace(s,o)}}function bJ(n){return Ke(n)?_J[n]?"cubic-bezier("+_J[n]+")":YG(n)?n:"":""}function T3(n,e,t,r){var i=n.animators,a=i.length,s=[];if(n instanceof d3){var o=k4e(n,e,t);if(o)s.push(o);else if(!a)return}else if(!a)return;for(var l={},u=0;u<a;u++){var c=i[u],h=[c.getMaxTime()/1e3+"s"],d=bJ(c.getClip().easing),f=c.getDelay();d?h.push(d):h.push("linear"),f&&h.push(f/1e3+"s"),c.getLoop()&&h.push("infinite");var p=h.join(" ");l[p]=l[p]||[p,[]],l[p][1].push(c)}function m(b){var S=b[1],w=S.length,E={},T={},M={},P="animation-timing-function";function I(fe,Ee,Ce){for(var Re=fe.getTracks(),He=fe.getMaxTime(),pt=0;pt<Re.length;pt++){var lt=Re[pt];if(lt.needsAnimate()){var Mt=lt.keyframes,mt=lt.propName;if(Ce&&(mt=Ce(mt)),mt)for(var on=0;on<Mt.length;on++){var ce=Mt[on],ln=Math.round(ce.time/He*100)+"%",gn=bJ(ce.easing),Cn=ce.rawValue;(Ke(Cn)||Ln(Cn))&&(Ee[ln]=Ee[ln]||{},Ee[ln][mt]=ce.rawValue,gn&&(Ee[ln][P]=gn))}}}}for(var D=0;D<w;D++){var R=S[D],B=R.targetName;B?B==="shape"&&I(R,T):!r&&I(R,E)}for(var k in E){var V={};qR(V,n),Pe(V,E[k]);var G=_ce(V),F=E[k][P];M[k]=G?{transform:G}:{},R4e(M[k],V),F&&(M[k][P]=F)}var X,j=!0;for(var k in T){M[k]=M[k]||{};var Q=!X,F=T[k][P];Q&&(X=new rd);var H=X.len();X.reset(),M[k].d=L4e(n,T[k],X);var K=X.len();if(!Q&&H!==K){j=!1;break}F&&(M[k][P]=F)}if(!j)for(var k in M)delete M[k].d;if(!r)for(var D=0;D<w;D++){var R=S[D],B=R.targetName;B==="style"&&I(R,M,function(Re){return N4e[Re]})}for(var te=An(M),Y=!0,de,D=1;D<te.length;D++){var ge=te[D-1],se=te[D];if(M[ge][Bv]!==M[se][Bv]){Y=!1;break}de=M[ge][Bv]}if(Y&&de){for(var k in M)M[k][Bv]&&delete M[k][Bv];e[Bv]=de}if(er(te,function(fe){return An(M[fe]).length>0}).length){var he=Qfe(M,t);return he+" "+b[0]+" both"}}for(var g in l){var o=m(l[g]);o&&s.push(o)}if(s.length){var v=t.zrId+"-cls-"+Zfe();t.cssNodes["."+v]={animation:s.join(",")},e.class=v}}function O4e(n,e,t){if(!n.ignore)if(n.isSilent()){var r={"pointer-events":"none"};SJ(r,e,t)}else{var i=n.states.emphasis&&n.states.emphasis.style?n.states.emphasis.style:{},a=i.fill;if(!a){var s=n.style&&n.style.fill,o=n.states.select&&n.states.select.style&&n.states.select.style.fill,l=n.currentStates.indexOf("select")>=0&&o||s;l&&(a=az(l))}var u=i.lineWidth;if(u){var c=!i.strokeNoScale&&n.transform?n.transform[0]:1;u=u/c}var r={cursor:"pointer"};a&&(r.fill=a),i.stroke&&(r.stroke=i.stroke),u&&(r["stroke-width"]=u),SJ(r,e,t)}}function SJ(n,e,t,r){var i=JSON.stringify(n),a=t.cssStyleCache[i];a||(a=t.zrId+"-cls-"+Zfe(),t.cssStyleCache[i]=a,t.cssNodes["."+a+":hover"]=n),e.class=e.class?e.class+" "+a:a}var IA=Math.round;function Jfe(n){return n&&Ke(n.src)}function epe(n){return n&&St(n.toDataURL)}function Kj(n,e,t,r){E4e(function(i,a){var s=i==="fill"||i==="stroke";s&&yce(a)?npe(e,n,i,r):s&&qG(a)?rpe(t,n,i,r):n[i]=a,s&&r.ssr&&a==="none"&&(n["pointer-events"]="visible")},e,t,!1),G4e(t,n,r)}function Zj(n,e){var t=hRe(e);t&&(t.each(function(r,i){r!=null&&(n[(yJ+i).toLowerCase()]=r+"")}),e.isSilent()&&(n[yJ+"silent"]="true"))}function wJ(n){return ag(n[0]-1)&&ag(n[1])&&ag(n[2])&&ag(n[3]-1)}function B4e(n){return ag(n[4])&&ag(n[5])}function Qj(n,e,t){if(e&&!(B4e(e)&&wJ(e))){var r=1e4;n.transform=wJ(e)?"translate("+IA(e[4]*r)/r+" "+IA(e[5]*r)/r+")":RLe(e)}}function TJ(n,e,t){for(var r=n.points,i=[],a=0;a<r.length;a++)i.push(IA(r[a][0]*t)/t),i.push(IA(r[a][1]*t)/t);e.points=i.join(" ")}function EJ(n){return!n.smooth}function F4e(n){var e=Ue(n,function(t){return typeof t=="string"?[t,t]:t});return function(t,r,i){for(var a=0;a<e.length;a++){var s=e[a],o=t[s[0]];o!=null&&(r[s[1]]=IA(o*i)/i)}}}var U4e={circle:[F4e(["cx","cy","r"])],polyline:[TJ,EJ],polygon:[TJ,EJ]};function z4e(n){for(var e=n.animators,t=0;t<e.length;t++)if(e[t].targetName==="shape")return!0;return!1}function tpe(n,e){var t=n.style,r=n.shape,i=U4e[n.type],a={},s=e.animation,o="path",l=n.style.strokePercent,u=e.compress&&xce(n)||4;if(i&&!e.willUpdate&&!(i[1]&&!i[1](r))&&!(s&&z4e(n))&&!(l<1)){o=n.type;var c=Math.pow(10,u);i[0](r,a,c)}else{var h=!n.path||n.shapeChanged();n.path||n.createPathProxy();var d=n.path;h&&(d.beginPath(),n.buildPath(d,n.shape),n.pathUpdated());var f=d.getVersion(),p=n,m=p.__svgPathBuilder;(p.__svgPathVersion!==f||!m||l!==p.__svgPathStrokePercent)&&(m||(m=p.__svgPathBuilder=new $fe),m.reset(u),d.rebuildPath(m,l),m.generateStr(),p.__svgPathVersion=f,p.__svgPathStrokePercent=l),a.d=m.getStr()}return Qj(a,n.transform),Kj(a,t,n,e),Zj(a,n),e.animation&&T3(n,a,e),e.emphasis&&O4e(n,a,e),Sa(o,n.id+"",a)}function V4e(n,e){var t=n.style,r=t.image;if(r&&!Ke(r)&&(Jfe(r)?r=r.src:epe(r)&&(r=r.toDataURL())),!!r){var i=t.x||0,a=t.y||0,s=t.width,o=t.height,l={href:r,width:s,height:o};return i&&(l.x=i),a&&(l.y=a),Qj(l,n.transform),Kj(l,t,n,e),Zj(l,n),e.animation&&T3(n,l,e),Sa("image",n.id+"",l)}}function H4e(n,e){var t=n.style,r=t.text;if(r!=null&&(r+=""),!(!r||isNaN(t.x)||isNaN(t.y))){var i=t.font||Wf,a=t.x||0,s=kLe(t.y||0,d2(i),t.textBaseline),o=NLe[t.textAlign]||t.textAlign,l={"dominant-baseline":"central","text-anchor":o};if(Zce(t)){var u="",c=t.fontStyle,h=Kce(t.fontSize);if(!parseFloat(h))return;var d=t.fontFamily||Yue,f=t.fontWeight;u+="font-size:"+h+";font-family:"+d+";",c&&c!=="normal"&&(u+="font-style:"+c+";"),f&&f!=="normal"&&(u+="font-weight:"+f+";"),l.style=u}else l.style="font: "+i;return r.match(/\s/)&&(l["xml:space"]="preserve"),a&&(l.x=a),s&&(l.y=s),Qj(l,n.transform),Kj(l,t,n,e),Zj(l,n),e.animation&&T3(n,l,e),Sa("text",n.id+"",l,void 0,r)}}function AJ(n,e){if(n instanceof vn)return tpe(n,e);if(n instanceof Ka)return V4e(n,e);if(n instanceof nS)return H4e(n,e)}function G4e(n,e,t){var r=n.style;if(OLe(r)){var i=BLe(n),a=t.shadowCache,s=a[i];if(!s){var o=n.getGlobalScale(),l=o[0],u=o[1];if(!l||!u)return;var c=r.shadowOffsetX||0,h=r.shadowOffsetY||0,d=r.shadowBlur,f=mA(r.shadowColor),p=f.opacity,m=f.color,g=d/2/l,v=d/2/u,b=g+" "+v;s=t.zrId+"-s"+t.shadowIdx++,t.defs[s]=Sa("filter",s,{id:s,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Sa("feDropShadow","",{dx:c/l,dy:h/u,stdDeviation:b,"flood-color":m,"flood-opacity":p})]),a[i]=s}e.filter=Jk(s)}}function npe(n,e,t,r){var i=n[t],a,s={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(gce(i))a="linearGradient",s.x1=i.x,s.y1=i.y,s.x2=i.x2,s.y2=i.y2;else if(vce(i))a="radialGradient",s.cx=dt(i.x,.5),s.cy=dt(i.y,.5),s.r=dt(i.r,.5);else return;for(var o=i.colorStops,l=[],u=0,c=o.length;u<c;++u){var h=sz(o[u].offset)*100+"%",d=o[u].color,f=mA(d),p=f.color,m=f.opacity,g={offset:h};g["stop-color"]=p,m<1&&(g["stop-opacity"]=m),l.push(Sa("stop",u+"",g))}var v=Sa(a,"",s,l),b=qj(v),S=r.gradientCache,w=S[b];w||(w=r.zrId+"-g"+r.gradientIdx++,S[b]=w,s.id=w,r.defs[w]=Sa(a,w,s,l)),e[t]=Jk(w)}function rpe(n,e,t,r){var i=n.style[t],a=n.getBoundingRect(),s={},o=i.repeat,l=o==="no-repeat",u=o==="repeat-x",c=o==="repeat-y",h;if(mce(i)){var d=i.imageWidth,f=i.imageHeight,p=void 0,m=i.image;if(Ke(m)?p=m:Jfe(m)?p=m.src:epe(m)&&(p=m.toDataURL()),typeof Image>"u"){var g="Image width/height must been given explictly in svg-ssr renderer.";Us(d,g),Us(f,g)}else if(d==null||f==null){var v=function(D,R){if(D){var B=D.elm,k=d||R.width,V=f||R.height;D.tag==="pattern"&&(u?(V=1,k/=a.width):c&&(k=1,V/=a.height)),D.attrs.width=k,D.attrs.height=V,B&&(B.setAttribute("width",k),B.setAttribute("height",V))}},b=tj(p,null,n,function(D){l||v(T,D),v(h,D)});b&&b.width&&b.height&&(d=d||b.width,f=f||b.height)}h=Sa("image","img",{href:p,width:d,height:f}),s.width=d,s.height=f}else i.svgElement&&(h=Tt(i.svgElement),s.width=i.svgWidth,s.height=i.svgHeight);if(h){var S,w;l?S=w=1:u?(w=1,S=s.width/a.width):c?(S=1,w=s.height/a.height):s.patternUnits="userSpaceOnUse",S!=null&&!isNaN(S)&&(s.width=S),w!=null&&!isNaN(w)&&(s.height=w);var E=_ce(i);E&&(s.patternTransform=E);var T=Sa("pattern","",s,[h]),M=qj(T),P=r.patternCache,I=P[M];I||(I=r.zrId+"-p"+r.patternIdx++,P[M]=I,s.id=I,T=r.defs[I]=Sa("pattern",I,s,[h])),e[t]=Jk(I)}}function j4e(n,e,t){var r=t.clipPathCache,i=t.defs,a=r[n.id];if(!a){a=t.zrId+"-c"+t.clipPathIdx++;var s={id:a};r[n.id]=a,i[a]=Sa("clipPath",a,s,[tpe(n,t)])}e["clip-path"]=Jk(a)}function CJ(n){return document.createTextNode(n)}function Yv(n,e,t){n.insertBefore(e,t)}function MJ(n,e){n.removeChild(e)}function DJ(n,e){n.appendChild(e)}function ipe(n){return n.parentNode}function ape(n){return n.nextSibling}function z4(n,e){n.textContent=e}var IJ=58,W4e=120,X4e=Sa("","");function o8(n){return n===void 0}function uh(n){return n!==void 0}function $4e(n,e,t){for(var r={},i=e;i<=t;++i){var a=n[i].key;a!==void 0&&(r[a]=i)}return r}function QT(n,e){var t=n.key===e.key,r=n.tag===e.tag;return r&&t}function PA(n){var e,t=n.children,r=n.tag;if(uh(r)){var i=n.elm=Kfe(r);if(Jj(X4e,n),Be(t))for(e=0;e<t.length;++e){var a=t[e];a!=null&&DJ(i,PA(a))}else uh(n.text)&&!Lt(n.text)&&DJ(i,CJ(n.text))}else n.elm=CJ(n.text);return n.elm}function spe(n,e,t,r,i){for(;r<=i;++r){var a=t[r];a!=null&&Yv(n,PA(a),e)}}function bN(n,e,t,r){for(;t<=r;++t){var i=e[t];if(i!=null)if(uh(i.tag)){var a=ipe(i.elm);MJ(a,i.elm)}else MJ(n,i.elm)}}function Jj(n,e){var t,r=e.elm,i=n&&n.attrs||{},a=e.attrs||{};if(i!==a){for(t in a){var s=a[t],o=i[t];o!==s&&(s===!0?r.setAttribute(t,""):s===!1?r.removeAttribute(t):t==="style"?r.style.cssText=s:t.charCodeAt(0)!==W4e?r.setAttribute(t,s):t==="xmlns:xlink"||t==="xmlns"?r.setAttributeNS(A4e,t,s):t.charCodeAt(3)===IJ?r.setAttributeNS(C4e,t,s):t.charCodeAt(5)===IJ?r.setAttributeNS(qfe,t,s):r.setAttribute(t,s))}for(t in i)t in a||r.removeAttribute(t)}}function Y4e(n,e,t){for(var r=0,i=0,a=e.length-1,s=e[0],o=e[a],l=t.length-1,u=t[0],c=t[l],h,d,f,p;r<=a&&i<=l;)s==null?s=e[++r]:o==null?o=e[--a]:u==null?u=t[++i]:c==null?c=t[--l]:QT(s,u)?(O_(s,u),s=e[++r],u=t[++i]):QT(o,c)?(O_(o,c),o=e[--a],c=t[--l]):QT(s,c)?(O_(s,c),Yv(n,s.elm,ape(o.elm)),s=e[++r],c=t[--l]):QT(o,u)?(O_(o,u),Yv(n,o.elm,s.elm),o=e[--a],u=t[++i]):(o8(h)&&(h=$4e(e,r,a)),d=h[u.key],o8(d)?Yv(n,PA(u),s.elm):(f=e[d],f.tag!==u.tag?Yv(n,PA(u),s.elm):(O_(f,u),e[d]=void 0,Yv(n,f.elm,s.elm))),u=t[++i]);(r<=a||i<=l)&&(r>a?(p=t[l+1]==null?null:t[l+1].elm,spe(n,p,t,i,l)):bN(n,e,r,a))}function O_(n,e){var t=e.elm=n.elm,r=n.children,i=e.children;n!==e&&(Jj(n,e),o8(e.text)?uh(r)&&uh(i)?r!==i&&Y4e(t,r,i):uh(i)?(uh(n.text)&&z4(t,""),spe(t,null,i,0,i.length-1)):uh(r)?bN(t,r,0,r.length-1):uh(n.text)&&z4(t,""):n.text!==e.text&&(uh(r)&&bN(t,r,0,r.length-1),z4(t,e.text)))}function q4e(n,e){if(QT(n,e))O_(n,e);else{var t=n.elm,r=ipe(t);PA(e),r!==null&&(Yv(r,e.elm,ape(t)),bN(r,[n],0,0))}return e}var K4e=0,Z4e=(function(){function n(e,t,r){if(this.type="svg",this.refreshHover=PJ(),this.configLayer=PJ(),this.storage=t,this._opts=r=Pe({},r),this.root=e,this._id="zr"+K4e++,this._oldVNode=xJ(r.width,r.height),e&&!r.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=Kfe("svg");Jj(null,this._oldVNode),i.appendChild(a),e.appendChild(i)}this.resize(r.width,r.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var e=this.renderToVNode({willUpdate:!0});e.attrs.style="position:absolute;left:0;top:0;user-select:none",q4e(this._oldVNode,e),this._oldVNode=e}},n.prototype.renderOneToVNode=function(e){return AJ(e,s8(this._id))},n.prototype.renderToVNode=function(e){e=e||{};var t=this.storage.getDisplayList(!0),r=this._width,i=this._height,a=s8(this._id);a.animation=e.animation,a.willUpdate=e.willUpdate,a.compress=e.compress,a.emphasis=e.emphasis,a.ssr=this._opts.ssr;var s=[],o=this._bgVNode=Q4e(r,i,this._backgroundColor,a);o&&s.push(o);var l=e.compress?null:this._mainVNode=Sa("g","main",{},[]);this._paintList(t,a,l?l.children:s),l&&s.push(l);var u=Ue(An(a.defs),function(d){return a.defs[d]});if(u.length&&s.push(Sa("defs","defs",{},u)),e.animation){var c=I4e(a.cssNodes,a.cssAnims,{newline:!0});if(c){var h=Sa("style","stl",{},[],c);s.push(h)}}return xJ(r,i,s,e.useViewBox)},n.prototype.renderToString=function(e){return e=e||{},qj(this.renderToVNode({animation:dt(e.cssAnimation,!0),emphasis:dt(e.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:dt(e.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(e,t,r){for(var i=e.length,a=[],s=0,o,l,u=0,c=0;c<i;c++){var h=e[c];if(!h.invisible){var d=h.__clipPaths,f=d&&d.length||0,p=l&&l.length||0,m=void 0;for(m=Math.max(f-1,p-1);m>=0&&!(d&&l&&d[m]===l[m]);m--);for(var g=p-1;g>m;g--)s--,o=a[s-1];for(var v=m+1;v<f;v++){var b={};j4e(d[v],b,t);var S=Sa("g","clip-g-"+u++,b,[]);(o?o.children:r).push(S),a[s++]=S,o=S}l=d;var w=AJ(h,t);w&&(o?o.children:r).push(w)}}},n.prototype.resize=function(e,t){var r=this._opts,i=this.root,a=this._viewport;if(e!=null&&(r.width=e),t!=null&&(r.height=t),i&&a&&(a.style.display="none",e=ab(i,0,r),t=ab(i,1,r),a.style.display=""),this._width!==e||this._height!==t){if(this._width=e,this._height=t,a){var s=a.style;s.width=e+"px",s.height=t+"px"}if(qG(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",e),o.setAttribute("height",t));var l=this._bgVNode&&this._bgVNode.elm;l&&(l.setAttribute("width",e),l.setAttribute("height",t))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(e){var t=this.renderToString(),r="data:image/svg+xml;";return e?(t=ULe(t),t&&r+"base64,"+t):r+"charset=UTF-8,"+encodeURIComponent(t)},n})();function PJ(n){return function(){}}function Q4e(n,e,t,r){var i;if(t&&t!=="none")if(i=Sa("rect","bg",{width:n,height:e,x:"0",y:"0"}),yce(t))npe({fill:t},i.attrs,"fill",r);else if(qG(t))rpe({style:{fill:t},dirty:ki,getBoundingRect:function(){return{width:n,height:e}}},i.attrs,"fill",r);else{var a=mA(t),s=a.color,o=a.opacity;i.attrs.fill=s,o<1&&(i.attrs["fill-opacity"]=o)}return i}function J4e(n){n.registerPainter("svg",Z4e)}function LJ(n,e,t){var r=Dc.createCanvas(),i=e.getWidth(),a=e.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=i+"px",s.height=a+"px",r.setAttribute("data-zr-dom-id",n)),r.width=i*t,r.height=a*t,r}var V4=(function(n){Hr(e,n);function e(t,r,i){var a=n.call(this)||this;a.motionBlur=!1,a.lastFrameAlpha=.7,a.dpr=1,a.virtual=!1,a.config={},a.incremental=!1,a.zlevel=0,a.maxRepaintRectCount=5,a.__dirty=!0,a.__firstTimePaint=!0,a.__used=!1,a.__drawIndex=0,a.__startIndex=0,a.__endIndex=0,a.__prevStartIndex=null,a.__prevEndIndex=null;var s;i=i||YR,typeof t=="string"?s=LJ(t,r,i):Lt(t)&&(s=t,t=s.id),a.id=t,a.dom=s;var o=s.style;return o&&(ece(s),s.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),a.painter=r,a.dpr=i,a}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=LJ("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,r,i,a){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s=[],o=this.maxRepaintRectCount,l=!1,u=new Rt(0,0,0,0);function c(b){if(!(!b.isFinite()||b.isZero()))if(s.length===0){var S=new Rt(0,0,0,0);S.copy(b),s.push(S)}else{for(var w=!1,E=1/0,T=0,M=0;M<s.length;++M){var P=s[M];if(P.intersect(b)){var I=new Rt(0,0,0,0);I.copy(P),I.union(b),s[M]=I,w=!0;break}else if(l){u.copy(b),u.union(P);var D=b.width*b.height,R=P.width*P.height,B=u.width*u.height,k=B-D-R;k<E&&(E=k,T=M)}}if(l&&(s[T].union(b),w=!0),!w){var S=new Rt(0,0,0,0);S.copy(b),s.push(S)}l||(l=s.length>=o)}}for(var h=this.__startIndex;h<this.__endIndex;++h){var d=t[h];if(d){var f=d.shouldBePainted(i,a,!0,!0),p=d.__isRendered&&(d.__dirty&Cl||!f)?d.getPrevPaintRect():null;p&&c(p);var m=f&&(d.__dirty&Cl||!d.__isRendered)?d.getPaintRect():null;m&&c(m)}}for(var h=this.__prevStartIndex;h<this.__prevEndIndex;++h){var d=r[h],f=d&&d.shouldBePainted(i,a,!0,!0);if(d&&(!f||!d.__zr)&&d.__isRendered){var p=d.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var h=0;h<s.length;){if(s[h].isZero()){s.splice(h,1);continue}for(var v=h+1;v<s.length;)s[h].intersect(s[v])?(g=!0,s[h].union(s[v]),s.splice(v,1)):v++;h++}}while(g);return this._paintRects=s,s},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,r){var i=this.dpr,a=this.dom,s=a.style,o=this.domBack;s&&(s.width=t+"px",s.height=r+"px"),a.width=t*i,a.height=r*i,o&&(o.width=t*i,o.height=r*i,i!==1&&this.ctxBack.scale(i,i))},e.prototype.clear=function(t,r,i){var a=this.dom,s=this.ctx,o=a.width,l=a.height;r=r||this.clearColor;var u=this.motionBlur&&!t,c=this.lastFrameAlpha,h=this.dpr,d=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,o/h,l/h));var f=this.domBack;function p(m,g,v,b){if(s.clearRect(m,g,v,b),r&&r!=="transparent"){var S=void 0;if(Yk(r)){var w=r.global||r.__width===v&&r.__height===b;S=w&&r.__canvasGradient||jz(s,r,{x:0,y:0,width:v,height:b}),r.__canvasGradient=S,r.__width=v,r.__height=b}else jPe(r)&&(r.scaleX=r.scaleX||h,r.scaleY=r.scaleY||h,S=Wz(s,r,{dirty:function(){d.setUnpainted(),d.painter.refresh()}}));s.save(),s.fillStyle=S||r,s.fillRect(m,g,v,b),s.restore()}u&&(s.save(),s.globalAlpha=c,s.drawImage(f,m,g,v,b),s.restore())}!i||u?p(0,0,o,l):i.length&&W(i,function(m){p(m.x*h,m.y*h,m.width*h,m.height*h)})},e})(Uu),RJ=1e5,Cv=314159,WI=.01,e5e=.001;function t5e(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function n5e(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var r5e=(function(){function n(e,t,r,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=r=Pe({},r||{}),this.dpr=r.devicePixelRatio||YR,this._singleCanvas=a,this.root=e;var s=e.style;s&&(ece(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(a){var c=e,h=c.width,d=c.height;r.width!=null&&(h=r.width),r.height!=null&&(d=r.height),this.dpr=r.devicePixelRatio||1,c.width=h*this.dpr,c.height=d*this.dpr,this._width=h,this._height=d;var f=new V4(c,this,this.dpr);f.__builtin__=!0,f.initContext(),l[Cv]=f,f.zlevel=Cv,o.push(Cv),this._domRoot=e}else{this._width=ab(e,0,r),this._height=ab(e,1,r);var u=this._domRoot=n5e(this._width,this._height);e.appendChild(u)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),r=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,r,e,this._redrawId);for(var a=0;a<i.length;a++){var s=i[a],o=this._layers[s];if(!o.__builtin__&&o.refresh){var l=a===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,r=this._hoverlayer;if(r&&r.clear(),!!t){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},a,s=0;s<t;s++){var o=e[s];o.__inHover&&(r||(r=this._hoverlayer=this.getLayer(RJ)),a||(a=r.ctx,a.save()),c0(a,o,i,s===t-1))}a&&a.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(RJ)},n.prototype.paintOne=function(e,t){Vde(e,t)},n.prototype._paintList=function(e,t,r,i){if(this._redrawId===i){r=r||!1,this._updateLayerStatus(e);var a=this._doPaintList(e,t,r),s=a.finished,o=a.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),s)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;HR(function(){l._paintList(e,t,r,i)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(Cv).ctx,t=this._domRoot.width,r=this._domRoot.height;e.clearRect(0,0,t,r),this.eachBuiltinLayer(function(i){i.virtual&&e.drawImage(i.dom,0,0,t,r)})},n.prototype._doPaintList=function(e,t,r){for(var i=this,a=[],s=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||r)&&a.push(u)}for(var c=!0,h=!1,d=function(m){var g=a[m],v=g.ctx,b=s&&g.createRepaintRects(e,t,f._width,f._height),S=r?g.__startIndex:g.__drawIndex,w=!r&&g.incremental&&Date.now,E=w&&Date.now(),T=g.zlevel===f._zlevelList[0]?f._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,T,b);else if(S===g.__startIndex){var M=e[S];(!M.incremental||!M.notClear||r)&&g.clear(!1,T,b)}S===-1&&(console.error("For some unknown reason. drawIndex is -1"),S=g.__startIndex);var P,I=function(k){var V={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(P=S;P<g.__endIndex;P++){var G=e[P];if(G.__inHover&&(h=!0),i._doPaintEl(G,g,s,k,V,P===g.__endIndex-1),w){var F=Date.now()-E;if(F>15)break}}V.prevElClipPaths&&v.restore()};if(b)if(b.length===0)P=g.__endIndex;else for(var D=f.dpr,R=0;R<b.length;++R){var B=b[R];v.save(),v.beginPath(),v.rect(B.x*D,B.y*D,B.width*D,B.height*D),v.clip(),I(B),v.restore()}else v.save(),I(),v.restore();g.__drawIndex=P,g.__drawIndex<g.__endIndex&&(c=!1)},f=this,p=0;p<a.length;p++)d(p);return bn.wxa&&W(this._layers,function(m){m&&m.ctx&&m.ctx.draw&&m.ctx.draw()}),{finished:c,needsRefreshHover:h}},n.prototype._doPaintEl=function(e,t,r,i,a,s){var o=t.ctx;if(r){var l=e.getPaintRect();(!i||l&&l.intersect(i))&&(c0(o,e,a,s),e.setPrevPaintRect(l))}else c0(o,e,a,s)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=Cv);var r=this._layers[e];return r||(r=new V4("zr_"+e,this,this.dpr),r.zlevel=e,r.__builtin__=!0,this._layerConfig[e]?en(r,this._layerConfig[e],!0):this._layerConfig[e-WI]&&en(r,this._layerConfig[e-WI],!0),t&&(r.virtual=t),this.insertLayer(e,r),r.initContext()),r},n.prototype.insertLayer=function(e,t){var r=this._layers,i=this._zlevelList,a=i.length,s=this._domRoot,o=null,l=-1;if(!r[e]&&t5e(t)){if(a>0&&e>i[0]){for(l=0;l<a-1&&!(i[l]<e&&i[l+1]>e);l++);o=r[i[l]]}if(i.splice(l+1,0,e),r[e]=t,!t.virtual)if(o){var u=o.dom;u.nextSibling?s.insertBefore(t.dom,u.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom);t.painter||(t.painter=this)}},n.prototype.eachLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i];e.call(t,this._layers[a],a)}},n.prototype.eachBuiltinLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],s=this._layers[a];s.__builtin__&&e.call(t,s,a)}},n.prototype.eachOtherLayer=function(e,t){for(var r=this._zlevelList,i=0;i<r.length;i++){var a=r[i],s=this._layers[a];s.__builtin__||e.call(t,s,a)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(h,d){h.__dirty=h.__used=!1});function t(h){a&&(a.__endIndex!==h&&(a.__dirty=!0),a.__endIndex=h)}if(this._singleCanvas)for(var r=1;r<e.length;r++){var i=e[r];if(i.zlevel!==e[r-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var a=null,s=0,o,l;for(l=0;l<e.length;l++){var i=e[l],u=i.zlevel,c=void 0;o!==u&&(o=u,s=0),i.incremental?(c=this.getLayer(u+e5e,this._needsManuallyCompositing),c.incremental=!0,s=1):c=this.getLayer(u+(s>0?WI:0),this._needsManuallyCompositing),c.__builtin__||HG("ZLevel "+u+" has been used by unkown layer "+c.id),c!==a&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,t(l),a=c),i.__dirty&Cl&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(h,d){!h.__used&&h.getElementCount()>0&&(h.__dirty=!0,h.__startIndex=h.__endIndex=h.__drawIndex=0),h.__dirty&&h.__drawIndex<0&&(h.__drawIndex=h.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,W(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var r=this._layerConfig;r[e]?en(r[e],t,!0):r[e]=t;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];if(a===e||a===e+WI){var s=this._layers[a];en(s,r[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,r=this._zlevelList,i=t[e];i&&(i.dom.parentNode.removeChild(i.dom),delete t[e],r.splice(Jt(r,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var i=this._opts,a=this.root;if(e!=null&&(i.width=e),t!=null&&(i.height=t),e=ab(a,0,i),t=ab(a,1,i),r.style.display="",this._width!==e||t!==this._height){r.style.width=e+"px",r.style.height=t+"px";for(var s in this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(Cv).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[Cv].dom;var t=new V4("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var r=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,a=t.dom.height;this.eachLayer(function(h){h.__builtin__?r.drawImage(h.dom,0,0,i,a):h.renderToCanvas&&(r.save(),h.renderToCanvas(r),r.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,u=o.length;l<u;l++){var c=o[l];c0(r,c,s,l===u-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n})();function i5e(n){n.registerPainter("canvas",r5e)}var a5e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return lp(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var r=new wt,i=Ki("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);r.add(i),i.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),o=a==="none"?"circle":a,l=t.itemHeight*.8,u=Ki(o,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);r.add(u),u.setStyle(t.itemStyle);var c=t.iconRotate==="inherit"?s:t.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill=ve.color.neutral00,u.style.lineWidth=2),r},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:6,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e})(Cr);function uS(n,e){var t=n.mapDimensionsAll("defaultedLabel"),r=t.length;if(r===1){var i=iS(n,e,t[0]);return i!=null?i+"":null}else if(r){for(var a=[],s=0;s<t.length;s++)a.push(iS(n,e,t[s]));return a.join(" ")}}function ope(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!Be(e))return e+"";for(var r=[],i=0;i<t.length;i++){var a=n.getDimensionIndex(t[i]);a>=0&&r.push(e[a])}return r.join(" ")}var T2=(function(n){be(e,n);function e(t,r,i,a){var s=n.call(this)||this;return s.updateData(t,r,i,a),s}return e.prototype._createSymbol=function(t,r,i,a,s,o){this.removeAll();var l=Ki(t,-1,-1,2,2,null,o);l.attr({z2:dt(s,100),culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),l.drift=s5e,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Yf(this.childAt(0))},e.prototype.downplay=function(){qf(this.childAt(0))},e.prototype.setZ=function(t,r){var i=this.childAt(0);i.zlevel=t,i.z=r},e.prototype.setDraggable=function(t,r){var i=this.childAt(0);i.draggable=t,i.cursor=!r&&t?"move":i.cursor},e.prototype.updateData=function(t,r,i,a){this.silent=!1;var s=t.getItemVisual(r,"symbol")||"circle",o=t.hostModel,l=e.getSymbolSize(t,r),u=e.getSymbolZ2(t,r),c=s!==this._symbolType,h=a&&a.disableAnimation;if(c){var d=t.getItemVisual(r,"symbolKeepAspect");this._createSymbol(s,t,r,l,u,d)}else{var f=this.childAt(0);f.silent=!1;var p={scaleX:l[0]/2,scaleY:l[1]/2};h?f.attr(p):Vn(f,p,o,r),ku(f)}if(this._updateCommon(t,r,l,i,a),c){var f=this.childAt(0);if(!h){var p={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,Vr(f,p,o,r)}}h&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,r,i,a,s){var o=this.childAt(0),l=t.hostModel,u,c,h,d,f,p,m,g,v;if(a&&(u=a.emphasisItemStyle,c=a.blurItemStyle,h=a.selectItemStyle,d=a.focus,f=a.blurScope,m=a.labelStatesModels,g=a.hoverScale,v=a.cursorStyle,p=a.emphasisDisabled),!a||t.hasItemOption){var b=a&&a.itemModel?a.itemModel:t.getItemModel(r),S=b.getModel("emphasis");u=S.getModel("itemStyle").getItemStyle(),h=b.getModel(["select","itemStyle"]).getItemStyle(),c=b.getModel(["blur","itemStyle"]).getItemStyle(),d=S.get("focus"),f=S.get("blurScope"),p=S.get("disabled"),m=ca(b),g=S.getShallow("scale"),v=b.getShallow("cursor")}var w=t.getItemVisual(r,"symbolRotate");o.attr("rotation",(w||0)*Math.PI/180||0);var E=lx(t.getItemVisual(r,"symbolOffset"),i);E&&(o.x=E[0],o.y=E[1]),v&&o.attr("cursor",v);var T=t.getItemVisual(r,"style"),M=T.fill;if(o instanceof Ka){var P=o.style;o.useStyle(Pe({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},T))}else o.__isEmptyBrush?o.useStyle(Pe({},T)):o.useStyle(T),o.style.decal=null,o.setColor(M,s&&s.symbolInnerColor),o.style.strokeNoScale=!0;var I=t.getItemVisual(r,"liftZ"),D=this._z2;I!=null?D==null&&(this._z2=o.z2,o.z2+=I):D!=null&&(o.z2=D,this._z2=null);var R=s&&s.useNameLabel;Aa(o,m,{labelFetcher:l,labelDataIndex:r,defaultText:B,inheritColor:M,defaultOpacity:T.opacity});function B(G){return R?t.getName(G):uS(t,G)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var k=o.ensureState("emphasis");k.style=u,o.ensureState("select").style=h,o.ensureState("blur").style=c;var V=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;k.scaleX=this._sizeX*V,k.scaleY=this._sizeY*V,this.setSymbolScale(1),Yr(this,d,f,p)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,r,i){var a=this.childAt(0),s=Ft(this).dataIndex,o=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var l=a.getTextContent();l&&bg(l,{style:{opacity:0}},r,{dataIndex:s,removeOpt:o,cb:function(){a.removeTextContent()}})}else a.removeTextContent();bg(a,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:s,cb:t,removeOpt:o})},e.getSymbolSize=function(t,r){return $S(t.getItemVisual(r,"symbolSize"))},e.getSymbolZ2=function(t,r){return t.getItemVisual(r,"z2")},e})(wt);function s5e(n,e){this.parent.drift(n,e)}function H4(n,e,t,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(t))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function NJ(n){return n!=null&&!Lt(n)&&(n={isIgnore:n}),n||{}}function kJ(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:ca(e),cursorStyle:e.get("cursor")}}var E2=(function(){function n(e){this.group=new wt,this._SymbolCtor=e||T2}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=NJ(t);var r=this.group,i=e.hostModel,a=this._data,s=this._SymbolCtor,o=t.disableAnimation,l=kJ(e),u={disableAnimation:o},c=t.getSymbolPoint||function(h){return e.getItemLayout(h)};a||r.removeAll(),e.diff(a).add(function(h){var d=c(h);if(H4(e,d,h,t)){var f=new s(e,h,l,u);f.setPosition(d),e.setItemGraphicEl(h,f),r.add(f)}}).update(function(h,d){var f=a.getItemGraphicEl(d),p=c(h);if(!H4(e,p,h,t)){r.remove(f);return}var m=e.getItemVisual(h,"symbol")||"circle",g=f&&f.getSymbolType&&f.getSymbolType();if(!f||g&&g!==m)r.remove(f),f=new s(e,h,l,u),f.setPosition(p);else{f.updateData(e,h,l,u);var v={x:p[0],y:p[1]};o?f.attr(v):Vn(f,v,i)}r.add(f),e.setItemGraphicEl(h,f)}).remove(function(h){var d=a.getItemGraphicEl(h);d&&d.fadeOut(function(){r.remove(d)},i)}).execute(),this._getSymbolPoint=c,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(r,i){var a=e._getSymbolPoint(i);r.setPosition(a),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=kJ(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,r){this._progressiveEls=[],r=NJ(r);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var a=e.start;a<e.end;a++){var s=t.getItemLayout(a);if(H4(t,s,a,r)){var o=new this._SymbolCtor(t,a,this._seriesScope);o.traverse(i),o.setPosition(s),this.group.add(o),t.setItemGraphicEl(a,o),this._progressiveEls.push(o)}}},n.prototype.eachRendered=function(e){Ng(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,r=this._data;r&&e?r.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},r.hostModel)}):t.removeAll()},n})();function lpe(n,e,t){var r=n.getBaseAxis(),i=n.getOtherAxis(r),a=o5e(i,t),s=r.dim,o=i.dim,l=e.mapDimension(o),u=e.mapDimension(s),c=o==="x"||o==="radius"?1:0,h=Ue(n.dimensions,function(p){return e.mapDimension(p)}),d=!1,f=e.getCalculationInfo("stackResultDimension");return Sg(e,h[0])&&(d=!0,h[0]=f),Sg(e,h[1])&&(d=!0,h[1]=f),{dataDimsForPoint:h,valueStart:a,valueAxisDim:o,baseAxisDim:s,stacked:!!d,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function o5e(n,e){var t=0,r=n.scale.getExtent();return e==="start"?t=r[0]:e==="end"?t=r[1]:Ln(e)&&!isNaN(e)?t=e:r[0]>0?t=r[0]:r[1]<0&&(t=r[1]),t}function upe(n,e,t,r){var i=NaN;n.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=n.valueStart);var a=n.baseDataOffset,s=[];return s[a]=t.get(n.baseDim,r),s[1-a]=i,e.dataToPoint(s)}function l5e(n,e){var t=[];return e.diff(n).add(function(r){t.push({cmd:"+",idx:r})}).update(function(r,i){t.push({cmd:"=",idx:i,idx1:r})}).remove(function(r){t.push({cmd:"-",idx:r})}).execute(),t}function u5e(n,e,t,r,i,a,s,o){for(var l=l5e(n,e),u=[],c=[],h=[],d=[],f=[],p=[],m=[],g=lpe(i,e,s),v=n.getLayout("points")||[],b=e.getLayout("points")||[],S=0;S<l.length;S++){var w=l[S],E=!0,T=void 0,M=void 0;switch(w.cmd){case"=":T=w.idx*2,M=w.idx1*2;var P=v[T],I=v[T+1],D=b[M],R=b[M+1];(isNaN(P)||isNaN(I))&&(P=D,I=R),u.push(P,I),c.push(D,R),h.push(t[T],t[T+1]),d.push(r[M],r[M+1]),m.push(e.getRawIndex(w.idx1));break;case"+":var B=w.idx,k=g.dataDimsForPoint,V=i.dataToPoint([e.get(k[0],B),e.get(k[1],B)]);M=B*2,u.push(V[0],V[1]),c.push(b[M],b[M+1]);var G=upe(g,i,e,B);h.push(G[0],G[1]),d.push(r[M],r[M+1]),m.push(e.getRawIndex(B));break;case"-":E=!1}E&&(f.push(w),p.push(p.length))}p.sort(function(ge,se){return m[ge]-m[se]});for(var F=u.length,X=zh(F),j=zh(F),Q=zh(F),H=zh(F),K=[],S=0;S<p.length;S++){var te=p[S],Y=S*2,de=te*2;X[Y]=u[de],X[Y+1]=u[de+1],j[Y]=c[de],j[Y+1]=c[de+1],Q[Y]=h[de],Q[Y+1]=h[de+1],H[Y]=d[de],H[Y+1]=d[de+1],K[S]=f[te]}return{current:X,next:j,stackedOnCurrent:Q,stackedOnNext:H,status:K}}var Bp=Math.min,Fp=Math.max;function ky(n,e){return isNaN(n)||isNaN(e)}function l8(n,e,t,r,i,a,s,o,l){for(var u,c,h,d,f,p,m=t,g=0;g<r;g++){var v=e[m*2],b=e[m*2+1];if(m>=i||m<0)break;if(ky(v,b)){if(l){m+=a;continue}break}if(m===t)n[a>0?"moveTo":"lineTo"](v,b),h=v,d=b;else{var S=v-u,w=b-c;if(S*S+w*w<.5){m+=a;continue}if(s>0){for(var E=m+a,T=e[E*2],M=e[E*2+1];T===v&&M===b&&g<r;)g++,E+=a,m+=a,T=e[E*2],M=e[E*2+1],v=e[m*2],b=e[m*2+1],S=v-u,w=b-c;var P=g+1;if(l)for(;ky(T,M)&&P<r;)P++,E+=a,T=e[E*2],M=e[E*2+1];var I=.5,D=0,R=0,B=void 0,k=void 0;if(P>=r||ky(T,M))f=v,p=b;else{D=T-u,R=M-c;var V=v-u,G=T-v,F=b-c,X=M-b,j=void 0,Q=void 0;if(o==="x"){j=Math.abs(V),Q=Math.abs(G);var H=D>0?1:-1;f=v-H*j*s,p=b,B=v+H*Q*s,k=b}else if(o==="y"){j=Math.abs(F),Q=Math.abs(X);var K=R>0?1:-1;f=v,p=b-K*j*s,B=v,k=b+K*Q*s}else j=Math.sqrt(V*V+F*F),Q=Math.sqrt(G*G+X*X),I=Q/(Q+j),f=v-D*s*(1-I),p=b-R*s*(1-I),B=v+D*s*I,k=b+R*s*I,B=Bp(B,Fp(T,v)),k=Bp(k,Fp(M,b)),B=Fp(B,Bp(T,v)),k=Fp(k,Bp(M,b)),D=B-v,R=k-b,f=v-D*j/Q,p=b-R*j/Q,f=Bp(f,Fp(u,v)),p=Bp(p,Fp(c,b)),f=Fp(f,Bp(u,v)),p=Fp(p,Bp(c,b)),D=v-f,R=b-p,B=v+D*Q/j,k=b+R*Q/j}n.bezierCurveTo(h,d,f,p,v,b),h=B,d=k}else n.lineTo(v,b)}u=v,c=b,m+=a}return g}var cpe=(function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n})(),c5e=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polyline",r}return e.prototype.getDefaultStyle=function(){return{stroke:ve.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new cpe},e.prototype.buildPath=function(t,r){var i=r.points,a=0,s=i.length/2;if(r.connectNulls){for(;s>0&&ky(i[s*2-2],i[s*2-1]);s--);for(;a<s&&ky(i[a*2],i[a*2+1]);a++);}for(;a<s;)a+=l8(t,i,a,s,s,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},e.prototype.getPointOn=function(t,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,a=i.data,s=rd.CMD,o,l,u=r==="x",c=[],h=0;h<a.length;){var d=a[h++],f=void 0,p=void 0,m=void 0,g=void 0,v=void 0,b=void 0,S=void 0;switch(d){case s.M:o=a[h++],l=a[h++];break;case s.L:if(f=a[h++],p=a[h++],S=u?(t-o)/(f-o):(t-l)/(p-l),S<=1&&S>=0){var w=u?(p-l)*S+l:(f-o)*S+o;return u?[t,w]:[w,t]}o=f,l=p;break;case s.C:f=a[h++],p=a[h++],m=a[h++],g=a[h++],v=a[h++],b=a[h++];var E=u?jR(o,f,m,v,t,c):jR(l,p,g,b,t,c);if(E>0)for(var T=0;T<E;T++){var M=c[T];if(M<=1&&M>=0){var w=u?ba(l,p,g,b,M):ba(o,f,m,v,M);return u?[t,w]:[w,t]}}o=v,l=b;break}}},e})(vn),h5e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(cpe),hpe=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-polygon",r}return e.prototype.getDefaultShape=function(){return new h5e},e.prototype.buildPath=function(t,r){var i=r.points,a=r.stackedOnPoints,s=0,o=i.length/2,l=r.smoothMonotone;if(r.connectNulls){for(;o>0&&ky(i[o*2-2],i[o*2-1]);o--);for(;s<o&&ky(i[s*2],i[s*2+1]);s++);}for(;s<o;){var u=l8(t,i,s,o,o,1,r.smooth,l,r.connectNulls);l8(t,a,s+u-1,u,o,-1,r.stackedOnSmooth,l,r.connectNulls),s+=u+1,t.closePath()}},e})(vn);function dpe(n,e,t,r,i){var a=n.getArea(),s=a.x,o=a.y,l=a.width,u=a.height,c=t.get(["lineStyle","width"])||0;s-=c/2,o-=c/2,l+=c,u+=c,l=Math.ceil(l),s!==Math.floor(s)&&(s=Math.floor(s),l++);var h=new fn({shape:{x:s,y:o,width:l,height:u}});if(e){var d=n.getBaseAxis(),f=d.isHorizontal(),p=d.inverse;f?(p&&(h.shape.x+=l),h.shape.width=0):(p||(h.shape.y+=u),h.shape.height=0);var m=St(i)?function(g){i(g,h)}:null;Vr(h,{shape:{width:l,height:u,x:s,y:o}},t,null,r,m)}return h}function fpe(n,e,t){var r=n.getArea(),i=Wi(r.r0,1),a=Wi(r.r,1),s=new zs({shape:{cx:Wi(n.cx,1),cy:Wi(n.cy,1),r0:i,r:a,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var o=n.getBaseAxis().dim==="angle";o?s.shape.endAngle=r.startAngle:s.shape.r=i,Vr(s,{shape:{endAngle:r.endAngle,r:a}},t)}return s}function A2(n,e,t,r,i){if(n){if(n.type==="polar")return fpe(n,e,t);if(n.type==="cartesian2d")return dpe(n,e,t,r,i)}else return null;return null}function wg(n,e){return n.type===e}function OJ(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function BJ(n){for(var e=1/0,t=1/0,r=-1/0,i=-1/0,a=0;a<n.length;){var s=n[a++],o=n[a++];isNaN(s)||(e=Math.min(s,e),r=Math.max(s,r)),isNaN(o)||(t=Math.min(o,t),i=Math.max(o,i))}return[[e,t],[r,i]]}function FJ(n,e){var t=BJ(n),r=t[0],i=t[1],a=BJ(e),s=a[0],o=a[1];return Math.max(Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]),Math.abs(i[0]-o[0]),Math.abs(i[1]-o[1]))}function UJ(n){return Ln(n)?n:n?.5:0}function d5e(n,e,t){if(!t.valueDim)return[];for(var r=e.count(),i=zh(r*2),a=0;a<r;a++){var s=upe(t,n,e,a);i[a*2]=s[0],i[a*2+1]=s[1]}return i}function Up(n,e,t,r,i){var a=t.getBaseAxis(),s=a.dim==="x"||a.dim==="radius"?0:1,o=[],l=0,u=[],c=[],h=[],d=[];if(i){for(l=0;l<n.length;l+=2){var f=e||n;!isNaN(f[l])&&!isNaN(f[l+1])&&d.push(n[l],n[l+1])}n=d}for(l=0;l<n.length-2;l+=2)switch(h[0]=n[l+2],h[1]=n[l+3],c[0]=n[l],c[1]=n[l+1],o.push(c[0],c[1]),r){case"end":u[s]=h[s],u[1-s]=c[1-s],o.push(u[0],u[1]);break;case"middle":var p=(c[s]+h[s])/2,m=[];u[s]=m[s]=p,u[1-s]=c[1-s],m[1-s]=h[1-s],o.push(u[0],u[1]),o.push(m[0],m[1]);break;default:u[s]=c[s],u[1-s]=h[1-s],o.push(u[0],u[1])}return o.push(n[l++],n[l++]),o}function f5e(n,e){var t=[],r=n.length,i,a;function s(c,h,d){var f=c.coord,p=(d-f)/(h.coord-f),m=LLe(p,[c.color,h.color]);return{coord:d,color:m}}for(var o=0;o<r;o++){var l=n[o],u=l.coord;if(u<0)i=l;else if(u>e){a?t.push(s(a,l,e)):i&&t.push(s(i,l,0),s(i,l,e));break}else i&&(t.push(s(i,l,0)),i=null),t.push(l),a=l}return t}function p5e(n,e,t){var r=n.getVisual("visualMeta");if(!(!r||!r.length||!n.count())&&e.type==="cartesian2d"){for(var i,a,s=r.length-1;s>=0;s--){var o=n.getDimensionInfo(r[s].dimension);if(i=o&&o.coordDim,i==="x"||i==="y"){a=r[s];break}}if(a){var l=e.getAxis(i),u=Ue(a.stops,function(S){return{coord:l.toGlobalCoord(l.dataToCoord(S.value)),color:S.color}}),c=u.length,h=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),h.reverse());var d=f5e(u,i==="x"?t.getWidth():t.getHeight()),f=d.length;if(!f&&c)return u[0].coord<0?h[1]?h[1]:u[c-1].color:h[0]?h[0]:u[0].color;var p=10,m=d[0].coord-p,g=d[f-1].coord+p,v=g-m;if(v<.001)return"transparent";W(d,function(S){S.offset=(S.coord-m)/v}),d.push({offset:f?d[f-1].offset:.5,color:h[1]||"transparent"}),d.unshift({offset:f?d[0].offset:.5,color:h[0]||"transparent"});var b=new VS(0,0,0,0,d,!0);return b[i]=m,b[i+"2"]=g,b}}}function m5e(n,e,t){var r=n.get("showAllSymbol"),i=r==="auto";if(!(r&&!i)){var a=t.getAxesByScale("ordinal")[0];if(a&&!(i&&g5e(a,e))){var s=e.mapDimension(a.dim),o={};return W(a.getViewLabels(),function(l){var u=a.scale.getRawOrdinalNumber(l.tickValue);o[u]=1}),function(l){return!o.hasOwnProperty(e.get(s,l))}}}}function g5e(n,e){var t=n.getExtent(),r=Math.abs(t[1]-t[0])/n.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),s=0;s<i;s+=a)if(T2.getSymbolSize(e,s)[n.isHorizontal()?1:0]*1.5>r)return!1;return!0}function v5e(n,e){return isNaN(n)||isNaN(e)}function y5e(n){for(var e=n.length/2;e>0&&v5e(n[e*2-2],n[e*2-1]);e--);return e-1}function zJ(n,e){return[n[e*2],n[e*2+1]]}function x5e(n,e,t){for(var r=n.length/2,i=t==="x"?0:1,a,s,o=0,l=-1,u=0;u<r;u++)if(s=n[u*2+i],!(isNaN(s)||isNaN(n[u*2+1-i]))){if(u===0){a=s;continue}if(a<=e&&s>=e||a>=e&&s<=e){l=u;break}o=u,a=s}return{range:[o,l],t:(e-a)/(s-a)}}function ppe(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<yo.length;e++)if(n.get([yo[e],"endLabel","show"]))return!0;return!1}function G4(n,e,t,r){if(wg(e,"cartesian2d")){var i=r.getModel("endLabel"),a=i.get("valueAnimation"),s=r.getData(),o={lastFrameIndex:0},l=ppe(r)?function(f,p){n._endLabelOnDuring(f,p,s,o,a,i,e)}:null,u=e.getBaseAxis().isHorizontal(),c=dpe(e,t,r,function(){var f=n._endLabel;f&&t&&o.originalX!=null&&f.attr({x:o.originalX,y:o.originalY})},l);if(!r.get("clip",!0)){var h=c.shape,d=Math.max(h.width,h.height);u?(h.y-=d,h.height+=d*2):(h.x-=d,h.width+=d*2)}return l&&l(1,c),c}else return fpe(e,t,r)}function _5e(n,e){var t=e.getBaseAxis(),r=t.isHorizontal(),i=t.inverse,a=r?i?"right":"left":"center",s=r?"middle":i?"top":"bottom";return{normal:{align:n.get("align")||a,verticalAlign:n.get("verticalAlign")||s}}}var b5e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new wt,r=new E2;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=t,this._changePolyState=Qe(this._changePolyState,this)},e.prototype.render=function(t,r,i){var a=t.coordinateSystem,s=this.group,o=t.getData(),l=t.getModel("lineStyle"),u=t.getModel("areaStyle"),c=o.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,f=this._symbolDraw,p=this._polyline,m=this._polygon,g=this._lineGroup,v=!r.ssr&&t.get("animation"),b=!u.isEmpty(),S=u.get("origin"),w=lpe(a,o,S),E=b&&d5e(a,o,w),T=t.get("showSymbol"),M=t.get("connectNulls"),P=T&&!h&&m5e(t,o,a),I=this._data;I&&I.eachItemGraphicEl(function(ge,se){ge.__temp&&(s.remove(ge),I.setItemGraphicEl(se,null))}),T||f.remove(),s.add(g);var D=h?!1:t.get("step"),R;a&&a.getArea&&t.get("clip",!0)&&(R=a.getArea(),R.width!=null?(R.x-=.1,R.y-=.1,R.width+=.2,R.height+=.2):R.r0&&(R.r0-=.5,R.r+=.5)),this._clipShapeForSymbol=R;var B=p5e(o,a,i)||o.getVisual("style")[o.getVisual("drawType")];if(!(p&&d.type===a.type&&D===this._step))T&&f.updateData(o,{isIgnore:P,clipShape:R,disableAnimation:!0,getSymbolPoint:function(ge){return[c[ge*2],c[ge*2+1]]}}),v&&this._initSymbolLabelAnimation(o,a,R),D&&(E&&(E=Up(E,c,a,D,M)),c=Up(c,null,a,D,M)),p=this._newPolyline(c),b?m=this._newPolygon(c,E):m&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(t,a,Wy(B)),g.setClipPath(G4(this,a,!0,t));else{b&&!m?m=this._newPolygon(c,E):m&&!b&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(t,a,Wy(B));var k=g.getClipPath();if(k){var V=G4(this,a,!1,t);Vr(k,{shape:V.shape},t)}else g.setClipPath(G4(this,a,!0,t));T&&f.updateData(o,{isIgnore:P,clipShape:R,disableAnimation:!0,getSymbolPoint:function(ge){return[c[ge*2],c[ge*2+1]]}}),(!OJ(this._stackedOnPoints,E)||!OJ(this._points,c))&&(v?this._doUpdateAnimation(o,E,a,i,D,S,M):(D&&(E&&(E=Up(E,c,a,D,M)),c=Up(c,null,a,D,M)),p.setShape({points:c}),m&&m.setShape({points:c,stackedOnPoints:E})))}var G=t.getModel("emphasis"),F=G.get("focus"),X=G.get("blurScope"),j=G.get("disabled");if(p.useStyle(Pt(l.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),ua(p,t,"lineStyle"),p.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var Q=p.getState("emphasis").style;Q.lineWidth=+p.style.lineWidth+1}Ft(p).seriesIndex=t.seriesIndex,Yr(p,F,X,j);var H=UJ(t.get("smooth")),K=t.get("smoothMonotone");if(p.setShape({smooth:H,smoothMonotone:K,connectNulls:M}),m){var te=o.getCalculationInfo("stackedOnSeries"),Y=0;m.useStyle(Pt(u.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:o.getVisual("style").decal})),te&&(Y=UJ(te.get("smooth"))),m.setShape({smooth:H,stackedOnSmooth:Y,smoothMonotone:K,connectNulls:M}),ua(m,t,"areaStyle"),Ft(m).seriesIndex=t.seriesIndex,Yr(m,F,X,j)}var de=this._changePolyState;o.eachItemGraphicEl(function(ge){ge&&(ge.onHoverStateChange=de)}),this._polyline.onHoverStateChange=de,this._data=o,this._coordSys=a,this._stackedOnPoints=E,this._points=c,this._step=D,this._valueOrigin=S,t.get("triggerLineEvent")&&(this.packEventData(t,p),m&&this.packEventData(t,m))},e.prototype.packEventData=function(t,r){Ft(r).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,r,i,a){var s=t.getData(),o=zy(s,a);if(this._changePolyState("emphasis"),!(o instanceof Array)&&o!=null&&o>=0){var l=s.getLayout("points"),u=s.getItemGraphicEl(o);if(!u){var c=l[o*2],h=l[o*2+1];if(isNaN(c)||isNaN(h)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,h))return;var d=t.get("zlevel")||0,f=t.get("z")||0;u=new T2(s,o),u.x=c,u.y=h,u.setZ(d,f);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=d,p.z=f,p.z2=this._polyline.z2+1),u.__temp=!0,s.setItemGraphicEl(o,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else mr.prototype.highlight.call(this,t,r,i,a)},e.prototype.downplay=function(t,r,i,a){var s=t.getData(),o=zy(s,a);if(this._changePolyState("normal"),o!=null&&o>=0){var l=s.getItemGraphicEl(o);l&&(l.__temp?(s.setItemGraphicEl(o,null),this.group.remove(l)):l.downplay())}else mr.prototype.downplay.call(this,t,r,i,a)},e.prototype._changePolyState=function(t){var r=this._polygon;tN(this._polyline,t),r&&tN(r,t)},e.prototype._newPolyline=function(t){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new c5e({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},e.prototype._newPolygon=function(t,r){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new hpe({shape:{points:t,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,r,i){var a,s,o=r.getBaseAxis(),l=o.inverse;r.type==="cartesian2d"?(a=o.isHorizontal(),s=!1):r.type==="polar"&&(a=o.dim==="angle",s=!0);var u=t.hostModel,c=u.get("animationDuration");St(c)&&(c=c(null));var h=u.get("animationDelay")||0,d=St(h)?h(null):h;t.eachItemGraphicEl(function(f,p){var m=f;if(m){var g=[f.x,f.y],v=void 0,b=void 0,S=void 0;if(i)if(s){var w=i,E=r.pointToCoord(g);a?(v=w.startAngle,b=w.endAngle,S=-E[1]/180*Math.PI):(v=w.r0,b=w.r,S=E[0])}else{var T=i;a?(v=T.x,b=T.x+T.width,S=f.x):(v=T.y+T.height,b=T.y,S=f.y)}var M=b===v?0:(S-v)/(b-v);l&&(M=1-M);var P=St(h)?h(p):c*M+d,I=m.getSymbolPath(),D=I.getTextContent();m.attr({scaleX:0,scaleY:0}),m.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:P}),D&&D.animateFrom({style:{opacity:0}},{duration:300,delay:P}),I.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,r,i){var a=t.getModel("endLabel");if(ppe(t)){var s=t.getData(),o=this._polyline,l=s.getLayout("points");if(!l){o.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new On({z2:200}),u.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var c=y5e(l);c>=0&&(Aa(o,ca(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:c,defaultText:function(h,d,f){return f!=null?ope(s,f):uS(s,h)},enableTextSetter:!0},_5e(a,r)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,r,i,a,s,o,l){var u=this._endLabel,c=this._polyline;if(u){t<1&&a.originalX==null&&(a.originalX=u.x,a.originalY=u.y);var h=i.getLayout("points"),d=i.hostModel,f=d.get("connectNulls"),p=o.get("precision"),m=o.get("distance")||0,g=l.getBaseAxis(),v=g.isHorizontal(),b=g.inverse,S=r.shape,w=b?v?S.x:S.y+S.height:v?S.x+S.width:S.y,E=(v?m:0)*(b?-1:1),T=(v?0:-m)*(b?-1:1),M=v?"x":"y",P=x5e(h,w,M),I=P.range,D=I[1]-I[0],R=void 0;if(D>=1){if(D>1&&!f){var B=zJ(h,I[0]);u.attr({x:B[0]+E,y:B[1]+T}),s&&(R=d.getRawValue(I[0]))}else{var B=c.getPointOn(w,M);B&&u.attr({x:B[0]+E,y:B[1]+T});var k=d.getRawValue(I[0]),V=d.getRawValue(I[1]);s&&(R=zce(i,p,k,V,P.t))}a.lastFrameIndex=I[0]}else{var G=t===1||a.lastFrameIndex>0?I[0]:0,B=zJ(h,G);s&&(R=d.getRawValue(G)),u.attr({x:B[0]+E,y:B[1]+T})}if(s){var F=GS(u);typeof F.setLabelText=="function"&&F.setLabelText(R)}}},e.prototype._doUpdateAnimation=function(t,r,i,a,s,o,l){var u=this._polyline,c=this._polygon,h=t.hostModel,d=u5e(this._data,t,this._stackedOnPoints,r,this._coordSys,i,this._valueOrigin),f=d.current,p=d.stackedOnCurrent,m=d.next,g=d.stackedOnNext;if(s&&(p=Up(d.stackedOnCurrent,d.current,i,s,l),f=Up(d.current,null,i,s,l),g=Up(d.stackedOnNext,d.next,i,s,l),m=Up(d.next,null,i,s,l)),FJ(f,m)>3e3||c&&FJ(p,g)>3e3){u.stopAnimation(),u.setShape({points:m}),c&&(c.stopAnimation(),c.setShape({points:m,stackedOnPoints:g}));return}u.shape.__points=d.current,u.shape.points=f;var v={shape:{points:m}};d.current!==f&&(v.shape.__points=d.next),u.stopAnimation(),Vn(u,v,h),c&&(c.setShape({points:f,stackedOnPoints:p}),c.stopAnimation(),Vn(c,{shape:{stackedOnPoints:g}},h),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var b=[],S=d.status,w=0;w<S.length;w++){var E=S[w].cmd;if(E==="="){var T=t.getItemGraphicEl(S[w].idx1);T&&b.push({el:T,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var M=u.shape.__points,P=0;P<b.length;P++){var I=b[P].el,D=b[P].ptIdx*2;I.x=M[D],I.y=M[D+1],I.markRedraw()}})},e.prototype.remove=function(t){var r=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(a,s){a.__temp&&(r.remove(a),i.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e})(mr);function C2(n,e){return{seriesType:n,plan:WS(),reset:function(t){var r=t.getData(),i=t.coordinateSystem,a=t.pipelineContext,s=e||a.large;if(i){var o=Ue(i.dimensions,function(f){return r.mapDimension(f)}).slice(0,2),l=o.length,u=r.getCalculationInfo("stackResultDimension");Sg(r,o[0])&&(o[0]=u),Sg(r,o[1])&&(o[1]=u);var c=r.getStore(),h=r.getDimensionIndex(o[0]),d=r.getDimensionIndex(o[1]);return l&&{progress:function(f,p){for(var m=f.end-f.start,g=s&&zh(m*l),v=[],b=[],S=f.start,w=0;S<f.end;S++){var E=void 0;if(l===1){var T=c.get(h,S);E=i.dataToPoint(T,null,b)}else v[0]=c.get(h,S),v[1]=c.get(d,S),E=i.dataToPoint(v,null,b);s?(g[w++]=E[0],g[w++]=E[1]):p.setItemLayout(S,E.slice())}s&&p.setLayout("points",g)}}}}}}var S5e={average:function(n){for(var e=0,t=0,r=0;r<n.length;r++)isNaN(n[r])||(e+=n[r],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},w5e=function(n){return Math.round(n.length/2)};function mpe(n){return{seriesType:n,reset:function(e,t,r){var i=e.getData(),a=e.get("sampling"),s=e.coordinateSystem,o=i.count();if(o>10&&s.type==="cartesian2d"&&a){var l=s.getBaseAxis(),u=s.getOtherAxis(l),c=l.getExtent(),h=r.getDevicePixelRatio(),d=Math.abs(c[1]-c[0])*(h||1),f=Math.round(o/d);if(isFinite(f)&&f>1){a==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(u.dim),1/f)):a==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(u.dim),1/f));var p=void 0;Ke(a)?p=S5e[a]:St(a)&&(p=a),p&&e.setData(i.downSample(i.mapDimension(u.dim),1/f,p,w5e))}}}}}function T5e(n){n.registerChartView(b5e),n.registerSeriesModel(a5e),n.registerLayout(C2("line",!0)),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),r=e.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,mpe("line"))}var LA=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return lp(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,r,i){var a=this.coordinateSystem;if(a&&a.clampData){var s=a.clampData(t),o=a.dataToPoint(s);if(i)W(a.getAxes(),function(d,f){if(d.type==="category"&&r!=null){var p=d.getTicksCoords(),m=d.getTickModel().get("alignWithLabel"),g=s[f],v=r[f]==="x1"||r[f]==="y1";if(v&&!m&&(g+=1),p.length<2)return;if(p.length===2){o[f]=d.toGlobalCoord(d.getExtent()[v?1:0]);return}for(var b=void 0,S=void 0,w=1,E=0;E<p.length;E++){var T=p[E].coord,M=E===p.length-1?p[E-1].tickValue+w:p[E].tickValue;if(M===g){S=T;break}else if(M<g)b=T;else if(b!=null&&M>g){S=(T+b)/2;break}E===1&&(w=M-p[0].tickValue)}S==null&&(b?b&&(S=p[p.length-1].coord):S=p[0].coord),o[f]=d.toGlobalCoord(S)}});else{var l=this.getData(),u=l.getLayout("offset"),c=l.getLayout("size"),h=a.getBaseAxis().isHorizontal()?0:1;o[h]+=u+c/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",defaultBarGap:"10%"},e})(Cr);Cr.registerClass(LA);var E5e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(){return lp(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>t&&(t=r),t},e.prototype.brushSelector=function(t,r,i){return i.rect(r.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=kg(LA.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:ve.color.primary,borderWidth:2}},realtimeSort:!1}),e})(LA),A5e=(function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n})(),SN=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new A5e},e.prototype.buildPath=function(t,r){var i=r.cx,a=r.cy,s=Math.max(r.r0||0,0),o=Math.max(r.r,0),l=(o-s)*.5,u=s+l,c=r.startAngle,h=r.endAngle,d=r.clockwise,f=Math.PI*2,p=d?h-c<f:c-h<f;p||(c=h-(d?f:-f));var m=Math.cos(c),g=Math.sin(c),v=Math.cos(h),b=Math.sin(h);p?(t.moveTo(m*s+i,g*s+a),t.arc(m*u+i,g*u+a,l,-Math.PI+c,c,!d)):t.moveTo(m*o+i,g*o+a),t.arc(i,a,o,c,h,!d),t.arc(v*u+i,b*u+a,l,h-Math.PI*2,h-Math.PI,!d),s!==0&&t.arc(i,a,s,h,c,d)},e})(vn);function C5e(n,e){e=e||{};var t=e.isRoundCap;return function(r,i,a){var s=i.position;if(!s||s instanceof Array)return KR(r,i,a);var o=n(s),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,h=u.cy,d=u.r,f=u.r0,p=(d+f)/2,m=u.startAngle,g=u.endAngle,v=(m+g)/2,b=t?Math.abs(d-f)/2:0,S=Math.cos,w=Math.sin,E=c+d*S(m),T=h+d*w(m),M="left",P="top";switch(o){case"startArc":E=c+(f-l)*S(v),T=h+(f-l)*w(v),M="center",P="top";break;case"insideStartArc":E=c+(f+l)*S(v),T=h+(f+l)*w(v),M="center",P="bottom";break;case"startAngle":E=c+p*S(m)+XI(m,l+b,!1),T=h+p*w(m)+$I(m,l+b,!1),M="right",P="middle";break;case"insideStartAngle":E=c+p*S(m)+XI(m,-l+b,!1),T=h+p*w(m)+$I(m,-l+b,!1),M="left",P="middle";break;case"middle":E=c+p*S(v),T=h+p*w(v),M="center",P="middle";break;case"endArc":E=c+(d+l)*S(v),T=h+(d+l)*w(v),M="center",P="bottom";break;case"insideEndArc":E=c+(d-l)*S(v),T=h+(d-l)*w(v),M="center",P="top";break;case"endAngle":E=c+p*S(g)+XI(g,l+b,!0),T=h+p*w(g)+$I(g,l+b,!0),M="left",P="middle";break;case"insideEndAngle":E=c+p*S(g)+XI(g,-l+b,!0),T=h+p*w(g)+$I(g,-l+b,!0),M="right",P="middle";break;default:return KR(r,i,a)}return r=r||{},r.x=E,r.y=T,r.align=M,r.verticalAlign=P,r}}function M5e(n,e,t,r){if(Ln(r)){n.setTextConfig({rotation:r});return}else if(Be(e)){n.setTextConfig({rotation:0});return}var i=n.shape,a=i.clockwise?i.startAngle:i.endAngle,s=i.clockwise?i.endAngle:i.startAngle,o=(a+s)/2,l,u=t(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=a;break;case"endAngle":case"insideEndAngle":l=s;break;default:n.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),n.setTextConfig({rotation:c})}function XI(n,e,t){return e*Math.sin(n)*(t?-1:1)}function $I(n,e,t){return e*Math.cos(n)*(t?1:-1)}function Hh(n,e,t){var r=n.get("borderRadius");if(r==null)return t?{cornerRadius:0}:null;Be(r)||(r=[r,r,r,r]);var i=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Ue(r,function(a){return Pc(a,i)})}}var j4=Math.max,W4=Math.min;function D5e(n,e){var t=n.getArea&&n.getArea();if(wg(n,"cartesian2d")){var r=n.getBaseAxis();if(r.type!=="category"||!r.onBand){var i=e.getLayout("bandWidth");r.isHorizontal()?(t.x-=i,t.width+=i*2):(t.y-=i,t.height+=i*2)}}return t}var I5e=(function(n){be(e,n);function e(){var t=n.call(this)||this;return t.type=e.type,t._isFirstFrame=!0,t}return e.prototype.render=function(t,r,i,a){this._model=t,this._removeOnRenderedListener(i),this._updateDrawMode(t);var s=t.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,r,i):this._renderNormal(t,r,i,a))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,r){this._progressiveEls=[],this._incrementalRenderLarge(t,r)},e.prototype.eachRendered=function(t){Ng(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t,r,i,a){var s=this.group,o=t.getData(),l=this._data,u=t.coordinateSystem,c=u.getBaseAxis(),h;u.type==="cartesian2d"?h=c.isHorizontal():u.type==="polar"&&(h=c.dim==="angle");var d=t.isAnimationEnabled()?t:null,f=P5e(t,u);f&&this._enableRealtimeSort(f,o,i);var p=t.get("clip",!0)||f,m=D5e(u,o);s.removeClipPath();var g=t.get("roundCap",!0),v=t.get("showBackground",!0),b=t.getModel("backgroundStyle"),S=b.get("borderRadius")||0,w=[],E=this._backgroundEls,T=a&&a.isInitSort,M=a&&a.type==="changeAxisOrder";function P(R){var B=YI[u.type](o,R);if(!B)return null;var k=F5e(u,h,B);return k.useStyle(b.getItemStyle()),u.type==="cartesian2d"?k.setShape("r",S):k.setShape("cornerRadius",S),w[R]=k,k}o.diff(l).add(function(R){var B=o.getItemModel(R),k=YI[u.type](o,R,B);if(k&&(v&&P(R),!(!o.hasValue(R)||!WJ[u.type](k)))){var V=!1;p&&(V=VJ[u.type](m,k));var G=HJ[u.type](t,o,R,k,h,d,c.model,!1,g);f&&(G.forceLabelAnimation=!0),XJ(G,o,R,B,k,t,h,u.type==="polar"),T?G.attr({shape:k}):f?GJ(f,d,G,k,R,h,!1,!1):Vr(G,{shape:k},t,R),o.setItemGraphicEl(R,G),s.add(G),G.ignore=V}}).update(function(R,B){var k=o.getItemModel(R),V=YI[u.type](o,R,k);if(V){if(v){var G=void 0;E.length===0?G=P(B):(G=E[B],G.useStyle(b.getItemStyle()),u.type==="cartesian2d"?G.setShape("r",S):G.setShape("cornerRadius",S),w[R]=G);var F=YI[u.type](o,R),X=vpe(h,F,u);Vn(G,{shape:X},d,R)}var j=l.getItemGraphicEl(B);if(!o.hasValue(R)||!WJ[u.type](V)){s.remove(j);return}var Q=!1;p&&(Q=VJ[u.type](m,V),Q&&s.remove(j));var H=j&&(j.type==="sector"&&g||j.type==="sausage"&&!g);if(H&&(j&&Nf(j,t,B),j=null),j?ku(j):j=HJ[u.type](t,o,R,V,h,d,c.model,!0,g),f&&(j.forceLabelAnimation=!0),M){var K=j.getTextContent();if(K){var te=GS(K);te.prevValue!=null&&(te.prevValue=te.value)}}else XJ(j,o,R,k,V,t,h,u.type==="polar");T?j.attr({shape:V}):f?GJ(f,d,j,V,R,h,!0,M):Vn(j,{shape:V},t,R,null),o.setItemGraphicEl(R,j),j.ignore=Q,s.add(j)}}).remove(function(R){var B=l.getItemGraphicEl(R);B&&Nf(B,t,R)}).execute();var I=this._backgroundGroup||(this._backgroundGroup=new wt);I.removeAll();for(var D=0;D<w.length;++D)I.add(w[D]);s.add(I),this._backgroundEls=w,this._data=o},e.prototype._renderLarge=function(t,r,i){this._clear(),YJ(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,r){this._removeBackground(),YJ(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var r=t.get("clip",!0)&&A2(t.coordinateSystem,!1,t),i=this.group;r?i.setClipPath(r):i.removeClipPath()},e.prototype._enableRealtimeSort=function(t,r,i){var a=this;if(r.count()){var s=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,t,i),this._isFirstFrame=!1;else{var o=function(l){var u=r.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(s.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){a._updateSortWithinSameData(r,o,s,i)},i.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,r,i){var a=[];return t.each(t.mapDimension(r.dim),function(s,o){var l=i(o);l=l??NaN,a.push({dataIndex:o,mappedValue:l,ordinalNumber:s})}),a.sort(function(s,o){return o.mappedValue-s.mappedValue}),{ordinalNumbers:Ue(a,function(s){return s.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(t,r,i){for(var a=i.scale,s=t.mapDimension(i.dim),o=Number.MAX_VALUE,l=0,u=a.getOrdinalMeta().categories.length;l<u;++l){var c=t.rawIndexOf(s,a.getRawOrdinalNumber(l)),h=c<0?Number.MIN_VALUE:r(t.indexOfRawIndex(c));if(h>o)return!0;o=h}return!1},e.prototype._isOrderDifferentInView=function(t,r){for(var i=r.scale,a=i.getExtent(),s=Math.max(0,a[0]),o=Math.min(a[1],i.getOrdinalMeta().categories.length-1);s<=o;++s)if(t.ordinalNumbers[s]!==i.getRawOrdinalNumber(s))return!0},e.prototype._updateSortWithinSameData=function(t,r,i,a){if(this._isOrderChangedWithinSameData(t,r,i)){var s=this._dataSort(t,i,r);this._isOrderDifferentInView(s,i)&&(this._removeOnRenderedListener(a),a.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:s}))}},e.prototype._dispatchInitSort=function(t,r,i){var a=r.baseAxis,s=this._dataSort(t,a,function(o){return t.get(t.mapDimension(r.otherAxis.dim),o)});i.dispatchAction({type:"changeAxisOrder",componentType:a.dim+"Axis",isInitSort:!0,axisId:a.index,sortInfo:s})},e.prototype.remove=function(t,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(t,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var r=this.group,i=this._data;t&&t.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(a){Nf(a,t,Ft(a).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e})(mr),VJ={cartesian2d:function(n,e){var t=e.width<0?-1:1,r=e.height<0?-1:1;t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var i=n.x+n.width,a=n.y+n.height,s=j4(e.x,n.x),o=W4(e.x+e.width,i),l=j4(e.y,n.y),u=W4(e.y+e.height,a),c=o<s,h=u<l;return e.x=c&&s>i?o:s,e.y=h&&l>a?u:l,e.width=c?0:o-s,e.height=h?0:u-l,t<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),c||h},polar:function(n,e){var t=e.r0<=e.r?1:-1;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}var i=W4(e.r,n.r),a=j4(e.r0,n.r0);e.r=i,e.r0=a;var s=i-a<0;if(t<0){var r=e.r;e.r=e.r0,e.r0=r}return s}},HJ={cartesian2d:function(n,e,t,r,i,a,s,o,l){var u=new fn({shape:Pe({},r),z2:1});if(u.__dataIndex=t,u.name="item",a){var c=u.shape,h=i?"height":"width";c[h]=0}return u},polar:function(n,e,t,r,i,a,s,o,l){var u=!i&&l?SN:zs,c=new u({shape:r,z2:1});c.name="item";var h=gpe(i);if(c.calculateTextPosition=C5e(h,{isRoundCap:u===SN}),a){var d=c.shape,f=i?"r":"endAngle",p={};d[f]=i?r.r0:r.startAngle,p[f]=r[f],(o?Vn:Vr)(c,{shape:p},a)}return c}};function P5e(n,e){var t=n.get("realtimeSort",!0),r=e.getBaseAxis();if(t&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function GJ(n,e,t,r,i,a,s,o){var l,u;a?(u={x:r.x,width:r.width},l={y:r.y,height:r.height}):(u={y:r.y,height:r.height},l={x:r.x,width:r.width}),o||(s?Vn:Vr)(t,{shape:l},e,i,null);var c=e?n.baseAxis.model:null;(s?Vn:Vr)(t,{shape:u},c,i)}function jJ(n,e){for(var t=0;t<e.length;t++)if(!isFinite(n[e[t]]))return!0;return!1}var L5e=["x","y","width","height"],R5e=["cx","cy","r","startAngle","endAngle"],WJ={cartesian2d:function(n){return!jJ(n,L5e)},polar:function(n){return!jJ(n,R5e)}},YI={cartesian2d:function(n,e,t){var r=n.getItemLayout(e);if(!r)return null;var i=t?k5e(t,r):0,a=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+s*i/2,width:r.width-a*i,height:r.height-s*i}},polar:function(n,e,t){var r=n.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function N5e(n){return n.startAngle!=null&&n.endAngle!=null&&n.startAngle===n.endAngle}function gpe(n){return(function(e){var t=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+t;default:return r}}})(n)}function XJ(n,e,t,r,i,a,s,o){var l=e.getItemVisual(t,"style");if(o){if(!a.get("roundCap")){var c=n.shape,h=Hh(r.getModel("itemStyle"),c,!0);Pe(c,h),n.setShape(c)}}else{var u=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",u)}n.useStyle(l);var d=r.getShallow("cursor");d&&n.attr("cursor",d);var f=o?s?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":s?i.height>=0?"bottom":"top":i.width>=0?"right":"left",p=ca(r);Aa(n,p,{labelFetcher:a,labelDataIndex:t,defaultText:uS(a.getData(),t),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:f});var m=n.getTextContent();if(o&&m){var g=r.get(["label","position"]);n.textConfig.inside=g==="middle"?!0:null,M5e(n,g==="outside"?f:g,gpe(s),r.get(["label","rotate"]))}Ahe(m,p,a.getRawValue(t),function(b){return ope(e,b)});var v=r.getModel(["emphasis"]);Yr(n,v.get("focus"),v.get("blurScope"),v.get("disabled")),ua(n,r),N5e(i)&&(n.style.fill="none",n.style.stroke="none",W(n.states,function(b){b.style&&(b.style.fill=b.style.stroke="none")}))}function k5e(n,e){var t=n.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var r=n.get(["itemStyle","borderWidth"])||0,i=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),a=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,i,a)}var O5e=(function(){function n(){}return n})(),$J=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new O5e},e.prototype.buildPath=function(t,r){for(var i=r.points,a=this.baseDimIdx,s=1-this.baseDimIdx,o=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[a]=u,l[s]=i[c+2],o[a]=i[c+a],o[s]=i[c+s],t.rect(o[0],o[1],l[0],l[1])},e})(vn);function YJ(n,e,t,r){var i=n.getData(),a=i.getLayout("valueAxisHorizontal")?1:0,s=i.getLayout("largeDataIndices"),o=i.getLayout("size"),l=n.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new $J({shape:{points:u},incremental:!!r,silent:!0,z2:0});c.baseDimIdx=a,c.largeDataIndices=s,c.barWidth=o,c.useStyle(l.getItemStyle()),e.add(c),t&&t.push(c)}var h=new $J({shape:{points:i.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=a,h.largeDataIndices=s,h.barWidth=o,e.add(h),h.useStyle(i.getVisual("style")),h.style.stroke=null,Ft(h).seriesIndex=n.seriesIndex,n.get("silent")||(h.on("mousedown",qJ),h.on("mousemove",qJ)),t&&t.push(h)}var qJ=Rj(function(n){var e=this,t=B5e(e,n.offsetX,n.offsetY);Ft(e).dataIndex=t>=0?t:null},30,!1);function B5e(n,e,t){for(var r=n.baseDimIdx,i=1-r,a=n.shape.points,s=n.largeDataIndices,o=[],l=[],u=n.barWidth,c=0,h=a.length/3;c<h;c++){var d=c*3;if(l[r]=u,l[i]=a[d+2],o[r]=a[d+r],o[i]=a[d+i],l[i]<0&&(o[i]+=l[i],l[i]=-l[i]),e>=o[0]&&e<=o[0]+l[0]&&t>=o[1]&&t<=o[1]+l[1])return s[c]}return-1}function vpe(n,e,t){if(wg(t,"cartesian2d")){var r=e,i=t.getArea();return{x:n?r.x:i.x,y:n?i.y:r.y,width:n?r.width:i.width,height:n?i.height:r.height}}else{var i=t.getArea(),a=e;return{cx:i.cx,cy:i.cy,r0:n?i.r0:a.r0,r:n?i.r:a.r,startAngle:n?a.startAngle:0,endAngle:n?a.endAngle:Math.PI*2}}}function F5e(n,e,t){var r=n.type==="polar"?zs:fn;return new r({shape:vpe(e,t,n),silent:!0,z2:0})}function U5e(n){n.registerChartView(I5e),n.registerSeriesModel(E5e),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Qt(_fe,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,bfe("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,mpe("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,t){var r=e.componentType||"series";t.eachComponent({mainType:r,query:e},function(i){e.sortInfo&&i.axis.setCategorySortInfo(e.sortInfo)})})}var KJ=Math.PI*2,qI=Math.PI/180;function z5e(n,e,t){e.eachSeriesByType(n,function(r){var i=r.getData(),a=i.mapDimension("value"),s=$he(r,t),o=s.cx,l=s.cy,u=s.r,c=s.r0,h=s.viewRect,d=-r.get("startAngle")*qI,f=r.get("endAngle"),p=r.get("padAngle")*qI;f=f==="auto"?d-KJ:-f*qI;var m=r.get("minAngle")*qI,g=m+p,v=0;i.each(a,function(X){!isNaN(X)&&v++});var b=i.getSum(a),S=Math.PI/(b||v)*2,w=r.get("clockwise"),E=r.get("roseType"),T=r.get("stillShowZeroSum"),M=i.getDataExtent(a);M[0]=0;var P=w?1:-1,I=[d,f],D=P*p/2;s3(I,!w),d=I[0],f=I[1];var R=ype(r);R.startAngle=d,R.endAngle=f,R.clockwise=w,R.cx=o,R.cy=l,R.r=u,R.r0=c;var B=Math.abs(f-d),k=B,V=0,G=d;if(i.setLayout({viewRect:h,r:u}),i.each(a,function(X,j){var Q;if(isNaN(X)){i.setItemLayout(j,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:w,cx:o,cy:l,r0:c,r:E?NaN:u});return}E!=="area"?Q=b===0&&T?S:X*S:Q=B/v,Q<g?(Q=g,k-=g):V+=X;var H=G+P*Q,K=0,te=0;p>Q?(K=G+P*Q/2,te=K):(K=G+D,te=H-D),i.setItemLayout(j,{angle:Q,startAngle:K,endAngle:te,clockwise:w,cx:o,cy:l,r0:c,r:E?Jn(X,M,[c,u]):u}),G=H}),k<KJ&&v)if(k<=.001){var F=B/v;i.each(a,function(X,j){if(!isNaN(X)){var Q=i.getItemLayout(j);Q.angle=F;var H=0,K=0;F<p?(H=d+P*(j+1/2)*F,K=H):(H=d+P*j*F+D,K=d+P*(j+1)*F-D),Q.startAngle=H,Q.endAngle=K}})}else S=k/V,G=d,i.each(a,function(X,j){if(!isNaN(X)){var Q=i.getItemLayout(j),H=Q.angle===g?g:X*S,K=0,te=0;H<p?(K=G+P*H/2,te=K):(K=G+D,te=G+P*H-D),Q.startAngle=K,Q.endAngle=te,G+=P*H}})})}var ype=mn();function qS(n){return{seriesType:n,reset:function(e,t){var r=t.findComponents({mainType:"legend"});if(!(!r||!r.length)){var i=e.getData();i.filterSelf(function(a){for(var s=i.getName(a),o=0;o<r.length;o++)if(!r[o].isSelected(s))return!1;return!0})}}}}var V5e=Math.PI/180;function ZJ(n,e,t,r,i,a,s,o,l,u){if(n.length<2)return;function c(m){for(var g=m.rB,v=g*g,b=0;b<m.list.length;b++){var S=m.list[b],w=Math.abs(S.label.y-t),E=r+S.len,T=E*E,M=Math.sqrt(Math.abs((1-w*w/v)*T)),P=e+(M+S.len2)*i,I=P-S.label.x,D=S.targetTextWidth-I*i;xpe(S,D,!0),S.label.x=P}}function h(m){for(var g={list:[],maxY:0},v={list:[],maxY:0},b=0;b<m.length;b++)if(m[b].labelAlignTo==="none"){var S=m[b],w=S.label.y>t?v:g,E=Math.abs(S.label.y-t);if(E>=w.maxY){var T=S.label.x-e-S.len2*i,M=r+S.len,P=Math.abs(T)<M?Math.sqrt(E*E/(1-T*T/M/M)):M;w.rB=P,w.maxY=E}w.list.push(S)}c(g),c(v)}for(var d=n.length,f=0;f<d;f++)if(n[f].position==="outer"&&n[f].labelAlignTo==="labelLine"){var p=n[f].label.x-u;n[f].linePoints[1][0]+=p,n[f].label.x=u}i8(n,1,l,l+s)&&h(n)}function H5e(n,e,t,r,i,a,s,o){for(var l=[],u=[],c=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<n.length;d++){var f=n[d].label;X4(n[d])||(f.x<e?(c=Math.min(c,f.x),l.push(n[d])):(h=Math.max(h,f.x),u.push(n[d])))}for(var d=0;d<n.length;d++){var p=n[d];if(!X4(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var f=p.label,m=p.linePoints,g=void 0;p.labelAlignTo==="edge"?f.x<e?g=m[2][0]-p.labelDistance-s-p.edgeDistance:g=s+i-p.edgeDistance-m[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?f.x<e?g=c-s-p.bleedMargin:g=s+i-h-p.bleedMargin:f.x<e?g=f.x-s-p.bleedMargin:g=s+i-f.x-p.bleedMargin,p.targetTextWidth=g,xpe(p,g,!1)}}ZJ(u,e,t,r,1,i,a,s,o,h),ZJ(l,e,t,r,-1,i,a,s,o,c);for(var d=0;d<n.length;d++){var p=n[d];if(!X4(p)&&p.linePoints){var f=p.label,m=p.linePoints,v=p.labelAlignTo==="edge",b=f.style.padding,S=b?b[1]+b[3]:0,w=f.style.backgroundColor?0:S,E=p.rect.width+w,T=m[1][0]-m[2][0];v?f.x<e?m[2][0]=s+p.edgeDistance+E+p.labelDistance:m[2][0]=s+i-p.edgeDistance-E-p.labelDistance:(f.x<e?m[2][0]=f.x+p.labelDistance:m[2][0]=f.x-p.labelDistance,m[1][0]=m[2][0]+T),m[1][1]=m[2][1]=f.y}}}function xpe(n,e,t){if(n.labelStyleWidth==null){var r=n.label,i=r.style,a=n.rect,s=i.backgroundColor,o=i.padding,l=o?o[1]+o[3]:0,u=i.overflow,c=a.width+(s?0:l);if(e<c||t){if(u&&u.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",e-l);var h=r.getBoundingRect();r.setStyle("width",Math.ceil(h.width)),r.setStyle("backgroundColor",s)}else{var d=e-l,f=e<c?d:t?d>n.unconstrainedWidth?null:d:null;r.setStyle("width",f)}_pe(a,r)}}}function _pe(n,e){QJ.rect=n,jfe(QJ,e,G5e)}var G5e={minMarginForce:[null,0,null,0],marginDefault:[1,0,1,0]},QJ={};function X4(n){return n.position==="center"}function j5e(n){var e=n.getData(),t=[],r,i,a=!1,s=(n.get("minShowLabelAngle")||0)*V5e,o=e.getLayout("viewRect"),l=e.getLayout("r"),u=o.width,c=o.x,h=o.y,d=o.height;function f(T){T.ignore=!0}function p(T){if(!T.ignore)return!0;for(var M in T.states)if(T.states[M].ignore===!1)return!0;return!1}e.each(function(T){var M=e.getItemGraphicEl(T),P=M.shape,I=M.getTextContent(),D=M.getTextGuideLine(),R=e.getItemModel(T),B=R.getModel("label"),k=B.get("position")||R.get(["emphasis","label","position"]),V=B.get("distanceToLabelLine"),G=B.get("alignTo"),F=Xe(B.get("edgeDistance"),u),X=B.get("bleedMargin");X==null&&(X=Math.min(u,d)>200?10:2);var j=R.getModel("labelLine"),Q=j.get("length");Q=Xe(Q,u);var H=j.get("length2");if(H=Xe(H,u),Math.abs(P.endAngle-P.startAngle)<s){W(I.states,f),I.ignore=!0,D&&(W(D.states,f),D.ignore=!0);return}if(p(I)){var K=(P.startAngle+P.endAngle)/2,te=Math.cos(K),Y=Math.sin(K),de,ge,se,he;r=P.cx,i=P.cy;var fe=k==="inside"||k==="inner";if(k==="center")de=P.cx,ge=P.cy,he="center";else{var Ee=(fe?(P.r+P.r0)/2*te:P.r*te)+r,Ce=(fe?(P.r+P.r0)/2*Y:P.r*Y)+i;if(de=Ee+te*3,ge=Ce+Y*3,!fe){var Re=Ee+te*(Q+l-P.r),He=Ce+Y*(Q+l-P.r),pt=Re+(te<0?-1:1)*H,lt=He;G==="edge"?de=te<0?c+F:c+u-F:de=pt+(te<0?-V:V),ge=lt,se=[[Ee,Ce],[Re,He],[pt,lt]]}he=fe?"center":G==="edge"?te>0?"right":"left":te>0?"left":"right"}var Mt=Math.PI,mt=0,on=B.get("rotate");if(Ln(on))mt=on*(Mt/180);else if(k==="center")mt=0;else if(on==="radial"||on===!0){var ce=te<0?-K+Mt:-K;mt=ce}else if(on==="tangential"&&k!=="outside"&&k!=="outer"){var ln=Math.atan2(te,Y);ln<0&&(ln=Mt*2+ln);var gn=Y>0;gn&&(ln=Mt+ln),mt=ln-Mt}if(a=!!mt,I.x=de,I.y=ge,I.rotation=mt,I.setStyle({verticalAlign:"middle"}),fe){I.setStyle({align:he});var ht=I.states.select;ht&&(ht.x+=I.x,ht.y+=I.y)}else{var Cn=new Rt(0,0,0,0);_pe(Cn,I),t.push({label:I,labelLine:D,position:k,len:Q,len2:H,minTurnAngle:j.get("minTurnAngle"),maxSurfaceAngle:j.get("maxSurfaceAngle"),surfaceNormal:new Ct(te,Y),linePoints:se,textAlign:he,labelDistance:V,labelAlignTo:G,edgeDistance:F,bleedMargin:X,rect:Cn,unconstrainedWidth:Cn.width,labelStyleWidth:I.style.width})}M.setTextConfig({inside:fe})}}),!a&&n.get("avoidLabelOverlap")&&H5e(t,r,i,l,u,d,c,h);for(var m=0;m<t.length;m++){var g=t[m],v=g.label,b=g.labelLine,S=isNaN(v.x)||isNaN(v.y);if(v){v.setStyle({align:g.textAlign}),S&&(W(v.states,f),v.ignore=!0);var w=v.states.select;w&&(w.x+=v.x,w.y+=v.y)}if(b){var E=g.linePoints;S||!E?(W(b.states,f),b.ignore=!0):(Vfe(E,g.minTurnAngle),c4e(E,g.surfaceNormal,g.maxSurfaceAngle),b.setShape({points:E}),v.__hostTarget.textGuideLineConfig={anchor:new Ct(E[0][0],E[0][1])})}}}var W5e=(function(n){be(e,n);function e(t,r,i){var a=n.call(this)||this;a.z2=2;var s=new On;return a.setTextContent(s),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var s=this,o=t.hostModel,l=t.getItemModel(r),u=l.getModel("emphasis"),c=t.getItemLayout(r),h=Pe(Hh(l.getModel("itemStyle"),c,!0),c);if(isNaN(h.startAngle)){s.setShape(h);return}if(a){s.setShape(h);var d=o.getShallow("animationType");o.ecModel.ssr?(Vr(s,{scaleX:0,scaleY:0},o,{dataIndex:r,isFrom:!0}),s.originX=h.cx,s.originY=h.cy):d==="scale"?(s.shape.r=c.r0,Vr(s,{shape:{r:c.r}},o,r)):i!=null?(s.setShape({startAngle:i,endAngle:i}),Vr(s,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},o,r)):(s.shape.endAngle=c.startAngle,Vn(s,{shape:{endAngle:c.endAngle}},o,r))}else ku(s),Vn(s,{shape:h},o,r);s.useStyle(t.getItemVisual(r,"style")),ua(s,l);var f=(c.startAngle+c.endAngle)/2,p=o.get("selectedOffset"),m=Math.cos(f)*p,g=Math.sin(f)*p,v=l.getShallow("cursor");v&&s.attr("cursor",v),this._updateLabel(o,t,r),s.ensureState("emphasis").shape=Pe({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},Hh(u.getModel("itemStyle"),c)),Pe(s.ensureState("select"),{x:m,y:g,shape:Hh(l.getModel(["select","itemStyle"]),c)}),Pe(s.ensureState("blur"),{shape:Hh(l.getModel(["blur","itemStyle"]),c)});var b=s.getTextGuideLine(),S=s.getTextContent();b&&Pe(b.ensureState("select"),{x:m,y:g}),Pe(S.ensureState("select"),{x:m,y:g}),Yr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this,s=r.getItemModel(i),o=s.getModel("labelLine"),l=r.getItemVisual(i,"style"),u=l&&l.fill,c=l&&l.opacity;Aa(a,ca(s),{labelFetcher:r.hostModel,labelDataIndex:i,inheritColor:u,defaultOpacity:c,defaultText:t.getFormattedLabel(i,"normal")||r.getName(i)});var h=a.getTextContent();a.setTextConfig({position:null,rotation:null}),h.attr({z2:10});var d=s.get(["label","position"]);if(d!=="outside"&&d!=="outer")a.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new gs,this.setTextGuideLine(f)),Xj(this,$j(s),{stroke:u,opacity:Ll(o.get(["lineStyle","opacity"]),c,1)})}},e})(zs),X5e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i,a){var s=t.getData(),o=this._data,l=this.group,u;if(!o&&s.count()>0){for(var c=s.getItemLayout(0),h=1;isNaN(c&&c.startAngle)&&h<s.count();++h)c=s.getItemLayout(h);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),s.count()===0&&t.get("showEmptyCircle")){var d=ype(t),f=new zs({shape:Tt(d)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}s.diff(o).add(function(p){var m=new W5e(s,p,u);s.setItemGraphicEl(p,m),l.add(m)}).update(function(p,m){var g=o.getItemGraphicEl(m);g.updateData(s,p,u),g.off("click"),l.add(g),s.setItemGraphicEl(p,g)}).remove(function(p){var m=o.getItemGraphicEl(p);Nf(m,t,p)}).execute(),j5e(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=s)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var s=t[0]-a.cx,o=t[1]-a.cy,l=Math.sqrt(s*s+o*o);return l<=a.r&&l>=a.r0}},e.type="pie",e})(mr);function KS(n,e,t){e=Be(e)&&{coordDimensions:e}||Pe({encodeDefine:n.getEncode()},e);var r=n.getSource(),i=S2(r,e).dimensions,a=new mo(i,n);return a.initData(r,t),a}var ZS=(function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var r=this._getDataWithEncodedVisual();return r.getItemVisual(e,t)},n})(),$5e=mn(),bpe=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new ZS(Qe(this.getData,this),Qe(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return KS(this,{coordDimensions:["value"],encodeDefaulter:Qt(Ej,this)})},e.prototype.getDataParams=function(t){var r=this.getData(),i=$5e(r),a=i.seats;if(!a){var s=[];r.each(r.mapDimension("value"),function(l){s.push(l)}),a=i.seats=gRe(s,r.hostModel.get("percentPrecision"))}var o=n.prototype.getDataParams.call(this,t);return o.percent=a[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){Uy(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"50%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,coordinateSystemUsage:"box",left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:30,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e})(Cr);r3e({fullType:bpe.type,getCoord2:function(n){return n.getShallow("center")}});function Y5e(n){return{seriesType:n,reset:function(e,t){var r=e.getData();r.filterSelf(function(i){var a=r.mapDimension("value"),s=r.get(a,i);return!(Ln(s)&&!isNaN(s)&&s<0)})}}}function q5e(n){n.registerChartView(X5e),n.registerSeriesModel(bpe),Fde("pie",n.registerAction),n.registerLayout(Qt(z5e,"pie")),n.registerProcessor(qS("pie")),n.registerProcessor(Y5e("pie"))}var K5e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return lp(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:ve.color.primary}},universalTransition:{divideShape:"clone"}},e})(Cr),Spe=4,Z5e=(function(){function n(){}return n})(),Q5e=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.getDefaultShape=function(){return new Z5e},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,r){var i=r.points,a=r.size,s=this.symbolProxy,o=s.shape,l=t.getContext?t.getContext():t,u=l&&a[0]<Spe,c=this.softClipShape,h;if(u){this._ctx=l;return}for(this._ctx=null,h=this._off;h<i.length;){var d=i[h++],f=i[h++];isNaN(d)||isNaN(f)||c&&!c.contain(d,f)||(o.x=d-a[0]/2,o.y=f-a[1]/2,o.width=a[0],o.height=a[1],s.buildPath(t,o,!0))}this.incremental&&(this._off=h,this.notClear=!0)},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,i=t.size,a=this._ctx,s=this.softClipShape,o;if(a){for(o=this._off;o<r.length;){var l=r[o++],u=r[o++];isNaN(l)||isNaN(u)||s&&!s.contain(l,u)||a.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=o,this.notClear=!0)}},e.prototype.findDataIndex=function(t,r){for(var i=this.shape,a=i.points,s=i.size,o=Math.max(s[0],4),l=Math.max(s[1],4),u=a.length/2-1;u>=0;u--){var c=u*2,h=a[c]-o/2,d=a[c+1]-l/2;if(t>=h&&r>=d&&t<=h+o&&r<=d+l)return u}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var s=this.hoverDataIdx=this.findDataIndex(t,r);return s>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.points,a=r.size,s=a[0],o=a[1],l=1/0,u=1/0,c=-1/0,h=-1/0,d=0;d<i.length;){var f=i[d++],p=i[d++];l=Math.min(f,l),c=Math.max(f,c),u=Math.min(p,u),h=Math.max(p,h)}t=this._rect=new Rt(l-s/2,u-o/2,c-l+s,h-u+o)}return t},e})(vn),J5e=(function(){function n(){this.group=new wt}return n.prototype.updateData=function(e,t){this._clear();var r=this._create();r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,t)},n.prototype.updateLayout=function(e){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var i=(r.endIndex-r.startIndex)*2,a=r.startIndex*4*2;t=new Float32Array(t.buffer,a,i)}r.setShape("points",t),r.reset()})},n.prototype.incrementalPrepareUpdate=function(e){this._clear()},n.prototype.incrementalUpdate=function(e,t,r){var i=this._newAdded[0],a=t.getLayout("points"),s=i&&i.shape.points;if(s&&s.length<2e4){var o=s.length,l=new Float32Array(o+a.length);l.set(s),l.set(a,o),i.endIndex=e.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=e.start,u.endIndex=e.end,u.incremental=!0,u.setShape({points:a}),this._setCommon(u,t,r)}},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new Q5e({cursor:"default"});return e.ignoreCoarsePointer=!0,this.group.add(e),this._newAdded.push(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;r=r||{};var a=t.getVisual("symbolSize");e.setShape("size",a instanceof Array?a:[a,a]),e.softClipShape=r.clipShape||null,e.symbolProxy=Ki(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var s=e.shape.size[0]<Spe;e.useStyle(i.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var o=t.getVisual("style"),l=o&&o.fill;l&&e.setColor(l);var u=Ft(e);u.seriesIndex=i.seriesIndex,e.on("mousemove",function(c){u.dataIndex=null;var h=e.hoverDataIdx;h>=0&&(u.dataIndex=h+(e.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n})(),e6e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),s=this._updateSymbolDraw(a,t);s.updateData(a,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),s=this._updateSymbolDraw(a,t);s.incrementalPrepareUpdate(a),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,i){var a=t.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var s=C2("").reset(t,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var r=t.coordinateSystem;return r&&r.getArea&&r.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,r){var i=this._symbolDraw,a=r.pipelineContext,s=a.large;return(!i||s!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=s?new J5e:new E2,this._isLargeDraw=s,this.group.removeAll()),this.group.add(i.group),i},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e})(mr),wpe={left:0,right:0,top:0,bottom:0},wN=["25%","25%"],t6e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.mergeDefaultAndTheme=function(t,r){var i=sx(t.outerBounds);n.prototype.mergeDefaultAndTheme.apply(this,arguments),i&&t.outerBounds&&id(t.outerBounds,i)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.apply(this,arguments),this.option.outerBounds&&t.outerBounds&&id(this.option.outerBounds,t.outerBounds)},e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"15%",top:65,right:"10%",bottom:80,containLabel:!1,outerBoundsMode:"auto",outerBounds:wpe,outerBoundsContain:"all",outerBoundsClampWidth:wN[0],outerBoundsClampHeight:wN[1],backgroundColor:ve.color.transparent,borderWidth:1,borderColor:ve.color.neutral30},e})(_n),u8=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",fi).models[0]},e.type="cartesian2dAxis",e})(_n);Zi(u8,w2);var Tpe={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:ve.color.axisLine,width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15],breakLine:!0},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12,color:ve.color.axisLabel,textMargin:[0,3]},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:ve.color.axisSplitLine,width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:[ve.color.backgroundTint,ve.color.backgroundTransparent]}},breakArea:{show:!0,itemStyle:{color:ve.color.neutral00,borderColor:ve.color.border,borderWidth:1,borderType:[3,3],opacity:.6},zigzagAmplitude:4,zigzagMinSpan:4,zigzagMaxSpan:20,zigzagZ:100,expandOnClick:!0},breakLabelLayout:{moveOverlap:"auto"}},n6e=en({boundaryGap:!0,deduplication:null,jitter:0,jitterOverlap:!0,jitterMargin:2,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto",show:"auto"},axisLabel:{interval:"auto"}},Tpe),e7=en({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:ve.color.axisMinorSplitLine,width:1}}},Tpe),r6e=en({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},e7),i6e=Pt({logBase:10},e7);const Epe={category:n6e,value:e7,time:r6e,log:i6e};var a6e={value:1,category:1,time:1,log:1},c8=null;function s6e(n){c8||(c8=n)}function M2(){return c8}function cS(n,e,t,r){W(a6e,function(i,a){var s=en(en({},Epe[a],!0),r,!0),o=(function(l){be(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=e+"Axis."+a,c}return u.prototype.mergeDefaultAndTheme=function(c,h){var d=SA(this),f=d?sx(c):{},p=h.getTheme();en(c,p.get(a+"Axis")),en(c,this.getDefaultOption()),c.type=JJ(c),d&&id(c,f,d)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=MA.createByAxisModel(this))},u.prototype.getCategories=function(c){var h=this.option;if(h.type==="category")return c?h.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.prototype.updateAxisBreaks=function(c){var h=M2();return h?h.updateModelAxisBreak(this,c):{breaks:[]}},u.type=e+"Axis."+a,u.defaultOption=s,u})(t);n.registerComponentModel(o)}),n.registerSubTypeDefaulter(e+"Axis",JJ)}function JJ(n){return n.type||(n.data?"category":"value")}var o6e=(function(){function n(e){this.type="cartesian",this._dimList=[],this._axes={},this.name=e||""}return n.prototype.getAxis=function(e){return this._axes[e]},n.prototype.getAxes=function(){return Ue(this._dimList,function(e){return this._axes[e]},this)},n.prototype.getAxesByScale=function(e){return e=e.toLowerCase(),er(this.getAxes(),function(t){return t.scale.type===e})},n.prototype.addAxis=function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},n})(),h8=["x","y"];function eee(n){return(n.type==="interval"||n.type==="time")&&!n.hasBreaks()}var l6e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="cartesian2d",t.dimensions=h8,t}return e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,r=this.getAxis("y").scale;if(!(!eee(t)||!eee(r))){var i=t.getExtent(),a=r.getExtent(),s=this.dataToPoint([i[0],a[0]]),o=this.dataToPoint([i[1],a[1]]),l=i[1]-i[0],u=a[1]-a[0];if(!(!l||!u)){var c=(o[0]-s[0])/l,h=(o[1]-s[1])/u,d=s[0]-i[0]*c,f=s[1]-a[0]*h,p=this._transform=[c,0,0,h,d,f];this._invTransform=Ic([],p)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var r=this.getAxis("x"),i=this.getAxis("y");return r.contain(r.toLocalCoord(t[0]))&&i.contain(i.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,r){var i=this.dataToPoint(t),a=this.dataToPoint(r),s=this.getArea(),o=new Rt(i[0],i[1],a[0]-i[0],a[1]-i[1]);return s.intersect(o)},e.prototype.dataToPoint=function(t,r,i){i=i||[];var a=t[0],s=t[1];if(this._transform&&a!=null&&isFinite(a)&&s!=null&&isFinite(s))return Oi(i,t,this._transform);var o=this.getAxis("x"),l=this.getAxis("y");return i[0]=o.toGlobalCoord(o.dataToCoord(a,r)),i[1]=l.toGlobalCoord(l.dataToCoord(s,r)),i},e.prototype.clampData=function(t,r){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,s=i.getExtent(),o=a.getExtent(),l=i.parse(t[0]),u=a.parse(t[1]);return r=r||[],r[0]=Math.min(Math.max(Math.min(s[0],s[1]),l),Math.max(s[0],s[1])),r[1]=Math.min(Math.max(Math.min(o[0],o[1]),u),Math.max(o[0],o[1])),r},e.prototype.pointToData=function(t,r,i){if(i=i||[],this._invTransform)return Oi(i,t,this._invTransform);var a=this.getAxis("x"),s=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(t[0]),r),i[1]=s.coordToData(s.toLocalCoord(t[1]),r),i},e.prototype.getOtherAxis=function(t){return this.getAxis(t.dim==="x"?"y":"x")},e.prototype.getArea=function(t){t=t||0;var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),a=Math.min(r[0],r[1])-t,s=Math.min(i[0],i[1])-t,o=Math.max(r[0],r[1])-a+t,l=Math.max(i[0],i[1])-s+t;return new Rt(a,s,o,l)},e})(o6e),Ape=(function(n){be(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.index=0,o.type=a||"value",o.position=s||"bottom",o}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.getGlobalExtent=function(t){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),t&&r[0]>r[1]&&r.reverse(),r},e.prototype.pointToData=function(t,r){return this.coordToData(this.toLocalCoord(t[this.dim==="x"?0:1]),r)},e.prototype.setCategorySortInfo=function(t){if(this.type!=="category")return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e})(Oc),E3="expandAxisBreak",Cpe="collapseAxisBreak",Mpe="toggleAxisBreak",t7="axisbreakchanged",u6e={type:E3,event:t7,update:"update",refineEvent:n7},c6e={type:Cpe,event:t7,update:"update",refineEvent:n7},h6e={type:Mpe,event:t7,update:"update",refineEvent:n7};function n7(n,e,t,r){var i=[];return W(n,function(a){i=i.concat(a.eventBreaks)}),{eventContent:{breaks:i}}}function d6e(n){n.registerAction(u6e,e),n.registerAction(c6e,e),n.registerAction(h6e,e);function e(t,r){var i=[],a=yb(r,t);function s(o,l){W(a[o],function(u){var c=u.updateAxisBreaks(t);W(c.breaks,function(h){var d;i.push(Pt((d={},d[l]=u.componentIndex,d),h))})})}return s("xAxisModels","xAxisIndex"),s("yAxisModels","yAxisIndex"),s("singleAxisModels","singleAxisIndex"),{eventBreaks:i}}}var sg=Math.PI,f6e=[[1,2,1,2],[5,3,5,3],[8,3,8,3]],p6e=[[0,1,0,1],[0,3,0,3],[0,3,0,3]],hS=mn(),Dpe=mn(),Ipe=(function(){function n(e){this.recordMap={},this.resolveAxisNameOverlap=e}return n.prototype.ensureRecord=function(e){var t=e.axis.dim,r=e.componentIndex,i=this.recordMap,a=i[t]||(i[t]=[]);return a[r]||(a[r]={ready:{}})},n})();function m6e(n,e,t,r){var i=t.axis,a=e.ensureRecord(t),s=[],o,l=r7(n.axisName)&&lS(n.nameLocation);W(r,function(p){var m=ad(p);if(!(!m||m.label.ignore)){s.push(m);var g=a.transGroup;l&&(g.transform?Ic(cT,g.transform):Zk(cT),m.transform&&Wh(cT,cT,m.transform),Rt.copy(KI,m.localRect),KI.applyTransform(cT),o?o.union(KI):Rt.copy(o=new Rt(0,0,0,0),KI))}});var u=Math.abs(a.dirVec.x)>.1?"x":"y",c=a.transGroup[u];if(s.sort(function(p,m){return Math.abs(p.label[u]-c)-Math.abs(m.label[u]-c)}),l&&o){var h=i.getExtent(),d=Math.min(h[0],h[1]),f=Math.max(h[0],h[1])-d;o.union(new Rt(d,0,f,1))}a.stOccupiedRect=o,a.labelInfoList=s}var cT=Ya(),KI=new Rt(0,0,0,0),Ppe=function(n,e,t,r,i,a){if(lS(n.nameLocation)){var s=a.stOccupiedRect;s&&Lpe(f4e({},s,a.transGroup.transform),r,i)}else Rpe(a.labelInfoList,a.dirVec,r,i)};function Lpe(n,e,t){var r=new Ct;w3(n,e,r,{direction:Math.atan2(t.y,t.x),bidirectional:!1,touchThreshold:.05})&&n8(e,r)}function Rpe(n,e,t,r){for(var i=Ct.dot(r,e)>=0,a=0,s=n.length;a<s;a++){var o=n[i?a:s-1-a];o.label.ignore||Lpe(o,t,r)}}var go=(function(){function n(e,t,r,i){this.group=new wt,this._axisModel=e,this._api=t,this._local={},this._shared=i||new Ipe(Ppe),this._resetCfgDetermined(r)}return n.prototype.updateCfg=function(e){var t=this._cfg.raw;t.position=e.position,t.labelOffset=e.labelOffset,this._resetCfgDetermined(t)},n.prototype.__getRawCfg=function(){return this._cfg.raw},n.prototype._resetCfgDetermined=function(e){var t=this._axisModel,r=t.getDefaultOption?t.getDefaultOption():{},i=dt(e.axisName,t.get("name")),a=t.get("nameMoveOverlap");(a==null||a==="auto")&&(a=dt(e.defaultNameMoveOverlap,!0));var s={raw:e,position:e.position,rotation:e.rotation,nameDirection:dt(e.nameDirection,1),tickDirection:dt(e.tickDirection,1),labelDirection:dt(e.labelDirection,1),labelOffset:dt(e.labelOffset,0),silent:dt(e.silent,!0),axisName:i,nameLocation:Ll(t.get("nameLocation"),r.nameLocation,"end"),shouldNameMoveOverlap:r7(i)&&a,optionHideOverlap:t.get(["axisLabel","hideOverlap"]),showMinorTicks:t.get(["minorTick","show"])};this._cfg=s;var o=new wt({x:s.position[0],y:s.position[1],rotation:s.rotation});o.updateTransform(),this._transformGroup=o;var l=this._shared.ensureRecord(t);l.transGroup=this._transformGroup,l.dirVec=new Ct(Math.cos(-s.rotation),Math.sin(-s.rotation))},n.prototype.build=function(e,t){var r=this;return e||(e={axisLine:!0,axisTickLabelEstimate:!1,axisTickLabelDetermine:!0,axisName:!0}),W(g6e,function(i){e[i]&&v6e[i](r._cfg,r._local,r._shared,r._axisModel,r.group,r._transformGroup,r._api,t||{})}),this},n.innerTextLayout=function(e,t,r){var i=Dce(t-e),a,s;return gA(i)?(s=r>0?"top":"bottom",a="center"):gA(i-sg)?(s=r>0?"bottom":"top",a="center"):(s="middle",i>0&&i<sg?a=r>0?"right":"left":a=r>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:s}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n})(),g6e=["axisLine","axisTickLabelEstimate","axisTickLabelDetermine","axisName"],v6e={axisLine:function(n,e,t,r,i,a,s){var o=r.get(["axisLine","show"]);if(o==="auto"&&(o=!0,n.raw.axisLineAutoShow!=null&&(o=!!n.raw.axisLineAutoShow)),!!o){var l=r.axis.getExtent(),u=a.transform,c=[l[0],0],h=[l[1],0],d=c[0]>h[0];u&&(Oi(c,c,u),Oi(h,h,u));var f=Pe({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),p={strokeContainThreshold:n.raw.strokeContainThreshold||5,silent:!0,z2:1,style:f};if(r.get(["axisLine","breakLine"])&&r.axis.scale.hasBreaks())M2().buildAxisBreakLine(r,i,a,p);else{var m=new Xi(Pe({shape:{x1:c[0],y1:c[1],x2:h[0],y2:h[1]}},p));rS(m.shape,m.style.lineWidth),m.anid="line",i.add(m)}var g=r.get(["axisLine","symbol"]);if(g!=null){var v=r.get(["axisLine","symbolSize"]);Ke(g)&&(g=[g,g]),(Ke(v)||Ln(v))&&(v=[v,v]);var b=lx(r.get(["axisLine","symbolOffset"])||0,v),S=v[0],w=v[1];W([{rotate:n.rotation+Math.PI/2,offset:b[0],r:0},{rotate:n.rotation-Math.PI/2,offset:b[1],r:Math.sqrt((c[0]-h[0])*(c[0]-h[0])+(c[1]-h[1])*(c[1]-h[1]))}],function(E,T){if(g[T]!=="none"&&g[T]!=null){var M=Ki(g[T],-S/2,-w/2,S,w,f.stroke,!0),P=E.r+E.offset,I=d?h:c;M.attr({rotation:E.rotate,x:I[0]+P*Math.cos(n.rotation),y:I[1]-P*Math.sin(n.rotation),silent:!0,z2:11}),i.add(M)}})}}},axisTickLabelEstimate:function(n,e,t,r,i,a,s,o){var l=nee(e,i,o);l&&tee(n,e,t,r,i,a,s,Lc.estimate)},axisTickLabelDetermine:function(n,e,t,r,i,a,s,o){var l=nee(e,i,o);l&&tee(n,e,t,r,i,a,s,Lc.determine);var u=b6e(n,i,a,r);_6e(n,e.labelLayoutList,u),S6e(n,i,a,r,n.tickDirection)},axisName:function(n,e,t,r,i,a,s,o){var l=t.ensureRecord(r);e.nameEl&&(i.remove(e.nameEl),e.nameEl=l.nameLayout=l.nameLocation=null);var u=n.axisName;if(r7(u)){var c=n.nameLocation,h=n.nameDirection,d=r.getModel("nameTextStyle"),f=r.get("nameGap")||0,p=r.axis.getExtent(),m=r.axis.inverse?-1:1,g=new Ct(0,0),v=new Ct(0,0);c==="start"?(g.x=p[0]-m*f,v.x=-m):c==="end"?(g.x=p[1]+m*f,v.x=m):(g.x=(p[0]+p[1])/2,g.y=n.labelOffset+h*f,v.y=h);var b=Ya();v.transform(Rg(b,b,n.rotation));var S=r.get("nameRotate");S!=null&&(S=S*sg/180);var w,E;lS(c)?w=go.innerTextLayout(n.rotation,S??n.rotation,h):(w=y6e(n.rotation,c,S||0,p),E=n.raw.axisNameAvailableWidth,E!=null&&(E=Math.abs(E/Math.sin(w.rotation)),!isFinite(E)&&(E=null)));var T=d.getFont(),M=r.get("nameTruncate",!0)||{},P=M.ellipsis,I=fs(n.raw.nameTruncateMaxWidth,M.maxWidth,E),D=o.nameMarginLevel||0,R=new On({x:g.x,y:g.y,rotation:w.rotation,silent:go.isLabelSilent(r),style:Er(d,{text:u,font:T,overflow:"truncate",width:I,ellipsis:P,fill:d.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:d.get("align")||w.textAlign,verticalAlign:d.get("verticalAlign")||w.textVerticalAlign}),z2:1});if(op({el:R,componentModel:r,itemName:u}),R.__fullText=u,R.anid="name",r.get("triggerEvent")){var B=go.makeAxisEventDataBase(r);B.targetType="axisName",B.name=u,Ft(R).eventData=B}a.add(R),R.updateTransform(),e.nameEl=R;var k=l.nameLayout=ad({label:R,priority:R.z2,defaultAttr:{ignore:R.ignore},marginDefault:lS(c)?f6e[D]:p6e[D]});if(l.nameLocation=c,i.add(R),R.decomposeTransform(),n.shouldNameMoveOverlap&&k){var V=t.ensureRecord(r);t.resolveAxisNameOverlap(n,t,r,k,v,V)}}}};function tee(n,e,t,r,i,a,s,o){kpe(e)||w6e(n,e,i,o,r,s);var l=e.labelLayoutList;T6e(n,r,l,a),C6e(r,n.rotation,l);var u=n.optionHideOverlap;x6e(r,l,u),u&&Wfe(er(l,function(c){return c&&!c.label.ignore})),m6e(n,t,r,l)}function y6e(n,e,t,r){var i=Dce(t-n),a,s,o=r[0]>r[1],l=e==="start"&&!o||e!=="start"&&o;return gA(i-sg/2)?(s=l?"bottom":"top",a="center"):gA(i-sg*1.5)?(s=l?"top":"bottom",a="center"):(s="middle",i<sg*1.5&&i>sg/2?a=l?"left":"right":a=l?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:s}}function x6e(n,e,t){if(Mfe(n.axis))return;function r(o,l,u){var c=ad(e[l]),h=ad(e[u]);if(!(!c||!h)){if(o===!1||c.suggestIgnore){JT(c.label);return}if(h.suggestIgnore){JT(h.label);return}var d=.1;if(!t){var f=[0,0,0,0];c=r8({marginForce:f},c),h=r8({marginForce:f},h)}w3(c,h,null,{touchThreshold:d})&&JT(o?h.label:c.label)}}var i=n.get(["axisLabel","showMinLabel"]),a=n.get(["axisLabel","showMaxLabel"]),s=e.length;r(i,0,1),r(a,s-1,s-2)}function _6e(n,e,t){n.showMinorTicks||W(e,function(r){if(r&&r.label.ignore)for(var i=0;i<t.length;i++){var a=t[i],s=Dpe(a),o=hS(r.label);if(s.tickValue!=null&&!s.onBand&&s.tickValue===o.tickValue){JT(a);return}}})}function JT(n){n&&(n.ignore=!0)}function Npe(n,e,t,r,i){for(var a=[],s=[],o=[],l=0;l<n.length;l++){var u=n[l].coord;s[0]=u,s[1]=0,o[0]=u,o[1]=t,e&&(Oi(s,s,e),Oi(o,o,e));var c=new Xi({shape:{x1:s[0],y1:s[1],x2:o[0],y2:o[1]},style:r,z2:2,autoBatch:!0,silent:!0});rS(c.shape,c.style.lineWidth),c.anid=i+"_"+n[l].tickValue,a.push(c);var h=Dpe(c);h.onBand=!!n[l].onBand,h.tickValue=n[l].tickValue}return a}function b6e(n,e,t,r){var i=r.axis,a=r.getModel("axisTick"),s=a.get("show");if(s==="auto"&&(s=!0,n.raw.axisTickAutoShow!=null&&(s=!!n.raw.axisTickAutoShow)),!s||i.scale.isBlank())return[];for(var o=a.getModel("lineStyle"),l=n.tickDirection*a.get("length"),u=i.getTicksCoords(),c=Npe(u,t.transform,l,Pt(o.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),h=0;h<c.length;h++)e.add(c[h]);return c}function S6e(n,e,t,r,i){var a=r.axis,s=r.getModel("minorTick");if(!(!n.showMinorTicks||a.scale.isBlank())){var o=a.getMinorTicksCoords();if(o.length)for(var l=s.getModel("lineStyle"),u=i*s.get("length"),c=Pt(l.getLineStyle(),Pt(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),h=0;h<o.length;h++)for(var d=Npe(o[h],t.transform,u,c,"minorticks_"+h),f=0;f<d.length;f++)e.add(d[f])}}function nee(n,e,t){if(kpe(n)){var r=n.axisLabelsCreationContext,i=r.out.noPxChangeTryDetermine;if(t.noPxChange){for(var a=!0,s=0;s<i.length;s++)a=a&&i[s]();if(a)return!1}i.length&&(e.remove(n.labelGroup),d8(n,null,null,null))}return!0}function w6e(n,e,t,r,i,a){var s=i.axis,o=fs(n.raw.axisLabelShow,i.get(["axisLabel","show"])),l=new wt;t.add(l);var u=gN(r);if(!o||s.scale.isBlank()){d8(e,[],l,u);return}var c=i.getModel("axisLabel"),h=s.getViewLabels(u),d=(fs(n.raw.labelRotate,c.get("rotate"))||0)*sg/180,f=go.innerTextLayout(n.rotation,d,n.labelDirection),p=i.getCategories&&i.getCategories(!0),m=[],g=i.get("triggerEvent"),v=1/0,b=-1/0;W(h,function(w,E){var T,M=s.scale.type==="ordinal"?s.scale.getRawOrdinalNumber(w.tickValue):w.tickValue,P=w.formattedLabel,I=w.rawLabel,D=c;if(p&&p[M]){var R=p[M];Lt(R)&&R.textStyle&&(D=new Sn(R.textStyle,c,i.ecModel))}var B=D.getTextColor()||i.get(["axisLine","lineStyle","color"]),k=D.getShallow("align",!0)||f.textAlign,V=dt(D.getShallow("alignMinLabel",!0),k),G=dt(D.getShallow("alignMaxLabel",!0),k),F=D.getShallow("verticalAlign",!0)||D.getShallow("baseline",!0)||f.textVerticalAlign,X=dt(D.getShallow("verticalAlignMinLabel",!0),F),j=dt(D.getShallow("verticalAlignMaxLabel",!0),F),Q=10+(((T=w.time)===null||T===void 0?void 0:T.level)||0);v=Math.min(v,Q),b=Math.max(b,Q);var H=new On({x:0,y:0,rotation:0,silent:go.isLabelSilent(i),z2:Q,style:Er(D,{text:P,align:E===0?V:E===h.length-1?G:k,verticalAlign:E===0?X:E===h.length-1?j:F,fill:St(B)?B(s.type==="category"?I:s.type==="value"?M+"":M,E):B})});H.anid="label_"+M;var K=hS(H);if(K.break=w.break,K.tickValue=M,K.layoutRotation=f.rotation,op({el:H,componentModel:i,itemName:P,formatterParamsExtra:{isTruncated:function(){return H.isTruncated},value:I,tickIndex:E}}),g){var te=go.makeAxisEventDataBase(i);te.targetType="axisLabel",te.value=I,te.tickIndex=E,w.break&&(te.break={start:w.break.parsedBreak.vmin,end:w.break.parsedBreak.vmax}),s.type==="category"&&(te.dataIndex=M),Ft(H).eventData=te,w.break&&A6e(i,a,H,w.break)}m.push(H),l.add(H)});var S=Ue(m,function(w){return{label:w,priority:hS(w).break?w.z2+(b-v+1):w.z2,defaultAttr:{ignore:w.ignore}}});d8(e,S,l,u)}function kpe(n){return!!n.labelLayoutList}function d8(n,e,t,r){n.labelLayoutList=e,n.labelGroup=t,n.axisLabelsCreationContext=r}function T6e(n,e,t,r){var i=e.get(["axisLabel","margin"]);W(t,function(a,s){var o=ad(a);if(o){var l=o.label,u=hS(l);o.suggestIgnore=l.ignore,l.ignore=!1,qR(Cd,E6e),Cd.x=e.axis.dataToCoord(u.tickValue),Cd.y=n.labelOffset+n.labelDirection*i,Cd.rotation=u.layoutRotation,r.add(Cd),Cd.updateTransform(),r.remove(Cd),Cd.decomposeTransform(),qR(l,Cd),l.markRedraw(),_N(o,!0),ad(o)}})}var Cd=new fn,E6e=new fn;function r7(n){return!!n}function A6e(n,e,t,r){t.on("click",function(i){var a={type:E3,breaks:[{start:r.parsedBreak.breakOption.start,end:r.parsedBreak.breakOption.end}]};a[n.axis.dim+"AxisIndex"]=n.componentIndex,e.dispatchAction(a)})}function C6e(n,e,t){var r=$i();if(r){var i=r.retrieveAxisBreakPairs(t,function(s){return s&&hS(s.label).break},!0),a=n.get(["breakLabelLayout","moveOverlap"],!0);(a===!0||a==="auto")&&W(i,function(s){M2().adjustBreakLabelPair(n.axis.inverse,e,[ad(t[s[0]]),ad(t[s[1]])])})}}function TN(n,e,t){t=t||{};var r=e.axis,i={},a=r.getAxesOnZeroOf()[0],s=r.position,o=a?"onZero":s,l=r.dim,u=[n.x,n.x+n.width,n.y,n.y+n.height],c={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,d=l==="x"?[u[2]-h,u[3]+h]:[u[0]-h,u[1]+h];if(a){var f=a.toGlobalCoord(a.dataToCoord(0));d[c.onZero]=Math.max(Math.min(f,d[1]),d[0])}i.position=[l==="y"?d[c[o]]:u[0],l==="x"?d[c[o]]:u[3]],i.rotation=Math.PI/2*(l==="x"?0:1);var p={top:-1,bottom:1,left:-1,right:1};i.labelDirection=i.tickDirection=i.nameDirection=p[s],i.labelOffset=a?d[c[s]]-d[c.onZero]:0,e.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),fs(t.labelInside,e.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var m=e.get(["axisLabel","rotate"]);return i.labelRotate=o==="top"?-m:m,i.z2=1,i}function M6e(n){return n.coordinateSystem&&n.coordinateSystem.type==="cartesian2d"}function ree(n){var e={xAxisModel:null,yAxisModel:null};return W(e,function(t,r){var i=r.replace(/Model$/,""),a=n.getReferringComponents(i,fi).models[0];e[r]=a}),e}function D6e(n,e,t,r,i,a){for(var s=TN(n,t),o=!1,l=!1,u=0;u<e.length;u++)Zz(e[u].getOtherAxis(t.axis).scale)&&(o=l=!0,t.axis.type==="category"&&t.axis.onBand&&(l=!1));return s.axisLineAutoShow=o,s.axisTickAutoShow=l,s.defaultNameMoveOverlap=a,new go(t,r,s,i)}function I6e(n,e,t){var r=TN(e,t);n.updateCfg(r)}function Ope(n,e,t){var r=Zf.prototype,i=r.getTicks.call(t),a=r.getTicks.call(t,{expandToNicedExtent:!0}),s=i.length-1,o=r.getInterval.call(t),l=Cfe(n,e),u=l.extent,c=l.fixMin,h=l.fixMax;n.type==="log"&&(u=Qz(n.base,u,!0)),n.setBreaksFromOption(Dfe(e)),n.setExtent(u[0],u[1]),n.calcNiceExtent({splitNumber:s,fixMin:c,fixMax:h});var d=r.getExtent.call(n);c&&(u[0]=d[0]),h&&(u[1]=d[1]);var f=r.getInterval.call(n),p=u[0],m=u[1];if(c&&h)f=(m-p)/s;else if(c)for(m=u[0]+f*s;m<u[1]&&isFinite(m)&&isFinite(u[1]);)f=P4(f),m=u[0]+f*s;else if(h)for(p=u[1]-f*s;p>u[0]&&isFinite(p)&&isFinite(u[0]);)f=P4(f),p=u[1]-f*s;else{var g=n.getTicks().length-1;g>s&&(f=P4(f));var v=f*s;m=Math.ceil(u[1]/f)*f,p=Wi(m-v),p<0&&u[0]>=0?(p=0,m=Wi(v)):m>0&&u[1]<=0&&(m=0,p=-Wi(v))}var b=(i[0].value-a[0].value)/o,S=(i[s].value-a[s].value)/o;r.setExtent.call(n,p+f*b,m+f*S),r.setInterval.call(n,f),(b||S)&&r.setNiceExtent.call(n,p+f,m-f)}var iee=[[3,1],[0,2]],P6e=(function(){function n(e,t,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=h8,this._initCartesian(e,t,r),this.model=e}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(e,t){var r=this._axesMap;this._updateScale(e,this.model);function i(s){var o,l=An(s),u=l.length;if(u){for(var c=[],h=u-1;h>=0;h--){var d=+l[h],f=s[d],p=f.model,m=f.scale;Zz(m)&&p.get("alignTicks")&&p.get("interval")==null?c.push(f):(oS(m,p),Zz(m)&&(o=f))}c.length&&(o||(o=c.pop(),oS(o.scale,o.model)),W(c,function(g){Ope(g.scale,g.model,o.scale)}))}}i(r.x),i(r.y);var a={};W(r.x,function(s){aee(r,"y",s,a)}),W(r.y,function(s){aee(r,"x",s,a)}),this.resize(this.model,t)},n.prototype.resize=function(e,t,r){var i=ha(e,t),a=this._rect=qr(e.getBoxLayoutParams(),i.refContainer),s=this._axesMap,o=this._coordsList,l=e.get("containLabel");if(f8(s,a),!r){var u=N6e(a,o,s,l,t),c=void 0;if(l)p8?(p8(this._axesList,a),f8(s,a)):c=lee(a.clone(),"axisLabel",null,a,s,u,i);else{var h=k6e(e,a,i),d=h.outerBoundsRect,f=h.parsedOuterBoundsContain,p=h.outerBoundsClamp;d&&(c=lee(d,f,p,a,s,u,i))}Bpe(a,s,Lc.determine,null,c,i)}W(this._coordsList,function(m){m.calcAffineTransform()})},n.prototype.getAxis=function(e,t){var r=this._axesMap[e];if(r!=null)return r[t||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(e,t){if(e!=null&&t!=null){var r="x"+e+"y"+t;return this._coordsMap[r]}Lt(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===e||a[i].getAxis("y").index===t)return a[i]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.dataToPoint(r):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(e,t,r){var i=this._findConvertTarget(t);return i.cartesian?i.cartesian.pointToData(r):i.axis?i.axis.coordToData(i.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(e){var t=e.seriesModel,r=e.xAxisModel||t&&t.getReferringComponents("xAxis",fi).models[0],i=e.yAxisModel||t&&t.getReferringComponents("yAxis",fi).models[0],a=e.gridModel,s=this._coordsList,o,l;if(t)o=t.coordinateSystem,Jt(s,o)<0&&(o=null);else if(r&&i)o=this.getCartesian(r.componentIndex,i.componentIndex);else if(r)l=this.getAxis("x",r.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(a){var u=a.coordinateSystem;u===this&&(o=this._coordsList[0])}return{cartesian:o,axis:l}},n.prototype.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},n.prototype._initCartesian=function(e,t,r){var i=this,a=this,s={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},l={x:0,y:0};if(t.eachComponent("xAxis",u("x"),this),t.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,W(o.x,function(c,h){W(o.y,function(d,f){var p="x"+h+"y"+f,m=new l6e(p);m.master=i,m.model=e,i._coordsMap[p]=m,i._coordsList.push(m),m.addAxis(c),m.addAxis(d)})});function u(c){return function(h,d){if($4(h,e)){var f=h.get("position");c==="x"?f!=="top"&&f!=="bottom"&&(f=s.bottom?"top":"bottom"):f!=="left"&&f!=="right"&&(f=s.left?"right":"left"),s[f]=!0;var p=new Ape(c,S3(h),[0,0],h.get("type"),f),m=p.type==="category";p.onBand=m&&h.get("boundaryGap"),p.inverse=h.get("inverse"),h.axis=p,p.model=h,p.grid=a,p.index=d,a._axesList.push(p),o[c][d]=p,l[c]++}}}},n.prototype._updateScale=function(e,t){W(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),e.eachSeries(function(i){if(M6e(i)){var a=ree(i),s=a.xAxisModel,o=a.yAxisModel;if(!$4(s,t)||!$4(o,t))return;var l=this.getCartesian(s.componentIndex,o.componentIndex),u=i.getData(),c=l.getAxis("x"),h=l.getAxis("y");r(u,c),r(u,h)}},this);function r(i,a){W(mN(i,a.dim),function(s){a.scale.unionExtentFromData(i,s)})}},n.prototype.getTooltipAxes=function(e){var t=[],r=[];return W(this.getCartesians(),function(i){var a=e!=null&&e!=="auto"?i.getAxis(e):i.getBaseAxis(),s=i.getOtherAxis(a);Jt(t,a)<0&&t.push(a),Jt(r,s)<0&&r.push(s)}),{baseAxes:t,otherAxes:r}},n.create=function(e,t){var r=[];return e.eachComponent("grid",function(i,a){var s=new n(i,e,t);s.name="grid_"+a,s.resize(i,t,!0),i.coordinateSystem=s,r.push(s)}),e.eachSeries(function(i){_2({targetModel:i,coordSysType:"cartesian2d",coordSysProvider:a});function a(){var s=ree(i),o=s.xAxisModel,l=s.yAxisModel,u=o.getCoordSysModel(),c=u.coordinateSystem;return c.getCartesian(o.componentIndex,l.componentIndex)}}),r},n.dimensions=h8,n})();function $4(n,e){return n.getCoordSysModel()===e}function aee(n,e,t,r){t.getAxesOnZeroOf=function(){return a?[a]:[]};var i=n[e],a,s=t.model,o=s.get(["axisLine","onZero"]),l=s.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(l!=null)see(i[l])&&(a=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&see(i[u])&&!r[c(i[u])]){a=i[u];break}a&&(r[c(a)]=!0);function c(h){return h.dim+"_"+h.index}}function see(n){return n&&n.type!=="category"&&n.type!=="time"&&BFe(n)}function L6e(n,e){var t=n.getExtent(),r=t[0]+t[1];n.toGlobalCoord=n.dim==="x"?function(i){return i+e}:function(i){return r-i+e},n.toLocalCoord=n.dim==="x"?function(i){return i-e}:function(i){return r-i+e}}function f8(n,e){W(n.x,function(t){return oee(t,e.x,e.width)}),W(n.y,function(t){return oee(t,e.y,e.height)})}function oee(n,e,t){var r=[0,t],i=n.inverse?1:0;n.setExtent(r[i],r[1-i]),L6e(n,e)}var p8;function R6e(n){p8=n}function lee(n,e,t,r,i,a,s){Bpe(r,i,Lc.estimate,e,!1,s);var o=[0,0,0,0];u(0),u(1),c(r,0,NaN),c(r,1,NaN);var l=nx(o,function(d){return d>0})==null;return Gy(r,o,!0,!0,t),f8(i,r),l;function u(d){W(i[Yt[d]],function(f){if(DA(f.model)){var p=a.ensureRecord(f.model),m=p.labelInfoList;if(m)for(var g=0;g<m.length;g++){var v=m[g],b=f.scale.normalize(hS(v.label).tickValue);b=d===1?1-b:b,c(v.rect,d,b),c(v.rect,1-d,NaN)}var S=p.nameLayout;if(S){var b=lS(p.nameLocation)?.5:NaN;c(S.rect,d,b),c(S.rect,1-d,NaN)}}})}function c(d,f,p){var m=n[Yt[f]]-d[Yt[f]],g=d[Yi[f]]+d[Yt[f]]-(n[Yi[f]]+n[Yt[f]]);m=h(m,1-p),g=h(g,p);var v=iee[f][0],b=iee[f][1];o[v]=Ni(o[v],m),o[b]=Ni(o[b],g)}function h(d,f){return d>0&&!Bs(f)&&f>1e-4&&(d/=f),d}}function N6e(n,e,t,r,i){var a=new Ipe(O6e);return W(t,function(s){return W(s,function(o){if(DA(o.model)){var l=!r;o.axisBuilder=D6e(n,e,o.model,i,a,l)}})}),a}function Bpe(n,e,t,r,i,a){var s=t===Lc.determine;W(e,function(u){return W(u,function(c){DA(c.model)&&(I6e(c.axisBuilder,n,c.model),c.axisBuilder.build(s?{axisTickLabelDetermine:!0}:{axisTickLabelEstimate:!0},{noPxChange:i}))})});var o={x:0,y:0};l(0),l(1);function l(u){o[Yt[1-u]]=n[Yi[u]]<=a.refContainer[Yi[u]]*.5?0:1-u===1?2:1}W(e,function(u,c){return W(u,function(h){DA(h.model)&&((r==="all"||s)&&h.axisBuilder.build({axisName:!0},{nameMarginLevel:o[c]}),s&&h.axisBuilder.build({axisLine:!0}))})})}function k6e(n,e,t){var r,i=n.get("outerBoundsMode",!0);i==="same"?r=e.clone():(i==null||i==="auto")&&(r=qr(n.get("outerBounds",!0)||wpe,t.refContainer));var a=n.get("outerBoundsContain",!0),s;a==null||a==="auto"||Jt(["all","axisLabel"],a)<0?s="all":s=a;var o=[ZR(dt(n.get("outerBoundsClampWidth",!0),wN[0]),e.width),ZR(dt(n.get("outerBoundsClampHeight",!0),wN[1]),e.height)];return{outerBoundsRect:r,parsedOuterBoundsContain:s,outerBoundsClamp:o}}var O6e=function(n,e,t,r,i,a){var s=t.axis.dim==="x"?"y":"x";Ppe(n,e,t,r,i,a),lS(n.nameLocation)||W(e.recordMap[s],function(o){o&&o.labelInfoList&&o.dirVec&&Rpe(o.labelInfoList,o.dirVec,r,i)})};function B6e(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return F6e(t,n,e),t.seriesInvolved&&z6e(t,n),t}function F6e(n,e,t){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],s=[];W(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=RA(o.model),u=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=o;var c=o.model,h=c.getModel("tooltip",r);if(W(o.getAxes(),Qt(m,!1,null)),o.getTooltipAxes&&r&&h.get("show")){var d=h.get("trigger")==="axis",f=h.get(["axisPointer","type"])==="cross",p=o.getTooltipAxes(h.get(["axisPointer","axis"]));(d||f)&&W(p.baseAxes,Qt(m,f?"cross":!0,d)),f&&W(p.otherAxes,Qt(m,"cross",!1))}function m(g,v,b){var S=b.model.getModel("axisPointer",i),w=S.get("show");if(!(!w||w==="auto"&&!g&&!m8(S))){v==null&&(v=S.get("triggerTooltip")),S=g?U6e(b,h,i,e,g,v):S;var E=S.get("snap"),T=S.get("triggerEmphasis"),M=RA(b.model),P=v||E||b.type==="category",I=n.axesInfo[M]={key:M,axis:b,coordSys:o,axisPointerModel:S,triggerTooltip:v,triggerEmphasis:T,involveSeries:P,snap:E,useHandle:m8(S),seriesModels:[],linkGroup:null};u[M]=I,n.seriesInvolved=n.seriesInvolved||P;var D=V6e(a,b);if(D!=null){var R=s[D]||(s[D]={axesInfo:{}});R.axesInfo[M]=I,R.mapper=a[D].mapper,I.linkGroup=R}}}})}function U6e(n,e,t,r,i,a){var s=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};W(o,function(d){l[d]=Tt(s.get(d))}),l.snap=n.type!=="category"&&!!a,s.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=s.get(["label","show"]);if(u.show=c??!0,!a){var h=l.lineStyle=s.get("crossStyle");h&&Pt(u,h.textStyle)}}return n.model.getModel("axisPointer",new Sn(l,t,r))}function z6e(n,e){e.eachSeries(function(t){var r=t.coordinateSystem,i=t.get(["tooltip","trigger"],!0),a=t.get(["tooltip","show"],!0);!r||!r.model||i==="none"||i===!1||i==="item"||a===!1||t.get(["axisPointer","show"],!0)===!1||W(n.coordSysAxesInfo[RA(r.model)],function(s){var o=s.axis;r.getAxis(o.dim)===o&&(s.seriesModels.push(t),s.seriesDataCount==null&&(s.seriesDataCount=0),s.seriesDataCount+=t.getData().count())})})}function V6e(n,e){for(var t=e.model,r=e.dim,i=0;i<n.length;i++){var a=n[i]||{};if(Y4(a[r+"AxisId"],t.id)||Y4(a[r+"AxisIndex"],t.componentIndex)||Y4(a[r+"AxisName"],t.name))return i}}function Y4(n,e){return n==="all"||Be(n)&&Jt(n,e)>=0||n===e}function H6e(n){var e=i7(n);if(e){var t=e.axisPointerModel,r=e.axis.scale,i=t.option,a=t.get("status"),s=t.get("value");s!=null&&(s=r.parse(s));var o=m8(t);a==null&&(i.status=o?"show":"hide");var l=r.getExtent().slice();l[0]>l[1]&&l.reverse(),(s==null||s>l[1])&&(s=l[1]),s<l[0]&&(s=l[0]),i.value=s,o&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}function i7(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[RA(n)]}function G6e(n){var e=i7(n);return e&&e.axisPointerModel}function m8(n){return!!n.get(["handle","show"])}function RA(n){return n.type+"||"+n.id}var uee={},cx=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.axisPointerClass&&H6e(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,i,!0)},e.prototype.updateAxisPointer=function(t,r,i,a){this._doUpdateAxisPointerClass(t,i,!1)},e.prototype.remove=function(t,r){var i=this._axisPointer;i&&i.remove(r)},e.prototype.dispose=function(t,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,r,i){var a=e.getAxisPointerClass(this.axisPointerClass);if(a){var s=G6e(t);s?(this._axisPointer||(this._axisPointer=new a)).render(t,s,r,i):this._disposeAxisPointer(r)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,r){uee[t]=r},e.getAxisPointerClass=function(t){return t&&uee[t]},e.type="axis",e})(Gr),g8=mn();function Fpe(n,e,t,r){var i=t.axis;if(!i.scale.isBlank()){var a=t.getModel("splitArea"),s=a.getModel("areaStyle"),o=s.get("color"),l=r.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:a,clamp:!0,breakTicks:"none",pruneByBreak:"preserve_extent_bound"});if(u.length){var c=o.length,h=g8(n).splitAreaColors,d=ct(),f=0;if(h)for(var p=0;p<u.length;p++){var m=h.get(u[p].tickValue);if(m!=null){f=(m+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),v=s.getAreaStyle();o=Be(o)?o:[o];for(var p=1;p<u.length;p++){var b=i.toGlobalCoord(u[p].coord),S=void 0,w=void 0,E=void 0,T=void 0;i.isHorizontal()?(S=g,w=l.y,E=b-S,T=l.height,g=S+E):(S=l.x,w=g,E=l.width,T=b-w,g=w+T);var M=u[p-1].tickValue;M!=null&&d.set(M,f),e.add(new fn({anid:M!=null?"area_"+M:null,shape:{x:S,y:w,width:E,height:T},style:Pt({fill:o[f]},v),autoBatch:!0,silent:!0})),f=(f+1)%c}g8(n).splitAreaColors=d}}}function Upe(n){g8(n).splitAreaColors=null}var j6e=["splitArea","splitLine","minorSplitLine","breakArea"],zpe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="CartesianAxisPointer",t}return e.prototype.render=function(t,r,i,a){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new wt,this.group.add(this._axisGroup),!!DA(t)){this._axisGroup.add(t.axis.axisBuilder.group),W(j6e,function(l){t.get([l,"show"])&&W6e[l](this,this._axisGroup,t,t.getCoordSysModel(),i)},this);var o=a&&a.type==="changeAxisOrder"&&a.isInitSort;o||g2(s,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)}},e.prototype.remove=function(){Upe(this)},e.type="cartesianAxis",e})(cx),W6e={splitLine:function(n,e,t,r,i){var a=t.axis;if(!a.scale.isBlank()){var s=t.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),u=s.get("showMinLine")!==!1,c=s.get("showMaxLine")!==!1;l=Be(l)?l:[l];for(var h=r.coordinateSystem.getRect(),d=a.isHorizontal(),f=0,p=a.getTicksCoords({tickModel:s,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),m=[],g=[],v=o.getLineStyle(),b=0;b<p.length;b++){var S=a.toGlobalCoord(p[b].coord);if(!(b===0&&!u||b===p.length-1&&!c)){var w=p[b].tickValue;d?(m[0]=S,m[1]=h.y,g[0]=S,g[1]=h.y+h.height):(m[0]=h.x,m[1]=S,g[0]=h.x+h.width,g[1]=S);var E=f++%l.length,T=new Xi({anid:w!=null?"line_"+w:null,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},style:Pt({stroke:l[E]},v),silent:!0});rS(T.shape,v.lineWidth),e.add(T)}}}},minorSplitLine:function(n,e,t,r,i){var a=t.axis,s=t.getModel("minorSplitLine"),o=s.getModel("lineStyle"),l=r.coordinateSystem.getRect(),u=a.isHorizontal(),c=a.getMinorTicksCoords();if(c.length)for(var h=[],d=[],f=o.getLineStyle(),p=0;p<c.length;p++)for(var m=0;m<c[p].length;m++){var g=a.toGlobalCoord(c[p][m].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var v=new Xi({anid:"minor_line_"+c[p][m].tickValue,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:f,silent:!0});rS(v.shape,f.lineWidth),e.add(v)}},splitArea:function(n,e,t,r,i){Fpe(n,e,t,r)},breakArea:function(n,e,t,r,i){var a=M2(),s=t.axis.scale;a&&s.type!=="ordinal"&&a.rectCoordBuildBreakAxis(e,n,t,r.coordinateSystem.getRect(),i)}},Vpe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="xAxis",e})(zpe),X6e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=Vpe.type,t}return e.type="yAxis",e})(zpe),$6e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="grid",t}return e.prototype.render=function(t,r){this.group.removeAll(),t.get("show")&&this.group.add(new fn({shape:t.coordinateSystem.getRect(),style:Pt({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e})(Gr),cee={offset:0};function Hpe(n){n.registerComponentView($6e),n.registerComponentModel(t6e),n.registerCoordinateSystem("cartesian2d",P6e),cS(n,"x",u8,cee),cS(n,"y",u8,cee),n.registerComponentView(Vpe),n.registerComponentView(X6e),n.registerPreprocessor(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})})}function Y6e(n,e){var t=n.coordinateSystem,r=t&&t.type,i=t&&t.getBaseAxis&&t.getBaseAxis(),a=i&&i.scale&&i.scale.type,s=r==="cartesian2d"&&a==="ordinal"||r==="single",o=e.model.get("jitter")>0;return s&&o}var q6e=mn();function hee(n,e,t,r){if(n instanceof Ape){var i=n.scale.type;if(i!=="category"&&i!=="ordinal")return t}var a=n.model,s=a.get("jitter"),o=a.get("jitterOverlap"),l=a.get("jitterMargin")||0,u=n.scale.type==="ordinal"?n.getBandWidth():null;return s>0?o?Gpe(t,s,u,r):K6e(n,e,t,r,s,l):t}function Gpe(n,e,t,r){if(t===null)return n+(Math.random()-.5)*e;var i=t-r*2,a=Math.min(Math.max(0,e),i);return n+(Math.random()-.5)*a}function K6e(n,e,t,r,i,a){var s=q6e(n);s.items||(s.items=[]);var o=s.items,l=dee(o,e,t,r,i,a,1),u=dee(o,e,t,r,i,a,-1),c=Math.abs(l-t)<Math.abs(u-t)?l:u,h=n.scale.type==="ordinal"?n.getBandWidth():null,d=Math.abs(c-t);return d>i/2||h&&d>h/2-r?Gpe(t,i,h,r):(o.push({fixedCoord:e,floatCoord:c,r}),c)}function dee(n,e,t,r,i,a,s){for(var o=t,l=0;l<n.length;l++){var u=n[l],c=e-u.fixedCoord,h=o-u.floatCoord,d=c*c+h*h,f=r+u.r+a;if(d<f*f){var p=u.floatCoord+Math.sqrt(f*f-c*c)*s;if(Math.abs(p-t)>i/2)return Number.MAX_VALUE;if(s===1&&p>o||s===-1&&p<o){o=p,l=-1;continue}}}return o}function Z6e(n){n.eachSeriesByType("scatter",function(e){var t=e.coordinateSystem;if(t&&(t.type==="cartesian2d"||t.type==="single")){var r=t.getBaseAxis?t.getBaseAxis():null,i=r&&Y6e(e,r);if(i){var a=e.getData();a.each(function(s){var o=r.dim,l=r.orient,u=l==="horizontal"&&r.type!=="category"||l==="vertical"&&r.type==="category",c=a.getItemLayout(s),h=a.getItemVisual(s,"symbolSize"),d=h instanceof Array?(h[1]+h[0])/2:h;if(o==="y"||o==="single"&&u){var f=hee(r,c[0],c[1],d/2);a.setItemLayout(s,[c[0],f])}else if(o==="x"||o==="single"&&!u){var f=hee(r,c[1],c[0],d/2);a.setItemLayout(s,[f,c[1]])}})}}})}function Q6e(n){sn(Hpe),n.registerSeriesModel(K5e),n.registerChartView(e6e),n.registerLayout(C2("scatter"))}function J6e(n){n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,Z6e)}function eUe(n){n.eachSeriesByType("radar",function(e){var t=e.getData(),r=[],i=e.coordinateSystem;if(i){var a=i.getIndicatorAxes();W(a,function(s,o){t.each(t.mapDimension(a[o].dim),function(l,u){r[u]=r[u]||[];var c=i.dataToPoint(l,o);r[u][o]=fee(c)?c:pee(i)})}),t.each(function(s){var o=nx(r[s],function(l){return fee(l)})||pee(i);r[s].push(o.slice()),t.setItemLayout(s,r[s])})}})}function fee(n){return!isNaN(n[0])&&!isNaN(n[1])}function pee(n){return[n.cx,n.cy]}function tUe(n){var e=n.polar;if(e){Be(e)||(e=[e]);var t=[];W(e,function(r,i){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),n.radar=n.radar||[],Be(n.radar)||(n.radar=[n.radar]),n.radar.push(r)):t.push(r)}),n.polar=t}W(n.series,function(r){r&&r.type==="radar"&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var nUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.coordinateSystem,s=this.group,o=t.getData(),l=this._data;function u(d,f){var p=d.getItemVisual(f,"symbol")||"circle";if(p!=="none"){var m=$S(d.getItemVisual(f,"symbolSize")),g=Ki(p,-1,-1,2,2),v=d.getItemVisual(f,"symbolRotate")||0;return g.attr({style:{strokeNoScale:!0},z2:100,scaleX:m[0]/2,scaleY:m[1]/2,rotation:v*Math.PI/180||0}),g}}function c(d,f,p,m,g,v){p.removeAll();for(var b=0;b<f.length-1;b++){var S=u(m,g);S&&(S.__dimIdx=b,d[b]?(S.setPosition(d[b]),ax[v?"initProps":"updateProps"](S,{x:f[b][0],y:f[b][1]},t,g)):S.setPosition(f[b]),p.add(S))}}function h(d){return Ue(d,function(f){return[a.cx,a.cy]})}o.diff(l).add(function(d){var f=o.getItemLayout(d);if(f){var p=new Vs,m=new gs,g={shape:{points:f}};p.shape.points=h(f),m.shape.points=h(f),Vr(p,g,t,d),Vr(m,g,t,d);var v=new wt,b=new wt;v.add(m),v.add(p),v.add(b),c(m.shape.points,f,b,o,d,!0),o.setItemGraphicEl(d,v)}}).update(function(d,f){var p=l.getItemGraphicEl(f),m=p.childAt(0),g=p.childAt(1),v=p.childAt(2),b={shape:{points:o.getItemLayout(d)}};b.shape.points&&(c(m.shape.points,b.shape.points,v,o,d,!1),ku(g),ku(m),Vn(m,b,t),Vn(g,b,t),o.setItemGraphicEl(d,p))}).remove(function(d){s.remove(l.getItemGraphicEl(d))}).execute(),o.eachItemGraphicEl(function(d,f){var p=o.getItemModel(f),m=d.childAt(0),g=d.childAt(1),v=d.childAt(2),b=o.getItemVisual(f,"style"),S=b.fill;s.add(d),m.useStyle(Pt(p.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:S})),ua(m,p,"lineStyle"),ua(g,p,"areaStyle");var w=p.getModel("areaStyle"),E=w.isEmpty()&&w.parentModel.isEmpty();g.ignore=E,W(["emphasis","select","blur"],function(M){var P=p.getModel([M,"areaStyle"]),I=P.isEmpty()&&P.parentModel.isEmpty();g.ensureState(M).ignore=I&&E;var D=p.getModel([M,"lineStyle"]).getLineStyle();m.ensureState(M).style=D;var R=P.getAreaStyle();g.ensureState(M).style=R;var B=p.getModel([M,"itemStyle"]).getItemStyle();v.eachChild(function(k){k.ensureState(M).style=Tt(B)})}),g.useStyle(Pt(p.getModel("areaStyle").getAreaStyle(),{fill:S,opacity:.7,decal:b.decal}));var T=p.getModel("emphasis");v.eachChild(function(M){if(M instanceof Ka){var P=M.style;M.useStyle(Pe({image:P.image,x:P.x,y:P.y,width:P.width,height:P.height},b))}else M.useStyle(b),M.setColor(S),M.style.strokeNoScale=!0;var I=o.getStore().get(o.getDimensionIndex(M.__dimIdx),f);(I==null||isNaN(I))&&(I=""),Aa(M,ca(p),{labelFetcher:o.hostModel,labelDataIndex:f,labelDimIndex:M.__dimIdx,defaultText:I,inheritColor:S,defaultOpacity:b.opacity})}),Yr(d,T.get("focus"),T.get("blurScope"),T.get("disabled"))}),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e})(mr),rUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new ZS(Qe(this.getData,this),Qe(this.getRawData,this))},e.prototype.getInitialData=function(t,r){return KS(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),s=this.coordinateSystem,o=s.getIndicatorAxes(),l=this.getData().getName(t),u=l===""?this.name:l,c=Ade(this,t);return qi("section",{header:u,sortBlocks:!0,blocks:Ue(o,function(h){var d=a.get(a.mapDimension(h.dim),t);return qi("nameValue",{markerType:"subItem",markerColor:c,name:h.name,value:d,sortParam:d})})})},e.prototype.getTooltipPosition=function(t){if(t!=null){for(var r=this.getData(),i=this.coordinateSystem,a=r.getValues(Ue(i.dimensions,function(u){return r.mapDimension(u)}),t),s=0,o=a.length;s<o;s++)if(!isNaN(a[s])){var l=i.getIndicatorAxes();return i.coordToPoint(l[s].dataToCoord(a[s]),s)}}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e})(Cr),hT=Epe.value;function ZI(n,e){return Pt({show:e},n)}var iUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),r=this.get("splitNumber"),i=this.get("scale"),a=this.get("axisLine"),s=this.get("axisTick"),o=this.get("axisLabel"),l=this.get("axisName"),u=this.get(["axisName","show"]),c=this.get(["axisName","formatter"]),h=this.get("axisNameGap"),d=this.get("triggerEvent"),f=Ue(this.get("indicator")||[],function(p){p.max!=null&&p.max>0&&!p.min?p.min=0:p.min!=null&&p.min<0&&!p.max&&(p.max=0);var m=l;p.color!=null&&(m=Pt({color:p.color},l));var g=en(Tt(p),{boundaryGap:t,splitNumber:r,scale:i,axisLine:a,axisTick:s,axisLabel:o,name:p.text,showName:u,nameLocation:"end",nameGap:h,nameTextStyle:m,triggerEvent:d},!1);if(Ke(c)){var v=g.name;g.name=c.replace("{value}",v??"")}else St(c)&&(g.name=c(g.name,g));var b=new Sn(g,null,this.ecModel);return Zi(b,w2.prototype),b.mainType="radar",b.componentIndex=this.componentIndex,b},this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"50%",startAngle:90,axisName:{show:!0,color:ve.color.axisLabel},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:en({lineStyle:{color:ve.color.neutral20}},hT.axisLine),axisLabel:ZI(hT.axisLabel,!1),axisTick:ZI(hT.axisTick,!1),splitLine:ZI(hT.splitLine,!0),splitArea:ZI(hT.splitArea,!0),indicator:[]},e})(_n),aUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll(),this._buildAxes(t,i),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t,r){var i=t.coordinateSystem,a=i.getIndicatorAxes(),s=Ue(a,function(o){var l=o.model.get("showName")?o.name:"",u=new go(o.model,r,{axisName:l,position:[i.cx,i.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return u});W(s,function(o){o.build(),this.group.add(o.group)},this)},e.prototype._buildSplitLineAndArea=function(t){var r=t.coordinateSystem,i=r.getIndicatorAxes();if(!i.length)return;var a=t.get("shape"),s=t.getModel("splitLine"),o=t.getModel("splitArea"),l=s.getModel("lineStyle"),u=o.getModel("areaStyle"),c=s.get("show"),h=o.get("show"),d=l.get("color"),f=u.get("color"),p=Be(d)?d:[d],m=Be(f)?f:[f],g=[],v=[];function b(G,F,X){var j=X%F.length;return G[j]=G[j]||[],j}if(a==="circle")for(var S=i[0].getTicksCoords(),w=r.cx,E=r.cy,T=0;T<S.length;T++){if(c){var M=b(g,p,T);g[M].push(new sp({shape:{cx:w,cy:E,r:S[T].coord}}))}if(h&&T<S.length-1){var M=b(v,m,T);v[M].push(new p2({shape:{cx:w,cy:E,r0:S[T].coord,r:S[T+1].coord}}))}}else for(var P,I=Ue(i,function(G,F){var X=G.getTicksCoords();return P=P==null?X.length-1:Math.min(X.length-1,P),Ue(X,function(j){return r.coordToPoint(j.coord,F)})}),D=[],T=0;T<=P;T++){for(var R=[],B=0;B<i.length;B++)R.push(I[B][T]);if(R[0]&&R.push(R[0].slice()),c){var M=b(g,p,T);g[M].push(new gs({shape:{points:R}}))}if(h&&D){var M=b(v,m,T-1);v[M].push(new Vs({shape:{points:R.concat(D)}}))}D=R.slice().reverse()}var k=l.getLineStyle(),V=u.getAreaStyle();W(v,function(G,F){this.group.add(wu(G,{style:Pt({stroke:"none",fill:m[F%m.length]},V),silent:!0}))},this),W(g,function(G,F){this.group.add(wu(G,{style:Pt({fill:"none",stroke:p[F%p.length]},k),silent:!0}))},this)},e.type="radar",e})(Gr),sUe=(function(n){be(e,n);function e(t,r,i){var a=n.call(this,t,r,i)||this;return a.type="value",a.angle=0,a.name="",a}return e})(Oc),oUe=(function(){function n(e,t,r){this.dimensions=[],this._model=e,this._indicatorAxes=Ue(e.getIndicatorModels(),function(i,a){var s="indicator_"+a,o=new sUe(s,new Zf);return o.name=i.get("name"),o.model=i,i.axis=o,this.dimensions.push(s),o},this),this.resize(e,r)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(e,t){var r=this._indicatorAxes[t];return this.coordToPoint(r.dataToCoord(e),t)},n.prototype.coordToPoint=function(e,t){var r=this._indicatorAxes[t],i=r.angle,a=this.cx+e*Math.cos(i),s=this.cy-e*Math.sin(i);return[a,s]},n.prototype.pointToData=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=Math.sqrt(t*t+r*r);t/=i,r/=i;for(var a=Math.atan2(-r,t),s=1/0,o,l=-1,u=0;u<this._indicatorAxes.length;u++){var c=this._indicatorAxes[u],h=Math.abs(a-c.angle);h<s&&(o=c,l=u,s=h)}return[l,+(o&&o.coordToData(i))]},n.prototype.resize=function(e,t){var r=ha(e,t).refContainer,i=e.get("center"),a=Math.min(r.width,r.height)/2;this.cx=Xe(i[0],r.width)+r.x,this.cy=Xe(i[1],r.height)+r.y,this.startAngle=e.get("startAngle")*Math.PI/180;var s=e.get("radius");(Ke(s)||Ln(s))&&(s=[0,s]),this.r0=Xe(s[0],a),this.r=Xe(s[1],a),W(this._indicatorAxes,function(o,l){o.setExtent(this.r0,this.r);var u=this.startAngle+l*Math.PI*2/this._indicatorAxes.length;u=Math.atan2(Math.sin(u),Math.cos(u)),o.angle=u},this)},n.prototype.update=function(e,t){var r=this._indicatorAxes,i=this._model;W(r,function(o){o.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(o,l){if(!(o.get("coordinateSystem")!=="radar"||e.getComponent("radar",o.get("radarIndex"))!==i)){var u=o.getData();W(r,function(c){c.scale.unionExtentFromData(u,u.mapDimension(c.dim))})}},this);var a=i.get("splitNumber"),s=new Zf;s.setExtent(0,a),s.setInterval(1),W(r,function(o,l){Ope(o.scale,o.model,s)})},n.prototype.convertToPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(e,t,r){return console.warn("Not implemented."),null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.create=function(e,t){var r=[];return e.eachComponent("radar",function(i){var a=new n(i,e,t);r.push(a),i.coordinateSystem=a}),e.eachSeriesByType("radar",function(i){i.get("coordinateSystem")==="radar"&&(i.coordinateSystem=r[i.get("radarIndex")||0])}),r},n.dimensions=[],n})();function lUe(n){n.registerCoordinateSystem("radar",oUe),n.registerComponentModel(iUe),n.registerComponentView(aUe),n.registerVisual({seriesType:"radar",reset:function(e){var t=e.getData();t.each(function(r){t.setItemVisual(r,"legendIcon","roundRect")}),t.setVisual("legendIcon","roundRect")}})}function uUe(n){sn(lUe),n.registerChartView(nUe),n.registerSeriesModel(rUe),n.registerLayout(eUe),n.registerProcessor(qS("radar")),n.registerPreprocessor(tUe)}var a7=mn();function cUe(n,e,t){a7(n)[e]=t}function hUe(n,e,t){var r=a7(n),i=r[e];i===t&&(r[e]=null)}function mee(n,e){return!!a7(n)[e]}dd({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},ki);var dUe={axisPointer:1,tooltip:1,brush:1};function jpe(n,e,t){var r=e.getComponentByElement(n.topTarget);if(!r||r===t||dUe.hasOwnProperty(r.mainType))return!1;var i=r.coordinateSystem;if(!i||i.model===t)return!1;var a=jy(r),s=jy(t);return!((a.zlevel-s.zlevel||a.z-s.z)<=0)}var hx=(function(n){be(e,n);function e(t){var r=n.call(this)||this;r._zr=t;var i=Qe(r._mousedownHandler,r),a=Qe(r._mousemoveHandler,r),s=Qe(r._mouseupHandler,r),o=Qe(r._mousewheelHandler,r),l=Qe(r._pinchHandler,r);return r.enable=function(u,c){var h=c.zInfo,d=jy(h.component),f=d.z,p=d.zlevel,m={component:h.component,z:f,zlevel:p,z2:dt(h.z2,-1/0)},g=Pe({},c.triggerInfo);this._opt=Pt(Pe({},c),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:m,triggerInfo:g}),u==null&&(u=!0),(!this._enabled||this._controlType!==u)&&(this._enabled=!0,this.disable(),(u===!0||u==="move"||u==="pan")&&(fT(t,"mousedown",i,m),fT(t,"mousemove",a,m),fT(t,"mouseup",s,m)),(u===!0||u==="scale"||u==="zoom")&&(fT(t,"mousewheel",o,m),fT(t,"pinch",l,m)))},r.disable=function(){this._enabled=!1,pT(t,"mousedown",i),pT(t,"mousemove",a),pT(t,"mouseup",s),pT(t,"mousewheel",o),pT(t,"pinch",l)},r}return e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype._checkPointer=function(t,r,i){var a=this._opt,s=a.zInfoParsed;if(jpe(t,a.api,s.component))return!1;var o=a.triggerInfo,l=o.roamTrigger,u=!1;return l==="global"&&(u=!0),u||(u=o.isInSelf(t,r,i)),u&&o.isInClip&&!o.isInClip(t,r,i)&&(u=!1),u},e.prototype._decideCursorStyle=function(t,r,i,a){var s=t.target;if(!s&&this._checkPointer(t,r,i))return"grab";if(a)return s&&s.cursor||"default"},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(LK(t)||dT(t))){for(var r=t.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var i=t.offsetX,a=t.offsetY;this._checkPointer(t,i,a)&&(this._x=i,this._y=a,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){var r=this._zr;if(!(t.gestureEvent==="pinch"||mee(r,"globalPan")||dT(t))){var i=t.offsetX,a=t.offsetY;if(!this._dragging||!RL("moveOnMouseMove",t,this._opt)){var s=this._decideCursorStyle(t,i,a,!1);s&&r.setCursorStyle(s);return}r.setCursorStyle("grabbing");var o=this._x,l=this._y,u=i-o,c=a-l;this._x=i,this._y=a,this._opt.preventDefaultMouseMove&&Xf(t.event),t.__ecRoamConsumed=!0,gee(this,"pan","moveOnMouseMove",t,{dx:u,dy:c,oldX:o,oldY:l,newX:i,newY:a,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){if(!dT(t)){var r=this._zr;if(!LK(t)){this._dragging=!1;var i=this._decideCursorStyle(t,t.offsetX,t.offsetY,!0);i&&r.setCursorStyle(i)}}},e.prototype._mousewheelHandler=function(t){if(!dT(t)){var r=RL("zoomOnMouseWheel",t,this._opt),i=RL("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,s=Math.abs(a),o=t.offsetX,l=t.offsetY;if(!(a===0||!r&&!i)){if(r){var u=s>3?1.4:s>1?1.2:1.1,c=a>0?u:1/u;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",t,{scale:c,originX:o,originY:l,isAvailableBehavior:null})}if(i){var h=Math.abs(a),d=(a>0?1:-1)*(h>3?.4:h>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:d,originX:o,originY:l,isAvailableBehavior:null})}}}},e.prototype._pinchHandler=function(t){if(!(mee(this._zr,"globalPan")||dT(t))){var r=t.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,t,{scale:r,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e.prototype._checkTriggerMoveZoom=function(t,r,i,a,s){t._checkPointer(a,s.originX,s.originY)&&(Xf(a.event),a.__ecRoamConsumed=!0,gee(t,r,i,a,s))},e})(Uu);function dT(n){return n.__ecRoamConsumed}var fUe=mn();function A3(n){var e=fUe(n);return e.roam=e.roam||{},e.uniform=e.uniform||{},e}function fT(n,e,t,r){for(var i=A3(n),a=i.roam,s=a[e]=a[e]||[],o=0;o<s.length;o++){var l=s[o].zInfoParsed;if((l.zlevel-r.zlevel||l.z-r.z||l.z2-r.z2)<=0)break}s.splice(o,0,{listener:t,zInfoParsed:r}),pUe(n,e)}function pT(n,e,t){for(var r=A3(n),i=r.roam[e]||[],a=0;a<i.length;a++)if(i[a].listener===t){i.splice(a,1),i.length||mUe(n,e);return}}function pUe(n,e){var t=A3(n);t.uniform[e]||n.on(e,t.uniform[e]=function(r){var i=t.roam[e];if(i)for(var a=0;a<i.length;a++)i[a].listener(r)})}function mUe(n,e){var t=A3(n),r=t.uniform;r[e]&&(n.off(e,r[e]),r[e]=null)}function gee(n,e,t,r,i){i.isAvailableBehavior=Qe(RL,null,t,r),n.trigger(e,i)}function RL(n,e,t){var r=t[n];return!n||r&&(!Ke(r)||e.event[r+"Key"])}function s7(n,e,t){var r=n.target;r.x+=e,r.y+=t,r.dirty()}function o7(n,e,t,r){var i=n.target,a=n.zoomLimit,s=n.zoom=n.zoom||1;s*=e,s=l7(s,a);var o=s/n.zoom;n.zoom=s,Xpe(i,t,r,o),i.dirty()}function Wpe(n,e,t,r,i,a){var s=new Rt(0,0,0,0);r.enable(n.get("roam"),{api:e,zInfo:{component:n},triggerInfo:{roamTrigger:n.get("roamTrigger"),isInSelf:function(u,c,h){return s.copy(t.getBoundingRect()),s.applyTransform(t.getComputedTransform()),s.contain(c,h)},isInClip:function(u,c,h){return!a||a.contain(c,h)}}}),i.zoomLimit=n.get("scaleLimit");var o=n.coordinateSystem;i.zoom=o?o.getZoom():1;var l=n.subType+"Roam";r.off("pan").off("zoom").on("pan",function(u){s7(i,u.dx,u.dy),e.dispatchAction({seriesId:n.id,type:l,dx:u.dx,dy:u.dy})}).on("zoom",function(u){o7(i,u.scale,u.originX,u.originY),e.dispatchAction({seriesId:n.id,type:l,zoom:u.scale,originX:u.originX,originY:u.originY}),e.updateLabelLayout()})}function vee(n,e){return n.pointToProjected?n.pointToProjected(e):n.pointToData(e)}function C3(n,e,t){var r=n.getZoom(),i=n.getCenter(),a=e.zoom,s=n.projectedToPoint?n.projectedToPoint(i):n.dataToPoint(i);return e.dx!=null&&e.dy!=null&&(s[0]-=e.dx,s[1]-=e.dy,n.setCenter(vee(n,s))),a!=null&&(a=l7(r*a,t)/r,Xpe(n,e.originX,e.originY,a),n.updateTransform(),n.setCenter(vee(n,s)),n.setZoom(a*r)),{center:n.getCenter(),zoom:n.getZoom()}}function Xpe(n,e,t,r){n.x-=(e-n.x)*(r-1),n.y-=(t-n.y)*(r-1),n.scaleX*=r,n.scaleY*=r}function l7(n,e){if(e){var t=e.min||0,r=e.max||1/0;n=Math.max(Math.min(r,n),t)}return n}function $pe(n){if(Ke(n)){var e=new DOMParser;n=e.parseFromString(n,"text/xml")}var t=n;for(t.nodeType===9&&(t=t.firstChild);t.nodeName.toLowerCase()!=="svg"||t.nodeType!==1;)t=t.nextSibling;return t}var q4,EN={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},yee=An(EN),AN={"alignment-baseline":"textBaseline","stop-color":"stopColor"},xee=An(AN),gUe=(function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(e,t){t=t||{};var r=$pe(e);this._defsUsePending=[];var i=new wt;this._root=i;var a=[],s=r.getAttribute("viewBox")||"",o=parseFloat(r.getAttribute("width")||t.width),l=parseFloat(r.getAttribute("height")||t.height);isNaN(o)&&(o=null),isNaN(l)&&(l=null),Qo(r,i,null,!0,!1);for(var u=r.firstChild;u;)this._parseNode(u,i,a,null,!1,!1),u=u.nextSibling;xUe(this._defs,this._defsUsePending),this._defsUsePending=[];var c,h;if(s){var d=M3(s);d.length>=4&&(c={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(c&&o!=null&&l!=null&&(h=qpe(c,{x:0,y:0,width:o,height:l}),!t.ignoreViewBox)){var f=i;i=new wt,i.add(f),f.scaleX=f.scaleY=h.scale,f.x=h.x,f.y=h.y}return!t.ignoreRootClip&&o!=null&&l!=null&&i.setClipPath(new fn({shape:{x:0,y:0,width:o,height:l}})),{root:i,width:o,height:l,viewBoxRect:c,viewBoxTransform:h,named:a}},n.prototype._parseNode=function(e,t,r,i,a,s){var o=e.nodeName.toLowerCase(),l,u=i;if(o==="defs"&&(a=!0),o==="text"&&(s=!0),o==="defs"||o==="switch")l=t;else{if(!a){var c=q4[o];if(c&&it(q4,o)){l=c.call(this,e,t);var h=e.getAttribute("name");if(h){var d={name:h,namedFrom:null,svgNodeTagLower:o,el:l};r.push(d),o==="g"&&(u=d)}else i&&r.push({name:i.name,namedFrom:i,svgNodeTagLower:o,el:l});t.add(l)}}var f=_ee[o];if(f&&it(_ee,o)){var p=f.call(this,e),m=e.getAttribute("id");m&&(this._defs[m]=p)}}if(l&&l.isGroup)for(var g=e.firstChild;g;)g.nodeType===1?this._parseNode(g,l,r,u,a,s):g.nodeType===3&&s&&this._parseText(g,l),g=g.nextSibling},n.prototype._parseText=function(e,t){var r=new nS({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});Yl(t,r),Qo(e,r,this._defsUsePending,!1,!1),vUe(r,t);var i=r.style,a=i.fontSize;a&&a<9&&(i.fontSize=9,r.scaleX*=a/9,r.scaleY*=a/9);var s=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=s;var o=r.getBoundingRect();return this._textX+=o.width,t.add(r),r},n.internalField=(function(){q4={g:function(e,t){var r=new wt;return Yl(t,r),Qo(e,r,this._defsUsePending,!1,!1),r},rect:function(e,t){var r=new fn;return Yl(t,r),Qo(e,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(e,t){var r=new sp;return Yl(t,r),Qo(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),r.silent=!0,r},line:function(e,t){var r=new Xi;return Yl(t,r),Qo(e,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(e,t){var r=new c3;return Yl(t,r),Qo(e,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(e,t){var r=e.getAttribute("points"),i;r&&(i=wee(r));var a=new Vs({shape:{points:i||[]},silent:!0});return Yl(t,a),Qo(e,a,this._defsUsePending,!1,!1),a},polyline:function(e,t){var r=e.getAttribute("points"),i;r&&(i=wee(r));var a=new gs({shape:{points:i||[]},silent:!0});return Yl(t,a),Qo(e,a,this._defsUsePending,!1,!1),a},image:function(e,t){var r=new Ka;return Yl(t,r),Qo(e,r,this._defsUsePending,!1,!1),r.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),r.silent=!0,r},text:function(e,t){var r=e.getAttribute("x")||"0",i=e.getAttribute("y")||"0",a=e.getAttribute("dx")||"0",s=e.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(a),this._textY=parseFloat(i)+parseFloat(s);var o=new wt;return Yl(t,o),Qo(e,o,this._defsUsePending,!1,!0),o},tspan:function(e,t){var r=e.getAttribute("x"),i=e.getAttribute("y");r!=null&&(this._textX=parseFloat(r)),i!=null&&(this._textY=parseFloat(i));var a=e.getAttribute("dx")||"0",s=e.getAttribute("dy")||"0",o=new wt;return Yl(t,o),Qo(e,o,this._defsUsePending,!1,!0),this._textX+=parseFloat(a),this._textY+=parseFloat(s),o},path:function(e,t){var r=e.getAttribute("d")||"",i=hhe(r);return Yl(t,i),Qo(e,i,this._defsUsePending,!1,!1),i.silent=!0,i}}})(),n})(),_ee={lineargradient:function(n){var e=parseInt(n.getAttribute("x1")||"0",10),t=parseInt(n.getAttribute("y1")||"0",10),r=parseInt(n.getAttribute("x2")||"10",10),i=parseInt(n.getAttribute("y2")||"0",10),a=new VS(e,t,r,i);return bee(n,a),See(n,a),a},radialgradient:function(n){var e=parseInt(n.getAttribute("cx")||"0",10),t=parseInt(n.getAttribute("cy")||"0",10),r=parseInt(n.getAttribute("r")||"0",10),i=new mhe(e,t,r);return bee(n,i),See(n,i),i}};function bee(n,e){var t=n.getAttribute("gradientUnits");t==="userSpaceOnUse"&&(e.global=!0)}function See(n,e){for(var t=n.firstChild;t;){if(t.nodeType===1&&t.nodeName.toLocaleLowerCase()==="stop"){var r=t.getAttribute("offset"),i=void 0;r&&r.indexOf("%")>0?i=parseInt(r,10)/100:r?i=parseFloat(r):i=0;var a={};Ype(t,a,a);var s=a.stopColor||t.getAttribute("stop-color")||"#000000",o=a.stopOpacity||t.getAttribute("stop-opacity");if(o){var l=jo(s),u=l&&l[3];u&&(l[3]*=dg(o),s=Xh(l,"rgba"))}e.colorStops.push({offset:i,color:s})}t=t.nextSibling}}function Yl(n,e){n&&n.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Pt(e.__inheritedStyle,n.__inheritedStyle))}function wee(n){for(var e=M3(n),t=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),a=parseFloat(e[r+1]);t.push([i,a])}return t}function Qo(n,e,t,r,i){var a=e,s=a.__inheritedStyle=a.__inheritedStyle||{},o={};n.nodeType===1&&(SUe(n,e),Ype(n,s,o),r||wUe(n,s,o)),a.style=a.style||{},s.fill!=null&&(a.style.fill=Tee(a,"fill",s.fill,t)),s.stroke!=null&&(a.style.stroke=Tee(a,"stroke",s.stroke,t)),W(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(l){s[l]!=null&&(a.style[l]=parseFloat(s[l]))}),W(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(l){s[l]!=null&&(a.style[l]=s[l])}),i&&(a.__selfStyle=o),s.lineDash&&(a.style.lineDash=Ue(M3(s.lineDash),function(l){return parseFloat(l)})),(s.visibility==="hidden"||s.visibility==="collapse")&&(a.invisible=!0),s.display==="none"&&(a.ignore=!0)}function vUe(n,e){var t=e.__selfStyle;if(t){var r=t.textBaseline,i=r;!r||r==="auto"||r==="baseline"?i="alphabetic":r==="before-edge"||r==="text-before-edge"?i="top":r==="after-edge"||r==="text-after-edge"?i="bottom":(r==="central"||r==="mathematical")&&(i="middle"),n.style.textBaseline=i}var a=e.__inheritedStyle;if(a){var s=a.textAlign,o=s;s&&(s==="middle"&&(o="center"),n.style.textAlign=o)}}var yUe=/^url\(\s*#(.*?)\)/;function Tee(n,e,t,r){var i=t&&t.match(yUe);if(i){var a=Mu(i[1]);r.push([n,e,a]);return}return t==="none"&&(t=null),t}function xUe(n,e){for(var t=0;t<e.length;t++){var r=e[t];r[0].style[r[1]]=n[r[2]]}}var _Ue=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function M3(n){return n.match(_Ue)||[]}var bUe=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,K4=Math.PI/180;function SUe(n,e){var t=n.getAttribute("transform");if(t){t=t.replace(/,/g," ");var r=[],i=null;t.replace(bUe,function(h,d,f){return r.push(d,f),""});for(var a=r.length-1;a>0;a-=2){var s=r[a],o=r[a-1],l=M3(s);switch(i=i||Ya(),o){case"translate":td(i,i,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":$G(i,i,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":Rg(i,i,-parseFloat(l[0])*K4,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":var u=Math.tan(parseFloat(l[0])*K4);Wh(i,[1,0,u,1,0,0],i);break;case"skewY":var c=Math.tan(parseFloat(l[0])*K4);Wh(i,[1,c,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(l[0]),i[1]=parseFloat(l[1]),i[2]=parseFloat(l[2]),i[3]=parseFloat(l[3]),i[4]=parseFloat(l[4]),i[5]=parseFloat(l[5]);break}}e.setLocalTransform(i)}}var Eee=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Ype(n,e,t){var r=n.getAttribute("style");if(r){Eee.lastIndex=0;for(var i;(i=Eee.exec(r))!=null;){var a=i[1],s=it(EN,a)?EN[a]:null;s&&(e[s]=i[2]);var o=it(AN,a)?AN[a]:null;o&&(t[o]=i[2])}}}function wUe(n,e,t){for(var r=0;r<yee.length;r++){var i=yee[r],a=n.getAttribute(i);a!=null&&(e[EN[i]]=a)}for(var r=0;r<xee.length;r++){var i=xee[r],a=n.getAttribute(i);a!=null&&(t[AN[i]]=a)}}function qpe(n,e){var t=e.width/n.width,r=e.height/n.height,i=Math.min(t,r);return{scale:i,x:-(n.x+n.width/2)*i+(e.x+e.width/2),y:-(n.y+n.height/2)*i+(e.y+e.height/2)}}function TUe(n,e){var t=new gUe;return t.parse(n,e)}var EUe=ct(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),AUe=(function(){function n(e,t){this.type="geoSVG",this._usedGraphicMap=ct(),this._freedGraphics=[],this._mapName=e,this._parsedXML=$pe(t)}return n.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=MUe(e.named),r=t.regions,i=t.regionsMap;this._regions=r,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(e){var t,r;try{t=e&&TUe(e,{ignoreViewBox:!0,ignoreRootClip:!0})||{},r=t.root,Us(r!=null)}catch(g){throw new Error(`Invalid svg format
`+g.message)}var i=new wt;i.add(r),i.isGeoSVGGraphicRoot=!0;var a=t.width,s=t.height,o=t.viewBoxRect,l=this._boundingRect;if(!l){var u=void 0,c=void 0,h=void 0,d=void 0;if(a!=null?(u=0,h=a):o&&(u=o.x,h=o.width),s!=null?(c=0,d=s):o&&(c=o.y,d=o.height),u==null||c==null){var f=r.getBoundingRect();u==null&&(u=f.x,h=f.width),c==null&&(c=f.y,d=f.height)}l=this._boundingRect=new Rt(u,c,h,d)}if(o){var p=qpe(o,l);r.scaleX=r.scaleY=p.scale,r.x=p.x,r.y=p.y}i.setClipPath(new fn({shape:l.plain()}));var m=[];return W(t.named,function(g){EUe.get(g.svgNodeTagLower)!=null&&(m.push(g),CUe(g.el))}),{root:i,boundingRect:l,named:m}},n.prototype.useGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,r),r)},n.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,r=t.get(e);r&&(t.removeKey(e),this._freedGraphics.push(r))},n})();function CUe(n){n.silent=!1,n.isGroup&&n.traverse(function(e){e.silent=!1})}function MUe(n){var e=[],t=ct();return W(n,function(r){if(r.namedFrom==null){var i=new GFe(r.name,r.el);e.push(i),t.set(r.name,i)}}),{regions:e,regionsMap:t}}var v8=[126,25],Aee="",Fv=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var Mv=0;Mv<Fv.length;Mv++)for(var i_=0;i_<Fv[Mv].length;i_++)Fv[Mv][i_][0]/=10.5,Fv[Mv][i_][1]/=-10.5/.75,Fv[Mv][i_][0]+=v8[0],Fv[Mv][i_][1]+=v8[1];function DUe(n,e){if(n==="china"){for(var t=0;t<e.length;t++)if(e[t].name===Aee)return;e.push(new Pfe(Aee,Ue(Fv,function(r){return{type:"polygon",exterior:r}}),v8))}}var IUe={:[32,80],:[0,-10],:[10,5],:[-10,10],:[5,5]};function PUe(n,e){if(n==="china"){var t=IUe[e.name];if(t){var r=e.getCenter();r[0]+=t[0]/10.5,r[1]+=-t[1]/(10.5/.75),e.setCenter(r)}}}var LUe=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function RUe(n,e){n==="china"&&e.name===""&&e.geometries.push({type:"polygon",exterior:LUe[0]})}var NUe="name",kUe=(function(){function n(e,t,r){this.type="geoJSON",this._parsedMap=ct(),this._mapName=e,this._specialAreas=r,this._geoJSON=BUe(t)}return n.prototype.load=function(e,t){t=t||NUe;var r=this._parsedMap.get(t);if(!r){var i=this._parseToRegions(t);r=this._parsedMap.set(t,{regions:i,boundingRect:OUe(i)})}var a=ct(),s=[];return W(r.regions,function(o){var l=o.name;e&&it(e,l)&&(o=o.cloneShallow(l=e[l])),s.push(o),a.set(l,o)}),{regions:s,boundingRect:r.boundingRect||new Rt(0,0,0,0),regionsMap:a}},n.prototype._parseToRegions=function(e){var t=this._mapName,r=this._geoJSON,i;try{i=r?WFe(r,e):[]}catch(a){throw new Error(`Invalid geoJson format
`+a.message)}return DUe(t,i),W(i,function(a){var s=a.name;PUe(t,a),RUe(t,a);var o=this._specialAreas&&this._specialAreas[s];o&&a.transformTo(o.left,o.top,o.width,o.height)},this),i},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n})();function OUe(n){for(var e,t=0;t<n.length;t++){var r=n[t].getBoundingRect();e=e||r.clone(),e.union(r)}return e}function BUe(n){return Ke(n)?typeof JSON<"u"&&JSON.parse?JSON.parse(n):new Function("return ("+n+");")():n}var mT=ct();const Qf={registerMap:function(n,e,t){if(e.svg){var r=new AUe(n,e.svg);mT.set(n,r)}else{var i=e.geoJson||e.geoJSON;i&&!e.features?t=e.specialAreas:i=e;var r=new kUe(n,i,t);mT.set(n,r)}},getGeoResource:function(n){return mT.get(n)},getMapForUser:function(n){var e=mT.get(n);return e&&e.type==="geoJSON"&&e.getMapForUser()},load:function(n,e,t){var r=mT.get(n);if(r)return r.load(e,t)}};var u7=["rect","circle","line","ellipse","polygon","polyline","path"],FUe=ct(u7),UUe=ct(u7.concat(["g"])),zUe=ct(u7.concat(["g"])),Kpe=mn();function QI(n){var e=n.getItemStyle(),t=n.get("areaColor");return t!=null&&(e.fill=t),e}function Cee(n){var e=n.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var Zpe=(function(){function n(e){var t=this.group=new wt,r=this._transformGroup=new wt;t.add(r),this.uid=jS("ec_map_draw"),this._controller=new hx(e.getZr()),this._controllerHost={target:r},r.add(this._regionsGroup=new wt),r.add(this._svgGroup=new wt)}return n.prototype.draw=function(e,t,r,i,a){var s=e.mainType==="geo",o=e.getData&&e.getData();s&&t.eachComponent({mainType:"series",subType:"map"},function(S){!o&&S.getHostGeoModel()===e&&(o=S.getData())});var l=e.coordinateSystem,u=this._regionsGroup,c=this._transformGroup,h=l.getTransformInfo(),d=h.raw,f=h.roam,p=!u.childAt(0)||a,m=e.getShallow("clip",!0),g;m?(g=l.getViewRect().clone(),this.group.setClipPath(new fn({shape:g.clone()}))):this.group.removeClipPath(),p?(c.x=f.x,c.y=f.y,c.scaleX=f.scaleX,c.scaleY=f.scaleY,c.dirty()):Vn(c,f,e);var v=o&&o.getVisual("visualMeta")&&o.getVisual("visualMeta").length>0,b={api:r,geo:l,mapOrGeoModel:e,data:o,isVisualEncodedByVisualMap:v,isGeo:s,transformInfoRaw:d};l.resourceType==="geoJSON"?this._buildGeoJSON(b):l.resourceType==="geoSVG"&&this._buildSVG(b),this._updateController(e,g,t,r),this._updateMapSelectHandler(e,u,r,i)},n.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=ct(),r=ct(),i=this._regionsGroup,a=e.transformInfoRaw,s=e.mapOrGeoModel,o=e.data,l=e.geo.projection,u=l&&l.stream;function c(f,p){return p&&(f=p(f)),f&&[f[0]*a.scaleX+a.x,f[1]*a.scaleY+a.y]}function h(f){for(var p=[],m=!u&&l&&l.project,g=0;g<f.length;++g){var v=c(f[g],m);v&&p.push(v)}return p}function d(f){return{shape:{points:h(f)}}}i.removeAll(),W(e.geo.regions,function(f){var p=f.name,m=t.get(p),g=r.get(p)||{},v=g.dataIdx,b=g.regionModel;if(!m){m=t.set(p,new wt),i.add(m),v=o?o.indexOfName(p):null,b=e.isGeo?s.getRegionModel(p):o?o.getItemModel(v):null;var S=b.get("silent",!0);S!=null&&(m.silent=S),r.set(p,{dataIdx:v,regionModel:b})}var w=[],E=[];W(f.geometries,function(P){if(P.type==="polygon"){var I=[P.exterior].concat(P.interiors||[]);u&&(I=Ree(I,u)),W(I,function(R){w.push(new Vs(d(R)))})}else{var D=P.points;u&&(D=Ree(D,u,!0)),W(D,function(R){E.push(new gs(d(R)))})}});var T=c(f.getCenter(),l&&l.project);function M(P,I){if(P.length){var D=new d3({culling:!0,segmentIgnoreThreshold:1,shape:{paths:P}});m.add(D),Mee(e,D,v,b),Dee(e,D,p,b,s,v,T),I&&(Cee(D),W(D.states,Cee))}}M(w),M(E,!0)}),t.each(function(f,p){var m=r.get(p),g=m.dataIdx,v=m.regionModel;Iee(e,f,p,v,s,g),Pee(e,f,p,v,s),Lee(e,f,p,v,s)},this)},n.prototype._buildSVG=function(e){var t=e.geo.map,r=e.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=ct(),a=!1;W(this._svgGraphicRecord.named,function(s){var o=s.name,l=e.mapOrGeoModel,u=e.data,c=s.svgNodeTagLower,h=s.el,d=u?u.indexOfName(o):null,f=l.getRegionModel(o);FUe.get(c)!=null&&h instanceof Nu&&Mee(e,h,d,f),h instanceof Nu&&(h.culling=!0);var p=f.get("silent",!0);if(p!=null&&(h.silent=p),h.z2EmphasisLift=0,!s.namedFrom&&(zUe.get(c)!=null&&Dee(e,h,o,f,l,d,null),Iee(e,h,o,f,l,d),Pee(e,h,o,f,l),UUe.get(c)!=null)){var m=Lee(e,h,o,f,l);m==="self"&&(a=!0);var g=i.get(o)||i.set(o,[]);g.push(h)}},this),this._enableBlurEntireSVG(a,e)},n.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var r=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=r.opacity;this._svgGraphicRecord.root.traverse(function(a){if(!a.isGroup){Hy(a);var s=a.ensureState("blur").style||{};s.opacity==null&&i!=null&&(s.opacity=i),a.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(e,t){if(e==null)return[];var r=t.coordinateSystem;if(r.resourceType==="geoJSON"){var i=this._regionsGroupByName;if(i){var a=i.get(e);return a?[a]:[]}}else if(r.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},n.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},n.prototype._useSVG=function(e){var t=Qf.getGeoResource(e);if(t&&t.type==="geoSVG"){var r=t.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=e}},n.prototype._freeSVG=function(){var e=this._svgMapName;if(e!=null){var t=Qf.getGeoResource(e);t&&t.type==="geoSVG"&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(e,t,r,i){var a=e.coordinateSystem,s=this._controller,o=this._controllerHost;o.zoomLimit=e.get("scaleLimit"),o.zoom=a.getZoom(),s.enable(e.get("roam")||!1,{api:i,zInfo:{component:e},triggerInfo:{roamTrigger:e.get("roamTrigger"),isInSelf:function(c,h,d){return a.containPoint([h,d])},isInClip:function(c,h,d){return!t||t.contain(h,d)}}});var l=e.mainType;function u(){var c={type:"geoRoam",componentType:l};return c[l+"Id"]=e.id,c}s.off("pan").on("pan",function(c){this._mouseDownFlag=!1,s7(o,c.dx,c.dy),i.dispatchAction(Pe(u(),{dx:c.dx,dy:c.dy,animation:{duration:0}}))},this),s.off("zoom").on("zoom",function(c){this._mouseDownFlag=!1,o7(o,c.scale,c.originX,c.originY),i.dispatchAction(Pe(u(),{totalZoom:o.zoom,zoom:c.scale,originX:c.originX,originY:c.originY,animation:{duration:0}}))},this)},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(e){var t=e.getTextContent();t&&(t.ignore=Kpe(t).ignore)})},n.prototype._updateMapSelectHandler=function(e,t,r,i){var a=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",function(){a._mouseDownFlag=!0}),t.on("click",function(s){a._mouseDownFlag&&(a._mouseDownFlag=!1)}))},n})();function Mee(n,e,t,r){var i=r.getModel("itemStyle"),a=r.getModel(["emphasis","itemStyle"]),s=r.getModel(["blur","itemStyle"]),o=r.getModel(["select","itemStyle"]),l=QI(i),u=QI(a),c=QI(o),h=QI(s),d=n.data;if(d){var f=d.getItemVisual(t,"style"),p=d.getItemVisual(t,"decal");n.isVisualEncodedByVisualMap&&f.fill&&(l.fill=f.fill),p&&(l.decal=aS(p,n.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=u,e.ensureState("select").style=c,e.ensureState("blur").style=h,Hy(e)}function Dee(n,e,t,r,i,a,s){var o=n.data,l=n.isGeo,u=o&&isNaN(o.get(o.mapDimension("value"),a)),c=o&&o.getItemLayout(a);if(l||u||c&&c.showLabel){var h=l?t:a,d=void 0;(!o||a>=0)&&(d=i);var f=s?{normal:{align:"center",verticalAlign:"middle"}}:null;Aa(e,ca(r),{labelFetcher:d,labelDataIndex:h,defaultText:t},f);var p=e.getTextContent();if(p&&(Kpe(p).ignore=p.ignore,e.textConfig&&s)){var m=e.getBoundingRect().clone();e.textConfig.layoutRect=m,e.textConfig.position=[(s[0]-m.x)/m.width*100+"%",(s[1]-m.y)/m.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function Iee(n,e,t,r,i,a){n.data?n.data.setItemGraphicEl(a,e):Ft(e).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:t,region:r&&r.option||{}}}function Pee(n,e,t,r,i){n.data||op({el:e,componentModel:i,itemName:t,itemTooltipOption:r.get("tooltip")})}function Lee(n,e,t,r,i){e.highDownSilentOnTouch=!!i.get("selectedMode");var a=r.getModel("emphasis"),s=a.get("focus");return Yr(e,s,a.get("blurScope"),a.get("disabled")),n.isGeo&&$Ne(e,i,t),s}function Ree(n,e,t){var r=[],i;function a(){i=[]}function s(){i.length&&(r.push(i),i=[])}var o=e({polygonStart:a,polygonEnd:s,lineStart:a,lineEnd:s,point:function(l,u){isFinite(l)&&isFinite(u)&&i.push([l,u])},sphere:function(){}});return!t&&o.polygonStart(),W(n,function(l){o.lineStart();for(var u=0;u<l.length;u++)o.point(l[u][0],l[u][1]);o.lineEnd()}),!t&&o.polygonEnd(),r}var VUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){if(!(a&&a.type==="mapToggleSelect"&&a.from===this.uid)){var s=this.group;if(s.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&a&&a.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),a&&a.type==="geoRoam"&&a.componentType==="series"&&a.seriesId===t.id){var o=this._mapDraw;o&&s.add(o.group)}else if(t.needsDrawMap){var o=this._mapDraw||new Zpe(i);s.add(o.group),o.draw(t,r,i,this,a),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(t,r,i)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,r,i){var a=t.originalData,s=this.group;a.each(a.mapDimension("value"),function(o,l){if(!isNaN(o)){var u=a.getItemLayout(l);if(!(!u||!u.point)){var c=u.point,h=u.offset,d=new sp({style:{fill:t.getData().getVisual("style").fill},shape:{cx:c[0]+h*9,cy:c[1],r:3},silent:!0,z2:8+(h?0:zS+1)});if(!h){var f=t.mainSeries.getData(),p=a.getName(l),m=f.indexOfName(p),g=a.getItemModel(l),v=g.getModel("label"),b=f.getItemGraphicEl(m);Aa(d,ca(g),{labelFetcher:{getFormattedLabel:function(S,w){return t.getFormattedLabel(m,w)}},defaultText:p}),d.disableLabelAnimation=!0,v.get("position")||d.setTextConfig({position:"bottom"}),b.onHoverStateChange=function(S){tN(d,S)}}s.add(d)}}})},e.type="map",e})(mr),HUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(r){if(r!=null){var i=this.getData().getName(r),a=this.coordinateSystem,s=a.getRegion(i);return s&&a.dataToPoint(s.getCenter())}},t}return e.prototype.getInitialData=function(t){for(var r=KS(this,{coordDimensions:["value"],encodeDefaulter:Qt(Ej,this)}),i=ct(),a=[],s=0,o=r.count();s<o;s++){var l=r.getName(s);i.set(l,s)}var u=Qf.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return W(u.regions,function(c){var h=c.name,d=i.get(h),f=c.properties&&c.properties.echartsStyle,p;d==null?(p={name:h},a.push(p)):p=r.getRawDataItem(d),f&&en(p,f)}),r.appendData(a),r},e.prototype.getHostGeoModel=function(){if(Ghe(this).kind!==kh.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var r=this.getData();return r.get(r.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var r=this.getData();return r.getItemModel(r.indexOfName(t))},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData(),s=this.getRawValue(t),o=a.getName(t),l=this.seriesGroup,u=[],c=0;c<l.length;c++){var h=l[c].originalData.indexOfName(o),d=a.mapDimension("value");isNaN(l[c].originalData.get(d,h))||u.push(l[c].name)}return qi("section",{header:u.join(", "),noHeader:!u.length,blocks:[qi("nameValue",{name:o,value:s})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var r=t.icon||"roundRect",i=Ki(r,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return i.setStyle(t.itemStyle),i.style.stroke="none",r.indexOf("empty")>-1&&(i.style.stroke=i.style.fill,i.style.fill=ve.color.neutral00,i.style.lineWidth=2),i},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:ve.color.tertiary},itemStyle:{borderWidth:.5,borderColor:ve.color.border,areaColor:ve.color.background},emphasis:{label:{show:!0,color:ve.color.primary},itemStyle:{areaColor:ve.color.highlight}},select:{label:{show:!0,color:ve.color.primary},itemStyle:{color:ve.color.highlight}},nameProperty:"name"},e})(Cr);function GUe(n,e){var t={};return W(n,function(r){r.each(r.mapDimension("value"),function(i,a){var s="ec-"+r.getName(a);t[s]=t[s]||[],isNaN(i)||t[s].push(i)})}),n[0].map(n[0].mapDimension("value"),function(r,i){for(var a="ec-"+n[0].getName(i),s=0,o=1/0,l=-1/0,u=t[a].length,c=0;c<u;c++)o=Math.min(o,t[a][c]),l=Math.max(l,t[a][c]),s+=t[a][c];var h;return e==="min"?h=o:e==="max"?h=l:e==="average"?h=s/u:h=s,u===0?NaN:h})}function jUe(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getHostGeoModel(),i=r?"o"+r.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)}),W(e,function(t,r){for(var i=GUe(Ue(t,function(s){return s.getData()}),t[0].get("mapValueCalculation")),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(var a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=a===0&&!t[a].getHostGeoModel(),t[a].setData(i.cloneShallow()),t[a].mainSeries=t[0]})}function WUe(n){var e={};n.eachSeriesByType("map",function(t){var r=t.getMapType();if(!(t.getHostGeoModel()||e[r])){var i={};W(t.seriesGroup,function(s){var o=s.coordinateSystem,l=s.originalData;s.get("showLegendSymbol")&&n.getComponent("legend")&&l.each(l.mapDimension("value"),function(u,c){var h=l.getName(c),d=o.getRegion(h);if(!(!d||isNaN(u))){var f=i[h]||0,p=o.dataToPoint(d.getCenter());i[h]=f+1,l.setItemLayout(c,{point:p,offset:f})}})});var a=t.getData();a.each(function(s){var o=a.getName(s),l=a.getItemLayout(s)||{};l.showLabel=!i[o],a.setItemLayout(s,l)}),e[r]=!0}})}var Nee=Oi,dx=(function(n){be(e,n);function e(t,r){var i=n.call(this)||this;return i.type="view",i.dimensions=["x","y"],i._roamTransformable=new If,i._rawTransformable=new If,i.name=t,i._opt=r,i}return e.prototype.setBoundingRect=function(t,r,i,a){return this._rect=new Rt(t,r,i,a),this._updateCenterAndZoom(),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,r,i,a){this._transformTo(t,r,i,a),this._viewRect=new Rt(t,r,i,a)},e.prototype._transformTo=function(t,r,i,a){var s=this.getBoundingRect(),o=this._rawTransformable;o.transform=s.calculateTransform(new Rt(t,r,i,a));var l=o.parent;o.parent=null,o.decomposeTransform(),o.parent=l,this._updateTransform()},e.prototype.setCenter=function(t){var r=this._opt;r&&r.api&&r.ecModel&&r.ecModel.getShallow("legacyViewCoordSysCenterBase")&&t&&(t=[Xe(t[0],r.api.getWidth()),Xe(t[1],r.api.getWidth())]),this._centerOption=Tt(t),this._updateCenterAndZoom()},e.prototype.setZoom=function(t){this._zoom=l7(t||1,this.zoomLimit),this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),r=t.x+t.width/2,i=t.y+t.height/2;return[r,i]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._centerOption,r=this._rect;t&&r&&(this._center=[Xe(t[0],r.width,r.x),Xe(t[1],r.height,r.y)]);var i=this._rawTransformable.getLocalTransform(),a=this._roamTransformable,s=this.getDefaultCenter(),o=this.getCenter(),l=this.getZoom();o=Oi([],o,i),s=Oi([],s,i),a.originX=o[0],a.originY=o[1],a.x=s[0]-o[0],a.y=s[1]-o[1],a.scaleX=a.scaleY=l,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,r=this._rawTransformable;r.parent=t,t.updateTransform(),r.updateTransform(),Qk(this.transform||(this.transform=[]),r.transform||Ya()),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],Ic(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,r=this._roamTransformable,i=new If;return i.transform=r.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,r,i){var a=r?this._rawTransform:this.transform;return i=i||[],a?Nee(i,t,a):ro(i,t)},e.prototype.pointToData=function(t,r,i){i=i||[];var a=this.invTransform;return a?Nee(i,t,a):(i[0]=t[0],i[1]=t[1],i)},e.prototype.convertToPixel=function(t,r,i){var a=kee(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=kee(r);return a===this?a.pointToData(i):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e})(If);function kee(n){var e=n.seriesModel;return e?e.coordinateSystem:null}var XUe={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Qpe=["lng","lat"],y8=(function(n){be(e,n);function e(t,r,i){var a=n.call(this,t,{api:i.api,ecModel:i.ecModel})||this;a.dimensions=Qpe,a.type="geo",a._nameCoordMap=ct(),a.map=r;var s=i.projection,o=Qf.load(r,i.nameMap,i.nameProperty),l=Qf.getGeoResource(r);a.resourceType=l?l.type:null;var u=a.regions=o.regions,c=XUe[l.type];a._regionsMap=o.regionsMap,a.regions=o.regions,a.projection=s;var h;if(s)for(var d=0;d<u.length;d++){var f=u[d].getBoundingRect(s);h=h||f.clone(),h.union(f)}else h=o.boundingRect;return a.setBoundingRect(h.x,h.y,h.width,h.height),a.aspectScale=s?1:dt(i.aspectScale,c.aspectScale),a._invertLongitute=s?!1:c.invertLongitute,a}return e.prototype._transformTo=function(t,r,i,a){var s=this.getBoundingRect(),o=this._invertLongitute;s=s.clone(),o&&(s.y=-s.y-s.height);var l=this._rawTransformable;l.transform=s.calculateTransform(new Rt(t,r,i,a));var u=l.parent;l.parent=null,l.decomposeTransform(),l.parent=u,o&&(l.scaleY=-l.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var r=this.regions,i=0;i<r.length;i++){var a=r[i];if(a.type==="geoJSON"&&a.contain(t))return r[i]}},e.prototype.addGeoCoord=function(t,r){this._nameCoordMap.set(t,r)},e.prototype.getGeoCoord=function(t){var r=this._regionsMap.get(t);return this._nameCoordMap.get(t)||r&&r.getCenter()},e.prototype.dataToPoint=function(t,r,i){if(Ke(t)&&(t=this.getGeoCoord(t)),t){var a=this.projection;return a&&(t=a.project(t)),t&&this.projectedToPoint(t,r,i)}},e.prototype.pointToData=function(t,r,i){var a=this.projection;return a&&(t=a.unproject(t)),t&&this.pointToProjected(t,i)},e.prototype.pointToProjected=function(t,r){return n.prototype.pointToData.call(this,t,0,r)},e.prototype.projectedToPoint=function(t,r,i){return n.prototype.dataToPoint.call(this,t,r,i)},e.prototype.convertToPixel=function(t,r,i){var a=Oee(r);return a===this?a.dataToPoint(i):null},e.prototype.convertFromPixel=function(t,r,i){var a=Oee(r);return a===this?a.pointToData(i):null},e})(dx);Zi(y8,dx);function Oee(n){var e=n.geoModel,t=n.seriesModel;return e?e.coordinateSystem:t?t.coordinateSystem||(t.getReferringComponents("geo",fi).models[0]||{}).coordinateSystem:null}function Bee(n,e){var t=n.get("boundingCoords");if(t!=null){var r=t[0],i=t[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(i[0])&&isFinite(i[1])){var a=this.projection;if(a){var s=r[0],o=r[1],l=i[0],u=i[1];r=[1/0,1/0],i=[-1/0,-1/0];var c=function(E,T,M,P){for(var I=M-E,D=P-T,R=0;R<=100;R++){var B=R/100,k=a.project([E+I*B,T+D*B]);tg(r,r,k),ng(i,i,k)}};c(s,o,l,o),c(l,o,l,u),c(l,u,s,u),c(s,u,l,o)}this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}}var h=this.getBoundingRect(),d=n.get("layoutCenter"),f=n.get("layoutSize"),p=ha(n,e).refContainer,m=h.width/h.height*this.aspectScale,g=!1,v,b;d&&f&&(v=[Xe(d[0],p.width)+p.x,Xe(d[1],p.height)+p.y],b=Xe(f,Math.min(p.width,p.height)),!isNaN(v[0])&&!isNaN(v[1])&&!isNaN(b)&&(g=!0));var S;if(g)S={},m>1?(S.width=b,S.height=b/m):(S.height=b,S.width=b*m),S.y=v[1]-S.height/2,S.x=v[0]-S.width/2;else{var w=n.getBoxLayoutParams();w.aspect=m,S=qr(w,p),S=Yhe(n,S,m)}this.setViewRect(S.x,S.y,S.width,S.height),this.setCenter(n.get("center")),this.setZoom(n.get("zoom"))}function $Ue(n,e){W(e.get("geoCoord"),function(t,r){n.addGeoCoord(r,t)})}var YUe=(function(){function n(){this.dimensions=Qpe}return n.prototype.create=function(e,t){var r=[];function i(s){return{nameProperty:s.get("nameProperty"),aspectScale:s.get("aspectScale"),projection:s.get("projection")}}e.eachComponent("geo",function(s,o){var l=s.get("map"),u=new y8(l+o,l,Pe({nameMap:s.get("nameMap"),api:t,ecModel:e},i(s)));u.zoomLimit=s.get("scaleLimit"),r.push(u),s.coordinateSystem=u,u.model=s,u.resize=Bee,u.resize(s,t)}),e.eachSeries(function(s){_2({targetModel:s,coordSysType:"geo",coordSysProvider:function(){var o=s.subType==="map"?s.getHostGeoModel():s.getReferringComponents("geo",fi).models[0];return o&&o.coordinateSystem},allowNotFound:!0})});var a={};return e.eachSeriesByType("map",function(s){if(!s.getHostGeoModel()){var o=s.getMapType();a[o]=a[o]||[],a[o].push(s)}}),W(a,function(s,o){var l=Ue(s,function(c){return c.get("nameMap")}),u=new y8(o,o,Pe({nameMap:GG(l),api:t,ecModel:e},i(s[0])));u.zoomLimit=fs.apply(null,Ue(s,function(c){return c.get("scaleLimit")})),r.push(u),u.resize=Bee,u.resize(s[0],t),W(s,function(c){c.coordinateSystem=u,$Ue(u,c)})}),r},n.prototype.getFilledRegions=function(e,t,r,i){for(var a=(e||[]).slice(),s=ct(),o=0;o<a.length;o++)s.set(a[o].name,a[o]);var l=Qf.load(t,r,i);return W(l.regions,function(u){var c=u.name,h=s.get(c),d=u.properties&&u.properties.echartsStyle;h||(h={name:c},a.push(h)),d&&en(h,d)}),a},n})(),Jpe=new YUe,qUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i);var a=Qf.getGeoResource(t.map);if(a&&a.type==="geoJSON"){var s=t.itemStyle=t.itemStyle||{};"color"in s||(s.color=t.defaultItemStyleColor||ve.color.backgroundTint)}Uy(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,r=this.option;r.regions=Jpe.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var i={};this._optionModelMap=ed(r.regions||[],function(a,s){var o=s.name;return o&&(a.set(o,new Sn(s,t,t.ecModel)),s.selected&&(i[o]=!0)),a},ct()),r.selectedMap||(r.selectedMap=i)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new Sn(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,r){var i=this.getRegionModel(t),a=r==="normal"?i.get(["label","formatter"]):i.get(["emphasis","label","formatter"]),s={name:t};if(St(a))return s.status=r,a(s);if(Ke(a))return a.replace("{a}",t??"")},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var r=this.option,i=r.selectedMode;if(i){i!=="multiple"&&(r.selectedMap=null);var a=r.selectedMap||(r.selectedMap={});a[t]=!0}},e.prototype.unSelect=function(t){var r=this.option.selectedMap;r&&(r[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var r=this.option.selectedMap;return!!(r&&r[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:ve.color.tertiary},itemStyle:{borderWidth:.5,borderColor:ve.color.border},emphasis:{label:{show:!0,color:ve.color.primary},itemStyle:{color:ve.color.highlight}},select:{label:{show:!0,color:ve.color.primary},itemStyle:{color:ve.color.highlight}},regions:[]},e})(_n),KUe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.focusBlurEnabled=!0,t}return e.prototype.init=function(t,r){this._api=r},e.prototype.render=function(t,r,i,a){if(this._model=t,!t.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new Zpe(i));var s=this._mapDraw;s.draw(t,r,i,this,a),s.group.on("click",this._handleRegionClick,this),s.group.silent=t.get("silent"),this.group.add(s.group),this.updateSelectStatus(t,r,i)},e.prototype._handleRegionClick=function(t){var r;l0(t.target,function(i){return(r=Ft(i).eventData)!=null},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},e.prototype.updateSelectStatus=function(t,r,i){var a=this;this._mapDraw.group.traverse(function(s){var o=Ft(s).eventData;if(o)return a._model.isSelected(o.name)?i.enterSelect(s):i.leaveSelect(s),!0})},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e})(Gr);function ZUe(n,e,t){Qf.registerMap(n,e,t)}function eme(n){n.registerCoordinateSystem("geo",Jpe),n.registerComponentModel(qUe),n.registerComponentView(KUe),n.registerImpl("registerMap",ZUe),n.registerImpl("getMap",function(t){return Qf.getMapForUser(t)});function e(t,r){r.update="geo:updateSelectStatus",n.registerAction(r,function(i,a){var s={},o=[];return a.eachComponent({mainType:"geo",query:i},function(l){l[t](i.name);var u=l.coordinateSystem;W(u.regions,function(h){s[h.name]=l.isSelected(h.name)||!1});var c=[];W(s,function(h,d){s[d]&&c.push(d)}),o.push({geoIndex:l.componentIndex,name:c})}),{selected:s,allSelected:o,name:i.name}})}e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,r,i){var a=t.componentType;a||(t.geoId!=null?a="geo":t.seriesId!=null&&(a="series")),a||(a="series"),r.eachComponent({mainType:a,query:t},function(s){var o=s.coordinateSystem;if(o.type==="geo"){var l=C3(o,t,s.get("scaleLimit"));s.setCenter&&s.setCenter(l.center),s.setZoom&&s.setZoom(l.zoom),a==="series"&&W(s.seriesGroup,function(u){u.setCenter(l.center),u.setZoom(l.zoom)})}})})}function QUe(n){sn(eme),n.registerChartView(VUe),n.registerSeriesModel(HUe),n.registerLayout(WUe),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,jUe),Fde("map",n.registerAction)}function JUe(n){var e=n;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t=[e],r,i;r=t.pop();)if(i=r.children,r.isExpand&&i.length)for(var a=i.length,s=a-1;s>=0;s--){var o=i[s];o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:s,thread:null},t.push(o)}}function eze(n,e){var t=n.isExpand?n.children:[],r=n.parentNode.children,i=n.hierNode.i?r[n.hierNode.i-1]:null;if(t.length){nze(n);var a=(t[0].hierNode.prelim+t[t.length-1].hierNode.prelim)/2;i?(n.hierNode.prelim=i.hierNode.prelim+e(n,i),n.hierNode.modifier=n.hierNode.prelim-a):n.hierNode.prelim=a}else i&&(n.hierNode.prelim=i.hierNode.prelim+e(n,i));n.parentNode.hierNode.defaultAncestor=rze(n,i,n.parentNode.hierNode.defaultAncestor||r[0],e)}function tze(n){var e=n.hierNode.prelim+n.parentNode.hierNode.modifier;n.setLayout({x:e},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function Fee(n){return arguments.length?n:sze}function eE(n,e){return n-=Math.PI/2,{x:e*Math.cos(n),y:e*Math.sin(n)}}function nze(n){for(var e=n.children,t=e.length,r=0,i=0;--t>=0;){var a=e[t];a.hierNode.prelim+=r,a.hierNode.modifier+=r,i+=a.hierNode.change,r+=a.hierNode.shift+i}}function rze(n,e,t,r){if(e){for(var i=n,a=n,s=a.parentNode.children[0],o=e,l=i.hierNode.modifier,u=a.hierNode.modifier,c=s.hierNode.modifier,h=o.hierNode.modifier;o=Z4(o),a=Q4(a),o&&a;){i=Z4(i),s=Q4(s),i.hierNode.ancestor=n;var d=o.hierNode.prelim+h-a.hierNode.prelim-u+r(o,a);d>0&&(aze(ize(o,n,t),n,d),u+=d,l+=d),h+=o.hierNode.modifier,u+=a.hierNode.modifier,l+=i.hierNode.modifier,c+=s.hierNode.modifier}o&&!Z4(i)&&(i.hierNode.thread=o,i.hierNode.modifier+=h-l),a&&!Q4(s)&&(s.hierNode.thread=a,s.hierNode.modifier+=u-c,t=n)}return t}function Z4(n){var e=n.children;return e.length&&n.isExpand?e[e.length-1]:n.hierNode.thread}function Q4(n){var e=n.children;return e.length&&n.isExpand?e[0]:n.hierNode.thread}function ize(n,e,t){return n.hierNode.ancestor.parentNode===e.parentNode?n.hierNode.ancestor:t}function aze(n,e,t){var r=t/(e.hierNode.i-n.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=t,e.hierNode.modifier+=t,e.hierNode.prelim+=t,n.hierNode.change+=r}function sze(n,e){return n.parentNode===e.parentNode?1:2}var oze=(function(){function n(){this.parentPoint=[],this.childPoints=[]}return n})(),lze=(function(n){be(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:ve.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new oze},e.prototype.buildPath=function(t,r){var i=r.childPoints,a=i.length,s=r.parentPoint,o=i[0],l=i[a-1];if(a===1){t.moveTo(s[0],s[1]),t.lineTo(o[0],o[1]);return}var u=r.orient,c=u==="TB"||u==="BT"?0:1,h=1-c,d=Xe(r.forkPosition,1),f=[];f[c]=s[c],f[h]=s[h]+(l[h]-s[h])*d,t.moveTo(s[0],s[1]),t.lineTo(f[0],f[1]),t.moveTo(o[0],o[1]),f[c]=o[c],t.lineTo(f[0],f[1]),f[c]=l[c],t.lineTo(f[0],f[1]),t.lineTo(l[0],l[1]);for(var p=1;p<a-1;p++){var m=i[p];t.moveTo(m[0],m[1]),f[c]=m[c],t.lineTo(f[0],f[1])}},e})(vn),uze=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new wt,t}return e.prototype.init=function(t,r){this._controller=new hx(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,i){var a=t.getData(),s=t.layoutInfo,o=this._mainGroup,l=t.get("layout");l==="radial"?(o.x=s.x+s.width/2,o.y=s.y+s.height/2):(o.x=s.x,o.y=s.y),this._updateViewCoordSys(t,i),this._updateController(t,null,r,i);var u=this._data;a.diff(u).add(function(c){Uee(a,c)&&zee(a,c,null,o,t)}).update(function(c,h){var d=u.getItemGraphicEl(h);if(!Uee(a,c)){d&&Hee(u,h,d,o,t);return}zee(a,c,d,o,t)}).remove(function(c){var h=u.getItemGraphicEl(c);h&&Hee(u,c,h,o,t)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),t.get("expandAndCollapse")===!0&&a.eachItemGraphicEl(function(c,h){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:h})})}),this._data=a},e.prototype._updateViewCoordSys=function(t,r){var i=t.getData(),a=[];i.each(function(h){var d=i.getItemLayout(h);d&&!isNaN(d.x)&&!isNaN(d.y)&&a.push([+d.x,+d.y])});var s=[],o=[];a3(a,s,o);var l=this._min,u=this._max;o[0]-s[0]===0&&(s[0]=l?l[0]:s[0]-1,o[0]=u?u[0]:o[0]+1),o[1]-s[1]===0&&(s[1]=l?l[1]:s[1]-1,o[1]=u?u[1]:o[1]+1);var c=t.coordinateSystem=new dx(null,{api:r,ecModel:t.ecModel});c.zoomLimit=t.get("scaleLimit"),c.setBoundingRect(s[0],s[1],o[0]-s[0],o[1]-s[1]),c.setCenter(t.get("center")),c.setZoom(t.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=s,this._max=o},e.prototype._updateController=function(t,r,i,a){var s=this;Wpe(t,a,this.group,this._controller,this._controllerHost,r),this._controller.on("zoom",function(o){s._updateNodeAndLinkScale(t)})},e.prototype._updateNodeAndLinkScale=function(t){var r=t.getData(),i=this._getNodeGlobalScale(t);r.eachItemGraphicEl(function(a,s){a.setSymbolScale(i)})},e.prototype._getNodeGlobalScale=function(t){var r=t.coordinateSystem;if(r.type!=="view")return 1;var i=this._nodeScaleRatio,a=r.scaleX||1,s=r.getZoom(),o=(s-1)*i+1;return o/a},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e})(mr);function Uee(n,e){var t=n.getItemLayout(e);return t&&!isNaN(t.x)&&!isNaN(t.y)}function zee(n,e,t,r,i){var a=!t,s=n.tree.getNodeByDataIndex(e),o=s.getModel(),l=s.getVisual("style").fill,u=s.isExpand===!1&&s.children.length!==0?l:ve.color.neutral00,c=n.tree.root,h=s.parentNode===c?s:s.parentNode||s,d=n.getItemGraphicEl(h.dataIndex),f=h.getLayout(),p=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:f,m=s.getLayout();a?(t=new T2(n,e,null,{symbolInnerColor:u,useNameLabel:!0}),t.x=p.x,t.y=p.y):t.updateData(n,e,null,{symbolInnerColor:u,useNameLabel:!0}),t.__radialOldRawX=t.__radialRawX,t.__radialOldRawY=t.__radialRawY,t.__radialRawX=m.rawX,t.__radialRawY=m.rawY,r.add(t),n.setItemGraphicEl(e,t),t.__oldX=t.x,t.__oldY=t.y,Vn(t,{x:m.x,y:m.y},i);var g=t.getSymbolPath();if(i.get("layout")==="radial"){var v=c.children[0],b=v.getLayout(),S=v.children.length,w=void 0,E=void 0;if(m.x===b.x&&s.isExpand===!0&&v.children.length){var T={x:(v.children[0].getLayout().x+v.children[S-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[S-1].getLayout().y)/2};w=Math.atan2(T.y-b.y,T.x-b.x),w<0&&(w=Math.PI*2+w),E=T.x<b.x,E&&(w=w-Math.PI)}else w=Math.atan2(m.y-b.y,m.x-b.x),w<0&&(w=Math.PI*2+w),s.children.length===0||s.children.length!==0&&s.isExpand===!1?(E=m.x<b.x,E&&(w=w-Math.PI)):(E=m.x>b.x,E||(w=w-Math.PI));var M=E?"left":"right",P=o.getModel("label"),I=P.get("rotate"),D=I*(Math.PI/180),R=g.getTextContent();R&&(g.setTextConfig({position:P.get("position")||M,rotation:I==null?-w:D,origin:"center"}),R.setStyle("verticalAlign","middle"))}var B=o.get(["emphasis","focus"]),k=B==="relative"?dA(s.getAncestorsIndices(),s.getDescendantIndices()):B==="ancestor"?s.getAncestorsIndices():B==="descendant"?s.getDescendantIndices():null;k&&(Ft(t).focus=k),cze(i,s,c,t,p,f,m,r),t.__edge&&(t.onHoverStateChange=function(V){if(V!=="blur"){var G=s.parentNode&&n.getItemGraphicEl(s.parentNode.dataIndex);G&&G.hoverState===f2||tN(t.__edge,V)}})}function cze(n,e,t,r,i,a,s,o){var l=e.getModel(),u=n.get("edgeShape"),c=n.get("layout"),h=n.getOrient(),d=n.get(["lineStyle","curveness"]),f=n.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),m=r.__edge;if(u==="curve")e.parentNode&&e.parentNode!==t&&(m||(m=r.__edge=new m2({shape:x8(c,h,d,i,i)})),Vn(m,{shape:x8(c,h,d,a,s)},n));else if(u==="polyline"&&c==="orthogonal"&&e!==t&&e.children&&e.children.length!==0&&e.isExpand===!0){for(var g=e.children,v=[],b=0;b<g.length;b++){var S=g[b].getLayout();v.push([S.x,S.y])}m||(m=r.__edge=new lze({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:h,forkPosition:f}})),Vn(m,{shape:{parentPoint:[s.x,s.y],childPoints:v}},n)}m&&!(u==="polyline"&&!e.isExpand)&&(m.useStyle(Pt({strokeNoScale:!0,fill:null},p)),ua(m,l,"lineStyle"),Hy(m),o.add(m))}function Vee(n,e,t,r,i){var a=e.tree.root,s=tme(a,n),o=s.source,l=s.sourceLayout,u=e.getItemGraphicEl(n.dataIndex);if(u){var c=e.getItemGraphicEl(o.dataIndex),h=c.__edge,d=u.__edge||(o.isExpand===!1||o.children.length===1?h:void 0),f=r.get("edgeShape"),p=r.get("layout"),m=r.get("orient"),g=r.get(["lineStyle","curveness"]);d&&(f==="curve"?bg(d,{shape:x8(p,m,g,l,l),style:{opacity:0}},r,{cb:function(){t.remove(d)},removeOpt:i}):f==="polyline"&&r.get("layout")==="orthogonal"&&bg(d,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){t.remove(d)},removeOpt:i}))}}function tme(n,e){for(var t=e.parentNode===n?e:e.parentNode||e,r;r=t.getLayout(),r==null;)t=t.parentNode===n?t:t.parentNode||t;return{source:t,sourceLayout:r}}function Hee(n,e,t,r,i){var a=n.tree.getNodeByDataIndex(e),s=n.tree.root,o=tme(s,a).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};bg(t,{x:o.x+1,y:o.y+1},i,{cb:function(){r.remove(t),n.setItemGraphicEl(e,null)},removeOpt:l}),t.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),a.children.forEach(function(u){Vee(u,n,r,i,l)}),Vee(a,n,r,i,l)}function x8(n,e,t,r,i){var a,s,o,l,u,c,h,d;if(n==="radial"){u=r.rawX,h=r.rawY,c=i.rawX,d=i.rawY;var f=eE(u,h),p=eE(u,h+(d-h)*t),m=eE(c,d+(h-d)*t),g=eE(c,d);return{x1:f.x||0,y1:f.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:m.x||0,cpy2:m.y||0}}else u=r.x,h=r.y,c=i.x,d=i.y,(e==="LR"||e==="RL")&&(a=u+(c-u)*t,s=h,o=c+(u-c)*t,l=d),(e==="TB"||e==="BT")&&(a=u,s=h+(d-h)*t,o=c,l=d+(h-d)*t);return{x1:u,y1:h,x2:c,y2:d,cpx1:a,cpy1:s,cpx2:o,cpy2:l}}var Lu=mn();function nme(n){var e=n.mainData,t=n.datas;t||(t={main:e},n.datasAttr={main:"data"}),n.datas=n.mainData=null,rme(e,t,n),W(t,function(r){W(e.TRANSFERABLE_METHODS,function(i){r.wrapMethod(i,Qt(hze,n))})}),e.wrapMethod("cloneShallow",Qt(fze,n)),W(e.CHANGABLE_METHODS,function(r){e.wrapMethod(r,Qt(dze,n))}),Us(t[e.dataType]===e)}function hze(n,e){if(gze(this)){var t=Pe({},Lu(this).datas);t[this.dataType]=e,rme(e,t,n)}else c7(e,this.dataType,Lu(this).mainData,n);return e}function dze(n,e){return n.struct&&n.struct.update(),e}function fze(n,e){return W(Lu(e).datas,function(t,r){t!==e&&c7(t.cloneShallow(),r,e,n)}),e}function pze(n){var e=Lu(this).mainData;return n==null||e==null?e:Lu(e).datas[n]}function mze(){var n=Lu(this).mainData;return n==null?[{data:n}]:Ue(An(Lu(n).datas),function(e){return{type:e,data:Lu(n).datas[e]}})}function gze(n){return Lu(n).mainData===n}function rme(n,e,t){Lu(n).datas={},W(e,function(r,i){c7(r,i,n,t)})}function c7(n,e,t,r){Lu(t).datas[e]=n,Lu(n).mainData=t,n.dataType=e,r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=n),n.getLinkedData=pze,n.getLinkedDataAll=mze}var vze=(function(){function n(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(e,t,r){St(e)&&(r=t,t=e,e=null),e=e||{},Ke(e)&&(e={order:e});var i=e.order||"preorder",a=this[e.attr||"children"],s;i==="preorder"&&(s=t.call(r,this));for(var o=0;!s&&o<a.length;o++)a[o].eachNode(e,t,r);i==="postorder"&&t.call(r,this)},n.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var r=0;r<this.children.length;r++){var i=this.children[r];i.updateDepthAndHeight(e+1),i.height>t&&(t=i.height)}this.height=t+1},n.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].getNodeById(e);if(a)return a}},n.prototype.contains=function(e){if(e===this)return!0;for(var t=0,r=this.children,i=r.length;t<i;t++){var a=r[t].contains(e);if(a)return a}},n.prototype.getAncestors=function(e){for(var t=[],r=e?this:this.parentNode;r;)t.push(r),r=r.parentNode;return t.reverse(),t},n.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},n.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},n.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},n.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostTree,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},n.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},n.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},n.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},n})(),h7=(function(){function n(e){this.type="tree",this._nodes=[],this.hostModel=e}return n.prototype.eachNode=function(e,t,r){this.root.eachNode(e,t,r)},n.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},n.prototype.getNodeById=function(e){return this.root.getNodeById(e)},n.prototype.update=function(){for(var e=this.data,t=this._nodes,r=0,i=t.length;r<i;r++)t[r].dataIndex=-1;for(var r=0,i=e.count();r<i;r++)t[e.getRawIndex(r)].dataIndex=r},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(e,t,r){var i=new n(t),a=[],s=1;o(e);function o(c,h){var d=c.value;s=Math.max(s,Be(d)?d.length:1),a.push(c);var f=new vze(oa(c.name,""),i);h?yze(f,h):i.root=f,i._nodes.push(f);var p=c.children;if(p)for(var m=0;m<p.length;m++)o(p[m],f)}i.root.updateDepthAndHeight(0);var l=S2(a,{coordDimensions:["value"],dimensionsCount:s}).dimensions,u=new mo(l,t);return u.initData(a),r&&r(u),nme({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},n})();function yze(n,e){var t=e.children;n.parentNode!==e&&(t.push(n),n.parentNode=e)}function NA(n,e,t){if(n&&Jt(e,n.type)>=0){var r=t.getData().tree.root,i=n.targetNode;if(Ke(i)&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=n.targetNodeId;if(a!=null&&(i=r.getNodeById(a)))return{node:i}}}function ime(n){for(var e=[];n;)n=n.parentNode,n&&e.push(n);return e.reverse()}function d7(n,e){var t=ime(n);return Jt(t,e)>=0}function D3(n,e){for(var t=[];n;){var r=n.dataIndex;t.push({name:n.name,dataIndex:r,value:e.getRawValue(r)}),n=n.parentNode}return t.reverse(),t}var xze=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t){var r={name:t.name,children:t.data},i=t.leaves||{},a=new Sn(i,this,this.ecModel),s=h7.createTree(r,this,o);function o(h){h.wrapMethod("getItemModel",function(d,f){var p=s.getNodeByDataIndex(f);return p&&p.children.length&&p.isExpand||(d.parentModel=a),d})}var l=0;s.eachNode("preorder",function(h){h.depth>l&&(l=h.depth)});var u=t.expandAndCollapse,c=u&&t.initialTreeDepth>=0?t.initialTreeDepth:l;return s.root.eachNode("preorder",function(h){var d=h.hostTree.data.getRawDataItem(h.dataIndex);h.isExpand=d&&d.collapsed!=null?!d.collapsed:h.depth<=c}),s.data},e.prototype.getOrient=function(){var t=this.get("orient");return t==="horizontal"?t="LR":t==="vertical"&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,r,i){for(var a=this.getData().tree,s=a.root.children[0],o=a.getNodeByDataIndex(t),l=o.getValue(),u=o.name;o&&o!==s;)u=o.parentNode.name+"."+u,o=o.parentNode;return qi("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=D3(i,this),r.collapsed=!i.isExpand,r},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,roamTrigger:"global",nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:ve.color.borderTint,width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e})(Cr);function _ze(n,e,t){for(var r=[n],i=[],a;a=r.pop();)if(i.push(a),a.isExpand){var s=a.children;if(s.length)for(var o=0;o<s.length;o++)r.push(s[o])}for(;a=i.pop();)e(a,t)}function gT(n,e){for(var t=[n],r;r=t.pop();)if(e(r),r.isExpand){var i=r.children;if(i.length)for(var a=i.length-1;a>=0;a--)t.push(i[a])}}function bze(n,e){n.eachSeriesByType("tree",function(t){Sze(t,e)})}function Sze(n,e){var t=ha(n,e).refContainer,r=qr(n.getBoxLayoutParams(),t);n.layoutInfo=r;var i=n.get("layout"),a=0,s=0,o=null;i==="radial"?(a=2*Math.PI,s=Math.min(r.height,r.width)/2,o=Fee(function(w,E){return(w.parentNode===E.parentNode?1:2)/w.depth})):(a=r.width,s=r.height,o=Fee());var l=n.getData().tree.root,u=l.children[0];if(u){JUe(l),_ze(u,eze,o),l.hierNode.modifier=-u.hierNode.prelim,gT(u,tze);var c=u,h=u,d=u;gT(u,function(w){var E=w.getLayout().x;E<c.getLayout().x&&(c=w),E>h.getLayout().x&&(h=w),w.depth>d.depth&&(d=w)});var f=c===h?1:o(c,h)/2,p=f-c.getLayout().x,m=0,g=0,v=0,b=0;if(i==="radial")m=a/(h.getLayout().x+f+p),g=s/(d.depth-1||1),gT(u,function(w){v=(w.getLayout().x+p)*m,b=(w.depth-1)*g;var E=eE(v,b);w.setLayout({x:E.x,y:E.y,rawX:v,rawY:b},!0)});else{var S=n.getOrient();S==="RL"||S==="LR"?(g=s/(h.getLayout().x+f+p),m=a/(d.depth-1||1),gT(u,function(w){b=(w.getLayout().x+p)*g,v=S==="LR"?(w.depth-1)*m:a-(w.depth-1)*m,w.setLayout({x:v,y:b},!0)})):(S==="TB"||S==="BT")&&(m=a/(h.getLayout().x+f+p),g=s/(d.depth-1||1),gT(u,function(w){v=(w.getLayout().x+p)*m,b=S==="TB"?(w.depth-1)*g:s-(w.depth-1)*g,w.setLayout({x:v,y:b},!0)}))}}}function wze(n){n.eachSeriesByType("tree",function(e){var t=e.getData(),r=t.tree;r.eachNode(function(i){var a=i.getModel(),s=a.getModel("itemStyle").getItemStyle(),o=t.ensureUniqueItemVisual(i.dataIndex,"style");Pe(o,s)})})}function Tze(n){n.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(r){var i=e.dataIndex,a=r.getData().tree,s=a.getNodeByDataIndex(i);s.isExpand=!s.isExpand})}),n.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var a=i.coordinateSystem,s=C3(a,e,i.get("scaleLimit"));i.setCenter(s.center),i.setZoom(s.zoom)})})}function Eze(n){n.registerChartView(uze),n.registerSeriesModel(xze),n.registerLayout(bze),n.registerVisual(wze),Tze(n)}var Gee=["treemapZoomToNode","treemapRender","treemapMove"];function Aze(n){for(var e=0;e<Gee.length;e++)n.registerAction({type:Gee[e],update:"updateView"},ki);n.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,r){r.eachComponent({mainType:"series",subType:"treemap",query:t},i);function i(a,s){var o=["treemapZoomToNode","treemapRootToNode"],l=NA(t,o,a);if(l){var u=a.getViewRoot();u&&(t.direction=d7(u,l.node)?"rollUp":"drillDown"),a.resetViewRoot(l.node)}}})}function ame(n){var e=n.getData(),t=e.tree,r={};t.eachNode(function(i){for(var a=i;a&&a.depth>1;)a=a.parentNode;var s=Bz(n.ecModel,a.name||a.dataIndex+"",r);i.setVisual("decal",s)})}var Cze=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventUsingHoverLayer=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};sme(i);var a=t.levels||[],s=this.designatedVisualItemStyle={},o=new Sn({itemStyle:s},this,r);a=t.levels=Mze(a,r);var l=Ue(a||[],function(h){return new Sn(h,o,r)},this),u=h7.createTree(i,this,c);function c(h){h.wrapMethod("getItemModel",function(d,f){var p=u.getNodeByDataIndex(f),m=p?l[p.depth]:null;return d.parentModel=m||o,d})}return u.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),s=this.getRawValue(t),o=a.getName(t);return qi("nameValue",{name:o,value:s})},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treeAncestors=D3(i,this),r.treePathInfo=r.treeAncestors,r},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},Pe(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var r=this._idIndexMap;r||(r=this._idIndexMap=ct(),this._idIndexMapCount=0);var i=r.get(t);return i==null&&r.set(t,i=this._idIndexMapCount++),i},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){ame(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,coordinateSystemUsage:"box",left:ve.size.l,top:ve.size.xxxl,right:ve.size.l,bottom:ve.size.xxxl,sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.32*.32,scaleLimit:{max:5,min:.2},roam:!0,roamTrigger:"global",nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",bottom:ve.size.m,emptyItemWidth:25,itemStyle:{color:ve.color.backgroundShade,textStyle:{color:ve.color.secondary}},emphasis:{itemStyle:{color:ve.color.background}}},label:{show:!0,distance:0,padding:5,position:"inside",color:ve.color.neutral00,overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:ve.color.neutral00,borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e})(Cr);function sme(n){var e=0;W(n.children,function(r){sme(r);var i=r.value;Be(i)&&(i=i[0]),e+=i});var t=n.value;Be(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Be(n.value)?n.value[0]=t:n.value=t}function Mze(n,e){var t=br(e.get("color")),r=br(e.get(["aria","decal","decals"]));if(t){n=n||[];var i,a;W(n,function(o){var l=new Sn(o),u=l.get("color"),c=l.get("decal");(l.get(["itemStyle","color"])||u&&u!=="none")&&(i=!0),(l.get(["itemStyle","decal"])||c&&c!=="none")&&(a=!0)});var s=n[0]||(n[0]={});return i||(s.color=t.slice()),!a&&r&&(s.decal=r.slice()),n}}var Dze=8,jee=8,J4=5,Ize=(function(){function n(e){this.group=new wt,e.add(this.group)}return n.prototype.render=function(e,t,r,i){var a=e.getModel("breadcrumb"),s=this.group;if(s.removeAll(),!(!a.get("show")||!r)){var o=a.getModel("itemStyle"),l=a.getModel("emphasis"),u=o.getModel("textStyle"),c=l.getModel(["itemStyle","textStyle"]),h=ha(e,t).refContainer,d={left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},f={emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]},p=qr(d,h);this._prepare(r,f,u),this._renderContent(e,f,p,o,l,u,c,i),v3(s,d,h)}},n.prototype._prepare=function(e,t,r){for(var i=e;i;i=i.parentNode){var a=oa(i.getModel().get("name"),""),s=r.getTextRect(a),o=Math.max(s.width+Dze*2,t.emptyItemWidth);t.totalWidth+=o+jee,t.renderList.push({node:i,text:a,width:o})}},n.prototype._renderContent=function(e,t,r,i,a,s,o,l){for(var u=0,c=t.emptyItemWidth,h=e.get(["breadcrumb","height"]),d=t.totalWidth,f=t.renderList,p=a.getModel("itemStyle").getItemStyle(),m=f.length-1;m>=0;m--){var g=f[m],v=g.node,b=g.width,S=g.text;d>r.width&&(d-=b-c,b=c,S=null);var w=new Vs({shape:{points:Pze(u,0,b,h,m===f.length-1,m===0)},style:Pt(i.getItemStyle(),{lineJoin:"bevel"}),textContent:new On({style:Er(s,{text:S})}),textConfig:{position:"inside"},z2:zS*1e4,onclick:Qt(l,v)});w.disableLabelAnimation=!0,w.getTextContent().ensureState("emphasis").style=Er(o,{text:S}),w.ensureState("emphasis").style=p,Yr(w,a.get("focus"),a.get("blurScope"),a.get("disabled")),this.group.add(w),Lze(w,e,v),u+=b+jee}},n.prototype.remove=function(){this.group.removeAll()},n})();function Pze(n,e,t,r,i,a){var s=[[i?n:n-J4,e],[n+t,e],[n+t,e+r],[i?n:n-J4,e+r]];return!a&&s.splice(2,0,[n+t+J4,e+r/2]),!i&&s.push([n,e+r/2]),s}function Lze(n,e,t){Ft(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:t&&t.dataIndex,name:t&&t.name},treePathInfo:t&&D3(t,e)}}var Rze=(function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(e,t,r,i,a){return this._elExistsMap[e.id]?!1:(this._elExistsMap[e.id]=!0,this._storage.push({el:e,target:t,duration:r,delay:i,easing:a}),!0)},n.prototype.finished=function(e){return this._finishedCallback=e,this},n.prototype.start=function(){for(var e=this,t=this._storage.length,r=function(){t--,t<=0&&(e._storage.length=0,e._elExistsMap={},e._finishedCallback&&e._finishedCallback())},i=0,a=this._storage.length;i<a;i++){var s=this._storage[i];s.el.animateTo(s.target,{duration:s.duration,delay:s.delay,easing:s.easing,setToFinal:!0,done:r,aborted:r})}return this},n})();function Nze(){return new Rze}var _8=wt,Wee=fn,Xee=3,$ee="label",Yee="upperLabel",kze=zS*10,Oze=zS*2,Bze=zS*3,Uv=Vy([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),qee=function(n){var e=Uv(n);return e.stroke=e.fill=e.lineWidth=null,e},CN=mn(),Fze=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._state="ready",t._storage=vT(),t}return e.prototype.render=function(t,r,i,a){var s=r.findComponents({mainType:"series",subType:"treemap",query:a});if(!(Jt(s,t)<0)){this.seriesModel=t,this.api=i,this.ecModel=r;var o=["treemapZoomToNode","treemapRootToNode"],l=NA(a,o,t),u=a&&a.type,c=t.layoutInfo,h=!this._oldTree,d=this._storage,f=u==="treemapRootToNode"&&l&&d?{rootNodeGroup:d.nodeGroup[l.node.getRawIndex()],direction:a.direction}:null,p=this._giveContainerGroup(c),m=t.get("animation"),g=this._doRender(p,t,f);m&&!h&&(!u||u==="treemapZoomToNode"||u==="treemapRootToNode")?this._doAnimation(p,g,t,f):g.renderFinally(),this._resetController(i),this._renderBreadcrumb(t,i,l)}},e.prototype._giveContainerGroup=function(t){var r=this._containerGroup;return r||(r=this._containerGroup=new _8,this._initEvents(r),this.group.add(r)),r.x=t.x,r.y=t.y,r},e.prototype._doRender=function(t,r,i){var a=r.getData().tree,s=this._oldTree,o=vT(),l=vT(),u=this._storage,c=[];function h(b,S,w,E){return Uze(r,l,u,i,o,c,b,S,w,E)}m(a.root?[a.root]:[],s&&s.root?[s.root]:[],t,a===s||!s,0);var d=g(u);if(this._oldTree=a,this._storage=l,this._controllerHost){var f=this.seriesModel.layoutInfo,p=a.root.getLayout();p.width===f.width&&p.height===f.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:o,willDeleteEls:d,renderFinally:v};function m(b,S,w,E,T){E?(S=b,W(b,function(I,D){!I.isRemoved()&&P(D,D)})):new Kf(S,b,M,M).add(P).update(P).remove(Qt(P,null)).execute();function M(I){return I.getId()}function P(I,D){var R=I!=null?b[I]:null,B=D!=null?S[D]:null,k=h(R,B,w,T);k&&m(R&&R.viewChildren||[],B&&B.viewChildren||[],k,E,T+1)}}function g(b){var S=vT();return b&&W(b,function(w,E){var T=S[E];W(w,function(M){M&&(T.push(M),CN(M).willDelete=!0)})}),S}function v(){W(d,function(b){W(b,function(S){S.parent&&S.parent.remove(S)})}),W(c,function(b){b.invisible=!0,b.dirty()})}},e.prototype._doAnimation=function(t,r,i,a){var s=i.get("animationDurationUpdate"),o=i.get("animationEasing"),l=(St(s)?0:s)||0,u=(St(o)?null:o)||"cubicOut",c=Nze();W(r.willDeleteEls,function(h,d){W(h,function(f,p){if(!f.invisible){var m=f.parent,g,v=CN(m);if(a&&a.direction==="drillDown")g=m===a.rootNodeGroup?{shape:{x:0,y:0,width:v.nodeWidth,height:v.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var b=0,S=0;v.willDelete||(b=v.nodeWidth/2,S=v.nodeHeight/2),g=d==="nodeGroup"?{x:b,y:S,style:{opacity:0}}:{shape:{x:b,y:S,width:0,height:0},style:{opacity:0}}}g&&c.add(f,g,l,0,u)}})}),W(this._storage,function(h,d){W(h,function(f,p){var m=r.lastsForAnimation[d][p],g={};m&&(f instanceof wt?m.oldX!=null&&(g.x=f.x,g.y=f.y,f.x=m.oldX,f.y=m.oldY):(m.oldShape&&(g.shape=Pe({},f.shape),f.setShape(m.oldShape)),m.fadein?(f.setStyle("opacity",0),g.style={opacity:1}):f.style.opacity!==1&&(g.style={opacity:1})),c.add(f,g,l,0,u))})},this),this._state="animating",c.finished(Qe(function(){this._state="ready",r.renderFinally()},this)).start()},e.prototype._resetController=function(t){var r=this,i=this._controller,a=this._controllerHost;a||(this._controllerHost={target:this.group},a=this._controllerHost);var s=this.seriesModel;i||(i=this._controller=new hx(t.getZr()),i.on("pan",Qe(this._onPan,this)),i.on("zoom",Qe(this._onZoom,this))),i.enable(s.get("roam"),{api:t,zInfo:{component:s},triggerInfo:{roamTrigger:s.get("roamTrigger"),isInSelf:function(o,l,u){var c=r._containerGroup;return c?c.getBoundingRect().contain(l-c.x,u-c.y):!1}}}),a.zoomLimit=s.get("scaleLimit"),a.zoom=s.get("zoom")},e.prototype._clearController=function(){var t=this._controller;this._controllerHost=null,t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if(this._state!=="animating"&&(Math.abs(t.dx)>Xee||Math.abs(t.dy)>Xee)){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:i.x+t.dx,y:i.y+t.dy,width:i.width,height:i.height}})}},e.prototype._onZoom=function(t){var r=t.originX,i=t.originY,a=t.scale;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var o=s.getLayout();if(!o)return;var l=new Rt(o.x,o.y,o.width,o.height),u=null,c=this._controllerHost;u=c.zoomLimit;var h=c.zoom=c.zoom||1;if(h*=a,u){var d=u.min||0,f=u.max||1/0;h=Math.max(Math.min(f,h),d)}var p=h/c.zoom;c.zoom=h;var m=this.seriesModel.layoutInfo;r-=m.x,i-=m.y;var g=Ya();td(g,g,[-r,-i]),$G(g,g,[p,p]),td(g,g,[r,i]),l.applyTransform(g),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},e.prototype._initEvents=function(t){var r=this;t.on("click",function(i){if(r._state==="ready"){var a=r.seriesModel.get("nodeClick",!0);if(a){var s=r.findTarget(i.offsetX,i.offsetY);if(s){var o=s.node;if(o.getLayout().isLeafRoot)r._rootToNode(s);else if(a==="zoomToNode")r._zoomToNode(s);else if(a==="link"){var l=o.hostTree.data.getItemModel(o.dataIndex),u=l.get("link",!0),c=l.get("target",!0)||"blank";u&&aN(u,c)}}}}},this)},e.prototype._renderBreadcrumb=function(t,r,i){var a=this;i||(i=t.get("leafDepth",!0)!=null?{node:t.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2),i||(i={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Ize(this.group))).render(t,r,i.node,function(s){a._state!=="animating"&&(d7(t.getViewRoot(),s)?a._rootToNode({node:s}):a._zoomToNode({node:s}))})},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=vT(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,r){var i,a=this.seriesModel.getViewRoot();return a.eachNode({attr:"viewChildren",order:"preorder"},function(s){var o=this._storage.background[s.getRawIndex()];if(o){var l=o.transformCoordToLocal(t,r),u=o.shape;if(u.x<=l[0]&&l[0]<=u.x+u.width&&u.y<=l[1]&&l[1]<=u.y+u.height)i={node:s,offsetX:l[0],offsetY:l[1]};else return!1}},this),i},e.type="treemap",e})(mr);function vT(){return{nodeGroup:[],background:[],content:[]}}function Uze(n,e,t,r,i,a,s,o,l,u){if(!s)return;var c=s.getLayout(),h=n.getData(),d=s.getModel();if(h.setItemGraphicEl(s.dataIndex,null),!c||!c.isInView)return;var f=c.width,p=c.height,m=c.borderWidth,g=c.invisible,v=s.getRawIndex(),b=o&&o.getRawIndex(),S=s.viewChildren,w=c.upperHeight,E=S&&S.length,T=d.getModel("itemStyle"),M=d.getModel(["emphasis","itemStyle"]),P=d.getModel(["blur","itemStyle"]),I=d.getModel(["select","itemStyle"]),D=T.get("borderRadius")||0,R=ge("nodeGroup",_8);if(!R)return;if(l.add(R),R.x=c.x||0,R.y=c.y||0,R.markRedraw(),CN(R).nodeWidth=f,CN(R).nodeHeight=p,c.isAboveViewRoot)return R;var B=ge("background",Wee,u,Oze);B&&H(R,B,E&&c.upperLabelHeight);var k=d.getModel("emphasis"),V=k.get("focus"),G=k.get("blurScope"),F=k.get("disabled"),X=V==="ancestor"?s.getAncestorsIndices():V==="descendant"?s.getDescendantIndices():V;if(E)xA(R)&&s0(R,!1),B&&(s0(B,!F),h.setItemGraphicEl(s.dataIndex,B),Ez(B,X,G));else{var j=ge("content",Wee,u,Bze);j&&K(R,j),B.disableMorphing=!0,B&&xA(B)&&s0(B,!1),s0(R,!F),h.setItemGraphicEl(s.dataIndex,R);var Q=d.getShallow("cursor");Q&&j.attr("cursor",Q),Ez(R,X,G)}return R;function H(fe,Ee,Ce){var Re=Ft(Ee);if(Re.dataIndex=s.dataIndex,Re.seriesIndex=n.seriesIndex,Ee.setShape({x:0,y:0,width:f,height:p,r:D}),g)te(Ee);else{Ee.invisible=!1;var He=s.getVisual("style"),pt=He.stroke,lt=qee(T);lt.fill=pt;var Mt=Uv(M);Mt.fill=M.get("borderColor");var mt=Uv(P);mt.fill=P.get("borderColor");var on=Uv(I);if(on.fill=I.get("borderColor"),Ce){var ce=f-2*m;Y(Ee,pt,He.opacity,{x:m,y:0,width:ce,height:w})}else Ee.removeTextContent();Ee.setStyle(lt),Ee.ensureState("emphasis").style=Mt,Ee.ensureState("blur").style=mt,Ee.ensureState("select").style=on,Hy(Ee)}fe.add(Ee)}function K(fe,Ee){var Ce=Ft(Ee);Ce.dataIndex=s.dataIndex,Ce.seriesIndex=n.seriesIndex;var Re=Math.max(f-2*m,0),He=Math.max(p-2*m,0);if(Ee.culling=!0,Ee.setShape({x:m,y:m,width:Re,height:He,r:D}),g)te(Ee);else{Ee.invisible=!1;var pt=s.getVisual("style"),lt=pt.fill,Mt=qee(T);Mt.fill=lt,Mt.decal=pt.decal;var mt=Uv(M),on=Uv(P),ce=Uv(I);Y(Ee,lt,pt.opacity,null),Ee.setStyle(Mt),Ee.ensureState("emphasis").style=mt,Ee.ensureState("blur").style=on,Ee.ensureState("select").style=ce,Hy(Ee)}fe.add(Ee)}function te(fe){!fe.invisible&&a.push(fe)}function Y(fe,Ee,Ce,Re){var He=d.getModel(Re?Yee:$ee),pt=oa(d.get("name"),null),lt=He.getShallow("show");Aa(fe,ca(d,Re?Yee:$ee),{defaultText:lt?pt:null,inheritColor:Ee,defaultOpacity:Ce,labelFetcher:n,labelDataIndex:s.dataIndex});var Mt=fe.getTextContent();if(Mt){var mt=Mt.style,on=qk(mt.padding||0);Re&&(fe.setTextConfig({layoutRect:Re}),Mt.disableLabelLayout=!0),Mt.beforeUpdate=function(){var ln=Math.max((Re?Re.width:fe.shape.width)-on[1]-on[3],0),gn=Math.max((Re?Re.height:fe.shape.height)-on[0]-on[2],0);(mt.width!==ln||mt.height!==gn)&&Mt.setStyle({width:ln,height:gn})},mt.truncateMinChar=2,mt.lineOverflow="truncate",de(mt,Re,c);var ce=Mt.getState("emphasis");de(ce?ce.style:null,Re,c)}}function de(fe,Ee,Ce){var Re=fe?fe.text:null;if(!Ee&&Ce.isLeafRoot&&Re!=null){var He=n.get("drillDownIcon",!0);fe.text=He?He+" "+Re:Re}}function ge(fe,Ee,Ce,Re){var He=b!=null&&t[fe][b],pt=i[fe];return He?(t[fe][b]=null,se(pt,He)):g||(He=new Ee,He instanceof Nu&&(He.z2=zze(Ce,Re)),he(pt,He)),e[fe][v]=He}function se(fe,Ee){var Ce=fe[v]={};Ee instanceof _8?(Ce.oldX=Ee.x,Ce.oldY=Ee.y):Ce.oldShape=Pe({},Ee.shape)}function he(fe,Ee){var Ce=fe[v]={},Re=s.parentNode,He=Ee instanceof wt;if(Re&&(!r||r.direction==="drillDown")){var pt=0,lt=0,Mt=i.background[Re.getRawIndex()];!r&&Mt&&Mt.oldShape&&(pt=Mt.oldShape.width,lt=Mt.oldShape.height),He?(Ce.oldX=0,Ce.oldY=lt):Ce.oldShape={x:pt,y:lt,width:0,height:0}}Ce.fadein=!He}}function zze(n,e){return n*kze+e}var kA=W,Vze=Lt,MN=-1,Ta=(function(){function n(e){var t=e.mappingMethod,r=e.type,i=this.option=Tt(e);this.type=r,this.mappingMethod=t,this._normalizeData=jze[t];var a=n.visualHandlers[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[t],t==="piecewise"?(e5(i),Hze(i)):t==="category"?i.categories?Gze(i):e5(i,!0):(Us(t!=="linear"||i.dataExtent),e5(i))}return n.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},n.prototype.getNormalizer=function(){return Qe(this._normalizeData,this)},n.listVisualTypes=function(){return An(n.visualHandlers)},n.isValidType=function(e){return n.visualHandlers.hasOwnProperty(e)},n.eachVisual=function(e,t,r){Lt(e)?W(e,t,r):t.call(r,e)},n.mapVisual=function(e,t,r){var i,a=Be(e)?[]:Lt(e)?{}:(i=!0,null);return n.eachVisual(e,function(s,o){var l=t.call(r,s,o);i?a=l:a[o]=l}),a},n.retrieveVisuals=function(e){var t={},r;return e&&kA(n.visualHandlers,function(i,a){e.hasOwnProperty(a)&&(t[a]=e[a],r=!0)}),r?t:null},n.prepareVisualTypes=function(e){if(Be(e))e=e.slice();else if(Vze(e)){var t=[];kA(e,function(r,i){t.push(i)}),e=t}else return[];return e.sort(function(r,i){return i==="color"&&r!=="color"&&r.indexOf("color")===0?1:-1}),e},n.dependsOn=function(e,t){return t==="color"?!!(e&&e.indexOf(t)===0):e===t},n.findPieceIndex=function(e,t,r){for(var i,a=1/0,s=0,o=t.length;s<o;s++){var l=t[s].value;if(l!=null){if(l===e||Ke(l)&&l===e+"")return s;r&&d(l,s)}}for(var s=0,o=t.length;s<o;s++){var u=t[s],c=u.interval,h=u.close;if(c){if(c[0]===-1/0){if(eP(h[1],e,c[1]))return s}else if(c[1]===1/0){if(eP(h[0],c[0],e))return s}else if(eP(h[0],c[0],e)&&eP(h[1],e,c[1]))return s;r&&d(c[0],s),r&&d(c[1],s)}}if(r)return e===1/0?t.length-1:e===-1/0?0:i;function d(f,p){var m=Math.abs(f-e);m<a&&(a=m,i=p)}},n.visualHandlers={color:{applyVisual:yT("color"),getColorMapper:function(){var e=this.option;return Qe(e.mappingMethod==="category"?function(t,r){return!r&&(t=this._normalizeData(t)),tE.call(this,t)}:function(t,r,i){var a=!!i;return!r&&(t=this._normalizeData(t)),i=NF(t,e.parsedVisual,i),a?i:Xh(i,"rgba")},this)},_normalizedToVisual:{linear:function(e){return Xh(NF(e,this.option.parsedVisual),"rgba")},category:tE,piecewise:function(e,t){var r=S8.call(this,t);return r==null&&(r=Xh(NF(e,this.option.parsedVisual),"rgba")),r},fixed:zv}},colorHue:JI(function(e,t){return fg(e,t)}),colorSaturation:JI(function(e,t){return fg(e,null,t)}),colorLightness:JI(function(e,t){return fg(e,null,null,t)}),colorAlpha:JI(function(e,t){return WR(e,t)}),decal:{applyVisual:yT("decal"),_normalizedToVisual:{linear:null,category:tE,piecewise:null,fixed:null}},opacity:{applyVisual:yT("opacity"),_normalizedToVisual:b8([0,1])},liftZ:{applyVisual:yT("liftZ"),_normalizedToVisual:{linear:zv,category:zv,piecewise:zv,fixed:zv}},symbol:{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("symbol",i)},_normalizedToVisual:{linear:Kee,category:tE,piecewise:function(e,t){var r=S8.call(this,t);return r==null&&(r=Kee.call(this,e)),r},fixed:zv}},symbolSize:{applyVisual:yT("symbolSize"),_normalizedToVisual:b8([0,1])}},n})();function Hze(n){var e=n.pieceList;n.hasSpecialVisual=!1,W(e,function(t,r){t.originIndex=r,t.visual!=null&&(n.hasSpecialVisual=!0)})}function Gze(n){var e=n.categories,t=n.categoryMap={},r=n.visual;if(kA(e,function(s,o){t[s]=o}),!Be(r)){var i=[];Lt(r)?kA(r,function(s,o){var l=t[o];i[l??MN]=s}):i[MN]=r,r=ome(n,i)}for(var a=e.length-1;a>=0;a--)r[a]==null&&(delete t[e[a]],e.pop())}function e5(n,e){var t=n.visual,r=[];Lt(t)?kA(t,function(a){r.push(a)}):t!=null&&r.push(t);var i={color:1,symbol:1};!e&&r.length===1&&!i.hasOwnProperty(n.type)&&(r[1]=r[0]),ome(n,r)}function JI(n){return{applyVisual:function(e,t,r){var i=this.mapValueToVisual(e);r("color",n(t("color"),i))},_normalizedToVisual:b8([0,1])}}function Kee(n){var e=this.option.visual;return e[Math.round(Jn(n,[0,1],[0,e.length-1],!0))]||{}}function yT(n){return function(e,t,r){r(n,this.mapValueToVisual(e))}}function tE(n){var e=this.option.visual;return e[this.option.loop&&n!==MN?n%e.length:n]}function zv(){return this.option.visual[0]}function b8(n){return{linear:function(e){return Jn(e,n,this.option.visual,!0)},category:tE,piecewise:function(e,t){var r=S8.call(this,t);return r==null&&(r=Jn(e,n,this.option.visual,!0)),r},fixed:zv}}function S8(n){var e=this.option,t=e.pieceList;if(e.hasSpecialVisual){var r=Ta.findPieceIndex(n,t),i=t[r];if(i&&i.visual)return i.visual[this.type]}}function ome(n,e){return n.visual=e,n.type==="color"&&(n.parsedVisual=Ue(e,function(t){var r=jo(t);return r||[0,0,0,1]})),e}var jze={linear:function(n){return Jn(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var e=this.option.pieceList,t=Ta.findPieceIndex(n,e,!0);if(t!=null)return Jn(t,[0,e.length-1],[0,1],!0)},category:function(n){var e=this.option.categories?this.option.categoryMap[n]:n;return e??MN},fixed:ki};function eP(n,e,t){return n?e<=t:e<t}var Wze="itemStyle",lme=mn();const Xze={seriesType:"treemap",reset:function(n){var e=n.getData().tree,t=e.root;t.isRemoved()||ume(t,{},n.getViewRoot().getAncestors(),n)}};function ume(n,e,t,r){var i=n.getModel(),a=n.getLayout(),s=n.hostTree.data;if(!(!a||a.invisible||!a.isInView)){var o=i.getModel(Wze),l=$ze(o,e,r),u=s.ensureUniqueItemVisual(n.dataIndex,"style"),c=o.get("borderColor"),h=o.get("borderColorSaturation"),d;h!=null&&(d=Zee(l),c=Yze(h,d)),u.stroke=c;var f=n.viewChildren;if(!f||!f.length)d=Zee(l),u.fill=d;else{var p=qze(n,i,a,o,l,f);W(f,function(m,g){if(m.depth>=t.length||m===t[m.depth]){var v=Kze(i,l,m,g,p,r);ume(m,v,t,r)}})}}}function $ze(n,e,t){var r=Pe({},e),i=t.designatedVisualItemStyle;return W(["color","colorAlpha","colorSaturation"],function(a){i[a]=e[a];var s=n.get(a);i[a]=null,s!=null&&(r[a]=s)}),r}function Zee(n){var e=t5(n,"color");if(e){var t=t5(n,"colorAlpha"),r=t5(n,"colorSaturation");return r&&(e=fg(e,null,null,r)),t&&(e=WR(e,t)),e}}function Yze(n,e){return e!=null?fg(e,null,null,n):null}function t5(n,e){var t=n[e];if(t!=null&&t!=="none")return t}function qze(n,e,t,r,i,a){if(!(!a||!a.length)){var s=n5(e,"color")||i.color!=null&&i.color!=="none"&&(n5(e,"colorAlpha")||n5(e,"colorSaturation"));if(s){var o=e.get("visualMin"),l=e.get("visualMax"),u=t.dataExtent.slice();o!=null&&o<u[0]&&(u[0]=o),l!=null&&l>u[1]&&(u[1]=l);var c=e.get("colorMappingBy"),h={type:s.name,dataExtent:u,visual:s.range};h.type==="color"&&(c==="index"||c==="id")?(h.mappingMethod="category",h.loop=!0):h.mappingMethod="linear";var d=new Ta(h);return lme(d).drColorMappingBy=c,d}}}function n5(n,e){var t=n.get(e);return Be(t)&&t.length?{name:e,range:t}:null}function Kze(n,e,t,r,i,a){var s=Pe({},e);if(i){var o=i.type,l=o==="color"&&lme(i).drColorMappingBy,u=l==="index"?r:l==="id"?a.mapIdToIndex(t.getId()):t.getValue(n.get("visualDimension"));s[o]=i.mapValueToVisual(u)}return s}var OA=Math.max,DN=Math.min,Qee=fs,f7=W,cme=["itemStyle","borderWidth"],Zze=["itemStyle","gapWidth"],Qze=["upperLabel","show"],Jze=["upperLabel","height"];const e8e={seriesType:"treemap",reset:function(n,e,t,r){var i=n.option,a=ha(n,t).refContainer,s=qr(n.getBoxLayoutParams(),a),o=i.size||[],l=Xe(Qee(s.width,o[0]),a.width),u=Xe(Qee(s.height,o[1]),a.height),c=r&&r.type,h=["treemapZoomToNode","treemapRootToNode"],d=NA(r,h,n),f=c==="treemapRender"||c==="treemapMove"?r.rootRect:null,p=n.getViewRoot(),m=ime(p);if(c!=="treemapMove"){var g=c==="treemapZoomToNode"?s8e(n,d,p,l,u):f?[f.width,f.height]:[l,u],v=i.sort;v&&v!=="asc"&&v!=="desc"&&(v="desc");var b={squareRatio:i.squareRatio,sort:v,leafDepth:i.leafDepth};p.hostTree.clearLayouts();var S={x:0,y:0,width:g[0],height:g[1],area:g[0]*g[1]};p.setLayout(S),hme(p,b,!1,0),S=p.getLayout(),f7(m,function(E,T){var M=(m[T+1]||p).getValue();E.setLayout(Pe({dataExtent:[M,M],borderWidth:0,upperHeight:0},S))})}var w=n.getData().tree.root;w.setLayout(o8e(s,f,d),!0),n.setLayoutInfo(s),dme(w,new Rt(-s.x,-s.y,t.getWidth(),t.getHeight()),m,p,0)}};function hme(n,e,t,r){var i,a;if(!n.isRemoved()){var s=n.getLayout();i=s.width,a=s.height;var o=n.getModel(),l=o.get(cme),u=o.get(Zze)/2,c=fme(o),h=Math.max(l,c),d=l-u,f=h-u;n.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:c},!0),i=OA(i-2*d,0),a=OA(a-d-f,0);var p=i*a,m=t8e(n,o,p,e,t,r);if(m.length){var g={x:d,y:f,width:i,height:a},v=DN(i,a),b=1/0,S=[];S.area=0;for(var w=0,E=m.length;w<E;){var T=m[w];S.push(T),S.area+=T.getLayout().area;var M=a8e(S,v,e.squareRatio);M<=b?(w++,b=M):(S.area-=S.pop().getLayout().area,Jee(S,v,g,u,!1),v=DN(g.width,g.height),S.length=S.area=0,b=1/0)}if(S.length&&Jee(S,v,g,u,!0),!t){var P=o.get("childrenVisibleMin");P!=null&&p<P&&(t=!0)}for(var w=0,E=m.length;w<E;w++)hme(m[w],e,t,r+1)}}}function t8e(n,e,t,r,i,a){var s=n.children||[],o=r.sort;o!=="asc"&&o!=="desc"&&(o=null);var l=r.leafDepth!=null&&r.leafDepth<=a;if(i&&!l)return n.viewChildren=[];s=er(s,function(f){return!f.isRemoved()}),r8e(s,o);var u=i8e(e,s,o);if(u.sum===0)return n.viewChildren=[];if(u.sum=n8e(e,t,u.sum,o,s),u.sum===0)return n.viewChildren=[];for(var c=0,h=s.length;c<h;c++){var d=s[c].getValue()/u.sum*t;s[c].setLayout({area:d})}return l&&(s.length&&n.setLayout({isLeafRoot:!0},!0),s.length=0),n.viewChildren=s,n.setLayout({dataExtent:u.dataExtent},!0),s}function n8e(n,e,t,r,i){if(!r)return t;for(var a=n.get("visibleMin"),s=i.length,o=s,l=s-1;l>=0;l--){var u=i[r==="asc"?s-l-1:l].getValue();u/t*e<a&&(o=l,t-=u)}return r==="asc"?i.splice(0,s-o):i.splice(o,s-o),t}function r8e(n,e){return e&&n.sort(function(t,r){var i=e==="asc"?t.getValue()-r.getValue():r.getValue()-t.getValue();return i===0?e==="asc"?t.dataIndex-r.dataIndex:r.dataIndex-t.dataIndex:i}),n}function i8e(n,e,t){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var s=n.get("visualDimension"),o;return!e||!e.length?o=[NaN,NaN]:s==="value"&&t?(o=[e[e.length-1].getValue(),e[0].getValue()],t==="asc"&&o.reverse()):(o=[1/0,-1/0],f7(e,function(l){var u=l.getValue(s);u<o[0]&&(o[0]=u),u>o[1]&&(o[1]=u)})),{sum:r,dataExtent:o}}function a8e(n,e,t){for(var r=0,i=1/0,a=0,s=void 0,o=n.length;a<o;a++)s=n[a].getLayout().area,s&&(s<i&&(i=s),s>r&&(r=s));var l=n.area*n.area,u=e*e*t;return l?OA(u*r/l,l/(u*i)):1/0}function Jee(n,e,t,r,i){var a=e===t.width?0:1,s=1-a,o=["x","y"],l=["width","height"],u=t[o[a]],c=e?n.area/e:0;(i||c>t[l[s]])&&(c=t[l[s]]);for(var h=0,d=n.length;h<d;h++){var f=n[h],p={},m=c?f.getLayout().area/c:0,g=p[l[s]]=OA(c-2*r,0),v=t[o[a]]+t[l[a]]-u,b=h===d-1||v<m?v:m,S=p[l[a]]=OA(b-2*r,0);p[o[s]]=t[o[s]]+DN(r,g/2),p[o[a]]=u+DN(r,S/2),u+=b,f.setLayout(p,!0)}t[o[s]]+=c,t[l[s]]-=c}function s8e(n,e,t,r,i){var a=(e||{}).node,s=[r,i];if(!a||a===t)return s;for(var o,l=r*i,u=l*n.option.zoomToNodeRatio;o=a.parentNode;){for(var c=0,h=o.children,d=0,f=h.length;d<f;d++)c+=h[d].getValue();var p=a.getValue();if(p===0)return s;u*=c/p;var m=o.getModel(),g=m.get(cme),v=Math.max(g,fme(m));u+=4*g*g+(3*g+v)*Math.pow(u,.5),u>iZ&&(u=iZ),a=o}u<l&&(u=l);var b=Math.pow(u/l,.5);return[r*b,i*b]}function o8e(n,e,t){if(e)return{x:e.x,y:e.y};var r={x:0,y:0};if(!t)return r;var i=t.node,a=i.getLayout();if(!a)return r;for(var s=[a.width/2,a.height/2],o=i;o;){var l=o.getLayout();s[0]+=l.x,s[1]+=l.y,o=o.parentNode}return{x:n.width/2-s[0],y:n.height/2-s[1]}}function dme(n,e,t,r,i){var a=n.getLayout(),s=t[i],o=s&&s===n;if(!(s&&!o||i===t.length&&n!==r)){n.setLayout({isInView:!0,invisible:!o&&!e.intersect(a),isAboveViewRoot:o},!0);var l=new Rt(e.x-a.x,e.y-a.y,e.width,e.height);f7(n.viewChildren||[],function(u){dme(u,l,t,r,i+1)})}}function fme(n){return n.get(Qze)?n.get(Jze):0}function l8e(n){n.registerSeriesModel(Cze),n.registerChartView(Fze),n.registerVisual(Xze),n.registerLayout(e8e),Aze(n)}function u8e(n){var e=n.findComponents({mainType:"legend"});!e||!e.length||n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getGraph(),a=i.data,s=r.mapArray(r.getName);a.filterSelf(function(o){var l=a.getItemModel(o),u=l.getShallow("category");if(u!=null){Ln(u)&&(u=s[u]);for(var c=0;c<e.length;c++)if(!e[c].isSelected(u))return!1}return!0})})}function c8e(n){var e={};n.eachSeriesByType("graph",function(t){var r=t.getCategoriesData(),i=t.getData(),a={};r.each(function(s){var o=r.getName(s);a["ec-"+o]=s;var l=r.getItemModel(s),u=l.getModel("itemStyle").getItemStyle();u.fill||(u.fill=t.getColorFromPalette(o,e)),r.setItemVisual(s,"style",u);for(var c=["symbol","symbolSize","symbolKeepAspect"],h=0;h<c.length;h++){var d=l.getShallow(c[h],!0);d!=null&&r.setItemVisual(s,c[h],d)}}),r.count()&&i.each(function(s){var o=i.getItemModel(s),l=o.getShallow("category");if(l!=null){Ke(l)&&(l=a["ec-"+l]);var u=r.getItemVisual(l,"style"),c=i.ensureUniqueItemVisual(s,"style");Pe(c,u);for(var h=["symbol","symbolSize","symbolKeepAspect"],d=0;d<h.length;d++)i.setItemVisual(s,h[d],r.getItemVisual(l,h[d]))}})})}function tP(n){return n instanceof Array||(n=[n,n]),n}function h8e(n){n.eachSeriesByType("graph",function(e){var t=e.getGraph(),r=e.getEdgeData(),i=tP(e.get("edgeSymbol")),a=tP(e.get("edgeSymbolSize"));r.setVisual("fromSymbol",i&&i[0]),r.setVisual("toSymbol",i&&i[1]),r.setVisual("fromSymbolSize",a&&a[0]),r.setVisual("toSymbolSize",a&&a[1]),r.setVisual("style",e.getModel("lineStyle").getLineStyle()),r.each(function(s){var o=r.getItemModel(s),l=t.getEdgeByIndex(s),u=tP(o.getShallow("symbol",!0)),c=tP(o.getShallow("symbolSize",!0)),h=o.getModel("lineStyle").getLineStyle(),d=r.ensureUniqueItemVisual(s,"style");switch(Pe(d,h),d.stroke){case"source":{var f=l.node1.getVisual("style");d.stroke=f&&f.fill;break}case"target":{var f=l.node2.getVisual("style");d.stroke=f&&f.fill;break}}u[0]&&l.setVisual("fromSymbol",u[0]),u[1]&&l.setVisual("toSymbol",u[1]),c[0]&&l.setVisual("fromSymbolSize",c[0]),c[1]&&l.setVisual("toSymbolSize",c[1])})})}var w8="-->",I3=function(n){return n.get("autoCurveness")||null},pme=function(n,e){var t=I3(n),r=20,i=[];if(Ln(t))r=t;else if(Be(t)){n.__curvenessList=t;return}e>r&&(r=e);var a=r%2?r+2:r+3;i=[];for(var s=0;s<a;s++)i.push((s%2?s+1:s)/10*(s%2?-1:1));n.__curvenessList=i},BA=function(n,e,t){var r=[n.id,n.dataIndex].join("."),i=[e.id,e.dataIndex].join(".");return[t.uid,r,i].join(w8)},mme=function(n){var e=n.split(w8);return[e[0],e[2],e[1]].join(w8)},d8e=function(n,e){var t=BA(n.node1,n.node2,e);return e.__edgeMap[t]},f8e=function(n,e){var t=T8(BA(n.node1,n.node2,e),e),r=T8(BA(n.node2,n.node1,e),e);return t+r},T8=function(n,e){var t=e.__edgeMap;return t[n]?t[n].length:0};function p8e(n){I3(n)&&(n.__curvenessList=[],n.__edgeMap={},pme(n))}function m8e(n,e,t,r){if(I3(t)){var i=BA(n,e,t),a=t.__edgeMap,s=a[mme(i)];a[i]&&!s?a[i].isForward=!0:s&&a[i]&&(s.isForward=!0,a[i].isForward=!1),a[i]=a[i]||[],a[i].push(r)}}function p7(n,e,t,r){var i=I3(e),a=Be(i);if(!i)return null;var s=d8e(n,e);if(!s)return null;for(var o=-1,l=0;l<s.length;l++)if(s[l]===t){o=l;break}var u=f8e(n,e);pme(e,u),n.lineStyle=n.lineStyle||{};var c=BA(n.node1,n.node2,e),h=e.__curvenessList,d=a||u%2?0:1;if(s.isForward)return h[d+o];var f=mme(c),p=T8(f,e),m=h[o+p+d];return r?a?i&&i[0]===0?(p+d)%2?m:-m:((p%2?0:1)+d)%2?m:-m:(p+d)%2?m:-m:h[o+p+d]}function gme(n){var e=n.coordinateSystem;if(!(e&&e.type!=="view")){var t=n.getGraph();t.eachNode(function(r){var i=r.getModel();r.setLayout([+i.get("x"),+i.get("y")])}),m7(t,n)}}function m7(n,e){n.eachEdge(function(t,r){var i=Ll(t.getModel().get(["lineStyle","curveness"]),-p7(t,e,r,!0),0),a=Rf(t.node1.getLayout()),s=Rf(t.node2.getLayout()),o=[a,s];+i&&o.push([(a[0]+s[0])/2-(a[1]-s[1])*i,(a[1]+s[1])/2-(s[0]-a[0])*i]),t.setLayout(o)})}function g8e(n,e){n.eachSeriesByType("graph",function(t){var r=t.get("layout"),i=t.coordinateSystem;if(i&&i.type!=="view"){var a=t.getData(),s=[];W(i.dimensions,function(d){s=s.concat(a.mapDimensionsAll(d))});for(var o=0;o<a.count();o++){for(var l=[],u=!1,c=0;c<s.length;c++){var h=a.get(s[c],o);isNaN(h)||(u=!0),l.push(h)}u?a.setItemLayout(o,i.dataToPoint(l)):a.setItemLayout(o,[NaN,NaN])}m7(a.graph,t)}else(!r||r==="none")&&gme(t)})}function nE(n){var e=n.coordinateSystem;if(e.type!=="view")return 1;var t=n.option.nodeScaleRatio,r=e.scaleX,i=e.getZoom(),a=(i-1)*t+1;return a/r}function rE(n){var e=n.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var ete=Math.PI,r5=[];function g7(n,e,t,r){var i=n.coordinateSystem;if(!(i&&i.type!=="view")){var a=i.getBoundingRect(),s=n.getData(),o=s.graph,l=a.width/2+a.x,u=a.height/2+a.y,c=Math.min(a.width,a.height)/2,h=s.count();if(s.setLayout({cx:l,cy:u}),!!h){if(t){var d=i.pointToData(r),f=d[0],p=d[1],m=[f-l,p-u];BS(m,m),yL(m,m,c),t.setLayout([l+m[0],u+m[1]],!0);var g=n.get(["circular","rotateLabel"]);vme(t,g,l,u)}v8e[e](n,o,s,c,l,u,h),o.eachEdge(function(v,b){var S=Ll(v.getModel().get(["lineStyle","curveness"]),p7(v,n,b),0),w=Rf(v.node1.getLayout()),E=Rf(v.node2.getLayout()),T,M=(w[0]+E[0])/2,P=(w[1]+E[1])/2;+S&&(S*=3,T=[l*S+M*(1-S),u*S+P*(1-S)]),v.setLayout([w,E,T])})}}}var v8e={value:function(n,e,t,r,i,a,s){var o=0,l=t.getSum("value"),u=Math.PI*2/(l||s);e.eachNode(function(c){var h=c.getValue("value"),d=u*(l?h:1)/2;o+=d,c.setLayout([r*Math.cos(o)+i,r*Math.sin(o)+a]),o+=d})},symbolSize:function(n,e,t,r,i,a,s){var o=0;r5.length=s;var l=nE(n);e.eachNode(function(h){var d=rE(h);isNaN(d)&&(d=2),d<0&&(d=0),d*=l;var f=Math.asin(d/2/r);isNaN(f)&&(f=ete/2),r5[h.dataIndex]=f,o+=f*2});var u=(2*ete-o)/s/2,c=0;e.eachNode(function(h){var d=u+r5[h.dataIndex];c+=d,(!h.getLayout()||!h.getLayout().fixed)&&h.setLayout([r*Math.cos(c)+i,r*Math.sin(c)+a]),c+=d})}};function vme(n,e,t,r){var i=n.getGraphicEl();if(i){var a=n.getModel(),s=a.get(["label","rotate"])||0,o=i.getSymbolPath();if(e){var l=n.getLayout(),u=Math.atan2(l[1]-r,l[0]-t);u<0&&(u=Math.PI*2+u);var c=l[0]<t;c&&(u=u-Math.PI);var h=c?"left":"right";o.setTextConfig({rotation:-u,position:h,origin:"center"});var d=o.ensureState("emphasis");Pe(d.textConfig||(d.textConfig={}),{position:h})}else o.setTextConfig({rotation:s*=Math.PI/180})}}function y8e(n){n.eachSeriesByType("graph",function(e){e.get("layout")==="circular"&&g7(e,"symbolSize")})}var a_=XU;function x8e(n,e,t){for(var r=n,i=e,a=t.rect,s=a.width,o=a.height,l=[a.x+s/2,a.y+o/2],u=t.gravity==null?.1:t.gravity,c=0;c<r.length;c++){var h=r[c];h.p||(h.p=rx(s*(Math.random()-.5)+l[0],o*(Math.random()-.5)+l[1])),h.pp=Rf(h.p),h.edges=null}var d=t.friction==null?.6:t.friction,f=d,p,m;return{warmUp:function(){f=d*.8},setFixed:function(g){r[g].fixed=!0},setUnfixed:function(g){r[g].fixed=!1},beforeStep:function(g){p=g},afterStep:function(g){m=g},step:function(g){p&&p(r,i);for(var v=[],b=r.length,S=0;S<i.length;S++){var w=i[S];if(!w.ignoreForceLayout){var E=w.n1,T=w.n2;i0(v,T.p,E.p);var M=$U(v)-w.d,P=T.w/(E.w+T.w);isNaN(P)&&(P=0),BS(v,v),!E.fixed&&a_(E.p,E.p,v,P*M*f),!T.fixed&&a_(T.p,T.p,v,-(1-P)*M*f)}}for(var S=0;S<b;S++){var I=r[S];I.fixed||(i0(v,l,I.p),a_(I.p,I.p,v,u*f))}for(var S=0;S<b;S++)for(var E=r[S],D=S+1;D<b;D++){var T=r[D];i0(v,T.p,E.p);var M=$U(v);M===0&&(WG(v,Math.random()-.5,Math.random()-.5),M=1);var R=(E.rep+T.rep)/M/M;!E.fixed&&a_(E.pp,E.pp,v,R),!T.fixed&&a_(T.pp,T.pp,v,-R)}for(var B=[],S=0;S<b;S++){var I=r[S];I.fixed||(i0(B,I.p,I.pp),a_(I.p,I.p,B,f),ro(I.pp,I.p))}f=f*.992;var k=f<.01;m&&m(r,i,k),g&&g(k)}}}function _8e(n){n.eachSeriesByType("graph",function(e){var t=e.coordinateSystem;if(!(t&&t.type!=="view"))if(e.get("layout")==="force"){var r=e.preservedPoints||{},i=e.getGraph(),a=i.data,s=i.edgeData,o=e.getModel("force"),l=o.get("initLayout");e.preservedPoints?a.each(function(S){var w=a.getId(S);a.setItemLayout(S,r[w]||[NaN,NaN])}):!l||l==="none"?gme(e):l==="circular"&&g7(e,"value");var u=a.getDataExtent("value"),c=s.getDataExtent("value"),h=o.get("repulsion"),d=o.get("edgeLength"),f=Be(h)?h:[h,h],p=Be(d)?d:[d,d];p=[p[1],p[0]];var m=a.mapArray("value",function(S,w){var E=a.getItemLayout(w),T=Jn(S,u,f);return isNaN(T)&&(T=(f[0]+f[1])/2),{w:T,rep:T,fixed:a.getItemModel(w).get("fixed"),p:!E||isNaN(E[0])||isNaN(E[1])?null:E}}),g=s.mapArray("value",function(S,w){var E=i.getEdgeByIndex(w),T=Jn(S,c,p);isNaN(T)&&(T=(p[0]+p[1])/2);var M=E.getModel(),P=Ll(E.getModel().get(["lineStyle","curveness"]),-p7(E,e,w,!0),0);return{n1:m[E.node1.dataIndex],n2:m[E.node2.dataIndex],d:T,curveness:P,ignoreForceLayout:M.get("ignoreForceLayout")}}),v=t.getBoundingRect(),b=x8e(m,g,{rect:v,gravity:o.get("gravity"),friction:o.get("friction")});b.beforeStep(function(S,w){for(var E=0,T=S.length;E<T;E++)S[E].fixed&&ro(S[E].p,i.getNodeByIndex(E).getLayout())}),b.afterStep(function(S,w,E){for(var T=0,M=S.length;T<M;T++)S[T].fixed||i.getNodeByIndex(T).setLayout(S[T].p),r[a.getId(T)]=S[T].p;for(var T=0,M=w.length;T<M;T++){var P=w[T],I=i.getEdgeByIndex(T),D=P.n1.p,R=P.n2.p,B=I.getLayout();B=B?B.slice():[],B[0]=B[0]||[],B[1]=B[1]||[],ro(B[0],D),ro(B[1],R),+P.curveness&&(B[2]=[(D[0]+R[0])/2-(D[1]-R[1])*P.curveness,(D[1]+R[1])/2-(R[0]-D[0])*P.curveness]),I.setLayout(B)}}),e.forceLayout=b,e.preservedPoints=r,b.step()}else e.forceLayout=null})}function b8e(n,e,t){var r=ha(n,e),i=Pe(n.getBoxLayoutParams(),{aspect:t}),a=qr(i,r.refContainer);return Yhe(n,a,t)}function S8e(n,e){var t=[];return n.eachSeriesByType("graph",function(r){_2({targetModel:r,coordSysType:"view",coordSysProvider:i,isDefaultDataCoordSys:!0});function i(){var a=r.getData(),s=a.mapArray(function(p){var m=a.getItemModel(p);return[+m.get("x"),+m.get("y")]}),o=[],l=[];a3(s,o,l),l[0]-o[0]===0&&(l[0]+=1,o[0]-=1),l[1]-o[1]===0&&(l[1]+=1,o[1]-=1);var u=(l[0]-o[0])/(l[1]-o[1]),c=b8e(r,e,u);isNaN(u)&&(o=[c.x,c.y],l=[c.x+c.width,c.y+c.height]);var h=l[0]-o[0],d=l[1]-o[1],f=new dx(null,{api:e,ecModel:n});return f.zoomLimit=r.get("scaleLimit"),f.setBoundingRect(o[0],o[1],h,d),f.setViewRect(c.x,c.y,c.width,c.height),f.setCenter(r.get("center")),f.setZoom(r.get("zoom")),t.push(f),f}}),t}var tte=Xi.prototype,i5=m2.prototype,yme=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n})();(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(yme);function a5(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}var xme=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:ve.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new yme},e.prototype.buildPath=function(t,r){a5(r)?tte.buildPath.call(this,t,r):i5.buildPath.call(this,t,r)},e.prototype.pointAt=function(t){return a5(this.shape)?tte.pointAt.call(this,t):i5.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var r=this.shape,i=a5(r)?[r.x2-r.x1,r.y2-r.y1]:i5.tangentAt.call(this,t);return BS(i,i)},e})(vn),s5=["fromSymbol","toSymbol"];function nte(n){return"_"+n+"Type"}function rte(n,e,t){var r=e.getItemVisual(t,n);if(!r||r==="none")return r;var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),s=e.getItemVisual(t,n+"Offset"),o=e.getItemVisual(t,n+"KeepAspect"),l=$S(i),u=lx(s||0,l);return r+l+u+(a||"")+(o||"")}function ite(n,e,t){var r=e.getItemVisual(t,n);if(!(!r||r==="none")){var i=e.getItemVisual(t,n+"Size"),a=e.getItemVisual(t,n+"Rotate"),s=e.getItemVisual(t,n+"Offset"),o=e.getItemVisual(t,n+"KeepAspect"),l=$S(i),u=lx(s||0,l),c=Ki(r,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,o);return c.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,c.name=n,c}}function w8e(n){var e=new xme({name:"line",subPixelOptimize:!0});return E8(e.shape,n),e}function E8(n,e){n.x1=e[0][0],n.y1=e[0][1],n.x2=e[1][0],n.y2=e[1][1],n.percent=1;var t=e[2];t?(n.cpx1=t[0],n.cpy1=t[1]):(n.cpx1=NaN,n.cpy1=NaN)}var v7=(function(n){be(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createLine(t,r,i),a}return e.prototype._createLine=function(t,r,i){var a=t.hostModel,s=t.getItemLayout(r),o=t.getItemVisual(r,"z2"),l=w8e(s);l.shape.percent=0,Vr(l,{z2:dt(o,0),shape:{percent:1}},a,r),this.add(l),W(s5,function(u){var c=ite(u,t,r);this.add(c),this[nte(u)]=rte(u,t,r)},this),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,s=this.childOfName("line"),o=t.getItemLayout(r),l={shape:{}};E8(l.shape,o),Vn(s,l,a,r),W(s5,function(u){var c=rte(u,t,r),h=nte(u);if(this[h]!==c){this.remove(this.childOfName(u));var d=ite(u,t,r);this.add(d)}this[h]=c},this),this._updateCommonStl(t,r,i)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,r,i){var a=t.hostModel,s=this.childOfName("line"),o=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,h=i&&i.emphasisDisabled,d=i&&i.focus,f=i&&i.blurScope;if(!i||t.hasItemOption){var p=t.getItemModel(r),m=p.getModel("emphasis");o=m.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),h=m.get("disabled"),d=m.get("focus"),f=m.get("blurScope"),c=ca(p)}var g=t.getItemVisual(r,"style"),v=g.stroke;s.useStyle(g),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=o,s.ensureState("blur").style=l,s.ensureState("select").style=u,W(s5,function(T){var M=this.childOfName(T);if(M){M.setColor(v),M.style.opacity=g.opacity;for(var P=0;P<yo.length;P++){var I=yo[P],D=s.getState(I);if(D){var R=D.style||{},B=M.ensureState(I),k=B.style||(B.style={});R.stroke!=null&&(k[M.__isEmptyBrush?"stroke":"fill"]=R.stroke),R.opacity!=null&&(k.opacity=R.opacity)}}M.markRedraw()}},this);var b=a.getRawValue(r);Aa(this,c,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(T,M){return a.getFormattedLabel(T,M,t.dataType)}},inheritColor:v||ve.color.neutral99,defaultOpacity:g.opacity,defaultText:(b==null?t.getName(r):isFinite(b)?Wi(b):b)+""});var S=this.getTextContent();if(S){var w=c.normal;S.__align=S.style.align,S.__verticalAlign=S.style.verticalAlign,S.__position=w.get("position")||"middle";var E=w.get("distance");Be(E)||(E=[E,E]),S.__labelDistance=E}this.setTextConfig({position:null,local:!0,inside:!1}),Yr(this,d,f,h)},e.prototype.highlight=function(){Yf(this)},e.prototype.downplay=function(){qf(this)},e.prototype.updateLayout=function(t,r){this.setLinePoints(t.getItemLayout(r))},e.prototype.setLinePoints=function(t){var r=this.childOfName("line");E8(r.shape,t),r.dirty()},e.prototype.beforeUpdate=function(){var t=this,r=t.childOfName("fromSymbol"),i=t.childOfName("toSymbol"),a=t.getTextContent();if(!r&&!i&&(!a||a.ignore))return;for(var s=1,o=this.parent;o;)o.scaleX&&(s/=o.scaleX),o=o.parent;var l=t.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),h=l.pointAt(u),d=i0([],h,c);BS(d,d);function f(D,R){var B=D.__specifiedRotation;if(B==null){var k=l.tangentAt(R);D.attr("rotation",(R===1?-1:1)*Math.PI/2-Math.atan2(k[1],k[0]))}else D.attr("rotation",B)}if(r&&(r.setPosition(c),f(r,0),r.scaleX=r.scaleY=s*u,r.markRedraw()),i&&(i.setPosition(h),f(i,1),i.scaleX=i.scaleY=s*u,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var p=void 0,m=void 0,g=a.__labelDistance,v=g[0]*s,b=g[1]*s,S=u/2,w=l.tangentAt(S),E=[w[1],-w[0]],T=l.pointAt(S);E[1]>0&&(E[0]=-E[0],E[1]=-E[1]);var M=w[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var P=-Math.atan2(w[1],w[0]);h[0]<c[0]&&(P=Math.PI+P),a.rotation=P}var I=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":I=-b,m="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":I=b,m="top";break;default:I=0,m="middle"}switch(a.__position){case"end":a.x=d[0]*v+h[0],a.y=d[1]*b+h[1],p=d[0]>.8?"left":d[0]<-.8?"right":"center",m=d[1]>.8?"top":d[1]<-.8?"bottom":"middle";break;case"start":a.x=-d[0]*v+c[0],a.y=-d[1]*b+c[1],p=d[0]>.8?"right":d[0]<-.8?"left":"center",m=d[1]>.8?"bottom":d[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=v*M+c[0],a.y=c[1]+I,p=w[0]<0?"right":"left",a.originX=-v*M,a.originY=-I;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=T[0],a.y=T[1]+I,p="center",a.originY=-I;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-v*M+h[0],a.y=h[1]+I,p=w[0]>=0?"right":"left",a.originX=v*M,a.originY=-I;break}a.scaleX=a.scaleY=s,a.setStyle({verticalAlign:a.__verticalAlign||m,align:a.__align||p})}},e})(wt),y7=(function(){function n(e){this.group=new wt,this._LineCtor=e||v7}return n.prototype.updateData=function(e){var t=this;this._progressiveEls=null;var r=this,i=r.group,a=r._lineData;r._lineData=e,a||i.removeAll();var s=ate(e);e.diff(a).add(function(o){t._doAdd(e,o,s)}).update(function(o,l){t._doUpdate(a,e,l,o,s)}).remove(function(o){i.remove(a.getItemGraphicEl(o))}).execute()},n.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,r){t.updateLayout(e,r)},this)},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=ate(e),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t){this._progressiveEls=[];function r(o){!o.isGroup&&!T8e(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var i=e.start;i<e.end;i++){var a=t.getItemLayout(i);if(o5(a)){var s=new this._LineCtor(t,i,this._seriesScope);s.traverse(r),this.group.add(s),t.setItemGraphicEl(i,s),this._progressiveEls.push(s)}}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(e){Ng(this._progressiveEls||this.group,e)},n.prototype._doAdd=function(e,t,r){var i=e.getItemLayout(t);if(o5(i)){var a=new this._LineCtor(e,t,r);e.setItemGraphicEl(t,a),this.group.add(a)}},n.prototype._doUpdate=function(e,t,r,i,a){var s=e.getItemGraphicEl(r);if(!o5(t.getItemLayout(i))){this.group.remove(s);return}s?s.updateData(t,i,a):s=new this._LineCtor(t,i,a),t.setItemGraphicEl(i,s),this.group.add(s)},n})();function T8e(n){return n.animators&&n.animators.length>0}function ate(n){var e=n.hostModel,t=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:t.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:t.get("disabled"),blurScope:t.get("blurScope"),focus:t.get("focus"),labelStatesModels:ca(e)}}function ste(n){return isNaN(n[0])||isNaN(n[1])}function o5(n){return n&&!ste(n[0])&&!ste(n[1])}var l5=[],u5=[],c5=[],s_=Wa,h5=My,ote=Math.abs;function lte(n,e,t){for(var r=n[0],i=n[1],a=n[2],s=1/0,o,l=t*t,u=.1,c=.1;c<=.9;c+=.1){l5[0]=s_(r[0],i[0],a[0],c),l5[1]=s_(r[1],i[1],a[1],c);var h=ote(h5(l5,e)-l);h<s&&(s=h,o=c)}for(var d=0;d<32;d++){var f=o+u;u5[0]=s_(r[0],i[0],a[0],o),u5[1]=s_(r[1],i[1],a[1],o),c5[0]=s_(r[0],i[0],a[0],f),c5[1]=s_(r[1],i[1],a[1],f);var h=h5(u5,e)-l;if(ote(h)<.01)break;var p=h5(c5,e)-l;u/=2,h<0?p>=0?o=o+u:o=o-u:p>=0?o=o-u:o=o+u}return o}function d5(n,e){var t=[],r=fA,i=[[],[],[]],a=[[],[]],s=[];e/=2,n.eachEdge(function(o,l){var u=o.getLayout(),c=o.getVisual("fromSymbol"),h=o.getVisual("toSymbol");u.__original||(u.__original=[Rf(u[0]),Rf(u[1])],u[2]&&u.__original.push(Rf(u[2])));var d=u.__original;if(u[2]!=null){if(ro(i[0],d[0]),ro(i[1],d[2]),ro(i[2],d[1]),c&&c!=="none"){var f=rE(o.node1),p=lte(i,d[0],f*e);r(i[0][0],i[1][0],i[2][0],p,t),i[0][0]=t[3],i[1][0]=t[4],r(i[0][1],i[1][1],i[2][1],p,t),i[0][1]=t[3],i[1][1]=t[4]}if(h&&h!=="none"){var f=rE(o.node2),p=lte(i,d[1],f*e);r(i[0][0],i[1][0],i[2][0],p,t),i[1][0]=t[1],i[2][0]=t[2],r(i[0][1],i[1][1],i[2][1],p,t),i[1][1]=t[1],i[2][1]=t[2]}ro(u[0],i[0]),ro(u[1],i[2]),ro(u[2],i[1])}else{if(ro(a[0],d[0]),ro(a[1],d[1]),i0(s,a[1],a[0]),BS(s,s),c&&c!=="none"){var f=rE(o.node1);XU(a[0],a[0],s,f*e)}if(h&&h!=="none"){var f=rE(o.node2);XU(a[1],a[1],s,-f*e)}ro(u[0],a[0]),ro(u[1],a[1])}})}var _me=mn();function E8e(n){if(n)return _me(n).bridge}function ute(n,e){n&&(_me(n).bridge=e)}function cte(n){return n.type==="view"}var A8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){var i=new E2,a=new y7,s=this.group,o=new wt;this._controller=new hx(r.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(a.group),s.add(o),this._symbolDraw=i,this._lineDraw=a,this._mainGroup=o,this._firstRender=!0},e.prototype.render=function(t,r,i){var a=this,s=t.coordinateSystem,o=!1;this._model=t,this._api=i,this._active=!0;var l=this._getThumbnailInfo();l&&l.bridge.reset(i);var u=this._symbolDraw,c=this._lineDraw;if(cte(s)){var h={x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY};this._firstRender?this._mainGroup.attr(h):Vn(this._mainGroup,h,t)}d5(t.getGraph(),nE(t));var d=t.getData();u.updateData(d);var f=t.getEdgeData();c.updateData(f),this._updateNodeAndLinkScale(),this._updateController(null,t,i),clearTimeout(this._layoutTimeout);var p=t.forceLayout,m=t.get(["force","layoutAnimation"]);p&&(o=!0,this._startForceLayoutIteration(p,i,m));var g=t.get("layout");d.graph.eachNode(function(w){var E=w.dataIndex,T=w.getGraphicEl(),M=w.getModel();if(T){T.off("drag").off("dragend");var P=M.get("draggable");P&&T.on("drag",function(D){switch(g){case"force":p.warmUp(),!a._layouting&&a._startForceLayoutIteration(p,i,m),p.setFixed(E),d.setItemLayout(E,[T.x,T.y]);break;case"circular":d.setItemLayout(E,[T.x,T.y]),w.setLayout({fixed:!0},!0),g7(t,"symbolSize",w,[D.offsetX,D.offsetY]),a.updateLayout(t);break;case"none":default:d.setItemLayout(E,[T.x,T.y]),m7(t.getGraph(),t),a.updateLayout(t);break}}).on("dragend",function(){p&&p.setUnfixed(E)}),T.setDraggable(P,!!M.get("cursor"));var I=M.get(["emphasis","focus"]);I==="adjacency"&&(Ft(T).focus=w.getAdjacentDataIndices())}}),d.graph.eachEdge(function(w){var E=w.getGraphicEl(),T=w.getModel().get(["emphasis","focus"]);E&&T==="adjacency"&&(Ft(E).focus={edge:[w.dataIndex],node:[w.node1.dataIndex,w.node2.dataIndex]})});var v=t.get("layout")==="circular"&&t.get(["circular","rotateLabel"]),b=d.getLayout("cx"),S=d.getLayout("cy");d.graph.eachNode(function(w){vme(w,v,b,S)}),this._firstRender=!1,o||this._renderThumbnail(t,i,this._symbolDraw,this._lineDraw)},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,r,i){var a=this,s=!1;(function o(){t.step(function(l){a.updateLayout(a._model),(l||!s)&&(s=!0,a._renderThumbnail(a._model,r,a._symbolDraw,a._lineDraw)),(a._layouting=!l)&&(i?a._layoutTimeout=setTimeout(o,16):o())})})()},e.prototype._updateController=function(t,r,i){var a=this._controller,s=this._controllerHost,o=r.coordinateSystem;if(!cte(o)){a.disable();return}a.enable(r.get("roam"),{api:i,zInfo:{component:r},triggerInfo:{roamTrigger:r.get("roamTrigger"),isInSelf:function(l,u,c){return o.containPoint([u,c])},isInClip:function(l,u,c){return!t||t.contain(u,c)}}}),s.zoomLimit=r.get("scaleLimit"),s.zoom=o.getZoom(),a.off("pan").off("zoom").on("pan",function(l){i.dispatchAction({seriesId:r.id,type:"graphRoam",dx:l.dx,dy:l.dy})}).on("zoom",function(l){i.dispatchAction({seriesId:r.id,type:"graphRoam",zoom:l.scale,originX:l.originX,originY:l.originY})})},e.prototype.updateViewOnPan=function(t,r,i){this._active&&(s7(this._controllerHost,i.dx,i.dy),this._updateThumbnailWindow())},e.prototype.updateViewOnZoom=function(t,r,i){this._active&&(o7(this._controllerHost,i.zoom,i.originX,i.originY),this._updateNodeAndLinkScale(),d5(t.getGraph(),nE(t)),this._lineDraw.updateLayout(),r.updateLabelLayout(),this._updateThumbnailWindow())},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,r=t.getData(),i=nE(t);r.eachItemGraphicEl(function(a,s){a&&a.setSymbolScale(i)})},e.prototype.updateLayout=function(t){this._active&&(d5(t.getGraph(),nE(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout())},e.prototype.remove=function(){this._active=!1,clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove(),this._controller&&this._controller.disable()},e.prototype._getThumbnailInfo=function(){var t=this._model,r=t.coordinateSystem;if(r.type==="view"){var i=E8e(t);if(i)return{bridge:i,coordSys:r}}},e.prototype._updateThumbnailWindow=function(){var t=this._getThumbnailInfo();t&&t.bridge.updateWindow(t.coordSys.transform,this._api)},e.prototype._renderThumbnail=function(t,r,i,a){var s=this._getThumbnailInfo();if(s){var o=new wt,l=i.group.children(),u=a.group.children(),c=new wt,h=new wt;o.add(h),o.add(c);for(var d=0;d<l.length;d++){var f=l[d],p=f.children()[0],m=f.x,g=f.y,v=Tt(p.shape),b=Pe(v,{width:p.scaleX,height:p.scaleY,x:m-p.scaleX/2,y:g-p.scaleY/2}),S=Tt(p.style),w=new p.constructor({shape:b,style:S,z2:151});h.add(w)}for(var d=0;d<u.length;d++){var f=u[d],E=f.children()[0],S=Tt(E.style),b=Tt(E.shape),T=new xme({style:S,shape:b,z2:151});c.add(T)}s.bridge.renderContent({api:r,roamType:t.get("roam"),viewportRect:null,group:o,targetTrans:s.coordSys.transform})}},e.type="graph",e})(mr);function o_(n){return"_EC_"+n}var C8e=(function(){function n(e){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=e||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(e,t){e=e==null?""+t:""+e;var r=this._nodesMap;if(!r[o_(e)]){var i=new Vv(e,t);return i.hostGraph=this,this.nodes.push(i),r[o_(e)]=i,i}},n.prototype.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},n.prototype.getNodeById=function(e){return this._nodesMap[o_(e)]},n.prototype.addEdge=function(e,t,r){var i=this._nodesMap,a=this._edgesMap;if(Ln(e)&&(e=this.nodes[e]),Ln(t)&&(t=this.nodes[t]),e instanceof Vv||(e=i[o_(e)]),t instanceof Vv||(t=i[o_(t)]),!(!e||!t)){var s=e.id+"-"+t.id,o=new bme(e,t,r);return o.hostGraph=this,this._directed&&(e.outEdges.push(o),t.inEdges.push(o)),e.edges.push(o),e!==t&&t.edges.push(o),this.edges.push(o),a[s]=o,o}},n.prototype.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},n.prototype.getEdge=function(e,t){e instanceof Vv&&(e=e.id),t instanceof Vv&&(t=t.id);var r=this._edgesMap;return this._directed?r[e+"-"+t]:r[e+"-"+t]||r[t+"-"+e]},n.prototype.eachNode=function(e,t){for(var r=this.nodes,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&e.call(t,r[a],a)},n.prototype.eachEdge=function(e,t){for(var r=this.edges,i=r.length,a=0;a<i;a++)r[a].dataIndex>=0&&r[a].node1.dataIndex>=0&&r[a].node2.dataIndex>=0&&e.call(t,r[a],a)},n.prototype.breadthFirstTraverse=function(e,t,r,i){if(t instanceof Vv||(t=this._nodesMap[o_(t)]),!!t){for(var a=r==="out"?"outEdges":r==="in"?"inEdges":"edges",s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(!e.call(i,t,null))for(var o=[t];o.length;)for(var l=o.shift(),u=l[a],s=0;s<u.length;s++){var c=u[s],h=c.node1===l?c.node2:c.node1;if(!h.__visited){if(e.call(i,h,l))return;o.push(h),h.__visited=!0}}}},n.prototype.update=function(){for(var e=this.data,t=this.edgeData,r=this.nodes,i=this.edges,a=0,s=r.length;a<s;a++)r[a].dataIndex=-1;for(var a=0,s=e.count();a<s;a++)r[e.getRawIndex(a)].dataIndex=a;t.filterSelf(function(o){var l=i[t.getRawIndex(o)];return l.node1.dataIndex>=0&&l.node2.dataIndex>=0});for(var a=0,s=i.length;a<s;a++)i[a].dataIndex=-1;for(var a=0,s=t.count();a<s;a++)i[t.getRawIndex(a)].dataIndex=a},n.prototype.clone=function(){for(var e=new n(this._directed),t=this.nodes,r=this.edges,i=0;i<t.length;i++)e.addNode(t[i].id,t[i].dataIndex);for(var i=0;i<r.length;i++){var a=r[i];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},n})(),Vv=(function(){function n(e,t){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=e??"",this.dataIndex=t??-1}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.data.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){for(var e={edge:[],node:[]},t=0;t<this.edges.length;t++){var r=this.edges[t];r.dataIndex<0||(e.edge.push(r.dataIndex),e.node.push(r.node1.dataIndex,r.node2.dataIndex))}return e},n.prototype.getTrajectoryDataIndices=function(){for(var e=ct(),t=ct(),r=0,i=this.edges.length;r<i;r++){var a=this.edges[r];if(!(a.dataIndex<0)){e.set(a.dataIndex,!0);for(var s=[a.node1],o=[a.node2],l=0;l<s.length;){var u=s[l];l++,t.set(u.dataIndex,!0);for(var c=u.inEdges,h=0,d=c.length,f=void 0,p=void 0;h<d;h++)f=c[h],p=f.dataIndex,p>=0&&!e.hasKey(p)&&(e.set(p,!0),s.push(f.node1))}for(l=0;l<o.length;){var m=o[l];l++,t.set(m.dataIndex,!0);for(var g=m.outEdges,h=0,v=g.length,b=void 0,S=void 0;h<v;h++)b=g[h],S=b.dataIndex,S>=0&&!e.hasKey(S)&&(e.set(S,!0),o.push(b.node2))}}}return{edge:e.keys(),node:t.keys()}},n})(),bme=(function(){function n(e,t,r){this.dataIndex=-1,this.node1=e,this.node2=t,this.dataIndex=r??-1}return n.prototype.getModel=function(e){if(!(this.dataIndex<0)){var t=this.hostGraph,r=t.edgeData.getItemModel(this.dataIndex);return r.getModel(e)}},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n.prototype.getTrajectoryDataIndices=function(){var e=ct(),t=ct();e.set(this.dataIndex,!0);for(var r=[this.node1],i=[this.node2],a=0;a<r.length;){var s=r[a];a++,t.set(s.dataIndex,!0);for(var o=s.inEdges,l=0,u=o.length,c=void 0,h=void 0;l<u;l++)c=s.inEdges[l],h=c.dataIndex,h>=0&&!e.hasKey(h)&&(e.set(h,!0),r.push(c.node1))}for(a=0;a<i.length;){var d=i[a];a++,t.set(d.dataIndex,!0);for(var f=d.outEdges,l=0,u=f.length,p=void 0,m=void 0;l<u;l++)p=d.outEdges[l],m=p.dataIndex,m>=0&&!e.hasKey(m)&&(e.set(m,!0),i.push(p.node2))}return{edge:e.keys(),node:t.keys()}},n})();function Sme(n,e){return{getValue:function(t){var r=this[n][e];return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},setVisual:function(t,r){this.dataIndex>=0&&this[n][e].setItemVisual(this.dataIndex,t,r)},getVisual:function(t){return this[n][e].getItemVisual(this.dataIndex,t)},setLayout:function(t,r){this.dataIndex>=0&&this[n][e].setItemLayout(this.dataIndex,t,r)},getLayout:function(){return this[n][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][e].getRawIndex(this.dataIndex)}}}Zi(Vv,Sme("hostGraph","data"));Zi(bme,Sme("hostGraph","edgeData"));function x7(n,e,t,r,i){for(var a=new C8e(r),s=0;s<n.length;s++)a.addNode(fs(n[s].id,n[s].name,s),s);for(var o=[],l=[],u=0,s=0;s<e.length;s++){var c=e[s],h=c.source,d=c.target;a.addEdge(h,d,u)&&(l.push(c),o.push(fs(oa(c.id,null),h+" > "+d)),u++)}var f=t.get("coordinateSystem"),p;if(f==="cartesian2d"||f==="polar"||f==="matrix")p=lp(n,t);else{var m=x2.get(f),g=m?m.dimensions||[]:[];Jt(g,"value")<0&&g.concat(["value"]);var v=S2(n,{coordDimensions:g,encodeDefine:t.getEncode()}).dimensions;p=new mo(v,t),p.initData(n)}var b=new mo(["value"],t);return b.initData(l,o),i&&i(p,b),nme({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:b},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a}var M8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments);var r=this;function i(){return r._categoriesData}this.legendVisualProvider=new ZS(i,i),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(t){n.prototype.mergeDefaultAndTheme.apply(this,arguments),Uy(t,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],s=this;if(a&&i){p8e(this);var o=x7(a,i,this,!0,l);return W(o.edges,function(u){m8e(u.node1,u.node2,this,u.dataIndex)},this),o.data}function l(u,c){u.wrapMethod("getItemModel",function(p){var m=s._categoriesModels,g=p.getShallow("category"),v=m[g];return v&&(v.parentModel=p.parentModel,p.parentModel=v),p});var h=Sn.prototype.getModel;function d(p,m){var g=h.call(this,p,m);return g.resolveParentPath=f,g}c.wrapMethod("getItemModel",function(p){return p.resolveParentPath=f,p.getModel=d,p});function f(p){if(p&&(p[0]==="label"||p[1]==="label")){var m=p.slice();return p[0]==="label"?m[0]="edgeLabel":p[1]==="label"&&(m[1]="edgeLabel"),m}return p}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,r,i){if(i==="edge"){var a=this.getData(),s=this.getDataParams(t,i),o=a.graph.getEdgeByIndex(t),l=a.getName(o.node1.dataIndex),u=a.getName(o.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),qi("nameValue",{name:c.join(" > "),value:s.value,noValue:s.value==null})}var h=Mde({series:this,dataIndex:t,multipleSeries:r});return h},e.prototype._updateCategoriesData=function(){var t=Ue(this.option.categories||[],function(i){return i.value!=null?i:Pe({value:0},i)}),r=new mo(["value"],this);r.initData(t),this._categoriesData=r,this._categoriesModels=r.mapArray(function(i){return r.getItemModel(i)})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:ve.color.neutral50,width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:ve.color.primary}}},e})(Cr);function D8e(n){n.registerChartView(A8e),n.registerSeriesModel(M8e),n.registerProcessor(u8e),n.registerVisual(c8e),n.registerVisual(h8e),n.registerLayout(g8e),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,y8e),n.registerLayout(_8e),n.registerCoordinateSystem("graphView",{dimensions:dx.dimensions,create:S8e}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},ki),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},ki),n.registerAction({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",query:e},function(i){var a=r.getViewOfSeriesModel(i);a&&(e.dx!=null&&e.dy!=null&&a.updateViewOnPan(i,r,e),e.zoom!=null&&e.originX!=null&&e.originY!=null&&a.updateViewOnZoom(i,r,e));var s=i.coordinateSystem,o=C3(s,e,i.get("scaleLimit"));i.setCenter&&i.setCenter(o.center),i.setZoom&&i.setZoom(o.zoom)})})}var hte=(function(n){be(e,n);function e(t,r,i){var a=n.call(this)||this;Ft(a).dataType="node",a.z2=2;var s=new On;return a.setTextContent(s),a.updateData(t,r,i,!0),a}return e.prototype.updateData=function(t,r,i,a){var s=this,o=t.graph.getNodeByIndex(r),l=t.hostModel,u=o.getModel(),c=u.getModel("emphasis"),h=t.getItemLayout(r),d=Pe(Hh(u.getModel("itemStyle"),h,!0),h),f=this;if(isNaN(d.startAngle)){f.setShape(d);return}a?f.setShape(d):Vn(f,{shape:d},l,r);var p=Pe(Hh(u.getModel("itemStyle"),h,!0),h);s.setShape(p),s.useStyle(t.getItemVisual(r,"style")),ua(s,u),this._updateLabel(l,u,o),t.setItemGraphicEl(r,f),ua(f,u,"itemStyle");var m=c.get("focus");Yr(this,m==="adjacency"?o.getAdjacentDataIndices():m,c.get("blurScope"),c.get("disabled"))},e.prototype._updateLabel=function(t,r,i){var a=this.getTextContent(),s=i.getLayout(),o=(s.startAngle+s.endAngle)/2,l=Math.cos(o),u=Math.sin(o),c=r.getModel("label");a.ignore=!c.get("show");var h=ca(r),d=i.getVisual("style");Aa(a,h,{labelFetcher:{getFormattedLabel:function(b,S,w,E,T,M){return t.getFormattedLabel(b,S,"node",E,Ll(T,h.normal&&h.normal.get("formatter"),r.get("name")),M)}},labelDataIndex:i.dataIndex,defaultText:i.dataIndex+"",inheritColor:d.fill,defaultOpacity:d.opacity,defaultOutsidePosition:"startArc"});var f=c.get("position")||"outside",p=c.get("distance")||0,m;f==="outside"?m=s.r+p:m=(s.r+s.r0)/2,this.textConfig={inside:f!=="outside"};var g=f!=="outside"?c.get("align")||"center":l>0?"left":"right",v=f!=="outside"?c.get("verticalAlign")||"middle":u>0?"top":"bottom";a.attr({x:l*m+s.cx,y:u*m+s.cy,rotation:0,style:{align:g,verticalAlign:v}})},e})(zs),I8e=(function(n){be(e,n);function e(t,r,i,a){var s=n.call(this)||this;return Ft(s).dataType="edge",s.updateData(t,r,i,a,!0),s}return e.prototype.buildPath=function(t,r){t.moveTo(r.s1[0],r.s1[1]);var i=.7,a=r.clockwise;t.arc(r.cx,r.cy,r.r,r.sStartAngle,r.sEndAngle,!a),t.bezierCurveTo((r.cx-r.s2[0])*i+r.s2[0],(r.cy-r.s2[1])*i+r.s2[1],(r.cx-r.t1[0])*i+r.t1[0],(r.cy-r.t1[1])*i+r.t1[1],r.t1[0],r.t1[1]),t.arc(r.cx,r.cy,r.r,r.tStartAngle,r.tEndAngle,!a),t.bezierCurveTo((r.cx-r.t2[0])*i+r.t2[0],(r.cy-r.t2[1])*i+r.t2[1],(r.cx-r.s1[0])*i+r.s1[0],(r.cy-r.s1[1])*i+r.s1[1],r.s1[0],r.s1[1]),t.closePath()},e.prototype.updateData=function(t,r,i,a,s){var o=t.hostModel,l=r.graph.getEdgeByIndex(i),u=l.getLayout(),c=l.node1.getModel(),h=r.getItemModel(l.dataIndex),d=h.getModel("lineStyle"),f=h.getModel("emphasis"),p=f.get("focus"),m=Pe(Hh(c.getModel("itemStyle"),u,!0),u),g=this;if(isNaN(m.sStartAngle)||isNaN(m.tStartAngle)){g.setShape(m);return}s?(g.setShape(m),dte(g,l,t,d)):(ku(g),dte(g,l,t,d),Vn(g,{shape:m},o,i)),Yr(this,p==="adjacency"?l.getAdjacentDataIndices():p,f.get("blurScope"),f.get("disabled")),ua(g,h,"lineStyle"),r.setItemGraphicEl(l.dataIndex,g)},e})(vn);function dte(n,e,t,r){var i=e.node1,a=e.node2,s=n.style;n.setStyle(r.getLineStyle());var o=r.get("color");switch(o){case"source":s.fill=t.getItemVisual(i.dataIndex,"style").fill,s.decal=i.getVisual("style").decal;break;case"target":s.fill=t.getItemVisual(a.dataIndex,"style").fill,s.decal=a.getVisual("style").decal;break;case"gradient":var l=t.getItemVisual(i.dataIndex,"style").fill,u=t.getItemVisual(a.dataIndex,"style").fill;if(Ke(l)&&Ke(u)){var c=n.shape,h=(c.s1[0]+c.s2[0])/2,d=(c.s1[1]+c.s2[1])/2,f=(c.t1[0]+c.t2[0])/2,p=(c.t1[1]+c.t2[1])/2;s.fill=new VS(h,d,f,p,[{offset:0,color:l},{offset:1,color:u}],!0)}break}}var P8e=Math.PI/180,L8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i){var a=t.getData(),s=this._data,o=this.group,l=-t.get("startAngle")*P8e;if(a.diff(s).add(function(c){var h=a.getItemLayout(c);if(h){var d=new hte(a,c,l);Ft(d).dataIndex=c,o.add(d)}}).update(function(c,h){var d=s.getItemGraphicEl(h),f=a.getItemLayout(c);if(!f){d&&Nf(d,t,h);return}d?d.updateData(a,c,l):d=new hte(a,c,l),o.add(d)}).remove(function(c){var h=s.getItemGraphicEl(c);h&&Nf(h,t,c)}).execute(),!s){var u=t.get("center");this.group.scaleX=.01,this.group.scaleY=.01,this.group.originX=Xe(u[0],i.getWidth()),this.group.originY=Xe(u[1],i.getHeight()),Vr(this.group,{scaleX:1,scaleY:1},t)}this._data=a,this.renderEdges(t,l)},e.prototype.renderEdges=function(t,r){var i=t.getData(),a=t.getEdgeData(),s=this._edgeData,o=this.group;a.diff(s).add(function(l){var u=new I8e(i,a,l,r);Ft(u).dataIndex=l,o.add(u)}).update(function(l,u){var c=s.getItemGraphicEl(u);c.updateData(i,a,l,r),o.add(c)}).remove(function(l){var u=s.getItemGraphicEl(l);u&&Nf(u,t,l)}).execute(),this._edgeData=a},e.prototype.dispose=function(){},e.type="chord",e})(mr),R8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links),this.legendVisualProvider=new ZS(Qe(this.getData,this),Qe(this.getRawData,this))},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(t.edges||t.links)},e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[];if(a&&i){var s=x7(a,i,this,!0,o);return s.data}function o(l,u){var c=Sn.prototype.getModel;function h(f,p){var m=c.call(this,f,p);return m.resolveParentPath=d,m}u.wrapMethod("getItemModel",function(f){return f.resolveParentPath=d,f.getModel=h,f});function d(f){if(f&&(f[0]==="label"||f[1]==="label")){var p=f.slice();return f[0]==="label"?p[0]="edgeLabel":f[1]==="label"&&(p[1]="edgeLabel"),p}return f}}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,i){var a=this.getDataParams(t,i);if(i==="edge"){var s=this.getData(),o=s.graph.getEdgeByIndex(t),l=s.getName(o.node1.dataIndex),u=s.getName(o.node2.dataIndex),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),qi("nameValue",{name:c.join(" > "),value:a.value,noValue:a.value==null})}return qi("nameValue",{name:a.name,value:a.value,noValue:a.value==null})},e.prototype.getDataParams=function(t,r){var i=n.prototype.getDataParams.call(this,t,r);if(r==="node"){var a=this.getData(),s=this.getGraph().getNodeByIndex(t);if(i.name==null&&(i.name=a.getName(t)),i.value==null){var o=s.getLayout().value;i.value=o}}return i},e.type="series.chord",e.defaultOption={z:2,coordinateSystem:"none",legendHoverLink:!0,colorBy:"data",left:0,top:0,right:0,bottom:0,width:null,height:null,center:["50%","50%"],radius:["70%","80%"],clockwise:!0,startAngle:90,endAngle:"auto",minAngle:0,padAngle:3,itemStyle:{borderRadius:[0,0,5,5]},lineStyle:{width:0,color:"source",opacity:.2},label:{show:!0,position:"outside",distance:5},emphasis:{focus:"adjacency",lineStyle:{opacity:.5}}},e})(Cr),f5=Math.PI/180;function N8e(n,e){n.eachSeriesByType("chord",function(t){k8e(t,e)})}function k8e(n,e){var t=n.getData(),r=t.graph,i=n.getEdgeData(),a=i.count();if(a){var s=$he(n,e),o=s.cx,l=s.cy,u=s.r,c=s.r0,h=Math.max((n.get("padAngle")||0)*f5,0),d=Math.max((n.get("minAngle")||0)*f5,0),f=-n.get("startAngle")*f5,p=f+Math.PI*2,m=n.get("clockwise"),g=m?1:-1,v=[f,p];s3(v,!m);var b=v[0],S=v[1],w=S-b,E=t.getSum("value")===0&&i.getSum("value")===0,T=[],M=0;r.eachEdge(function(j){var Q=E?1:j.getValue("value");E&&(Q>0||d)&&(M+=2);var H=j.node1.dataIndex,K=j.node2.dataIndex;T[H]=(T[H]||0)+Q,T[K]=(T[K]||0)+Q});var P=0;if(r.eachNode(function(j){var Q=j.getValue("value");isNaN(Q)||(T[j.dataIndex]=Math.max(Q,T[j.dataIndex]||0)),!E&&(T[j.dataIndex]>0||d)&&M++,P+=T[j.dataIndex]||0}),!(M===0||P===0)){h*M>=Math.abs(w)&&(h=Math.max(0,(Math.abs(w)-d*M)/M)),(h+d)*M>=Math.abs(w)&&(d=(Math.abs(w)-h*M)/M);var I=(w-h*M*g)/P,D=0,R=0,B=0;r.eachNode(function(j){var Q=T[j.dataIndex]||0,H=I*(P?Q:1)*g;Math.abs(H)<d?D+=d-Math.abs(H):(R+=Math.abs(H)-d,B+=Math.abs(H)),j.setLayout({angle:H,value:Q})});var k=!1;if(D>R){var V=D/R;r.eachNode(function(j){var Q=j.getLayout().angle;Math.abs(Q)>=d?j.setLayout({angle:Q*V,ratio:V},!0):j.setLayout({angle:d,ratio:d===0?1:Q/d},!0)})}else r.eachNode(function(j){if(!k){var Q=j.getLayout().angle,H=Math.min(Q/B,1),K=H*D;Q-K<d&&(k=!0)}});var G=D;r.eachNode(function(j){if(!(G<=0)){var Q=j.getLayout().angle;if(Q>d&&d>0){var H=k?1:Math.min(Q/B,1),K=Q-d,te=Math.min(K,Math.min(G,D*H));G-=te,j.setLayout({angle:Q-te,ratio:(Q-te)/Q},!0)}else d>0&&j.setLayout({angle:d,ratio:Q===0?1:d/Q},!0)}});var F=b,X=[];r.eachNode(function(j){var Q=Math.max(j.getLayout().angle,d);j.setLayout({cx:o,cy:l,r0:c,r:u,startAngle:F,endAngle:F+Q*g,clockwise:m},!0),X[j.dataIndex]=F,F+=(Q+h)*g}),r.eachEdge(function(j){var Q=E?1:j.getValue("value"),H=I*(P?Q:1)*g,K=j.node1.dataIndex,te=X[K]||0,Y=Math.abs((j.node1.getLayout().ratio||1)*H),de=te+Y*g,ge=[o+c*Math.cos(te),l+c*Math.sin(te)],se=[o+c*Math.cos(de),l+c*Math.sin(de)],he=j.node2.dataIndex,fe=X[he]||0,Ee=Math.abs((j.node2.getLayout().ratio||1)*H),Ce=fe+Ee*g,Re=[o+c*Math.cos(fe),l+c*Math.sin(fe)],He=[o+c*Math.cos(Ce),l+c*Math.sin(Ce)];j.setLayout({s1:ge,s2:se,sStartAngle:te,sEndAngle:de,t1:Re,t2:He,tStartAngle:fe,tEndAngle:Ce,cx:o,cy:l,r:c,value:Q,clockwise:m}),X[K]=de,X[he]=Ce})}}}function O8e(n){n.registerChartView(L8e),n.registerSeriesModel(R8e),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,N8e),n.registerProcessor(qS("chord"))}var B8e=(function(){function n(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return n})(),F8e=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="pointer",r}return e.prototype.getDefaultShape=function(){return new B8e},e.prototype.buildPath=function(t,r){var i=Math.cos,a=Math.sin,s=r.r,o=r.width,l=r.angle,u=r.x-i(l)*o*(o>=s/3?1:2),c=r.y-a(l)*o*(o>=s/3?1:2);l=r.angle-Math.PI/2,t.moveTo(u,c),t.lineTo(r.x+i(l)*o,r.y+a(l)*o),t.lineTo(r.x+i(r.angle)*s,r.y+a(r.angle)*s),t.lineTo(r.x-i(l)*o,r.y-a(l)*o),t.lineTo(u,c)},e})(vn);function U8e(n,e){var t=n.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i),s=Xe(t[0],e.getWidth()),o=Xe(t[1],e.getHeight()),l=Xe(n.get("radius"),a/2);return{cx:s,cy:o,r:l}}function nP(n,e){var t=n==null?"":n+"";return e&&(Ke(e)?t=e.replace("{value}",t):St(e)&&(t=e(n))),t}var z8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeAll();var a=t.get(["axisLine","lineStyle","color"]),s=U8e(t,i);this._renderMain(t,r,i,a,s),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,r,i,a,s){var o=this.group,l=t.get("clockwise"),u=-t.get("startAngle")/180*Math.PI,c=-t.get("endAngle")/180*Math.PI,h=t.getModel("axisLine"),d=h.get("roundCap"),f=d?SN:zs,p=h.get("show"),m=h.getModel("lineStyle"),g=m.get("width"),v=[u,c];s3(v,!l),u=v[0],c=v[1];for(var b=c-u,S=u,w=[],E=0;p&&E<a.length;E++){var T=Math.min(Math.max(a[E][0],0),1);c=u+b*T;var M=new f({shape:{startAngle:S,endAngle:c,cx:s.cx,cy:s.cy,clockwise:l,r0:s.r-g,r:s.r},silent:!0});M.setStyle({fill:a[E][1]}),M.setStyle(m.getLineStyle(["color","width"])),w.push(M),S=c}w.reverse(),W(w,function(I){return o.add(I)});var P=function(I){if(I<=0)return a[0][1];var D;for(D=0;D<a.length;D++)if(a[D][0]>=I&&(D===0?0:a[D-1][0])<I)return a[D][1];return a[D-1][1]};this._renderTicks(t,r,i,P,s,u,c,l,g),this._renderTitleAndDetail(t,r,i,P,s),this._renderAnchor(t,s),this._renderPointer(t,r,i,P,s,u,c,l,g)},e.prototype._renderTicks=function(t,r,i,a,s,o,l,u,c){for(var h=this.group,d=s.cx,f=s.cy,p=s.r,m=+t.get("min"),g=+t.get("max"),v=t.getModel("splitLine"),b=t.getModel("axisTick"),S=t.getModel("axisLabel"),w=t.get("splitNumber"),E=b.get("splitNumber"),T=Xe(v.get("length"),p),M=Xe(b.get("length"),p),P=o,I=(l-o)/w,D=I/E,R=v.getModel("lineStyle").getLineStyle(),B=b.getModel("lineStyle").getLineStyle(),k=v.get("distance"),V,G,F=0;F<=w;F++){if(V=Math.cos(P),G=Math.sin(P),v.get("show")){var X=k?k+c:c,j=new Xi({shape:{x1:V*(p-X)+d,y1:G*(p-X)+f,x2:V*(p-T-X)+d,y2:G*(p-T-X)+f},style:R,silent:!0});R.stroke==="auto"&&j.setStyle({stroke:a(F/w)}),h.add(j)}if(S.get("show")){var X=S.get("distance")+k,Q=nP(Wi(F/w*(g-m)+m),S.get("formatter")),H=a(F/w),K=V*(p-T-X)+d,te=G*(p-T-X)+f,Y=S.get("rotate"),de=0;Y==="radial"?(de=-P+2*Math.PI,de>Math.PI/2&&(de+=Math.PI)):Y==="tangential"?de=-P-Math.PI/2:Ln(Y)&&(de=Y*Math.PI/180),de===0?h.add(new On({style:Er(S,{text:Q,x:K,y:te,verticalAlign:G<-.8?"top":G>.8?"bottom":"middle",align:V<-.4?"left":V>.4?"right":"center"},{inheritColor:H}),silent:!0})):h.add(new On({style:Er(S,{text:Q,x:K,y:te,verticalAlign:"middle",align:"center"},{inheritColor:H}),silent:!0,originX:K,originY:te,rotation:de}))}if(b.get("show")&&F!==w){var X=b.get("distance");X=X?X+c:c;for(var ge=0;ge<=E;ge++){V=Math.cos(P),G=Math.sin(P);var se=new Xi({shape:{x1:V*(p-X)+d,y1:G*(p-X)+f,x2:V*(p-M-X)+d,y2:G*(p-M-X)+f},silent:!0,style:B});B.stroke==="auto"&&se.setStyle({stroke:a((F+ge/E)/w)}),h.add(se),P+=D}P-=D}else P+=I}},e.prototype._renderPointer=function(t,r,i,a,s,o,l,u,c){var h=this.group,d=this._data,f=this._progressEls,p=[],m=t.get(["pointer","show"]),g=t.getModel("progress"),v=g.get("show"),b=t.getData(),S=b.mapDimension("value"),w=+t.get("min"),E=+t.get("max"),T=[w,E],M=[o,l];function P(D,R){var B=b.getItemModel(D),k=B.getModel("pointer"),V=Xe(k.get("width"),s.r),G=Xe(k.get("length"),s.r),F=t.get(["pointer","icon"]),X=k.get("offsetCenter"),j=Xe(X[0],s.r),Q=Xe(X[1],s.r),H=k.get("keepAspect"),K;return F?K=Ki(F,j-V/2,Q-G,V,G,null,H):K=new F8e({shape:{angle:-Math.PI/2,width:V,r:G,x:j,y:Q}}),K.rotation=-(R+Math.PI/2),K.x=s.cx,K.y=s.cy,K}function I(D,R){var B=g.get("roundCap"),k=B?SN:zs,V=g.get("overlap"),G=V?g.get("width"):c/b.count(),F=V?s.r-G:s.r-(D+1)*G,X=V?s.r:s.r-D*G,j=new k({shape:{startAngle:o,endAngle:R,cx:s.cx,cy:s.cy,clockwise:u,r0:F,r:X}});return V&&(j.z2=Jn(b.get(S,D),[w,E],[100,0],!0)),j}(v||m)&&(b.diff(d).add(function(D){var R=b.get(S,D);if(m){var B=P(D,o);Vr(B,{rotation:-((isNaN(+R)?M[0]:Jn(R,T,M,!0))+Math.PI/2)},t),h.add(B),b.setItemGraphicEl(D,B)}if(v){var k=I(D,o),V=g.get("clip");Vr(k,{shape:{endAngle:Jn(R,T,M,V)}},t),h.add(k),bz(t.seriesIndex,b.dataType,D,k),p[D]=k}}).update(function(D,R){var B=b.get(S,D);if(m){var k=d.getItemGraphicEl(R),V=k?k.rotation:o,G=P(D,V);G.rotation=V,Vn(G,{rotation:-((isNaN(+B)?M[0]:Jn(B,T,M,!0))+Math.PI/2)},t),h.add(G),b.setItemGraphicEl(D,G)}if(v){var F=f[R],X=F?F.shape.endAngle:o,j=I(D,X),Q=g.get("clip");Vn(j,{shape:{endAngle:Jn(B,T,M,Q)}},t),h.add(j),bz(t.seriesIndex,b.dataType,D,j),p[D]=j}}).execute(),b.each(function(D){var R=b.getItemModel(D),B=R.getModel("emphasis"),k=B.get("focus"),V=B.get("blurScope"),G=B.get("disabled");if(m){var F=b.getItemGraphicEl(D),X=b.getItemVisual(D,"style"),j=X.fill;if(F instanceof Ka){var Q=F.style;F.useStyle(Pe({image:Q.image,x:Q.x,y:Q.y,width:Q.width,height:Q.height},X))}else F.useStyle(X),F.type!=="pointer"&&F.setColor(j);F.setStyle(R.getModel(["pointer","itemStyle"]).getItemStyle()),F.style.fill==="auto"&&F.setStyle("fill",a(Jn(b.get(S,D),T,[0,1],!0))),F.z2EmphasisLift=0,ua(F,R),Yr(F,k,V,G)}if(v){var H=p[D];H.useStyle(b.getItemVisual(D,"style")),H.setStyle(R.getModel(["progress","itemStyle"]).getItemStyle()),H.z2EmphasisLift=0,ua(H,R),Yr(H,k,V,G)}}),this._progressEls=p)},e.prototype._renderAnchor=function(t,r){var i=t.getModel("anchor"),a=i.get("show");if(a){var s=i.get("size"),o=i.get("icon"),l=i.get("offsetCenter"),u=i.get("keepAspect"),c=Ki(o,r.cx-s/2+Xe(l[0],r.r),r.cy-s/2+Xe(l[1],r.r),s,s,null,u);c.z2=i.get("showAbove")?1:0,c.setStyle(i.getModel("itemStyle").getItemStyle()),this.group.add(c)}},e.prototype._renderTitleAndDetail=function(t,r,i,a,s){var o=this,l=t.getData(),u=l.mapDimension("value"),c=+t.get("min"),h=+t.get("max"),d=new wt,f=[],p=[],m=t.isAnimationEnabled(),g=t.get(["pointer","showAbove"]);l.diff(this._data).add(function(v){f[v]=new On({silent:!0}),p[v]=new On({silent:!0})}).update(function(v,b){f[v]=o._titleEls[b],p[v]=o._detailEls[b]}).execute(),l.each(function(v){var b=l.getItemModel(v),S=l.get(u,v),w=new wt,E=a(Jn(S,[c,h],[0,1],!0)),T=b.getModel("title");if(T.get("show")){var M=T.get("offsetCenter"),P=s.cx+Xe(M[0],s.r),I=s.cy+Xe(M[1],s.r),D=f[v];D.attr({z2:g?0:2,style:Er(T,{x:P,y:I,text:l.getName(v),align:"center",verticalAlign:"middle"},{inheritColor:E})}),w.add(D)}var R=b.getModel("detail");if(R.get("show")){var B=R.get("offsetCenter"),k=s.cx+Xe(B[0],s.r),V=s.cy+Xe(B[1],s.r),G=Xe(R.get("width"),s.r),F=Xe(R.get("height"),s.r),X=t.get(["progress","show"])?l.getItemVisual(v,"style").fill:E,D=p[v],j=R.get("formatter");D.attr({z2:g?0:2,style:Er(R,{x:k,y:V,text:nP(S,j),width:isNaN(G)?null:G,height:isNaN(F)?null:F,align:"center",verticalAlign:"middle"},{inheritColor:X})}),Ahe(D,{normal:R},S,function(H){return nP(H,j)}),m&&Che(D,v,l,t,{getFormattedLabel:function(H,K,te,Y,de,ge){return nP(ge?ge.interpolatedValue:S,j)}}),w.add(D)}d.add(w)}),this.group.add(d),this._titleEls=f,this._detailEls=p},e.type="gauge",e})(mr),V8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="itemStyle",t}return e.prototype.getInitialData=function(t,r){return KS(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,ve.color.neutral10]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:ve.color.axisTick,width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:ve.color.axisTickMinor,width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:ve.color.axisLabel,fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:ve.color.neutral00,borderWidth:0,borderColor:ve.color.theme[0]}},title:{show:!0,offsetCenter:[0,"20%"],color:ve.color.secondary,fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:ve.color.transparent,borderWidth:0,borderColor:ve.color.neutral40,width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:ve.color.primary,fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e})(Cr);function H8e(n){n.registerChartView(z8e),n.registerSeriesModel(V8e)}var G8e=["itemStyle","opacity"],j8e=(function(n){be(e,n);function e(t,r){var i=n.call(this)||this,a=i,s=new gs,o=new On;return a.setTextContent(o),i.setTextGuideLine(s),i.updateData(t,r,!0),i}return e.prototype.updateData=function(t,r,i){var a=this,s=t.hostModel,o=t.getItemModel(r),l=t.getItemLayout(r),u=o.getModel("emphasis"),c=o.get(G8e);c=c??1,i||ku(a),a.useStyle(t.getItemVisual(r,"style")),a.style.lineJoin="round",i?(a.setShape({points:l.points}),a.style.opacity=0,Vr(a,{style:{opacity:c}},s,r)):Vn(a,{style:{opacity:c},shape:{points:l.points}},s,r),ua(a,o),this._updateLabel(t,r),Yr(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,r){var i=this,a=this.getTextGuideLine(),s=i.getTextContent(),o=t.hostModel,l=t.getItemModel(r),u=t.getItemLayout(r),c=u.label,h=t.getItemVisual(r,"style"),d=h.fill;Aa(s,ca(l),{labelFetcher:t.hostModel,labelDataIndex:r,defaultOpacity:h.opacity,defaultText:t.getName(r)},{normal:{align:c.textAlign,verticalAlign:c.verticalAlign}});var f=l.getModel("label"),p=f.get("color"),m=p==="inherit"?d:null;i.setTextConfig({local:!0,inside:!!c.inside,insideStroke:m,outsideFill:m});var g=c.linePoints;a.setShape({points:g}),i.textGuideLineConfig={anchor:g?new Ct(g[0][0],g[0][1]):null},Vn(s,{style:{x:c.x,y:c.y}},o,r),s.attr({rotation:c.rotation,originX:c.x,originY:c.y,z2:10}),Xj(i,$j(l),{stroke:d})},e})(Vs),W8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,r,i){var a=t.getData(),s=this._data,o=this.group;a.diff(s).add(function(l){var u=new j8e(a,l);a.setItemGraphicEl(l,u),o.add(u)}).update(function(l,u){var c=s.getItemGraphicEl(u);c.updateData(a,l),o.add(c),a.setItemGraphicEl(l,c)}).remove(function(l){var u=s.getItemGraphicEl(l);Nf(u,t,l)}).execute(),this._data=a},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e})(mr),X8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new ZS(Qe(this.getData,this),Qe(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.getInitialData=function(t,r){return KS(this,{coordDimensions:["value"],encodeDefaulter:Qt(Ej,this)})},e.prototype._defaultLabelLine=function(t){Uy(t,"labelLine",["show"]);var r=t.labelLine,i=t.emphasis.labelLine;r.show=r.show&&t.label.show,i.show=i.show&&t.emphasis.label.show},e.prototype.getDataParams=function(t){var r=this.getData(),i=n.prototype.getDataParams.call(this,t),a=r.mapDimension("value"),s=r.getSum(a);return i.percent=s?+(r.get(a,t)/s*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={coordinateSystemUsage:"box",z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:65,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:ve.color.neutral00,borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:ve.color.primary}}},e})(Cr);function $8e(n,e){for(var t=n.mapDimension("value"),r=n.mapArray(t,function(l){return l}),i=[],a=e==="ascending",s=0,o=n.count();s<o;s++)i[s]=s;return St(e)?i.sort(e):e!=="none"&&i.sort(function(l,u){return a?r[l]-r[u]:r[u]-r[l]}),i}function Y8e(n){var e=n.hostModel,t=e.get("orient");n.each(function(r){var i=n.getItemModel(r),a=i.getModel("label"),s=a.get("position"),o=i.getModel("labelLine"),l=n.getItemLayout(r),u=l.points,c=s==="inner"||s==="inside"||s==="center"||s==="insideLeft"||s==="insideRight",h,d,f,p;if(c)s==="insideLeft"?(d=(u[0][0]+u[3][0])/2+5,f=(u[0][1]+u[3][1])/2,h="left"):s==="insideRight"?(d=(u[1][0]+u[2][0])/2-5,f=(u[1][1]+u[2][1])/2,h="right"):(d=(u[0][0]+u[1][0]+u[2][0]+u[3][0])/4,f=(u[0][1]+u[1][1]+u[2][1]+u[3][1])/4,h="center"),p=[[d,f],[d,f]];else{var m=void 0,g=void 0,v=void 0,b=void 0,S=o.get("length");s==="left"?(m=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,v=m-S,d=v-5,h="right"):s==="right"?(m=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,v=m+S,d=v+5,h="left"):s==="top"?(m=(u[3][0]+u[0][0])/2,g=(u[3][1]+u[0][1])/2,b=g-S,f=b-5,h="center"):s==="bottom"?(m=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,b=g+S,f=b+5,h="center"):s==="rightTop"?(m=t==="horizontal"?u[3][0]:u[1][0],g=t==="horizontal"?u[3][1]:u[1][1],t==="horizontal"?(b=g-S,f=b-5,h="center"):(v=m+S,d=v+5,h="top")):s==="rightBottom"?(m=u[2][0],g=u[2][1],t==="horizontal"?(b=g+S,f=b+5,h="center"):(v=m+S,d=v+5,h="bottom")):s==="leftTop"?(m=u[0][0],g=t==="horizontal"?u[0][1]:u[1][1],t==="horizontal"?(b=g-S,f=b-5,h="center"):(v=m-S,d=v-5,h="right")):s==="leftBottom"?(m=t==="horizontal"?u[1][0]:u[3][0],g=t==="horizontal"?u[1][1]:u[2][1],t==="horizontal"?(b=g+S,f=b+5,h="center"):(v=m-S,d=v-5,h="right")):(m=(u[1][0]+u[2][0])/2,g=(u[1][1]+u[2][1])/2,t==="horizontal"?(b=g+S,f=b+5,h="center"):(v=m+S,d=v+5,h="left")),t==="horizontal"?(v=m,d=v):(b=g,f=b),p=[[m,g],[v,b]]}l.label={linePoints:p,x:d,y:f,verticalAlign:"middle",textAlign:h,inside:c}})}function q8e(n,e){n.eachSeriesByType("funnel",function(t){var r=t.getData(),i=r.mapDimension("value"),a=t.get("sort"),s=ha(t,e),o=qr(t.getBoxLayoutParams(),s.refContainer),l=t.get("orient"),u=o.width,c=o.height,h=$8e(r,a),d=o.x,f=o.y,p=l==="horizontal"?[Xe(t.get("minSize"),c),Xe(t.get("maxSize"),c)]:[Xe(t.get("minSize"),u),Xe(t.get("maxSize"),u)],m=r.getDataExtent(i),g=t.get("min"),v=t.get("max");g==null&&(g=Math.min(m[0],0)),v==null&&(v=m[1]);var b=t.get("funnelAlign"),S=t.get("gap"),w=l==="horizontal"?u:c,E=(w-S*(r.count()-1))/r.count(),T=function(G,F){if(l==="horizontal"){var X=r.get(i,G)||0,j=Jn(X,[g,v],p,!0),Q=void 0;switch(b){case"top":Q=f;break;case"center":Q=f+(c-j)/2;break;case"bottom":Q=f+(c-j);break}return[[F,Q],[F,Q+j]]}var H=r.get(i,G)||0,K=Jn(H,[g,v],p,!0),te;switch(b){case"left":te=d;break;case"center":te=d+(u-K)/2;break;case"right":te=d+u-K;break}return[[te,F],[te+K,F]]};a==="ascending"&&(E=-E,S=-S,l==="horizontal"?d+=u:f+=c,h=h.reverse());for(var M=0;M<h.length;M++){var P=h[M],I=h[M+1],D=r.getItemModel(P);if(l==="horizontal"){var R=D.get(["itemStyle","width"]);R==null?R=E:(R=Xe(R,u),a==="ascending"&&(R=-R));var B=T(P,d),k=T(I,d+R);d+=R+S,r.setItemLayout(P,{points:B.concat(k.slice().reverse())})}else{var V=D.get(["itemStyle","height"]);V==null?V=E:(V=Xe(V,c),a==="ascending"&&(V=-V));var B=T(P,f),k=T(I,f+V);f+=V+S,r.setItemLayout(P,{points:B.concat(k.slice().reverse())})}}Y8e(r)})}function K8e(n){n.registerChartView(W8e),n.registerSeriesModel(X8e),n.registerLayout(q8e),n.registerProcessor(qS("funnel"))}var Z8e=.3,Q8e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._dataGroup=new wt,t._initialized=!1,t}return e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var s=this._dataGroup,o=t.getData(),l=this._data,u=t.coordinateSystem,c=u.dimensions,h=pte(t);o.diff(l).add(d).update(f).remove(p).execute();function d(g){var v=fte(o,s,g,c,u);p5(v,o,g,h)}function f(g,v){var b=l.getItemGraphicEl(v),S=wme(o,g,c,u);o.setItemGraphicEl(g,b),Vn(b,{shape:{points:S}},t,g),ku(b),p5(b,o,g,h)}function p(g){var v=l.getItemGraphicEl(g);s.remove(v)}if(!this._initialized){this._initialized=!0;var m=J8e(u,t,function(){setTimeout(function(){s.removeClipPath()})});s.setClipPath(m)}this._data=o},e.prototype.incrementalPrepareRender=function(t,r,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,r,i){for(var a=r.getData(),s=r.coordinateSystem,o=s.dimensions,l=pte(r),u=this._progressiveEls=[],c=t.start;c<t.end;c++){var h=fte(a,this._dataGroup,c,o,s);h.incremental=!0,p5(h,a,c,l),u.push(h)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e})(mr);function J8e(n,e,t){var r=n.model,i=n.getRect(),a=new fn({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),s=r.get("layout")==="horizontal"?"width":"height";return a.setShape(s,0),Vr(a,{shape:{width:i.width,height:i.height}},e,t),a}function wme(n,e,t,r){for(var i=[],a=0;a<t.length;a++){var s=t[a],o=n.get(n.mapDimension(s),e);eVe(o,r.getAxis(s).type)||i.push(r.dataToPoint(o,s))}return i}function fte(n,e,t,r,i){var a=wme(n,t,r,i),s=new gs({shape:{points:a},z2:10});return e.add(s),n.setItemGraphicEl(t,s),s}function pte(n){var e=n.get("smooth",!0);return e===!0&&(e=Z8e),e=$f(e),Bs(e)&&(e=0),{smooth:e}}function p5(n,e,t,r){n.useStyle(e.getItemVisual(t,"style")),n.style.fill=null,n.setShape("smooth",r.smooth);var i=e.getItemModel(t),a=i.getModel("emphasis");ua(n,i,"lineStyle"),Yr(n,a.get("focus"),a.get("blurScope"),a.get("disabled"))}function eVe(n,e){return e==="category"?n==null:n==null||isNaN(n)}var tVe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.getInitialData=function(t,r){return lp(null,this,{useEncodeDefaulter:Qe(nVe,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var r=this.coordinateSystem,i=this.getData(),a=[];return r.eachActiveState(i,function(s,o){t===s&&a.push(i.getRawIndex(o))}),a},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e})(Cr);function nVe(n){var e=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(e){var t={};return W(e.dimensions,function(r){var i=rVe(r);t[r]=i}),t}}function rVe(n){return+n.replace("dim","")}var iVe=["lineStyle","opacity"],aVe={seriesType:"parallel",reset:function(n,e){var t=n.coordinateSystem,r={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(i,a){t.eachActiveState(a,function(s,o){var l=r[s];if(s==="normal"&&a.hasItemOption){var u=a.getItemModel(o).get(iVe,!0);u!=null&&(l=u)}var c=a.ensureUniqueItemVisual(o,"style");c.opacity=l},i.start,i.end)}}}};function sVe(n){oVe(n),lVe(n)}function oVe(n){if(!n.parallel){var e=!1;W(n.series,function(t){t&&t.type==="parallel"&&(e=!0)}),e&&(n.parallel=[{}])}}function lVe(n){var e=br(n.parallelAxis);W(e,function(t){if(Lt(t)){var r=t.parallelIndex||0,i=br(n.parallel)[r];i&&i.parallelAxisDefault&&en(t,i.parallelAxisDefault,!1)}})}var uVe=5,cVe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this._model=t,this._api=i,this._handlers||(this._handlers={},W(hVe,function(a,s){i.getZr().on(s,this._handlers[s]=Qe(a,this))},this)),XS(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,r){TA(this,"_throttledDispatchExpand"),W(this._handlers,function(i,a){r.getZr().off(a,i)}),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Pe({type:"parallelAxisExpand"},t))},e.type="parallel",e})(Gr),hVe={mousedown:function(n){m5(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var e=this._mouseDownPoint;if(m5(this,"click")&&e){var t=[n.offsetX,n.offsetY],r=Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2);if(r>uVe)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);i.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!(this._mouseDownPoint||!m5(this,"mousemove"))){var e=this._model,t=e.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),r=t.behavior;r==="jump"&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand(r==="none"?null:{axisExpandWindow:t.axisExpandWindow,animation:r==="jump"?null:{duration:0}})}}};function m5(n,e){var t=n._model;return t.get("axisExpandable")&&t.get("axisExpandTriggerOn")===e}var dVe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var r=this.option;t&&en(r,t,!0),this._initDimensions()},e.prototype.contains=function(t,r){var i=t.get("parallelIndex");return i!=null&&r.getComponent("parallel",i)===this},e.prototype.setAxisExpand=function(t){W(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){t.hasOwnProperty(r)&&(this.option[r]=t[r])},this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],r=this.parallelAxisIndex=[],i=er(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(a){return(a.get("parallelIndex")||0)===this.componentIndex},this);W(i,function(a){t.push("dim"+a.get("dim")),r.push(a.componentIndex)})},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e})(_n),fVe=(function(n){be(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.type=a||"value",o.axisIndex=s,o}return e.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},e})(Oc);function Tg(n,e,t,r,i,a){n=n||0;var s=t[1]-t[0];if(i!=null&&(i=l_(i,[0,s])),a!=null&&(a=Math.max(a,i??0)),r==="all"){var o=Math.abs(e[1]-e[0]);o=l_(o,[0,s]),i=a=l_(o,[i,a]),r=0}e[0]=l_(e[0],t),e[1]=l_(e[1],t);var l=g5(e,r);e[r]+=n;var u=i||0,c=t.slice();l.sign<0?c[0]+=u:c[1]-=u,e[r]=l_(e[r],c);var h;return h=g5(e,r),i!=null&&(h.sign!==l.sign||h.span<i)&&(e[1-r]=e[r]+l.sign*i),h=g5(e,r),a!=null&&h.span>a&&(e[1-r]=e[r]+h.sign*a),e}function g5(n,e){var t=n[e]-n[1-e];return{span:Math.abs(t),sign:t>0?-1:t<0?1:e?-1:1}}function l_(n,e){return Math.min(e[1]!=null?e[1]:1/0,Math.max(e[0]!=null?e[0]:-1/0,n))}var v5=W,Tme=Math.min,Eme=Math.max,mte=Math.floor,pVe=Math.ceil,gte=Wi,mVe=Math.PI,gVe=(function(){function n(e,t,r){this.type="parallel",this._axesMap=ct(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=e.dimensions,a=e.parallelAxisIndex;v5(i,function(s,o){var l=a[o],u=t.getComponent("parallelAxis",l),c=this._axesMap.set(s,new fVe(s,S3(u),[0,0],u.get("type"),l)),h=c.type==="category";c.onBand=h&&u.get("boundaryGap"),c.inverse=u.get("inverse"),u.axis=c,c.model=u,c.coordinateSystem=u.coordinateSystem=this},this)},n.prototype.update=function(e,t){this._updateAxesFromSeries(this._model,e)},n.prototype.containPoint=function(e){var t=this._makeLayoutInfo(),r=t.axisBase,i=t.layoutBase,a=t.pixelDimIndex,s=e[1-a],o=e[a];return s>=r&&s<=r+t.axisLength&&o>=i&&o<=i+t.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(e,t){t.eachSeries(function(r){if(e.contains(r,t)){var i=r.getData();v5(this.dimensions,function(a){var s=this._axesMap.get(a);s.scale.unionExtentFromData(i,i.mapDimension(a)),oS(s.scale,s.model)},this)}},this)},n.prototype.resize=function(e,t){var r=ha(e,t).refContainer;this._rect=qr(e.getBoxLayoutParams(),r),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var e=this._model,t=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),s=a==="horizontal"?0:1,o=t[i[s]],l=[0,o],u=this.dimensions.length,c=rP(e.get("axisExpandWidth"),l),h=rP(e.get("axisExpandCount")||0,[0,u]),d=e.get("axisExpandable")&&u>3&&u>h&&h>1&&c>0&&o>0,f=e.get("axisExpandWindow"),p;if(f)p=rP(f[1]-f[0],l),f[1]=f[0]+p;else{p=rP(c*(h-1),l);var m=e.get("axisExpandCenter")||mte(u/2);f=[c*m-p/2],f[1]=f[0]+p}var g=(o-p)/(u-h);g<3&&(g=0);var v=[mte(gte(f[0]/c,1))+1,pVe(gte(f[1]/c,1))-1],b=g/c*f[0];return{layout:a,pixelDimIndex:s,layoutBase:t[r[s]],layoutLength:o,axisBase:t[r[1-s]],axisLength:t[i[1-s]],axisExpandable:d,axisExpandWidth:c,axisCollapseWidth:g,axisExpandWindow:f,axisCount:u,winInnerIndices:v,axisExpandWindow0Pos:b}},n.prototype._layoutAxes=function(){var e=this._rect,t=this._axesMap,r=this.dimensions,i=this._makeLayoutInfo(),a=i.layout;t.each(function(s){var o=[0,i.axisLength],l=s.inverse?1:0;s.setExtent(o[l],o[1-l])}),v5(r,function(s,o){var l=(i.axisExpandable?yVe:vVe)(o,i),u={horizontal:{x:l.position,y:i.axisLength},vertical:{x:0,y:l.position}},c={horizontal:mVe/2,vertical:0},h=[u[a].x+e.x,u[a].y+e.y],d=c[a],f=Ya();Rg(f,f,d),td(f,f,h),this._axesLayout[s]={position:h,rotation:d,transform:f,axisNameAvailableWidth:l.axisNameAvailableWidth,axisLabelShow:l.axisLabelShow,nameTruncateMaxWidth:l.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(e){return this._axesMap.get(e)},n.prototype.dataToPoint=function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},n.prototype.eachActiveState=function(e,t,r,i){r==null&&(r=0),i==null&&(i=e.count());var a=this._axesMap,s=this.dimensions,o=[],l=[];W(s,function(g){o.push(e.mapDimension(g)),l.push(a.get(g).model)});for(var u=this.hasAxisBrushed(),c=r;c<i;c++){var h=void 0;if(!u)h="normal";else{h="active";for(var d=e.getValues(o,c),f=0,p=s.length;f<p;f++){var m=l[f].getActiveState(d[f]);if(m==="inactive"){h="inactive";break}}}t(h,c)}},n.prototype.hasAxisBrushed=function(){for(var e=this.dimensions,t=this._axesMap,r=!1,i=0,a=e.length;i<a;i++)t.get(e[i]).model.getActiveState()!=="normal"&&(r=!0);return r},n.prototype.axisCoordToPoint=function(e,t){var r=this._axesLayout[t];return Ac([e,0],r.transform)},n.prototype.getAxisLayout=function(e){return Tt(this._axesLayout[e])},n.prototype.getSlidedAxisExpandWindow=function(e){var t=this._makeLayoutInfo(),r=t.pixelDimIndex,i=t.axisExpandWindow.slice(),a=i[1]-i[0],s=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:i};var o=e[r]-t.layoutBase-t.axisExpandWindow0Pos,l,u="slide",c=t.axisCollapseWidth,h=this._model.get("axisExpandSlideTriggerArea"),d=h[0]!=null;if(c)d&&c&&o<a*h[0]?(u="jump",l=o-a*h[2]):d&&c&&o>a*(1-h[0])?(u="jump",l=o-a*(1-h[2])):(l=o-a*h[1])>=0&&(l=o-a*(1-h[1]))<=0&&(l=0),l*=t.axisExpandWidth/c,l?Tg(l,i,s,"all"):u="none";else{var f=i[1]-i[0],p=s[1]*o/f;i=[Eme(0,p-f/2)],i[1]=Tme(s[1],i[0]+f),i[0]=i[1]-f}return{axisExpandWindow:i,behavior:u}},n})();function rP(n,e){return Tme(Eme(n,e[0]),e[1])}function vVe(n,e){var t=e.layoutLength/(e.axisCount-1);return{position:t*n,axisNameAvailableWidth:t,axisLabelShow:!0}}function yVe(n,e){var t=e.layoutLength,r=e.axisExpandWidth,i=e.axisCount,a=e.axisCollapseWidth,s=e.winInnerIndices,o,l=a,u=!1,c;return n<s[0]?(o=n*a,c=a):n<=s[1]?(o=e.axisExpandWindow0Pos+n*r-e.axisExpandWindow[0],l=r,u=!0):(o=t-(i-1-n)*a,c=a),{position:o,axisNameAvailableWidth:l,axisLabelShow:u,nameTruncateMaxWidth:c}}function xVe(n,e){var t=[];return n.eachComponent("parallel",function(r,i){var a=new gVe(r,n,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="parallel"){var i=r.getReferringComponents("parallel",fi).models[0];r.coordinateSystem=i.coordinateSystem}}),t}var _Ve={create:xVe},A8=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.activeIntervals=[],t}return e.prototype.getAreaSelectStyle=function(){return Vy([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var r=this.activeIntervals=Tt(t);if(r)for(var i=r.length-1;i>=0;i--)Du(r[i])},e.prototype.getActiveState=function(t){var r=this.activeIntervals;if(!r.length)return"normal";if(t==null||isNaN(+t))return"inactive";if(r.length===1){var i=r[0];if(i[0]<=t&&t<=i[1])return"active"}else for(var a=0,s=r.length;a<s;a++)if(r[a][0]<=t&&t<=r[a][1])return"active";return"inactive"},e})(_n);Zi(A8,w2);var Xy=!0,FA=Math.min,dS=Math.max,bVe=Math.pow,SVe=1e4,wVe=6,TVe=6,vte="globalPan",EVe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},AVe={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},yte={brushStyle:{lineWidth:2,stroke:ve.color.backgroundTint,fill:ve.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},CVe=0,_7=(function(n){be(e,n);function e(t){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=t,r.group=new wt,r._uid="brushController_"+CVe++,W(NVe,function(i,a){this._handlers[a]=Qe(i,this)},r),r}return e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var r=this._zr;this._enableGlobalPan||cUe(r,vte,this._uid),W(this._handlers,function(i,a){r.on(a,i)}),this._brushType=t.brushType,this._brushOption=en(Tt(yte),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;hUe(t,vte,this._uid),W(this._handlers,function(r,i){t.off(i,r)}),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var r=this._panels={};W(t,function(i){r[i.panelId]=Tt(i)})}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=r.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=Ue(t,function(d){return en(Tt(yte),d,!0)});var r="\0-brush-index-",i=this._covers,a=this._covers=[],s=this,o=this._creatingCover;return new Kf(i,t,u,l).add(c).update(c).remove(h).execute(),this;function l(d,f){return(d.id!=null?d.id:r+f)+"-"+d.brushType}function u(d,f){return l(d.__brushOption,f)}function c(d,f){var p=t[d];if(f!=null&&i[f]===o)a[d]=i[f];else{var m=a[d]=f!=null?(i[f].__brushOption=p,i[f]):Cme(s,Ame(s,p));b7(s,m)}}function h(d){i[d]!==o&&s.group.remove(i[d])}},e.prototype.unmount=function(){return this.enableBrush(!1),C8(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e})(Uu);function Ame(n,e){var t=P3[e.brushType].createCover(n,e);return t.__brushOption=e,Dme(t,e),n.group.add(t),t}function Cme(n,e){var t=S7(e);return t.endCreating&&(t.endCreating(n,e),Dme(e,e.__brushOption)),e}function Mme(n,e){var t=e.__brushOption;S7(e).updateCoverShape(n,e,t.range,t)}function Dme(n,e){var t=e.z;t==null&&(t=SVe),n.traverse(function(r){r.z=t,r.z2=t})}function b7(n,e){S7(e).updateCommon(n,e),Mme(n,e)}function S7(n){return P3[n.__brushOption.brushType]}function w7(n,e,t){var r=n._panels;if(!r)return Xy;var i,a=n._transform;return W(r,function(s){s.isTargetByCursor(e,t,a)&&(i=s)}),i}function Ime(n,e){var t=n._panels;if(!t)return Xy;var r=e.__brushOption.panelId;return r!=null?t[r]:Xy}function C8(n){var e=n._covers,t=e.length;return W(e,function(r){n.group.remove(r)},n),e.length=0,!!t}function $y(n,e){var t=Ue(n._covers,function(r){var i=r.__brushOption,a=Tt(i.range);return{brushType:i.brushType,panelId:i.panelId,range:a}});n.trigger("brush",{areas:t,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function MVe(n){var e=n._track;if(!e.length)return!1;var t=e[e.length-1],r=e[0],i=t[0]-r[0],a=t[1]-r[1],s=bVe(i*i+a*a,.5);return s>wVe}function Pme(n){var e=n.length-1;return e<0&&(e=0),[n[0],n[e]]}function Lme(n,e,t,r){var i=new wt;return i.add(new fn({name:"main",style:T7(t),silent:!0,draggable:!0,cursor:"move",drift:Qt(xte,n,e,i,["n","s","w","e"]),ondragend:Qt($y,e,{isEnd:!0})})),W(r,function(a){i.add(new fn({name:a.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Qt(xte,n,e,i,a),ondragend:Qt($y,e,{isEnd:!0})}))}),i}function Rme(n,e,t,r){var i=r.brushStyle.lineWidth||0,a=dS(i,TVe),s=t[0][0],o=t[1][0],l=s-i/2,u=o-i/2,c=t[0][1],h=t[1][1],d=c-a+i/2,f=h-a+i/2,p=c-s,m=h-o,g=p+i,v=m+i;Md(n,e,"main",s,o,p,m),r.transformable&&(Md(n,e,"w",l,u,a,v),Md(n,e,"e",d,u,a,v),Md(n,e,"n",l,u,g,a),Md(n,e,"s",l,f,g,a),Md(n,e,"nw",l,u,a,a),Md(n,e,"ne",d,u,a,a),Md(n,e,"sw",l,f,a,a),Md(n,e,"se",d,f,a,a))}function M8(n,e){var t=e.__brushOption,r=t.transformable,i=e.childAt(0);i.useStyle(T7(t)),i.attr({silent:!r,cursor:r?"move":"default"}),W([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(a){var s=e.childOfName(a.join("")),o=a.length===1?D8(n,a[0]):IVe(n,a);s&&s.attr({silent:!r,invisible:!r,cursor:r?AVe[o]+"-resize":null})})}function Md(n,e,t,r,i,a,s){var o=e.childOfName(t);o&&o.setShape(LVe(E7(n,e,[[r,i],[r+a,i+s]])))}function T7(n){return Pt({strokeNoScale:!0},n.brushStyle)}function Nme(n,e,t,r){var i=[FA(n,t),FA(e,r)],a=[dS(n,t),dS(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function DVe(n){return Ry(n.group)}function D8(n,e){var t={w:"left",e:"right",n:"top",s:"bottom"},r={left:"w",right:"e",top:"n",bottom:"s"},i=f3(t[e],DVe(n));return r[i]}function IVe(n,e){var t=[D8(n,e[0]),D8(n,e[1])];return(t[0]==="e"||t[0]==="w")&&t.reverse(),t.join("")}function xte(n,e,t,r,i,a){var s=t.__brushOption,o=n.toRectRange(s.range),l=kme(e,i,a);W(r,function(u){var c=EVe[u];o[c[0]][c[1]]+=l[c[0]]}),s.range=n.fromRectRange(Nme(o[0][0],o[1][0],o[0][1],o[1][1])),b7(e,t),$y(e,{isEnd:!1})}function PVe(n,e,t,r){var i=e.__brushOption.range,a=kme(n,t,r);W(i,function(s){s[0]+=a[0],s[1]+=a[1]}),b7(n,e),$y(n,{isEnd:!1})}function kme(n,e,t){var r=n.group,i=r.transformCoordToLocal(e,t),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function E7(n,e,t){var r=Ime(n,e);return r&&r!==Xy?r.clipPath(t,n._transform):Tt(t)}function LVe(n){var e=FA(n[0][0],n[1][0]),t=FA(n[0][1],n[1][1]),r=dS(n[0][0],n[1][0]),i=dS(n[0][1],n[1][1]);return{x:e,y:t,width:r-e,height:i-t}}function RVe(n,e,t){if(!(!n._brushType||kVe(n,e.offsetX,e.offsetY))){var r=n._zr,i=n._covers,a=w7(n,e,t);if(!n._dragging)for(var s=0;s<i.length;s++){var o=i[s].__brushOption;if(a&&(a===Xy||o.panelId===a.panelId)&&P3[o.brushType].contain(i[s],t[0],t[1]))return}a&&r.setCursorStyle("crosshair")}}function I8(n){var e=n.event;e.preventDefault&&e.preventDefault()}function P8(n,e,t){return n.childOfName("main").contain(e,t)}function Ome(n,e,t,r){var i=n._creatingCover,a=n._creatingPanel,s=n._brushOption,o;if(n._track.push(t.slice()),MVe(n)||i){if(a&&!i){s.brushMode==="single"&&C8(n);var l=Tt(s);l.brushType=_te(l.brushType,a),l.panelId=a===Xy?null:a.panelId,i=n._creatingCover=Ame(n,l),n._covers.push(i)}if(i){var u=P3[_te(n._brushType,a)],c=i.__brushOption;c.range=u.getCreatingRange(E7(n,i,n._track)),r&&(Cme(n,i),u.updateCommon(n,i)),Mme(n,i),o={isEnd:r}}}else r&&s.brushMode==="single"&&s.removeOnClick&&w7(n,e,t)&&C8(n)&&(o={isEnd:r,removeOnClick:!0});return o}function _te(n,e){return n==="auto"?e.defaultBrushType:n}var NVe={mousedown:function(n){if(this._dragging)bte(this,n);else if(!n.target||!n.target.draggable){I8(n);var e=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null;var t=this._creatingPanel=w7(this,n,e);t&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(n){var e=n.offsetX,t=n.offsetY,r=this.group.transformCoordToLocal(e,t);if(RVe(this,n,r),this._dragging){I8(n);var i=Ome(this,n,r,!1);i&&$y(this,i)}},mouseup:function(n){bte(this,n)}};function bte(n,e){if(n._dragging){I8(e);var t=e.offsetX,r=e.offsetY,i=n.group.transformCoordToLocal(t,r),a=Ome(n,e,i,!0);n._dragging=!1,n._track=[],n._creatingCover=null,a&&$y(n,a)}}function kVe(n,e,t){var r=n._zr;return e<0||e>r.getWidth()||t<0||t>r.getHeight()}var P3={lineX:Ste(0),lineY:Ste(1),rect:{createCover:function(n,e){function t(r){return r}return Lme({toRectRange:t,fromRectRange:t},n,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var e=Pme(n);return Nme(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(n,e,t,r){Rme(n,e,t,r)},updateCommon:M8,contain:P8},polygon:{createCover:function(n,e){var t=new wt;return t.add(new gs({name:"main",style:T7(e),silent:!0})),t},getCreatingRange:function(n){return n},endCreating:function(n,e){e.remove(e.childAt(0)),e.add(new Vs({name:"main",draggable:!0,drift:Qt(PVe,n,e),ondragend:Qt($y,n,{isEnd:!0})}))},updateCoverShape:function(n,e,t,r){e.childAt(0).setShape({points:E7(n,e,t)})},updateCommon:M8,contain:P8}};function Ste(n){return{createCover:function(e,t){return Lme({toRectRange:function(r){var i=[r,[0,100]];return n&&i.reverse(),i},fromRectRange:function(r){return r[n]}},e,t,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(e){var t=Pme(e),r=FA(t[0][n],t[1][n]),i=dS(t[0][n],t[1][n]);return[r,i]},updateCoverShape:function(e,t,r,i){var a,s=Ime(e,t);if(s!==Xy&&s.getLinearBrushOtherExtent)a=s.getLinearBrushOtherExtent(n);else{var o=e._zr;a=[0,[o.getWidth(),o.getHeight()][1-n]]}var l=[r,a];n&&l.reverse(),Rme(e,t,l,i)},updateCommon:M8,contain:P8}}function Bme(n){return n=A7(n),function(e){return bhe(e,n)}}function Fme(n,e){return n=A7(n),function(t){var r=e??t,i=r?n.width:n.height,a=r?n.x:n.y;return[a,a+(i||0)]}}function Ume(n,e,t){var r=A7(n);return function(i,a){return r.contain(a[0],a[1])&&!jpe(i,e,t)}}function A7(n){return Rt.create(n)}var OVe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){n.prototype.init.apply(this,arguments),(this._brushController=new _7(r.getZr())).on("brush",Qe(this._onBrush,this))},e.prototype.render=function(t,r,i,a){if(!BVe(t,r,a)){this.axisModel=t,this.api=i,this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new wt,this.group.add(this._axisGroup),!!t.get("show")){var o=UVe(t,r),l=o.coordinateSystem,u=t.getAreaSelectStyle(),c=u.width,h=t.axis.dim,d=l.getAxisLayout(h),f=Pe({strokeContainThreshold:c},d),p=new go(t,i,f);p.build(),this._axisGroup.add(p.group),this._refreshBrushController(f,u,t,o,c,i),g2(s,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,r,i,a,s,o){var l=i.axis.getExtent(),u=l[1]-l[0],c=Math.min(30,Math.abs(u)*.1),h=Rt.create({x:l[0],y:-s/2,width:u,height:s});h.x-=c,h.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:Bme(h),isTargetByCursor:Ume(h,o,a),getLinearBrushOtherExtent:Fme(h,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers(FVe(i))},e.prototype._onBrush=function(t){var r=t.areas,i=this.axisModel,a=i.axis,s=Ue(r,function(o){return[a.coordToData(o.range[0],!0),a.coordToData(o.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:s})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e})(Gr);function BVe(n,e,t){return t&&t.type==="axisAreaSelect"&&e.findComponents({mainType:"parallelAxis",query:t})[0]===n}function FVe(n){var e=n.axis;return Ue(n.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}function UVe(n,e){return e.getComponent("parallel",n.get("parallelIndex"))}var zVe={type:"axisAreaSelect",event:"axisAreaSelected"};function VVe(n){n.registerAction(zVe,function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(r){r.axis.model.setActiveIntervals(e.intervals)})}),n.registerAction("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(r){r.setAxisExpand(e)})})}var HVe={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function zme(n){n.registerComponentView(cVe),n.registerComponentModel(dVe),n.registerCoordinateSystem("parallel",_Ve),n.registerPreprocessor(sVe),n.registerComponentModel(A8),n.registerComponentView(OVe),cS(n,"parallel",A8,HVe),VVe(n)}function GVe(n){sn(zme),n.registerChartView(Q8e),n.registerSeriesModel(tVe),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,aVe)}var jVe=(function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return n})(),WVe=(function(n){be(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new jVe},e.prototype.buildPath=function(t,r){var i=r.extent;t.moveTo(r.x1,r.y1),t.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),r.orient==="vertical"?(t.lineTo(r.x2+i,r.y2),t.bezierCurveTo(r.cpx2+i,r.cpy2,r.cpx1+i,r.cpy1,r.x1+i,r.y1)):(t.lineTo(r.x2,r.y2+i),t.bezierCurveTo(r.cpx2,r.cpy2+i,r.cpx1,r.cpy1+i,r.x1,r.y1+i)),t.closePath()},e.prototype.highlight=function(){Yf(this)},e.prototype.downplay=function(){qf(this)},e})(vn),XVe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._mainGroup=new wt,t._focusAdjacencyDisabled=!1,t}return e.prototype.init=function(t,r){this._controller=new hx(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,r,i){var a=this,s=t.getGraph(),o=this._mainGroup,l=t.layoutInfo,u=l.width,c=l.height,h=t.getData(),d=t.getData("edge"),f=t.get("orient");this._model=t,o.removeAll(),o.x=l.x,o.y=l.y,this._updateViewCoordSys(t,i),Wpe(t,i,o,this._controller,this._controllerHost,null),s.eachEdge(function(p){var m=new WVe,g=Ft(m);g.dataIndex=p.dataIndex,g.seriesIndex=t.seriesIndex,g.dataType="edge";var v=p.getModel(),b=v.getModel("lineStyle"),S=b.get("curveness"),w=p.node1.getLayout(),E=p.node1.getModel(),T=E.get("localX"),M=E.get("localY"),P=p.node2.getLayout(),I=p.node2.getModel(),D=I.get("localX"),R=I.get("localY"),B=p.getLayout(),k,V,G,F,X,j,Q,H;m.shape.extent=Math.max(1,B.dy),m.shape.orient=f,f==="vertical"?(k=(T!=null?T*u:w.x)+B.sy,V=(M!=null?M*c:w.y)+w.dy,G=(D!=null?D*u:P.x)+B.ty,F=R!=null?R*c:P.y,X=k,j=V*(1-S)+F*S,Q=G,H=V*S+F*(1-S)):(k=(T!=null?T*u:w.x)+w.dx,V=(M!=null?M*c:w.y)+B.sy,G=D!=null?D*u:P.x,F=(R!=null?R*c:P.y)+B.ty,X=k*(1-S)+G*S,j=V,Q=k*S+G*(1-S),H=F),m.setShape({x1:k,y1:V,x2:G,y2:F,cpx1:X,cpy1:j,cpx2:Q,cpy2:H}),m.useStyle(b.getItemStyle()),wte(m.style,f,p);var K=""+v.get("value"),te=ca(v,"edgeLabel");Aa(m,te,{labelFetcher:{getFormattedLabel:function(ge,se,he,fe,Ee,Ce){return t.getFormattedLabel(ge,se,"edge",fe,Ll(Ee,te.normal&&te.normal.get("formatter"),K),Ce)}},labelDataIndex:p.dataIndex,defaultText:K}),m.setTextConfig({position:"inside"});var Y=v.getModel("emphasis");ua(m,v,"lineStyle",function(ge){var se=ge.getItemStyle();return wte(se,f,p),se}),o.add(m),d.setItemGraphicEl(p.dataIndex,m);var de=Y.get("focus");Yr(m,de==="adjacency"?p.getAdjacentDataIndices():de==="trajectory"?p.getTrajectoryDataIndices():de,Y.get("blurScope"),Y.get("disabled"))}),s.eachNode(function(p){var m=p.getLayout(),g=p.getModel(),v=g.get("localX"),b=g.get("localY"),S=g.getModel("emphasis"),w=g.get(["itemStyle","borderRadius"])||0,E=new fn({shape:{x:v!=null?v*u:m.x,y:b!=null?b*c:m.y,width:m.dx,height:m.dy,r:w},style:g.getModel("itemStyle").getItemStyle(),z2:10});Aa(E,ca(g),{labelFetcher:{getFormattedLabel:function(M,P){return t.getFormattedLabel(M,P,"node")}},labelDataIndex:p.dataIndex,defaultText:p.id}),E.disableLabelAnimation=!0,E.setStyle("fill",p.getVisual("color")),E.setStyle("decal",p.getVisual("style").decal),ua(E,g),o.add(E),h.setItemGraphicEl(p.dataIndex,E),Ft(E).dataType="node";var T=S.get("focus");Yr(E,T==="adjacency"?p.getAdjacentDataIndices():T==="trajectory"?p.getTrajectoryDataIndices():T,S.get("blurScope"),S.get("disabled"))}),h.eachItemGraphicEl(function(p,m){var g=h.getItemModel(m);g.get("draggable")&&(p.drift=function(v,b){a._focusAdjacencyDisabled=!0,this.shape.x+=v,this.shape.y+=b,this.dirty(),i.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:h.getRawIndex(m),localX:this.shape.x/u,localY:this.shape.y/c})},p.ondragend=function(){a._focusAdjacencyDisabled=!1},p.draggable=!0,p.cursor="move")}),!this._data&&t.isAnimationEnabled()&&o.setClipPath($Ve(o.getBoundingRect(),t,function(){o.removeClipPath()})),this._data=t.getData()},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._updateViewCoordSys=function(t,r){var i=t.layoutInfo,a=i.width,s=i.height,o=t.coordinateSystem=new dx(null,{api:r,ecModel:t.ecModel});o.zoomLimit=t.get("scaleLimit"),o.setBoundingRect(0,0,a,s),o.setCenter(t.get("center")),o.setZoom(t.get("zoom")),this._controllerHost.target.attr({x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY})},e.type="sankey",e})(mr);function wte(n,e,t){switch(n.fill){case"source":n.fill=t.node1.getVisual("color"),n.decal=t.node1.getVisual("style").decal;break;case"target":n.fill=t.node2.getVisual("color"),n.decal=t.node2.getVisual("style").decal;break;case"gradient":var r=t.node1.getVisual("color"),i=t.node2.getVisual("color");Ke(r)&&Ke(i)&&(n.fill=new VS(0,0,+(e==="horizontal"),+(e==="vertical"),[{color:r,offset:0},{color:i,offset:1}]))}}function $Ve(n,e,t){var r=new fn({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Vr(r,{shape:{width:n.width+20}},e,t),r}var YVe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){var i=t.edges||t.links||[],a=t.data||t.nodes||[],s=t.levels||[];this.levelModels=[];for(var o=this.levelModels,l=0;l<s.length;l++)s[l].depth!=null&&s[l].depth>=0&&(o[s[l].depth]=new Sn(s[l],this,r));var u=x7(a,i,this,!0,c);return u.data;function c(h,d){h.wrapMethod("getItemModel",function(f,p){var m=f.parentModel,g=m.getData().getItemLayout(p);if(g){var v=g.depth,b=m.levelModels[v];b&&(f.parentModel=b)}return f}),d.wrapMethod("getItemModel",function(f,p){var m=f.parentModel,g=m.getGraph().getEdgeByIndex(p),v=g.node1.getLayout();if(v){var b=v.depth,S=m.levelModels[b];S&&(f.parentModel=S)}return f})}},e.prototype.setNodePosition=function(t,r){var i=this.option.data||this.option.nodes,a=i[t];a.localX=r[0],a.localY=r[1]},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,r,i){function a(f){return isNaN(f)||f==null}if(i==="edge"){var s=this.getDataParams(t,i),o=s.data,l=s.value,u=o.source+" -- "+o.target;return qi("nameValue",{name:u,value:l,noValue:a(l)})}else{var c=this.getGraph().getNodeByIndex(t),h=c.getLayout().value,d=this.getDataParams(t,i).data.name;return qi("nameValue",{name:d!=null?d+"":null,value:h,noValue:a(h)})}},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(t,r){var i=n.prototype.getDataParams.call(this,t,r);if(i.value==null&&r==="node"){var a=this.getGraph().getNodeByIndex(t),s=a.getLayout().value;i.value=s}return i},e.type="series.sankey",e.layoutMode="box",e.defaultOption={z:2,coordinateSystemUsage:"box",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,roam:!1,roamTrigger:"global",center:null,zoom:1,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:ve.color.neutral50,opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:ve.color.primary}},animationEasing:"linear",animationDuration:1e3},e})(Cr);function qVe(n,e){n.eachSeriesByType("sankey",function(t){var r=t.get("nodeWidth"),i=t.get("nodeGap"),a=ha(t,e).refContainer,s=qr(t.getBoxLayoutParams(),a);t.layoutInfo=s;var o=s.width,l=s.height,u=t.getGraph(),c=u.nodes,h=u.edges;ZVe(c);var d=er(c,function(g){return g.getLayout().value===0}),f=d.length!==0?0:t.get("layoutIterations"),p=t.get("orient"),m=t.get("nodeAlign");KVe(c,h,r,i,o,l,f,p,m)})}function KVe(n,e,t,r,i,a,s,o,l){QVe(n,e,t,i,a,o,l),nHe(n,e,a,i,r,s,o),hHe(n,o)}function ZVe(n){W(n,function(e){var t=vg(e.outEdges,IN),r=vg(e.inEdges,IN),i=e.getValue()||0,a=Math.max(t,r,i);e.setLayout({value:a},!0)})}function QVe(n,e,t,r,i,a,s){for(var o=[],l=[],u=[],c=[],h=0,d=0;d<e.length;d++)o[d]=1;for(var d=0;d<n.length;d++)l[d]=n[d].inEdges.length,l[d]===0&&u.push(n[d]);for(var f=-1;u.length;){for(var p=0;p<u.length;p++){var m=u[p],g=m.hostGraph.data.getRawDataItem(m.dataIndex),v=g.depth!=null&&g.depth>=0;v&&g.depth>f&&(f=g.depth),m.setLayout({depth:v?g.depth:h},!0),a==="vertical"?m.setLayout({dy:t},!0):m.setLayout({dx:t},!0);for(var b=0;b<m.outEdges.length;b++){var S=m.outEdges[b],w=e.indexOf(S);o[w]=0;var E=S.node2,T=n.indexOf(E);--l[T]===0&&c.indexOf(E)<0&&c.push(E)}}++h,u=c,c=[]}for(var d=0;d<o.length;d++)if(o[d]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var M=f>h-1?f:h-1;s&&s!=="left"&&JVe(n,s,a,M);var P=a==="vertical"?(i-t)/M:(r-t)/M;tHe(n,P,a)}function Vme(n){var e=n.hostGraph.data.getRawDataItem(n.dataIndex);return e.depth!=null&&e.depth>=0}function JVe(n,e,t,r){if(e==="right"){for(var i=[],a=n,s=0;a.length;){for(var o=0;o<a.length;o++){var l=a[o];l.setLayout({skNodeHeight:s},!0);for(var u=0;u<l.inEdges.length;u++){var c=l.inEdges[u];i.indexOf(c.node1)<0&&i.push(c.node1)}}a=i,i=[],++s}W(n,function(h){Vme(h)||h.setLayout({depth:Math.max(0,r-h.getLayout().skNodeHeight)},!0)})}else e==="justify"&&eHe(n,r)}function eHe(n,e){W(n,function(t){!Vme(t)&&!t.outEdges.length&&t.setLayout({depth:e},!0)})}function tHe(n,e,t){W(n,function(r){var i=r.getLayout().depth*e;t==="vertical"?r.setLayout({y:i},!0):r.setLayout({x:i},!0)})}function nHe(n,e,t,r,i,a,s){var o=rHe(n,s);iHe(o,e,t,r,i,s),y5(o,i,t,r,s);for(var l=1;a>0;a--)l*=.99,aHe(o,l,s),y5(o,i,t,r,s),cHe(o,l,s),y5(o,i,t,r,s)}function rHe(n,e){var t=[],r=e==="vertical"?"y":"x",i=gz(n,function(a){return a.getLayout()[r]});return i.keys.sort(function(a,s){return a-s}),W(i.keys,function(a){t.push(i.buckets.get(a))}),t}function iHe(n,e,t,r,i,a){var s=1/0;W(n,function(o){var l=o.length,u=0;W(o,function(h){u+=h.getLayout().value});var c=a==="vertical"?(r-(l-1)*i)/u:(t-(l-1)*i)/u;c<s&&(s=c)}),W(n,function(o){W(o,function(l,u){var c=l.getLayout().value*s;a==="vertical"?(l.setLayout({x:u},!0),l.setLayout({dx:c},!0)):(l.setLayout({y:u},!0),l.setLayout({dy:c},!0))})}),W(e,function(o){var l=+o.getValue()*s;o.setLayout({dy:l},!0)})}function y5(n,e,t,r,i){var a=i==="vertical"?"x":"y";W(n,function(s){s.sort(function(m,g){return m.getLayout()[a]-g.getLayout()[a]});for(var o,l,u,c=0,h=s.length,d=i==="vertical"?"dx":"dy",f=0;f<h;f++)l=s[f],u=c-l.getLayout()[a],u>0&&(o=l.getLayout()[a]+u,i==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),c=l.getLayout()[a]+l.getLayout()[d]+e;var p=i==="vertical"?r:t;if(u=c-e-p,u>0){o=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0),c=o;for(var f=h-2;f>=0;--f)l=s[f],u=l.getLayout()[a]+l.getLayout()[d]+e-c,u>0&&(o=l.getLayout()[a]-u,i==="vertical"?l.setLayout({x:o},!0):l.setLayout({y:o},!0)),c=l.getLayout()[a]}})}function aHe(n,e,t){W(n.slice().reverse(),function(r){W(r,function(i){if(i.outEdges.length){var a=vg(i.outEdges,sHe,t)/vg(i.outEdges,IN);if(isNaN(a)){var s=i.outEdges.length;a=s?vg(i.outEdges,oHe,t)/s:0}if(t==="vertical"){var o=i.getLayout().x+(a-Eg(i,t))*e;i.setLayout({x:o},!0)}else{var l=i.getLayout().y+(a-Eg(i,t))*e;i.setLayout({y:l},!0)}}})})}function sHe(n,e){return Eg(n.node2,e)*n.getValue()}function oHe(n,e){return Eg(n.node2,e)}function lHe(n,e){return Eg(n.node1,e)*n.getValue()}function uHe(n,e){return Eg(n.node1,e)}function Eg(n,e){return e==="vertical"?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function IN(n){return n.getValue()}function vg(n,e,t){for(var r=0,i=n.length,a=-1;++a<i;){var s=+e(n[a],t);isNaN(s)||(r+=s)}return r}function cHe(n,e,t){W(n,function(r){W(r,function(i){if(i.inEdges.length){var a=vg(i.inEdges,lHe,t)/vg(i.inEdges,IN);if(isNaN(a)){var s=i.inEdges.length;a=s?vg(i.inEdges,uHe,t)/s:0}if(t==="vertical"){var o=i.getLayout().x+(a-Eg(i,t))*e;i.setLayout({x:o},!0)}else{var l=i.getLayout().y+(a-Eg(i,t))*e;i.setLayout({y:l},!0)}}})})}function hHe(n,e){var t=e==="vertical"?"x":"y";W(n,function(r){r.outEdges.sort(function(i,a){return i.node2.getLayout()[t]-a.node2.getLayout()[t]}),r.inEdges.sort(function(i,a){return i.node1.getLayout()[t]-a.node1.getLayout()[t]})}),W(n,function(r){var i=0,a=0;W(r.outEdges,function(s){s.setLayout({sy:i},!0),i+=s.getLayout().dy}),W(r.inEdges,function(s){s.setLayout({ty:a},!0),a+=s.getLayout().dy})})}function dHe(n){n.eachSeriesByType("sankey",function(e){var t=e.getGraph(),r=t.nodes,i=t.edges;if(r.length){var a=1/0,s=-1/0;W(r,function(o){var l=o.getLayout().value;l<a&&(a=l),l>s&&(s=l)}),W(r,function(o){var l=new Ta({type:"color",mappingMethod:"linear",dataExtent:[a,s],visual:e.get("color")}),u=l.mapValueToVisual(o.getLayout().value),c=o.getModel().get(["itemStyle","color"]);c!=null?(o.setVisual("color",c),o.setVisual("style",{fill:c})):(o.setVisual("color",u),o.setVisual("style",{fill:u}))})}i.length&&W(i,function(o){var l=o.getModel().get("lineStyle");o.setVisual("style",l)})})}function fHe(n){n.registerChartView(XVe),n.registerSeriesModel(YVe),n.registerLayout(qVe),n.registerVisual(dHe),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(r){r.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),n.registerAction({type:"sankeyRoam",event:"sankeyRoam",update:"none"},function(e,t,r){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(i){var a=i.coordinateSystem,s=C3(a,e,i.get("scaleLimit"));i.setCenter(s.center),i.setZoom(s.zoom)})})}var Hme=(function(){function n(){}return n.prototype._hasEncodeRule=function(e){var t=this.getEncode();return t&&t.get(e)!=null},n.prototype.getInitialData=function(e,t){var r,i=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),s=i.get("type"),o=a.get("type"),l;s==="category"?(e.layout="horizontal",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("x")):o==="category"?(e.layout="vertical",r=a.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var u=["x","y"],c=e.layout==="horizontal"?0:1,h=this._baseAxisDim=u[c],d=u[1-c],f=[i,a],p=f[c].get("type"),m=f[1-c].get("type"),g=e.data;if(g&&l){var v=[];W(g,function(w,E){var T;Be(w)?(T=w.slice(),w.unshift(E)):Be(w.value)?(T=Pe({},w),T.value=T.value.slice(),w.value.unshift(E)):T=w,v.push(T)}),e.data=v}var b=this.defaultValueDimensions,S=[{name:h,type:fN(p),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:d,type:fN(m),dimsDef:b.slice()}];return KS(this,{coordDimensions:S,dimensionsCount:b.length+1,encodeDefaulter:Qt(tde,S,this)})},n.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},n})(),Gme=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],t.visualDrawType="stroke",t}return e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:ve.color.neutral00,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:ve.color.shadow}},animationDuration:800},e})(Cr);Zi(Gme,Hme,!0);var pHe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),s=this.group,o=this._data;this._data||s.removeAll();var l=t.get("layout")==="horizontal"?1:0;a.diff(o).add(function(u){if(a.hasValue(u)){var c=a.getItemLayout(u),h=Tte(c,a,u,l,!0);a.setItemGraphicEl(u,h),s.add(h)}}).update(function(u,c){var h=o.getItemGraphicEl(c);if(!a.hasValue(u)){s.remove(h);return}var d=a.getItemLayout(u);h?(ku(h),jme(d,h,a,u)):h=Tte(d,a,u,l),s.add(h),a.setItemGraphicEl(u,h)}).remove(function(u){var c=o.getItemGraphicEl(u);c&&s.remove(c)}).execute(),this._data=a},e.prototype.remove=function(t){var r=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(a){a&&r.remove(a)})},e.type="boxplot",e})(mr),mHe=(function(){function n(){}return n})(),gHe=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="boxplotBoxPath",r}return e.prototype.getDefaultShape=function(){return new mHe},e.prototype.buildPath=function(t,r){var i=r.points,a=0;for(t.moveTo(i[a][0],i[a][1]),a++;a<4;a++)t.lineTo(i[a][0],i[a][1]);for(t.closePath();a<i.length;a++)t.moveTo(i[a][0],i[a][1]),a++,t.lineTo(i[a][0],i[a][1])},e})(vn);function Tte(n,e,t,r,i){var a=n.ends,s=new gHe({shape:{points:i?vHe(a,r,n):a}});return jme(n,s,e,t,i),s}function jme(n,e,t,r,i){var a=t.hostModel,s=ax[i?"initProps":"updateProps"];s(e,{shape:{points:n.ends}},a,r),e.useStyle(t.getItemVisual(r,"style")),e.style.strokeNoScale=!0,e.z2=100;var o=t.getItemModel(r),l=o.getModel("emphasis");ua(e,o),Yr(e,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function vHe(n,e,t){return Ue(n,function(r){return r=r.slice(),r[e]=t.initBaseline,r})}var XE=W;function yHe(n){var e=xHe(n);XE(e,function(t){var r=t.seriesModels;r.length&&(_He(t),XE(r,function(i,a){bHe(i,t.boxOffsetList[a],t.boxWidthList[a])}))})}function xHe(n){var e=[],t=[];return n.eachSeriesByType("boxplot",function(r){var i=r.getBaseAxis(),a=Jt(t,i);a<0&&(a=t.length,t[a]=i,e[a]={axis:i,seriesModels:[]}),e[a].seriesModels.push(r)}),e}function _He(n){var e=n.axis,t=n.seriesModels,r=t.length,i=n.boxWidthList=[],a=n.boxOffsetList=[],s=[],o;if(e.type==="category")o=e.getBandWidth();else{var l=0;XE(t,function(p){l=Math.max(l,p.getData().count())});var u=e.getExtent();o=Math.abs(u[1]-u[0])/l}XE(t,function(p){var m=p.get("boxWidth");Be(m)||(m=[m,m]),s.push([Xe(m[0],o)||0,Xe(m[1],o)||0])});var c=o*.8-2,h=c/r*.3,d=(c-h*(r-1))/r,f=d/2-c/2;XE(t,function(p,m){a.push(f),f+=h+d,i.push(Math.min(Math.max(d,s[m][0]),s[m][1]))})}function bHe(n,e,t){var r=n.coordinateSystem,i=n.getData(),a=t/2,s=n.get("layout")==="horizontal"?0:1,o=1-s,l=["x","y"],u=i.mapDimension(l[s]),c=i.mapDimensionsAll(l[o]);if(u==null||c.length<5)return;for(var h=0;h<i.count();h++){var d=i.get(u,h),f=S(d,c[2],h),p=S(d,c[0],h),m=S(d,c[1],h),g=S(d,c[3],h),v=S(d,c[4],h),b=[];w(b,m,!1),w(b,g,!0),b.push(p,m,v,g),E(b,p),E(b,v),E(b,f),i.setItemLayout(h,{initBaseline:f[o],ends:b})}function S(T,M,P){var I=i.get(M,P),D=[];D[s]=T,D[o]=I;var R;return isNaN(T)||isNaN(I)?R=[NaN,NaN]:(R=r.dataToPoint(D),R[s]+=e),R}function w(T,M,P){var I=M.slice(),D=M.slice();I[s]+=a,D[s]-=a,P?T.push(I,D):T.push(D,I)}function E(T,M){var P=M.slice(),I=M.slice();P[s]-=a,I[s]+=a,T.push(P,I)}}function SHe(n,e){e=e||{};for(var t=[],r=[],i=e.boundIQR,a=i==="none"||i===0,s=0;s<n.length;s++){var o=Du(n[s].slice()),l=$F(o,.25),u=$F(o,.5),c=$F(o,.75),h=o[0],d=o[o.length-1],f=(i??1.5)*(c-l),p=a?h:Math.max(h,l-f),m=a?d:Math.min(d,c+f),g=e.itemNameFormatter,v=St(g)?g({value:s}):Ke(g)?g.replace("{value}",s+""):s+"";t.push([v,p,l,u,c,m]);for(var b=0;b<o.length;b++){var S=o[b];if(S<p||S>m){var w=[v,S];r.push(w)}}}return{boxData:t,outliers:r}}var wHe={type:"echarts:boxplot",transform:function(e){var t=e.upstream;if(t.sourceFormat!==qa){var r="";Qn(r)}var i=SHe(t.getRawData(),e.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function THe(n){n.registerSeriesModel(Gme),n.registerChartView(pHe),n.registerLayout(yHe),n.registerTransform(wHe)}var EHe=["itemStyle","borderColor"],AHe=["itemStyle","borderColor0"],CHe=["itemStyle","borderColorDoji"],MHe=["itemStyle","color"],DHe=["itemStyle","color0"];function C7(n,e){return e.get(n>0?MHe:DHe)}function M7(n,e){return e.get(n===0?CHe:n>0?EHe:AHe)}var IHe={seriesType:"candlestick",plan:WS(),performRawSeries:!0,reset:function(n,e){if(!e.isSeriesFiltered(n)){var t=n.pipelineContext.large;return!t&&{progress:function(r,i){for(var a;(a=r.next())!=null;){var s=i.getItemModel(a),o=i.getItemLayout(a).sign,l=s.getItemStyle();l.fill=C7(o,s),l.stroke=M7(o,s)||l.fill;var u=i.ensureUniqueItemVisual(a,"style");Pe(u,l)}}}}}},PHe=["color","borderColor"],LHe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,r,i){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,r,i,a){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,r):this._incrementalRenderNormal(t,r)},e.prototype.eachRendered=function(t){Ng(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var r=t.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(t){var r=t.getData(),i=this._data,a=this.group,s=r.getLayout("isSimpleBox"),o=t.get("clip",!0),l=t.coordinateSystem,u=l.getArea&&l.getArea();this._data||a.removeAll(),r.diff(i).add(function(c){if(r.hasValue(c)){var h=r.getItemLayout(c);if(o&&Ete(u,h))return;var d=x5(h,c,!0);Vr(d,{shape:{points:h.ends}},t,c),_5(d,r,c,s),a.add(d),r.setItemGraphicEl(c,d)}}).update(function(c,h){var d=i.getItemGraphicEl(h);if(!r.hasValue(c)){a.remove(d);return}var f=r.getItemLayout(c);if(o&&Ete(u,f)){a.remove(d);return}d?(Vn(d,{shape:{points:f.ends}},t,c),ku(d)):d=x5(f),_5(d,r,c,s),a.add(d),r.setItemGraphicEl(c,d)}).remove(function(c){var h=i.getItemGraphicEl(c);h&&a.remove(h)}).execute(),this._data=r},e.prototype._renderLarge=function(t){this._clear(),Ate(t,this.group);var r=t.get("clip",!0)?A2(t.coordinateSystem,!1,t):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,r){for(var i=r.getData(),a=i.getLayout("isSimpleBox"),s;(s=t.next())!=null;){var o=i.getItemLayout(s),l=x5(o);_5(l,i,s,a),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(t,r){Ate(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e})(mr),RHe=(function(){function n(){}return n})(),NHe=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new RHe},e.prototype.buildPath=function(t,r){var i=r.points;this.__simpleBox?(t.moveTo(i[4][0],i[4][1]),t.lineTo(i[6][0],i[6][1])):(t.moveTo(i[0][0],i[0][1]),t.lineTo(i[1][0],i[1][1]),t.lineTo(i[2][0],i[2][1]),t.lineTo(i[3][0],i[3][1]),t.closePath(),t.moveTo(i[4][0],i[4][1]),t.lineTo(i[5][0],i[5][1]),t.moveTo(i[6][0],i[6][1]),t.lineTo(i[7][0],i[7][1]))},e})(vn);function x5(n,e,t){var r=n.ends;return new NHe({shape:{points:t?kHe(r,n):r},z2:100})}function Ete(n,e){for(var t=!0,r=0;r<e.ends.length;r++)if(n.contain(e.ends[r][0],e.ends[r][1])){t=!1;break}return t}function _5(n,e,t,r){var i=e.getItemModel(t);n.useStyle(e.getItemVisual(t,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,ua(n,i);var a=e.getItemLayout(t).sign;W(n.states,function(o,l){var u=i.getModel(l),c=C7(a,u),h=M7(a,u)||c,d=o.style||(o.style={});c&&(d.fill=c),h&&(d.stroke=h)});var s=i.getModel("emphasis");Yr(n,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function kHe(n,e){return Ue(n,function(t){return t=t.slice(),t[1]=e.initBaseline,t})}var OHe=(function(){function n(){}return n})(),b5=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new OHe},e.prototype.buildPath=function(t,r){for(var i=r.points,a=0;a<i.length;)if(this.__sign===i[a++]){var s=i[a++];t.moveTo(s,i[a++]),t.lineTo(s,i[a++])}else a+=3},e})(vn);function Ate(n,e,t,r){var i=n.getData(),a=i.getLayout("largePoints"),s=new b5({shape:{points:a},__sign:1,ignoreCoarsePointer:!0});e.add(s);var o=new b5({shape:{points:a},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var l=new b5({shape:{points:a},__sign:0,ignoreCoarsePointer:!0});e.add(l),S5(1,s,n),S5(-1,o,n),S5(0,l,n),r&&(s.incremental=!0,o.incremental=!0),t&&t.push(s,o)}function S5(n,e,t,r){var i=M7(n,t)||C7(n,t),a=t.getModel("itemStyle").getItemStyle(PHe);e.useStyle(a),e.style.fill=null,e.style.stroke=i}var Wme=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],t}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,r,i){var a=r.getItemLayout(t);return a&&i.rect(a.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e})(Cr);Zi(Wme,Hme,!0);function BHe(n){!n||!Be(n.series)||W(n.series,function(e){Lt(e)&&e.type==="k"&&(e.type="candlestick")})}var FHe={seriesType:"candlestick",plan:WS(),reset:function(n){var e=n.coordinateSystem,t=n.getData(),r=UHe(n,t),i=0,a=1,s=["x","y"],o=t.getDimensionIndex(t.mapDimension(s[i])),l=Ue(t.mapDimensionsAll(s[a]),t.getDimensionIndex,t),u=l[0],c=l[1],h=l[2],d=l[3];if(t.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),o<0||l.length<4)return;return{progress:n.pipelineContext.large?p:f};function f(m,g){for(var v,b=g.getStore();(v=m.next())!=null;){var S=b.get(o,v),w=b.get(u,v),E=b.get(c,v),T=b.get(h,v),M=b.get(d,v),P=Math.min(w,E),I=Math.max(w,E),D=X(P,S),R=X(I,S),B=X(T,S),k=X(M,S),V=[];j(V,R,0),j(V,D,1),V.push(H(k),H(R),H(B),H(D));var G=g.getItemModel(v),F=!!G.get(["itemStyle","borderColorDoji"]);g.setItemLayout(v,{sign:Cte(b,v,w,E,c,F),initBaseline:w>E?R[a]:D[a],ends:V,brushRect:Q(T,M,S)})}function X(K,te){var Y=[];return Y[i]=te,Y[a]=K,isNaN(te)||isNaN(K)?[NaN,NaN]:e.dataToPoint(Y)}function j(K,te,Y){var de=te.slice(),ge=te.slice();de[i]=AL(de[i]+r/2,1,!1),ge[i]=AL(ge[i]-r/2,1,!0),Y?K.push(de,ge):K.push(ge,de)}function Q(K,te,Y){var de=X(K,Y),ge=X(te,Y);return de[i]-=r/2,ge[i]-=r/2,{x:de[0],y:de[1],width:r,height:ge[1]-de[1]}}function H(K){return K[i]=AL(K[i],1),K}}function p(m,g){for(var v=zh(m.count*4),b=0,S,w=[],E=[],T,M=g.getStore(),P=!!n.get(["itemStyle","borderColorDoji"]);(T=m.next())!=null;){var I=M.get(o,T),D=M.get(u,T),R=M.get(c,T),B=M.get(h,T),k=M.get(d,T);if(isNaN(I)||isNaN(B)||isNaN(k)){v[b++]=NaN,b+=3;continue}v[b++]=Cte(M,T,D,R,c,P),w[i]=I,w[a]=B,S=e.dataToPoint(w,null,E),v[b++]=S?S[0]:NaN,v[b++]=S?S[1]:NaN,w[a]=k,S=e.dataToPoint(w,null,E),v[b++]=S?S[1]:NaN}g.setLayout("largePoints",v)}}};function Cte(n,e,t,r,i,a){var s;return t>r?s=-1:t<r?s=1:s=a?0:e>0?n.get(i,e-1)<=r?1:-1:1,s}function UHe(n,e){var t=n.getBaseAxis(),r,i=t.type==="category"?t.getBandWidth():(r=t.getExtent(),Math.abs(r[1]-r[0])/e.count()),a=Xe(dt(n.get("barMaxWidth"),i),i),s=Xe(dt(n.get("barMinWidth"),1),i),o=n.get("barWidth");return o!=null?Xe(o,i):Math.max(Math.min(i/2,a),s)}function zHe(n){n.registerChartView(LHe),n.registerSeriesModel(Wme),n.registerPreprocessor(BHe),n.registerVisual(IHe),n.registerLayout(FHe)}function Mte(n,e){var t=e.rippleEffectColor||e.color;n.eachChild(function(r){r.attr({z:e.z,zlevel:e.zlevel,style:{stroke:e.brushType==="stroke"?t:null,fill:e.brushType==="fill"?t:null}})})}var VHe=(function(n){be(e,n);function e(t,r){var i=n.call(this)||this,a=new T2(t,r),s=new wt;return i.add(a),i.add(s),i.updateData(t,r),i}return e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var r=t.symbolType,i=t.color,a=t.rippleNumber,s=this.childAt(1),o=0;o<a;o++){var l=Ki(r,-1,-1,2,2,i);l.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var u=-o/a*t.period+t.effectOffset;l.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(u).start(),l.animateStyle(!0).when(t.period,{opacity:0}).delay(u).start(),s.add(l)}Mte(s,t)},e.prototype.updateEffectAnimation=function(t){for(var r=this._effectCfg,i=this.childAt(1),a=["symbolType","period","rippleScale","rippleNumber"],s=0;s<a.length;s++){var o=a[s];if(r[o]!==t[o]){this.stopEffectAnimation(),this.startEffectAnimation(t);return}}Mte(i,t)},e.prototype.highlight=function(){Yf(this)},e.prototype.downplay=function(){qf(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,r){var i=this,a=t.hostModel;this.childAt(0).updateData(t,r);var s=this.childAt(1),o=t.getItemModel(r),l=t.getItemVisual(r,"symbol"),u=$S(t.getItemVisual(r,"symbolSize")),c=t.getItemVisual(r,"style"),h=c&&c.fill,d=o.getModel("emphasis");s.setScale(u),s.traverse(function(g){g.setStyle("fill",h)});var f=lx(t.getItemVisual(r,"symbolOffset"),u);f&&(s.x=f[0],s.y=f[1]);var p=t.getItemVisual(r,"symbolRotate");s.rotation=(p||0)*Math.PI/180||0;var m={};m.showEffectOn=a.get("showEffectOn"),m.rippleScale=o.get(["rippleEffect","scale"]),m.brushType=o.get(["rippleEffect","brushType"]),m.period=o.get(["rippleEffect","period"])*1e3,m.effectOffset=r/t.count(),m.z=a.getShallow("z")||0,m.zlevel=a.getShallow("zlevel")||0,m.symbolType=l,m.color=h,m.rippleEffectColor=o.get(["rippleEffect","color"]),m.rippleNumber=o.get(["rippleEffect","number"]),m.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(m):this.startEffectAnimation(m),this._effectCfg=m):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(g){g==="emphasis"?m.showEffectOn!=="render"&&i.startEffectAnimation(m):g==="normal"&&m.showEffectOn!=="render"&&i.stopEffectAnimation()}),this._effectCfg=m,Yr(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e})(wt),HHe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._symbolDraw=new E2(VHe)},e.prototype.render=function(t,r,i){var a=t.getData(),s=this._symbolDraw;s.updateData(a,{clipShape:this._getClipShape(t)}),this.group.add(s.group)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,i=r&&r.getArea&&r.getArea();return t.get("clip",!0)?i:null},e.prototype.updateTransform=function(t,r,i){var a=t.getData();this.group.dirty();var s=C2("").reset(t,r,i);s.progress&&s.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var r=t.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=hLe(r.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e})(mr),GHe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return lp(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,r,i){return i.point(r.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e})(Cr);function jHe(n){n.registerChartView(HHe),n.registerSeriesModel(GHe),n.registerLayout(C2("effectScatter"))}var Xme=(function(n){be(e,n);function e(t,r,i){var a=n.call(this)||this;return a.add(a.createLine(t,r,i)),a._updateEffectSymbol(t,r),a}return e.prototype.createLine=function(t,r,i){return new v7(t,r,i)},e.prototype._updateEffectSymbol=function(t,r){var i=t.getItemModel(r),a=i.getModel("effect"),s=a.get("symbolSize"),o=a.get("symbol");Be(s)||(s=[s,s]);var l=t.getItemVisual(r,"style"),u=a.get("color")||l&&l.stroke,c=this.childAt(1);this._symbolType!==o&&(this.remove(c),c=Ki(o,-.5,-.5,1,1,u),c.z2=100,c.culling=!0,this.add(c)),c&&(c.setStyle("shadowColor",u),c.setStyle(a.getItemStyle(["color"])),c.scaleX=s[0],c.scaleY=s[1],c.setColor(u),this._symbolType=o,this._symbolScale=s,this._updateEffectAnimation(t,a,r))},e.prototype._updateEffectAnimation=function(t,r,i){var a=this.childAt(1);if(a){var s=t.getItemLayout(i),o=r.get("period")*1e3,l=r.get("loop"),u=r.get("roundTrip"),c=r.get("constantSpeed"),h=fs(r.get("delay"),function(f){return f/t.count()*o/3});if(a.ignore=!0,this._updateAnimationPoints(a,s),c>0&&(o=this._getLineLength(a)/c*1e3),o!==this._period||l!==this._loop||u!==this._roundTrip){a.stopAnimation();var d=void 0;St(h)?d=h(i):d=h,a.__t>0&&(d=-o*a.__t),this._animateSymbol(a,o,d,l,u)}this._period=o,this._loop=l,this._roundTrip=u}},e.prototype._animateSymbol=function(t,r,i,a,s){if(r>0){t.__t=0;var o=this,l=t.animate("",a).when(s?r*2:r,{__t:s?2:1}).delay(i).during(function(){o._updateSymbolPosition(t)});a||l.done(function(){o.remove(t)}),l.start()}},e.prototype._getLineLength=function(t){return eg(t.__p1,t.__cp1)+eg(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,r){t.__p1=r[0],t.__p2=r[1],t.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},e.prototype.updateData=function(t,r,i){this.childAt(0).updateData(t,r,i),this._updateEffectSymbol(t,r)},e.prototype._updateSymbolPosition=function(t){var r=t.__p1,i=t.__p2,a=t.__cp1,s=t.__t<1?t.__t:2-t.__t,o=[t.x,t.y],l=o.slice(),u=Wa,c=tz;o[0]=u(r[0],a[0],i[0],s),o[1]=u(r[1],a[1],i[1],s);var h=t.__t<1?c(r[0],a[0],i[0],s):c(i[0],a[0],r[0],1-s),d=t.__t<1?c(r[1],a[1],i[1],s):c(i[1],a[1],r[1],1-s);t.rotation=-Math.atan2(d,h)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(t.__lastT!==void 0&&t.__lastT<t.__t?(t.scaleY=eg(l,o)*1.05,s===1&&(o[0]=l[0]+(o[0]-l[0])/2,o[1]=l[1]+(o[1]-l[1])/2)):t.__lastT===1?t.scaleY=2*eg(r,o):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=o[0],t.y=o[1]},e.prototype.updateLayout=function(t,r){this.childAt(0).updateLayout(t,r);var i=t.getItemModel(r).getModel("effect");this._updateEffectAnimation(t,i,r)},e})(wt),$me=(function(n){be(e,n);function e(t,r,i){var a=n.call(this)||this;return a._createPolyline(t,r,i),a}return e.prototype._createPolyline=function(t,r,i){var a=t.getItemLayout(r),s=new gs({shape:{points:a}});this.add(s),this._updateCommonStl(t,r,i)},e.prototype.updateData=function(t,r,i){var a=t.hostModel,s=this.childAt(0),o={shape:{points:t.getItemLayout(r)}};Vn(s,o,a,r),this._updateCommonStl(t,r,i)},e.prototype._updateCommonStl=function(t,r,i){var a=this.childAt(0),s=t.getItemModel(r),o=i&&i.emphasisLineStyle,l=i&&i.focus,u=i&&i.blurScope,c=i&&i.emphasisDisabled;if(!i||t.hasItemOption){var h=s.getModel("emphasis");o=h.getModel("lineStyle").getLineStyle(),c=h.get("disabled"),l=h.get("focus"),u=h.get("blurScope")}a.useStyle(t.getItemVisual(r,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var d=a.ensureState("emphasis");d.style=o,Yr(this,l,u,c)},e.prototype.updateLayout=function(t,r){var i=this.childAt(0);i.setShape("points",t.getItemLayout(r))},e})(wt),WHe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._lastFrame=0,t._lastFramePercent=0,t}return e.prototype.createLine=function(t,r,i){return new $me(t,r,i)},e.prototype._updateAnimationPoints=function(t,r){this._points=r;for(var i=[0],a=0,s=1;s<r.length;s++){var o=r[s-1],l=r[s];a+=eg(o,l),i.push(a)}if(a===0){this._length=0;return}for(var s=0;s<i.length;s++)i[s]/=a;this._offsets=i,this._length=a},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var r=t.__t<1?t.__t:2-t.__t,i=this._points,a=this._offsets,s=i.length;if(a){var o=this._lastFrame,l;if(r<this._lastFramePercent){var u=Math.min(o+1,s-1);for(l=u;l>=0&&!(a[l]<=r);l--);l=Math.min(l,s-2)}else{for(l=o;l<s&&!(a[l]>r);l++);l=Math.min(l-1,s-2)}var c=(r-a[l])/(a[l+1]-a[l]),h=i[l],d=i[l+1];t.x=h[0]*(1-c)+c*d[0],t.y=h[1]*(1-c)+c*d[1];var f=t.__t<1?d[0]-h[0]:h[0]-d[0],p=t.__t<1?d[1]-h[1]:h[1]-d[1];t.rotation=-Math.atan2(p,f)-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,t.ignore=!1}},e})(Xme),XHe=(function(){function n(){this.polyline=!1,this.curveness=0,this.segs=[]}return n})(),$He=(function(n){be(e,n);function e(t){var r=n.call(this,t)||this;return r._off=0,r.hoverDataIdx=-1,r}return e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:ve.color.neutral99,fill:null}},e.prototype.getDefaultShape=function(){return new XHe},e.prototype.buildPath=function(t,r){var i=r.segs,a=r.curveness,s;if(r.polyline)for(s=this._off;s<i.length;){var o=i[s++];if(o>0){t.moveTo(i[s++],i[s++]);for(var l=1;l<o;l++)t.lineTo(i[s++],i[s++])}}else for(s=this._off;s<i.length;){var u=i[s++],c=i[s++],h=i[s++],d=i[s++];if(t.moveTo(u,c),a>0){var f=(u+h)/2-(c-d)*a,p=(c+d)/2-(h-u)*a;t.quadraticCurveTo(f,p,h,d)}else t.lineTo(h,d)}this.incremental&&(this._off=s,this.notClear=!0)},e.prototype.findDataIndex=function(t,r){var i=this.shape,a=i.segs,s=i.curveness,o=this.style.lineWidth;if(i.polyline)for(var l=0,u=0;u<a.length;){var c=a[u++];if(c>0)for(var h=a[u++],d=a[u++],f=1;f<c;f++){var p=a[u++],m=a[u++];if(tm(h,d,p,m,o,t,r))return l}l++}else for(var l=0,u=0;u<a.length;){var h=a[u++],d=a[u++],p=a[u++],m=a[u++];if(s>0){var g=(h+p)/2-(d-m)*s,v=(d+m)/2-(p-h)*s;if($ce(h,d,g,v,p,m,o,t,r))return l}else if(tm(h,d,p,m,o,t,r))return l;l++}return-1},e.prototype.contain=function(t,r){var i=this.transformCoordToLocal(t,r),a=this.getBoundingRect();if(t=i[0],r=i[1],a.contain(t,r)){var s=this.hoverDataIdx=this.findDataIndex(t,r);return s>=0}return this.hoverDataIdx=-1,!1},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var r=this.shape,i=r.segs,a=1/0,s=1/0,o=-1/0,l=-1/0,u=0;u<i.length;){var c=i[u++],h=i[u++];a=Math.min(c,a),o=Math.max(c,o),s=Math.min(h,s),l=Math.max(h,l)}t=this._rect=new Rt(a,s,o,l)}return t},e})(vn),YHe=(function(){function n(){this.group=new wt}return n.prototype.updateData=function(e){this._clear();var t=this._create();t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e)},n.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(e,t){var r=this._newAdded[0],i=t.getLayout("linesPoints"),a=r&&r.shape.segs;if(a&&a.length<2e4){var s=a.length,o=new Float32Array(s+i.length);o.set(a),o.set(i,s),r.setShape({segs:o})}else{this._newAdded=[];var l=this._create();l.incremental=!0,l.setShape({segs:i}),this._setCommon(l,t),l.__startIndex=e.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(e){this._newAdded[0]&&e(this._newAdded[0])},n.prototype._create=function(){var e=new $He({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(e),this.group.add(e),e},n.prototype._setCommon=function(e,t,r){var i=t.hostModel;e.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),e.useStyle(i.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("style");a&&a.stroke&&e.setStyle("stroke",a.stroke),e.setStyle("fill",null);var s=Ft(e);s.seriesIndex=i.seriesIndex,e.on("mousemove",function(o){s.dataIndex=null;var l=e.hoverDataIdx;l>0&&(s.dataIndex=l+e.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n})(),Yme={seriesType:"lines",plan:WS(),reset:function(n){var e=n.coordinateSystem;if(e){var t=n.get("polyline"),r=n.pipelineContext.large;return{progress:function(i,a){var s=[];if(r){var o=void 0,l=i.end-i.start;if(t){for(var u=0,c=i.start;c<i.end;c++)u+=n.getLineCoordsCount(c);o=new Float32Array(l+u*2)}else o=new Float32Array(l*4);for(var h=0,d=[],c=i.start;c<i.end;c++){var f=n.getLineCoords(c,s);t&&(o[h++]=f);for(var p=0;p<f;p++)d=e.dataToPoint(s[p],!1,d),o[h++]=d[0],o[h++]=d[1]}a.setLayout("linesPoints",o)}else for(var c=i.start;c<i.end;c++){var m=a.getItemModel(c),f=n.getLineCoords(c,s),g=[];if(t)for(var v=0;v<f;v++)g.push(e.dataToPoint(s[v]));else{g[0]=e.dataToPoint(s[0]),g[1]=e.dataToPoint(s[1]);var b=m.get(["lineStyle","curveness"]);+b&&(g[2]=[(g[0][0]+g[1][0])/2-(g[0][1]-g[1][1])*b,(g[0][1]+g[1][1])/2-(g[1][0]-g[0][0])*b])}a.setItemLayout(c,g)}}}}}},qHe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=t.getData(),s=this._updateLineDraw(a,t),o=t.get("zlevel"),l=t.get(["effect","trailLength"]),u=i.getZr(),c=u.painter.getType()==="svg";c||u.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!c&&u.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&l>0&&(c||u.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),s.updateData(a);var h=t.get("clip",!0)&&A2(t.coordinateSystem,!1,t);h?this.group.setClipPath(h):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,i){var a=t.getData(),s=this._updateLineDraw(a,t);s.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,i){this._lineDraw.incrementalUpdate(t,r.getData()),this._finished=t.end===r.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,r,i){var a=t.getData(),s=t.pipelineContext;if(!this._finished||s.large||s.progressiveRender)return{update:!0};var o=Yme.reset(t,r,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},e.prototype._updateLineDraw=function(t,r){var i=this._lineDraw,a=this._showEffect(r),s=!!r.get("polyline"),o=r.pipelineContext,l=o.large;return(!i||a!==this._hasEffet||s!==this._isPolyline||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=l?new YHe:new y7(s?a?WHe:$me:a?Xme:v7),this._hasEffet=a,this._isPolyline=s,this._isLargeDraw=l),this.group.add(i.group),i},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var r=t.getZr(),i=r.painter.getType()==="svg";!i&&this._lastZlevel!=null&&r.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.type="lines",e})(mr),KHe=typeof Uint32Array>"u"?Array:Uint32Array,ZHe=typeof Float64Array>"u"?Array:Float64Array;function Dte(n){var e=n.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(n.data=Ue(e,function(t){var r=[t[0].coord,t[1].coord],i={coords:r};return t[0].name&&(i.fromName=t[0].name),t[1].name&&(i.toName=t[1].name),GG([i,t[0],t[1]])}))}var QHe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.visualStyleAccessPath="lineStyle",t.visualDrawType="stroke",t}return e.prototype.init=function(t){t.data=t.data||[],Dte(t);var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count)),n.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(t){if(Dte(t),t.data){var r=this._processFlatCoordsArray(t.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(t.data=new Float32Array(r.count))}n.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var r=this._processFlatCoordsArray(t.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=dA(this._flatCoords,r.flatCoords),this._flatCoordsOffset=dA(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),t.data=new Float32Array(r.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var r=this.getData().getItemModel(t),i=r.option instanceof Array?r.option:r.getShallow("coords");return i},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,r){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[t*2],a=this._flatCoordsOffset[t*2+1],s=0;s<a;s++)r[s]=r[s]||[],r[s][0]=this._flatCoords[i+s*2],r[s][1]=this._flatCoords[i+s*2+1];return a}else{for(var o=this._getCoordsFromItemModel(t),s=0;s<o.length;s++)r[s]=r[s]||[],r[s][0]=o[s][0],r[s][1]=o[s][1];return o.length}},e.prototype._processFlatCoordsArray=function(t){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),Ln(t[0])){for(var i=t.length,a=new KHe(i),s=new ZHe(i),o=0,l=0,u=0,c=0;c<i;){u++;var h=t[c++];a[l++]=o+r,a[l++]=h;for(var d=0;d<h;d++){var f=t[c++],p=t[c++];s[o++]=f,s[o++]=p}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,l),flatCoords:s,count:u}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,r){var i=new mo(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(a,s,o,l){if(a instanceof Array)return NaN;i.hasItemOption=!0;var u=a.value;if(u!=null)return u instanceof Array?u[l]:u}),i},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),s=a.getItemModel(t),o=s.get("name");if(o)return o;var l=s.get("fromName"),u=s.get("toName"),c=[];return l!=null&&c.push(l),u!=null&&c.push(u),qi("nameValue",{name:c.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?1e4:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?2e4:this.get("progressiveThreshold"))},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),r=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&r>0?r+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e})(Cr);function iP(n){return n instanceof Array||(n=[n,n]),n}var JHe={seriesType:"lines",reset:function(n){var e=iP(n.get("symbol")),t=iP(n.get("symbolSize")),r=n.getData();r.setVisual("fromSymbol",e&&e[0]),r.setVisual("toSymbol",e&&e[1]),r.setVisual("fromSymbolSize",t&&t[0]),r.setVisual("toSymbolSize",t&&t[1]);function i(a,s){var o=a.getItemModel(s),l=iP(o.getShallow("symbol",!0)),u=iP(o.getShallow("symbolSize",!0));l[0]&&a.setItemVisual(s,"fromSymbol",l[0]),l[1]&&a.setItemVisual(s,"toSymbol",l[1]),u[0]&&a.setItemVisual(s,"fromSymbolSize",u[0]),u[1]&&a.setItemVisual(s,"toSymbolSize",u[1])}return{dataEach:r.hasItemOption?i:null}}};function e9e(n){n.registerChartView(qHe),n.registerSeriesModel(QHe),n.registerLayout(Yme),n.registerVisual(JHe)}var t9e=256,n9e=(function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var e=Dc.createCanvas();this.canvas=e}return n.prototype.update=function(e,t,r,i,a,s){var o=this._getBrush(),l=this._getGradient(a,"inRange"),u=this._getGradient(a,"outOfRange"),c=this.pointSize+this.blurSize,h=this.canvas,d=h.getContext("2d"),f=e.length;h.width=t,h.height=r;for(var p=0;p<f;++p){var m=e[p],g=m[0],v=m[1],b=m[2],S=i(b);d.globalAlpha=S,d.drawImage(o,g-c,v-c)}if(!h.width||!h.height)return h;for(var w=d.getImageData(0,0,h.width,h.height),E=w.data,T=0,M=E.length,P=this.minOpacity,I=this.maxOpacity,D=I-P;T<M;){var S=E[T+3]/256,R=Math.floor(S*(t9e-1))*4;if(S>0){var B=s(S)?l:u;S>0&&(S=S*D+P),E[T++]=B[R],E[T++]=B[R+1],E[T++]=B[R+2],E[T++]=B[R+3]*S*256}else T+=4}return d.putImageData(w,0,0),h},n.prototype._getBrush=function(){var e=this._brushCanvas||(this._brushCanvas=Dc.createCanvas()),t=this.pointSize+this.blurSize,r=t*2;e.width=r,e.height=r;var i=e.getContext("2d");return i.clearRect(0,0,r,r),i.shadowOffsetX=r,i.shadowBlur=this.blurSize,i.shadowColor=ve.color.neutral99,i.beginPath(),i.arc(-t,t,this.pointSize,0,Math.PI*2,!0),i.closePath(),i.fill(),e},n.prototype._getGradient=function(e,t){for(var r=this._gradientPixels,i=r[t]||(r[t]=new Uint8ClampedArray(256*4)),a=[0,0,0,0],s=0,o=0;o<256;o++)e[t](o/255,!0,a),i[s++]=a[0],i[s++]=a[1],i[s++]=a[2],i[s++]=a[3];return i},n})();function r9e(n,e,t){var r=n[1]-n[0];e=Ue(e,function(s){return{interval:[(s.interval[0]-n[0])/r,(s.interval[1]-n[0])/r]}});var i=e.length,a=0;return function(s){var o;for(o=a;o<i;o++){var l=e[o].interval;if(l[0]<=s&&s<=l[1]){a=o;break}}if(o===i)for(o=a-1;o>=0;o--){var l=e[o].interval;if(l[0]<=s&&s<=l[1]){a=o;break}}return o>=0&&o<i&&t[o]}}function i9e(n,e){var t=n[1]-n[0];return e=[(e[0]-n[0])/t,(e[1]-n[0])/t],function(r){return r>=e[0]&&r<=e[1]}}function Ite(n){var e=n.dimensions;return e[0]==="lng"&&e[1]==="lat"}var a9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a;r.eachComponent("visualMap",function(o){o.eachTargetSeries(function(l){l===t&&(a=o)})}),this._progressiveEls=null,this.group.removeAll();var s=t.coordinateSystem;s.type==="cartesian2d"||s.type==="calendar"||s.type==="matrix"?this._renderOnGridLike(t,i,0,t.getData().count()):Ite(s)&&this._renderOnGeo(s,t,a,i)},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll()},e.prototype.incrementalRender=function(t,r,i,a){var s=r.coordinateSystem;s&&(Ite(s)?this.render(r,i,a):(this._progressiveEls=[],this._renderOnGridLike(r,a,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Ng(this._progressiveEls||this.group,t)},e.prototype._renderOnGridLike=function(t,r,i,a,s){var o=t.coordinateSystem,l=wg(o,"cartesian2d"),u=wg(o,"matrix"),c,h,d,f;if(l){var p=o.getAxis("x"),m=o.getAxis("y");c=p.getBandWidth()+.5,h=m.getBandWidth()+.5,d=p.scale.getExtent(),f=m.scale.getExtent()}for(var g=this.group,v=t.getData(),b=t.getModel(["emphasis","itemStyle"]).getItemStyle(),S=t.getModel(["blur","itemStyle"]).getItemStyle(),w=t.getModel(["select","itemStyle"]).getItemStyle(),E=t.get(["itemStyle","borderRadius"]),T=ca(t),M=t.getModel("emphasis"),P=M.get("focus"),I=M.get("blurScope"),D=M.get("disabled"),R=l||u?[v.mapDimension("x"),v.mapDimension("y"),v.mapDimension("value")]:[v.mapDimension("time"),v.mapDimension("value")],B=i;B<a;B++){var k=void 0,V=v.getItemVisual(B,"style");if(l){var G=v.get(R[0],B),F=v.get(R[1],B);if(isNaN(v.get(R[2],B))||isNaN(G)||isNaN(F)||G<d[0]||G>d[1]||F<f[0]||F>f[1])continue;var X=o.dataToPoint([G,F]);k=new fn({shape:{x:X[0]-c/2,y:X[1]-h/2,width:c,height:h},style:V})}else if(u){var j=o.dataToLayout([v.get(R[0],B),v.get(R[1],B)]).rect;if(Bs(j.x))continue;k=new fn({z2:1,shape:j,style:V})}else{if(isNaN(v.get(R[1],B)))continue;var Q=o.dataToLayout([v.get(R[0],B)]),j=Q.contentRect||Q.rect;if(Bs(j.x)||Bs(j.y))continue;k=new fn({z2:1,shape:j,style:V})}if(v.hasItemOption){var H=v.getItemModel(B),K=H.getModel("emphasis");b=K.getModel("itemStyle").getItemStyle(),S=H.getModel(["blur","itemStyle"]).getItemStyle(),w=H.getModel(["select","itemStyle"]).getItemStyle(),E=H.get(["itemStyle","borderRadius"]),P=K.get("focus"),I=K.get("blurScope"),D=K.get("disabled"),T=ca(H)}k.shape.r=E;var te=t.getRawValue(B),Y="-";te&&te[2]!=null&&(Y=te[2]+""),Aa(k,T,{labelFetcher:t,labelDataIndex:B,defaultOpacity:V.opacity,defaultText:Y}),k.ensureState("emphasis").style=b,k.ensureState("blur").style=S,k.ensureState("select").style=w,Yr(k,P,I,D),k.incremental=s,s&&(k.states.emphasis.hoverLayer=!0),g.add(k),v.setItemGraphicEl(B,k),this._progressiveEls&&this._progressiveEls.push(k)}},e.prototype._renderOnGeo=function(t,r,i,a){var s=i.targetVisuals.inRange,o=i.targetVisuals.outOfRange,l=r.getData(),u=this._hmLayer||this._hmLayer||new n9e;u.blurSize=r.get("blurSize"),u.pointSize=r.get("pointSize"),u.minOpacity=r.get("minOpacity"),u.maxOpacity=r.get("maxOpacity");var c=t.getViewRect().clone(),h=t.getRoamTransform();c.applyTransform(h);var d=Math.max(c.x,0),f=Math.max(c.y,0),p=Math.min(c.width+c.x,a.getWidth()),m=Math.min(c.height+c.y,a.getHeight()),g=p-d,v=m-f,b=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],S=l.mapArray(b,function(M,P,I){var D=t.dataToPoint([M,P]);return D[0]-=d,D[1]-=f,D.push(I),D}),w=i.getExtent(),E=i.type==="visualMap.continuous"?i9e(w,i.option.range):r9e(w,i.getPieceList(),i.option.selected);u.update(S,g,v,s.color.getNormalizer(),{inRange:s.color.getColorMapper(),outOfRange:o.color.getColorMapper()},E);var T=new Ka({style:{width:g,height:v,x:d,y:f,image:u.canvas},silent:!0});this.group.add(T)},e.type="heatmap",e})(mr),s9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getInitialData=function(t,r){return lp(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=x2.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},e.type="series.heatmap",e.dependencies=["grid","geo","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:ve.color.primary}}},e})(Cr);function o9e(n){n.registerChartView(a9e),n.registerSeriesModel(s9e)}var l9e=["itemStyle","borderWidth"],Pte=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],w5=new sp,u9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group,s=t.getData(),o=this._data,l=t.coordinateSystem,u=l.getBaseAxis(),c=u.isHorizontal(),h=l.master.getRect(),d={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:t,coordSys:l,coordSysExtent:[[h.x,h.x+h.width],[h.y,h.y+h.height]],isHorizontal:c,valueDim:Pte[+c],categoryDim:Pte[1-+c]};s.diff(o).add(function(p){if(s.hasValue(p)){var m=Rte(s,p),g=Lte(s,p,m,d),v=Nte(s,d,g);s.setItemGraphicEl(p,v),a.add(v),Ote(v,d,g)}}).update(function(p,m){var g=o.getItemGraphicEl(m);if(!s.hasValue(p)){a.remove(g);return}var v=Rte(s,p),b=Lte(s,p,v,d),S=ege(s,b);g&&S!==g.__pictorialShapeStr&&(a.remove(g),s.setItemGraphicEl(p,null),g=null),g?g9e(g,d,b):g=Nte(s,d,b,!0),s.setItemGraphicEl(p,g),g.__pictorialSymbolMeta=b,a.add(g),Ote(g,d,b)}).remove(function(p){var m=o.getItemGraphicEl(p);m&&kte(o,p,m.__pictorialSymbolMeta.animationModel,m)}).execute();var f=t.get("clip",!0)?A2(t.coordinateSystem,!1,t):null;return f?a.setClipPath(f):a.removeClipPath(),this._data=s,this.group},e.prototype.remove=function(t,r){var i=this.group,a=this._data;t.get("animation")?a&&a.eachItemGraphicEl(function(s){kte(a,Ft(s).dataIndex,t,s)}):i.removeAll()},e.type="pictorialBar",e})(mr);function Lte(n,e,t,r){var i=n.getItemLayout(e),a=t.get("symbolRepeat"),s=t.get("symbolClip"),o=t.get("symbolPosition")||"start",l=t.get("symbolRotate"),u=(l||0)*Math.PI/180||0,c=t.get("symbolPatternSize")||2,h=t.isAnimationEnabled(),d={dataIndex:e,layout:i,itemModel:t,symbolType:n.getItemVisual(e,"symbol")||"circle",style:n.getItemVisual(e,"style"),symbolClip:s,symbolRepeat:a,symbolRepeatDirection:t.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:u,animationModel:h?t:null,hoverScale:h&&t.get(["emphasis","scale"]),z2:t.getShallow("z",!0)||0};c9e(t,a,i,r,d),h9e(n,e,i,a,s,d.boundingLength,d.pxSign,c,r,d),d9e(t,d.symbolScale,u,r,d);var f=d.symbolSize,p=lx(t.get("symbolOffset"),f);return f9e(t,f,i,a,s,p,o,d.valueLineWidth,d.boundingLength,d.repeatCutLength,r,d),d}function c9e(n,e,t,r,i){var a=r.valueDim,s=n.get("symbolBoundingData"),o=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=o.toGlobalCoord(o.dataToCoord(0)),u=1-+(t[a.wh]<=0),c;if(Be(s)){var h=[T5(o,s[0])-l,T5(o,s[1])-l];h[1]<h[0]&&h.reverse(),c=h[u]}else s!=null?c=T5(o,s)-l:e?c=r.coordSysExtent[a.index][u]-l:c=t[a.wh];i.boundingLength=c,e&&(i.repeatCutLength=t[a.wh]);var d=a.xy==="x",f=o.inverse;i.pxSign=d&&!f||!d&&f?c>=0?1:-1:c>0?1:-1}function T5(n,e){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(e)))}function h9e(n,e,t,r,i,a,s,o,l,u){var c=l.valueDim,h=l.categoryDim,d=Math.abs(t[h.wh]),f=n.getItemVisual(e,"symbolSize"),p;Be(f)?p=f.slice():f==null?p=["100%","100%"]:p=[f,f],p[h.index]=Xe(p[h.index],d),p[c.index]=Xe(p[c.index],r?d:Math.abs(a)),u.symbolSize=p;var m=u.symbolScale=[p[0]/o,p[1]/o];m[c.index]*=(l.isHorizontal?-1:1)*s}function d9e(n,e,t,r,i){var a=n.get(l9e)||0;a&&(w5.attr({scaleX:e[0],scaleY:e[1],rotation:t}),w5.updateTransform(),a/=w5.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a||0}function f9e(n,e,t,r,i,a,s,o,l,u,c,h){var d=c.categoryDim,f=c.valueDim,p=h.pxSign,m=Math.max(e[f.index]+o,0),g=m;if(r){var v=Math.abs(l),b=fs(n.get("symbolMargin"),"15%")+"",S=!1;b.lastIndexOf("!")===b.length-1&&(S=!0,b=b.slice(0,b.length-1));var w=Xe(b,e[f.index]),E=Math.max(m+w*2,0),T=S?0:w*2,M=Pce(r),P=M?r:Bte((v+T)/E),I=v-P*m;w=I/2/(S?P:Math.max(P-1,1)),E=m+w*2,T=S?0:w*2,!M&&r!=="fixed"&&(P=u?Bte((Math.abs(u)+T)/E):0),g=P*E-T,h.repeatTimes=P,h.symbolMargin=w}var D=p*(g/2),R=h.pathPosition=[];R[d.index]=t[d.wh]/2,R[f.index]=s==="start"?D:s==="end"?l-D:l/2,a&&(R[0]+=a[0],R[1]+=a[1]);var B=h.bundlePosition=[];B[d.index]=t[d.xy],B[f.index]=t[f.xy];var k=h.barRectShape=Pe({},t);k[f.wh]=p*Math.max(Math.abs(t[f.wh]),Math.abs(R[f.index]+D)),k[d.wh]=t[d.wh];var V=h.clipShape={};V[d.xy]=-t[d.xy],V[d.wh]=c.ecSize[d.wh],V[f.xy]=0,V[f.wh]=t[f.wh]}function qme(n){var e=n.symbolPatternSize,t=Ki(n.symbolType,-e/2,-e/2,e,e);return t.attr({culling:!0}),t.type!=="image"&&t.setStyle({strokeNoScale:!0}),t}function Kme(n,e,t,r){var i=n.__pictorialBundle,a=t.symbolSize,s=t.valueLineWidth,o=t.pathPosition,l=e.valueDim,u=t.repeatTimes||0,c=0,h=a[e.valueDim.index]+s+t.symbolMargin*2;for(D7(n,function(m){m.__pictorialAnimationIndex=c,m.__pictorialRepeatTimes=u,c<u?bb(m,null,p(c),t,r):bb(m,null,{scaleX:0,scaleY:0},t,r,function(){i.remove(m)}),c++});c<u;c++){var d=qme(t);d.__pictorialAnimationIndex=c,d.__pictorialRepeatTimes=u,i.add(d);var f=p(c);bb(d,{x:f.x,y:f.y,scaleX:0,scaleY:0},{scaleX:f.scaleX,scaleY:f.scaleY,rotation:f.rotation},t,r)}function p(m){var g=o.slice(),v=t.pxSign,b=m;return(t.symbolRepeatDirection==="start"?v>0:v<0)&&(b=u-1-m),g[l.index]=h*(b-u/2+.5)+o[l.index],{x:g[0],y:g[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation}}}function Zme(n,e,t,r){var i=n.__pictorialBundle,a=n.__pictorialMainPath;a?bb(a,null,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:t.symbolScale[0],scaleY:t.symbolScale[1],rotation:t.rotation},t,r):(a=n.__pictorialMainPath=qme(t),i.add(a),bb(a,{x:t.pathPosition[0],y:t.pathPosition[1],scaleX:0,scaleY:0,rotation:t.rotation},{scaleX:t.symbolScale[0],scaleY:t.symbolScale[1]},t,r))}function Qme(n,e,t){var r=Pe({},e.barRectShape),i=n.__pictorialBarRect;i?bb(i,null,{shape:r},e,t):(i=n.__pictorialBarRect=new fn({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),i.disableMorphing=!0,n.add(i))}function Jme(n,e,t,r){if(t.symbolClip){var i=n.__pictorialClipPath,a=Pe({},t.clipShape),s=e.valueDim,o=t.animationModel,l=t.dataIndex;if(i)Vn(i,{shape:a},o,l);else{a[s.wh]=0,i=new fn({shape:a}),n.__pictorialBundle.setClipPath(i),n.__pictorialClipPath=i;var u={};u[s.wh]=t.clipShape[s.wh],ax[r?"updateProps":"initProps"](i,{shape:u},o,l)}}}function Rte(n,e){var t=n.getItemModel(e);return t.getAnimationDelayParams=p9e,t.isAnimationEnabled=m9e,t}function p9e(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function m9e(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Nte(n,e,t,r){var i=new wt,a=new wt;return i.add(a),i.__pictorialBundle=a,a.x=t.bundlePosition[0],a.y=t.bundlePosition[1],t.symbolRepeat?Kme(i,e,t):Zme(i,e,t),Qme(i,t,r),Jme(i,e,t,r),i.__pictorialShapeStr=ege(n,t),i.__pictorialSymbolMeta=t,i}function g9e(n,e,t){var r=t.animationModel,i=t.dataIndex,a=n.__pictorialBundle;Vn(a,{x:t.bundlePosition[0],y:t.bundlePosition[1]},r,i),t.symbolRepeat?Kme(n,e,t,!0):Zme(n,e,t,!0),Qme(n,t,!0),Jme(n,e,t,!0)}function kte(n,e,t,r){var i=r.__pictorialBarRect;i&&i.removeTextContent();var a=[];D7(r,function(s){a.push(s)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(t=null),W(a,function(s){bg(s,{scaleX:0,scaleY:0},t,e,function(){r.parent&&r.parent.remove(r)})}),n.setItemGraphicEl(e,null)}function ege(n,e){return[n.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function D7(n,e,t){W(n.__pictorialBundle.children(),function(r){r!==n.__pictorialBarRect&&e.call(t,r)})}function bb(n,e,t,r,i,a){e&&n.attr(e),r.symbolClip&&!i?t&&n.attr(t):t&&ax[i?"updateProps":"initProps"](n,t,r.animationModel,r.dataIndex,a)}function Ote(n,e,t){var r=t.dataIndex,i=t.itemModel,a=i.getModel("emphasis"),s=a.getModel("itemStyle").getItemStyle(),o=i.getModel(["blur","itemStyle"]).getItemStyle(),l=i.getModel(["select","itemStyle"]).getItemStyle(),u=i.getShallow("cursor"),c=a.get("focus"),h=a.get("blurScope"),d=a.get("scale");D7(n,function(m){if(m instanceof Ka){var g=m.style;m.useStyle(Pe({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},t.style))}else m.useStyle(t.style);var v=m.ensureState("emphasis");v.style=s,d&&(v.scaleX=m.scaleX*1.1,v.scaleY=m.scaleY*1.1),m.ensureState("blur").style=o,m.ensureState("select").style=l,u&&(m.cursor=u),m.z2=t.z2});var f=e.valueDim.posDesc[+(t.boundingLength>0)],p=n.__pictorialBarRect;p.ignoreClip=!0,Aa(p,ca(i),{labelFetcher:e.seriesModel,labelDataIndex:r,defaultText:uS(e.seriesModel.getData(),r),inheritColor:t.style.fill,defaultOpacity:t.style.opacity,defaultOutsidePosition:f}),Yr(n,c,h,a.get("disabled"))}function Bte(n){var e=Math.round(n);return Math.abs(n-e)<1e-4?e:Math.ceil(n)}var v9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t.defaultSymbol="roundRect",t}return e.prototype.getInitialData=function(t){return t.stack=null,n.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=kg(LA.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:ve.color.primary}}}),e})(LA);function y9e(n){n.registerChartView(u9e),n.registerSeriesModel(v9e),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,Qt(_fe,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,bfe("pictorialBar"))}var x9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._layers=[],t}return e.prototype.render=function(t,r,i){var a=t.getData(),s=this,o=this.group,l=t.getLayerSeries(),u=a.getLayout("layoutInfo"),c=u.rect,h=u.boundaryGap;o.x=0,o.y=c.y+h[0];function d(g){return g.name}var f=new Kf(this._layersSeries||[],l,d,d),p=[];f.add(Qe(m,this,"add")).update(Qe(m,this,"update")).remove(Qe(m,this,"remove")).execute();function m(g,v,b){var S=s._layers;if(g==="remove"){o.remove(S[v]);return}for(var w=[],E=[],T,M=l[v].indices,P=0;P<M.length;P++){var I=a.getItemLayout(M[P]),D=I.x,R=I.y0,B=I.y;w.push(D,R),E.push(D,R+B),T=a.getItemVisual(M[P],"style")}var k,V=a.getItemLayout(M[0]),G=t.getModel("label"),F=G.get("margin"),X=t.getModel("emphasis");if(g==="add"){var j=p[v]=new wt;k=new hpe({shape:{points:w,stackedOnPoints:E,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),j.add(k),o.add(j),t.isAnimationEnabled()&&k.setClipPath(_9e(k.getBoundingRect(),t,function(){k.removeClipPath()}))}else{var j=S[b];k=j.childAt(0),o.add(j),p[v]=j,Vn(k,{shape:{points:w,stackedOnPoints:E}},t),ku(k)}Aa(k,ca(t),{labelDataIndex:M[P-1],defaultText:a.getName(M[P-1]),inheritColor:T.fill},{normal:{verticalAlign:"middle"}}),k.setTextConfig({position:null,local:!0});var Q=k.getTextContent();Q&&(Q.x=V.x-F,Q.y=V.y0+V.y/2),k.useStyle(T),a.setItemGraphicEl(v,k),ua(k,t),Yr(k,X.get("focus"),X.get("blurScope"),X.get("disabled"))}this._layersSeries=l,this._layers=p},e.type="themeRiver",e})(mr);function _9e(n,e,t){var r=new fn({shape:{x:n.x-10,y:n.y-10,width:0,height:n.height+20}});return Vr(r,{shape:{x:n.x-50,width:n.width+100,height:n.height+20}},e,t),r}var E5=2,b9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new ZS(Qe(this.getData,this),Qe(this.getRawData,this))},e.prototype.fixData=function(t){var r=t.length,i={},a=gz(t,function(d){return i.hasOwnProperty(d[0]+"")||(i[d[0]+""]=-1),d[2]}),s=[];a.buckets.each(function(d,f){s.push({name:f,dataList:d})});for(var o=s.length,l=0;l<o;++l){for(var u=s[l].name,c=0;c<s[l].dataList.length;++c){var h=s[l].dataList[c][0]+"";i[h]=l}for(var h in i)i.hasOwnProperty(h)&&i[h]!==l&&(i[h]=l,t[r]=[h,0,u],r++)}return t},e.prototype.getInitialData=function(t,r){for(var i=this.getReferringComponents("singleAxis",fi).models[0],a=i.get("type"),s=er(t.data,function(p){return p[2]!==void 0}),o=this.fixData(s||[]),l=[],u=this.nameMap=ct(),c=0,h=0;h<o.length;++h)l.push(o[h][E5]),u.get(o[h][E5])||(u.set(o[h][E5],c),c++);var d=S2(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:fN(a)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new mo(d,this);return f.initData(o),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),r=t.count(),i=[],a=0;a<r;++a)i[a]=a;var s=t.mapDimension("single"),o=gz(i,function(u){return t.get("name",u)}),l=[];return o.buckets.each(function(u,c){u.sort(function(h,d){return t.get(s,h)-t.get(s,d)}),l.push({name:c,indices:u})}),l},e.prototype.getAxisTooltipData=function(t,r,i){Be(t)||(t=t?[t]:[]);for(var a=this.getData(),s=this.getLayerSeries(),o=[],l=s.length,u,c=0;c<l;++c){for(var h=Number.MAX_VALUE,d=-1,f=s[c].indices.length,p=0;p<f;++p){var m=a.get(t[0],s[c].indices[p]),g=Math.abs(m-r);g<=h&&(u=m,h=g,d=s[c].indices[p])}o.push(d)}return{dataIndices:o,nestestValue:u}},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),s=a.getName(t),o=a.get(a.mapDimension("value"),t);return qi("nameValue",{name:s,value:o})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e})(Cr);function S9e(n,e){n.eachSeriesByType("themeRiver",function(t){var r=t.getData(),i=t.coordinateSystem,a={},s=i.getRect();a.rect=s;var o=t.get("boundaryGap"),l=i.getAxis();if(a.boundaryGap=o,l.orient==="horizontal"){o[0]=Xe(o[0],s.height),o[1]=Xe(o[1],s.height);var u=s.height-o[0]-o[1];Fte(r,t,u)}else{o[0]=Xe(o[0],s.width),o[1]=Xe(o[1],s.width);var c=s.width-o[0]-o[1];Fte(r,t,c)}r.setLayout("layoutInfo",a)})}function Fte(n,e,t){if(n.count())for(var r=e.coordinateSystem,i=e.getLayerSeries(),a=n.mapDimension("single"),s=n.mapDimension("value"),o=Ue(i,function(g){return Ue(g.indices,function(v){var b=r.dataToPoint(n.get(a,v));return b[1]=n.get(s,v),b})}),l=w9e(o),u=l.y0,c=t/l.max,h=i.length,d=i[0].indices.length,f,p=0;p<d;++p){f=u[p]*c,n.setItemLayout(i[0].indices[p],{layerIndex:0,x:o[0][p][0],y0:f,y:o[0][p][1]*c});for(var m=1;m<h;++m)f+=o[m-1][p][1]*c,n.setItemLayout(i[m].indices[p],{layerIndex:m,x:o[m][p][0],y0:f,y:o[m][p][1]*c})}}function w9e(n){for(var e=n.length,t=n[0].length,r=[],i=[],a=0,s=0;s<t;++s){for(var o=0,l=0;l<e;++l)o+=n[l][s][1];o>a&&(a=o),r.push(o)}for(var u=0;u<t;++u)i[u]=(a-r[u])/2;a=0;for(var c=0;c<t;++c){var h=r[c]+i[c];h>a&&(a=h)}return{y0:i,max:a}}function T9e(n){n.registerChartView(x9e),n.registerSeriesModel(b9e),n.registerLayout(S9e),n.registerProcessor(qS("themeRiver"))}var E9e=2,A9e=4,Ute=(function(n){be(e,n);function e(t,r,i,a){var s=n.call(this)||this;s.z2=E9e,s.textConfig={inside:!0},Ft(s).seriesIndex=r.seriesIndex;var o=new On({z2:A9e,silent:t.getModel().get(["label","silent"])});return s.setTextContent(o),s.updateData(!0,t,r,i,a),s}return e.prototype.updateData=function(t,r,i,a,s){this.node=r,r.piece=this,i=i||this._seriesModel,a=a||this._ecModel;var o=this;Ft(o).dataIndex=r.dataIndex;var l=r.getModel(),u=l.getModel("emphasis"),c=r.getLayout(),h=Pe({},c);h.label=null;var d=r.getVisual("style");d.lineJoin="bevel";var f=r.getVisual("decal");f&&(d.decal=aS(f,s));var p=Hh(l.getModel("itemStyle"),h,!0);Pe(h,p),W(yo,function(b){var S=o.ensureState(b),w=l.getModel([b,"itemStyle"]);S.style=w.getItemStyle();var E=Hh(w,h);E&&(S.shape=E)}),t?(o.setShape(h),o.shape.r=c.r0,Vr(o,{shape:{r:c.r}},i,r.dataIndex)):(Vn(o,{shape:h},i),ku(o)),o.useStyle(d),this._updateLabel(i);var m=l.getShallow("cursor");m&&o.attr("cursor",m),this._seriesModel=i||this._seriesModel,this._ecModel=a||this._ecModel;var g=u.get("focus"),v=g==="relative"?dA(r.getAncestorsIndices(),r.getDescendantIndices()):g==="ancestor"?r.getAncestorsIndices():g==="descendant"?r.getDescendantIndices():g;Yr(this,v,u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t){var r=this,i=this.node.getModel(),a=i.getModel("label"),s=this.node.getLayout(),o=s.endAngle-s.startAngle,l=(s.startAngle+s.endAngle)/2,u=Math.cos(l),c=Math.sin(l),h=this,d=h.getTextContent(),f=this.node.dataIndex,p=a.get("minAngle")/180*Math.PI,m=a.get("show")&&!(p!=null&&Math.abs(o)<p);d.ignore=!m,W(yA,function(v){var b=v==="normal"?i.getModel("label"):i.getModel([v,"label"]),S=v==="normal",w=S?d:d.ensureState(v),E=t.getFormattedLabel(f,v);S&&(E=E||r.node.name),w.style=Er(b,{},null,v!=="normal",!0),E&&(w.style.text=E);var T=b.get("show");T!=null&&!S&&(w.ignore=!T);var M=g(b,"position"),P=S?h:h.states[v],I=P.style.fill;P.textConfig={outsideFill:b.get("color")==="inherit"?I:null,inside:M!=="outside"};var D,R=g(b,"distance")||0,B=g(b,"align"),k=g(b,"rotate"),V=Math.PI*.5,G=Math.PI*1.5,F=Dl(k==="tangential"?Math.PI/2-l:l),X=F>V&&!gA(F-V)&&F<G;M==="outside"?(D=s.r+R,B=X?"right":"left"):!B||B==="center"?(o===2*Math.PI&&s.r0===0?D=0:D=(s.r+s.r0)/2,B="center"):B==="left"?(D=s.r0+R,B=X?"right":"left"):B==="right"&&(D=s.r-R,B=X?"left":"right"),w.style.align=B,w.style.verticalAlign=g(b,"verticalAlign")||"middle",w.x=D*u+s.cx,w.y=D*c+s.cy;var j=0;k==="radial"?j=Dl(-l)+(X?Math.PI:0):k==="tangential"?j=Dl(Math.PI/2-l)+(X?Math.PI:0):Ln(k)&&(j=k*Math.PI/180),w.rotation=Dl(j)});function g(v,b){var S=v.get(b);return S??a.get(b)}d.dirtyStyle()},e})(zs),L8="sunburstRootToNode",zte="sunburstHighlight",C9e="sunburstUnhighlight";function M9e(n){n.registerAction({type:L8,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},r);function r(i,a){var s=NA(e,[L8],i);if(s){var o=i.getViewRoot();o&&(e.direction=d7(o,s.node)?"rollUp":"drillDown"),i.resetViewRoot(s.node)}}}),n.registerAction({type:zte,update:"none"},function(e,t,r){e=Pe({},e),t.eachComponent({mainType:"series",subType:"sunburst",query:e},i);function i(a){var s=NA(e,[zte],a);s&&(e.dataIndex=s.node.dataIndex)}r.dispatchAction(Pe(e,{type:"highlight"}))}),n.registerAction({type:C9e,update:"updateView"},function(e,t,r){e=Pe({},e),r.dispatchAction(Pe(e,{type:"downplay"}))})}var D9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){var s=this;this.seriesModel=t,this.api=i,this.ecModel=r;var o=t.getData(),l=o.tree.root,u=t.getViewRoot(),c=this.group,h=t.get("renderLabelForZeroData"),d=[];u.eachNode(function(b){d.push(b)});var f=this._oldChildren||[];p(d,f),v(l,u),this._initEvents(),this._oldChildren=d;function p(b,S){if(b.length===0&&S.length===0)return;new Kf(S,b,w,w).add(E).update(E).remove(Qt(E,null)).execute();function w(T){return T.getId()}function E(T,M){var P=T==null?null:b[T],I=M==null?null:S[M];m(P,I)}}function m(b,S){if(!h&&b&&!b.getValue()&&(b=null),b!==l&&S!==l){if(S&&S.piece)b?(S.piece.updateData(!1,b,t,r,i),o.setItemGraphicEl(b.dataIndex,S.piece)):g(S);else if(b){var w=new Ute(b,t,r,i);c.add(w),o.setItemGraphicEl(b.dataIndex,w)}}}function g(b){b&&b.piece&&(c.remove(b.piece),b.piece=null)}function v(b,S){S.depth>0?(s.virtualPiece?s.virtualPiece.updateData(!1,b,t,r,i):(s.virtualPiece=new Ute(b,t,r,i),c.add(s.virtualPiece)),S.piece.off("click"),s.virtualPiece.on("click",function(w){s._rootToNode(S.parentNode)})):s.virtualPiece&&(c.remove(s.virtualPiece),s.virtualPiece=null)}},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",function(r){var i=!1,a=t.seriesModel.getViewRoot();a.eachNode(function(s){if(!i&&s.piece&&s.piece===r.target){var o=s.getModel().get("nodeClick");if(o==="rootToNode")t._rootToNode(s);else if(o==="link"){var l=s.getModel(),u=l.get("link");if(u){var c=l.get("target",!0)||"_blank";aN(u,c)}}i=!0}})})},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:L8,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,r){var i=r.getData(),a=i.getItemLayout(0);if(a){var s=t[0]-a.cx,o=t[1]-a.cy,l=Math.sqrt(s*s+o*o);return l<=a.r&&l>=a.r0}},e.type="sunburst",e})(mr),I9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.ignoreStyleOnData=!0,t}return e.prototype.getInitialData=function(t,r){var i={name:t.name,children:t.data};tge(i);var a=this._levelModels=Ue(t.levels||[],function(l){return new Sn(l,this,r)},this),s=h7.createTree(i,this,o);function o(l){l.wrapMethod("getItemModel",function(u,c){var h=s.getNodeByDataIndex(c),d=a[h.depth];return d&&(u.parentModel=d),u})}return s.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(t){var r=n.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(t);return r.treePathInfo=D3(i,this),r},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var r=this.getRawData().tree.root;(!t||t!==r&&!r.contains(t))&&(this._viewRoot=r)},e.prototype.enableAriaDecal=function(){ame(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e})(Cr);function tge(n){var e=0;W(n.children,function(r){tge(r);var i=r.value;Be(i)&&(i=i[0]),e+=i});var t=n.value;Be(t)&&(t=t[0]),(t==null||isNaN(t))&&(t=e),t<0&&(t=0),Be(n.value)?n.value[0]=t:n.value=t}var Vte=Math.PI/180;function P9e(n,e,t){e.eachSeriesByType(n,function(r){var i=r.get("center"),a=r.get("radius");Be(a)||(a=[0,a]),Be(i)||(i=[i,i]);var s=t.getWidth(),o=t.getHeight(),l=Math.min(s,o),u=Xe(i[0],s),c=Xe(i[1],o),h=Xe(a[0],l/2),d=Xe(a[1],l/2),f=-r.get("startAngle")*Vte,p=r.get("minAngle")*Vte,m=r.getData().tree.root,g=r.getViewRoot(),v=g.depth,b=r.get("sort");b!=null&&nge(g,b);var S=0;W(g.children,function(F){!isNaN(F.getValue())&&S++});var w=g.getValue(),E=Math.PI/(w||S)*2,T=g.depth>0,M=g.height-(T?-1:1),P=(d-h)/(M||1),I=r.get("clockwise"),D=r.get("stillShowZeroSum"),R=I?1:-1,B=function(F,X){if(F){var j=X;if(F!==m){var Q=F.getValue(),H=w===0&&D?E:Q*E;H<p&&(H=p),j=X+R*H;var K=F.depth-v-(T?-1:1),te=h+P*K,Y=h+P*(K+1),de=r.getLevelModel(F);if(de){var ge=de.get("r0",!0),se=de.get("r",!0),he=de.get("radius",!0);he!=null&&(ge=he[0],se=he[1]),ge!=null&&(te=Xe(ge,l/2)),se!=null&&(Y=Xe(se,l/2))}F.setLayout({angle:H,startAngle:X,endAngle:j,clockwise:I,cx:u,cy:c,r0:te,r:Y})}if(F.children&&F.children.length){var fe=0;W(F.children,function(Ee){fe+=B(Ee,X+fe)})}return j-X}};if(T){var k=h,V=h+P,G=Math.PI*2;m.setLayout({angle:G,startAngle:f,endAngle:f+G,clockwise:I,cx:u,cy:c,r0:k,r:V})}B(g,f)})}function nge(n,e){var t=n.children||[];n.children=L9e(t,e),t.length&&W(n.children,function(r){nge(r,e)})}function L9e(n,e){if(St(e)){var t=Ue(n,function(i,a){var s=i.getValue();return{params:{depth:i.depth,height:i.height,dataIndex:i.dataIndex,getValue:function(){return s}},index:a}});return t.sort(function(i,a){return e(i.params,a.params)}),Ue(t,function(i){return n[i.index]})}else{var r=e==="asc";return n.sort(function(i,a){var s=(i.getValue()-a.getValue())*(r?1:-1);return s===0?(i.dataIndex-a.dataIndex)*(r?-1:1):s})}}function R9e(n){var e={};function t(r,i,a){if(r.depth===0)return ve.color.neutral50;for(var s=r;s&&s.depth>1;)s=s.parentNode;var o=i.getColorFromPalette(s.name||s.dataIndex+"",e);return r.depth>1&&Ke(o)&&(o=iz(o,(r.depth-1)/(a-1)*.5)),o}n.eachSeriesByType("sunburst",function(r){var i=r.getData(),a=i.tree;a.eachNode(function(s){var o=s.getModel(),l=o.getModel("itemStyle").getItemStyle();l.fill||(l.fill=t(s,r,a.root.height));var u=i.ensureUniqueItemVisual(s.dataIndex,"style");Pe(u,l)})})}function N9e(n){n.registerChartView(D9e),n.registerSeriesModel(I9e),n.registerLayout(Qt(P9e,"sunburst")),n.registerProcessor(Qt(qS,"sunburst")),n.registerVisual(R9e),M9e(n)}var Hte={color:"fill",borderColor:"stroke"},k9e={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},kf=mn(),O9e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,r){return lp(null,this)},e.prototype.getDataParams=function(t,r,i){var a=n.prototype.getDataParams.call(this,t,r);return i&&(a.info=kf(i).info),a},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar","matrix"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e})(Cr);function B9e(n,e){return e=e||[0,0],Ue(["x","y"],function(t,r){var i=this.getAxis(t),a=e[r],s=n[r]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(a-s)-i.dataToCoord(a+s))},this)}function F9e(n){var e=n.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:Qe(B9e,n)}}}function U9e(n,e){return e=e||[0,0],Ue([0,1],function(t){var r=e[t],i=n[t]/2,a=[],s=[];return a[t]=r-i,s[t]=r+i,a[1-t]=s[1-t]=e[1-t],Math.abs(this.dataToPoint(a)[t]-this.dataToPoint(s)[t])},this)}function z9e(n){var e=n.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:n.getZoom()},api:{coord:function(t){return n.dataToPoint(t)},size:Qe(U9e,n)}}}function V9e(n,e){var t=this.getAxis(),r=e instanceof Array?e[0]:e,i=(n instanceof Array?n[0]:n)/2;return t.type==="category"?t.getBandWidth():Math.abs(t.dataToCoord(r-i)-t.dataToCoord(r+i))}function H9e(n){var e=n.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t){return n.dataToPoint(t)},size:Qe(V9e,n)}}}function G9e(n,e){return e=e||[0,0],Ue(["Radius","Angle"],function(t,r){var i="get"+t+"Axis",a=this[i](),s=e[r],o=n[r]/2,l=a.type==="category"?a.getBandWidth():Math.abs(a.dataToCoord(s-o)-a.dataToCoord(s+o));return t==="Angle"&&(l=l*Math.PI/180),l},this)}function j9e(n){var e=n.getRadiusAxis(),t=n.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:r[1],r0:r[0]},api:{coord:function(i){var a=e.dataToRadius(i[0]),s=t.dataToAngle(i[1]),o=n.coordToPoint([a,s]);return o.push(a,s*Math.PI/180),o},size:Qe(G9e,n)}}}function W9e(n){var e=n.getRect(),t=n.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(r,i){return n.dataToPoint(r,i)},layout:function(r,i){return n.dataToLayout(r,i)}}}}function X9e(n){var e=n.getRect();return{coordSys:{type:"matrix",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(t,r){return n.dataToPoint(t,r)},layout:function(t,r){return n.dataToLayout(t,r)}}}}function rge(n,e,t,r){return n&&(n.legacy||n.legacy!==!1&&!t&&!r&&e!=="tspan"&&(e==="text"||it(n,"text")))}function ige(n,e,t){var r=n,i,a,s;if(e==="text")s=r;else{s={},it(r,"text")&&(s.text=r.text),it(r,"rich")&&(s.rich=r.rich),it(r,"textFill")&&(s.fill=r.textFill),it(r,"textStroke")&&(s.stroke=r.textStroke),it(r,"fontFamily")&&(s.fontFamily=r.fontFamily),it(r,"fontSize")&&(s.fontSize=r.fontSize),it(r,"fontStyle")&&(s.fontStyle=r.fontStyle),it(r,"fontWeight")&&(s.fontWeight=r.fontWeight),a={type:"text",style:s,silent:!0},i={};var o=it(r,"textPosition");t?i.position=o?r.textPosition:"inside":o&&(i.position=r.textPosition),it(r,"textPosition")&&(i.position=r.textPosition),it(r,"textOffset")&&(i.offset=r.textOffset),it(r,"textRotation")&&(i.rotation=r.textRotation),it(r,"textDistance")&&(i.distance=r.textDistance)}return Gte(s,n),W(s.rich,function(l){Gte(l,l)}),{textConfig:i,textContent:a}}function Gte(n,e){e&&(e.font=e.textFont||e.font,it(e,"textStrokeWidth")&&(n.lineWidth=e.textStrokeWidth),it(e,"textAlign")&&(n.align=e.textAlign),it(e,"textVerticalAlign")&&(n.verticalAlign=e.textVerticalAlign),it(e,"textLineHeight")&&(n.lineHeight=e.textLineHeight),it(e,"textWidth")&&(n.width=e.textWidth),it(e,"textHeight")&&(n.height=e.textHeight),it(e,"textBackgroundColor")&&(n.backgroundColor=e.textBackgroundColor),it(e,"textPadding")&&(n.padding=e.textPadding),it(e,"textBorderColor")&&(n.borderColor=e.textBorderColor),it(e,"textBorderWidth")&&(n.borderWidth=e.textBorderWidth),it(e,"textBorderRadius")&&(n.borderRadius=e.textBorderRadius),it(e,"textBoxShadowColor")&&(n.shadowColor=e.textBoxShadowColor),it(e,"textBoxShadowBlur")&&(n.shadowBlur=e.textBoxShadowBlur),it(e,"textBoxShadowOffsetX")&&(n.shadowOffsetX=e.textBoxShadowOffsetX),it(e,"textBoxShadowOffsetY")&&(n.shadowOffsetY=e.textBoxShadowOffsetY))}function jte(n,e,t){var r=n;r.textPosition=r.textPosition||t.position||"inside",t.offset!=null&&(r.textOffset=t.offset),t.rotation!=null&&(r.textRotation=t.rotation),t.distance!=null&&(r.textDistance=t.distance);var i=r.textPosition.indexOf("inside")>=0,a=n.fill||ve.color.neutral99;Wte(r,e);var s=r.textFill==null;return i?s&&(r.textFill=t.insideFill||ve.color.neutral00,!r.textStroke&&t.insideStroke&&(r.textStroke=t.insideStroke),!r.textStroke&&(r.textStroke=a),r.textStrokeWidth==null&&(r.textStrokeWidth=2)):(s&&(r.textFill=n.fill||t.outsideFill||ve.color.neutral00),!r.textStroke&&t.outsideStroke&&(r.textStroke=t.outsideStroke)),r.text=e.text,r.rich=e.rich,W(e.rich,function(o){Wte(o,o)}),r}function Wte(n,e){e&&(it(e,"fill")&&(n.textFill=e.fill),it(e,"stroke")&&(n.textStroke=e.fill),it(e,"lineWidth")&&(n.textStrokeWidth=e.lineWidth),it(e,"font")&&(n.font=e.font),it(e,"fontStyle")&&(n.fontStyle=e.fontStyle),it(e,"fontWeight")&&(n.fontWeight=e.fontWeight),it(e,"fontSize")&&(n.fontSize=e.fontSize),it(e,"fontFamily")&&(n.fontFamily=e.fontFamily),it(e,"align")&&(n.textAlign=e.align),it(e,"verticalAlign")&&(n.textVerticalAlign=e.verticalAlign),it(e,"lineHeight")&&(n.textLineHeight=e.lineHeight),it(e,"width")&&(n.textWidth=e.width),it(e,"height")&&(n.textHeight=e.height),it(e,"backgroundColor")&&(n.textBackgroundColor=e.backgroundColor),it(e,"padding")&&(n.textPadding=e.padding),it(e,"borderColor")&&(n.textBorderColor=e.borderColor),it(e,"borderWidth")&&(n.textBorderWidth=e.borderWidth),it(e,"borderRadius")&&(n.textBorderRadius=e.borderRadius),it(e,"shadowColor")&&(n.textBoxShadowColor=e.shadowColor),it(e,"shadowBlur")&&(n.textBoxShadowBlur=e.shadowBlur),it(e,"shadowOffsetX")&&(n.textBoxShadowOffsetX=e.shadowOffsetX),it(e,"shadowOffsetY")&&(n.textBoxShadowOffsetY=e.shadowOffsetY),it(e,"textShadowColor")&&(n.textShadowColor=e.textShadowColor),it(e,"textShadowBlur")&&(n.textShadowBlur=e.textShadowBlur),it(e,"textShadowOffsetX")&&(n.textShadowOffsetX=e.textShadowOffsetX),it(e,"textShadowOffsetY")&&(n.textShadowOffsetY=e.textShadowOffsetY))}var age={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Xte=An(age);ed(nd,function(n,e){return n[e]=1,n},{});nd.join(", ");var PN=["","style","shape","extra"],fS=mn();function I7(n,e,t,r,i){var a=n+"Animation",s=HS(n,r,i)||{},o=fS(e).userDuring;return s.duration>0&&(s.during=o?Qe(Z9e,{el:e,userDuring:o}):null,s.setToFinal=!0,s.scope=n),Pe(s,t[a]),s}function NL(n,e,t,r){r=r||{};var i=r.dataIndex,a=r.isInit,s=r.clearStyle,o=t.isAnimationEnabled(),l=fS(n),u=e.style;l.userDuring=e.during;var c={},h={};if(J9e(n,e,h),n.type==="compound")for(var d=n.shape.paths,f=e.shape.paths,p=0;p<f.length;p++){var m=f[p];A5("shape",m,d[p])}else A5("shape",e,h),A5("extra",e,h);if(!a&&o&&(Q9e(n,e,c),$te("shape",n,e,c),$te("extra",n,e,c),eGe(n,e,u,c)),h.style=u,$9e(n,h,s),q9e(n,e),o)if(a){var g={};W(PN,function(b){var S=b?e[b]:e;S&&S.enterFrom&&(b&&(g[b]=g[b]||{}),Pe(b?g[b]:g,S.enterFrom))});var v=I7("enter",n,e,t,i);v.duration>0&&n.animateFrom(g,v)}else Y9e(n,e,i||0,t,c);sge(n,e),u?n.dirty():n.markRedraw()}function sge(n,e){for(var t=fS(n).leaveToProps,r=0;r<PN.length;r++){var i=PN[r],a=i?e[i]:e;a&&a.leaveTo&&(t||(t=fS(n).leaveToProps={}),i&&(t[i]=t[i]||{}),Pe(i?t[i]:t,a.leaveTo))}}function L3(n,e,t,r){if(n){var i=n.parent,a=fS(n).leaveToProps;if(a){var s=I7("update",n,e,t,0);s.done=function(){i&&i.remove(n)},n.animateTo(a,s)}else i&&i.remove(n)}}function Oy(n){return n==="all"}function $9e(n,e,t){var r=e.style;if(!n.isGroup&&r){if(t){n.useStyle({});for(var i=n.animators,a=0;a<i.length;a++){var s=i[a];s.targetName==="style"&&s.changeTarget(n.style)}}n.setStyle(r)}e&&(e.style=null,e&&n.attr(e),e.style=r)}function Y9e(n,e,t,r,i){if(i){var a=I7("update",n,e,r,t);a.duration>0&&n.animateFrom(i,a)}}function q9e(n,e){it(e,"silent")&&(n.silent=e.silent),it(e,"ignore")&&(n.ignore=e.ignore),n instanceof Nu&&it(e,"invisible")&&(n.invisible=e.invisible),n instanceof vn&&it(e,"autoBatch")&&(n.autoBatch=e.autoBatch)}var ih={},K9e={setTransform:function(n,e){return ih.el[n]=e,this},getTransform:function(n){return ih.el[n]},setShape:function(n,e){var t=ih.el,r=t.shape||(t.shape={});return r[n]=e,t.dirtyShape&&t.dirtyShape(),this},getShape:function(n){var e=ih.el.shape;if(e)return e[n]},setStyle:function(n,e){var t=ih.el,r=t.style;return r&&(r[n]=e,t.dirtyStyle&&t.dirtyStyle()),this},getStyle:function(n){var e=ih.el.style;if(e)return e[n]},setExtra:function(n,e){var t=ih.el.extra||(ih.el.extra={});return t[n]=e,this},getExtra:function(n){var e=ih.el.extra;if(e)return e[n]}};function Z9e(){var n=this,e=n.el;if(e){var t=fS(e).userDuring,r=n.userDuring;if(t!==r){n.el=n.userDuring=null;return}ih.el=e,r(K9e)}}function $te(n,e,t,r){var i=t[n];if(i){var a=e[n],s;if(a){var o=t.transition,l=i.transition;if(l)if(!s&&(s=r[n]={}),Oy(l))Pe(s,a);else for(var u=br(l),c=0;c<u.length;c++){var h=u[c],d=a[h];s[h]=d}else if(Oy(o)||Jt(o,n)>=0){!s&&(s=r[n]={});for(var f=An(a),c=0;c<f.length;c++){var h=f[c],d=a[h];tGe(i[h],d)&&(s[h]=d)}}}}}function A5(n,e,t){var r=e[n];if(r)for(var i=t[n]={},a=An(r),s=0;s<a.length;s++){var o=a[s];i[o]=FE(r[o])}}function Q9e(n,e,t){for(var r=e.transition,i=Oy(r)?nd:br(r||[]),a=0;a<i.length;a++){var s=i[a];if(!(s==="style"||s==="shape"||s==="extra")){var o=n[s];t[s]=o}}}function J9e(n,e,t){for(var r=0;r<Xte.length;r++){var i=Xte[r],a=age[i],s=e[i];s&&(t[a[0]]=s[0],t[a[1]]=s[1])}for(var r=0;r<nd.length;r++){var o=nd[r];e[o]!=null&&(t[o]=e[o])}}function eGe(n,e,t,r){if(t){var i=n.style,a;if(i){var s=t.transition,o=e.transition;if(s&&!Oy(s)){var l=br(s);!a&&(a=r.style={});for(var u=0;u<l.length;u++){var c=l[u],h=i[c];a[c]=h}}else if(n.getAnimationStyleProps&&(Oy(o)||Oy(s)||Jt(o,"style")>=0)){var d=n.getAnimationStyleProps(),f=d?d.style:null;if(f){!a&&(a=r.style={});for(var p=An(t),u=0;u<p.length;u++){var c=p[u];if(f[c]){var h=i[c];a[c]=h}}}}}}}function tGe(n,e){return Fs(n)?n!==e:n!=null&&isFinite(n)}var oge=mn(),nGe=["percent","easing","shape","style","extra"];function lge(n){n.stopAnimation("keyframe"),n.attr(oge(n))}function LN(n,e,t){if(!(!t.isAnimationEnabled()||!e)){if(Be(e)){W(e,function(o){LN(n,o,t)});return}var r=e.keyframes,i=e.duration;if(t&&i==null){var a=HS("enter",t,0);i=a&&a.duration}if(!(!r||!i)){var s=oge(n);W(PN,function(o){if(!(o&&!n[o])){var l;r.sort(function(u,c){return u.percent-c.percent}),W(r,function(u){var c=n.animators,h=o?u[o]:u;if(h){var d=An(h);if(o||(d=er(d,function(m){return Jt(nGe,m)<0})),!!d.length){l||(l=n.animate(o,e.loop,!0),l.scope="keyframe");for(var f=0;f<c.length;f++)c[f]!==l&&c[f].targetName===l.targetName&&c[f].stopTracks(d);o&&(s[o]=s[o]||{});var p=o?s[o]:s;W(d,function(m){p[m]=((o?n[o]:n)||{})[m]}),l.whenWithKeys(i*u.percent,h,d,u.easing)}}}),l&&l.delay(e.delay||0).duration(i).start(e.easing)}})}}}var Of="emphasis",og="normal",P7="blur",L7="select",Ag=[og,Of,P7,L7],C5={normal:["itemStyle"],emphasis:[Of,"itemStyle"],blur:[P7,"itemStyle"],select:[L7,"itemStyle"]},M5={normal:["label"],emphasis:[Of,"label"],blur:[P7,"label"],select:[L7,"label"]},rGe=["x","y"],iGe="e\0\0",ql={normal:{},emphasis:{},blur:{},select:{}},aGe={cartesian2d:F9e,geo:z9e,single:H9e,polar:j9e,calendar:W9e,matrix:X9e};function R8(n){return n instanceof vn}function N8(n){return n instanceof Nu}function sGe(n,e){e.copyTransform(n),N8(e)&&N8(n)&&(e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e.invisible=n.invisible,e.ignore=n.ignore,R8(e)&&R8(n)&&e.setShape(n.shape))}var oGe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this._progressiveEls=null;var s=this._data,o=t.getData(),l=this.group,u=Yte(t,o,r,i);s||l.removeAll(),o.diff(s).add(function(h){D5(i,null,h,u(h,a),t,l,o)}).remove(function(h){var d=s.getItemGraphicEl(h);d&&L3(d,kf(d).option,t)}).update(function(h,d){var f=s.getItemGraphicEl(d);D5(i,f,h,u(h,a),t,l,o)}).execute();var c=t.get("clip",!0)?A2(t.coordinateSystem,!1,t):null;c?l.setClipPath(c):l.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(t,r,i){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,r,i,a,s){var o=r.getData(),l=Yte(r,o,i,a),u=this._progressiveEls=[];function c(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var h=t.start;h<t.end;h++){var d=D5(null,null,h,l(h,s),r,this.group,o);d&&(d.traverse(c),u.push(d))}},e.prototype.eachRendered=function(t){Ng(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,r,i,a){var s=r.element;if(s==null||i.name===s)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===s)return!0;return!1},e.type="custom",e})(mr);function R7(n){var e=n.type,t;if(e==="path"){var r=n.shape,i=r.width!=null&&r.height!=null?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=hge(r);t=_A(a,null,i,r.layout||"center"),kf(t).customPathData=a}else if(e==="image")t=new Ka({}),kf(t).customImagePath=n.style.image;else if(e==="text")t=new On({});else if(e==="group")t=new wt;else if(e==="compoundPath"){var r=n.shape;if(!r||!r.paths){var s="";Qn(s)}var o=Ue(r.paths,function(c){if(c.type==="path")return _A(c.shape.pathData,c,null);var h=nN(c.type);if(!h){var d="";Qn(d)}return new h});t=new d3({shape:{paths:o}})}else{var l=nN(e);if(!l){var s="";Qn(s)}t=new l}return kf(t).customGraphicType=e,t.name=n.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function N7(n,e,t,r,i,a,s){lge(e);var o=i&&i.normal.cfg;o&&e.setTextConfig(o),r&&r.transition==null&&(r.transition=rGe);var l=r&&r.style;if(l){if(e.type==="text"){var u=l;it(u,"textFill")&&(u.fill=u.textFill),it(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,h=R8(e)?l.decal:null;n&&h&&(h.dirty=!0,c=aS(h,n)),l.__decalPattern=c}if(N8(e)&&l){var c=l.__decalPattern;c&&(l.decal=c)}NL(e,r,a,{dataIndex:t,isInit:s,clearStyle:!0}),LN(e,r.keyframeAnimation,a)}function uge(n,e,t,r,i){var a=e.isGroup?null:e,s=i&&i[n].cfg;if(a){var o=a.ensureState(n);if(r===!1){var l=a.getState(n);l&&(l.style=null)}else o.style=r||null;s&&(o.textConfig=s),Hy(a)}}function lGe(n,e,t){if(!n.isGroup){var r=n,i=t.currentZ,a=t.currentZLevel;r.z=i,r.zlevel=a;var s=e.z2;s!=null&&(r.z2=s||0);for(var o=0;o<Ag.length;o++)uGe(r,e,Ag[o])}}function uGe(n,e,t){var r=t===og,i=r?e:RN(e,t),a=i?i.z2:null,s;a!=null&&(s=r?n:n.ensureState(t),s.z2=a||0)}function Yte(n,e,t,r){var i=n.get("renderItem");if(typeof i=="string"){var a=bBe(i);a&&(i=a)}var s=n.coordinateSystem,o={};s&&(o=s.prepareCustoms?s.prepareCustoms(s):aGe[s.type](s));for(var l=Pt({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:E,style:M,ordinalRawValue:T,styleEmphasis:P,visual:R,barLayout:B,currentSeriesIndices:k,font:V},o.api||{}),u={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:o.coordSys,dataInsideLength:e.count(),encode:cGe(n.getData()),itemPayload:n.get("itemPayload")||{}},c,h,d={},f={},p={},m={},g=0;g<Ag.length;g++){var v=Ag[g];p[v]=n.getModel(C5[v]),m[v]=n.getModel(M5[v])}function b(G){return G===c?h||(h=e.getItemModel(G)):e.getItemModel(G)}function S(G,F){return e.hasItemOption?G===c?d[F]||(d[F]=b(G).getModel(C5[F])):b(G).getModel(C5[F]):p[F]}function w(G,F){return e.hasItemOption?G===c?f[F]||(f[F]=b(G).getModel(M5[F])):b(G).getModel(M5[F]):m[F]}return function(G,F){return c=G,h=null,d={},f={},i&&i(Pt({dataIndexInside:G,dataIndex:e.getRawIndex(G),actionType:F?F.type:null},u),l)};function E(G,F){return F==null&&(F=c),e.getStore().get(e.getDimensionIndex(G||0),F)}function T(G,F){F==null&&(F=c),G=G||0;var X=e.getDimensionInfo(G);if(!X){var j=e.getDimensionIndex(G);return j>=0?e.getStore().get(j,F):void 0}var Q=e.get(X.name,F),H=X&&X.ordinalMeta;return H?H.categories[Q]:Q}function M(G,F){F==null&&(F=c);var X=e.getItemVisual(F,"style"),j=X&&X.fill,Q=X&&X.opacity,H=S(F,og).getItemStyle();j!=null&&(H.fill=j),Q!=null&&(H.opacity=Q);var K={inheritColor:Ke(j)?j:ve.color.neutral99},te=w(F,og),Y=Er(te,null,K,!1,!0);Y.text=te.getShallow("show")?dt(n.getFormattedLabel(F,og),uS(e,F)):null;var de=rN(te,K,!1);return D(G,H),H=jte(H,Y,de),G&&I(H,G),H.legacy=!0,H}function P(G,F){F==null&&(F=c);var X=S(F,Of).getItemStyle(),j=w(F,Of),Q=Er(j,null,null,!0,!0);Q.text=j.getShallow("show")?Ll(n.getFormattedLabel(F,Of),n.getFormattedLabel(F,og),uS(e,F)):null;var H=rN(j,null,!0);return D(G,X),X=jte(X,Q,H),G&&I(X,G),X.legacy=!0,X}function I(G,F){for(var X in F)it(F,X)&&(G[X]=F[X])}function D(G,F){G&&(G.textFill&&(F.textFill=G.textFill),G.textPosition&&(F.textPosition=G.textPosition))}function R(G,F){if(F==null&&(F=c),it(Hte,G)){var X=e.getItemVisual(F,"style");return X?X[Hte[G]]:null}if(it(k9e,G))return e.getItemVisual(F,G)}function B(G){if(s.type==="cartesian2d"){var F=s.getBaseAxis();return xFe(Pt({axis:F},G))}}function k(){return t.getCurrentSeriesIndices()}function V(G){return fj(G,t)}}function cGe(n){var e={};return W(n.dimensions,function(t){var r=n.getDimensionInfo(t);if(!r.isExtraCoord){var i=r.coordDim,a=e[i]=e[i]||[];a[r.coordDimIndex]=n.getDimensionIndex(t)}}),e}function D5(n,e,t,r,i,a,s){if(!r){a.remove(e);return}var o=k7(n,e,t,r,i,a);return o&&s.setItemGraphicEl(t,o),o&&Yr(o,r.focus,r.blurScope,r.emphasisDisabled),o}function k7(n,e,t,r,i,a){var s=-1,o=e;e&&cge(e,r,i)&&(s=Jt(a.childrenRef(),e),e=null);var l=!e,u=e;u?u.clearStates():(u=R7(r),o&&sGe(o,u)),r.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),r.tooltipDisabled&&(u.tooltipDisabled=!0),ql.normal.cfg=ql.normal.conOpt=ql.emphasis.cfg=ql.emphasis.conOpt=ql.blur.cfg=ql.blur.conOpt=ql.select.cfg=ql.select.conOpt=null,ql.isLegacy=!1,dGe(u,t,r,i,l,ql),hGe(u,t,r,i,l),N7(n,u,t,r,ql,i,l),it(r,"info")&&(kf(u).info=r.info);for(var c=0;c<Ag.length;c++){var h=Ag[c];if(h!==og){var d=RN(r,h),f=O7(r,d,h);uge(h,u,d,f,ql)}}return lGe(u,r,i),r.type==="group"&&fGe(n,u,t,r,i),s>=0?a.replaceAt(u,s):a.add(u),u}function cge(n,e,t){var r=kf(n),i=e.type,a=e.shape,s=e.style;return t.isUniversalTransitionEnabled()||i!=null&&i!==r.customGraphicType||i==="path"&&vGe(a)&&hge(a)!==r.customPathData||i==="image"&&it(s,"image")&&s.image!==r.customImagePath}function hGe(n,e,t,r,i){var a=t.clipPath;if(a===!1)n&&n.getClipPath()&&n.removeClipPath();else if(a){var s=n.getClipPath();s&&cge(s,a,r)&&(s=null),s||(s=R7(a),n.setClipPath(s)),N7(null,s,e,a,null,r,i)}}function dGe(n,e,t,r,i,a){if(!(n.isGroup||n.type==="compoundPath")){qte(t,null,a),qte(t,Of,a);var s=a.normal.conOpt,o=a.emphasis.conOpt,l=a.blur.conOpt,u=a.select.conOpt;if(s!=null||o!=null||u!=null||l!=null){var c=n.getTextContent();if(s===!1)c&&n.removeTextContent();else{s=a.normal.conOpt=s||{type:"text"},c?c.clearStates():(c=R7(s),n.setTextContent(c)),N7(null,c,e,s,null,r,i);for(var h=s&&s.style,d=0;d<Ag.length;d++){var f=Ag[d];if(f!==og){var p=a[f].conOpt;uge(f,c,p,O7(s,p,f),null)}}h?c.dirty():c.markRedraw()}}}}function qte(n,e,t){var r=e?RN(n,e):n,i=e?O7(n,r,Of):n.style,a=n.type,s=r?r.textConfig:null,o=n.textContent,l=o?e?RN(o,e):o:null;if(i&&(t.isLegacy||rge(i,a,!!s,!!l))){t.isLegacy=!0;var u=ige(i,a,!e);!s&&u.textConfig&&(s=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!e&&l){var c=l;!c.type&&(c.type="text")}var h=e?t[e]:t.normal;h.cfg=s,h.conOpt=l}function RN(n,e){return e?n?n[e]:null:n}function O7(n,e,t){var r=e&&e.style;return r==null&&t===Of&&n&&(r=n.styleEmphasis),r}function fGe(n,e,t,r,i){var a=r.children,s=a?a.length:0,o=r.$mergeChildren,l=o==="byName"||r.diffChildrenByName,u=o===!1;if(!(!s&&!l&&!u)){if(l){mGe({api:n,oldChildren:e.children()||[],newChildren:a||[],dataIndex:t,seriesModel:i,group:e});return}u&&e.removeAll();for(var c=0;c<s;c++){var h=a[c],d=e.childAt(c);h?(h.ignore==null&&(h.ignore=!1),k7(n,d,t,h,i,e)):d.ignore=!0}for(var f=e.childCount()-1;f>=c;f--){var p=e.childAt(f);pGe(e,p,i)}}}function pGe(n,e,t){e&&L3(e,kf(n).option,t)}function mGe(n){new Kf(n.oldChildren,n.newChildren,Kte,Kte,n).add(Zte).update(Zte).remove(gGe).execute()}function Kte(n,e){var t=n&&n.name;return t??iGe+e}function Zte(n,e){var t=this.context,r=n!=null?t.newChildren[n]:null,i=e!=null?t.oldChildren[e]:null;k7(t.api,i,t.dataIndex,r,t.seriesModel,t.group)}function gGe(n){var e=this.context,t=e.oldChildren[n];t&&L3(t,kf(t).option,e.seriesModel)}function hge(n){return n&&(n.pathData||n.d)}function vGe(n){return n&&(it(n,"pathData")||it(n,"d"))}function yGe(n){n.registerChartView(oGe),n.registerSeriesModel(O9e)}var qv=mn(),Qte=Tt,I5=Qe,B7=(function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,r,i){var a=t.get("value"),s=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=r,!(!i&&this._lastValue===a&&this._lastStatus===s)){this._lastValue=a,this._lastStatus=s;var o=this._group,l=this._handle;if(!s||s==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var u={};this.makeElOption(u,a,e,t,r);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=c;var h=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new wt,this.createPointerEl(o,u,e,t),this.createLabelEl(o,u,e,t),r.getZr().add(o);else{var d=Qt(Jte,t,h);this.updatePointerEl(o,u,d),this.updateLabelEl(o,u,d,t)}tne(o,t,!0),this._renderHandle(a)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var r=t.get("animation"),i=e.axis,a=i.type==="category",s=t.get("snap");if(!s&&!a)return!1;if(r==="auto"||r==null){var o=this.animationThreshold;if(a&&i.getBandWidth()>o)return!0;if(s){var l=i7(e).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>o}return!1}return r===!0},n.prototype.makeElOption=function(e,t,r,i,a){},n.prototype.createPointerEl=function(e,t,r,i){var a=t.pointer;if(a){var s=qv(e).pointerEl=new ax[a.type](Qte(t.pointer));e.add(s)}},n.prototype.createLabelEl=function(e,t,r,i){if(t.label){var a=qv(e).labelEl=new On(Qte(t.label));e.add(a),ene(a,i)}},n.prototype.updatePointerEl=function(e,t,r){var i=qv(e).pointerEl;i&&t.pointer&&(i.setStyle(t.pointer.style),r(i,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,r,i){var a=qv(e).labelEl;a&&(a.setStyle(t.label.style),r(a,{x:t.label.x,y:t.label.y}),ene(a,i))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=t.getModel("handle"),s=t.get("status");if(!a.get("show")||!s||s==="hide"){i&&r.remove(i),this._handle=null;return}var o;this._handle||(o=!0,i=this._handle=v2(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Xf(u.event)},onmousedown:I5(this._onHandleDragMove,this,0,0),drift:I5(this._onHandleDragMove,this),ondragend:I5(this._onHandleDragEnd,this)}),r.add(i)),tne(i,t,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=a.get("size");Be(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,XS(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},n.prototype._moveHandleToValue=function(e,t){Jte(this._axisPointerModel,!t&&this._moveAnimation,this._handle,P5(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var r=this._handle;if(r){this._dragging=!0;var i=this.updateHandleTransform(P5(r),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=i,r.stopAnimation(),r.attr(P5(i)),qv(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,r=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:r.axis.dim,axisIndex:r.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),r=this._group,i=this._handle;t&&r&&(this._lastGraphicKey=null,r&&t.remove(r),i&&t.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),TA(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}},n})();function Jte(n,e,t,r){dge(qv(t).lastProp,r)||(qv(t).lastProp=r,e?Vn(t,r,n):(t.stopAnimation(),t.attr(r)))}function dge(n,e){if(Lt(n)&&Lt(e)){var t=!0;return W(e,function(r,i){t=t&&dge(n[i],r)}),!!t}else return n===e}function ene(n,e){n[e.get(["label","show"])?"show":"hide"]()}function P5(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function tne(n,e,t){var r=e.get("z"),i=e.get("zlevel");n&&n.traverse(function(a){a.type!=="group"&&(r!=null&&(a.z=r),i!=null&&(a.zlevel=i),a.silent=t)})}function F7(n){var e=n.get("type"),t=n.getModel(e+"Style"),r;return e==="line"?(r=t.getLineStyle(),r.fill=null):e==="shadow"&&(r=t.getAreaStyle(),r.stroke=null),r}function fge(n,e,t,r,i){var a=t.get("value"),s=pge(a,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),l=y2(o.get("padding")||0),u=o.getFont(),c=e3(s,u),h=i.position,d=c.width+l[1]+l[3],f=c.height+l[0]+l[2],p=i.align;p==="right"&&(h[0]-=d),p==="center"&&(h[0]-=d/2);var m=i.verticalAlign;m==="bottom"&&(h[1]-=f),m==="middle"&&(h[1]-=f/2),xGe(h,d,f,r);var g=o.get("backgroundColor");(!g||g==="auto")&&(g=e.get(["axisLine","lineStyle","color"])),n.label={x:h[0],y:h[1],style:Er(o,{text:s,font:u,fill:o.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function xGe(n,e,t,r){var i=r.getWidth(),a=r.getHeight();n[0]=Math.min(n[0]+e,i)-e,n[1]=Math.min(n[1]+t,a)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function pge(n,e,t,r,i){n=e.scale.parse(n);var a=e.scale.getLabel({value:n},{precision:i.precision}),s=i.formatter;if(s){var o={value:pN(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};W(r,function(l){var u=t.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,h=u&&u.getDataParams(c);h&&o.seriesData.push(h)}),Ke(s)?a=s.replace("{value}",a):St(s)&&(a=s(o))}return a}function U7(n,e,t){var r=Ya();return Rg(r,r,t.rotation),td(r,r,t.position),Ac([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],r)}function mge(n,e,t,r,i,a){var s=go.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=i.get(["label","margin"]),fge(e,r,i,a,{position:U7(r.axis,n,t),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function z7(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function gge(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}function nne(n,e,t,r,i,a){return{cx:n,cy:e,r0:t,r,startAngle:i,endAngle:a,clockwise:!0}}var _Ge=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,s){var o=i.axis,l=o.grid,u=a.get("type"),c=rne(l,o).getOtherAxis(o).getGlobalExtent(),h=o.toGlobalCoord(o.dataToCoord(r,!0));if(u&&u!=="none"){var d=F7(a),f=bGe[u](o,h,c);f.style=d,t.graphicKey=f.type,t.pointer=f}var p=TN(l.getRect(),i);mge(r,t,p,i,a,s)},e.prototype.getHandleTransform=function(t,r,i){var a=TN(r.axis.grid.getRect(),r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var s=U7(r.axis,t,a);return{x:s[0],y:s[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var s=i.axis,o=s.grid,l=s.getGlobalExtent(!0),u=rne(o,s).getOtherAxis(s).getGlobalExtent(),c=s.dim==="x"?0:1,h=[t.x,t.y];h[c]+=r[c],h[c]=Math.min(l[1],h[c]),h[c]=Math.max(l[0],h[c]);var d=(u[1]+u[0])/2,f=[d,d];f[c]=h[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:h[0],y:h[1],rotation:t.rotation,cursorPoint:f,tooltipOption:p[c]}},e})(B7);function rne(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var bGe={line:function(n,e,t){var r=z7([e,t[0]],[e,t[1]],ine(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=Math.max(1,n.getBandWidth()),i=t[1]-t[0];return{type:"Rect",shape:gge([e-r/2,t[0]],[r,i],ine(n))}}};function ine(n){return n.dim==="x"?0:1}var SGe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:ve.color.border,width:1,type:"dashed"},shadowStyle:{color:ve.color.shadowTint},label:{show:!0,formatter:null,precision:"auto",margin:3,color:ve.color.neutral00,padding:[5,7,5,7],backgroundColor:ve.color.accent60,borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:ve.color.accent40,throttle:40}},e})(_n),Pf=mn(),wGe=W;function vge(n,e,t){if(!bn.node){var r=e.getZr();Pf(r).records||(Pf(r).records={}),TGe(r,e);var i=Pf(r).records[n]||(Pf(r).records[n]={});i.handler=t}}function TGe(n,e){if(Pf(n).initialized)return;Pf(n).initialized=!0,t("click",Qt(ane,"click")),t("mousemove",Qt(ane,"mousemove")),t("globalout",AGe);function t(r,i){n.on(r,function(a){var s=CGe(e);wGe(Pf(n).records,function(o){o&&i(o,a,s.dispatchAction)}),EGe(s.pendings,e)})}}function EGe(n,e){var t=n.showTip.length,r=n.hideTip.length,i;t?i=n.showTip[t-1]:r&&(i=n.hideTip[r-1]),i&&(i.dispatchAction=null,e.dispatchAction(i))}function AGe(n,e,t){n.handler("leave",null,t)}function ane(n,e,t,r){e.handler(n,t,r)}function CGe(n){var e={showTip:[],hideTip:[]},t=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=t,n.dispatchAction(r))};return{dispatchAction:t,pendings:e}}function k8(n,e){if(!bn.node){var t=e.getZr(),r=(Pf(t).records||{})[n];r&&(Pf(t).records[n]=null)}}var MGe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=r.getComponent("tooltip"),s=t.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";vge("axisPointer",i,function(o,l,u){s!=="none"&&(o==="leave"||s.indexOf(o)>=0)&&u({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,r){k8("axisPointer",r)},e.prototype.dispose=function(t,r){k8("axisPointer",r)},e.type="axisPointer",e})(Gr);function yge(n,e){var t=[],r=n.seriesIndex,i;if(r==null||!(i=e.getSeriesByIndex(r)))return{point:[]};var a=i.getData(),s=zy(a,n);if(s==null||s<0||Be(s))return{point:[]};var o=a.getItemGraphicEl(s),l=i.coordinateSystem;if(i.getTooltipPosition)t=i.getTooltipPosition(s)||[];else if(l&&l.dataToPoint)if(n.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),h=c.dim,d=u.dim,f=h==="x"||h==="radius"?1:0,p=a.mapDimension(d),m=[];m[f]=a.get(p,s),m[1-f]=a.get(a.getCalculationInfo("stackResultDimension"),s),t=l.dataToPoint(m)||[]}else t=l.dataToPoint(a.getValues(Ue(l.dimensions,function(v){return a.mapDimension(v)}),s))||[];else if(o){var g=o.getBoundingRect().clone();g.applyTransform(o.transform),t=[g.x+g.width/2,g.y+g.height/2]}return{point:t,el:o}}var sne=mn();function DGe(n,e,t){var r=n.currTrigger,i=[n.x,n.y],a=n,s=n.dispatchAction||Qe(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){kL(i)&&(i=yge({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var l=kL(i),u=a.axesInfo,c=o.axesInfo,h=r==="leave"||kL(i),d={},f={},p={list:[],map:{}},m={showPointer:Qt(PGe,f),showTooltip:Qt(LGe,p)};W(o.coordSysMap,function(v,b){var S=l||v.containPoint(i);W(o.coordSysAxesInfo[b],function(w,E){var T=w.axis,M=OGe(u,w);if(!h&&S&&(!u||M)){var P=M&&M.value;P==null&&!l&&(P=T.pointToData(i)),P!=null&&one(w,P,m,!1,d)}})});var g={};return W(c,function(v,b){var S=v.linkGroup;S&&!f[b]&&W(S.axesInfo,function(w,E){var T=f[E];if(w!==v&&T){var M=T.value;S.mapper&&(M=v.axis.scale.parse(S.mapper(M,lne(w),lne(v)))),g[v.key]=M}})}),W(g,function(v,b){one(c[b],v,m,!0,d)}),RGe(f,c,d),NGe(p,i,n,s),kGe(c,s,t),d}}function one(n,e,t,r,i){var a=n.axis;if(!(a.scale.isBlank()||!a.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var s=IGe(e,n),o=s.payloadBatch,l=s.snapToValue;o[0]&&i.seriesIndex==null&&Pe(i,o[0]),!r&&n.snap&&a.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,o),t.showTooltip(n,s,l)}}function IGe(n,e){var t=e.axis,r=t.dim,i=n,a=[],s=Number.MAX_VALUE,o=-1;return W(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(r),h,d;if(l.getAxisTooltipData){var f=l.getAxisTooltipData(c,n,t);d=f.dataIndices,h=f.nestestValue}else{if(d=l.indicesOfNearest(r,c[0],n,t.type==="category"?.5:null),!d.length)return;h=l.getData().get(c[0],d[0])}if(!(h==null||!isFinite(h))){var p=n-h,m=Math.abs(p);m<=s&&((m<s||p>=0&&o<0)&&(s=m,o=p,i=h,a.length=0),W(d,function(g){a.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:a,snapToValue:i}}function PGe(n,e,t,r){n[e.key]={value:t,payloadBatch:r}}function LGe(n,e,t,r){var i=t.payloadBatch,a=e.axis,s=a.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!i.length)){var l=e.coordSys.model,u=RA(l),c=n.map[u];c||(c=n.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function RGe(n,e,t){var r=t.axesInfo=[];W(e,function(i,a){var s=i.axisPointerModel.option,o=n[a];o?(!i.useHandle&&(s.status="show"),s.value=o.value,s.seriesDataIndices=(o.payloadBatch||[]).slice()):!i.useHandle&&(s.status="hide"),s.status==="show"&&r.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:s.value})})}function NGe(n,e,t,r){if(kL(e)||!n.list.length){r({type:"hideTip"});return}var i=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:n.list})}function kGe(n,e,t){var r=t.getZr(),i="axisPointerLastHighlights",a=sne(r)[i]||{},s=sne(r)[i]={};W(n,function(u,c){var h=u.axisPointerModel.option;h.status==="show"&&u.triggerEmphasis&&W(h.seriesDataIndices,function(d){var f=d.seriesIndex+" | "+d.dataIndex;s[f]=d})});var o=[],l=[];W(a,function(u,c){!s[c]&&l.push(u)}),W(s,function(u,c){!a[c]&&o.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function OGe(n,e){for(var t=0;t<(n||[]).length;t++){var r=n[t];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}function lne(n){var e=n.axis.model,t={},r=t.axisDim=n.axis.dim;return t.axisIndex=t[r+"AxisIndex"]=e.componentIndex,t.axisName=t[r+"AxisName"]=e.name,t.axisId=t[r+"AxisId"]=e.id,t}function kL(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function D2(n){cx.registerAxisPointerClass("CartesianAxisPointer",_Ge),n.registerComponentModel(SGe),n.registerComponentView(MGe),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!Be(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=B6e(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},DGe)}function BGe(n){sn(Hpe),sn(D2)}var FGe=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,s){var o=i.axis;o.dim==="angle"&&(this.animationThreshold=Math.PI/18);var l=o.polar,u=l.getOtherAxis(o),c=u.getExtent(),h=o.dataToCoord(r),d=a.get("type");if(d&&d!=="none"){var f=F7(a),p=zGe[d](o,l,h,c);p.style=f,t.graphicKey=p.type,t.pointer=p}var m=a.get(["label","margin"]),g=UGe(r,i,a,l,m);fge(t,i,a,s,g)},e})(B7);function UGe(n,e,t,r,i){var a=e.axis,s=a.dataToCoord(n),o=r.getAngleAxis().getExtent()[0];o=o/180*Math.PI;var l=r.getRadiusAxis().getExtent(),u,c,h;if(a.dim==="radius"){var d=Ya();Rg(d,d,o),td(d,d,[r.cx,r.cy]),u=Ac([s,-i],d);var f=e.getModel("axisLabel").get("rotate")||0,p=go.innerTextLayout(o,f*Math.PI/180,-1);c=p.textAlign,h=p.textVerticalAlign}else{var m=l[1];u=r.coordToPoint([m+i,s]);var g=r.cx,v=r.cy;c=Math.abs(u[0]-g)/m<.3?"center":u[0]>g?"left":"right",h=Math.abs(u[1]-v)/m<.3?"middle":u[1]>v?"top":"bottom"}return{position:u,align:c,verticalAlign:h}}var zGe={line:function(n,e,t,r){return n.dim==="angle"?{type:"Line",shape:z7(e.coordToPoint([r[0],t]),e.coordToPoint([r[1],t]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:t}}},shadow:function(n,e,t,r){var i=Math.max(1,n.getBandWidth()),a=Math.PI/180;return n.dim==="angle"?{type:"Sector",shape:nne(e.cx,e.cy,r[0],r[1],(-t-i/2)*a,(-t+i/2)*a)}:{type:"Sector",shape:nne(e.cx,e.cy,t-i/2,t+i/2,0,Math.PI*2)}}},VGe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.findAxisModel=function(t){var r,i=this.ecModel;return i.eachComponent(t,function(a){a.getCoordSysModel()===this&&(r=a)},this),r},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e})(_n),V7=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",fi).models[0]},e.type="polarAxis",e})(_n);Zi(V7,w2);var HGe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="angleAxis",e})(V7),GGe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="radiusAxis",e})(V7),H7=(function(n){be(e,n);function e(t,r){return n.call(this,"radius",t,r)||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e})(Oc);H7.prototype.dataToRadius=Oc.prototype.dataToCoord;H7.prototype.radiusToData=Oc.prototype.coordToData;var jGe=mn(),G7=(function(n){be(e,n);function e(t,r){return n.call(this,"angle",t,r||[0,360])||this}return e.prototype.pointToData=function(t,r){return this.polar.pointToData(t,r)[this.dim==="radius"?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,r=t.getLabelModel(),i=t.scale,a=i.getExtent(),s=i.count();if(a[1]-a[0]<1)return 0;var o=a[0],l=t.dataToCoord(o+1)-t.dataToCoord(o),u=Math.abs(l),c=e3(o==null?"":o+"",r.getFont(),"center","top"),h=Math.max(c.height,7),d=h/u;isNaN(d)&&(d=1/0);var f=Math.max(0,Math.floor(d)),p=jGe(t.model),m=p.lastAutoInterval,g=p.lastTickCount;return m!=null&&g!=null&&Math.abs(m-f)<=1&&Math.abs(g-s)<=1&&m>f?f=m:(p.lastTickCount=s,p.lastAutoInterval=f),f},e})(Oc);G7.prototype.dataToAngle=Oc.prototype.dataToCoord;G7.prototype.angleToData=Oc.prototype.coordToData;var xge=["radius","angle"],WGe=(function(){function n(e){this.dimensions=xge,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new H7,this._angleAxis=new G7,this.axisPointerEnabled=!0,this.name=e||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},n.prototype.containData=function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},n.prototype.getAxis=function(e){var t="_"+e+"Axis";return this[t]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(e){var t=[],r=this._angleAxis,i=this._radiusAxis;return r.scale.type===e&&t.push(r),i.scale.type===e&&t.push(i),t},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(e){var t=e!=null&&e!=="auto"?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},n.prototype.dataToPoint=function(e,t,r){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)],r)},n.prototype.pointToData=function(e,t,r){r=r||[];var i=this.pointToCoord(e);return r[0]=this._radiusAxis.radiusToData(i[0],t),r[1]=this._angleAxis.angleToData(i[1],t),r},n.prototype.pointToCoord=function(e){var t=e[0]-this.cx,r=e[1]-this.cy,i=this.getAngleAxis(),a=i.getExtent(),s=Math.min(a[0],a[1]),o=Math.max(a[0],a[1]);i.inverse?s=o-360:o=s+360;var l=Math.sqrt(t*t+r*r);t/=l,r/=l;for(var u=Math.atan2(-r,t)/Math.PI*180,c=u<s?1:-1;u<s||u>o;)u+=c*360;return[l,u]},n.prototype.coordToPoint=function(e,t){t=t||[];var r=e[0],i=e[1]/180*Math.PI;return t[0]=Math.cos(i)*r+this.cx,t[1]=-Math.sin(i)*r+this.cy,t},n.prototype.getArea=function(){var e=this.getAngleAxis(),t=this.getRadiusAxis(),r=t.getExtent().slice();r[0]>r[1]&&r.reverse();var i=e.getExtent(),a=Math.PI/180,s=1e-4;return{cx:this.cx,cy:this.cy,r0:r[0],r:r[1],startAngle:-i[0]*a,endAngle:-i[1]*a,clockwise:e.inverse,contain:function(o,l){var u=o-this.cx,c=l-this.cy,h=u*u+c*c,d=this.r,f=this.r0;return d!==f&&h-s<=d*d&&h+s>=f*f},x:this.cx-r[1],y:this.cy-r[1],width:r[1]*2,height:r[1]*2}},n.prototype.convertToPixel=function(e,t,r){var i=une(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=une(t);return i===this?this.pointToData(r):null},n})();function une(n){var e=n.seriesModel,t=n.polarModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function XGe(n,e,t){var r=e.get("center"),i=ha(e,t).refContainer;n.cx=Xe(r[0],i.width)+i.x,n.cy=Xe(r[1],i.height)+i.y;var a=n.getRadiusAxis(),s=Math.min(i.width,i.height)/2,o=e.get("radius");o==null?o=[0,"100%"]:Be(o)||(o=[0,o]);var l=[Xe(o[0],s),Xe(o[1],s)];a.inverse?a.setExtent(l[1],l[0]):a.setExtent(l[0],l[1])}function $Ge(n,e){var t=this,r=t.getAngleAxis(),i=t.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),n.eachSeries(function(o){if(o.coordinateSystem===t){var l=o.getData();W(mN(l,"radius"),function(u){i.scale.unionExtentFromData(l,u)}),W(mN(l,"angle"),function(u){r.scale.unionExtentFromData(l,u)})}}),oS(r.scale,r.model),oS(i.scale,i.model),r.type==="category"&&!r.onBand){var a=r.getExtent(),s=360/r.scale.count();r.inverse?a[1]+=s:a[1]-=s,r.setExtent(a[0],a[1])}}function YGe(n){return n.mainType==="angleAxis"}function cne(n,e){var t;if(n.type=e.get("type"),n.scale=S3(e),n.onBand=e.get("boundaryGap")&&n.type==="category",n.inverse=e.get("inverse"),YGe(e)){n.inverse=n.inverse!==e.get("clockwise");var r=e.get("startAngle"),i=(t=e.get("endAngle"))!==null&&t!==void 0?t:r+(n.inverse?-360:360);n.setExtent(r,i)}e.axis=n,n.model=e}var qGe={dimensions:xge,create:function(n,e){var t=[];return n.eachComponent("polar",function(r,i){var a=new WGe(i+"");a.update=$Ge;var s=a.getRadiusAxis(),o=a.getAngleAxis(),l=r.findAxisModel("radiusAxis"),u=r.findAxisModel("angleAxis");cne(s,l),cne(o,u),XGe(a,r,e),t.push(a),r.coordinateSystem=a,a.model=r}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="polar"){var i=r.getReferringComponents("polar",fi).models[0];r.coordinateSystem=i.coordinateSystem}}),t}},KGe=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function aP(n,e,t){e[1]>e[0]&&(e=e.slice().reverse());var r=n.coordToPoint([e[0],t]),i=n.coordToPoint([e[1],t]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function sP(n){var e=n.getRadiusAxis();return e.inverse?0:1}function hne(n){var e=n[0],t=n[n.length-1];e&&t&&Math.abs(Math.abs(e.coord-t.coord)-360)<1e-4&&n.pop()}var ZGe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r){if(this.group.removeAll(),!!t.get("show")){var i=t.axis,a=i.polar,s=a.getRadiusAxis().getExtent(),o=i.getTicksCoords({breakTicks:"none"}),l=i.getMinorTicksCoords(),u=Ue(i.getViewLabels(),function(c){c=Tt(c);var h=i.scale,d=h.type==="ordinal"?h.getRawOrdinalNumber(c.tickValue):c.tickValue;return c.coord=i.dataToCoord(d),c});hne(u),hne(o),W(KGe,function(c){t.get([c,"show"])&&(!i.scale.isBlank()||c==="axisLine")&&QGe[c](this.group,t,a,o,l,s,u)},this)}},e.type="angleAxis",e})(cx),QGe={axisLine:function(n,e,t,r,i,a){var s=e.getModel(["axisLine","lineStyle"]),o=t.getAngleAxis(),l=Math.PI/180,u=o.getExtent(),c=sP(t),h=c?0:1,d,f=Math.abs(u[1]-u[0])===360?"Circle":"Arc";a[h]===0?d=new ax[f]({shape:{cx:t.cx,cy:t.cy,r:a[c],startAngle:-u[0]*l,endAngle:-u[1]*l,clockwise:o.inverse},style:s.getLineStyle(),z2:1,silent:!0}):d=new p2({shape:{cx:t.cx,cy:t.cy,r:a[c],r0:a[h]},style:s.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,n.add(d)},axisTick:function(n,e,t,r,i,a){var s=e.getModel("axisTick"),o=(s.get("inside")?-1:1)*s.get("length"),l=a[sP(t)],u=Ue(r,function(c){return new Xi({shape:aP(t,[l,l+o],c.coord)})});n.add(wu(u,{style:Pt(s.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,e,t,r,i,a){if(i.length){for(var s=e.getModel("axisTick"),o=e.getModel("minorTick"),l=(s.get("inside")?-1:1)*o.get("length"),u=a[sP(t)],c=[],h=0;h<i.length;h++)for(var d=0;d<i[h].length;d++)c.push(new Xi({shape:aP(t,[u,u+l],i[h][d].coord)}));n.add(wu(c,{style:Pt(o.getModel("lineStyle").getLineStyle(),Pt(s.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,e,t,r,i,a,s){var o=e.getCategories(!0),l=e.getModel("axisLabel"),u=l.get("margin"),c=e.get("triggerEvent");W(s,function(h,d){var f=l,p=h.tickValue,m=a[sP(t)],g=t.coordToPoint([m+u,h.coord]),v=t.cx,b=t.cy,S=Math.abs(g[0]-v)/m<.3?"center":g[0]>v?"left":"right",w=Math.abs(g[1]-b)/m<.3?"middle":g[1]>b?"top":"bottom";if(o&&o[p]){var E=o[p];Lt(E)&&E.textStyle&&(f=new Sn(E.textStyle,l,l.ecModel))}var T=new On({silent:go.isLabelSilent(e),style:Er(f,{x:g[0],y:g[1],fill:f.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:h.formattedLabel,align:S,verticalAlign:w})});if(n.add(T),op({el:T,componentModel:e,itemName:h.formattedLabel,formatterParamsExtra:{isTruncated:function(){return T.isTruncated},value:h.rawLabel,tickIndex:d}}),c){var M=go.makeAxisEventDataBase(e);M.targetType="axisLabel",M.value=h.rawLabel,Ft(T).eventData=M}},this)},splitLine:function(n,e,t,r,i,a){var s=e.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=0;h<r.length;h++){var d=u++%l.length;c[d]=c[d]||[],c[d].push(new Xi({shape:aP(t,a,r[h].coord)}))}for(var h=0;h<c.length;h++)n.add(wu(c[h],{style:Pt({stroke:l[h%l.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(n,e,t,r,i,a){if(i.length){for(var s=e.getModel("minorSplitLine"),o=s.getModel("lineStyle"),l=[],u=0;u<i.length;u++)for(var c=0;c<i[u].length;c++)l.push(new Xi({shape:aP(t,a,i[u][c].coord)}));n.add(wu(l,{style:o.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(n,e,t,r,i,a){if(r.length){var s=e.getModel("splitArea"),o=s.getModel("areaStyle"),l=o.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=Math.PI/180,d=-r[0].coord*h,f=Math.min(a[0],a[1]),p=Math.max(a[0],a[1]),m=e.get("clockwise"),g=1,v=r.length;g<=v;g++){var b=g===v?r[0].coord:r[g].coord,S=u++%l.length;c[S]=c[S]||[],c[S].push(new zs({shape:{cx:t.cx,cy:t.cy,r0:f,r:p,startAngle:d,endAngle:-b*h,clockwise:m},silent:!0})),d=-b*h}for(var g=0;g<c.length;g++)n.add(wu(c[g],{style:Pt({fill:l[g%l.length]},o.getAreaStyle()),silent:!0}))}}},JGe=["splitLine","splitArea","minorSplitLine"],eje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="PolarAxisPointer",t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this._axisGroup,s=this._axisGroup=new wt;this.group.add(s);var o=t.axis,l=o.polar,u=l.getAngleAxis(),c=o.getTicksCoords(),h=o.getMinorTicksCoords(),d=u.getExtent()[0],f=o.getExtent(),p=nje(l,t,d),m=new go(t,i,p);m.build(),s.add(m.group),g2(a,s,t),W(JGe,function(g){t.get([g,"show"])&&!o.scale.isBlank()&&tje[g](this.group,t,l,d,f,c,h)},this)}},e.type="radiusAxis",e})(cx),tje={splitLine:function(n,e,t,r,i,a){var s=e.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color"),u=0,c=t.getAngleAxis(),h=Math.PI/180,d=c.getExtent(),f=Math.abs(d[1]-d[0])===360?"Circle":"Arc";l=l instanceof Array?l:[l];for(var p=[],m=0;m<a.length;m++){var g=u++%l.length;p[g]=p[g]||[],p[g].push(new ax[f]({shape:{cx:t.cx,cy:t.cy,r:Math.max(a[m].coord,0),startAngle:-d[0]*h,endAngle:-d[1]*h,clockwise:c.inverse}}))}for(var m=0;m<p.length;m++)n.add(wu(p[m],{style:Pt({stroke:l[m%l.length],fill:null},o.getLineStyle()),silent:!0}))},minorSplitLine:function(n,e,t,r,i,a,s){if(s.length){for(var o=e.getModel("minorSplitLine"),l=o.getModel("lineStyle"),u=[],c=0;c<s.length;c++)for(var h=0;h<s[c].length;h++)u.push(new sp({shape:{cx:t.cx,cy:t.cy,r:s[c][h].coord}}));n.add(wu(u,{style:Pt({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,e,t,r,i,a){if(a.length){var s=e.getModel("splitArea"),o=s.getModel("areaStyle"),l=o.get("color"),u=0;l=l instanceof Array?l:[l];for(var c=[],h=a[0].coord,d=1;d<a.length;d++){var f=u++%l.length;c[f]=c[f]||[],c[f].push(new zs({shape:{cx:t.cx,cy:t.cy,r0:h,r:a[d].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),h=a[d].coord}for(var d=0;d<c.length;d++)n.add(wu(c[d],{style:Pt({fill:l[d%l.length]},o.getAreaStyle()),silent:!0}))}}};function nje(n,e,t){return{position:[n.cx,n.cy],rotation:t/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}function _ge(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function bge(n,e){return e.dim+n.model.componentIndex}function rje(n,e,t){var r={},i=ije(er(e.getSeriesByType(n),function(a){return!e.isSeriesFiltered(a)&&a.coordinateSystem&&a.coordinateSystem.type==="polar"}));e.eachSeriesByType(n,function(a){if(a.coordinateSystem.type==="polar"){var s=a.getData(),o=a.coordinateSystem,l=o.getBaseAxis(),u=bge(o,l),c=_ge(a),h=i[u][c],d=h.offset,f=h.width,p=o.getOtherAxis(l),m=a.coordinateSystem.cx,g=a.coordinateSystem.cy,v=a.get("barMinHeight")||0,b=a.get("barMinAngle")||0;r[c]=r[c]||[];for(var S=s.mapDimension(p.dim),w=s.mapDimension(l.dim),E=Sg(s,S),T=l.dim!=="radius"||!a.get("roundCap",!0),M=p.model,P=M.get("startValue"),I=p.dataToCoord(P||0),D=0,R=s.count();D<R;D++){var B=s.get(S,D),k=s.get(w,D),V=B>=0?"p":"n",G=I;E&&(r[c][k]||(r[c][k]={p:I,n:I}),G=r[c][k][V]);var F=void 0,X=void 0,j=void 0,Q=void 0;if(p.dim==="radius"){var H=p.dataToCoord(B)-I,K=l.dataToCoord(k);Math.abs(H)<v&&(H=(H<0?-1:1)*v),F=G,X=G+H,j=K-d,Q=j-f,E&&(r[c][k][V]=X)}else{var te=p.dataToCoord(B,T)-I,Y=l.dataToCoord(k);Math.abs(te)<b&&(te=(te<0?-1:1)*b),F=Y+d,X=F+f,j=G,Q=G+te,E&&(r[c][k][V]=Q)}s.setItemLayout(D,{cx:m,cy:g,r0:F,r:X,startAngle:-j*Math.PI/180,endAngle:-Q*Math.PI/180,clockwise:j>=Q})}}})}function ije(n){var e={};W(n,function(r,i){var a=r.getData(),s=r.coordinateSystem,o=s.getBaseAxis(),l=bge(s,o),u=o.getExtent(),c=o.type==="category"?o.getBandWidth():Math.abs(u[1]-u[0])/a.count(),h=e[l]||{bandWidth:c,remainedWidth:c,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},d=h.stacks;e[l]=h;var f=_ge(r);d[f]||h.autoWidthCount++,d[f]=d[f]||{width:0,maxWidth:0};var p=Xe(r.get("barWidth"),c),m=Xe(r.get("barMaxWidth"),c),g=r.get("barGap"),v=r.get("barCategoryGap");p&&!d[f].width&&(p=Math.min(h.remainedWidth,p),d[f].width=p,h.remainedWidth-=p),m&&(d[f].maxWidth=m),g!=null&&(h.gap=g),v!=null&&(h.categoryGap=v)});var t={};return W(e,function(r,i){t[i]={};var a=r.stacks,s=r.bandWidth,o=Xe(r.categoryGap,s),l=Xe(r.gap,1),u=r.remainedWidth,c=r.autoWidthCount,h=(u-o)/(c+(c-1)*l);h=Math.max(h,0),W(a,function(m,g){var v=m.maxWidth;v&&v<h&&(v=Math.min(v,u),m.width&&(v=Math.min(v,m.width)),u-=v,m.width=v,c--)}),h=(u-o)/(c+(c-1)*l),h=Math.max(h,0);var d=0,f;W(a,function(m,g){m.width||(m.width=h),f=m,d+=m.width*(1+l)}),f&&(d-=f.width*l);var p=-d/2;W(a,function(m,g){t[i][g]=t[i][g]||{offset:p,width:m.width},p+=m.width*(1+l)})}),t}var aje={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},sje={splitNumber:5},oje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="polar",e})(Gr);function lje(n){sn(D2),cx.registerAxisPointerClass("PolarAxisPointer",FGe),n.registerCoordinateSystem("polar",qGe),n.registerComponentModel(VGe),n.registerComponentView(oje),cS(n,"angle",HGe,aje),cS(n,"radius",GGe,sje),n.registerComponentView(ZGe),n.registerComponentView(eje),n.registerLayout(Qt(rje,"bar"))}function O8(n,e){e=e||{};var t=n.coordinateSystem,r=n.axis,i={},a=r.position,s=r.orient,o=t.getRect(),l=[o.x,o.x+o.width,o.y,o.y+o.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};i.position=[s==="vertical"?u.vertical[a]:l[0],s==="horizontal"?u.horizontal[a]:l[3]];var c={horizontal:0,vertical:1};i.rotation=Math.PI/2*c[s];var h={top:-1,bottom:1,right:1,left:-1};i.labelDirection=i.tickDirection=i.nameDirection=h[a],n.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),fs(e.labelInside,n.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var d=n.get(["axisLabel","rotate"]);return i.labelRotate=a==="top"?-d:d,i.z2=1,i}var uje=["splitArea","splitLine","breakArea"],cje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.axisPointerClass="SingleAxisPointer",t}return e.prototype.render=function(t,r,i,a){var s=this.group;s.removeAll();var o=this._axisGroup;this._axisGroup=new wt;var l=O8(t),u=new go(t,i,l);u.build(),s.add(this._axisGroup),s.add(u.group),W(uje,function(c){t.get([c,"show"])&&hje[c](this,this.group,this._axisGroup,t,i)},this),g2(o,this._axisGroup,t),n.prototype.render.call(this,t,r,i,a)},e.prototype.remove=function(){Upe(this)},e.type="singleAxis",e})(cx),hje={splitLine:function(n,e,t,r,i){var a=r.axis;if(!a.scale.isBlank()){var s=r.getModel("splitLine"),o=s.getModel("lineStyle"),l=o.get("color");l=l instanceof Array?l:[l];for(var u=o.get("width"),c=r.coordinateSystem.getRect(),h=a.isHorizontal(),d=[],f=0,p=a.getTicksCoords({tickModel:s,breakTicks:"none",pruneByBreak:"preserve_extent_bound"}),m=[],g=[],v=0;v<p.length;++v){var b=a.toGlobalCoord(p[v].coord);h?(m[0]=b,m[1]=c.y,g[0]=b,g[1]=c.y+c.height):(m[0]=c.x,m[1]=b,g[0]=c.x+c.width,g[1]=b);var S=new Xi({shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},silent:!0});rS(S.shape,u);var w=f++%l.length;d[w]=d[w]||[],d[w].push(S)}for(var E=o.getLineStyle(["color"]),v=0;v<d.length;++v)e.add(wu(d[v],{style:Pt({stroke:l[v%l.length]},E),silent:!0}))}},splitArea:function(n,e,t,r,i){Fpe(n,t,r,r)},breakArea:function(n,e,t,r,i){var a=M2(),s=r.axis.scale;a&&s.type!=="ordinal"&&a.rectCoordBuildBreakAxis(e,n,r,r.coordinateSystem.getRect(),i)}},OL=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}},jitter:0,jitterOverlap:!0,jitterMargin:2},e})(_n);Zi(OL,w2.prototype);var dje=(function(n){be(e,n);function e(t,r,i,a,s){var o=n.call(this,t,r,i)||this;return o.type=a||"value",o.position=s||"bottom",o}return e.prototype.isHorizontal=function(){var t=this.position;return t==="top"||t==="bottom"},e.prototype.pointToData=function(t,r){return this.coordinateSystem.pointToData(t)[0]},e})(Oc),Sge=["single"],fje=(function(){function n(e,t,r){this.type="single",this.dimension="single",this.dimensions=Sge,this.axisPointerEnabled=!0,this.model=e,this._init(e,t,r)}return n.prototype._init=function(e,t,r){var i=this.dimension,a=new dje(i,S3(e),[0,0],e.get("type"),e.get("position")),s=a.type==="category";a.onBand=s&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),e.axis=a,a.model=e,a.coordinateSystem=this,this._axis=a},n.prototype.update=function(e,t){e.eachSeries(function(r){if(r.coordinateSystem===this){var i=r.getData();W(i.mapDimensionsAll(this.dimension),function(a){this._axis.scale.unionExtentFromData(i,a)},this),oS(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(e,t){var r=ha(e,t).refContainer;this._rect=qr(e.getBoxLayoutParams(),r),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var e=this._rect,t=this._axis,r=t.isHorizontal(),i=r?[0,e.width]:[0,e.height],a=t.inverse?1:0;t.setExtent(i[a],i[1-a]),this._updateAxisTransform(t,r?e.x:e.y)},n.prototype._updateAxisTransform=function(e,t){var r=e.getExtent(),i=r[0]+r[1],a=e.isHorizontal();e.toGlobalCoord=a?function(s){return s+t}:function(s){return i-s+t},e.toLocalCoord=a?function(s){return s-t}:function(s){return i-s+t}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(e){var t=this.getRect(),r=this.getAxis(),i=r.orient;return i==="horizontal"?r.contain(r.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:r.contain(r.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},n.prototype.pointToData=function(e,t,r){r=r||[];var i=this.getAxis();return r[0]=i.coordToData(i.toLocalCoord(e[i.orient==="horizontal"?0:1])),r},n.prototype.dataToPoint=function(e,t,r){var i=this.getAxis(),a=this.getRect();r=r||[];var s=i.orient==="horizontal"?0:1;return e instanceof Array&&(e=e[0]),r[s]=i.toGlobalCoord(i.dataToCoord(+e)),r[1-s]=s===0?a.y+a.height/2:a.x+a.width/2,r},n.prototype.convertToPixel=function(e,t,r){var i=dne(t);return i===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=dne(t);return i===this?this.pointToData(r):null},n})();function dne(n){var e=n.seriesModel,t=n.singleAxisModel;return t&&t.coordinateSystem||e&&e.coordinateSystem}function pje(n,e){var t=[];return n.eachComponent("singleAxis",function(r,i){var a=new fje(r,n,e);a.name="single_"+i,a.resize(r,e),r.coordinateSystem=a,t.push(a)}),n.eachSeries(function(r){if(r.get("coordinateSystem")==="singleAxis"){var i=r.getReferringComponents("singleAxis",fi).models[0];r.coordinateSystem=i&&i.coordinateSystem}}),t}var mje={create:pje,dimensions:Sge},fne=["x","y"],gje=["width","height"],vje=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,r,i,a,s){var o=i.axis,l=o.coordinateSystem,u=L5(l,1-NN(o)),c=l.dataToPoint(r)[0],h=a.get("type");if(h&&h!=="none"){var d=F7(a),f=yje[h](o,c,u);f.style=d,t.graphicKey=f.type,t.pointer=f}var p=O8(i);mge(r,t,p,i,a,s)},e.prototype.getHandleTransform=function(t,r,i){var a=O8(r,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var s=U7(r.axis,t,a);return{x:s[0],y:s[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,r,i,a){var s=i.axis,o=s.coordinateSystem,l=NN(s),u=L5(o,l),c=[t.x,t.y];c[l]+=r[l],c[l]=Math.min(u[1],c[l]),c[l]=Math.max(u[0],c[l]);var h=L5(o,1-l),d=(h[1]+h[0])/2,f=[d,d];return f[l]=c[l],{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:f,tooltipOption:{verticalAlign:"middle"}}},e})(B7),yje={line:function(n,e,t){var r=z7([e,t[0]],[e,t[1]],NN(n));return{type:"Line",subPixelOptimize:!0,shape:r}},shadow:function(n,e,t){var r=n.getBandWidth(),i=t[1]-t[0];return{type:"Rect",shape:gge([e-r/2,t[0]],[r,i],NN(n))}}};function NN(n){return n.isHorizontal()?0:1}function L5(n,e){var t=n.getRect();return[t[fne[e]],t[fne[e]]+t[gje[e]]]}var xje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="single",e})(Gr);function _je(n){sn(D2),cx.registerAxisPointerClass("SingleAxisPointer",vje),n.registerComponentView(xje),n.registerComponentView(cje),n.registerComponentModel(OL),cS(n,"single",OL,OL.defaultOption),n.registerCoordinateSystem("single",mje)}var bje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r,i){var a=sx(t);n.prototype.init.apply(this,arguments),pne(t,a)},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),pne(this.option,t)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.layoutMode="box",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:ve.color.axisLine,width:1,type:"solid"}},itemStyle:{color:ve.color.neutral00,borderWidth:1,borderColor:ve.color.neutral10},dayLabel:{show:!0,firstDay:0,position:"start",margin:ve.size.s,color:ve.color.secondary},monthLabel:{show:!0,position:"start",margin:ve.size.s,align:"center",formatter:null,color:ve.color.secondary},yearLabel:{show:!0,position:null,margin:ve.size.xl,formatter:null,color:ve.color.quaternary,fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e})(_n);function pne(n,e){var t=n.cellSize,r;Be(t)?r=t:r=n.cellSize=[t,t],r.length===1&&(r[1]=r[0]);var i=Ue([0,1],function(a){return s3e(e,a)&&(r[a]="auto"),r[a]!=null&&r[a]!=="auto"});id(n,e,{type:"box",ignoreSize:i})}var Sje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){var a=this.group;a.removeAll();var s=t.coordinateSystem,o=s.getRangeInfo(),l=s.getOrient(),u=r.getLocaleModel();this._renderDayRect(t,o,a),this._renderLines(t,o,l,a),this._renderYearText(t,o,l,a),this._renderMonthText(t,u,l,a),this._renderWeekText(t,u,o,l,a)},e.prototype._renderDayRect=function(t,r,i){for(var a=t.coordinateSystem,s=t.getModel("itemStyle").getItemStyle(),o=a.getCellWidth(),l=a.getCellHeight(),u=r.start.time;u<=r.end.time;u=a.getNextNDay(u,1).time){var c=a.dataToCalendarLayout([u],!1).tl,h=new fn({shape:{x:c[0],y:c[1],width:o,height:l},cursor:"default",style:s});i.add(h)}},e.prototype._renderLines=function(t,r,i,a){var s=this,o=t.coordinateSystem,l=t.getModel(["splitLine","lineStyle"]).getLineStyle(),u=t.get(["splitLine","show"]),c=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var h=r.start,d=0;h.time<=r.end.time;d++){p(h.formatedDate),d===0&&(h=o.getDateInfo(r.start.y+"-"+r.start.m));var f=h.date;f.setMonth(f.getMonth()+1),h=o.getDateInfo(f)}p(o.getNextNDay(r.end.time,1).formatedDate);function p(m){s._firstDayOfMonth.push(o.getDateInfo(m)),s._firstDayPoints.push(o.dataToCalendarLayout([m],!1).tl);var g=s._getLinePointsOfOneWeek(t,m,i);s._tlpoints.push(g[0]),s._blpoints.push(g[g.length-1]),u&&s._drawSplitline(g,l,a)}u&&this._drawSplitline(s._getEdgesPoints(s._tlpoints,c,i),l,a),u&&this._drawSplitline(s._getEdgesPoints(s._blpoints,c,i),l,a)},e.prototype._getEdgesPoints=function(t,r,i){var a=[t[0].slice(),t[t.length-1].slice()],s=i==="horizontal"?0:1;return a[0][s]=a[0][s]-r/2,a[1][s]=a[1][s]+r/2,a},e.prototype._drawSplitline=function(t,r,i){var a=new gs({z2:20,shape:{points:t},style:r});i.add(a)},e.prototype._getLinePointsOfOneWeek=function(t,r,i){for(var a=t.coordinateSystem,s=a.getDateInfo(r),o=[],l=0;l<7;l++){var u=a.getNextNDay(s.time,l),c=a.dataToCalendarLayout([u.time],!1);o[2*u.day]=c.tl,o[2*u.day+1]=c[i==="horizontal"?"bl":"tr"]}return o},e.prototype._formatterLabel=function(t,r){return Ke(t)&&t?e3e(t,r):St(t)?t(r):r.nameMap},e.prototype._yearTextPositionControl=function(t,r,i,a,s){var o=r[0],l=r[1],u=["center","bottom"];a==="bottom"?(l+=s,u=["center","top"]):a==="left"?o-=s:a==="right"?(o+=s,u=["center","top"]):l-=s;var c=0;return(a==="left"||a==="right")&&(c=Math.PI/2),{rotation:c,x:o,y:l,style:{align:u[0],verticalAlign:u[1]}}},e.prototype._renderYearText=function(t,r,i,a){var s=t.getModel("yearLabel");if(s.get("show")){var o=s.get("margin"),l=s.get("position");l||(l=i!=="horizontal"?"top":"left");var u=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],c=(u[0][0]+u[1][0])/2,h=(u[0][1]+u[1][1])/2,d=i==="horizontal"?0:1,f={top:[c,u[d][1]],bottom:[c,u[1-d][1]],left:[u[1-d][0],h],right:[u[d][0],h]},p=r.start.y;+r.end.y>+r.start.y&&(p=p+"-"+r.end.y);var m=s.get("formatter"),g={start:r.start.y,end:r.end.y,nameMap:p},v=this._formatterLabel(m,g),b=new On({z2:30,style:Er(s,{text:v}),silent:s.get("silent")});b.attr(this._yearTextPositionControl(b,f[l],i,l,o)),a.add(b)}},e.prototype._monthTextPositionControl=function(t,r,i,a,s){var o="left",l="top",u=t[0],c=t[1];return i==="horizontal"?(c=c+s,r&&(o="center"),a==="start"&&(l="bottom")):(u=u+s,r&&(l="middle"),a==="start"&&(o="right")),{x:u,y:c,align:o,verticalAlign:l}},e.prototype._renderMonthText=function(t,r,i,a){var s=t.getModel("monthLabel");if(s.get("show")){var o=s.get("nameMap"),l=s.get("margin"),u=s.get("position"),c=s.get("align"),h=[this._tlpoints,this._blpoints];(!o||Ke(o))&&(o&&(r=Pz(o)||r),o=r.get(["time","monthAbbr"])||[]);var d=u==="start"?0:1,f=i==="horizontal"?0:1;l=u==="start"?-l:l;for(var p=c==="center",m=s.get("silent"),g=0;g<h[d].length-1;g++){var v=h[d][g].slice(),b=this._firstDayOfMonth[g];if(p){var S=this._firstDayPoints[g];v[f]=(S[f]+h[0][g+1][f])/2}var w=s.get("formatter"),E=o[+b.m-1],T={yyyy:b.y,yy:(b.y+"").slice(2),MM:b.m,M:+b.m,nameMap:E},M=this._formatterLabel(w,T),P=new On({z2:30,style:Pe(Er(s,{text:M}),this._monthTextPositionControl(v,p,i,u,l)),silent:m});a.add(P)}}},e.prototype._weekTextPositionControl=function(t,r,i,a,s){var o="center",l="middle",u=t[0],c=t[1],h=i==="start";return r==="horizontal"?(u=u+a+(h?1:-1)*s[0]/2,o=h?"right":"left"):(c=c+a+(h?1:-1)*s[1]/2,l=h?"bottom":"top"),{x:u,y:c,align:o,verticalAlign:l}},e.prototype._renderWeekText=function(t,r,i,a,s){var o=t.getModel("dayLabel");if(o.get("show")){var l=t.coordinateSystem,u=o.get("position"),c=o.get("nameMap"),h=o.get("margin"),d=l.getFirstDayOfWeek();if(!c||Ke(c)){c&&(r=Pz(c)||r);var f=r.get(["time","dayOfWeekShort"]);c=f||Ue(r.get(["time","dayOfWeekAbbr"]),function(T){return T[0]})}var p=l.getNextNDay(i.end.time,7-i.lweek).time,m=[l.getCellWidth(),l.getCellHeight()];h=Xe(h,Math.min(m[1],m[0])),u==="start"&&(p=l.getNextNDay(i.start.time,-(7+i.fweek)).time,h=-h);for(var g=o.get("silent"),v=0;v<7;v++){var b=l.getNextNDay(p,v),S=l.dataToCalendarLayout([b.time],!1).center,w=v;w=Math.abs((v+d)%7);var E=new On({z2:30,style:Pe(Er(o,{text:c[w]}),this._weekTextPositionControl(S,a,u,h,m)),silent:g});s.add(E)}}},e.type="calendar",e})(Gr),R5=864e5,wje=(function(){function n(e,t,r){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=e,this._update(t,r)}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(e){e=ix(e);var t=e.getFullYear(),r=e.getMonth()+1,i=r<10?"0"+r:""+r,a=e.getDate(),s=a<10?"0"+a:""+a,o=e.getDay();return o=Math.abs((o+7-this.getFirstDayOfWeek())%7),{y:t+"",m:i,d:s,day:o,time:e.getTime(),formatedDate:t+"-"+i+"-"+s,date:e}},n.prototype.getNextNDay=function(e,t){return t=t||0,t===0?this.getDateInfo(e):(e=new Date(this.getDateInfo(e).time),e.setDate(e.getDate()+t),this.getDateInfo(e))},n.prototype._update=function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.getCellSize().slice(),s=this._model.getBoxLayoutParams(),o=this._orient==="horizontal"?[r,7]:[7,r];W([0,1],function(h){c(a,h)&&(s[i[h]]=a[h]*o[h])});var l={width:t.getWidth(),height:t.getHeight()},u=this._rect=qr(s,l);W([0,1],function(h){c(a,h)||(a[h]=u[i[h]]/o[h])});function c(h,d){return h[d]!=null&&h[d]!=="auto"}this._sw=a[0],this._sh=a[1]},n.prototype.dataToPoint=function(e,t,r){r=r||[],Be(e)&&(e=e[0]),t==null&&(t=!0);var i=this.getDateInfo(e),a=this._rangeInfo,s=i.formatedDate;if(t&&!(i.time>=a.start.time&&i.time<a.end.time+R5))return r[0]=r[1]=NaN,r;var o=i.day,l=this._getRangeInfo([a.start.time,s]).nthWeek;return this._orient==="vertical"?(r[0]=this._rect.x+o*this._sw+this._sw/2,r[1]=this._rect.y+l*this._sh+this._sh/2):(r[0]=this._rect.x+l*this._sw+this._sw/2,r[1]=this._rect.y+o*this._sh+this._sh/2),r},n.prototype.pointToData=function(e){var t=this.pointToDate(e);return t&&t.time},n.prototype.dataToLayout=function(e,t,r){r=r||{};var i=r.rect=r.rect||{},a=r.contentRect=r.contentRect||{},s=this.dataToPoint(e,t);return i.x=s[0]-this._sw/2,i.y=s[1]-this._sh/2,i.width=this._sw,i.height=this._sh,Rt.copy(a,i),Gy(a,this._lineWidth/2,!0,!0),r},n.prototype.dataToCalendarLayout=function(e,t){var r=this.dataToPoint(e,t);return{center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},n.prototype.pointToDate=function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,r=Math.floor((e[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(r,t-1,i):this._getDateByWeeksAndDay(t,r-1,i)},n.prototype.convertToPixel=function(e,t,r){var i=N5(t);return i===this?i.dataToPoint(r):null},n.prototype.convertToLayout=function(e,t,r){var i=N5(t);return i===this?i.dataToLayout(r):null},n.prototype.convertFromPixel=function(e,t,r){var i=N5(t);return i===this?i.pointToData(r):null},n.prototype.containPoint=function(e){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var e=this._model.get("range"),t;if(Be(e)&&e.length===1&&(e=e[0]),Be(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var i=this.getDateInfo(r),a=i.date;a.setMonth(a.getMonth()+1);var s=this.getNextNDay(a,-1);t=[i.formatedDate,s.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var o=this._getRangeInfo(t);return o.start.time>o.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(e){var t=[this.getDateInfo(e[0]),this.getDateInfo(e[1])],r;t[0].time>t[1].time&&(r=!0,t.reverse());var i=Math.floor(t[1].time/R5)-Math.floor(t[0].time/R5)+1,a=new Date(t[0].time),s=a.getDate(),o=t[1].date.getDate();a.setDate(s+i-1);var l=a.getDate();if(l!==o)for(var u=a.getTime()-t[1].time>0?1:-1;(l=a.getDate())!==o&&(a.getTime()-t[1].time)*u>0;)i-=u,a.setDate(l-u);var c=Math.floor((i+t[0].day+6)/7),h=r?-c+1:c-1;return r&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:i,weeks:c,nthWeek:h,fweek:t[0].day,lweek:t[1].day}},n.prototype._getDateByWeeksAndDay=function(e,t,r){var i=this._getRangeInfo(r);if(e>i.weeks||e===0&&t<i.fweek||e===i.weeks&&t>i.lweek)return null;var a=(e-1)*7-i.fweek+t,s=new Date(i.start.time);return s.setDate(+i.start.d+a),this.getDateInfo(s)},n.create=function(e,t){var r=[];return e.eachComponent("calendar",function(i){var a=new n(i,e,t);r.push(a),i.coordinateSystem=a}),e.eachComponent(function(i,a){_2({targetModel:a,coordSysType:"calendar",coordSysProvider:jhe})}),r},n.dimensions=["time","value"],n})();function N5(n){var e=n.calendarModel,t=n.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}function Tje(n){n.registerComponentModel(bje),n.registerComponentView(Sje),n.registerCoordinateSystem("calendar",wje)}var Ef={level:1,leaf:2,nonLeaf:3},Bf={none:0,all:1,body:2,corner:3};function B8(n,e,t){var r=e[Yt[t]].getCell(n);return!r&&Ln(n)&&n<0&&(r=e[Yt[1-t]].getUnitLayoutInfo(t,Math.round(n))),r}function wge(n){var e=n||[];return e[0]=e[0]||[],e[1]=e[1]||[],e[0][0]=e[0][1]=e[1][0]=e[1][1]=NaN,e}function Tge(n,e,t,r,i){mne(n[0],e,i,t,r,0),mne(n[1],e,i,t,r,1)}function mne(n,e,t,r,i,a){n[0]=1/0,n[1]=-1/0;var s=r[a],o=Be(s)?s:[s],l=o.length,u=!!t;if(l>=1?(gne(n,e,o,u,i,a,0),l>1&&gne(n,e,o,u,i,a,l-1)):n[0]=n[1]=NaN,u){var c=-i[Yt[1-a]].getLocatorCount(a),h=i[Yt[a]].getLocatorCount(a)-1;t===Bf.body?c=Ni(0,c):t===Bf.corner&&(h=Rl(-1,h)),h<c&&(c=h=NaN),Bs(n[0])&&(n[0]=c),Bs(n[1])&&(n[1]=h),n[0]=Ni(Rl(n[0],h),c),n[1]=Ni(Rl(n[1],h),c)}}function gne(n,e,t,r,i,a,s){var o=B8(t[s],i,a);if(!o){n[0]=n[1]=NaN;return}var l=o.id[Yt[a]],u=l,c=Mje(o);c&&(u+=c.span[Yt[a]]-1),n[0]=Rl(n[0],l,u),n[1]=Ni(n[1],l,u)}function oP(n,e){return Bs(n[e][0])||Bs(n[e][1])}function vne(n,e,t,r){e=e||Eje;for(var i=0;i<r;i++)e[i]=!1;for(;;){for(var a=!1,i=0;i<r;i++){var s=t[i];!e[i]&&s.cellMergeOwner&&Aje(n,s.locatorRange)&&(e[i]=!0,a=!0)}if(!a)break}}var Eje=[];function Aje(n,e){return!yne(n[0],e[0])||!yne(n[1],e[1])?!1:(n[0][0]=Rl(n[0][0],e[0][0]),n[0][1]=Ni(n[0][1],e[0][1]),n[1][0]=Rl(n[1][0],e[1][0]),n[1][1]=Ni(n[1][1],e[1][1]),!0)}function yne(n,e){return n[1]>=e[0]&&n[0]<=e[1]}function xne(n,e){n.id.set(e[0][0],e[1][0]),n.span.set(e[0][1]-n.id.x+1,e[1][1]-n.id.y+1)}function Cje(n,e){n[0][0]=e[0][0],n[0][1]=e[0][1],n[1][0]=e[1][0],n[1][1]=e[1][1]}function _ne(n,e,t,r){var i=B8(e[r][0],t,r),a=B8(e[r][1],t,r);n[Yt[r]]=n[Yi[r]]=NaN,i&&a&&(n[Yt[r]]=i.xy,n[Yi[r]]=a.xy+a.wh-i.xy)}function xT(n,e,t,r){return n[Yt[e]]=t,n[Yt[1-e]]=r,n}function Mje(n){return n&&(n.type===Ef.leaf||n.type===Ef.nonLeaf)?n:null}function kN(){return{x:NaN,y:NaN,width:NaN,height:NaN}}var bne=(function(){function n(e,t){this._cells=[],this._levels=[],this.dim=e,this.dimIdx=e==="x"?0:1,this._model=t,this._uniqueValueGen=Dje(e);var r=t.get("data",!0);r!=null&&!Be(r)&&(r=[]),r?this._initByDimModelData(r):this._initBySeriesData()}return n.prototype._initByDimModelData=function(e){var t=this,r=t._cells,i=t._levels,a=[],s=0;t._leavesCount=o(e,0,0),l();return;function o(u,c,h){var d=0;return u&&W(u,function(f,p){var m;Ke(f)?m={value:f}:Lt(f)?(m=f,f.value!=null&&!Ke(f.value)&&(m={value:null})):m={value:null};var g={type:Ef.nonLeaf,ordinal:NaN,level:h,firstLeafLocator:c,id:new Ct,span:xT(new Ct,t.dimIdx,1,1),option:m,xy:NaN,wh:NaN,dim:t,rect:kN()};s++,(a[c]||(a[c]=[])).push(g),i[h]||(i[h]={type:Ef.level,xy:NaN,wh:NaN,option:null,id:new Ct,dim:t});var v=o(m.children,c,h+1),b=Math.max(1,v);g.span[Yt[t.dimIdx]]=b,d+=b,c+=b}),d}function l(){for(var u=[];r.length<s;)for(var c=0;c<a.length;c++){var h=a[c].pop();if(h){h.ordinal=u.length;var d=h.option.value;u.push(d),r.push(h),t._uniqueValueGen.calcDupBase(d)}}t._uniqueValueGen.ensureValueUnique(u,r);var f=t._ordinalMeta=new MA({categories:u,needCollect:!1,deduplication:!1});t._scale=new sS({ordinalMeta:f});for(var p=0;p<t._leavesCount;p++){var m=t._cells[p];m.type=Ef.leaf,m.span[Yt[1-t.dimIdx]]=t._levels.length-m.level}t._initCellsId(),t._initLevelIdOptions()}},n.prototype._initBySeriesData=function(){var e=this;e._leavesCount=0,e._levels=[{type:Ef.level,xy:NaN,wh:NaN,option:null,id:new Ct,dim:e}],e._initLevelIdOptions();var t=e._ordinalMeta=new MA({needCollect:!0,deduplication:!0,onCollect:function(r,i){var a=e._cells[i]={type:Ef.leaf,ordinal:i,level:0,firstLeafLocator:i,id:new Ct,span:xT(new Ct,e.dimIdx,1,1),option:{value:r+""},xy:NaN,wh:NaN,dim:e,rect:kN()};e._leavesCount++,e._setCellId(a)}});e._scale=new sS({ordinalMeta:t})},n.prototype._setCellId=function(e){var t=this._levels.length,r=this.dimIdx;xT(e.id,r,e.firstLeafLocator,e.level-t)},n.prototype._initCellsId=function(){var e=this._levels.length,t=this.dimIdx;W(this._cells,function(r){xT(r.id,t,r.firstLeafLocator,r.level-e)})},n.prototype._initLevelIdOptions=function(){var e=this._levels.length,t=this.dimIdx,r=this._model.get("levels",!0);r=Be(r)?r:[],W(this._levels,function(i,a){xT(i.id,t,0,a-e),i.option=r[a]})},n.prototype.shouldShow=function(){return!!this._model.getShallow("show",!0)},n.prototype.resetLayoutIterator=function(e,t,r,i){if(e=e||new pg,t===this.dimIdx){var a=this._leavesCount,s=r!=null?Math.max(0,r):0;i=i!=null?Math.min(i,a):a,e.reset(this._cells,s,s+i)}else{var a=this._levels.length,s=r!=null?Math.max(0,r+a):0;i=i!=null?Math.min(i,a):a,e.reset(this._levels,s,s+i)}return e},n.prototype.resetCellIterator=function(e){return(e||new pg).reset(this._cells,0)},n.prototype.resetLevelIterator=function(e){return(e||new pg).reset(this._levels,0)},n.prototype.getLayout=function(e,t,r){var i=this.getUnitLayoutInfo(t,r);e[Yt[t]]=i?i.xy:NaN,e[Yi[t]]=i?i.wh:NaN},n.prototype.getUnitLayoutInfo=function(e,t){return e===this.dimIdx?t<this._leavesCount?this._cells[t]:void 0:this._levels[t+this._levels.length]},n.prototype.getCell=function(e){var t=this._scale.parse(e);return Bs(t)?void 0:this._cells[t]},n.prototype.getLocatorCount=function(e){return e===this.dimIdx?this._leavesCount:this._levels.length},n.prototype.getOrdinalMeta=function(){return this._ordinalMeta},n})();function Dje(n){var e=n.toUpperCase(),t=new RegExp("^"+e+"([0-9]+)$"),r=0;function i(o){var l;o!=null&&(l=o.match(t))&&(r=Ni(r,+l[1]+1))}function a(){return""+e+r++}function s(o,l){for(var u=ct(),c=0;c<o.length;c++){var h=o[c];(h==null||u.get(h)!=null)&&(o[c]=h=a(),l[c].option=Pt({value:h},l[c].option)),u.set(h,!0)}}return{calcDupBase:i,ensureValueUnique:s}}var Sne=(function(){function n(e,t,r){this._model=t,this._dims=r,this._kind=e,this._cellMergeOwnerList=[]}return n.prototype._ensureCellMap=function(){var e=this,t=e._cellMap;return t||(t=e._cellMap=ct(),r()),t;function r(){var a=[],s=e._model.getShallow("data");s&&!Be(s)&&(s=null),W(s,function(p,m){if(!(!Lt(p)||!Be(p.coord))){var g=wge([]),v=null;if(Tge(g,v,p.coord,e._dims,p.coordClamp?Bf[e._kind]:Bf.none),!(oP(g,0)||oP(g,1))){var b=p&&p.mergeCells,S={id:new Ct,span:new Ct,locatorRange:g,option:p,cellMergeOwner:b};xne(S,g),a.push(S)}}});for(var o=[],l=0;l<a.length;l++){var u=a[l];if(u.cellMergeOwner){var c=u.locatorRange;vne(c,o,a,l);for(var h=0;h<l;h++)o[h]&&(a[h].cellMergeOwner=!1);if(c[0][0]!==u.id.x||c[1][0]!==u.id.y){u.cellMergeOwner=!1;var d=Pe({},u.option);d.coord=null;var f={id:new Ct,span:new Ct,locatorRange:c,option:d,cellMergeOwner:!0};xne(f,c),a.push(f)}}}W(a,function(p){var m=i(p.id.x,p.id.y);if(p.cellMergeOwner&&(m.cellMergeOwner=!0,m.span=p.span,m.locatorRange=p.locatorRange,m.spanRect=kN(),e._cellMergeOwnerList.push(m)),!(!p.cellMergeOwner&&!p.option))for(var g=0;g<p.span.y;g++)for(var v=0;v<p.span.x;v++){var b=i(p.id.x+v,p.id.y+g);b.option=p.option,p.cellMergeOwner&&(b.inSpanOf=m)}})}function i(a,s){var o=wne(a,s),l=t.get(o);return l||(l=t.set(o,{id:new Ct(a,s),option:null,inSpanOf:null,span:null,spanRect:null,locatorRange:null,cellMergeOwner:!1})),l}},n.prototype.getCell=function(e){return this._ensureCellMap().get(wne(e[0],e[1]))},n.prototype.travelExistingCells=function(e){this._ensureCellMap().each(e)},n.prototype.expandRangeByCellMerge=function(e){if(!oP(e,0)&&!oP(e,1)&&e[0][0]===e[0][1]&&e[1][0]===e[1][1]){k5[0]=e[0][0],k5[1]=e[1][0];var t=this.getCell(k5),r=t&&t.inSpanOf;if(r){Cje(e,r.locatorRange);return}}var i=this._cellMergeOwnerList;vne(e,null,i,i.length)},n})(),k5=[];function wne(n,e){return n+"|"+e}var j7={show:!0,color:ve.color.secondary,overflow:"break",lineOverflow:"truncate",padding:[2,3,2,3],distance:0};function W7(n){return{color:"none",borderWidth:1,borderColor:n?"none":ve.color.borderTint}}var Tne={show:!0,label:j7,itemStyle:W7(!1),silent:void 0,dividerLineStyle:{width:1,color:ve.color.border}},Ije={label:j7,itemStyle:W7(!1),silent:void 0},Pje={label:j7,itemStyle:W7(!0),silent:void 0},Lje={z:-50,left:"10%",top:"10%",right:"10%",bottom:"10%",x:Tne,y:Tne,body:Ije,corner:Pje,backgroundStyle:{color:"none",borderColor:ve.color.axisLine,borderWidth:1}},Rje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){var t=this._dimModels={x:new Ene(this.get("x",!0)||{}),y:new Ene(this.get("y",!0)||{})};t.x.option.type=t.y.option.type="category";var r=t.x.dim=new bne("x",t.x),i=t.y.dim=new bne("y",t.y),a={x:r,y:i};this._body=new Sne("body",new Sn(this.getShallow("body")),a),this._corner=new Sne("corner",new Sn(this.getShallow("corner")),a)},e.prototype.getDimensionModel=function(t){return this._dimModels[t]},e.prototype.getBody=function(){return this._body},e.prototype.getCorner=function(){return this._corner},e.type="matrix",e.layoutMode="box",e.defaultOption=Lje,e})(_n),Ene=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getOrdinalMeta=function(){return this.dim.getOrdinalMeta()},e})(Sn),lP=Math.round,Nje=0,kje=99,Oje={normal:25,special:100},Bje={normal:50,special:125},Fje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r){this.group.removeAll();var i=this.group,a=t.coordinateSystem,s=a.getRect(),o=t.getDimensionModel("x"),l=t.getDimensionModel("y"),u=o.dim,c=l.dim;Uje(i,t,r),zje(i,t,u,c,r);var h=t.getShallow("borderZ2",!0),d=dt(h,kje),f=d-1,p=t.getModel("backgroundStyle").getItemStyle(["borderWidth"]);p.lineWidth=0;var m=t.getModel("backgroundStyle").getItemStyle(["color","decal","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]);m.fill="none";var g=F8(s.clone(),p,Nje),v=F8(s.clone(),m,d);g.silent=!0,v.silent=!0,i.add(g),i.add(v);var b=u.getUnitLayoutInfo(0,0),S=c.getUnitLayoutInfo(1,0);b&&S&&(u.shouldShow()&&i.add(Ane({x1:s.x,y1:S.xy,x2:s.x+s.width,y2:S.xy},o.getModel("dividerLineStyle").getLineStyle(),f)),c.shouldShow()&&i.add(Ane({x1:b.xy,y1:s.y,x2:b.xy,y2:s.y+s.height},l.getModel("dividerLineStyle").getLineStyle(),f)))},e.type="matrix",e})(Gr);function Uje(n,e,t){r(0),r(1);function r(i){var a=e.getDimensionModel(Yt[i]),s=a.dim;if(s.shouldShow())for(var o=a.getModel("itemStyle"),l=a.getModel("label"),u=e.getShallow("tooltip",!0),c=[],h=s.resetCellIterator();h.next();){var d=h.item,f={};Rt.copy(f,d.rect),WG(c,d.id.x,d.id.y),Ege(c,e,n,t,d.option,o,l,a,f,d.option.value,Bje,u)}}}function zje(n,e,t,r,i){a("body",e.getBody(),t,r),t.shouldShow()&&r.shouldShow()&&a("corner",e.getCorner(),r,t);function a(s,o,l,u){var c=new Sn(e.getShallow(s,!0)),h=c.getModel("itemStyle"),d=c.getModel("label"),f=new pg,p=new pg,m=[],g=e.getShallow("tooltip",!0);for(u.resetLayoutIterator(p,1);p.next();)for(l.resetLayoutIterator(f,0);f.next();){var v=f.item,b=p.item;WG(m,v.id.x,b.id.y);var S=o.getCell(m);if(!(S&&S.inSpanOf&&S.inSpanOf!==S)){var w={};S&&S.span?Rt.copy(w,S.spanRect):(v.dim.getLayout(w,0,m[0]),b.dim.getLayout(w,1,m[1]));var E=S?S.option:null;Ege(m,e,n,i,E,h,d,c,w,E?E.value:null,Oje,g)}}}}function Ege(n,e,t,r,i,a,s,o,l,u,c,h){var d;uP.option=i?i.itemStyle:null,uP.parentModel=a,u_.option=i,u_.parentModel=o;var f=dt(u_.getShallow("z2"),i&&i.itemStyle?c.special:c.normal),p=h&&h.show,m=F8(l,uP.getItemStyle(),f);t.add(m);var g=u_.get("cursor");g!=null&&m.attr("cursor",g);var v;if(u!=null){var b=u+"";if(c_.option=i?i.label:null,c_.parentModel=s,c_.ecModel=r,Aa(m,{normal:c_},{defaultText:b,autoOverflowArea:!0,layoutRect:Tt(m.shape)}),v=m.getTextContent(),v){v.z2=f+1;var S=v.style;if(S&&S.overflow&&S.overflow!=="none"&&S.lineOverflow){var w={};Rt.copy(w,l),Gy(w,(((d=m.style)===null||d===void 0?void 0:d.lineWidth)||0)/2,!0,!0),m.updateInnerText(),v.getLocalTransform(cP),Ic(cP,cP),Rt.applyTransform(w,w,cP),v.setClipPath(new fn({shape:w}))}}op({el:m,componentModel:e,itemName:b,itemTooltipOption:h,formatterParamsExtra:{xyLocator:n.slice()}})}if(v){var E=c_.get("silent");E==null&&(E=!p),v.silent=E,v.ignoreHostSilent=!0}var T=u_.get("silent");T==null&&(T=!m.style||m.style.fill==="none"||!m.style.fill),m.silent=T,YF(u_),YF(uP),YF(c_)}var u_=new Sn,uP=new Sn,c_=new Sn,cP=[];function F8(n,e,t){var r=e.lineWidth;if(r){var i=n.x+n.width,a=n.y+n.height;n.x=Il(n.x,r,!0),n.y=Il(n.y,r,!0),n.width=Il(i,r,!0)-n.x,n.height=Il(a,r,!0)-n.y}return new fn({shape:n,style:e,z2:t})}function Ane(n,e,t){var r=e.lineWidth;return r&&(lP(n.x1*2)===lP(n.x2*2)&&(n.x1=n.x2=Il(n.x1,r,!0)),lP(n.y1*2)===lP(n.y2*2)&&(n.y1=n.y2=Il(n.y1,r,!0))),new Xi({shape:n,style:e,silent:!0,z2:t})}var Vje=(function(){function n(e,t,r){this.dimensions=n.dimensions,this.type="matrix",this._model=e;var i=this._dimModels={x:e.getDimensionModel("x"),y:e.getDimensionModel("y")};this._dims={x:i.x.dim,y:i.y.dim},this._resize(e,r)}return n.getDimensionsInfo=function(){return[{name:"x",type:"ordinal"},{name:"y",type:"ordinal"},{name:"value"}]},n.create=function(e,t){var r=[];return e.eachComponent("matrix",function(i){var a=new n(i,e,t);r.push(a),i.coordinateSystem=a}),e.eachComponent(function(i,a){_2({targetModel:a,coordSysType:"matrix",coordSysProvider:jhe})}),r},n.prototype.getRect=function(){return this._rect},n.prototype._resize=function(e,t){var r=this._dims,i=this._dimModels,a=this._rect=qr(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});Cne(i,r,a,0),Cne(i,r,a,1),Mne(0,r),Mne(1,r),Dne(this._model.getBody(),r),Dne(this._model.getCorner(),r)},n.prototype.dataToPoint=function(e,t,r){return r=r||[],this.dataToLayout(e,t,_T),r[0]=_T.rect.x+_T.rect.width/2,r[1]=_T.rect.y+_T.rect.height/2,r},n.prototype.dataToLayout=function(e,t,r){var i=this._dims;r=r||{};var a=r.rect=r.rect||{};a.x=a.y=a.width=a.height=NaN;var s=r.matrixXYLocatorRange=wge(r.matrixXYLocatorRange);return Be(e)&&(Tge(s,null,e,i,dt(t&&t.clamp,Bf.none)),(!t||!t.ignoreMergeCells)&&((!t||t.clamp!==Bf.corner)&&this._model.getBody().expandRangeByCellMerge(s),(!t||t.clamp!==Bf.body)&&this._model.getCorner().expandRangeByCellMerge(s)),_ne(a,s,i,0),_ne(a,s,i,1)),r},n.prototype.pointToData=function(e,t,r){var i=this._dims;return Ine(Jc,0,i,e,t&&t.clamp),Ine(Jc,1,i,e,t&&t.clamp),r=r||[],r[0]=r[1]=NaN,Jc.y===ls.inCorner&&Jc.x===ls.inBody?Pne(Jc,r,0,i):Jc.x===ls.inCorner&&Jc.y===ls.inBody?Pne(Jc,r,1,i):(Lne(Jc,r,0,i),Lne(Jc,r,1,i)),r},n.prototype.convertToPixel=function(e,t,r,i){var a=B5(t);return a===this?a.dataToPoint(r,i):void 0},n.prototype.convertToLayout=function(e,t,r,i){var a=B5(t);return a===this?a.dataToLayout(r,i):void 0},n.prototype.convertFromPixel=function(e,t,r,i){var a=B5(t);return a===this?a.pointToData(r,i):void 0},n.prototype.containPoint=function(e){return this._rect.contain(e[0],e[1])},n.dimensions=["x","y","value"],n})(),_T={rect:kN()},hP=new pg,O5=new pg;function Cne(n,e,t,r){for(var i=1-r,a=e[Yt[r]],s=e[Yt[i]],o=s.shouldShow(),l=a.resetCellIterator();l.next();)l.item.wh=l.item.xy=NaN;for(var u=s.resetLayoutIterator(null,r);u.next();)u.item.wh=u.item.xy=NaN;for(var c=t[Yi[r]],h=a.getLocatorCount(r)+s.getLocatorCount(r),d=new Sn,f=s.resetLevelIterator();f.next();)d.option=f.item.option,d.parentModel=n[Yt[i]],g(f.item,o?d.get("levelSize"):0);for(var p=new Sn,m=a.resetCellIterator();m.next();)m.item.type===Ef.leaf&&(p.option=m.item.option,p.parentModel=void 0,g(m.item,p.get("size")));function g(M,P){var I=Hje(P,r,t);Bs(I)||(M.wh=U8(I,c),c=U8(c-M.wh),h--)}var v=h?c/h:0,b=!h&&c>=1,S=t[Yt[r]],w=a.getLocatorCount(r)-1,E=new pg;for(s.resetLayoutIterator(E,r);E.next();)T(E.item);for(a.resetLayoutIterator(E,r);E.next();)T(E.item);function T(M){Bs(M.wh)&&(M.wh=v),M.xy=S,M.id[Yt[r]]===w&&!b&&(M.wh=t[Yt[r]]+t[Yi[r]]-M.xy),S+=M.wh}}function Mne(n,e){for(var t=e[Yt[n]].resetCellIterator();t.next();){var r=t.item;ON(r.rect,n,r.id,r.span,e),ON(r.rect,1-n,r.id,r.span,e),r.type===Ef.nonLeaf&&(r.xy=r.rect[Yt[n]],r.wh=r.rect[Yi[n]])}}function Dne(n,e){n.travelExistingCells(function(t){var r=t.span;if(r){var i=t.spanRect,a=t.id;ON(i,0,a,r,e),ON(i,1,a,r,e)}})}function ON(n,e,t,r,i){n[Yi[e]]=0;var a=t[Yt[e]],s=a<0?i[Yt[1-e]]:i[Yt[e]],o=s.getUnitLayoutInfo(e,t[Yt[e]]);if(n[Yt[e]]=o.xy,n[Yi[e]]=o.wh,r[Yt[e]]>1){var l=s.getUnitLayoutInfo(e,t[Yt[e]]+r[Yt[e]]-1);n[Yi[e]]=l.xy+l.wh-o.xy}}function Hje(n,e,t){var r=ZR(n,t[Yi[e]]);return U8(r,t[Yi[e]])}function U8(n,e){return Math.max(Math.min(n,dt(e,1/0)),0)}function B5(n){var e=n.matrixModel,t=n.seriesModel,r=e?e.coordinateSystem:t?t.coordinateSystem:null;return r}var ls={inBody:1,inCorner:2,outside:3},Jc={x:null,y:null,point:[]};function Ine(n,e,t,r,i){var a=t[Yt[e]],s=t[Yt[1-e]],o=a.getUnitLayoutInfo(e,a.getLocatorCount(e)-1),l=a.getUnitLayoutInfo(e,0),u=s.getUnitLayoutInfo(e,-s.getLocatorCount(e)),c=s.shouldShow()?s.getUnitLayoutInfo(e,-1):null,h=n.point[e]=r[e];if(!l&&!c){n[Yt[e]]=ls.outside;return}if(i===Bf.body){l?(n[Yt[e]]=ls.inBody,h=Rl(o.xy+o.wh,Ni(l.xy,h)),n.point[e]=h):n[Yt[e]]=ls.outside;return}else if(i===Bf.corner){c?(n[Yt[e]]=ls.inCorner,h=Rl(c.xy+c.wh,Ni(u.xy,h)),n.point[e]=h):n[Yt[e]]=ls.outside;return}var d=l?l.xy:c?c.xy+c.wh:NaN,f=u?u.xy:d,p=o?o.xy+o.wh:d;if(h<f){if(!i){n[Yt[e]]=ls.outside;return}h=f}else if(h>p){if(!i){n[Yt[e]]=ls.outside;return}h=p}n.point[e]=h,n[Yt[e]]=d<=h&&h<=p?ls.inBody:f<=h&&h<=d?ls.inCorner:ls.outside}function Pne(n,e,t,r){var i=1-t;if(n[Yt[t]]!==ls.outside)for(r[Yt[t]].resetCellIterator(O5);O5.next();){var a=O5.item;if(Rne(n.point[t],a.rect,t)&&Rne(n.point[i],a.rect,i)){e[t]=a.ordinal,e[i]=a.id[Yt[i]];return}}}function Lne(n,e,t,r){if(n[Yt[t]]!==ls.outside){var i=n[Yt[t]]===ls.inCorner?r[Yt[1-t]]:r[Yt[t]];for(i.resetLayoutIterator(hP,t);hP.next();)if(Gje(n.point[t],hP.item)){e[t]=hP.item.id[Yt[t]];return}}}function Gje(n,e){return e.xy<=n&&n<=e.xy+e.wh}function Rne(n,e,t){return e[Yt[t]]<=n&&n<=e[Yt[t]]+e[Yi[t]]}function jje(n){n.registerComponentModel(Rje),n.registerComponentView(Fje),n.registerCoordinateSystem("matrix",Vje)}function Wje(n,e){var t=n.existing;if(e.id=n.keyInfo.id,!e.type&&t&&(e.type=t.type),e.parentId==null){var r=e.parentOption;r?e.parentId=r.id:t&&(e.parentId=t.parentId)}e.parentOption=null}function Nne(n,e){var t;return W(e,function(r){n[r]!=null&&n[r]!=="auto"&&(t=!0)}),t}function Xje(n,e,t){var r=Pe({},t),i=n[e],a=t.$action||"merge";a==="merge"?i?(en(i,r,!0),id(i,r,{ignoreSize:!0}),qhe(t,i),dP(t,i),dP(t,i,"shape"),dP(t,i,"style"),dP(t,i,"extra"),t.clipPath=i.clipPath):n[e]=r:a==="replace"?n[e]=r:a==="remove"&&i&&(n[e]=null)}var Age=["transition","enterFrom","leaveTo"],$je=Age.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function dP(n,e,t){if(t&&(!n[t]&&e[t]&&(n[t]={}),n=n[t],e=e[t]),!(!n||!e))for(var r=t?Age:$je,i=0;i<r.length;i++){var a=r[i];n[a]==null&&e[a]!=null&&(n[a]=e[a])}}function Yje(n,e){if(n&&(n.hv=e.hv=[Nne(e,["left","right"]),Nne(e,["top","bottom"])],n.type==="group")){var t=n,r=e;t.width==null&&(t.width=r.width=0),t.height==null&&(t.height=r.height=0)}}var qje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.mergeOption=function(t,r){var i=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,t,r),this.option.elements=i},e.prototype.optionUpdated=function(t,r){var i=this.option,a=(r?i:t).elements,s=i.elements=r?[]:i.elements,o=[];this._flatten(a,o,null);var l=Bce(s,o,"normalMerge"),u=this._elOptionsToUpdate=[];W(l,function(c,h){var d=c.newOption;d&&(u.push(d),Wje(c,d),Xje(s,h,d),Yje(s[h],d))},this),i.elements=er(s,function(c){return c&&delete c.$action,c!=null})},e.prototype._flatten=function(t,r,i){W(t,function(a){if(a){i&&(a.parentOption=i),r.push(a);var s=a.children;s&&s.length&&this._flatten(s,r,a),delete a.children}},this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e})(_n),kne={path:null,compoundPath:null,group:wt,image:Ka,text:On},vu=mn(),Kje=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this._elMap=ct()},e.prototype.render=function(t,r,i){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,i)},e.prototype._updateElements=function(t){var r=t.useElOptionsToUpdate();if(r){var i=this._elMap,a=this.group,s=t.get("z"),o=t.get("zlevel");W(r,function(l){var u=oa(l.id,null),c=u!=null?i.get(u):null,h=oa(l.parentId,null),d=h!=null?i.get(h):a,f=l.type,p=l.style;f==="text"&&p&&l.hv&&l.hv[1]&&(p.textVerticalAlign=p.textBaseline=p.verticalAlign=p.align=null);var m=l.textContent,g=l.textConfig;if(p&&rge(p,f,!!g,!!m)){var v=ige(p,f,!0);!g&&v.textConfig&&(g=l.textConfig=v.textConfig),!m&&v.textContent&&(m=v.textContent)}var b=Zje(l),S=l.$action||"merge",w=S==="merge",E=S==="replace";if(w){var T=!c,M=c;T?M=One(u,d,l.type,i):(M&&(vu(M).isNew=!1),lge(M)),M&&(NL(M,b,t,{isInit:T}),Bne(M,l,s,o))}else if(E){BL(c,l,i,t);var P=One(u,d,l.type,i);P&&(NL(P,b,t,{isInit:!0}),Bne(P,l,s,o))}else S==="remove"&&(sge(c,l),BL(c,l,i,t));var I=i.get(u);if(I&&m)if(w){var D=I.getTextContent();D?D.attr(m):I.setTextContent(new On(m))}else E&&I.setTextContent(new On(m));if(I){var R=l.clipPath;if(R){var B=R.type,k=void 0,T=!1;if(w){var V=I.getClipPath();T=!V||vu(V).type!==B,k=T?z8(B):V}else E&&(T=!0,k=z8(B));I.setClipPath(k),NL(k,R,t,{isInit:T}),LN(k,R.keyframeAnimation,t)}var G=vu(I);I.setTextConfig(g),G.option=l,Qje(I,t,l),op({el:I,componentModel:t,itemName:I.name,itemTooltipOption:l.tooltip}),LN(I,l.keyframeAnimation,t)}})}},e.prototype._relocate=function(t,r){for(var i=t.option.elements,a=this.group,s=this._elMap,o=r.getWidth(),l=r.getHeight(),u=["x","y"],c=0;c<i.length;c++){var h=i[c],d=oa(h.id,null),f=d!=null?s.get(d):null;if(!(!f||!f.isGroup)){var p=f.parent,m=p===a,g=vu(f),v=vu(p);g.width=Xe(g.option.width,m?o:v.width)||0,g.height=Xe(g.option.height,m?l:v.height)||0}}for(var c=i.length-1;c>=0;c--){var h=i[c],d=oa(h.id,null),f=d!=null?s.get(d):null;if(f){var p=f.parent,v=vu(p),b=p===a?{width:o,height:l}:{width:v.width,height:v.height},S={},w=v3(f,h,b,null,{hv:h.hv,boundingMode:h.bounding},S);if(!vu(f).isNew&&w){for(var E=h.transition,T={},M=0;M<u.length;M++){var P=u[M],I=S[P];E&&(Oy(E)||Jt(E,P)>=0)?T[P]=I:f[P]=I}Vn(f,T,t,0)}else f.attr(S)}}},e.prototype._clear=function(){var t=this,r=this._elMap;r.each(function(i){BL(i,vu(i).option,r,t._lastGraphicModel)}),this._elMap=ct()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e})(Gr);function z8(n){var e=it(kne,n)?kne[n]:nN(n),t=new e({});return vu(t).type=n,t}function One(n,e,t,r){var i=z8(t);return e.add(i),r.set(n,i),vu(i).id=n,vu(i).isNew=!0,i}function BL(n,e,t,r){var i=n&&n.parent;i&&(n.type==="group"&&n.traverse(function(a){BL(a,e,t,r)}),L3(n,e,r),t.removeKey(vu(n).id))}function Bne(n,e,t,r){n.isGroup||W([["cursor",Nu.prototype.cursor],["zlevel",r||0],["z",t||0],["z2",0]],function(i){var a=i[0];it(e,a)?n[a]=dt(e[a],i[1]):n[a]==null&&(n[a]=i[1])}),W(An(e),function(i){if(i.indexOf("on")===0){var a=e[i];n[i]=St(a)?a:null}}),it(e,"draggable")&&(n.draggable=e.draggable),e.name!=null&&(n.name=e.name),e.id!=null&&(n.id=e.id)}function Zje(n){return n=Pe({},n),W(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Whe),function(e){delete n[e]}),n}function Qje(n,e,t){var r=Ft(n).eventData;!n.silent&&!n.ignore&&!r&&(r=Ft(n).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:n.name}),r&&(r.info=t.info)}function Jje(n){n.registerComponentModel(qje),n.registerComponentView(Kje),n.registerPreprocessor(function(e){var t=e.graphic;Be(t)?!t[0]||!t[0].elements?e.graphic=[{elements:t}]:e.graphic=[e.graphic[0]]:t&&!t.elements&&(e.graphic=[{elements:[t]}])})}var Fne=["x","y","radius","angle","single"],e7e=["cartesian2d","polar","singleAxis"];function t7e(n){var e=n.get("coordinateSystem");return Jt(e7e,e)>=0}function lg(n){return n+"Axis"}function n7e(n,e){var t=ct(),r=[],i=ct();n.eachComponent({mainType:"dataZoom",query:e},function(c){i.get(c.uid)||o(c)});var a;do a=!1,n.eachComponent("dataZoom",s);while(a);function s(c){!i.get(c.uid)&&l(c)&&(o(c),a=!0)}function o(c){i.set(c.uid,!0),r.push(c),u(c)}function l(c){var h=!1;return c.eachTargetAxis(function(d,f){var p=t.get(d);p&&p[f]&&(h=!0)}),h}function u(c){c.eachTargetAxis(function(h,d){(t.get(h)||t.set(h,[]))[d]=!0})}return r}function Cge(n){var e=n.ecModel,t={infoList:[],infoMap:ct()};return n.eachTargetAxis(function(r,i){var a=e.getComponent(lg(r),i);if(a){var s=a.getCoordSysModel();if(s){var o=s.uid,l=t.infoMap.get(o);l||(l={model:s,axisModels:[]},t.infoList.push(l),t.infoMap.set(o,l)),l.axisModels.push(a)}}}),t}var F5=(function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},n})(),UA=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return e.prototype.init=function(t,r,i){var a=Une(t);this.settledOption=a,this.mergeDefaultAndTheme(t,i),this._doInit(a)},e.prototype.mergeOption=function(t){var r=Une(t);en(this.option,t,!0),en(this.settledOption,r,!0),this._doInit(r)},e.prototype._doInit=function(t){var r=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;W([["start","startValue"],["end","endValue"]],function(a,s){this._rangePropMode[s]==="value"&&(r[a[0]]=i[a[0]]=null)},this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),r=this._targetAxisInfoMap=ct(),i=this._fillSpecifiedTargetAxis(r);i?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(a){a.indexList.length&&(this._noTarget=!1)},this)},e.prototype._fillSpecifiedTargetAxis=function(t){var r=!1;return W(Fne,function(i){var a=this.getReferringComponents(lg(i),kRe);if(a.specified){r=!0;var s=new F5;W(a.models,function(o){s.add(o.componentIndex)}),t.set(i,s)}},this),r},e.prototype._fillAutoTargetAxisByOrient=function(t,r){var i=this.ecModel,a=!0;if(a){var s=r==="vertical"?"y":"x",o=i.findComponents({mainType:s+"Axis"});l(o,s)}if(a){var o=i.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}});l(o,"single")}function l(u,c){var h=u[0];if(h){var d=new F5;if(d.add(h.componentIndex),t.set(c,d),a=!1,c==="x"||c==="y"){var f=h.getReferringComponents("grid",fi).models[0];f&&W(u,function(p){h.componentIndex!==p.componentIndex&&f===p.getReferringComponents("grid",fi).models[0]&&d.add(p.componentIndex)})}}}a&&W(Fne,function(u){if(a){var c=i.findComponents({mainType:lg(u),filter:function(d){return d.get("type",!0)==="category"}});if(c[0]){var h=new F5;h.add(c[0].componentIndex),t.set(u,h),a=!1}}},this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis(function(r){!t&&(t=r)},this),t==="y"?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var r=this._rangePropMode,i=this.get("rangeMode");W([["start","startValue"],["end","endValue"]],function(a,s){var o=t[a[0]]!=null,l=t[a[1]]!=null;o&&!l?r[s]="percent":!o&&l?r[s]="value":i?r[s]=i[s]:o&&(r[s]="percent")})},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis(function(r,i){t==null&&(t=this.ecModel.getComponent(lg(r),i))},this),t},e.prototype.eachTargetAxis=function(t,r){this._targetAxisInfoMap.each(function(i,a){W(i.indexList,function(s){t.call(r,a,s)})})},e.prototype.getAxisProxy=function(t,r){var i=this.getAxisModel(t,r);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,r){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[r])return this.ecModel.getComponent(lg(t),r)},e.prototype.setRawRange=function(t){var r=this.option,i=this.settledOption;W([["start","startValue"],["end","endValue"]],function(a){(t[a[0]]!=null||t[a[1]]!=null)&&(r[a[0]]=i[a[0]]=t[a[0]],r[a[1]]=i[a[1]]=t[a[1]])},this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var r=this.option;W(["start","startValue","end","endValue"],function(i){r[i]=t[i]})},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,r){if(t==null&&r==null){var i=this.findRepresentativeAxisProxy();if(i)return i.getDataValueWindow()}else return this.getAxisProxy(t,r).getDataValueWindow()},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var r,i=this._targetAxisInfoMap.keys(),a=0;a<i.length;a++)for(var s=i[a],o=this._targetAxisInfoMap.get(s),l=0;l<o.indexList.length;l++){var u=this.getAxisProxy(s,o.indexList[l]);if(u.hostedBy(this))return u;r||(r=u)}return r},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e})(_n);function Une(n){var e={};return W(["start","end","startValue","endValue","throttle"],function(t){n.hasOwnProperty(t)&&(e[t]=n[t])}),e}var r7e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(UA),X7=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i,a){this.dataZoomModel=t,this.ecModel=r,this.api=i},e.type="dataZoom",e})(Gr),i7e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.select",e})(X7),B_=W,zne=Du,a7e=(function(){function n(e,t,r,i){this._dimName=e,this._axisIndex=t,this.ecModel=i,this._dataZoomModel=r}return n.prototype.hostedBy=function(e){return this._dataZoomModel===e},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries(function(t){if(t7e(t)){var r=lg(this._dimName),i=t.getReferringComponents(r,fi).models[0];i&&this._axisIndex===i.componentIndex&&e.push(t)}},this),e},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return Tt(this._minMaxSpan)},n.prototype.calculateDataWindow=function(e){var t=this._dataExtent,r=this.getAxisModel(),i=r.axis.scale,a=this._dataZoomModel.getRangePropMode(),s=[0,100],o=[],l=[],u;B_(["start","end"],function(d,f){var p=e[d],m=e[d+"Value"];a[f]==="percent"?(p==null&&(p=s[f]),m=i.parse(Jn(p,s,t))):(u=!0,m=m==null?t[f]:i.parse(m),p=Jn(m,t,s)),l[f]=m==null||isNaN(m)?t[f]:m,o[f]=p==null||isNaN(p)?s[f]:p}),zne(l),zne(o);var c=this._minMaxSpan;u?h(l,o,t,s,!1):h(o,l,s,t,!0);function h(d,f,p,m,g){var v=g?"Span":"ValueSpan";Tg(0,d,p,"all",c["min"+v],c["max"+v]);for(var b=0;b<2;b++)f[b]=Jn(d[b],p,m,!0),g&&(f[b]=i.parse(f[b]))}return{valueWindow:l,percentWindow:o}},n.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=s7e(this,this._dimName,t),this._updateMinMaxSpan();var r=this.calculateDataWindow(e.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(e,t){if(e!==this._dataZoomModel)return;var r=this._dimName,i=this.getTargetSeriesModels(),a=e.get("filterMode"),s=this._valueWindow;if(a==="none")return;B_(i,function(l){var u=l.getData(),c=u.mapDimensionsAll(r);if(c.length){if(a==="weakFilter"){var h=u.getStore(),d=Ue(c,function(f){return u.getDimensionIndex(f)},u);u.filterSelf(function(f){for(var p,m,g,v=0;v<c.length;v++){var b=h.get(d[v],f),S=!isNaN(b),w=b<s[0],E=b>s[1];if(S&&!w&&!E)return!0;S&&(g=!0),w&&(p=!0),E&&(m=!0)}return g&&p&&m})}else B_(c,function(f){if(a==="empty")l.setData(u=u.map(f,function(m){return o(m)?m:NaN}));else{var p={};p[f]=s,u.selectRange(p)}});B_(c,function(f){u.setApproximateExtent(s,f)})}});function o(l){return l>=s[0]&&l<=s[1]}},n.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,r=this._dataExtent;B_(["min","max"],function(i){var a=t.get(i+"Span"),s=t.get(i+"ValueSpan");s!=null&&(s=this.getAxisModel().axis.scale.parse(s)),s!=null?a=Jn(r[0]+s,r,[0,100],!0):a!=null&&(s=Jn(a,[0,100],r,!0)-r[0]),e[i+"Span"]=a,e[i+"ValueSpan"]=s},this)},n.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,r=this._valueWindow;if(t){var i=Mce(r,[0,500]);i=Math.min(i,20);var a=e.axis.scale.rawExtentInfo;t[0]!==0&&a.setDeterminedMinMax("min",+r[0].toFixed(i)),t[1]!==100&&a.setDeterminedMinMax("max",+r[1].toFixed(i)),a.freeze()}},n})();function s7e(n,e,t){var r=[1/0,-1/0];B_(t,function(s){FFe(r,s.getData(),e)});var i=n.getAxisModel(),a=Afe(i.axis.scale,i,r).calculate();return[a.min,a.max]}var o7e={getTargetSeries:function(n){function e(i){n.eachComponent("dataZoom",function(a){a.eachTargetAxis(function(s,o){var l=n.getComponent(lg(s),o);i(s,o,l,a)})})}e(function(i,a,s,o){s.__dzAxisProxy=null});var t=[];e(function(i,a,s,o){s.__dzAxisProxy||(s.__dzAxisProxy=new a7e(i,a,o,n),t.push(s.__dzAxisProxy))});var r=ct();return W(t,function(i){W(i.getTargetSeriesModels(),function(a){r.set(a.uid,a)})}),r},overallReset:function(n,e){n.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).reset(t)}),t.eachTargetAxis(function(r,i){t.getAxisProxy(r,i).filterData(t,e)})}),n.eachComponent("dataZoom",function(t){var r=t.findRepresentativeAxisProxy();if(r){var i=r.getDataPercentWindow(),a=r.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:a[0],endValue:a[1]})}})}};function l7e(n){n.registerAction("dataZoom",function(e,t){var r=n7e(t,e);W(r,function(i){i.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}var Vne=!1;function $7(n){Vne||(Vne=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,o7e),l7e(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function u7e(n){n.registerComponentModel(r7e),n.registerComponentView(i7e),$7(n)}var _u=(function(){function n(){}return n})(),Mge={};function F_(n,e){Mge[n]=e}function Dge(n){return Mge[n]}var c7e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;W(this.option.feature,function(r,i){var a=Dge(i);a&&(a.getDefaultOption&&(a.defaultOption=a.getDefaultOption(t)),en(r,a.defaultOption))})},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:ve.color.border,borderRadius:0,borderWidth:0,padding:ve.size.m,itemSize:15,itemGap:ve.size.s,showTitle:!0,iconStyle:{borderColor:ve.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:ve.color.accent50}},tooltip:{show:!1,position:"bottom"}},e})(_n);function Ige(n,e){var t=y2(e.get("padding")),r=e.getItemStyle(["color","opacity"]);r.fill=e.get("backgroundColor");var i=new fn({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1});return i}var h7e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){var s=this.group;if(s.removeAll(),!t.get("show"))return;var o=+t.get("itemSize"),l=t.get("orient")==="vertical",u=t.get("feature")||{},c=this._features||(this._features={}),h=[];W(u,function(b,S){h.push(S)}),new Kf(this._featureNames||[],h).add(d).update(d).remove(Qt(d,null)).execute(),this._featureNames=h;function d(b,S){var w=h[b],E=h[S],T=u[w],M=new Sn(T,t,t.ecModel),P;if(a&&a.newTitle!=null&&a.featureName===w&&(T.title=a.newTitle),w&&!E){if(d7e(w))P={onclick:M.option.onclick,featureName:w};else{var I=Dge(w);if(!I)return;P=new I}c[w]=P}else if(P=c[E],!P)return;P.uid=jS("toolbox-feature"),P.model=M,P.ecModel=r,P.api=i;var D=P instanceof _u;if(!w&&E){D&&P.dispose&&P.dispose(r,i);return}if(!M.get("show")||D&&P.unusable){D&&P.remove&&P.remove(r,i);return}f(M,P,w),M.setIconStatus=function(R,B){var k=this.option,V=this.iconPaths;k.iconStatus=k.iconStatus||{},k.iconStatus[R]=B,V[R]&&(B==="emphasis"?Yf:qf)(V[R])},P instanceof _u&&P.render&&P.render(M,r,i,a)}function f(b,S,w){var E=b.getModel("iconStyle"),T=b.getModel(["emphasis","iconStyle"]),M=S instanceof _u&&S.getIcons?S.getIcons():b.get("icon"),P=b.get("title")||{},I,D;Ke(M)?(I={},I[w]=M):I=M,Ke(P)?(D={},D[w]=P):D=P;var R=b.iconPaths={};W(I,function(B,k){var V=v2(B,{},{x:-o/2,y:-o/2,width:o,height:o});V.setStyle(E.getItemStyle());var G=V.ensureState("emphasis");G.style=T.getItemStyle();var F=new On({style:{text:D[k],align:T.get("textAlign"),borderRadius:T.get("textBorderRadius"),padding:T.get("textPadding"),fill:null,font:fj({fontStyle:T.get("textFontStyle"),fontFamily:T.get("textFontFamily"),fontSize:T.get("textFontSize"),fontWeight:T.get("textFontWeight")},r)},ignore:!0});V.setTextContent(F),op({el:V,componentModel:t,itemName:k,formatterParamsExtra:{title:D[k]}}),V.__title=D[k],V.on("mouseover",function(){var X=T.getItemStyle(),j=l?t.get("right")==null&&t.get("left")!=="right"?"right":"left":t.get("bottom")==null&&t.get("top")!=="bottom"?"bottom":"top";F.setStyle({fill:T.get("textFill")||X.fill||X.stroke||ve.color.neutral99,backgroundColor:T.get("textBackgroundColor")}),V.setTextConfig({position:T.get("textPosition")||j}),F.ignore=!t.get("showTitle"),i.enterEmphasis(this)}).on("mouseout",function(){b.get(["iconStatus",k])!=="emphasis"&&i.leaveEmphasis(this),F.hide()}),(b.get(["iconStatus",k])==="emphasis"?Yf:qf)(V),s.add(V),V.on("click",Qe(S.onclick,S,r,i,k)),R[k]=V})}var p=ha(t,i).refContainer,m=t.getBoxLayoutParams(),g=t.get("padding"),v=qr(m,p,g);Ny(t.get("orient"),s,t.get("itemGap"),v.width,v.height),v3(s,m,p,g),s.add(Ige(s.getBoundingRect(),t)),l||s.eachChild(function(b){var S=b.__title,w=b.ensureState("emphasis"),E=w.textConfig||(w.textConfig={}),T=b.getTextContent(),M=T&&T.ensureState("emphasis");if(M&&!St(M)&&S){var P=M.style||(M.style={}),I=e3(S,On.makeFont(P)),D=b.x+s.x,R=b.y+s.y+o,B=!1;R+I.height>i.getHeight()&&(E.position="top",B=!0);var k=B?-5-I.height:o+10;D+I.width/2>i.getWidth()?(E.position=["100%",k],P.align="right"):D-I.width/2<0&&(E.position=[0,k],P.align="left")}})},e.prototype.updateView=function(t,r,i,a){W(this._features,function(s){s instanceof _u&&s.updateView&&s.updateView(s.model,r,i,a)})},e.prototype.remove=function(t,r){W(this._features,function(i){i instanceof _u&&i.remove&&i.remove(t,r)}),this.group.removeAll()},e.prototype.dispose=function(t,r){W(this._features,function(i){i instanceof _u&&i.dispose&&i.dispose(t,r)})},e.type="toolbox",e})(Gr);function d7e(n){return n.indexOf("my")===0}var f7e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){var i=this.model,a=i.get("name")||t.get("title.0.text")||"echarts",s=r.getZr().painter.getType()==="svg",o=s?"svg":i.get("type",!0)||"png",l=r.getConnectedDataURL({type:o,backgroundColor:i.get("backgroundColor",!0)||t.get("backgroundColor")||ve.color.neutral00,connectedBackgroundColor:i.get("connectedBackgroundColor"),excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")}),u=bn.browser;if(typeof MouseEvent=="function"&&(u.newEdge||!u.ie&&!u.edge)){var c=document.createElement("a");c.download=a+"."+o,c.target="_blank",c.href=l;var h=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(h)}else if(window.navigator.msSaveOrOpenBlob||s){var d=l.split(","),f=d[0].indexOf("base64")>-1,p=s?decodeURIComponent(d[1]):d[1];f&&(p=window.atob(p));var m=a+"."+o;if(window.navigator.msSaveOrOpenBlob){for(var g=p.length,v=new Uint8Array(g);g--;)v[g]=p.charCodeAt(g);var b=new Blob([v]);window.navigator.msSaveOrOpenBlob(b,m)}else{var S=document.createElement("iframe");document.body.appendChild(S);var w=S.contentWindow,E=w.document;E.open("image/svg+xml","replace"),E.write(p),E.close(),w.focus(),E.execCommand("SaveAs",!0,m),document.body.removeChild(S)}}else{var T=i.get("lang"),M='<body style="margin:0;"><img src="'+l+'" style="max-width:100%;" title="'+(T&&T[0]||"")+'" /></body>',P=window.open();P.document.write(M),P.document.title=a}},e.getDefaultOption=function(t){var r={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:ve.color.neutral00,name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return r},e})(_u),Hne="__ec_magicType_stack__",p7e=[["line","bar"],["stack"]],m7e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getIcons=function(){var t=this.model,r=t.get("icon"),i={};return W(t.get("type"),function(a){r[a]&&(i[a]=r[a])}),i},e.getDefaultOption=function(t){var r={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return r},e.prototype.onclick=function(t,r,i){var a=this.model,s=a.get(["seriesIndex",i]);if(Gne[i]){var o={series:[]},l=function(h){var d=h.subType,f=h.id,p=Gne[i](d,f,h,a);p&&(Pt(p,h.option),o.series.push(p));var m=h.coordinateSystem;if(m&&m.type==="cartesian2d"&&(i==="line"||i==="bar")){var g=m.getAxesByScale("ordinal")[0];if(g){var v=g.dim,b=v+"Axis",S=h.getReferringComponents(b,fi).models[0],w=S.componentIndex;o[b]=o[b]||[];for(var E=0;E<=w;E++)o[b][w]=o[b][w]||{};o[b][w].boundaryGap=i==="bar"}}};W(p7e,function(h){Jt(h,i)>=0&&W(h,function(d){a.setIconStatus(d,"normal")})}),a.setIconStatus(i,"emphasis"),t.eachComponent({mainType:"series",query:s==null?null:{seriesIndex:s}},l);var u,c=i;i==="stack"&&(u=en({stack:a.option.title.tiled,tiled:a.option.title.stack},a.option.title),a.get(["iconStatus",i])!=="emphasis"&&(c="tiled")),r.dispatchAction({type:"changeMagicType",currentType:c,newOption:o,newTitle:u,featureName:"magicType"})}},e})(_u),Gne={line:function(n,e,t,r){if(n==="bar")return en({id:e,type:"line",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,e,t,r){if(n==="line")return en({id:e,type:"bar",data:t.get("data"),stack:t.get("stack"),markPoint:t.get("markPoint"),markLine:t.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,e,t,r){var i=t.get("stack")===Hne;if(n==="line"||n==="bar")return r.setIconStatus("stack",i?"normal":"emphasis"),en({id:e,stack:i?"":Hne},r.get(["option","stack"])||{},!0)}};dd({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,e){e.mergeOption(n.newOption)});var R3=new Array(60).join("-"),pS="	";function g7e(n){var e={},t=[],r=[];return n.eachRawSeries(function(i){var a=i.coordinateSystem;if(a&&(a.type==="cartesian2d"||a.type==="polar")){var s=a.getBaseAxis();if(s.type==="category"){var o=s.dim+"_"+s.index;e[o]||(e[o]={categoryAxis:s,valueAxis:a.getOtherAxis(s),series:[]},r.push({axisDim:s.dim,axisIndex:s.index})),e[o].series.push(i)}else t.push(i)}else t.push(i)}),{seriesGroupByCategoryAxis:e,other:t,meta:r}}function v7e(n){var e=[];return W(n,function(t,r){var i=t.categoryAxis,a=t.valueAxis,s=a.dim,o=[" "].concat(Ue(t.series,function(f){return f.name})),l=[i.model.getCategories()];W(t.series,function(f){var p=f.getRawData();l.push(f.getRawData().mapArray(p.mapDimension(s),function(m){return m}))});for(var u=[o.join(pS)],c=0;c<l[0].length;c++){for(var h=[],d=0;d<l.length;d++)h.push(l[d][c]);u.push(h.join(pS))}e.push(u.join(`
`))}),e.join(`

`+R3+`

`)}function y7e(n){return Ue(n,function(e){var t=e.getRawData(),r=[e.name],i=[];return t.each(t.dimensions,function(){for(var a=arguments.length,s=arguments[a-1],o=t.getName(s),l=0;l<a-1;l++)i[l]=arguments[l];r.push((o?o+pS:"")+i.join(pS))}),r.join(`
`)}).join(`

`+R3+`

`)}function x7e(n){var e=g7e(n);return{value:er([v7e(e.seriesGroupByCategoryAxis),y7e(e.other)],function(t){return!!t.replace(/[\n\t\s]/g,"")}).join(`

`+R3+`

`),meta:e.meta}}function BN(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function _7e(n){var e=n.slice(0,n.indexOf(`
`));if(e.indexOf(pS)>=0)return!0}var V8=new RegExp("["+pS+"]+","g");function b7e(n){for(var e=n.split(/\n+/g),t=BN(e.shift()).split(V8),r=[],i=Ue(t,function(l){return{name:l,data:[]}}),a=0;a<e.length;a++){var s=BN(e[a]).split(V8);r.push(s.shift());for(var o=0;o<s.length;o++)i[o]&&(i[o].data[a]=s[o])}return{series:i,categories:r}}function S7e(n){for(var e=n.split(/\n+/g),t=BN(e.shift()),r=[],i=0;i<e.length;i++){var a=BN(e[i]);if(a){var s=a.split(V8),o="",l=void 0,u=!1;isNaN(s[0])?(u=!0,o=s[0],s=s.slice(1),r[i]={name:o,value:[]},l=r[i].value):l=r[i]=[];for(var c=0;c<s.length;c++)l.push(+s[c]);l.length===1&&(u?r[i].value=l[0]:r[i]=l[0])}}return{name:t,data:r}}function w7e(n,e){var t=n.split(new RegExp(`
*`+R3+`
*`,"g")),r={series:[]};return W(t,function(i,a){if(_7e(i)){var s=b7e(i),o=e[a],l=o.axisDim+"Axis";o&&(r[l]=r[l]||[],r[l][o.axisIndex]={data:s.categories},r.series=r.series.concat(s.series))}else{var s=S7e(i);r.series.push(s)}}),r}var T7e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var i=r.getDom(),a=this.model;this._dom&&i.removeChild(this._dom);var s=document.createElement("div");s.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",s.style.backgroundColor=a.get("backgroundColor")||ve.color.neutral00;var o=document.createElement("h4"),l=a.get("lang")||[];o.innerHTML=l[0]||a.get("title"),o.style.cssText="margin:10px 20px",o.style.color=a.get("textColor");var u=document.createElement("div"),c=document.createElement("textarea");u.style.cssText="overflow:auto";var h=a.get("optionToContent"),d=a.get("contentToOption"),f=x7e(t);if(St(h)){var p=h(r.getOption());Ke(p)?u.innerHTML=p:J1(p)&&u.appendChild(p)}else{c.readOnly=a.get("readOnly");var m=c.style;m.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",m.color=a.get("textColor"),m.borderColor=a.get("textareaBorderColor"),m.backgroundColor=a.get("textareaColor"),c.value=f.value,u.appendChild(c)}var g=f.meta,v=document.createElement("div");v.style.cssText="position:absolute;bottom:5px;left:0;right:0";var b="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",S=document.createElement("div"),w=document.createElement("div");b+=";background-color:"+a.get("buttonColor"),b+=";color:"+a.get("buttonTextColor");var E=this;function T(){i.removeChild(s),E._dom=null}QU(S,"click",T),QU(w,"click",function(){if(d==null&&h!=null||d!=null&&h==null){T();return}var M;try{St(d)?M=d(u,r.getOption()):M=w7e(c.value,g)}catch(P){throw T(),new Error("Data view format error "+P)}M&&r.dispatchAction({type:"changeDataView",newOption:M}),T()}),S.innerHTML=l[1],w.innerHTML=l[2],w.style.cssText=S.style.cssText=b,!a.get("readOnly")&&v.appendChild(w),v.appendChild(S),s.appendChild(o),s.appendChild(u),s.appendChild(v),u.style.height=i.clientHeight-80+"px",i.appendChild(s),this._dom=s},e.prototype.remove=function(t,r){this._dom&&r.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,r){this.remove(t,r)},e.getDefaultOption=function(t){var r={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:ve.color.background,textColor:ve.color.primary,textareaColor:ve.color.background,textareaBorderColor:ve.color.border,buttonColor:ve.color.accent50,buttonTextColor:ve.color.neutral00};return r},e})(_u);function E7e(n,e){return Ue(n,function(t,r){var i=e&&e[r];if(Lt(i)&&!Be(i)){var a=Lt(t)&&!Be(t);a||(t={value:t});var s=i.name!=null&&t.name==null;return t=Pt(t,i),s&&delete t.name,t}else return t})}dd({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,e){var t=[];W(n.newOption.series,function(r){var i=e.getSeriesByName(r.name)[0];if(!i)t.push(Pe({type:"scatter"},r));else{var a=i.get("data");t.push({name:r.name,data:E7e(r.data,a)})}}),e.mergeOption(Pt({series:t},n.newOption))});var Pge=W,Lge=mn();function A7e(n,e){var t=Y7(n);Pge(e,function(r,i){for(var a=t.length-1;a>=0;a--){var s=t[a];if(s[i])break}if(a<0){var o=n.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(o){var l=o.getPercentRange();t[0][i]={dataZoomId:i,start:l[0],end:l[1]}}}}),t.push(e)}function C7e(n){var e=Y7(n),t=e[e.length-1];e.length>1&&e.pop();var r={};return Pge(t,function(i,a){for(var s=e.length-1;s>=0;s--)if(i=e[s][a],i){r[a]=i;break}}),r}function M7e(n){Lge(n).snapshots=null}function D7e(n){return Y7(n).length}function Y7(n){var e=Lge(n);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var I7e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.onclick=function(t,r){M7e(t),r.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var r={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return r},e})(_u);dd({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,e){e.resetOption("recreate")});var P7e=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],q7=(function(){function n(e,t,r){var i=this;this._targetInfoList=[];var a=jne(t,e);W(L7e,function(s,o){(!r||!r.include||Jt(r.include,o)>=0)&&s(a,i._targetInfoList)})}return n.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,function(r,i,a){if((r.coordRanges||(r.coordRanges=[])).push(i),!r.coordRange){r.coordRange=i;var s=U5[r.brushType](0,a,i);r.__rangeOffset={offset:Yne[r.brushType](s.values,r.range,[1,1]),xyMinMax:s.xyMinMax}}}),e},n.prototype.matchOutputRanges=function(e,t,r){W(e,function(i){var a=this.findTargetInfo(i,t);a&&a!==!0&&W(a.coordSyses,function(s){var o=U5[i.brushType](1,s,i.range,!0);r(i,o.values,s,t)})},this)},n.prototype.setInputRanges=function(e,t){W(e,function(r){var i=this.findTargetInfo(r,t);if(r.range=r.range||[],i&&i!==!0){r.panelId=i.panelId;var a=U5[r.brushType](0,i.coordSys,r.coordRange),s=r.__rangeOffset;r.range=s?Yne[r.brushType](a.values,s.offset,R7e(a.xyMinMax,s.xyMinMax)):a.values}},this)},n.prototype.makePanelOpts=function(e,t){return Ue(this._targetInfoList,function(r){var i=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:t?t(r):null,clipPath:Bme(i),isTargetByCursor:Ume(i,e,r.coordSysModel),getLinearBrushOtherExtent:Fme(i)}})},n.prototype.controlSeries=function(e,t,r){var i=this.findTargetInfo(e,r);return i===!0||i&&Jt(i.coordSyses,t.coordinateSystem)>=0},n.prototype.findTargetInfo=function(e,t){for(var r=this._targetInfoList,i=jne(t,e),a=0;a<r.length;a++){var s=r[a],o=e.panelId;if(o){if(s.panelId===o)return s}else for(var l=0;l<Wne.length;l++)if(Wne[l](i,s))return s}return!0},n})();function H8(n){return n[0]>n[1]&&n.reverse(),n}function jne(n,e){return yb(n,e,{includeMainTypes:P7e})}var L7e={grid:function(n,e){var t=n.xAxisModels,r=n.yAxisModels,i=n.gridModels,a=ct(),s={},o={};!t&&!r&&!i||(W(t,function(l){var u=l.axis.grid.model;a.set(u.id,u),s[u.id]=!0}),W(r,function(l){var u=l.axis.grid.model;a.set(u.id,u),o[u.id]=!0}),W(i,function(l){a.set(l.id,l),s[l.id]=!0,o[l.id]=!0}),a.each(function(l){var u=l.coordinateSystem,c=[];W(u.getCartesians(),function(h,d){(Jt(t,h.getAxis("x").model)>=0||Jt(r,h.getAxis("y").model)>=0)&&c.push(h)}),e.push({panelId:"grid--"+l.id,gridModel:l,coordSysModel:l,coordSys:c[0],coordSyses:c,getPanelRect:Xne.grid,xAxisDeclared:s[l.id],yAxisDeclared:o[l.id]})}))},geo:function(n,e){W(n.geoModels,function(t){var r=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:r,coordSyses:[r],getPanelRect:Xne.geo})})}},Wne=[function(n,e){var t=n.xAxisModel,r=n.yAxisModel,i=n.gridModel;return!i&&t&&(i=t.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(n,e){var t=n.geoModel;return t&&t===e.geoModel}],Xne={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,e=n.getBoundingRect().clone();return e.applyTransform(Ry(n)),e}},U5={lineX:Qt($ne,0),lineY:Qt($ne,1),rect:function(n,e,t,r){var i=n?e.pointToData([t[0][0],t[1][0]],r):e.dataToPoint([t[0][0],t[1][0]],r),a=n?e.pointToData([t[0][1],t[1][1]],r):e.dataToPoint([t[0][1],t[1][1]],r),s=[H8([i[0],a[0]]),H8([i[1],a[1]])];return{values:s,xyMinMax:s}},polygon:function(n,e,t,r){var i=[[1/0,-1/0],[1/0,-1/0]],a=Ue(t,function(s){var o=n?e.pointToData(s,r):e.dataToPoint(s,r);return i[0][0]=Math.min(i[0][0],o[0]),i[1][0]=Math.min(i[1][0],o[1]),i[0][1]=Math.max(i[0][1],o[0]),i[1][1]=Math.max(i[1][1],o[1]),o});return{values:a,xyMinMax:i}}};function $ne(n,e,t,r){var i=t.getAxis(["x","y"][n]),a=H8(Ue([0,1],function(o){return e?i.coordToData(i.toLocalCoord(r[o]),!0):i.toGlobalCoord(i.dataToCoord(r[o]))})),s=[];return s[n]=a,s[1-n]=[NaN,NaN],{values:a,xyMinMax:s}}var Yne={lineX:Qt(qne,0),lineY:Qt(qne,1),rect:function(n,e,t){return[[n[0][0]-t[0]*e[0][0],n[0][1]-t[0]*e[0][1]],[n[1][0]-t[1]*e[1][0],n[1][1]-t[1]*e[1][1]]]},polygon:function(n,e,t){return Ue(n,function(r,i){return[r[0]-t[0]*e[i][0],r[1]-t[1]*e[i][1]]})}};function qne(n,e,t,r){return[e[0]-r[n]*t[0],e[1]-r[n]*t[1]]}function R7e(n,e){var t=Kne(n),r=Kne(e),i=[t[0]/r[0],t[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}function Kne(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var G8=W,N7e=IRe("toolbox-dataZoom_"),k7e=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i,a){this._brushController||(this._brushController=new _7(i.getZr()),this._brushController.on("brush",Qe(this._onBrush,this)).mount()),F7e(t,r,this,a,i),B7e(t,r)},e.prototype.onclick=function(t,r,i){O7e[i].call(this)},e.prototype.remove=function(t,r){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,r){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var r=t.areas;if(!t.isEnd||!r.length)return;var i={},a=this.ecModel;this._brushController.updateCovers([]);var s=new q7(K7(this.model),a,{include:["grid"]});s.matchOutputRanges(r,a,function(u,c,h){if(h.type==="cartesian2d"){var d=u.brushType;d==="rect"?(o("x",h,c[0]),o("y",h,c[1])):o({lineX:"x",lineY:"y"}[d],h,c)}}),A7e(a,i),this._dispatchZoomAction(i);function o(u,c,h){var d=c.getAxis(u),f=d.model,p=l(u,f,a),m=p.findRepresentativeAxisProxy(f).getMinMaxSpan();(m.minValueSpan!=null||m.maxValueSpan!=null)&&(h=Tg(0,h.slice(),d.scale.getExtent(),0,m.minValueSpan,m.maxValueSpan)),p&&(i[p.id]={dataZoomId:p.id,startValue:h[0],endValue:h[1]})}function l(u,c,h){var d;return h.eachComponent({mainType:"dataZoom",subType:"select"},function(f){var p=f.getAxisModel(u,c.componentIndex);p&&(d=f)}),d}},e.prototype._dispatchZoomAction=function(t){var r=[];G8(t,function(i,a){r.push(Tt(i))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},e.getDefaultOption=function(t){var r={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:ve.color.backgroundTint}};return r},e})(_u),O7e={zoom:function(){var n=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:n})},back:function(){this._dispatchZoomAction(C7e(this.ecModel))}};function K7(n){var e={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return e.xAxisIndex==null&&e.xAxisId==null&&(e.xAxisIndex="all"),e.yAxisIndex==null&&e.yAxisId==null&&(e.yAxisIndex="all"),e}function B7e(n,e){n.setIconStatus("back",D7e(e)>1?"emphasis":"normal")}function F7e(n,e,t,r,i){var a=t._isZoomActive;r&&r.type==="takeGlobalCursor"&&(a=r.key==="dataZoomSelect"?r.dataZoomSelectActive:!1),t._isZoomActive=a,n.setIconStatus("zoom",a?"emphasis":"normal");var s=new q7(K7(n),e,{include:["grid"]}),o=s.makePanelOpts(i,function(l){return l.xAxisDeclared&&!l.yAxisDeclared?"lineX":!l.xAxisDeclared&&l.yAxisDeclared?"lineY":"rect"});t._brushController.setPanels(o).enableBrush(a&&o.length?{brushType:"auto",brushStyle:n.getModel("brushStyle").getItemStyle()}:!1)}f3e("dataZoom",function(n){var e=n.getComponent("toolbox",0),t=["feature","dataZoom"];if(!e||e.get(t)==null)return;var r=e.getModel(t),i=[],a=K7(r),s=yb(n,a);G8(s.xAxisModels,function(l){return o(l,"xAxis","xAxisIndex")}),G8(s.yAxisModels,function(l){return o(l,"yAxis","yAxisIndex")});function o(l,u,c){var h=l.componentIndex,d={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:N7e+u+h};d[c]=h,i.push(d)}return i});function U7e(n){n.registerComponentModel(c7e),n.registerComponentView(h7e),F_("saveAsImage",f7e),F_("magicType",m7e),F_("dataView",T7e),F_("dataZoom",k7e),F_("restore",I7e),sn(u7e)}var z7e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,displayTransition:!0,enterable:!1,backgroundColor:ve.color.neutral00,shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,defaultBorderColor:ve.color.border,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:ve.color.borderShade,width:1,type:"dashed",textStyle:{}}},textStyle:{color:ve.color.tertiary,fontSize:14}},e})(_n);function Rge(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function Nge(n){if(bn.domSupported){for(var e=document.documentElement.style,t=0,r=n.length;t<r;t++)if(n[t]in e)return n[t]}}var kge=Nge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),V7e=Nge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Oge(n,e){if(!n)return e;e=zhe(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function H7e(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?t[e]:null}var G7e=Oge(V7e,"transition"),Z7=Oge(kge,"transform"),j7e="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(bn.transform3dSupported?"will-change:transform;":"");function W7e(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function X7e(n,e,t){if(!Ke(t)||t==="inside")return"";var r=n.get("backgroundColor"),i=n.get("borderWidth");e=Wy(e);var a=W7e(t),s=Math.max(Math.round(i)*1.5,6),o="",l=Z7+":",u;Jt(["left","right"],a)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(u=a==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(u=a==="top"?225:45)+"deg)");var c=u*Math.PI/180,h=s+i,d=h*Math.abs(Math.cos(c))+h*Math.abs(Math.sin(c)),f=Math.round(((d-Math.SQRT2*i)/2+Math.SQRT2*i-(d-h)/2)*100)/100;o+=";"+a+":-"+f+"px";var p=e+" solid "+i+"px;",m=["position:absolute;width:"+s+"px;height:"+s+"px;z-index:-1;",o+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+r+";"];return'<div style="'+m.join("")+'"></div>'}function $7e(n,e,t){var r="cubic-bezier(0.23,1,0.32,1)",i="",a="";return t&&(i=" "+n/2+"s "+r,a="opacity"+i+",visibility"+i),e||(i=" "+n+"s "+r,a+=(a.length?",":"")+(bn.transformSupported?""+Z7+i:",left"+i+",top"+i)),G7e+":"+a}function Zne(n,e,t){var r=n.toFixed(0)+"px",i=e.toFixed(0)+"px";if(!bn.transformSupported)return t?"top:"+i+";left:"+r+";":[["top",i],["left",r]];var a=bn.transform3dSupported,s="translate"+(a?"3d":"")+"("+r+","+i+(a?",0":"")+")";return t?"top:0;left:0;"+Z7+":"+s+";":[["top",0],["left",0],[kge,s]]}function Y7e(n){var e=[],t=n.get("fontSize"),r=n.getTextColor();r&&e.push("color:"+r),e.push("font:"+n.getFont());var i=dt(n.get("lineHeight"),Math.round(t*3/2));t&&e.push("line-height:"+i+"px");var a=n.get("textShadowColor"),s=n.get("textShadowBlur")||0,o=n.get("textShadowOffsetX")||0,l=n.get("textShadowOffsetY")||0;return a&&s&&e.push("text-shadow:"+o+"px "+l+"px "+s+"px "+a),W(["decoration","align"],function(u){var c=n.get(u);c&&e.push("text-"+u+":"+c)}),e.join(";")}function q7e(n,e,t,r){var i=[],a=n.get("transitionDuration"),s=n.get("backgroundColor"),o=n.get("shadowBlur"),l=n.get("shadowColor"),u=n.get("shadowOffsetX"),c=n.get("shadowOffsetY"),h=n.getModel("textStyle"),d=Cde(n,"html"),f=u+"px "+c+"px "+o+"px "+l;return i.push("box-shadow:"+f),e&&a>0&&i.push($7e(a,t,r)),s&&i.push("background-color:"+s),W(["width","color","radius"],function(p){var m="border-"+p,g=zhe(m),v=n.get(g);v!=null&&i.push(m+":"+v+(p==="color"?"":"px"))}),i.push(Y7e(h)),d!=null&&i.push("padding:"+y2(d).join("px ")+"px"),i.join(";")+";"}function Qne(n,e,t,r,i){var a=e&&e.painter;if(t){var s=a&&a.getViewportRoot();s&&JPe(n,s,t,r,i)}else{n[0]=r,n[1]=i;var o=a&&a.getViewportRootOffset();o&&(n[0]+=o.offsetLeft,n[1]+=o.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var K7e=(function(){function n(e,t){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,bn.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var i=this._zr=e.getZr(),a=t.appendTo,s=a&&(Ke(a)?document.querySelector(a):J1(a)?a:St(a)&&a(e.getDom()));Qne(this._styleCoord,i,s,e.getWidth()/2,e.getHeight()/2),(s||e.getDom()).appendChild(r),this._api=e,this._container=s;var o=this;r.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!o._enterable){var u=i.handler,c=i.painter.getViewportRoot();eu(c,l,!0),u.dispatch("mousemove",l)}},r.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return n.prototype.update=function(e){if(!this._container){var t=this._api.getDom(),r=H7e(t,"position"),i=t.style;i.position!=="absolute"&&r!=="absolute"&&(i.position="relative")}var a=e.get("alwaysShowContent");a&&this._moveIfResized(),this._alwaysShowContent=a,this._enableDisplayTransition=e.get("displayTransition")&&e.get("transitionDuration")>0,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,i=r.style,a=this._styleCoord;r.innerHTML?i.cssText=j7e+q7e(e,!this._firstShow,this._longHide,this._enableDisplayTransition)+Zne(a[0],a[1],!0)+("border-color:"+Wy(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,r,i,a){var s=this.el;if(e==null){s.innerHTML="";return}var o="";if(Ke(a)&&r.get("trigger")==="item"&&!Rge(r)&&(o=X7e(r,i,a)),Ke(e))s.innerHTML=e+o;else if(e){s.innerHTML="",Be(e)||(e=[e]);for(var l=0;l<e.length;l++)J1(e[l])&&e[l].parentNode!==s&&s.appendChild(e[l]);if(o&&s.childNodes.length){var u=document.createElement("div");u.innerHTML=o,s.appendChild(u)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return e?[e.offsetWidth,e.offsetHeight]:[0,0]},n.prototype.moveTo=function(e,t){if(this.el){var r=this._styleCoord;if(Qne(r,this._zr,this._container,e,t),r[0]!=null&&r[1]!=null){var i=this.el.style,a=Zne(r[0],r[1]);W(a,function(s){i[s[0]]=s[1]})}}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;this._enableDisplayTransition?(t.visibility="hidden",t.opacity="0"):t.display="none",bn.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Qe(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var e=this._zr;eLe(e&&e.painter&&e.painter.getViewportRoot(),this._container);var t=this.el;if(t){t.onmouseenter=t.onmousemove=t.onmouseleave=null;var r=t.parentNode;r&&r.removeChild(t)}this.el=this._container=null},n})(),Z7e=(function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),ere(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,r,i,a){var s=this;Lt(e)&&Qn(""),this.el&&this._zr.remove(this.el);var o=r.getModel("textStyle");this.el=new On({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:o.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:Cde(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),W(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){s.el.style[u]=r.get(u)}),W(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){s.el.style[u]=o.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),r=Jne(e.style);return[t.width+r.left+r.right,t.height+r.top+r.bottom]},n.prototype.moveTo=function(e,t){var r=this.el;if(r){var i=this._styleCoord;ere(i,this._zr,e,t),e=i[0],t=i[1];var a=r.style,s=Zp(a.borderWidth||0),o=Jne(a);r.x=e+s+o.left,r.y=t+s+o.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Qe(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n})();function Zp(n){return Math.max(0,n)}function Jne(n){var e=Zp(n.shadowBlur||0),t=Zp(n.shadowOffsetX||0),r=Zp(n.shadowOffsetY||0);return{left:Zp(e-t),right:Zp(e+t),top:Zp(e-r),bottom:Zp(e+r)}}function ere(n,e,t,r){n[0]=t,n[1]=r,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var Q7e=new fn({shape:{x:-1,y:-1,width:2,height:2}}),J7e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){if(!(bn.node||!r.getDom())){var i=t.getComponent("tooltip"),a=this._renderMode=BRe(i.get("renderMode"));this._tooltipContent=a==="richText"?new Z7e(r):new K7e(r,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,r,i){if(!(bn.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=r,this._api=i;var a=this._tooltipContent;a.update(t),a.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?XS(this,"_updatePosition",50,"fixRate"):TA(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,r=t.get("triggerOn");vge("itemTooltip",this._api,Qe(function(i,a,s){r!=="none"&&(r.indexOf(i)>=0?this._tryShow(a,s):i==="leave"&&this._hide(s))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,r=this._ecModel,i=this._api,a=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&s.manuallyShowTip(t,r,i,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,r,i,a){if(!(a.from===this.uid||bn.node||!i.getDom())){var s=tre(a,i);this._ticket="";var o=a.dataByCoordSys,l=rWe(a,r,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:a.position,positionDefault:"bottom"},s)}else if(a.tooltip&&a.x!=null&&a.y!=null){var c=Q7e;c.x=a.x,c.y=a.y,c.update(),Ft(c).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:c},s)}else if(o)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:o,tooltipOption:a.tooltipOption},s);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(t,r,i,a))return;var h=yge(a,r),d=h.point[0],f=h.point[1];d!=null&&f!=null&&this._tryShow({offsetX:d,offsetY:f,target:h.el,position:a.position,positionDefault:"bottom"},s)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},s))}},e.prototype.manuallyHideTip=function(t,r,i,a){var s=this._tooltipContent;this._tooltipModel&&s.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(tre(a,i))},e.prototype._manuallyAxisShowTip=function(t,r,i,a){var s=a.seriesIndex,o=a.dataIndex,l=r.getComponent("axisPointer").coordSysAxesInfo;if(!(s==null||o==null||l==null)){var u=r.getSeriesByIndex(s);if(u){var c=u.getData(),h=bT([c.getItemModel(o),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(h.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:o,position:a.position}),!0}}},e.prototype._tryShow=function(t,r){var i=t.target,a=this._tooltipModel;if(a){this._lastX=t.offsetX,this._lastY=t.offsetY;var s=t.dataByCoordSys;if(s&&s.length)this._showAxisTooltip(s,t);else if(i){var o=Ft(i);if(o.ssrType==="legend")return;this._lastDataByCoordSys=null;var l,u;l0(i,function(c){if(c.tooltipDisabled)return l=u=null,!0;l||u||(Ft(c).dataIndex!=null?l=c:Ft(c).tooltipConfig!=null&&(u=c))},!0),l?this._showSeriesItemTooltip(t,l,r):u?this._showComponentItemTooltip(t,u,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},e.prototype._showOrMove=function(t,r){var i=t.get("showDelay");r=Qe(r,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(r,i):r()},e.prototype._showAxisTooltip=function(t,r){var i=this._ecModel,a=this._tooltipModel,s=[r.offsetX,r.offsetY],o=bT([r.tooltipOption],a),l=this._renderMode,u=[],c=qi("section",{blocks:[],noHeader:!0}),h=[],d=new _4;W(t,function(b){W(b.dataByAxis,function(S){var w=i.getComponent(S.axisDim+"Axis",S.axisIndex),E=S.value;if(!(!w||E==null)){var T=pge(E,w.axis,i,S.seriesDataIndices,S.valueLabelOpt),M=qi("section",{header:T,noHeader:!Mu(T),sortBlocks:!0,blocks:[]});c.blocks.push(M),W(S.seriesDataIndices,function(P){var I=i.getSeriesByIndex(P.seriesIndex),D=P.dataIndexInside,R=I.getDataParams(D);if(!(R.dataIndex<0)){R.axisDim=S.axisDim,R.axisIndex=S.axisIndex,R.axisType=S.axisType,R.axisId=S.axisId,R.axisValue=pN(w.axis,{value:E}),R.axisValueLabel=T,R.marker=d.makeTooltipMarker("item",Wy(R.color),l);var B=gQ(I.formatTooltip(D,!0,null)),k=B.frag;if(k){var V=bT([I],a).get("valueFormatter");M.blocks.push(V?Pe({valueFormatter:V},k):k)}B.text&&h.push(B.text),u.push(R)}})}})}),c.blocks.reverse(),h.reverse();var f=r.position,p=o.get("order"),m=SQ(c,d,l,p,i.get("useUTC"),o.get("textStyle"));m&&h.unshift(m);var g=l==="richText"?`

`:"<br/>",v=h.join(g);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(o,f,s[0],s[1],this._tooltipContent,u):this._showTooltipContent(o,v,u,Math.random()+"",s[0],s[1],f,null,d)})},e.prototype._showSeriesItemTooltip=function(t,r,i){var a=this._ecModel,s=Ft(r),o=s.seriesIndex,l=a.getSeriesByIndex(o),u=s.dataModel||l,c=s.dataIndex,h=s.dataType,d=u.getData(h),f=this._renderMode,p=t.positionDefault,m=bT([d.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=m.get("trigger");if(!(g!=null&&g!=="item")){var v=u.getDataParams(c,h),b=new _4;v.marker=b.makeTooltipMarker("item",Wy(v.color),f);var S=gQ(u.formatTooltip(c,!1,h)),w=m.get("order"),E=m.get("valueFormatter"),T=S.frag,M=T?SQ(E?Pe({valueFormatter:E},T):T,b,f,w,a.get("useUTC"),m.get("textStyle")):S.text,P="item_"+u.name+"_"+c;this._showOrMove(m,function(){this._showTooltipContent(m,M,v,P,t.offsetX,t.offsetY,t.position,t.target,b)}),i({type:"showTip",dataIndexInside:c,dataIndex:d.getRawIndex(c),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,r,i){var a=this._renderMode==="html",s=Ft(r),o=s.tooltipConfig,l=o.option||{},u=l.encodeHTMLContent;if(Ke(l)){var c=l;l={content:c,formatter:c},u=!0}u&&a&&l.content&&(l=Tt(l),l.content=lo(l.content));var h=[l],d=this._ecModel.getComponent(s.componentMainType,s.componentIndex);d&&h.push(d),h.push({formatter:l.content});var f=t.positionDefault,p=bT(h,this._tooltipModel,f?{position:f}:null),m=p.get("content"),g=Math.random()+"",v=new _4;this._showOrMove(p,function(){var b=Tt(p.get("formatterParams")||{});this._showTooltipContent(p,m,b,g,t.offsetX,t.offsetY,t.position,r,v)}),i({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,r,i,a,s,o,l,u,c){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var h=this._tooltipContent;h.setEnterable(t.get("enterable"));var d=t.get("formatter");l=l||t.get("position");var f=r,p=this._getNearestPoint([s,o],i,t.get("trigger"),t.get("borderColor"),t.get("defaultBorderColor",!0)),m=p.color;if(d)if(Ke(d)){var g=t.ecModel.get("useUTC"),v=Be(i)?i[0]:i,b=v&&v.axisType&&v.axisType.indexOf("time")>=0;f=d,b&&(f=g3(v.axisValue,f,g)),f=Vhe(f,i,!0)}else if(St(d)){var S=Qe(function(w,E){w===this._ticket&&(h.setContent(E,c,t,m,l),this._updatePosition(t,l,s,o,h,i,u))},this);this._ticket=a,f=d(i,a,S)}else f=d;h.setContent(f,c,t,m,l),h.show(t,m),this._updatePosition(t,l,s,o,h,i,u)}},e.prototype._getNearestPoint=function(t,r,i,a,s){if(i==="axis"||Be(r))return{color:a||s};if(!Be(r))return{color:a||r.color||r.borderColor}},e.prototype._updatePosition=function(t,r,i,a,s,o,l){var u=this._api.getWidth(),c=this._api.getHeight();r=r||t.get("position");var h=s.getSize(),d=t.get("align"),f=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),St(r)&&(r=r([i,a],o,s.el,p,{viewSize:[u,c],contentSize:h.slice()})),Be(r))i=Xe(r[0],u),a=Xe(r[1],c);else if(Lt(r)){var m=r;m.width=h[0],m.height=h[1];var g=qr(m,{width:u,height:c});i=g.x,a=g.y,d=null,f=null}else if(Ke(r)&&l){var v=nWe(r,p,h,t.get("borderWidth"));i=v[0],a=v[1]}else{var v=eWe(i,a,s,u,c,d?null:20,f?null:20);i=v[0],a=v[1]}if(d&&(i-=nre(d)?h[0]/2:d==="right"?h[0]:0),f&&(a-=nre(f)?h[1]/2:f==="bottom"?h[1]:0),Rge(t)){var v=tWe(i,a,s,u,c);i=v[0],a=v[1]}s.moveTo(i,a)},e.prototype._updateContentNotChangedOnAxis=function(t,r){var i=this._lastDataByCoordSys,a=this._cbParamsList,s=!!i&&i.length===t.length;return s&&W(i,function(o,l){var u=o.dataByAxis||[],c=t[l]||{},h=c.dataByAxis||[];s=s&&u.length===h.length,s&&W(u,function(d,f){var p=h[f]||{},m=d.seriesDataIndices||[],g=p.seriesDataIndices||[];s=s&&d.value===p.value&&d.axisType===p.axisType&&d.axisId===p.axisId&&m.length===g.length,s&&W(m,function(v,b){var S=g[b];s=s&&v.seriesIndex===S.seriesIndex&&v.dataIndex===S.dataIndex}),a&&W(d.seriesDataIndices,function(v){var b=v.seriesIndex,S=r[b],w=a[b];S&&w&&w.data!==S.data&&(s=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=r,!!s},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,r){bn.node||!r.getDom()||(TA(this,"_updatePosition"),this._tooltipContent.dispose(),k8("itemTooltip",r))},e.type="tooltip",e})(Gr);function bT(n,e,t){var r=e.ecModel,i;t?(i=new Sn(t,r,r),i=new Sn(e.option,i,r)):i=e;for(var a=n.length-1;a>=0;a--){var s=n[a];s&&(s instanceof Sn&&(s=s.get("tooltip",!0)),Ke(s)&&(s={formatter:s}),s&&(i=new Sn(s,i,r)))}return i}function tre(n,e){return n.dispatchAction||Qe(e.dispatchAction,e)}function eWe(n,e,t,r,i,a,s){var o=t.getSize(),l=o[0],u=o[1];return a!=null&&(n+l+a+2>r?n-=l+a:n+=a),s!=null&&(e+u+s>i?e-=u+s:e+=s),[n,e]}function tWe(n,e,t,r,i){var a=t.getSize(),s=a[0],o=a[1];return n=Math.min(n+s,r)-s,e=Math.min(e+o,i)-o,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function nWe(n,e,t,r){var i=t[0],a=t[1],s=Math.ceil(Math.SQRT2*r)+8,o=0,l=0,u=e.width,c=e.height;switch(n){case"inside":o=e.x+u/2-i/2,l=e.y+c/2-a/2;break;case"top":o=e.x+u/2-i/2,l=e.y-a-s;break;case"bottom":o=e.x+u/2-i/2,l=e.y+c+s;break;case"left":o=e.x-i-s,l=e.y+c/2-a/2;break;case"right":o=e.x+u+s,l=e.y+c/2-a/2}return[o,l]}function nre(n){return n==="center"||n==="middle"}function rWe(n,e,t){var r=JG(n).queryOptionMap,i=r.keys()[0];if(!(!i||i==="series")){var a=US(e,i,r.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),s=a.models[0];if(s){var o=t.getViewOfComponentModel(s),l;if(o.group.traverse(function(u){var c=Ft(u).tooltipConfig;if(c&&c.name===n.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:s.componentIndex,el:l}}}}function iWe(n){sn(D2),n.registerComponentModel(z7e),n.registerComponentView(J7e),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ki),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ki)}var aWe=["rect","polygon","keep","clear"];function sWe(n,e){var t=br(n?n.brush:[]);if(t.length){var r=[];W(t,function(l){var u=l.hasOwnProperty("toolbox")?l.toolbox:[];u instanceof Array&&(r=r.concat(u))});var i=n&&n.toolbox;Be(i)&&(i=i[0]),i||(i={feature:{}},n.toolbox=[i]);var a=i.feature||(i.feature={}),s=a.brush||(a.brush={}),o=s.type||(s.type=[]);o.push.apply(o,r),oWe(o),e&&!o.length&&o.push.apply(o,aWe)}}function oWe(n){var e={};W(n,function(t){e[t]=1}),n.length=0,W(e,function(t,r){n.push(r)})}var rre=W;function ire(n){if(n){for(var e in n)if(n.hasOwnProperty(e))return!0}}function j8(n,e,t){var r={};return rre(e,function(a){var s=r[a]=i();rre(n[a],function(o,l){if(Ta.isValidType(l)){var u={type:l,visual:o};t&&t(u,a),s[l]=new Ta(u),l==="opacity"&&(u=Tt(u),u.type="colorAlpha",s.__hidden.__alphaForOpacity=new Ta(u))}})}),r;function i(){var a=function(){};a.prototype.__hidden=a.prototype;var s=new a;return s}}function Bge(n,e,t){var r;W(t,function(i){e.hasOwnProperty(i)&&ire(e[i])&&(r=!0)}),r&&W(t,function(i){e.hasOwnProperty(i)&&ire(e[i])?n[i]=Tt(e[i]):delete n[i]})}function lWe(n,e,t,r,i,a){var s={};W(n,function(h){var d=Ta.prepareVisualTypes(e[h]);s[h]=d});var o;function l(h){return Nj(t,o,h)}function u(h,d){Bde(t,o,h,d)}t.each(c);function c(h,d){o=h;var f=t.getRawDataItem(o);if(!(f&&f.visualMap===!1))for(var p=r.call(i,h),m=e[p],g=s[p],v=0,b=g.length;v<b;v++){var S=g[v];m[S]&&m[S].applyVisual(h,l,u)}}}function uWe(n,e,t,r){var i={};return W(n,function(a){var s=Ta.prepareVisualTypes(e[a]);i[a]=s}),{progress:function(s,o){var l;r!=null&&(l=o.getDimensionIndex(r));function u(E){return Nj(o,h,E)}function c(E,T){Bde(o,h,E,T)}for(var h,d=o.getStore();(h=s.next())!=null;){var f=o.getRawDataItem(h);if(!(f&&f.visualMap===!1))for(var p=r!=null?d.get(l,h):h,m=t(p),g=e[m],v=i[m],b=0,S=v.length;b<S;b++){var w=v[b];g[w]&&g[w].applyVisual(p,u,c)}}}}}function cWe(n){var e=n.brushType,t={point:function(r){return are[e].point(r,t,n)},rect:function(r){return are[e].rect(r,t,n)}};return t}var are={lineX:sre(0),lineY:sre(1),rect:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])},rect:function(n,e,t){return n&&t.boundingRect.intersect(n)}},polygon:{point:function(n,e,t){return n&&t.boundingRect.contain(n[0],n[1])&&$v(t.range,n[0],n[1])},rect:function(n,e,t){var r=t.range;if(!n||r.length<=1)return!1;var i=n.x,a=n.y,s=n.width,o=n.height,l=r[0];if($v(r,i,a)||$v(r,i+s,a)||$v(r,i,a+o)||$v(r,i+s,a+o)||Rt.create(n).contain(l[0],l[1])||qT(i,a,i+s,a,r)||qT(i,a,i,a+o,r)||qT(i+s,a,i+s,a+o,r)||qT(i,a+o,i+s,a+o,r))return!0}}};function sre(n){var e=["x","y"],t=["width","height"];return{point:function(r,i,a){if(r){var s=a.range,o=r[n];return ST(o,s)}},rect:function(r,i,a){if(r){var s=a.range,o=[r[e[n]],r[e[n]]+r[t[n]]];return o[1]<o[0]&&o.reverse(),ST(o[0],s)||ST(o[1],s)||ST(s[0],o)||ST(s[1],o)}}}}function ST(n,e){return e[0]<=n&&n<=e[1]}var ore=["inBrush","outOfBrush"],z5="__ecBrushSelect",W8="__ecInBrushSelectEvent";function Fge(n){n.eachComponent({mainType:"brush"},function(e){var t=e.brushTargetManager=new q7(e.option,n);t.setInputRanges(e.areas,n)})}function hWe(n,e,t){var r=[],i,a;n.eachComponent({mainType:"brush"},function(s){t&&t.type==="takeGlobalCursor"&&s.setBrushOption(t.key==="brush"?t.brushOption:{brushType:!1})}),Fge(n),n.eachComponent({mainType:"brush"},function(s,o){var l={brushId:s.id,brushIndex:o,brushName:s.name,areas:Tt(s.areas),selected:[]};r.push(l);var u=s.option,c=u.brushLink,h=[],d=[],f=[],p=!1;o||(i=u.throttleType,a=u.throttleDelay);var m=Ue(s.areas,function(E){var T=mWe[E.brushType],M=Pt({boundingRect:T?T(E):void 0},E);return M.selectors=cWe(M),M}),g=j8(s.option,ore,function(E){E.mappingMethod="fixed"});Be(c)&&W(c,function(E){h[E]=1});function v(E){return c==="all"||!!h[E]}function b(E){return!!E.length}n.eachSeries(function(E,T){var M=f[T]=[];E.subType==="parallel"?S(E,T):w(E,T,M)});function S(E,T){var M=E.coordinateSystem;p=p||M.hasAxisBrushed(),v(T)&&M.eachActiveState(E.getData(),function(P,I){P==="active"&&(d[I]=1)})}function w(E,T,M){if(!(!E.brushSelector||pWe(s,T))&&(W(m,function(I){s.brushTargetManager.controlSeries(I,E,n)&&M.push(I),p=p||b(M)}),v(T)&&b(M))){var P=E.getData();P.each(function(I){lre(E,M,P,I)&&(d[I]=1)})}}n.eachSeries(function(E,T){var M={seriesId:E.id,seriesIndex:T,seriesName:E.name,dataIndex:[]};l.selected.push(M);var P=f[T],I=E.getData(),D=v(T)?function(R){return d[R]?(M.dataIndex.push(I.getRawIndex(R)),"inBrush"):"outOfBrush"}:function(R){return lre(E,P,I,R)?(M.dataIndex.push(I.getRawIndex(R)),"inBrush"):"outOfBrush"};(v(T)?p:b(P))&&lWe(ore,g,I,D)})}),dWe(e,i,a,r,t)}function dWe(n,e,t,r,i){if(i){var a=n.getZr();if(!a[W8]){a[z5]||(a[z5]=fWe);var s=XS(a,z5,t,e);s(n,r)}}}function fWe(n,e){if(!n.isDisposed()){var t=n.getZr();t[W8]=!0,n.dispatchAction({type:"brushSelect",batch:e}),t[W8]=!1}}function lre(n,e,t,r){for(var i=0,a=e.length;i<a;i++){var s=e[i];if(n.brushSelector(r,t,s.selectors,s))return!0}}function pWe(n,e){var t=n.option.seriesIndex;return t!=null&&t!=="all"&&(Be(t)?Jt(t,e)<0:e!==t)}var mWe={rect:function(n){return ure(n.range)},polygon:function(n){for(var e,t=n.range,r=0,i=t.length;r<i;r++){e=e||[[1/0,-1/0],[1/0,-1/0]];var a=t[r];a[0]<e[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&ure(e)}};function ure(n){return new Rt(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var gWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r,this.model,(this._brushController=new _7(r.getZr())).on("brush",Qe(this._onBrush,this)).mount()},e.prototype.render=function(t,r,i,a){this.model=t,this._updateController(t,r,i,a)},e.prototype.updateTransform=function(t,r,i,a){Fge(r),this._updateController(t,r,i,a)},e.prototype.updateVisual=function(t,r,i,a){this.updateTransform(t,r,i,a)},e.prototype.updateView=function(t,r,i,a){this._updateController(t,r,i,a)},e.prototype._updateController=function(t,r,i,a){(!a||a.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(i)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var r=this.model.id,i=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:Tt(i),$from:r}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:Tt(i),$from:r})},e.type="brush",e})(Gr),vWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.areas=[],t.brushOption={},t}return e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&Bge(i,t,["inBrush","outOfBrush"]);var a=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:this.option.defaultOutOfBrushColor},a.hasOwnProperty("liftZ")||(a.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=Ue(t,function(r){return cre(this.option,r)},this))},e.prototype.setBrushOption=function(t){this.brushOption=cre(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:ve.color.backgroundTint,borderColor:ve.color.borderTint},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4,defaultOutOfBrushColor:ve.color.disabled},e})(_n);function cre(n,e){return en({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new Sn(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},e,!0)}var yWe=["rect","polygon","lineX","lineY","keep","clear"],xWe=(function(n){be(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(t,r,i){var a,s,o;r.eachComponent({mainType:"brush"},function(l){a=l.brushType,s=l.brushOption.brushMode||"single",o=o||!!l.areas.length}),this._brushType=a,this._brushMode=s,W(t.get("type",!0),function(l){t.setIconStatus(l,(l==="keep"?s==="multiple":l==="clear"?o:l===a)?"emphasis":"normal")})},e.prototype.updateView=function(t,r,i){this.render(t,r,i)},e.prototype.getIcons=function(){var t=this.model,r=t.get("icon",!0),i={};return W(t.get("type",!0),function(a){r[a]&&(i[a]=r[a])}),i},e.prototype.onclick=function(t,r,i){var a=this._brushType,s=this._brushMode;i==="clear"?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:i==="keep"?a:a===i?!1:i,brushMode:i==="keep"?s==="multiple"?"single":"multiple":s}})},e.getDefaultOption=function(t){var r={show:!0,type:yWe.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return r},e})(_u);function _We(n){n.registerComponentView(gWe),n.registerComponentModel(vWe),n.registerPreprocessor(sWe),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,hWe),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(r){r.setAreas(e.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},ki),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},ki),F_("brush",xWe)}var bWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:"center",top:ve.size.m,backgroundColor:ve.color.transparent,borderColor:ve.color.primary,borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:ve.color.primary},subtextStyle:{fontSize:12,color:ve.color.quaternary}},e})(_n),SWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this.group.removeAll(),!!t.get("show")){var a=this.group,s=t.getModel("textStyle"),o=t.getModel("subtextStyle"),l=t.get("textAlign"),u=dt(t.get("textBaseline"),t.get("textVerticalAlign")),c=new On({style:Er(s,{text:t.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),h=c.getBoundingRect(),d=t.get("subtext"),f=new On({style:Er(o,{text:d,fill:o.getTextColor(),y:h.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),m=t.get("sublink"),g=t.get("triggerEvent",!0);c.silent=!p&&!g,f.silent=!m&&!g,p&&c.on("click",function(){aN(p,"_"+t.get("target"))}),m&&f.on("click",function(){aN(m,"_"+t.get("subtarget"))}),Ft(c).eventData=Ft(f).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,a.add(c),d&&a.add(f);var v=a.getBoundingRect(),b=t.getBoxLayoutParams();b.width=v.width,b.height=v.height;var S=ha(t,i),w=qr(b,S.refContainer,t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?w.x+=w.width:l==="center"&&(w.x+=w.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?w.y+=w.height:u==="middle"&&(w.y+=w.height/2),u=u||"top"),a.x=w.x,a.y=w.y,a.markRedraw();var E={align:l,verticalAlign:u};c.setStyle(E),f.setStyle(E),v=a.getBoundingRect();var T=w.margin,M=t.getItemStyle(["color","opacity"]);M.fill=t.get("backgroundColor");var P=new fn({shape:{x:v.x-T[3],y:v.y-T[0],width:v.width+T[1]+T[3],height:v.height+T[0]+T[2],r:t.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});a.add(P)}},e.type="title",e})(Gr);function wWe(n){n.registerComponentModel(bWe),n.registerComponentView(SWe)}var hre=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode="box",t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._initData()},e.prototype.mergeOption=function(t){n.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){t==null&&(t=this.option.currentIndex);var r=this._data.count();this.option.loop?t=(t%r+r)%r:(t>=r&&(t=r-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t=this.option,r=t.data||[],i=t.axisType,a=this._names=[],s;i==="category"?(s=[],W(r,function(u,c){var h=oa(FS(u),""),d;Lt(u)?(d=Tt(u),d.value=c):d=c,s.push(d),a.push(h)})):s=r;var o={category:"ordinal",time:"time",value:"number"}[i]||"number",l=this._data=new mo([{name:"value",type:o}],this);l.initData(s,a)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:ve.size.m,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:ve.color.secondary},data:[]},e})(_n),Uge=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline.slider",e.defaultOption=kg(hre.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:ve.color.border,borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:ve.color.accent10},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:ve.color.tertiary},itemStyle:{color:ve.color.accent20,borderWidth:0},checkpointStyle:{symbol:"circle",symbolSize:15,color:ve.color.accent50,borderColor:ve.color.accent50,borderWidth:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"rgba(0, 0, 0, 0)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10.6699C11.5 9.90014 12.3333 9.41887 13 9.80371L20.5 14.1338C21.1667 14.5187 21.1667 15.4813 20.5 15.8662L13 20.1963C12.3333 20.5811 11.5 20.0999 11.5 19.3301V10.6699Z",stopIcon:"path://M15 0C23.2843 0 30 6.71573 30 15C30 23.2843 23.2843 30 15 30C6.71573 30 0 23.2843 0 15C0 6.71573 6.71573 0 15 0ZM15 3C8.37258 3 3 8.37258 3 15C3 21.6274 8.37258 27 15 27C21.6274 27 27 21.6274 27 15C27 8.37258 21.6274 3 15 3ZM11.5 10C12.3284 10 13 10.6716 13 11.5V18.5C13 19.3284 12.3284 20 11.5 20C10.6716 20 10 19.3284 10 18.5V11.5C10 10.6716 10.6716 10 11.5 10ZM18.5 10C19.3284 10 20 10.6716 20 11.5V18.5C20 19.3284 19.3284 20 18.5 20C17.6716 20 17 19.3284 17 18.5V11.5C17 10.6716 17.6716 10 18.5 10Z",nextIcon:"path://M0.838834 18.7383C0.253048 18.1525 0.253048 17.2028 0.838834 16.617L7.55635 9.89949L0.838834 3.18198C0.253048 2.59619 0.253048 1.64645 0.838834 1.06066C1.42462 0.474874 2.37437 0.474874 2.96015 1.06066L10.7383 8.83883L10.8412 8.95277C11.2897 9.50267 11.2897 10.2963 10.8412 10.8462L10.7383 10.9602L2.96015 18.7383C2.37437 19.3241 1.42462 19.3241 0.838834 18.7383Z",prevIcon:"path://M10.9602 1.06066C11.5459 1.64645 11.5459 2.59619 10.9602 3.18198L4.24264 9.89949L10.9602 16.617C11.5459 17.2028 11.5459 18.1525 10.9602 18.7383C10.3744 19.3241 9.42462 19.3241 8.83883 18.7383L1.06066 10.9602L0.957771 10.8462C0.509245 10.2963 0.509245 9.50267 0.957771 8.95277L1.06066 8.83883L8.83883 1.06066C9.42462 0.474874 10.3744 0.474874 10.9602 1.06066Z",prevBtnSize:18,nextBtnSize:18,color:ve.color.accent50,borderColor:ve.color.accent50,borderWidth:0},emphasis:{label:{show:!0,color:ve.color.accent60},itemStyle:{color:ve.color.accent60,borderColor:ve.color.accent60},controlStyle:{color:ve.color.accent70,borderColor:ve.color.accent70}},progress:{lineStyle:{color:ve.color.accent30},itemStyle:{color:ve.color.accent40}},data:[]}),e})(hre);Zi(Uge,x3.prototype);var TWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="timeline",e})(Gr),EWe=(function(n){be(e,n);function e(t,r,i,a){var s=n.call(this,t,r,i)||this;return s.type=a||"value",s}return e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},e})(Oc),V5=Math.PI,dre=mn(),AWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,r){this.api=r},e.prototype.render=function(t,r,i){if(this.model=t,this.api=i,this.ecModel=r,this.group.removeAll(),t.get("show",!0)){var a=this._layout(t,i),s=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),l=this._axis=this._createAxis(a,t);t.formatTooltip=function(u){var c=l.scale.getLabel({value:u});return qi("nameValue",{noName:!0,value:c})},W(["AxisLine","AxisTick","Control","CurrentPointer"],function(u){this["_render"+u](a,s,l,t)},this),this._renderAxisLabel(a,o,l,t),this._position(a,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,r){var i=t.get(["label","position"]),a=t.get("orient"),s=MWe(t,r),o;i==null||i==="auto"?o=a==="horizontal"?s.y+s.height/2<r.getHeight()/2?"-":"+":s.x+s.width/2<r.getWidth()/2?"+":"-":Ke(i)?o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][i]:o=i;var l={horizontal:"center",vertical:o>=0||o==="+"?"left":"right"},u={horizontal:o>=0||o==="+"?"top":"bottom",vertical:"middle"},c={horizontal:0,vertical:V5/2},h=a==="vertical"?s.height:s.width,d=t.getModel("controlStyle"),f=d.get("show",!0),p=f?d.get("itemSize"):0,m=f?d.get("itemGap"):0,g=p+m,v=t.get(["label","rotate"])||0;v=v*V5/180;var b,S,w,E=d.get("position",!0),T=f&&d.get("showPlayBtn",!0),M=f&&d.get("showPrevBtn",!0),P=f&&d.get("showNextBtn",!0),I=0,D=h;E==="left"||E==="bottom"?(T&&(b=[0,0],I+=g),M&&(S=[I,0],I+=g),P&&(w=[D-p,0],D-=g)):(T&&(b=[D-p,0],D-=g),M&&(S=[0,0],I+=g),P&&(w=[D-p,0],D-=g));var R=[I,D];return t.get("inverse")&&R.reverse(),{viewRect:s,mainLength:h,orient:a,rotation:c[a],labelRotation:v,labelPosOpt:o,labelAlign:t.get(["label","align"])||l[a],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[a],playPosition:b,prevBtnPosition:S,nextBtnPosition:w,axisExtent:R,controlSize:p,controlGap:m}},e.prototype._position=function(t,r){var i=this._mainGroup,a=this._labelGroup,s=t.viewRect;if(t.orient==="vertical"){var o=Ya(),l=s.x,u=s.y+s.height;td(o,o,[-l,-u]),Rg(o,o,-V5/2),td(o,o,[l,u]),s=s.clone(),s.applyTransform(o)}var c=b(s),h=b(i.getBoundingRect()),d=b(a.getBoundingRect()),f=[i.x,i.y],p=[a.x,a.y];p[0]=f[0]=c[0][0];var m=t.labelPosOpt;if(m==null||Ke(m)){var g=m==="+"?0:1;S(f,h,c,1,g),S(p,d,c,1,1-g)}else{var g=m>=0?0:1;S(f,h,c,1,g),p[1]=f[1]+m}i.setPosition(f),a.setPosition(p),i.rotation=a.rotation=t.rotation,v(i),v(a);function v(w){w.originX=c[0][0]-w.x,w.originY=c[1][0]-w.y}function b(w){return[[w.x,w.x+w.width],[w.y,w.y+w.height]]}function S(w,E,T,M,P){w[M]+=T[M][P]-E[M][P]}},e.prototype._createAxis=function(t,r){var i=r.getData(),a=r.get("axisType"),s=CWe(r,a);s.getTicks=function(){return i.mapArray(["value"],function(u){return{value:u}})};var o=i.getDataExtent("value");s.setExtent(o[0],o[1]),s.calcNiceTicks();var l=new EWe("value",s,t.axisExtent,a);return l.model=r,l},e.prototype._createGroup=function(t){var r=this[t]=new wt;return this.group.add(r),r},e.prototype._renderAxisLine=function(t,r,i,a){var s=i.getExtent();if(a.get(["lineStyle","show"])){var o=new Xi({shape:{x1:s[0],y1:0,x2:s[1],y2:0},style:Pe({lineCap:"round"},a.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(o);var l=this._progressLine=new Xi({shape:{x1:s[0],x2:this._currentPointer?this._currentPointer.x:s[0],y1:0,y2:0},style:Pt({lineCap:"round",lineWidth:o.style.lineWidth},a.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(l)}},e.prototype._renderAxisTick=function(t,r,i,a){var s=this,o=a.getData(),l=i.scale.getTicks();this._tickSymbols=[],W(l,function(u){var c=i.dataToCoord(u.value),h=o.getItemModel(u.value),d=h.getModel("itemStyle"),f=h.getModel(["emphasis","itemStyle"]),p=h.getModel(["progress","itemStyle"]),m={x:c,y:0,onclick:Qe(s._changeTimeline,s,u.value)},g=fre(h,d,r,m);g.ensureState("emphasis").style=f.getItemStyle(),g.ensureState("progress").style=p.getItemStyle(),Ly(g);var v=Ft(g);h.get("tooltip")?(v.dataIndex=u.value,v.dataModel=a):v.dataIndex=v.dataModel=null,s._tickSymbols.push(g)})},e.prototype._renderAxisLabel=function(t,r,i,a){var s=this,o=i.getLabelModel();if(o.get("show")){var l=a.getData(),u=i.getViewLabels();this._tickLabels=[],W(u,function(c){var h=c.tickValue,d=l.getItemModel(h),f=d.getModel("label"),p=d.getModel(["emphasis","label"]),m=d.getModel(["progress","label"]),g=i.dataToCoord(c.tickValue),v=new On({x:g,y:0,rotation:t.labelRotation-t.rotation,onclick:Qe(s._changeTimeline,s,h),silent:!1,style:Er(f,{text:c.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});v.ensureState("emphasis").style=Er(p),v.ensureState("progress").style=Er(m),r.add(v),Ly(v),dre(v).dataIndex=h,s._tickLabels.push(v)})}},e.prototype._renderControl=function(t,r,i,a){var s=t.controlSize,o=t.rotation,l=a.getModel("controlStyle").getItemStyle(),u=a.getModel(["emphasis","controlStyle"]).getItemStyle(),c=a.getPlayState(),h=a.get("inverse",!0);d(t.nextBtnPosition,"next",Qe(this._changeTimeline,this,h?"-":"+")),d(t.prevBtnPosition,"prev",Qe(this._changeTimeline,this,h?"+":"-")),d(t.playPosition,c?"stop":"play",Qe(this._handlePlayClick,this,!c),!0);function d(f,p,m,g){if(f){var v=Pc(dt(a.get(["controlStyle",p+"BtnSize"]),s),s),b=[0,-v/2,v,v],S=DWe(a,p+"Icon",b,{x:f[0],y:f[1],originX:s/2,originY:0,rotation:g?-o:0,rectHover:!0,style:l,onclick:m});S.ensureState("emphasis").style=u,r.add(S),Ly(S)}}},e.prototype._renderCurrentPointer=function(t,r,i,a){var s=a.getData(),o=a.getCurrentIndex(),l=s.getItemModel(o).getModel("checkpointStyle"),u=this,c={onCreate:function(h){h.draggable=!0,h.drift=Qe(u._handlePointerDrag,u),h.ondragend=Qe(u._handlePointerDragend,u),pre(h,u._progressLine,o,i,a,!0)},onUpdate:function(h){pre(h,u._progressLine,o,i,a)}};this._currentPointer=fre(l,l,this._mainGroup,{},this._currentPointer,c)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,r,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,r){var i=this._toAxisCoord(t)[0],a=this._axis,s=Du(a.getExtent().slice());i>s[1]&&(i=s[1]),i<s[0]&&(i=s[0]),this._currentPointer.x=i,this._currentPointer.markRedraw();var o=this._progressLine;o&&(o.shape.x2=i,o.dirty());var l=this._findNearestTick(i),u=this.model;(r||l!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(l)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=t.model;t._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var r=this._mainGroup.getLocalTransform();return Ac(t,r,!0)},e.prototype._findNearestTick=function(t){var r=this.model.getData(),i=1/0,a,s=this._axis;return r.each(["value"],function(o,l){var u=s.dataToCoord(o),c=Math.abs(u-t);c<i&&(i=c,a=l)}),a},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var r=this.model.getCurrentIndex();t==="+"?t=r+1:t==="-"&&(t=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),r=this._tickSymbols,i=this._tickLabels;if(r)for(var a=0;a<r.length;a++)r&&r[a]&&r[a].toggleState("progress",a<t);if(i)for(var a=0;a<i.length;a++)i&&i[a]&&i[a].toggleState("progress",dre(i[a]).dataIndex<=t)},e.type="timeline.slider",e})(TWe);function CWe(n,e){if(e=e||n.get("type"),e)switch(e){case"category":return new sS({ordinalMeta:n.getCategories(),extent:[1/0,-1/0]});case"time":return new jj({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new Zf}}function MWe(n,e){return qr(n.getBoxLayoutParams(),ha(n,e).refContainer,n.get("padding"))}function DWe(n,e,t,r){var i=r.style,a=v2(n.get(["controlStyle",e]),r||{},new Rt(t[0],t[1],t[2],t[3]));return i&&a.setStyle(i),a}function fre(n,e,t,r,i,a){var s=e.get("color");if(i)i.setColor(s),t.add(i),a&&a.onUpdate(i);else{var o=n.get("symbol");i=Ki(o,-1,-1,2,2,s),i.setStyle("strokeNoScale",!0),t.add(i),a&&a.onCreate(i)}var l=e.getItemStyle(["color"]);i.setStyle(l),r=en({rectHover:!0,z2:100},r,!0);var u=$S(n.get("symbolSize"));r.scaleX=u[0]/2,r.scaleY=u[1]/2;var c=lx(n.get("symbolOffset"),u);c&&(r.x=(r.x||0)+c[0],r.y=(r.y||0)+c[1]);var h=n.get("symbolRotate");return r.rotation=(h||0)*Math.PI/180||0,i.attr(r),i.updateTransform(),i}function pre(n,e,t,r,i,a){if(!n.dragging){var s=i.getModel("checkpointStyle"),o=r.dataToCoord(i.getData().get("value",t));if(a||!s.get("animation",!0))n.attr({x:o,y:0}),e&&e.attr({shape:{x2:o}});else{var l={duration:s.get("animationDuration",!0),easing:s.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:o,y:0},l),e&&e.animateTo({shape:{x2:o}},l)}}}function IWe(n){n.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t,r){var i=t.getComponent("timeline");return i&&e.currentIndex!=null&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),r.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),t.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Pt({currentIndex:i.option.currentIndex},e)}),n.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var r=t.getComponent("timeline");r&&e.playState!=null&&r.setPlayState(e.playState)})}function PWe(n){var e=n&&n.timeline;Be(e)||(e=e?[e]:[]),W(e,function(t){t&&LWe(t)})}function LWe(n){var e=n.type,t={number:"value",time:"time"};if(t[e]&&(n.axisType=t[e],delete n.type),mre(n),Kv(n,"controlPosition")){var r=n.controlStyle||(n.controlStyle={});Kv(r,"position")||(r.position=n.controlPosition),r.position==="none"&&!Kv(r,"show")&&(r.show=!1,delete r.position),delete n.controlPosition}W(n.data||[],function(i){Lt(i)&&!Be(i)&&(!Kv(i,"value")&&Kv(i,"name")&&(i.value=i.name),mre(i))})}function mre(n){var e=n.itemStyle||(n.itemStyle={}),t=e.emphasis||(e.emphasis={}),r=n.label||n.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};W(r,function(s,o){!a[o]&&!Kv(i,o)&&(i[o]=s)}),t.label&&!Kv(r,"emphasis")&&(r.emphasis=t.label,delete t.label)}function Kv(n,e){return n.hasOwnProperty(e)}function RWe(n){n.registerComponentModel(Uge),n.registerComponentView(AWe),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),IWe(n),n.registerPreprocessor(PWe)}function Q7(n,e){if(!n)return!1;for(var t=Be(n)?n:[n],r=0;r<t.length;r++)if(t[r]&&t[r][e])return!0;return!1}function fP(n){Uy(n,"label",["show"])}var pP=mn(),sd=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.createdBySelf=!1,t.preventAutoZ=!0,t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),this._mergeOption(t,i,!1,!0)},e.prototype.isAnimationEnabled=function(){if(bn.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,r){this._mergeOption(t,r,!1,!1)},e.prototype._mergeOption=function(t,r,i,a){var s=this.mainType;i||r.eachSeries(function(o){var l=o.get(this.mainType,!0),u=pP(o)[s];if(!l||!l.data){pP(o)[s]=null;return}u?u._mergeOption(l,r,!0):(a&&fP(l),W(l.data,function(c){c instanceof Array?(fP(c[0]),fP(c[1])):fP(c)}),u=this.createMarkerModelFromSeries(l,this,r),Pe(u,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),u.__hostSeries=o),pP(o)[s]=u},this)},e.prototype.formatTooltip=function(t,r,i){var a=this.getData(),s=this.getRawValue(t),o=a.getName(t);return qi("section",{header:this.name,blocks:[qi("nameValue",{name:o,value:s,noName:!o,noValue:s==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.prototype.getDataParams=function(t,r){var i=x3.prototype.getDataParams.call(this,t,r),a=this.__hostSeries;return a&&(i.seriesId=a.id,i.seriesName=a.name,i.seriesType=a.subType),i},e.getMarkerModelFromSeries=function(t,r){return pP(t)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e})(_n);Zi(sd,x3.prototype);var NWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e})(sd);function X8(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function kWe(n){return!isNaN(parseFloat(n.x))&&!isNaN(parseFloat(n.y))}function mP(n,e,t,r,i,a,s){var o=[],l=Sg(e,i),u=l?e.getCalculationInfo("stackResultDimension"):i,c=FN(e,u,n),h=e.hostModel,d=h.indicesOfNearest(t,u,c)[0];o[a]=e.get(r,d),o[s]=e.get(u,d);var f=e.get(i,d),p=Fh(e.get(i,d));return p=Math.min(p,20),p>=0&&(o[s]=+o[s].toFixed(p)),[o,f]}var gP={min:Qt(mP,"min"),max:Qt(mP,"max"),average:Qt(mP,"average"),median:Qt(mP,"median")};function zA(n,e){if(e){var t=n.getData(),r=n.coordinateSystem,i=r&&r.dimensions;if(!kWe(e)&&!Be(e.coord)&&Be(i)){var a=zge(e,t,r,n);if(e=Tt(e),e.type&&gP[e.type]&&a.baseAxis&&a.valueAxis){var s=Jt(i,a.baseAxis.dim),o=Jt(i,a.valueAxis.dim),l=gP[e.type](t,a.valueAxis.dim,a.baseDataDim,a.valueDataDim,s,o);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!Be(i)){e.coord=[];var u=n.getBaseAxis();if(u&&e.type&&gP[e.type]){var c=r.getOtherAxis(u);c&&(e.value=FN(t,t.mapDimension(c.dim),e.type))}}else for(var h=e.coord,d=0;d<2;d++)gP[h[d]]&&(h[d]=FN(t,t.mapDimension(i[d]),h[d]));return e}}function zge(n,e,t,r){var i={};return n.valueIndex!=null||n.valueDim!=null?(i.valueDataDim=n.valueIndex!=null?e.getDimension(n.valueIndex):n.valueDim,i.valueAxis=t.getAxis(OWe(r,i.valueDataDim)),i.baseAxis=t.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=t.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function OWe(n,e){var t=n.getData().getDimensionInfo(e);return t&&t.coordDim}function VA(n,e){return n&&n.containData&&e.coord&&!X8(e)?n.containData(e.coord):!0}function BWe(n,e,t){return n&&n.containZone&&e.coord&&t.coord&&!X8(e)&&!X8(t)?n.containZone(e.coord,t.coord):!0}function Vge(n,e){return n?function(t,r,i,a){var s=a<2?t.coord&&t.coord[a]:t.value;return gg(s,e[a])}:function(t,r,i,a){return gg(t.value,e[a])}}function FN(n,e,t){if(t==="average"){var r=0,i=0;return n.each(e,function(a,s){isNaN(a)||(r+=a,i++)}),r/i}else return t==="median"?n.getMedian(e):n.getDataExtent(e)[t==="max"?1:0]}var H5=mn(),J7=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(){this.markerGroupMap=ct()},e.prototype.render=function(t,r,i){var a=this,s=this.markerGroupMap;s.each(function(o){H5(o).keep=!1}),r.eachSeries(function(o){var l=sd.getMarkerModelFromSeries(o,a.type);l&&a.renderSeries(o,l,r,i)}),s.each(function(o){!H5(o).keep&&a.group.remove(o.group)}),FWe(r,s,this.type)},e.prototype.markKeep=function(t){H5(t).keep=!0},e.prototype.toggleBlurSeries=function(t,r){var i=this;W(t,function(a){var s=sd.getMarkerModelFromSeries(a,i.type);if(s){var o=s.getData();o.eachItemGraphicEl(function(l){l&&(r?nhe(l):oj(l))})}})},e.type="marker",e})(Gr);function FWe(n,e,t){n.eachSeries(function(r){var i=sd.getMarkerModelFromSeries(r,t),a=e.get(r.id);if(i&&a&&a.group){var s=jy(i),o=s.z,l=s.zlevel;p3(a.group,o,l)}})}function gre(n,e,t){var r=e.coordinateSystem,i=t.getWidth(),a=t.getHeight(),s=r&&r.getArea&&r.getArea();n.each(function(o){var l=n.getItemModel(o),u=l.get("relativeTo")==="coordinate",c=u?s?s.width:0:i,h=u?s?s.height:0:a,d=u&&s?s.x:0,f=u&&s?s.y:0,p,m=Xe(l.get("x"),c)+d,g=Xe(l.get("y"),h)+f;if(!isNaN(m)&&!isNaN(g))p=[m,g];else if(e.getMarkerPosition)p=e.getMarkerPosition(n.getValues(n.dimensions,o));else if(r){var v=n.get(r.dimensions[0],o),b=n.get(r.dimensions[1],o);p=r.dataToPoint([v,b])}isNaN(m)||(p[0]=m),isNaN(g)||(p[1]=g),n.setItemLayout(o,p)})}var UWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var s=sd.getMarkerModelFromSeries(a,"markPoint");s&&(gre(s.getData(),a,i),this.markerGroupMap.get(a.id).updateLayout())},this)},e.prototype.renderSeries=function(t,r,i,a){var s=t.coordinateSystem,o=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(o)||u.set(o,new E2),h=zWe(s,t,r);r.setData(h),gre(r.getData(),t,a),h.each(function(d){var f=h.getItemModel(d),p=f.getShallow("symbol"),m=f.getShallow("symbolSize"),g=f.getShallow("symbolRotate"),v=f.getShallow("symbolOffset"),b=f.getShallow("symbolKeepAspect");if(St(p)||St(m)||St(g)||St(v)){var S=r.getRawValue(d),w=r.getDataParams(d);St(p)&&(p=p(S,w)),St(m)&&(m=m(S,w)),St(g)&&(g=g(S,w)),St(v)&&(v=v(S,w))}var E=f.getModel("itemStyle").getItemStyle(),T=f.get("z2"),M=b2(l,"color");E.fill||(E.fill=M),h.setItemVisual(d,{z2:dt(T,0),symbol:p,symbolSize:m,symbolRotate:g,symbolOffset:v,symbolKeepAspect:b,style:E})}),c.updateData(h),this.group.add(c.group),h.eachItemGraphicEl(function(d){d.traverse(function(f){Ft(f).dataModel=r})}),this.markKeep(c),c.group.silent=r.get("silent")||t.get("silent")},e.type="markPoint",e})(J7);function zWe(n,e,t){var r;n?r=Ue(n&&n.dimensions,function(o){var l=e.getData().getDimensionInfo(e.getData().mapDimension(o))||{};return Pe(Pe({},l),{name:o,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new mo(r,t),a=Ue(t.get("data"),Qt(zA,e));n&&(a=er(a,Qt(VA,n)));var s=Vge(!!n,r);return i.initData(a,null,s),i}function VWe(n){n.registerComponentModel(NWe),n.registerComponentView(UWe),n.registerPreprocessor(function(e){Q7(e.series,"markPoint")&&(e.markPoint=e.markPoint||{})})}var HWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e})(sd),vP=mn(),GWe=function(n,e,t,r){var i=n.getData(),a;if(Be(r))a=r;else{var s=r.type;if(s==="min"||s==="max"||s==="average"||s==="median"||r.xAxis!=null||r.yAxis!=null){var o=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)o=e.getAxis(r.yAxis!=null?"y":"x"),l=fs(r.yAxis,r.xAxis);else{var u=zge(r,i,e,n);o=u.valueAxis;var c=pfe(i,u.valueDataDim);l=FN(i,c,s)}var h=o.dim==="x"?0:1,d=1-h,f=Tt(r),p={coord:[]};f.type=null,f.coord=[],f.coord[d]=-1/0,p.coord[d]=1/0;var m=t.get("precision");m>=0&&Ln(l)&&(l=+l.toFixed(Math.min(m,20))),f.coord[h]=p.coord[h]=l,a=[f,p,{type:s,valueIndex:r.valueIndex,value:l}]}else a=[]}var g=[zA(n,a[0]),zA(n,a[1]),Pe({},a[2])];return g[2].type=g[2].type||null,en(g[2],g[0]),en(g[2],g[1]),g};function UN(n){return!isNaN(n)&&!isFinite(n)}function vre(n,e,t,r){var i=1-n,a=r.dimensions[n];return UN(e[i])&&UN(t[i])&&e[n]===t[n]&&r.getAxis(a).containData(e[n])}function jWe(n,e){if(n.type==="cartesian2d"){var t=e[0].coord,r=e[1].coord;if(t&&r&&(vre(1,t,r,n)||vre(0,t,r,n)))return!0}return VA(n,e[0])&&VA(n,e[1])}function G5(n,e,t,r,i){var a=r.coordinateSystem,s=n.getItemModel(e),o,l=Xe(s.get("x"),i.getWidth()),u=Xe(s.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))o=[l,u];else{if(r.getMarkerPosition)o=r.getMarkerPosition(n.getValues(n.dimensions,e));else{var c=a.dimensions,h=n.get(c[0],e),d=n.get(c[1],e);o=a.dataToPoint([h,d])}if(wg(a,"cartesian2d")){var f=a.getAxis("x"),p=a.getAxis("y"),c=a.dimensions;UN(n.get(c[0],e))?o[0]=f.toGlobalCoord(f.getExtent()[t?0:1]):UN(n.get(c[1],e))&&(o[1]=p.toGlobalCoord(p.getExtent()[t?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}n.setItemLayout(e,o)}var WWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var s=sd.getMarkerModelFromSeries(a,"markLine");if(s){var o=s.getData(),l=vP(s).from,u=vP(s).to;l.each(function(c){G5(l,c,!0,a,i),G5(u,c,!1,a,i)}),o.each(function(c){o.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(a.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,r,i,a){var s=t.coordinateSystem,o=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(o)||u.set(o,new y7);this.group.add(c.group);var h=XWe(s,t,r),d=h.from,f=h.to,p=h.line;vP(r).from=d,vP(r).to=f,r.setData(p);var m=r.get("symbol"),g=r.get("symbolSize"),v=r.get("symbolRotate"),b=r.get("symbolOffset");Be(m)||(m=[m,m]),Be(g)||(g=[g,g]),Be(v)||(v=[v,v]),Be(b)||(b=[b,b]),h.from.each(function(w){S(d,w,!0),S(f,w,!1)}),p.each(function(w){var E=p.getItemModel(w),T=E.getModel("lineStyle").getLineStyle();p.setItemLayout(w,[d.getItemLayout(w),f.getItemLayout(w)]);var M=E.get("z2");T.stroke==null&&(T.stroke=d.getItemVisual(w,"style").fill),p.setItemVisual(w,{z2:dt(M,0),fromSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:d.getItemVisual(w,"symbolOffset"),fromSymbolRotate:d.getItemVisual(w,"symbolRotate"),fromSymbolSize:d.getItemVisual(w,"symbolSize"),fromSymbol:d.getItemVisual(w,"symbol"),toSymbolKeepAspect:f.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(w,"symbolOffset"),toSymbolRotate:f.getItemVisual(w,"symbolRotate"),toSymbolSize:f.getItemVisual(w,"symbolSize"),toSymbol:f.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),h.line.eachItemGraphicEl(function(w){Ft(w).dataModel=r,w.traverse(function(E){Ft(E).dataModel=r})});function S(w,E,T){var M=w.getItemModel(E);G5(w,E,T,t,a);var P=M.getModel("itemStyle").getItemStyle();P.fill==null&&(P.fill=b2(l,"color")),w.setItemVisual(E,{symbolKeepAspect:M.get("symbolKeepAspect"),symbolOffset:dt(M.get("symbolOffset",!0),b[T?0:1]),symbolRotate:dt(M.get("symbolRotate",!0),v[T?0:1]),symbolSize:dt(M.get("symbolSize"),g[T?0:1]),symbol:dt(M.get("symbol",!0),m[T?0:1]),style:P})}this.markKeep(c),c.group.silent=r.get("silent")||t.get("silent")},e.type="markLine",e})(J7);function XWe(n,e,t){var r;n?r=Ue(n&&n.dimensions,function(u){var c=e.getData().getDimensionInfo(e.getData().mapDimension(u))||{};return Pe(Pe({},c),{name:u,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var i=new mo(r,t),a=new mo(r,t),s=new mo([],t),o=Ue(t.get("data"),Qt(GWe,e,n,t));n&&(o=er(o,Qt(jWe,n)));var l=Vge(!!n,r);return i.initData(Ue(o,function(u){return u[0]}),null,l),a.initData(Ue(o,function(u){return u[1]}),null,l),s.initData(Ue(o,function(u){return u[2]})),s.hasItemOption=!0,{from:i,to:a,line:s}}function $We(n){n.registerComponentModel(HWe),n.registerComponentView(WWe),n.registerPreprocessor(function(e){Q7(e.series,"markLine")&&(e.markLine=e.markLine||{})})}var YWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.createMarkerModelFromSeries=function(t,r,i){return new e(t,r,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e})(sd),yP=mn(),qWe=function(n,e,t,r){var i=r[0],a=r[1];if(!(!i||!a)){var s=zA(n,i),o=zA(n,a),l=s.coord,u=o.coord;l[0]=fs(l[0],-1/0),l[1]=fs(l[1],-1/0),u[0]=fs(u[0],1/0),u[1]=fs(u[1],1/0);var c=GG([{},s,o]);return c.coord=[s.coord,o.coord],c.x0=s.x,c.y0=s.y,c.x1=o.x,c.y1=o.y,c}};function zN(n){return!isNaN(n)&&!isFinite(n)}function yre(n,e,t,r){var i=1-n;return zN(e[i])&&zN(t[i])}function KWe(n,e){var t=e.coord[0],r=e.coord[1],i={coord:t,x:e.x0,y:e.y0},a={coord:r,x:e.x1,y:e.y1};return wg(n,"cartesian2d")?t&&r&&(yre(1,t,r)||yre(0,t,r))?!0:BWe(n,i,a):VA(n,i)||VA(n,a)}function xre(n,e,t,r,i){var a=r.coordinateSystem,s=n.getItemModel(e),o,l=Xe(s.get(t[0]),i.getWidth()),u=Xe(s.get(t[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))o=[l,u];else{if(r.getMarkerPosition){var c=n.getValues(["x0","y0"],e),h=n.getValues(["x1","y1"],e),d=a.clampData(c),f=a.clampData(h),p=[];t[0]==="x0"?p[0]=d[0]>f[0]?h[0]:c[0]:p[0]=d[0]>f[0]?c[0]:h[0],t[1]==="y0"?p[1]=d[1]>f[1]?h[1]:c[1]:p[1]=d[1]>f[1]?c[1]:h[1],o=r.getMarkerPosition(p,t,!0)}else{var m=n.get(t[0],e),g=n.get(t[1],e),v=[m,g];a.clampData&&a.clampData(v,v),o=a.dataToPoint(v,!0)}if(wg(a,"cartesian2d")){var b=a.getAxis("x"),S=a.getAxis("y"),m=n.get(t[0],e),g=n.get(t[1],e);zN(m)?o[0]=b.toGlobalCoord(b.getExtent()[t[0]==="x0"?0:1]):zN(g)&&(o[1]=S.toGlobalCoord(S.getExtent()[t[1]==="y0"?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}return o}var _re=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],ZWe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.updateTransform=function(t,r,i){r.eachSeries(function(a){var s=sd.getMarkerModelFromSeries(a,"markArea");if(s){var o=s.getData();o.each(function(l){var u=Ue(_re,function(h){return xre(o,l,h,a,i)});o.setItemLayout(l,u);var c=o.getItemGraphicEl(l);c.setShape("points",u)})}},this)},e.prototype.renderSeries=function(t,r,i,a){var s=t.coordinateSystem,o=t.id,l=t.getData(),u=this.markerGroupMap,c=u.get(o)||u.set(o,{group:new wt});this.group.add(c.group),this.markKeep(c);var h=QWe(s,t,r);r.setData(h),h.each(function(d){var f=Ue(_re,function(D){return xre(h,d,D,t,a)}),p=s.getAxis("x").scale,m=s.getAxis("y").scale,g=p.getExtent(),v=m.getExtent(),b=[p.parse(h.get("x0",d)),p.parse(h.get("x1",d))],S=[m.parse(h.get("y0",d)),m.parse(h.get("y1",d))];Du(b),Du(S);var w=!(g[0]>b[1]||g[1]<b[0]||v[0]>S[1]||v[1]<S[0]),E=!w;h.setItemLayout(d,{points:f,allClipped:E});var T=h.getItemModel(d),M=T.getModel("itemStyle").getItemStyle(),P=T.get("z2"),I=b2(l,"color");M.fill||(M.fill=I,Ke(M.fill)&&(M.fill=WR(M.fill,.4))),M.stroke||(M.stroke=I),h.setItemVisual(d,"style",M),h.setItemVisual(d,"z2",dt(P,0))}),h.diff(yP(c).data).add(function(d){var f=h.getItemLayout(d),p=h.getItemVisual(d,"z2");if(!f.allClipped){var m=new Vs({z2:dt(p,0),shape:{points:f.points}});h.setItemGraphicEl(d,m),c.group.add(m)}}).update(function(d,f){var p=yP(c).data.getItemGraphicEl(f),m=h.getItemLayout(d),g=h.getItemVisual(d,"z2");m.allClipped?p&&c.group.remove(p):(p?Vn(p,{z2:dt(g,0),shape:{points:m.points}},r,d):p=new Vs({shape:{points:m.points}}),h.setItemGraphicEl(d,p),c.group.add(p))}).remove(function(d){var f=yP(c).data.getItemGraphicEl(d);c.group.remove(f)}).execute(),h.eachItemGraphicEl(function(d,f){var p=h.getItemModel(f),m=h.getItemVisual(f,"style");d.useStyle(h.getItemVisual(f,"style")),Aa(d,ca(p),{labelFetcher:r,labelDataIndex:f,defaultText:h.getName(f)||"",inheritColor:Ke(m.fill)?WR(m.fill,1):ve.color.neutral99}),ua(d,p),Yr(d,null,null,p.get(["emphasis","disabled"])),Ft(d).dataModel=r}),yP(c).data=h,c.group.silent=r.get("silent")||t.get("silent")},e.type="markArea",e})(J7);function QWe(n,e,t){var r,i,a=["x0","y0","x1","y1"];if(n){var s=Ue(n&&n.dimensions,function(u){var c=e.getData(),h=c.getDimensionInfo(c.mapDimension(u))||{};return Pe(Pe({},h),{name:u,ordinalMeta:null})});i=Ue(a,function(u,c){return{name:u,type:s[c%2].type}}),r=new mo(i,t)}else i=[{name:"value",type:"float"}],r=new mo(i,t);var o=Ue(t.get("data"),Qt(qWe,e,n,t));n&&(o=er(o,Qt(KWe,n)));var l=n?function(u,c,h,d){var f=u.coord[Math.floor(d/2)][d%2];return gg(f,i[d])}:function(u,c,h,d){return gg(u.value,i[d])};return r.initData(o,null,l),r.hasItemOption=!0,r}function JWe(n){n.registerComponentModel(YWe),n.registerComponentView(ZWe),n.registerPreprocessor(function(e){Q7(e.series,"markArea")&&(e.markArea=e.markArea||{})})}var eXe=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},$8=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),this._updateSelector(t)},e.prototype._updateSelector=function(t){var r=t.selector,i=this.ecModel;r===!0&&(r=t.selector=["all","inverse"]),Be(r)&&W(r,function(a,s){Ke(a)&&(a={type:a}),r[s]=en(a,eXe(i,a.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var r=!1,i=0;i<t.length;i++){var a=t[i].get("name");if(this.isSelected(a)){this.select(a),r=!0;break}}!r&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var r=[],i=[];t.eachRawSeries(function(l){var u=l.name;i.push(u);var c;if(l.legendVisualProvider){var h=l.legendVisualProvider,d=h.getAllNames();t.isSeriesFiltered(l)||(i=i.concat(d)),d.length?r=r.concat(d):c=!0}else c=!0;c&&QG(l)&&r.push(l.name)}),this._availableNames=i;var a=this.get("data")||r,s=ct(),o=Ue(a,function(l){return(Ke(l)||Ln(l))&&(l={name:l}),s.get(l.name)?null:(s.set(l.name,!0),new Sn(l,this,this.ecModel))},this);this._data=er(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var r=this.option.selected,i=this.get("selectedMode");if(i==="single"){var a=this._data;W(a,function(s){r[s.get("name")]=!1})}r[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var r=this.option.selected;r.hasOwnProperty(t)||(r[t]=!0),this[r[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,r=this.option.selected;W(t,function(i){r[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,r=this.option.selected;W(t,function(i){var a=i.get("name",!0);r.hasOwnProperty(a)||(r[a]=!0),r[a]=!r[a]})},e.prototype.isSelected=function(t){var r=this.option.selected;return!(r.hasOwnProperty(t)&&!r[t])&&Jt(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",bottom:ve.size.m,align:"auto",backgroundColor:ve.color.transparent,borderColor:ve.color.border,borderRadius:0,borderWidth:0,padding:5,itemGap:8,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:ve.color.disabled,inactiveBorderColor:ve.color.disabled,inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:ve.color.disabled,inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:ve.color.secondary},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:ve.color.tertiary,borderWidth:1,borderColor:ve.color.border},emphasis:{selectorLabel:{show:!0,color:ve.color.quaternary}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1},triggerEvent:!1},e})(_n),h_=Qt,Y8=W,xP=wt,Hge=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new xP),this.group.add(this._selectorGroup=new xP),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,r,i){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var s=t.get("align"),o=t.get("orient");(!s||s==="auto")&&(s=t.get("left")==="right"&&o==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=o==="horizontal"?"end":"start"),this.renderInner(s,t,r,i,l,o,u);var c=ha(t,i).refContainer,h=t.getBoxLayoutParams(),d=t.get("padding"),f=qr(h,c,d),p=this.layoutInner(t,s,f,a,l,u),m=qr(Pt({width:p.width,height:p.height},h),c,d);this.group.x=m.x-p.x,this.group.y=m.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Ige(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,r,i,a,s,o,l){var u=this.getContentGroup(),c=ct(),h=r.get("selectedMode"),d=r.get("triggerEvent"),f=[];i.eachRawSeries(function(p){!p.get("legendHoverLink")&&f.push(p.id)}),Y8(r.getData(),function(p,m){var g=this,v=p.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var b=new xP;b.newline=!0,u.add(b);return}var S=i.getSeriesByName(v)[0];if(!c.get(v))if(S){var w=S.getData(),E=w.getVisual("legendLineStyle")||{},T=w.getVisual("legendIcon"),M=w.getVisual("style"),P=this._createItem(S,v,m,p,r,t,E,M,T,h,a);P.on("click",h_(bre,v,null,a,f)).on("mouseover",h_(q8,S.name,null,a,f)).on("mouseout",h_(K8,S.name,null,a,f)),i.ssr&&P.eachChild(function(I){var D=Ft(I);D.seriesIndex=S.seriesIndex,D.dataIndex=m,D.ssrType="legend"}),d&&P.eachChild(function(I){g.packEventData(I,r,S,m,v)}),c.set(v,!0)}else i.eachRawSeries(function(I){var D=this;if(!c.get(v)&&I.legendVisualProvider){var R=I.legendVisualProvider;if(!R.containName(v))return;var B=R.indexOfName(v),k=R.getItemVisual(B,"style"),V=R.getItemVisual(B,"legendIcon"),G=jo(k.fill);G&&G[3]===0&&(G[3]=.2,k=Pe(Pe({},k),{fill:Xh(G,"rgba")}));var F=this._createItem(I,v,m,p,r,t,{},k,V,h,a);F.on("click",h_(bre,null,v,a,f)).on("mouseover",h_(q8,null,v,a,f)).on("mouseout",h_(K8,null,v,a,f)),i.ssr&&F.eachChild(function(X){var j=Ft(X);j.seriesIndex=I.seriesIndex,j.dataIndex=m,j.ssrType="legend"}),d&&F.eachChild(function(X){D.packEventData(X,r,I,m,v)}),c.set(v,!0)}},this)},this),s&&this._createSelector(s,r,a,o,l)},e.prototype.packEventData=function(t,r,i,a,s){var o={componentType:"legend",componentIndex:r.componentIndex,dataIndex:a,value:s,seriesIndex:i.seriesIndex};Ft(t).eventData=o},e.prototype._createSelector=function(t,r,i,a,s){var o=this.getSelectorGroup();Y8(t,function(u){var c=u.type,h=new On({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:r.id})}});o.add(h);var d=r.getModel("selectorLabel"),f=r.getModel(["emphasis","selectorLabel"]);Aa(h,{normal:d,emphasis:f},{defaultText:u.title}),Ly(h)})},e.prototype._createItem=function(t,r,i,a,s,o,l,u,c,h,d){var f=t.visualDrawType,p=s.get("itemWidth"),m=s.get("itemHeight"),g=s.isSelected(r),v=a.get("symbolRotate"),b=a.get("symbolKeepAspect"),S=a.get("icon");c=S||c||"roundRect";var w=tXe(c,a,l,u,f,g,d),E=new xP,T=a.getModel("textStyle");if(St(t.getLegendIcon)&&(!S||S==="inherit"))E.add(t.getLegendIcon({itemWidth:p,itemHeight:m,icon:c,iconRotate:v,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:b}));else{var M=S==="inherit"&&t.getData().getVisual("symbol")?v==="inherit"?t.getData().getVisual("symbolRotate"):v:0;E.add(nXe({itemWidth:p,itemHeight:m,icon:c,iconRotate:M,itemStyle:w.itemStyle,symbolKeepAspect:b}))}var P=o==="left"?p+5:-5,I=o,D=s.get("formatter"),R=r;Ke(D)&&D?R=D.replace("{name}",r??""):St(D)&&(R=D(r));var B=g?T.getTextColor():a.get("inactiveColor");E.add(new On({style:Er(T,{text:R,x:P,y:m/2,fill:B,align:I,verticalAlign:"middle"},{inheritColor:B})}));var k=new fn({shape:E.getBoundingRect(),style:{fill:"transparent"}}),V=a.getModel("tooltip");return V.get("show")&&op({el:k,componentModel:s,itemName:r,itemTooltipOption:V.option}),E.add(k),E.eachChild(function(G){G.silent=!0}),k.silent=!h,this.getContentGroup().add(E),Ly(E),E.__legendDataIndex=i,E},e.prototype.layoutInner=function(t,r,i,a,s,o){var l=this.getContentGroup(),u=this.getSelectorGroup();Ny(t.get("orient"),l,t.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),h=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),s){Ny("horizontal",u,t.get("selectorItemGap",!0));var d=u.getBoundingRect(),f=[-d.x,-d.y],p=t.get("selectorButtonGap",!0),m=t.getOrient().index,g=m===0?"width":"height",v=m===0?"height":"width",b=m===0?"y":"x";o==="end"?f[m]+=c[g]+p:h[m]+=d[g]+p,f[1-m]+=c[v]/2-d[v]/2,u.x=f[0],u.y=f[1],l.x=h[0],l.y=h[1];var S={x:0,y:0};return S[g]=c[g]+p+d[g],S[v]=Math.max(c[v],d[v]),S[b]=Math.min(0,d[b]+f[1-m]),S}else return l.x=h[0],l.y=h[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e})(Gr);function tXe(n,e,t,r,i,a,s){function o(g,v){g.lineWidth==="auto"&&(g.lineWidth=v.lineWidth>0?2:0),Y8(g,function(b,S){g[S]==="inherit"&&(g[S]=v[S])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=n.lastIndexOf("empty",0)===0?"fill":"stroke",h=l.getShallow("decal");u.decal=!h||h==="inherit"?r.decal:aS(h,s),u.fill==="inherit"&&(u.fill=r[i]),u.stroke==="inherit"&&(u.stroke=r[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?r:t).opacity),o(u,r);var d=e.getModel("lineStyle"),f=d.getLineStyle();if(o(f,t),u.fill==="auto"&&(u.fill=r.fill),u.stroke==="auto"&&(u.stroke=r.fill),f.stroke==="auto"&&(f.stroke=r.fill),!a){var p=e.get("inactiveBorderWidth"),m=u[c];u.lineWidth=p==="auto"?r.lineWidth>0&&m?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),f.stroke=d.get("inactiveColor"),f.lineWidth=d.get("inactiveWidth")}return{itemStyle:u,lineStyle:f}}function nXe(n){var e=n.icon||"roundRect",t=Ki(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill=ve.color.neutral00,t.style.lineWidth=2),t}function bre(n,e,t,r){K8(n,e,t,r),t.dispatchAction({type:"legendToggleSelect",name:n??e}),q8(n,e,t,r)}function Gge(n){for(var e=n.getZr().storage.getDisplayList(),t,r=0,i=e.length;r<i&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function q8(n,e,t,r){Gge(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:r})}function K8(n,e,t,r){Gge(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:r})}function rXe(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var r=0;r<e.length;r++)if(!e[r].isSelected(t.name))return!1;return!0})}function wT(n,e,t){var r=n==="allSelect"||n==="inverseSelect",i={},a=[];t.eachComponent({mainType:"legend",query:e},function(o){r?o[n]():o[n](e.name),Sre(o,i),a.push(o.componentIndex)});var s={};return t.eachComponent("legend",function(o){W(i,function(l,u){o[l?"select":"unSelect"](u)}),Sre(o,s)}),r?{selected:s,legendIndex:a}:{name:e.name,selected:s}}function Sre(n,e){var t=e||{};return W(n.getData(),function(r){var i=r.get("name");if(!(i===`
`||i==="")){var a=n.isSelected(i);it(t,i)?t[i]=t[i]&&a:t[i]=a}}),t}function iXe(n){n.registerAction("legendToggleSelect","legendselectchanged",Qt(wT,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",Qt(wT,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",Qt(wT,"inverseSelect")),n.registerAction("legendSelect","legendselected",Qt(wT,"select")),n.registerAction("legendUnSelect","legendunselected",Qt(wT,"unSelect"))}function jge(n){n.registerComponentModel($8),n.registerComponentView(Hge),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,rXe),n.registerSubTypeDefaulter("legend",function(){return"plain"}),iXe(n)}var aXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,r,i){var a=sx(t);n.prototype.init.call(this,t,r,i),wre(this,t,a)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),wre(this,this.option,t)},e.type="legend.scroll",e.defaultOption=kg($8.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:ve.color.accent50,pageIconInactiveColor:ve.color.accent10,pageIconSize:15,pageTextStyle:{color:ve.color.tertiary},animationDurationUpdate:800}),e})($8);function wre(n,e,t){var r=n.getOrient(),i=[1,1];i[r.index]=0,id(e,t,{type:"box",ignoreSize:!!i})}var Tre=wt,j5=["width","height"],W5=["x","y"],sXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Tre),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Tre)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,r,i,a,s,o,l){var u=this;n.prototype.renderInner.call(this,t,r,i,a,s,o,l);var c=this._controllerGroup,h=r.get("pageIconSize",!0),d=Be(h)?h:[h,h];p("pagePrev",0);var f=r.getModel("pageTextStyle");c.add(new On({name:"pageText",style:{text:"xx/xx",fill:f.getTextColor(),font:f.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(m,g){var v=m+"DataIndex",b=v2(r.get("pageIcons",!0)[r.getOrient().name][g],{onclick:Qe(u._pageGo,u,v,r,a)},{x:-d[0]/2,y:-d[1]/2,width:d[0],height:d[1]});b.name=m,c.add(b)}},e.prototype.layoutInner=function(t,r,i,a,s,o){var l=this.getSelectorGroup(),u=t.getOrient().index,c=j5[u],h=W5[u],d=j5[1-u],f=W5[1-u];s&&Ny("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),m=l.getBoundingRect(),g=[-m.x,-m.y],v=Tt(i);s&&(v[c]=i[c]-m[c]-p);var b=this._layoutContentAndController(t,a,v,u,c,d,f,h);if(s){if(o==="end")g[u]+=b[c]+p;else{var S=m[c]+p;g[u]-=S,b[h]-=S}b[c]+=m[c]+p,g[1-u]+=b[f]+b[d]/2-m[d]/2,b[d]=Math.max(b[d],m[d]),b[f]=Math.min(b[f],m[f]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return b},e.prototype._layoutContentAndController=function(t,r,i,a,s,o,l,u){var c=this.getContentGroup(),h=this._containerGroup,d=this._controllerGroup;Ny(t.get("orient"),c,t.get("itemGap"),a?i.width:null,a?null:i.height),Ny("horizontal",d,t.get("pageButtonItemGap",!0));var f=c.getBoundingRect(),p=d.getBoundingRect(),m=this._showController=f[s]>i[s],g=[-f.x,-f.y];r||(g[a]=c[u]);var v=[0,0],b=[-p.x,-p.y],S=dt(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(m){var w=t.get("pageButtonPosition",!0);w==="end"?b[a]+=i[s]-p[s]:v[a]+=p[s]+S}b[1-a]+=f[o]/2-p[o]/2,c.setPosition(g),h.setPosition(v),d.setPosition(b);var E={x:0,y:0};if(E[s]=m?i[s]:f[s],E[o]=Math.max(f[o],p[o]),E[l]=Math.min(0,p[l]+b[1-a]),h.__rectSize=i[s],m){var T={x:0,y:0};T[s]=Math.max(i[s]-p[s]-S,0),T[o]=E[o],h.setClipPath(new fn({shape:T})),h.__rectSize=T[s]}else d.eachChild(function(P){P.attr({invisible:!0,silent:!0})});var M=this._getPageInfo(t);return M.pageIndex!=null&&Vn(c,{x:M.contentPosition[0],y:M.contentPosition[1]},m?t:null),this._updatePageInfoView(t,M),E},e.prototype._pageGo=function(t,r,i){var a=this._getPageInfo(r)[t];a!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:r.id})},e.prototype._updatePageInfoView=function(t,r){var i=this._controllerGroup;W(["pagePrev","pageNext"],function(c){var h=c+"DataIndex",d=r[h]!=null,f=i.childOfName(c);f&&(f.setStyle("fill",d?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),f.cursor=d?"pointer":"default")});var a=i.childOfName("pageText"),s=t.get("pageFormatter"),o=r.pageIndex,l=o!=null?o+1:0,u=r.pageCount;a&&s&&a.setStyle("text",Ke(s)?s.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):s({current:l,total:u}))},e.prototype._getPageInfo=function(t){var r=t.get("scrollDataIndex",!0),i=this.getContentGroup(),a=this._containerGroup.__rectSize,s=t.getOrient().index,o=j5[s],l=W5[s],u=this._findTargetItemIndex(r),c=i.children(),h=c[u],d=c.length,f=d?1:0,p={contentPosition:[i.x,i.y],pageCount:f,pageIndex:f-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!h)return p;var m=w(h);p.contentPosition[s]=-m.s;for(var g=u+1,v=m,b=m,S=null;g<=d;++g)S=w(c[g]),(!S&&b.e>v.s+a||S&&!E(S,v.s))&&(b.i>v.i?v=b:v=S,v&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=v.i),++p.pageCount)),b=S;for(var g=u-1,v=m,b=m,S=null;g>=-1;--g)S=w(c[g]),(!S||!E(b,S.s))&&v.i<b.i&&(b=v,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=v.i),++p.pageCount,++p.pageIndex),v=S;return p;function w(T){if(T){var M=T.getBoundingRect(),P=M[l]+T[l];return{s:P,e:P+M[o],i:T.__legendDataIndex}}}function E(T,M){return T.e>=M&&T.s<=M+a}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var r,i=this.getContentGroup(),a;return i.eachChild(function(s,o){var l=s.__legendDataIndex;a==null&&l!=null&&(a=o),l===t&&(r=o)}),r??a},e.type="legend.scroll",e})(Hge);function oXe(n){n.registerAction("legendScroll","legendscroll",function(e,t){var r=e.scrollDataIndex;r!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(r)})})}function lXe(n){sn(jge),n.registerComponentModel(aXe),n.registerComponentView(sXe),oXe(n)}function uXe(n){sn(jge),sn(lXe)}var cXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.inside",e.defaultOption=kg(UA.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e})(UA),eW=mn();function hXe(n,e,t){eW(n).coordSysRecordMap.each(function(r){var i=r.dataZoomInfoMap.get(e.uid);i&&(i.getRange=t)})}function dXe(n,e){for(var t=eW(n).coordSysRecordMap,r=t.keys(),i=0;i<r.length;i++){var a=r[i],s=t.get(a),o=s.dataZoomInfoMap;if(o){var l=e.uid,u=o.get(l);u&&(o.removeKey(l),o.keys().length||Wge(t,s))}}}function Wge(n,e){if(e){n.removeKey(e.model.uid);var t=e.controller;t&&t.dispose()}}function fXe(n,e){var t={model:e,containsPoint:Qt(mXe,e),dispatchAction:Qt(pXe,n),dataZoomInfoMap:null,controller:null},r=t.controller=new hx(n.getZr());return W(["pan","zoom","scrollMove"],function(i){r.on(i,function(a){var s=[];t.dataZoomInfoMap.each(function(o){if(a.isAvailableBehavior(o.model.option)){var l=(o.getRange||{})[i],u=l&&l(o.dzReferCoordSysInfo,t.model.mainType,t.controller,a);!o.model.get("disabled",!0)&&u&&s.push({dataZoomId:o.model.id,start:u[0],end:u[1]})}}),s.length&&t.dispatchAction(s)})}),t}function pXe(n,e){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function mXe(n,e,t,r){return n.coordinateSystem.containPoint([t,r])}function gXe(n,e,t){var r,i="type_",a={type_true:2,type_move:1,type_false:0,type_undefined:-1},s=!0;return n.each(function(o){var l=o.model,u=l.get("disabled",!0)?!1:l.get("zoomLock",!0)?"move":!0;a[i+u]>a[i+r]&&(r=u),s=s&&l.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!s,api:t,zInfo:{component:e.model},triggerInfo:{roamTrigger:null,isInSelf:e.containsPoint}}}}function vXe(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(e,t){var r=eW(t),i=r.coordSysRecordMap||(r.coordSysRecordMap=ct());i.each(function(a){a.dataZoomInfoMap=null}),e.eachComponent({mainType:"dataZoom",subType:"inside"},function(a){var s=Cge(a);W(s.infoList,function(o){var l=o.model.uid,u=i.get(l)||i.set(l,fXe(t,o.model)),c=u.dataZoomInfoMap||(u.dataZoomInfoMap=ct());c.set(a.uid,{dzReferCoordSysInfo:o,model:a,getRange:null})})}),i.each(function(a){var s=a.controller,o,l=a.dataZoomInfoMap;if(l){var u=l.keys()[0];u!=null&&(o=l.get(u))}if(!o){Wge(i,a);return}var c=gXe(l,a,t);s.enable(c.controlType,c.opt),XS(a,"dispatchAction",o.model.get("throttle",!0),"fixRate")})})}var yXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataZoom.inside",t}return e.prototype.render=function(t,r,i){if(n.prototype.render.apply(this,arguments),t.noTarget()){this._clear();return}this.range=t.getPercentRange(),hXe(i,t,{pan:Qe(X5.pan,this),zoom:Qe(X5.zoom,this),scrollMove:Qe(X5.scrollMove,this)})},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){dXe(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e})(X7),X5={zoom:function(n,e,t,r){var i=this.range,a=i.slice(),s=n.axisModels[0];if(s){var o=$5[e](null,[r.originX,r.originY],s,t,n),l=(o.signal>0?o.pixelStart+o.pixelLength-o.pixel:o.pixel-o.pixelStart)/o.pixelLength*(a[1]-a[0])+a[0],u=Math.max(1/r.scale,0);a[0]=(a[0]-l)*u+l,a[1]=(a[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(Tg(0,a,[0,100],0,c.minSpan,c.maxSpan),this.range=a,i[0]!==a[0]||i[1]!==a[1])return a}},pan:Ere(function(n,e,t,r,i,a){var s=$5[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,t);return s.signal*(n[1]-n[0])*s.pixel/s.pixelLength}),scrollMove:Ere(function(n,e,t,r,i,a){var s=$5[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,t);return s.signal*(n[1]-n[0])*a.scrollDelta})};function Ere(n){return function(e,t,r,i){var a=this.range,s=a.slice(),o=e.axisModels[0];if(o){var l=n(s,o,e,t,r,i);if(Tg(l,s,[0,100],"all"),this.range=s,a[0]!==s[0]||a[1]!==s[1])return s}}}var $5={grid:function(n,e,t,r,i){var a=t.axis,s={},o=i.model.coordinateSystem.getRect();return n=n||[0,0],a.dim==="x"?(s.pixel=e[0]-n[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-n[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s},polar:function(n,e,t,r,i){var a=t.axis,s={},o=i.model.coordinateSystem,l=o.getRadiusAxis().getExtent(),u=o.getAngleAxis().getExtent();return n=n?o.pointToCoord(n):[0,0],e=o.pointToCoord(e),t.mainType==="radiusAxis"?(s.pixel=e[0]-n[0],s.pixelLength=l[1]-l[0],s.pixelStart=l[0],s.signal=a.inverse?1:-1):(s.pixel=e[1]-n[1],s.pixelLength=u[1]-u[0],s.pixelStart=u[0],s.signal=a.inverse?-1:1),s},singleAxis:function(n,e,t,r,i){var a=t.axis,s=i.model.coordinateSystem.getRect(),o={};return n=n||[0,0],a.orient==="horizontal"?(o.pixel=e[0]-n[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-n[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o}};function Xge(n){$7(n),n.registerComponentModel(cXe),n.registerComponentView(yXe),vXe(n)}var xXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=kg(UA.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:ve.color.accent10,borderRadius:0,backgroundColor:ve.color.transparent,dataBackground:{lineStyle:{color:ve.color.accent30,width:.5},areaStyle:{color:ve.color.accent20,opacity:.2}},selectedDataBackground:{lineStyle:{color:ve.color.accent40,width:.5},areaStyle:{color:ve.color.accent20,opacity:.3}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:ve.color.neutral00,borderColor:ve.color.accent20},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:ve.color.accent40,opacity:.5},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:ve.color.tertiary},brushSelect:!0,brushStyle:{color:ve.color.accent30,opacity:.3},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:ve.color.accent40},moveHandleStyle:{opacity:.8}},defaultLocationEdgeGap:15}),e})(UA),TT=fn,_Xe=1,Y5=30,bXe=7,ET="horizontal",Are="vertical",SXe=5,wXe=["line","bar","candlestick","scatter"],TXe={easing:"cubicOut",duration:100,delay:0},EXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._displayables={},t}return e.prototype.init=function(t,r){this.api=r,this._onBrush=Qe(this._onBrush,this),this._onBrushEnd=Qe(this._onBrushEnd,this)},e.prototype.render=function(t,r,i,a){if(n.prototype.render.apply(this,arguments),XS(this,"_dispatchZoomAction",t.get("throttle"),"fixRate"),this._orient=t.getOrient(),t.get("show")===!1){this.group.removeAll();return}if(t.noTarget()){this._clear(),this.group.removeAll();return}(!a||a.type!=="dataZoom"||a.from!==this.uid)&&this._buildView(),this._updateView()},e.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){TA(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new wt;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(r),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,r=this.api,i=t.get("brushSelect"),a=i?bXe:0,s=ha(t,r).refContainer,o=this._findCoordRect(),l=t.get("defaultLocationEdgeGap",!0)||0,u=this._orient===ET?{right:s.width-o.x-o.width,top:s.height-Y5-l-a,width:o.width,height:Y5}:{right:l,top:o.y,width:Y5,height:o.height},c=sx(t.option);W(["right","top","width","height"],function(d){c[d]==="ph"&&(c[d]=u[d])});var h=qr(c,s);this._location={x:h.x,y:h.y},this._size=[h.width,h.height],this._orient===Are&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,r=this._location,i=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),s=a&&a.get("inverse"),o=this._displayables.sliderGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(i===ET&&!s?{scaleY:l?1:-1,scaleX:1}:i===ET&&s?{scaleY:l?1:-1,scaleX:-1}:i===Are&&!s?{scaleY:l?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:l?-1:1,scaleX:-1,rotation:Math.PI/2});var u=t.getBoundingRect([o]);t.x=r.x-u.x,t.y=r.y-u.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,r=this._size,i=this._displayables.sliderGroup,a=t.get("brushSelect");i.add(new TT({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var s=new TT({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:Qe(this._onClickPanel,this)}),o=this.api.getZr();a?(s.on("mousedown",this._onBrushStart,this),s.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),i.add(s)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!t)return;var r=this._size,i=this._shadowSize||[],a=t.series,s=a.getRawData(),o=a.getShadowDim&&a.getShadowDim(),l=o&&s.getDimensionInfo(o)?a.getShadowDim():t.otherDim;if(l==null)return;var u=this._shadowPolygonPts,c=this._shadowPolylinePts;if(s!==this._shadowData||l!==this._shadowDim||r[0]!==i[0]||r[1]!==i[1]){var h=s.getDataExtent(t.thisDim),d=s.getDataExtent(l),f=(d[1]-d[0])*.3;d=[d[0]-f,d[1]+f];var p=[0,r[1]],m=[0,r[0]],g=[[r[0],0],[0,0]],v=[],b=m[1]/Math.max(1,s.count()-1),S=r[0]/(h[1]-h[0]),w=t.thisAxis.type==="time",E=-b,T=Math.round(s.count()/r[0]),M;s.each([t.thisDim,l],function(B,k,V){if(T>0&&V%T){w||(E+=b);return}E=w?(+B-h[0])*S:E+b;var G=k==null||isNaN(k)||k==="",F=G?0:Jn(k,d,p,!0);G&&!M&&V?(g.push([g[g.length-1][0],0]),v.push([v[v.length-1][0],0])):!G&&M&&(g.push([E,0]),v.push([E,0])),G||(g.push([E,F]),v.push([E,F])),M=G}),u=this._shadowPolygonPts=g,c=this._shadowPolylinePts=v}this._shadowData=s,this._shadowDim=l,this._shadowSize=[r[0],r[1]];var P=this.dataZoomModel;function I(B){var k=P.getModel(B?"selectedDataBackground":"dataBackground"),V=new wt,G=new Vs({shape:{points:u},segmentIgnoreThreshold:1,style:k.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),F=new gs({shape:{points:c},segmentIgnoreThreshold:1,style:k.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return V.add(G),V.add(F),V}for(var D=0;D<3;D++){var R=I(D===1);this._displayables.sliderGroup.add(R),this._displayables.dataShadowSegs.push(R)}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,r=t.get("showDataShadow");if(r!==!1){var i,a=this.ecModel;return t.eachTargetAxis(function(s,o){var l=t.getAxisProxy(s,o).getTargetSeriesModels();W(l,function(u){if(!i&&!(r!==!0&&Jt(wXe,u.get("type"))<0)){var c=a.getComponent(lg(s),o).axis,h=AXe(s),d,f=u.coordinateSystem;h!=null&&f.getOtherAxis&&(d=f.getOtherAxis(c).inverse),h=u.getData().mapDimension(h);var p=u.getData().mapDimension(s);i={thisAxis:c,series:u,thisDim:p,otherDim:h,otherAxisInverse:d}}},this)},this),i}},e.prototype._renderHandle=function(){var t=this.group,r=this._displayables,i=r.handles=[null,null],a=r.handleLabels=[null,null],s=this._displayables.sliderGroup,o=this._size,l=this.dataZoomModel,u=this.api,c=l.get("borderRadius")||0,h=l.get("brushSelect"),d=r.filler=new TT({silent:h,style:{fill:l.get("fillerColor")},textConfig:{position:"inside"}});s.add(d),s.add(new TT({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:c},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:_Xe,fill:ve.color.transparent}})),W([0,1],function(S){var w=l.get("handleIcon");!lN[w]&&w.indexOf("path://")<0&&w.indexOf("image://")<0&&(w="path://"+w);var E=Ki(w,-1,0,2,2,null,!0);E.attr({cursor:CXe(this._orient),draggable:!0,drift:Qe(this._onDragMove,this,S),ondragend:Qe(this._onDragEnd,this),onmouseover:Qe(this._showDataInfo,this,!0),onmouseout:Qe(this._showDataInfo,this,!1),z2:5});var T=E.getBoundingRect(),M=l.get("handleSize");this._handleHeight=Xe(M,this._size[1]),this._handleWidth=T.width/T.height*this._handleHeight,E.setStyle(l.getModel("handleStyle").getItemStyle()),E.style.strokeNoScale=!0,E.rectHover=!0,E.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),Ly(E);var P=l.get("handleColor");P!=null&&(E.style.fill=P),s.add(i[S]=E);var I=l.getModel("textStyle"),D=l.get("handleLabel")||{},R=D.show||!1;t.add(a[S]=new On({silent:!0,invisible:!R,style:Er(I,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:I.getTextColor(),font:I.getFont()}),z2:10}))},this);var f=d;if(h){var p=Xe(l.get("moveHandleSize"),o[1]),m=r.moveHandle=new fn({style:l.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:p}}),g=p*.8,v=r.moveHandleIcon=Ki(l.get("moveHandleIcon"),-g/2,-g/2,g,g,ve.color.neutral00,!0);v.silent=!0,v.y=o[1]+p/2-.5,m.ensureState("emphasis").style=l.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var b=Math.min(o[1]/2,Math.max(p,10));f=r.moveZone=new fn({invisible:!0,shape:{y:o[1]-b,height:p+b}}),f.on("mouseover",function(){u.enterEmphasis(m)}).on("mouseout",function(){u.leaveEmphasis(m)}),s.add(m),s.add(v),s.add(f)}f.attr({draggable:!0,cursor:"default",drift:Qe(this._onDragMove,this,"all"),ondragstart:Qe(this._showDataInfo,this,!0),ondragend:Qe(this._onDragEnd,this),onmouseover:Qe(this._showDataInfo,this,!0),onmouseout:Qe(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[Jn(t[0],[0,100],r,!0),Jn(t[1],[0,100],r,!0)]},e.prototype._updateInterval=function(t,r){var i=this.dataZoomModel,a=this._handleEnds,s=this._getViewExtent(),o=i.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Tg(r,a,s,i.get("zoomLock")?"all":t,o.minSpan!=null?Jn(o.minSpan,l,s,!0):null,o.maxSpan!=null?Jn(o.maxSpan,l,s,!0):null);var u=this._range,c=this._range=Du([Jn(a[0],s,l,!0),Jn(a[1],s,l,!0)]);return!u||u[0]!==c[0]||u[1]!==c[1]},e.prototype._updateView=function(t){var r=this._displayables,i=this._handleEnds,a=Du(i.slice()),s=this._size;W([0,1],function(f){var p=r.handles[f],m=this._handleHeight;p.attr({scaleX:m/2,scaleY:m/2,x:i[f]+(f?-1:1),y:s[1]/2-m/2})},this),r.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:s[1]});var o={x:a[0],width:a[1]-a[0]};r.moveHandle&&(r.moveHandle.setShape(o),r.moveZone.setShape(o),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",o.x+o.width/2));for(var l=r.dataShadowSegs,u=[0,a[0],a[1],s[0]],c=0;c<l.length;c++){var h=l[c],d=h.getClipPath();d||(d=new fn,h.setClipPath(d)),d.setShape({x:u[c],y:0,width:u[c+1]-u[c],height:s[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var r=this.dataZoomModel,i=this._displayables,a=i.handleLabels,s=this._orient,o=["",""];if(r.get("showDetail")){var l=r.findRepresentativeAxisProxy();if(l){var u=l.getAxisModel().axis,c=this._range,h=t?l.calculateDataWindow({start:c[0],end:c[1]}).valueWindow:l.getDataValueWindow();o=[this._formatLabel(h[0],u),this._formatLabel(h[1],u)]}}var d=Du(this._handleEnds.slice());f.call(this,0),f.call(this,1);function f(p){var m=Ry(i.handles[p].parent,this.group),g=f3(p===0?"right":"left",m),v=this._handleWidth/2+SXe,b=Ac([d[p]+(p===0?-v:v),this._size[1]/2],m);a[p].setStyle({x:b[0],y:b[1],verticalAlign:s===ET?"middle":g,align:s===ET?g:"center",text:o[p]})}},e.prototype._formatLabel=function(t,r){var i=this.dataZoomModel,a=i.get("labelFormatter"),s=i.get("labelPrecision");(s==null||s==="auto")&&(s=r.getPixelPrecision());var o=t==null||isNaN(t)?"":r.type==="category"||r.type==="time"?r.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(s,20));return St(a)?a(t,o):Ke(a)?a.replace("{value}",o):o},e.prototype._showDataInfo=function(t){var r=this.dataZoomModel.get("handleLabel")||{},i=r.show||!1,a=this.dataZoomModel.getModel(["emphasis","handleLabel"]),s=a.get("show")||!1,o=t||this._dragging?s:i,l=this._displayables,u=l.handleLabels;u[0].attr("invisible",!o),u[1].attr("invisible",!o),l.moveHandle&&this.api[o?"enterEmphasis":"leaveEmphasis"](l.moveHandle,1)},e.prototype._onDragMove=function(t,r,i,a){this._dragging=!0,Xf(a.event);var s=this._displayables.sliderGroup.getLocalTransform(),o=Ac([r,i],s,!0),l=this._updateInterval(t,o[0]),u=this.dataZoomModel.get("realtime");this._updateView(!u),l&&u&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var r=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0||i[0]>r[0]||i[1]<0||i[1]>r[1])){var a=this._handleEnds,s=(a[0]+a[1])/2,o=this._updateInterval("all",i[0]-s);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var r=t.offsetX,i=t.offsetY;this._brushStart=new Ct(r,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,!!r){r.attr("ignore",!0);var i=r.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(i.width)<5)){var s=this._getViewExtent(),o=[0,100],l=this._handleEnds=[i.x,i.x+i.width],u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();Tg(0,l,s,0,u.minSpan!=null?Jn(u.minSpan,o,s,!0):null,u.maxSpan!=null?Jn(u.maxSpan,o,s,!0):null),this._range=Du([Jn(l[0],s,o,!0),Jn(l[1],s,o,!0)]),this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Xf(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,r){var i=this._displayables,a=this.dataZoomModel,s=i.brushRect;s||(s=i.brushRect=new TT({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(s)),s.attr("ignore",!1);var o=this._brushStart,l=this._displayables.sliderGroup,u=l.transformCoordToLocal(t,r),c=l.transformCoordToLocal(o.x,o.y),h=this._size;u[0]=Math.max(Math.min(h[0],u[0]),0),s.setShape({x:c[0],y:0,width:u[0]-c[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?TXe:null,start:r[0],end:r[1]})},e.prototype._findCoordRect=function(){var t,r=Cge(this.dataZoomModel).infoList;if(!t&&r.length){var i=r[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var a=this.api.getWidth(),s=this.api.getHeight();t={x:a*.2,y:s*.2,width:a*.6,height:s*.6}}return t},e.type="dataZoom.slider",e})(X7);function AXe(n){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[n]}function CXe(n){return n==="vertical"?"ns-resize":"ew-resize"}function $ge(n){n.registerComponentModel(xXe),n.registerComponentView(EXe),$7(n)}function MXe(n){sn(Xge),sn($ge)}var Yge={get:function(n,e,t){var r=Tt((DXe[n]||{})[e]);return t&&Be(r)?r[r.length-1]:r}},DXe={color:{active:["#006edd","#e0ffff"],inactive:[ve.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Cre=Ta.mapVisual,IXe=Ta.eachVisual,PXe=Be,Mre=W,LXe=Du,RXe=Jn,VN=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return e.prototype.init=function(t,r,i){this.mergeDefaultAndTheme(t,i)},e.prototype.optionUpdated=function(t,r){var i=this.option;!r&&Bge(i,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var r=this.stateList;t=Qe(t,this),this.controllerVisuals=j8(this.option.controller,r,t),this.targetVisuals=j8(this.option.target,r,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesId,r=this.option.seriesIndex;r==null&&t==null&&(r="all");var i=US(this.ecModel,"series",{index:r,id:t},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return Ue(i,function(a){return a.componentIndex})},e.prototype.eachTargetSeries=function(t,r){W(this.getTargetSeriesIndices(),function(i){var a=this.ecModel.getSeriesByIndex(i);a&&t.call(r,a)},this)},e.prototype.isTargetSeries=function(t){var r=!1;return this.eachTargetSeries(function(i){i===t&&(r=!0)}),r},e.prototype.formatValueText=function(t,r,i){var a=this.option,s=a.precision,o=this.dataBound,l=a.formatter,u;i=i||["<",">"],Be(t)&&(t=t.slice(),u=!0);var c=r?t:u?[h(t[0]),h(t[1])]:h(t);if(Ke(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(St(l))return u?l(t[0],t[1]):l(t);if(u)return t[0]===o[0]?i[0]+" "+c[1]:t[1]===o[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function h(d){return d===o[0]?"min":d===o[1]?"max":(+d).toFixed(Math.min(s,20))}},e.prototype.resetExtent=function(){var t=this.option,r=LXe([t.min,t.max]);this._dataExtent=r},e.prototype.getDataDimensionIndex=function(t){var r=this.option.dimension;if(r!=null)return t.getDimensionIndex(r);for(var i=t.dimensions,a=i.length-1;a>=0;a--){var s=i[a],o=t.getDimensionInfo(s);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,r=this.option,i={inRange:r.inRange,outOfRange:r.outOfRange},a=r.target||(r.target={}),s=r.controller||(r.controller={});en(a,i),en(s,i);var o=this.isCategory();l.call(this,a),l.call(this,s),u.call(this,a,"inRange","outOfRange"),c.call(this,s);function l(h){PXe(r.color)&&!h.inRange&&(h.inRange={color:r.color.slice().reverse()}),h.inRange=h.inRange||{color:t.get("gradientColor")}}function u(h,d,f){var p=h[d],m=h[f];p&&!m&&(m=h[f]={},Mre(p,function(g,v){if(Ta.isValidType(v)){var b=Yge.get(v,"inactive",o);b!=null&&(m[v]=b,v==="color"&&!m.hasOwnProperty("opacity")&&!m.hasOwnProperty("colorAlpha")&&(m.opacity=[0,0]))}}))}function c(h){var d=(h.inRange||{}).symbol||(h.outOfRange||{}).symbol,f=(h.inRange||{}).symbolSize||(h.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),m=this.getItemSymbol(),g=m||"roundRect";Mre(this.stateList,function(v){var b=this.itemSize,S=h[v];S||(S=h[v]={color:o?p:[p]}),S.symbol==null&&(S.symbol=d&&Tt(d)||(o?g:[g])),S.symbolSize==null&&(S.symbolSize=f&&Tt(f)||(o?b[0]:[b[0],b[0]])),S.symbol=Cre(S.symbol,function(T){return T==="none"?g:T});var w=S.symbolSize;if(w!=null){var E=-1/0;IXe(w,function(T){T>E&&(E=T)}),S.symbolSize=Cre(w,function(T){return RXe(T,[0,E],[0,b[0]],!0)})}},this)}},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:ve.color.transparent,borderColor:ve.color.borderTint,contentColor:ve.color.theme[0],inactiveColor:ve.color.disabled,borderWidth:0,padding:ve.size.m,textGap:10,precision:0,textStyle:{color:ve.color.secondary}},e})(_n),Dre=[20,140],NXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=Dre[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=Dre[1])},e.prototype._resetRange=function(){var t=this.getExtent(),r=this.option.range;!r||r.auto?(t.auto=1,this.option.range=t):Be(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],t[0]),r[1]=Math.min(r[1],t[1]))},e.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),W(this.stateList,function(t){var r=this.option.controller[t].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),r=Du((this.get("range")||[]).slice());return r[0]>t[1]&&(r[0]=t[1]),r[1]>t[1]&&(r[1]=t[1]),r[0]<t[0]&&(r[0]=t[0]),r[1]<t[0]&&(r[1]=t[0]),r},e.prototype.getValueState=function(t){var r=this.option.range,i=this.getExtent(),a=dt(this.option.unboundedRange,!0);return(a&&r[0]<=i[0]||r[0]<=t)&&(a&&r[1]>=i[1]||t<=r[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[];return this.eachTargetSeries(function(i){var a=[],s=i.getData();s.each(this.getDataDimensionIndex(s),function(o,l){t[0]<=o&&o<=t[1]&&a.push(l)},this),r.push({seriesId:i.id,dataIndex:a})},this),r},e.prototype.getVisualMeta=function(t){var r=Ire(this,"outOfRange",this.getExtent()),i=Ire(this,"inRange",this.option.range.slice()),a=[];function s(f,p){a.push({value:f,color:t(f,p)})}for(var o=0,l=0,u=i.length,c=r.length;l<c&&(!i.length||r[l]<=i[0]);l++)r[l]<i[o]&&s(r[l],"outOfRange");for(var h=1;o<u;o++,h=0)h&&a.length&&s(i[o],"outOfRange"),s(i[o],"inRange");for(var h=1;l<c;l++)(!i.length||i[i.length-1]<r[l])&&(h&&(a.length&&s(a[a.length-1].value,"outOfRange"),h=0),s(r[l],"outOfRange"));var d=a.length;return{stops:a,outerColors:[d?a[0].color:"transparent",d?a[d-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=kg(VN.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:ve.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:ve.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:ve.color.shadow}}),e})(VN);function Ire(n,e,t){if(t[0]===t[1])return t.slice();for(var r=200,i=(t[1]-t[0])/r,a=t[0],s=[],o=0;o<=r&&a<t[1];o++)s.push(a),a+=i;return s.push(t[1]),s}var qge=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return e.prototype.init=function(t,r){this.ecModel=t,this.api=r},e.prototype.render=function(t,r,i,a){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,r,i,a)},e.prototype.renderBackground=function(t){var r=this.visualMapModel,i=y2(r.get("padding")||0),a=t.getBoundingRect();t.add(new fn({z2:-1,silent:!0,shape:{x:a.x-i[3],y:a.y-i[0],width:a.width+i[3]+i[1],height:a.height+i[0]+i[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,r,i){i=i||{};var a=i.forceState,s=this.visualMapModel,o={};if(r==="color"){var l=s.get("contentColor");o.color=l}function u(f){return o[f]}function c(f,p){o[f]=p}var h=s.controllerVisuals[a||s.getValueState(t)],d=Ta.prepareVisualTypes(h);return W(d,function(f){var p=h[f];i.convertOpacityToAlpha&&f==="opacity"&&(f="colorAlpha",p=h.__alphaForOpacity),Ta.dependsOn(f,r)&&p&&p.applyVisual(t,u,c)}),o[r]},e.prototype.positionGroup=function(t){var r=this.visualMapModel,i=this.api,a=ha(r,i).refContainer;v3(t,r.getBoxLayoutParams(),a)},e.prototype.doRender=function(t,r,i,a){},e.type="visualMap",e})(Gr),Pre=[["left","right","width"],["top","bottom","height"]];function Kge(n,e,t){var r=n.option,i=r.align;if(i!=null&&i!=="auto")return i;for(var a={width:e.getWidth(),height:e.getHeight()},s=r.orient==="horizontal"?1:0,o=Pre[s],l=[0,null,10],u={},c=0;c<3;c++)u[Pre[1-s][c]]=l[c],u[o[c]]=c===2?t[0]:r[o[c]];var h=[["x","width",3],["y","height",0]][s],d=qr(u,a,r.padding);return o[(d.margin[h[2]]||0)+d[h[0]]+d[h[1]]*.5<a[h[1]]*.5?0:1]}function FL(n,e){return W(n||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),n}var ah=Jn,kXe=W,Lre=Math.min,q5=Math.max,OXe=12,BXe=6,FXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return e.prototype.init=function(t,r){n.prototype.init.call(this,t,r),this._hoverLinkFromSeriesMouseOver=Qe(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=Qe(this._hideIndicator,this)},e.prototype.doRender=function(t,r,i,a){(!a||a.type!=="selectDataRange"||a.from!==this.uid)&&this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,r=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(r);var i=t.get("text");this._renderEndsText(r,i,0),this._renderEndsText(r,i,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},e.prototype._renderEndsText=function(t,r,i){if(r){var a=r[1-i];a=a!=null?a+"":"";var s=this.visualMapModel,o=s.get("textGap"),l=s.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-o:l[1]+o],u),h=this._applyTransform(i===0?"bottom":"top",u),d=this._orient,f=this.visualMapModel.textStyleModel;this.group.add(new On({style:Er(f,{x:c[0],y:c[1],verticalAlign:f.get("verticalAlign")||(d==="horizontal"?"middle":h),align:f.get("align")||(d==="horizontal"?h:"center"),text:a})}))}},e.prototype._renderBar=function(t){var r=this.visualMapModel,i=this._shapes,a=r.itemSize,s=this._orient,o=this._useHandle,l=Kge(r,this.api,a),u=i.mainGroup=this._createBarGroup(l),c=new wt;u.add(c),c.add(i.outOfRange=Rre()),c.add(i.inRange=Rre(null,o?kre(this._orient):null,Qe(this._dragHandle,this,"all",!1),Qe(this._dragHandle,this,"all",!0))),c.setClipPath(new fn({shape:{x:0,y:0,width:a[0],height:a[1],r:3}}));var h=r.textStyleModel.getTextRect(""),d=q5(h.width,h.height);o&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(r,u,0,a,d,s),this._createHandle(r,u,1,a,d,s)),this._createIndicator(r,u,a,d,s),t.add(u)},e.prototype._createHandle=function(t,r,i,a,s,o){var l=Qe(this._dragHandle,this,i,!1),u=Qe(this._dragHandle,this,i,!0),c=Pc(t.get("handleSize"),a[0]),h=Ki(t.get("handleIcon"),-c/2,-c/2,c,c,null,!0),d=kre(this._orient);h.attr({cursor:d,draggable:!0,drift:l,ondragend:u,onmousemove:function(v){Xf(v.event)}}),h.x=a[0]/2,h.useStyle(t.getModel("handleStyle").getItemStyle()),h.setStyle({strokeNoScale:!0,strokeFirst:!0}),h.style.lineWidth*=2,h.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),s0(h,!0),r.add(h);var f=this.visualMapModel.textStyleModel,p=new On({cursor:d,draggable:!0,drift:l,onmousemove:function(v){Xf(v.event)},ondragend:u,style:Er(f,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var m=[c,0],g=this._shapes;g.handleThumbs[i]=h,g.handleLabelPoints[i]=m,g.handleLabels[i]=p},e.prototype._createIndicator=function(t,r,i,a,s){var o=Pc(t.get("indicatorSize"),i[0]),l=Ki(t.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=t.getModel("indicatorStyle").getItemStyle();if(l instanceof Ka){var c=l.style;l.useStyle(Pe({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);r.add(l);var h=this.visualMapModel.textStyleModel,d=new On({silent:!0,invisible:!0,style:Er(h,{x:0,y:0,text:""})});this.group.add(d);var f=[(s==="horizontal"?a/2:BXe)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=d,p.indicatorLabelPoint=f,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,r,i,a){if(this._useHandle){if(this._dragging=!r,!r){var s=this._applyTransform([i,a],this._shapes.mainGroup,!0);this._updateInterval(t,s[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():Nre(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,r=this._dataInterval=t.getSelected(),i=t.getExtent(),a=[0,t.itemSize[1]];this._handleEnds=[ah(r[0],i,a,!0),ah(r[1],i,a,!0)]},e.prototype._updateInterval=function(t,r){r=r||0;var i=this.visualMapModel,a=this._handleEnds,s=[0,i.itemSize[1]];Tg(r,a,s,t,0);var o=i.getExtent();this._dataInterval=[ah(a[0],s,o,!0),ah(a[1],s,o,!0)]},e.prototype._updateView=function(t){var r=this.visualMapModel,i=r.getExtent(),a=this._shapes,s=[0,r.itemSize[1]],o=t?s:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,o,"inRange"),u=this._createBarVisual(i,i,s,"outOfRange");a.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),a.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(o,l)},e.prototype._createBarVisual=function(t,r,i,a){var s={forceState:a,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,s),l=[this.getControllerVisual(t[0],"symbolSize",s),this.getControllerVisual(t[1],"symbolSize",s)],u=this._createBarPoints(i,l);return{barColor:new VS(0,0,0,1,o),barPoints:u,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(t,r){var i=100,a=[],s=(t[1]-t[0])/i;a.push({color:this.getControllerVisual(t[0],"color",r),offset:0});for(var o=1;o<i;o++){var l=t[0]+s*o;if(l>t[1])break;a.push({color:this.getControllerVisual(l,"color",r),offset:o/i})}return a.push({color:this.getControllerVisual(t[1],"color",r),offset:1}),a},e.prototype._createBarPoints=function(t,r){var i=this.visualMapModel.itemSize;return[[i[0]-r[0],t[0]],[i[0],t[0]],[i[0],t[1]],[i[0]-r[1],t[1]]]},e.prototype._createBarGroup=function(t){var r=this._orient,i=this.visualMapModel.get("inverse");return new wt(r==="horizontal"&&!i?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:r==="horizontal"&&i?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:r==="vertical"&&!i?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},e.prototype._updateHandle=function(t,r){if(this._useHandle){var i=this._shapes,a=this.visualMapModel,s=i.handleThumbs,o=i.handleLabels,l=a.itemSize,u=a.getExtent(),c=this._applyTransform("left",i.mainGroup);kXe([0,1],function(h){var d=s[h];d.setStyle("fill",r.handlesColor[h]),d.y=t[h];var f=ah(t[h],[0,l[1]],u,!0),p=this.getControllerVisual(f,"symbolSize");d.scaleX=d.scaleY=p/l[0],d.x=l[0]-p/2;var m=Ac(i.handleLabelPoints[h],Ry(d,this.group));if(this._orient==="horizontal"){var g=c==="left"||c==="top"?(l[0]-p)/2:(l[0]-p)/-2;m[1]+=g}o[h].setStyle({x:m[0],y:m[1],text:a.formatValueText(this._dataInterval[h]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,r,i,a){var s=this.visualMapModel,o=s.getExtent(),l=s.itemSize,u=[0,l[1]],c=this._shapes,h=c.indicator;if(h){h.attr("invisible",!1);var d={convertOpacityToAlpha:!0},f=this.getControllerVisual(t,"color",d),p=this.getControllerVisual(t,"symbolSize"),m=ah(t,o,u,!0),g=l[0]-p/2,v={x:h.x,y:h.y};h.y=m,h.x=g;var b=Ac(c.indicatorLabelPoint,Ry(h,this.group)),S=c.indicatorLabel;S.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),E=this._orient,T=E==="horizontal";S.setStyle({text:(i||"")+s.formatValueText(r),verticalAlign:T?w:"middle",align:T?"center":w});var M={x:g,y:m,style:{fill:f}},P={style:{x:b[0],y:b[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var I={duration:100,easing:"cubicInOut",additive:!0};h.x=v.x,h.y=v.y,h.animateTo(M,I),S.animateTo(P,I)}else h.attr(M),S.attr(P);this._firstShowIndicator=!1;var D=this._shapes.handleLabels;if(D)for(var R=0;R<D.length;R++)this.api.enterBlur(D[R])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(r){if(t._hovering=!0,!t._dragging){var i=t.visualMapModel.itemSize,a=t._applyTransform([r.offsetX,r.offsetY],t._shapes.mainGroup,!0,!0);a[1]=Lre(q5(0,a[1]),i[1]),t._doHoverLinkToSeries(a[1],0<=a[0]&&a[0]<=i[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,r){var i=this.visualMapModel,a=i.itemSize;if(i.option.hoverLink){var s=[0,a[1]],o=i.getExtent();t=Lre(q5(s[0],t),s[1]);var l=UXe(i,o,s),u=[t-l,t+l],c=ah(t,s,o,!0),h=[ah(u[0],s,o,!0),ah(u[1],s,o,!0)];u[0]<s[0]&&(h[0]=-1/0),u[1]>s[1]&&(h[1]=1/0),r&&(h[0]===-1/0?this._showIndicator(c,h[1],"< ",l):h[1]===1/0?this._showIndicator(c,h[0],"> ",l):this._showIndicator(c,c," ",l));var d=this._hoverLinkDataIndices,f=[];(r||Nre(i))&&(f=this._hoverLinkDataIndices=i.findTargetDataIndices(h));var p=RRe(d,f);this._dispatchHighDown("downplay",FL(p[0],i)),this._dispatchHighDown("highlight",FL(p[1],i))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var r;if(l0(t.target,function(l){var u=Ft(l);if(u.dataIndex!=null)return r=u,!0},!0),!!r){var i=this.ecModel.getSeriesByIndex(r.seriesIndex),a=this.visualMapModel;if(a.isTargetSeries(i)){var s=i.getData(r.dataType),o=s.getStore().get(a.getDataDimensionIndex(s),r.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var i=0;i<r.length;i++)this.api.leaveBlur(r[i])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",FL(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,r,i,a){var s=Ry(r,a?null:this.group);return Be(t)?Ac(t,s,i):f3(t,s,i)},e.prototype._dispatchHighDown=function(t,r){r&&r.length&&this.api.dispatchAction({type:t,batch:r})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e})(qge);function Rre(n,e,t,r){return new Vs({shape:{points:n},draggable:!!t,cursor:e,drift:t,onmousemove:function(i){Xf(i.event)},ondragend:r})}function UXe(n,e,t){var r=OXe/2,i=n.get("hoverLinkDataSize");return i&&(r=ah(i,e,t,!0)/2),r}function Nre(n){var e=n.get("hoverLinkOnHandle");return!!(e??n.get("realtime"))}function kre(n){return n==="vertical"?"ns-resize":"ew-resize"}var zXe={type:"selectDataRange",event:"dataRangeSelected",update:"update"},VXe=function(n,e){e.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})},HXe=[{createOnAllSeries:!0,reset:function(n,e){var t=[];return e.eachComponent("visualMap",function(r){var i=n.pipelineContext;!r.isTargetSeries(n)||i&&i.large||t.push(uWe(r.stateList,r.targetVisuals,Qe(r.getValueState,r),r.getDataDimensionIndex(n.getData())))}),t}},{createOnAllSeries:!0,reset:function(n,e){var t=n.getData(),r=[];e.eachComponent("visualMap",function(i){if(i.isTargetSeries(n)){var a=i.getVisualMeta(Qe(GXe,null,n,i))||{stops:[],outerColors:[]},s=i.getDataDimensionIndex(t);s>=0&&(a.dimension=s,r.push(a))}}),n.getData().setVisual("visualMeta",r)}}];function GXe(n,e,t,r){for(var i=e.targetVisuals[r],a=Ta.prepareVisualTypes(i),s={color:b2(n.getData(),"color")},o=0,l=a.length;o<l;o++){var u=a[o],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(t,h,d)}return s.color;function h(f){return s[f]}function d(f,p){s[f]=p}}var Ore=W;function jXe(n){var e=n&&n.visualMap;Be(e)||(e=e?[e]:[]),Ore(e,function(t){if(t){d_(t,"splitList")&&!d_(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var r=t.pieces;r&&Be(r)&&Ore(r,function(i){Lt(i)&&(d_(i,"start")&&!d_(i,"min")&&(i.min=i.start),d_(i,"end")&&!d_(i,"max")&&(i.max=i.end))})}})}function d_(n,e){return n&&n.hasOwnProperty&&n.hasOwnProperty(e)}var Bre=!1;function Zge(n){Bre||(Bre=!0,n.registerSubTypeDefaulter("visualMap",function(e){return!e.categories&&(!(e.pieces?e.pieces.length>0:e.splitNumber>0)||e.calculable)?"continuous":"piecewise"}),n.registerAction(zXe,VXe),W(HXe,function(e){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,e)}),n.registerPreprocessor(jXe))}function Qge(n){n.registerComponentModel(NXe),n.registerComponentView(FXe),Zge(n)}var WXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t._pieceList=[],t}return e.prototype.optionUpdated=function(t,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],XXe[this._mode].call(this,this._pieceList),this._resetSelected(t,r);var a=this.option.categories;this.resetVisual(function(s,o){i==="categories"?(s.mappingMethod="category",s.categories=Tt(a)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=Ue(this._pieceList,function(l){return l=Tt(l),o!=="inRange"&&(l.visual=null),l}))})},e.prototype.completeVisualOption=function(){var t=this.option,r={},i=Ta.listVisualTypes(),a=this.isCategory();W(t.pieces,function(o){W(i,function(l){o.hasOwnProperty(l)&&(r[l]=1)})}),W(r,function(o,l){var u=!1;W(this.stateList,function(c){u=u||s(t,c,l)||s(t.target,c,l)},this),!u&&W(this.stateList,function(c){(t[c]||(t[c]={}))[l]=Yge.get(l,c==="inRange"?"active":"inactive",a)})},this);function s(o,l,u){return o&&o[l]&&o[l].hasOwnProperty(u)}n.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,r){var i=this.option,a=this._pieceList,s=(r?i:t).selected||{};if(i.selected=s,W(a,function(l,u){var c=this.getSelectedMapKey(l);s.hasOwnProperty(c)||(s[c]=!0)},this),i.selectedMode==="single"){var o=!1;W(a,function(l,u){var c=this.getSelectedMapKey(l);s[c]&&(o?s[c]=!1:o=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=Tt(t)},e.prototype.getValueState=function(t){var r=Ta.findPieceIndex(t,this._pieceList);return r!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var r=[],i=this._pieceList;return this.eachTargetSeries(function(a){var s=[],o=a.getData();o.each(this.getDataDimensionIndex(o),function(l,u){var c=Ta.findPieceIndex(l,i);c===t&&s.push(u)},this),r.push({seriesId:a.id,dataIndex:s})},this),r},e.prototype.getRepresentValue=function(t){var r;if(this.isCategory())r=t.value;else if(t.value!=null)r=t.value;else{var i=t.interval||[];r=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return r},e.prototype.getVisualMeta=function(t){if(this.isCategory())return;var r=[],i=["",""],a=this;function s(c,h){var d=a.getRepresentValue({interval:c});h||(h=a.getValueState(d));var f=t(d,h);c[0]===-1/0?i[0]=f:c[1]===1/0?i[1]=f:r.push({value:c[0],color:f},{value:c[1],color:f})}var o=this._pieceList.slice();if(!o.length)o.push({interval:[-1/0,1/0]});else{var l=o[0].interval[0];l!==-1/0&&o.unshift({interval:[-1/0,l]}),l=o[o.length-1].interval[1],l!==1/0&&o.push({interval:[l,1/0]})}var u=-1/0;return W(o,function(c){var h=c.interval;h&&(h[0]>u&&s([u,h[0]],"outOfRange"),s(h.slice()),u=h[1])},this),{stops:r,outerColors:i}},e.type="visualMap.piecewise",e.defaultOption=kg(VN.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e})(VN),XXe={splitNumber:function(n){var e=this.option,t=Math.min(e.precision,20),r=this.getExtent(),i=e.splitNumber;i=Math.max(parseInt(i,10),1),e.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(t)!==a&&t<5;)t++;e.precision=t,a=+a.toFixed(t),e.minOpen&&n.push({interval:[-1/0,r[0]],close:[0,0]});for(var s=0,o=r[0];s<i;o+=a,s++){var l=s===i-1?r[1]:o+a;n.push({interval:[o,l],close:[1,1]})}e.maxOpen&&n.push({interval:[r[1],1/0],close:[0,0]}),aZ(n),W(n,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(n){var e=this.option;W(e.categories,function(t){n.push({text:this.formatValueText(t,!0),value:t})},this),Fre(e,n)},pieces:function(n){var e=this.option;W(e.pieces,function(t,r){Lt(t)||(t={value:t});var i={text:"",index:r};if(t.label!=null&&(i.text=t.label),t.hasOwnProperty("value")){var a=i.value=t.value;i.interval=[a,a],i.close=[1,1]}else{for(var s=i.interval=[],o=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],h=0;h<2;h++){for(var d=[["gte","gt","min"],["lte","lt","max"]][h],f=0;f<3&&s[h]==null;f++)s[h]=t[d[f]],o[h]=l[f],c[h]=f===2;s[h]==null&&(s[h]=u[h])}c[0]&&s[1]===1/0&&(o[0]=0),c[1]&&s[0]===-1/0&&(o[1]=0),s[0]===s[1]&&o[0]&&o[1]&&(i.value=s[0])}i.visual=Ta.retrieveVisuals(t),n.push(i)},this),Fre(e,n),aZ(n),W(n,function(t){var r=t.close,i=[["<",""][r[1]],[">",""][r[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,i)},this)}};function Fre(n,e){var t=n.inverse;(n.orient==="vertical"?!t:t)&&e.reverse()}var $Xe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.doRender=function(){var t=this.group;t.removeAll();var r=this.visualMapModel,i=r.get("textGap"),a=r.textStyleModel,s=this._getItemAlign(),o=r.itemSize,l=this._getViewData(),u=l.endsText,c=fs(r.get("showLabel",!0),!u),h=!r.get("selectedMode");u&&this._renderEndsText(t,u[0],o,c,s),W(l.viewPieceList,function(d){var f=d.piece,p=new wt;p.onclick=Qe(this._onItemClick,this,f),this._enableHoverLink(p,d.indexInModelPieceList);var m=r.getRepresentValue(f);if(this._createItemSymbol(p,m,[0,0,o[0],o[1]],h),c){var g=this.visualMapModel.getValueState(m),v=a.get("align")||s;p.add(new On({style:Er(a,{x:v==="right"?-i:o[0]+i,y:o[1]/2,text:f.text,verticalAlign:a.get("verticalAlign")||"middle",align:v,opacity:dt(a.get("opacity"),g==="outOfRange"?.5:1)}),silent:h}))}t.add(p)},this),u&&this._renderEndsText(t,u[1],o,c,s),Ny(r.get("orient"),t,r.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,r){var i=this;t.on("mouseover",function(){return a("highlight")}).on("mouseout",function(){return a("downplay")});var a=function(s){var o=i.visualMapModel;o.option.hoverLink&&i.api.dispatchAction({type:s,batch:FL(o.findTargetDataIndices(r),o)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,r=t.option;if(r.orient==="vertical")return Kge(t,this.api,t.itemSize);var i=r.align;return(!i||i==="auto")&&(i="left"),i},e.prototype._renderEndsText=function(t,r,i,a,s){if(r){var o=new wt,l=this.visualMapModel.textStyleModel;o.add(new On({style:Er(l,{x:a?s==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:a?s:"center",text:r})})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,r=Ue(t.getPieceList(),function(o,l){return{piece:o,indexInModelPieceList:l}}),i=t.get("text"),a=t.get("orient"),s=t.get("inverse");return(a==="horizontal"?s:!s)?r.reverse():i&&(i=i.slice().reverse()),{viewPieceList:r,endsText:i}},e.prototype._createItemSymbol=function(t,r,i,a){var s=Ki(this.getControllerVisual(r,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(r,"color"));s.silent=a,t.add(s)},e.prototype._onItemClick=function(t){var r=this.visualMapModel,i=r.option,a=i.selectedMode;if(a){var s=Tt(i.selected),o=r.getSelectedMapKey(t);a==="single"||a===!0?(s[o]=!0,W(s,function(l,u){s[u]=u===o})):s[o]=!s[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},e.type="visualMap.piecewise",e})(qge);function Jge(n){n.registerComponentModel(WXe),n.registerComponentView($Xe),Zge(n)}function YXe(n){sn(Qge),sn(Jge)}var qXe=(function(){function n(e){this._thumbnailModel=e}return n.prototype.reset=function(e){this._renderVersion=e.getMainProcessVersion()},n.prototype.renderContent=function(e){var t=e.api.getViewOfComponentModel(this._thumbnailModel);t&&(e.group.silent=!0,t.renderContent({group:e.group,targetTrans:e.targetTrans,z2Range:whe(e.group),roamType:e.roamType,viewportRect:e.viewportRect,renderVersion:this._renderVersion}))},n.prototype.updateWindow=function(e,t){var r=t.getViewOfComponentModel(this._thumbnailModel);r&&r.updateWindow({targetTrans:e,renderVersion:this._renderVersion})},n})(),KXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.preventAutoZ=!0,t}return e.prototype.optionUpdated=function(t,r){this._updateBridge()},e.prototype._updateBridge=function(){var t=this._birdge=this._birdge||new qXe(this);if(this._target=null,this.ecModel.eachSeries(function(i){ute(i,null)}),this.shouldShow()){var r=this.getTarget();ute(r.baseMapProvider,t)}},e.prototype.shouldShow=function(){return this.getShallow("show",!0)},e.prototype.getBridge=function(){return this._birdge},e.prototype.getTarget=function(){if(this._target)return this._target;var t=this.getReferringComponents("series",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];return t?t.subType!=="graph"&&(t=null):t=this.ecModel.queryComponents({mainType:"series",subType:"graph"})[0],this._target={baseMapProvider:t},this._target},e.type="thumbnail",e.layoutMode="box",e.dependencies=["series","geo"],e.defaultOption={show:!0,right:1,bottom:1,height:"25%",width:"25%",itemStyle:{borderColor:ve.color.border,borderWidth:2},windowStyle:{borderWidth:1,color:ve.color.neutral30,borderColor:ve.color.neutral40,opacity:.3},z:10},e})(_n),ZXe=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,i){if(this._api=i,this._model=t,this._coordSys||(this._coordSys=new dx),!this._isEnabled()){this._clear();return}this._renderVersion=i.getMainProcessVersion();var a=this.group;a.removeAll();var s=t.getModel("itemStyle"),o=s.getItemStyle();o.fill==null&&(o.fill=r.get("backgroundColor")||ve.color.neutral00);var l=ha(t,i).refContainer,u=qr(Xhe(t,!0),l),c=o.lineWidth||0,h=this._contentRect=Gy(u.clone(),c/2,!0,!0),d=new wt;a.add(d),d.setClipPath(new fn({shape:h.plain()}));var f=this._targetGroup=new wt;d.add(f);var p=u.plain();p.r=s.getShallow("borderRadius",!0),a.add(this._bgRect=new fn({style:o,shape:p,silent:!1,cursor:"grab"}));var m=t.getModel("windowStyle"),g=m.getShallow("borderRadius",!0);d.add(this._windowRect=new fn({shape:{x:0,y:0,width:0,height:0,r:g},style:m.getItemStyle(),silent:!1,cursor:"grab"})),this._dealRenderContent(),this._dealUpdateWindow(),zre(t,this)},e.prototype.renderContent=function(t){this._bridgeRendered=t,this._isEnabled()&&(this._dealRenderContent(),this._dealUpdateWindow(),zre(this._model,this))},e.prototype._dealRenderContent=function(){var t=this._bridgeRendered;if(!(!t||t.renderVersion!==this._renderVersion)){var r=this._targetGroup,i=this._coordSys,a=this._contentRect;if(r.removeAll(),!!t){var s=t.group,o=s.getBoundingRect();r.add(s),this._bgRect.z2=t.z2Range.min-10,i.setBoundingRect(o.x,o.y,o.width,o.height);var l=qr({left:"center",top:"center",aspect:o.width/o.height},a);i.setViewRect(l.x,l.y,l.width,l.height),s.attr(i.getTransformInfo().raw),this._windowRect.z2=t.z2Range.max+10,this._resetRoamController(t.roamType)}}},e.prototype.updateWindow=function(t){var r=this._bridgeRendered;r&&r.renderVersion===t.renderVersion&&(r.targetTrans=t.targetTrans),this._isEnabled()&&this._dealUpdateWindow()},e.prototype._dealUpdateWindow=function(){var t=this._bridgeRendered;if(!(!t||t.renderVersion!==this._renderVersion)){var r=Ic([],t.targetTrans),i=Wh([],this._coordSys.transform,r);this._transThisToTarget=Ic([],i);var a=t.viewportRect;a?a=a.clone():a=new Rt(0,0,this._api.getWidth(),this._api.getHeight()),a.applyTransform(i);var s=this._windowRect,o=s.shape.r;s.setShape(Pt({r:o},a))}},e.prototype._resetRoamController=function(t){var r=this,i=this._api,a=this._roamController;if(a||(a=this._roamController=new hx(i.getZr())),!t||!this._isEnabled()){a.disable();return}a.enable(t,{api:i,zInfo:{component:this._model},triggerInfo:{roamTrigger:null,isInSelf:function(s,o,l){return r._contentRect.contain(o,l)}}}),a.off("pan").off("zoom").on("pan",Qe(this._onPan,this)).on("zoom",Qe(this._onZoom,this))},e.prototype._onPan=function(t){var r=this._transThisToTarget;if(!(!this._isEnabled()||!r)){var i=Oi([],[t.oldX,t.oldY],r),a=Oi([],[t.oldX-t.dx,t.oldY-t.dy],r);this._api.dispatchAction(Ure(this._model.getTarget().baseMapProvider,{dx:a[0]-i[0],dy:a[1]-i[1]}))}},e.prototype._onZoom=function(t){var r=this._transThisToTarget;if(!(!this._isEnabled()||!r)){var i=Oi([],[t.originX,t.originY],r);this._api.dispatchAction(Ure(this._model.getTarget().baseMapProvider,{zoom:1/t.scale,originX:i[0],originY:i[1]}))}},e.prototype._isEnabled=function(){var t=this._model;if(!t||!t.shouldShow())return!1;var r=t.getTarget().baseMapProvider;return!!r},e.prototype._clear=function(){this.group.removeAll(),this._bridgeRendered=null,this._roamController&&this._roamController.disable()},e.prototype.remove=function(){this._clear()},e.prototype.dispose=function(){this._clear()},e.type="thumbnail",e})(Gr);function Ure(n,e){var t=n.mainType==="series"?n.subType+"Roam":n.mainType+"Roam",r={type:t};return r[n.mainType+"Id"]=n.id,Pe(r,e),r}function zre(n,e){var t=jy(n);p3(e.group,t.z,t.zlevel)}function QXe(n){n.registerComponentModel(KXe),n.registerComponentView(ZXe)}var JXe={label:{enabled:!0},decal:{show:!1}},Vre=mn(),e$e={};function t$e(n,e){var t=n.getModel("aria");if(!t.get("enabled"))return;var r=Tt(JXe);en(r.label,n.getLocaleModel().get("aria"),!1),en(t.option,r,!1),i(),a();function i(){var u=t.getModel("decal"),c=u.get("show");if(c){var h=ct();n.eachSeries(function(d){if(!d.isColorBySeries()){var f=h.get(d.type);f||(f={},h.set(d.type,f)),Vre(d).scope=f}}),n.eachRawSeries(function(d){if(n.isSeriesFiltered(d))return;if(St(d.enableAriaDecal)){d.enableAriaDecal();return}var f=d.getData();if(d.isColorBySeries()){var b=Bz(d.ecModel,d.name,e$e,n.getSeriesCount()),S=f.getVisual("decal");f.setVisual("decal",w(S,b))}else{var p=d.getRawData(),m={},g=Vre(d).scope;f.each(function(E){var T=f.getRawIndex(E);m[T]=E});var v=p.count();p.each(function(E){var T=m[E],M=p.getName(E)||E+"",P=Bz(d.ecModel,M,g,v),I=f.getItemVisual(T,"decal");f.setItemVisual(T,"decal",w(I,P))})}function w(E,T){var M=E?Pe(Pe({},T),E):T;return M.dirty=!0,M}})}}function a(){var u=e.getZr().dom;if(u){var c=n.getLocaleModel().get("aria"),h=t.getModel("label");if(h.option=Pt(h.option,c),!!h.get("enabled")){if(u.setAttribute("role","img"),h.get("description")){u.setAttribute("aria-label",h.get("description"));return}var d=n.getSeriesCount(),f=h.get(["data","maxCount"])||10,p=h.get(["series","maxCount"])||10,m=Math.min(d,p),g;if(!(d<1)){var v=o();if(v){var b=h.get(["general","withTitle"]);g=s(b,{title:v})}else g=h.get(["general","withoutTitle"]);var S=[],w=d>1?h.get(["series","multiple","prefix"]):h.get(["series","single","prefix"]);g+=s(w,{seriesCount:d}),n.eachSeries(function(P,I){if(I<m){var D=void 0,R=P.get("name"),B=R?"withName":"withoutName";D=d>1?h.get(["series","multiple",B]):h.get(["series","single",B]),D=s(D,{seriesId:P.seriesIndex,seriesName:P.get("name"),seriesType:l(P.subType)});var k=P.getData();if(k.count()>f){var V=h.get(["data","partialData"]);D+=s(V,{displayCnt:f})}else D+=h.get(["data","allData"]);for(var G=h.get(["data","separator","middle"]),F=h.get(["data","separator","end"]),X=h.get(["data","excludeDimensionId"]),j=[],Q=0;Q<k.count();Q++)if(Q<f){var H=k.getName(Q),K=X?er(k.getValues(Q),function(Y,de){return Jt(X,de)===-1}):k.getValues(Q),te=h.get(["data",H?"withName":"withoutName"]);j.push(s(te,{name:H,value:K.join(G)}))}D+=j.join(G)+F,S.push(D)}});var E=h.getModel(["series","multiple","separator"]),T=E.get("middle"),M=E.get("end");g+=S.join(T)+M,u.setAttribute("aria-label",g)}}}}function s(u,c){if(!Ke(u))return u;var h=u;return W(c,function(d,f){h=h.replace(new RegExp("\\{\\s*"+f+"\\s*\\}","g"),d)}),h}function o(){var u=n.get("title");return u&&u.length&&(u=u[0]),u&&u.text}function l(u){var c=n.getLocaleModel().get(["series","typeNames"]);return c[u]||c.chart}}function n$e(n){if(!(!n||!n.aria)){var e=n.aria;e.show!=null&&(e.enabled=e.show),e.label=e.label||{},W(["description","general","series","data"],function(t){e[t]!=null&&(e.label[t]=e[t])})}}function r$e(n){n.registerPreprocessor(n$e),n.registerVisual(n.PRIORITY.VISUAL.ARIA,t$e)}var Hre={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},i$e=(function(){function n(e){var t=this._condVal=Ke(e)?new RegExp(e):WPe(e)?e:null;if(t==null){var r="";Qn(r)}}return n.prototype.evaluate=function(e){var t=typeof e;return Ke(t)?this._condVal.test(e):Ln(t)?this._condVal.test(e+""):!1},n})(),a$e=(function(){function n(){}return n.prototype.evaluate=function(){return this.value},n})(),s$e=(function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(!e[t].evaluate())return!1;return!0},n})(),o$e=(function(){function n(){}return n.prototype.evaluate=function(){for(var e=this.children,t=0;t<e.length;t++)if(e[t].evaluate())return!0;return!1},n})(),l$e=(function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n})(),u$e=(function(){function n(){}return n.prototype.evaluate=function(){for(var e=!!this.valueParser,t=this.getValue,r=t(this.valueGetterParam),i=e?this.valueParser(r):null,a=0;a<this.subCondList.length;a++)if(!this.subCondList[a].evaluate(e?i:r))return!1;return!0},n})();function tW(n,e){if(n===!0||n===!1){var t=new a$e;return t.value=n,t}var r="";return eve(n)||Qn(r),n.and?Gre("and",n,e):n.or?Gre("or",n,e):n.not?c$e(n,e):h$e(n,e)}function Gre(n,e,t){var r=e[n],i="";Be(r)||Qn(i),r.length||Qn(i);var a=n==="and"?new s$e:new o$e;return a.children=Ue(r,function(s){return tW(s,t)}),a.children.length||Qn(i),a}function c$e(n,e){var t=n.not,r="";eve(t)||Qn(r);var i=new l$e;return i.child=tW(t,e),i.child||Qn(r),i}function h$e(n,e){for(var t="",r=e.prepareGetValue(n),i=[],a=An(n),s=n.parser,o=s?pde(s):null,l=0;l<a.length;l++){var u=a[l];if(!(u==="parser"||e.valueGetterAttrMap.get(u))){var c=it(Hre,u)?Hre[u]:u,h=n[u],d=o?o(h):h,f=Y3e(c,d)||c==="reg"&&new i$e(d);f||Qn(t),i.push(f)}}i.length||Qn(t);var p=new u$e;return p.valueGetterParam=r,p.valueParser=o,p.getValue=e.getValue,p.subCondList=i,p}function eve(n){return Lt(n)&&!Fs(n)}var d$e=(function(){function n(e,t){this._cond=tW(e,t)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n})();function f$e(n,e){return new d$e(n,e)}var p$e={type:"echarts:filter",transform:function(n){for(var e=n.upstream,t,r=f$e(n.config,{valueGetterAttrMap:ct({dimension:!0}),prepareGetValue:function(o){var l="",u=o.dimension;it(o,"dimension")||Qn(l);var c=e.getDimensionInfo(u);return c||Qn(l),{dimIdx:c.index}},getValue:function(o){return e.retrieveValueFromItem(t,o.dimIdx)}}),i=[],a=0,s=e.count();a<s;a++)t=e.getRawDataItem(a),r.evaluate()&&i.push(t);return{data:i}}},m$e={type:"echarts:sort",transform:function(n){var e=n.upstream,t=n.config,r="",i=br(t);i.length||Qn(r);var a=[];W(i,function(c){var h=c.dimension,d=c.order,f=c.parser,p=c.incomparable;if(h==null&&Qn(r),d!=="asc"&&d!=="desc"&&Qn(r),p&&p!=="min"&&p!=="max"){var m="";Qn(m)}if(d!=="asc"&&d!=="desc"){var g="";Qn(g)}var v=e.getDimensionInfo(h);v||Qn(r);var b=f?pde(f):null;f&&!b&&Qn(r),a.push({dimIdx:v.index,parser:b,comparator:new gde(d,p)})});var s=e.sourceFormat;s!==qa&&s!==Fl&&Qn(r);for(var o=[],l=0,u=e.count();l<u;l++)o.push(e.getRawDataItem(l));return o.sort(function(c,h){for(var d=0;d<a.length;d++){var f=a[d],p=e.retrieveValueFromItem(c,f.dimIdx),m=e.retrieveValueFromItem(h,f.dimIdx);f.parser&&(p=f.parser(p),m=f.parser(m));var g=f.comparator.evaluate(p,m);if(g!==0)return g}return 0}),{data:o}}};function g$e(n){n.registerTransform(p$e),n.registerTransform(m$e)}var v$e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.prototype.init=function(t,r,i){n.prototype.init.call(this,t,r,i),this._sourceManager=new _de(this),_Q(this)},e.prototype.mergeOption=function(t,r){n.prototype.mergeOption.call(this,t,r),_Q(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Cc},e})(_n),y$e=(function(n){be(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="dataset",t}return e.type="dataset",e})(Gr);function x$e(n){n.registerComponentModel(v$e),n.registerComponentView(y$e)}var eh=rd.CMD;function sb(n,e){return Math.abs(n-e)<1e-5}function Z8(n){var e=n.data,t=n.len(),r=[],i,a=0,s=0,o=0,l=0;function u(k,V){i&&i.length>2&&r.push(i),i=[k,V]}function c(k,V,G,F){sb(k,G)&&sb(V,F)||i.push(k,V,G,F,G,F)}function h(k,V,G,F,X,j){var Q=Math.abs(V-k),H=Math.tan(Q/4)*4/3,K=V<k?-1:1,te=Math.cos(k),Y=Math.sin(k),de=Math.cos(V),ge=Math.sin(V),se=te*X+G,he=Y*j+F,fe=de*X+G,Ee=ge*j+F,Ce=X*H*K,Re=j*H*K;i.push(se-Ce*Y,he+Re*te,fe+Ce*ge,Ee-Re*de,fe,Ee)}for(var d,f,p,m,g=0;g<t;){var v=e[g++],b=g===1;switch(b&&(a=e[g],s=e[g+1],o=a,l=s,(v===eh.L||v===eh.C||v===eh.Q)&&(i=[o,l])),v){case eh.M:a=o=e[g++],s=l=e[g++],u(o,l);break;case eh.L:d=e[g++],f=e[g++],c(a,s,d,f),a=d,s=f;break;case eh.C:i.push(e[g++],e[g++],e[g++],e[g++],a=e[g++],s=e[g++]);break;case eh.Q:d=e[g++],f=e[g++],p=e[g++],m=e[g++],i.push(a+2/3*(d-a),s+2/3*(f-s),p+2/3*(d-p),m+2/3*(f-m),p,m),a=p,s=m;break;case eh.A:var S=e[g++],w=e[g++],E=e[g++],T=e[g++],M=e[g++],P=e[g++]+M;g+=1;var I=!e[g++];d=Math.cos(M)*E+S,f=Math.sin(M)*T+w,b?(o=d,l=f,u(o,l)):c(a,s,d,f),a=Math.cos(P)*E+S,s=Math.sin(P)*T+w;for(var D=(I?-1:1)*Math.PI/2,R=M;I?R>P:R<P;R+=D){var B=I?Math.max(R+D,P):Math.min(R+D,P);h(R,B,S,w,E,T)}break;case eh.R:o=a=e[g++],l=s=e[g++],d=o+e[g++],f=l+e[g++],u(d,l),c(d,l,d,f),c(d,f,o,f),c(o,f,o,l),c(o,l,d,l);break;case eh.Z:i&&c(a,s,o,l),a=o,s=l;break}}return i&&i.length>2&&r.push(i),r}function Q8(n,e,t,r,i,a,s,o,l,u){if(sb(n,t)&&sb(e,r)&&sb(i,s)&&sb(a,o)){l.push(s,o);return}var c=2/u,h=c*c,d=s-n,f=o-e,p=Math.sqrt(d*d+f*f);d/=p,f/=p;var m=t-n,g=r-e,v=i-s,b=a-o,S=m*m+g*g,w=v*v+b*b;if(S<h&&w<h){l.push(s,o);return}var E=d*m+f*g,T=-d*v-f*b,M=S-E*E,P=w-T*T;if(M<h&&E>=0&&P<h&&T>=0){l.push(s,o);return}var I=[],D=[];_g(n,t,i,s,.5,I),_g(e,r,a,o,.5,D),Q8(I[0],D[0],I[1],D[1],I[2],D[2],I[3],D[3],l,u),Q8(I[4],D[4],I[5],D[5],I[6],D[6],I[7],D[7],l,u)}function _$e(n,e){var t=Z8(n),r=[];e=e||1;for(var i=0;i<t.length;i++){var a=t[i],s=[],o=a[0],l=a[1];s.push(o,l);for(var u=2;u<a.length;){var c=a[u++],h=a[u++],d=a[u++],f=a[u++],p=a[u++],m=a[u++];Q8(o,l,c,h,d,f,p,m,s,e),o=p,l=m}r.push(s)}return r}function tve(n,e,t){var r=n[e],i=n[1-e],a=Math.abs(r/i),s=Math.ceil(Math.sqrt(a*t)),o=Math.floor(t/s);o===0&&(o=1,s=t);for(var l=[],u=0;u<s;u++)l.push(o);var c=s*o,h=t-c;if(h>0)for(var u=0;u<h;u++)l[u%s]+=1;return l}function jre(n,e,t){for(var r=n.r0,i=n.r,a=n.startAngle,s=n.endAngle,o=Math.abs(s-a),l=o*i,u=i-r,c=l>Math.abs(u),h=tve([l,u],c?0:1,e),d=(c?o:u)/h.length,f=0;f<h.length;f++)for(var p=(c?u:o)/h[f],m=0;m<h[f];m++){var g={};c?(g.startAngle=a+d*f,g.endAngle=a+d*(f+1),g.r0=r+p*m,g.r=r+p*(m+1)):(g.startAngle=a+p*m,g.endAngle=a+p*(m+1),g.r0=r+d*f,g.r=r+d*(f+1)),g.clockwise=n.clockwise,g.cx=n.cx,g.cy=n.cy,t.push(g)}}function b$e(n,e,t){for(var r=n.width,i=n.height,a=r>i,s=tve([r,i],a?0:1,e),o=a?"width":"height",l=a?"height":"width",u=a?"x":"y",c=a?"y":"x",h=n[o]/s.length,d=0;d<s.length;d++)for(var f=n[l]/s[d],p=0;p<s[d];p++){var m={};m[u]=d*h,m[c]=p*f,m[o]=h,m[l]=f,m.x+=n.x,m.y+=n.y,t.push(m)}}function Wre(n,e,t,r){return n*r-t*e}function S$e(n,e,t,r,i,a,s,o){var l=t-n,u=r-e,c=s-i,h=o-a,d=Wre(c,h,l,u);if(Math.abs(d)<1e-6)return null;var f=n-i,p=e-a,m=Wre(f,p,c,h)/d;return m<0||m>1?null:new Ct(m*l+n,m*u+e)}function w$e(n,e,t){var r=new Ct;Ct.sub(r,t,e),r.normalize();var i=new Ct;Ct.sub(i,n,e);var a=i.dot(r);return a}function f_(n,e){var t=n[n.length-1];t&&t[0]===e[0]&&t[1]===e[1]||n.push(e)}function T$e(n,e,t){for(var r=n.length,i=[],a=0;a<r;a++){var s=n[a],o=n[(a+1)%r],l=S$e(s[0],s[1],o[0],o[1],e.x,e.y,t.x,t.y);l&&i.push({projPt:w$e(l,e,t),pt:l,idx:a})}if(i.length<2)return[{points:n},{points:n}];i.sort(function(g,v){return g.projPt-v.projPt});var u=i[0],c=i[i.length-1];if(c.idx<u.idx){var h=u;u=c,c=h}for(var d=[u.pt.x,u.pt.y],f=[c.pt.x,c.pt.y],p=[d],m=[f],a=u.idx+1;a<=c.idx;a++)f_(p,n[a].slice());f_(p,f),f_(p,d);for(var a=c.idx+1;a<=u.idx+r;a++)f_(m,n[a%r].slice());return f_(m,d),f_(m,f),[{points:p},{points:m}]}function Xre(n){var e=n.points,t=[],r=[];a3(e,t,r);var i=new Rt(t[0],t[1],r[0]-t[0],r[1]-t[1]),a=i.width,s=i.height,o=i.x,l=i.y,u=new Ct,c=new Ct;return a>s?(u.x=c.x=o+a/2,u.y=l,c.y=l+s):(u.y=c.y=l+s/2,u.x=o,c.x=o+a),T$e(e,u,c)}function HN(n,e,t,r){if(t===1)r.push(e);else{var i=Math.floor(t/2),a=n(e);HN(n,a[0],i,r),HN(n,a[1],t-i,r)}return r}function E$e(n,e){for(var t=[],r=0;r<e;r++)t.push(uj(n));return t}function A$e(n,e){e.setStyle(n.style),e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel}function C$e(n){for(var e=[],t=0;t<n.length;)e.push([n[t++],n[t++]]);return e}function M$e(n,e){var t=[],r=n.shape,i;switch(n.type){case"rect":b$e(r,e,t),i=fn;break;case"sector":jre(r,e,t),i=zs;break;case"circle":jre({r0:0,r:r.r,startAngle:0,endAngle:Math.PI*2,cx:r.cx,cy:r.cy},e,t),i=zs;break;default:var a=n.getComputedTransform(),s=a?Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3])):1,o=Ue(_$e(n.getUpdatedPathProxy(),s),function(v){return C$e(v)}),l=o.length;if(l===0)HN(Xre,{points:o[0]},e,t);else if(l===e)for(var u=0;u<l;u++)t.push({points:o[u]});else{var c=0,h=Ue(o,function(v){var b=[],S=[];a3(v,b,S);var w=(S[1]-b[1])*(S[0]-b[0]);return c+=w,{poly:v,area:w}});h.sort(function(v,b){return b.area-v.area});for(var d=e,u=0;u<l;u++){var f=h[u];if(d<=0)break;var p=u===l-1?d:Math.ceil(f.area/c*e);p<0||(HN(Xre,{points:f.poly},p,t),d-=p)}}i=Vs;break}if(!i)return E$e(n,e);for(var m=[],u=0;u<t.length;u++){var g=new i;g.setShape(t[u]),A$e(n,g),m.push(g)}return m}function D$e(n,e){var t=n.length,r=e.length;if(t===r)return[n,e];for(var i=[],a=[],s=t<r?n:e,o=Math.min(t,r),l=Math.abs(r-t)/6,u=(o-2)/6,c=Math.ceil(l/u)+1,h=[s[0],s[1]],d=l,f=2;f<o;){var p=s[f-2],m=s[f-1],g=s[f++],v=s[f++],b=s[f++],S=s[f++],w=s[f++],E=s[f++];if(d<=0){h.push(g,v,b,S,w,E);continue}for(var T=Math.min(d,c-1)+1,M=1;M<=T;M++){var P=M/T;_g(p,g,b,w,P,i),_g(m,v,S,E,P,a),p=i[3],m=a[3],h.push(i[1],a[1],i[2],a[2],p,m),g=i[5],v=a[5],b=i[6],S=a[6]}d-=T-1}return s===n?[h,e]:[n,h]}function $re(n,e){for(var t=n.length,r=n[t-2],i=n[t-1],a=[],s=0;s<e.length;)a[s++]=r,a[s++]=i;return a}function I$e(n,e){for(var t,r,i,a=[],s=[],o=0;o<Math.max(n.length,e.length);o++){var l=n[o],u=e[o],c=void 0,h=void 0;l?u?(t=D$e(l,u),c=t[0],h=t[1],r=c,i=h):(h=$re(i||l,l),c=l):(c=$re(r||u,u),h=u),a.push(c),s.push(h)}return[a,s]}function Yre(n){for(var e=0,t=0,r=0,i=n.length,a=0,s=i-2;a<i;s=a,a+=2){var o=n[s],l=n[s+1],u=n[a],c=n[a+1],h=o*c-u*l;e+=h,t+=(o+u)*h,r+=(l+c)*h}return e===0?[n[0]||0,n[1]||0]:[t/e/3,r/e/3,e]}function P$e(n,e,t,r){for(var i=(n.length-2)/6,a=1/0,s=0,o=n.length,l=o-2,u=0;u<i;u++){for(var c=u*6,h=0,d=0;d<o;d+=2){var f=d===0?c:(c+d-2)%l+2,p=n[f]-t[0],m=n[f+1]-t[1],g=e[d]-r[0],v=e[d+1]-r[1],b=g-p,S=v-m;h+=b*b+S*S}h<a&&(a=h,s=u)}return s}function L$e(n){for(var e=[],t=n.length,r=0;r<t;r+=2)e[r]=n[t-r-2],e[r+1]=n[t-r-1];return e}function R$e(n,e,t,r){for(var i=[],a,s=0;s<n.length;s++){var o=n[s],l=e[s],u=Yre(o),c=Yre(l);a==null&&(a=u[2]<0!=c[2]<0);var h=[],d=[],f=0,p=1/0,m=[],g=o.length;a&&(o=L$e(o));for(var v=P$e(o,l,u,c)*6,b=g-2,S=0;S<b;S+=2){var w=(v+S)%b+2;h[S+2]=o[w]-u[0],h[S+3]=o[w+1]-u[1]}h[0]=o[v]-u[0],h[1]=o[v+1]-u[1];for(var E=r/t,T=-r/2;T<=r/2;T+=E){for(var M=Math.sin(T),P=Math.cos(T),I=0,S=0;S<o.length;S+=2){var D=h[S],R=h[S+1],B=l[S]-c[0],k=l[S+1]-c[1],V=B*P-k*M,G=B*M+k*P;m[S]=V,m[S+1]=G;var F=V-D,X=G-R;I+=F*F+X*X}if(I<p){p=I,f=T;for(var j=0;j<m.length;j++)d[j]=m[j]}}i.push({from:h,to:d,fromCp:u,toCp:c,rotation:-f})}return i}function GN(n){return n.__isCombineMorphing}var nve="__mOriginal_";function jN(n,e,t){var r=nve+e,i=n[r]||n[e];n[r]||(n[r]=n[e]);var a=t.replace,s=t.after,o=t.before;n[e]=function(){var l=arguments,u;return o&&o.apply(this,l),a?u=a.apply(this,l):u=i.apply(this,l),s&&s.apply(this,l),u}}function $E(n,e){var t=nve+e;n[t]&&(n[e]=n[t],n[t]=null)}function qre(n,e){for(var t=0;t<n.length;t++)for(var r=n[t],i=0;i<r.length;){var a=r[i],s=r[i+1];r[i++]=e[0]*a+e[2]*s+e[4],r[i++]=e[1]*a+e[3]*s+e[5]}}function rve(n,e){var t=n.getUpdatedPathProxy(),r=e.getUpdatedPathProxy(),i=I$e(Z8(t),Z8(r)),a=i[0],s=i[1],o=n.getComputedTransform(),l=e.getComputedTransform();function u(){this.transform=null}o&&qre(a,o),l&&qre(s,l),jN(e,"updateTransform",{replace:u}),e.transform=null;var c=R$e(a,s,10,Math.PI),h=[];jN(e,"buildPath",{replace:function(d){for(var f=e.__morphT,p=1-f,m=[],g=0;g<c.length;g++){var v=c[g],b=v.from,S=v.to,w=v.rotation*f,E=v.fromCp,T=v.toCp,M=Math.sin(w),P=Math.cos(w);xL(m,E,T,f);for(var I=0;I<b.length;I+=2){var D=b[I],R=b[I+1],B=S[I],k=S[I+1],V=D*p+B*f,G=R*p+k*f;h[I]=V*P-G*M+m[0],h[I+1]=V*M+G*P+m[1]}var F=h[0],X=h[1];d.moveTo(F,X);for(var I=2;I<b.length;){var B=h[I++],k=h[I++],j=h[I++],Q=h[I++],H=h[I++],K=h[I++];F===B&&X===k&&j===H&&Q===K?d.lineTo(H,K):d.bezierCurveTo(B,k,j,Q,H,K),F=H,X=K}}}})}function nW(n,e,t){if(!n||!e)return e;var r=t.done,i=t.during;rve(n,e),e.__morphT=0;function a(){$E(e,"buildPath"),$E(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return e.animateTo({__morphT:1},Pt({during:function(s){e.dirtyShape(),i&&i(s)},done:function(){a(),r&&r()}},t)),e}function N$e(n,e,t,r,i,a){var s=16;n=i===t?0:Math.round(32767*(n-t)/(i-t)),e=a===r?0:Math.round(32767*(e-r)/(a-r));for(var o=0,l,u=(1<<s)/2;u>0;u/=2){var c=0,h=0;(n&u)>0&&(c=1),(e&u)>0&&(h=1),o+=u*u*(3*c^h),h===0&&(c===1&&(n=u-1-n,e=u-1-e),l=n,n=e,e=l)}return o}function WN(n){var e=1/0,t=1/0,r=-1/0,i=-1/0,a=Ue(n,function(o){var l=o.getBoundingRect(),u=o.getComputedTransform(),c=l.x+l.width/2+(u?u[4]:0),h=l.y+l.height/2+(u?u[5]:0);return e=Math.min(c,e),t=Math.min(h,t),r=Math.max(c,r),i=Math.max(h,i),[c,h]}),s=Ue(a,function(o,l){return{cp:o,z:N$e(o[0],o[1],e,t,r,i),path:n[l]}});return s.sort(function(o,l){return o.z-l.z}).map(function(o){return o.path})}function ive(n){return M$e(n.path,n.count)}function J8(){return{fromIndividuals:[],toIndividuals:[],count:0}}function k$e(n,e,t){var r=[];function i(E){for(var T=0;T<E.length;T++){var M=E[T];GN(M)?i(M.childrenRef()):M instanceof vn&&r.push(M)}}i(n);var a=r.length;if(!a)return J8();var s=t.dividePath||ive,o=s({path:e,count:a});if(o.length!==a)return console.error("Invalid morphing: unmatched splitted path"),J8();r=WN(r),o=WN(o);for(var l=t.done,u=t.during,c=t.individualDelay,h=new If,d=0;d<a;d++){var f=r[d],p=o[d];p.parent=e,p.copyTransform(h),c||rve(f,p)}e.__isCombineMorphing=!0,e.childrenRef=function(){return o};function m(E){for(var T=0;T<o.length;T++)o[T].addSelfToZr(E)}jN(e,"addSelfToZr",{after:function(E){m(E)}}),jN(e,"removeSelfFromZr",{after:function(E){for(var T=0;T<o.length;T++)o[T].removeSelfFromZr(E)}});function g(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,$E(e,"addSelfToZr"),$E(e,"removeSelfFromZr")}var v=o.length;if(c)for(var b=v,S=function(){b--,b===0&&(g(),l&&l())},d=0;d<v;d++){var w=c?Pt({delay:(t.delay||0)+c(d,v,r[d],o[d]),done:S},t):t;nW(r[d],o[d],w)}else e.__morphT=0,e.animateTo({__morphT:1},Pt({during:function(E){for(var T=0;T<v;T++){var M=o[T];M.__morphT=e.__morphT,M.dirtyShape()}u&&u(E)},done:function(){g();for(var E=0;E<n.length;E++)$E(n[E],"updateTransform");l&&l()}},t));return e.__zr&&m(e.__zr),{fromIndividuals:r,toIndividuals:o,count:v}}function O$e(n,e,t){var r=e.length,i=[],a=t.dividePath||ive;function s(f){for(var p=0;p<f.length;p++){var m=f[p];GN(m)?s(m.childrenRef()):m instanceof vn&&i.push(m)}}if(GN(n)){s(n.childrenRef());var o=i.length;if(o<r)for(var l=0,u=o;u<r;u++)i.push(uj(i[l++%o]));i.length=r}else{i=a({path:n,count:r});for(var c=n.getComputedTransform(),u=0;u<i.length;u++)i[u].setLocalTransform(c);if(i.length!==r)return console.error("Invalid morphing: unmatched splitted path"),J8()}i=WN(i),e=WN(e);for(var h=t.individualDelay,u=0;u<r;u++){var d=h?Pt({delay:(t.delay||0)+h(u,r,i[u],e[u])},t):t;nW(i[u],e[u],d)}return{fromIndividuals:i,toIndividuals:e,count:e.length}}function Kre(n){return Be(n[0])}function Zre(n,e){for(var t=[],r=n.length,i=0;i<r;i++)t.push({one:n[i],many:[]});for(var i=0;i<e.length;i++){var a=e[i].length,s=void 0;for(s=0;s<a;s++)t[s%r].many.push(e[i][s])}for(var o=0,i=r-1;i>=0;i--)if(!t[i].many.length){var l=t[o].many;if(l.length<=1)if(o)o=0;else return t;var a=l.length,u=Math.ceil(a/2);t[i].many=l.slice(u,a),t[o].many=l.slice(0,u),o++}return t}var B$e={clone:function(n){for(var e=[],t=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var i=uj(n.path);i.setStyle("opacity",t),e.push(i)}return e},split:null};function K5(n,e,t,r,i,a){if(!n.length||!e.length)return;var s=HS("update",r,i);if(!(s&&s.duration>0))return;var o=r.getModel("universalTransition").get("delay"),l=Object.assign({setToFinal:!0},s),u,c;Kre(n)&&(u=n,c=e),Kre(e)&&(u=e,c=n);function h(v,b,S,w,E){var T=v.many,M=v.one;if(T.length===1&&!E){var P=b?T[0]:M,I=b?M:T[0];if(GN(P))h({many:[P],one:I},!0,S,w,!0);else{var D=o?Pt({delay:o(S,w)},l):l;nW(P,I,D),a(P,I,P,I,D)}}else for(var R=Pt({dividePath:B$e[t],individualDelay:o&&function(X,j,Q,H){return o(X+S,w)}},l),B=b?k$e(T,M,R):O$e(M,T,R),k=B.fromIndividuals,V=B.toIndividuals,G=k.length,F=0;F<G;F++){var D=o?Pt({delay:o(F,G)},l):l;a(k[F],V[F],b?T[F]:v.one,b?v.one:T[F],D)}}for(var d=u?u===n:n.length>e.length,f=u?Zre(c,u):Zre(d?e:n,[d?n:e]),p=0,m=0;m<f.length;m++)p+=f[m].many.length;for(var g=0,m=0;m<f.length;m++)h(f[m],d,g,p),g+=f[m].many.length}function Hv(n){if(!n)return[];if(Be(n)){for(var e=[],t=0;t<n.length;t++)e.push(Hv(n[t]));return e}var r=[];return n.traverse(function(i){i instanceof vn&&!i.disableMorphing&&!i.invisible&&!i.ignore&&r.push(i)}),r}var ave=1e4,F$e=0,Qre=1,Jre=2,U$e=mn();function z$e(n,e){for(var t=n.dimensions,r=0;r<t.length;r++){var i=n.getDimensionInfo(t[r]);if(i&&i.otherDims[e]===0)return t[r]}}function V$e(n,e,t){var r=n.getDimensionInfo(t),i=r&&r.ordinalMeta;if(r){var a=n.get(r.name,e);return i&&i.categories[a]||a+""}}function eie(n,e,t,r){var i=r?"itemChildGroupId":"itemGroupId",a=z$e(n,i);if(a){var s=V$e(n,e,a);return s}var o=n.getRawDataItem(e),l=r?"childGroupId":"groupId";if(o&&o[l])return o[l]+"";if(!r)return t||n.getId(e)}function tie(n){var e=[];return W(n,function(t){var r=t.data,i=t.dataGroupId;if(!(r.count()>ave))for(var a=r.getIndices(),s=0;s<a.length;s++)e.push({data:r,groupId:eie(r,s,i,!1),childGroupId:eie(r,s,i,!0),divide:t.divide,dataIndex:s})}),e}function Z5(n,e,t){n.traverse(function(r){r instanceof vn&&Vr(r,{style:{opacity:0}},e,{dataIndex:t,isFrom:!0})})}function Q5(n){if(n.parent){var e=n.getComputedTransform();n.setLocalTransform(e),n.parent.remove(n)}}function p_(n){n.stopAnimation(),n.isGroup&&n.traverse(function(e){e.stopAnimation()})}function H$e(n,e,t){var r=HS("update",t,e);r&&n.traverse(function(i){if(i instanceof Nu){var a=bke(i);a&&i.animateFrom({style:a},r)}})}function G$e(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++){var i=n[r],a=e[r];if(i.data.getId(i.dataIndex)!==a.data.getId(a.dataIndex))return!1}return!0}function sve(n,e,t){var r=tie(n),i=tie(e);function a(S,w,E,T,M){(E||S)&&w.animateFrom({style:E&&E!==S?Pe(Pe({},E.style),S.style):S.style},M)}var s=!1,o=F$e,l=ct(),u=ct();r.forEach(function(S){S.groupId&&l.set(S.groupId,!0),S.childGroupId&&u.set(S.childGroupId,!0)});for(var c=0;c<i.length;c++){var h=i[c].groupId;if(u.get(h)){o=Qre;break}var d=i[c].childGroupId;if(d&&l.get(d)){o=Jre;break}}function f(S,w){return function(E){var T=E.data,M=E.dataIndex;return w?T.getId(M):S?o===Qre?E.childGroupId:E.groupId:o===Jre?E.childGroupId:E.groupId}}var p=G$e(r,i),m={};if(!p)for(var c=0;c<i.length;c++){var g=i[c],v=g.data.getItemGraphicEl(g.dataIndex);v&&(m[v.id]=!0)}function b(S,w){var E=r[w],T=i[S],M=T.data.hostModel,P=E.data.getItemGraphicEl(E.dataIndex),I=T.data.getItemGraphicEl(T.dataIndex);if(P===I){I&&H$e(I,T.dataIndex,M);return}P&&m[P.id]||I&&(p_(I),P?(p_(P),Q5(P),s=!0,K5(Hv(P),Hv(I),T.divide,M,S,a)):Z5(I,M,S))}new Kf(r,i,f(!0,p),f(!1,p),null,"multiple").update(b).updateManyToOne(function(S,w){var E=i[S],T=E.data,M=T.hostModel,P=T.getItemGraphicEl(E.dataIndex),I=er(Ue(w,function(D){return r[D].data.getItemGraphicEl(r[D].dataIndex)}),function(D){return D&&D!==P&&!m[D.id]});P&&(p_(P),I.length?(W(I,function(D){p_(D),Q5(D)}),s=!0,K5(Hv(I),Hv(P),E.divide,M,S,a)):Z5(P,M,E.dataIndex))}).updateOneToMany(function(S,w){var E=r[w],T=E.data.getItemGraphicEl(E.dataIndex);if(!(T&&m[T.id])){var M=er(Ue(S,function(I){return i[I].data.getItemGraphicEl(i[I].dataIndex)}),function(I){return I&&I!==T}),P=i[S[0]].data.hostModel;M.length&&(W(M,function(I){return p_(I)}),T?(p_(T),Q5(T),s=!0,K5(Hv(T),Hv(M),E.divide,P,S[0],a)):W(M,function(I){return Z5(I,P,S[0])}))}}).updateManyToMany(function(S,w){new Kf(w,S,function(E){return r[E].data.getId(r[E].dataIndex)},function(E){return i[E].data.getId(i[E].dataIndex)}).update(function(E,T){b(S[E],w[T])}).execute()}).execute(),s&&W(e,function(S){var w=S.data,E=w.hostModel,T=E&&t.getViewOfSeriesModel(E),M=HS("update",E,0);T&&E.isAnimationEnabled()&&M&&M.duration>0&&T.group.traverse(function(P){P instanceof vn&&!P.animators.length&&P.animateFrom({style:{opacity:0}},M)})})}function nie(n){var e=n.getModel("universalTransition").get("seriesKey");return e||n.id}function rie(n){return Be(n)?n.sort().join(","):n}function nm(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function j$e(n,e){var t=ct(),r=ct(),i=ct();return W(n.oldSeries,function(a,s){var o=n.oldDataGroupIds[s],l=n.oldData[s],u=nie(a),c=rie(u);r.set(c,{dataGroupId:o,data:l}),Be(u)&&W(u,function(h){i.set(h,{key:c,dataGroupId:o,data:l})})}),W(e.updatedSeries,function(a){if(a.isUniversalTransitionEnabled()&&a.isAnimationEnabled()){var s=a.get("dataGroupId"),o=a.getData(),l=nie(a),u=rie(l),c=r.get(u);if(c)t.set(u,{oldSeries:[{dataGroupId:c.dataGroupId,divide:nm(c.data),data:c.data}],newSeries:[{dataGroupId:s,divide:nm(o),data:o}]});else if(Be(l)){var h=[];W(l,function(p){var m=r.get(p);m.data&&h.push({dataGroupId:m.dataGroupId,divide:nm(m.data),data:m.data})}),h.length&&t.set(u,{oldSeries:h,newSeries:[{dataGroupId:s,data:o,divide:nm(o)}]})}else{var d=i.get(l);if(d){var f=t.get(d.key);f||(f={oldSeries:[{dataGroupId:d.dataGroupId,data:d.data,divide:nm(d.data)}],newSeries:[]},t.set(d.key,f)),f.newSeries.push({dataGroupId:s,data:o,divide:nm(o)})}}}}),t}function iie(n,e){for(var t=0;t<n.length;t++){var r=e.seriesIndex!=null&&e.seriesIndex===n[t].seriesIndex||e.seriesId!=null&&e.seriesId===n[t].id;if(r)return t}}function W$e(n,e,t,r){var i=[],a=[];W(br(n.from),function(s){var o=iie(e.oldSeries,s);o>=0&&i.push({dataGroupId:e.oldDataGroupIds[o],data:e.oldData[o],divide:nm(e.oldData[o]),groupIdDim:s.dimension})}),W(br(n.to),function(s){var o=iie(t.updatedSeries,s);if(o>=0){var l=t.updatedSeries[o].getData();a.push({dataGroupId:e.oldDataGroupIds[o],data:l,divide:nm(l),groupIdDim:s.dimension})}}),i.length>0&&a.length>0&&sve(i,a,r)}function X$e(n){n.registerUpdateLifecycle("series:beforeupdate",function(e,t,r){W(br(r.seriesTransition),function(i){W(br(i.to),function(a){for(var s=r.updatedSeries,o=0;o<s.length;o++)(a.seriesIndex!=null&&a.seriesIndex===s[o].seriesIndex||a.seriesId!=null&&a.seriesId===s[o].id)&&(s[o][PL]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(e,t,r){var i=U$e(t);if(i.oldSeries&&r.updatedSeries&&r.optionChanged){var a=r.seriesTransition;if(a)W(br(a),function(f){W$e(f,i,r,t)});else{var s=j$e(i,r);W(s.keys(),function(f){var p=s.get(f);sve(p.oldSeries,p.newSeries,t)})}W(r.updatedSeries,function(f){f[PL]&&(f[PL]=!1)})}for(var o=e.getSeries(),l=i.oldSeries=[],u=i.oldDataGroupIds=[],c=i.oldData=[],h=0;h<o.length;h++){var d=o[h].getData();d.count()<ave&&(l.push(o[h]),u.push(o[h].get("dataGroupId")),c.push(d))}})}var $$e=(function(){function n(){this.breaks=[],this._elapsedExtent=[1/0,-1/0]}return n.prototype.setBreaks=function(e){this.breaks=e.breaks},n.prototype.update=function(e){q$e(this,e);var t=this._elapsedExtent;t[0]=this.elapse(e[0]),t[1]=this.elapse(e[1])},n.prototype.hasBreaks=function(){return!!this.breaks.length},n.prototype.calcNiceTickMultiple=function(e,t){for(var r=0;r<this.breaks.length;r++){var i=this.breaks[r];if(i.vmin<e&&e<i.vmax){var a=t(e,i.vmax);return a}}return 0},n.prototype.getExtentSpan=function(){return this._elapsedExtent[1]-this._elapsedExtent[0]},n.prototype.normalize=function(e){var t=this._elapsedExtent[1]-this._elapsedExtent[0];return t===0?.5:(this.elapse(e)-this._elapsedExtent[0])/t},n.prototype.scale=function(e){return this.unelapse(e*(this._elapsedExtent[1]-this._elapsedExtent[0])+this._elapsedExtent[0])},n.prototype.elapse=function(e){for(var t=aie,r=sie,i=!0,a=0;a<this.breaks.length;a++){var s=this.breaks[a];if(e<=s.vmax){e>s.vmin?t+=s.vmin-r+(e-s.vmin)/(s.vmax-s.vmin)*s.gapReal:t+=e-r,r=s.vmax,i=!1;break}t+=s.vmin-r+s.gapReal,r=s.vmax}return i&&(t+=e-r),t},n.prototype.unelapse=function(e){for(var t=aie,r=sie,i=!0,a=0,s=0;s<this.breaks.length;s++){var o=this.breaks[s],l=t+o.vmin-r,u=l+o.gapReal;if(e<=u){e>l?a=o.vmin+(e-l)/(u-l)*(o.vmax-o.vmin):a=r+e-t,r=o.vmax,i=!1;break}t=u,r=o.vmax}return i&&(a=r+e-t),a},n})();function Y$e(){return new $$e}var aie=0,sie=0;function q$e(n,e){var t=0,r={tpAbs:{span:0,val:0},tpPrct:{span:0,val:0}},i=function(){return{has:!1,span:NaN,inExtFrac:NaN,val:NaN}},a={S:{tpAbs:i(),tpPrct:i()},E:{tpAbs:i(),tpPrct:i()}};W(n.breaks,function(o){var l=o.gapParsed;l.type==="tpPrct"&&(t+=l.val);var u=rW(o,e);if(u){var c=u.vmin!==o.vmin,h=u.vmax!==o.vmax,d=u.vmax-u.vmin;if(!(c&&h))if(c||h){var f=c?"S":"E";a[f][l.type].has=!0,a[f][l.type].span=d,a[f][l.type].inExtFrac=d/(o.vmax-o.vmin),a[f][l.type].val=l.val}else r[l.type].span+=d,r[l.type].val+=l.val}});var s=t*(0+(e[1]-e[0])+(r.tpAbs.val-r.tpAbs.span)+(a.S.tpAbs.has?(a.S.tpAbs.val-a.S.tpAbs.span)*a.S.tpAbs.inExtFrac:0)+(a.E.tpAbs.has?(a.E.tpAbs.val-a.E.tpAbs.span)*a.E.tpAbs.inExtFrac:0)-r.tpPrct.span-(a.S.tpPrct.has?a.S.tpPrct.span*a.S.tpPrct.inExtFrac:0)-(a.E.tpPrct.has?a.E.tpPrct.span*a.E.tpPrct.inExtFrac:0))/(1-r.tpPrct.val-(a.S.tpPrct.has?a.S.tpPrct.val*a.S.tpPrct.inExtFrac:0)-(a.E.tpPrct.has?a.E.tpPrct.val*a.E.tpPrct.inExtFrac:0));W(n.breaks,function(o){var l=o.gapParsed;l.type==="tpPrct"&&(o.gapReal=t!==0?Math.max(s,0)*l.val/t:0),l.type==="tpAbs"&&(o.gapReal=l.val),o.gapReal==null&&(o.gapReal=0)})}function K$e(n,e,t,r,i,a){n!=="no"&&W(t,function(s){var o=rW(s,a);if(o)for(var l=e.length-1;l>=0;l--){var u=e[l],c=r(u),h=i*3/4;c>o.vmin-h&&c<o.vmax+h&&(n!=="preserve_extent_bound"||c!==a[0]&&c!==a[1])&&e.splice(l,1)}})}function Z$e(n,e,t,r){W(e,function(i){var a=rW(i,t);a&&(n.push({value:a.vmin,break:{type:"vmin",parsedBreak:a},time:r?r(a):void 0}),n.push({value:a.vmax,break:{type:"vmax",parsedBreak:a},time:r?r(a):void 0}))}),e.length&&n.sort(function(i,a){return i.value-a.value})}function rW(n,e){var t=Math.max(n.vmin,e[0]),r=Math.min(n.vmax,e[1]);return t<r||t===r&&t>e[0]&&t<e[1]?{vmin:t,vmax:r,breakOption:n.breakOption,gapParsed:n.gapParsed,gapReal:n.gapReal}:null}function eV(n,e,t){var r=[];if(!n)return{breaks:r};function i(s,o){return s>=0&&s<1-1e-5}W(n,function(s){if(!(!s||s.start==null||s.end==null)&&!s.isExpanded){var o={breakOption:Tt(s),vmin:e(s.start),vmax:e(s.end),gapParsed:{type:"tpAbs",val:0},gapReal:null};if(s.gap!=null){var l=!1;if(Ke(s.gap)){var u=Mu(s.gap);if(u.match(/%$/)){var c=parseFloat(u)/100;i(c)||(c=0),o.gapParsed.type="tpPrct",o.gapParsed.val=c,l=!0}}if(!l){var h=e(s.gap);(!isFinite(h)||h<0)&&(h=0),o.gapParsed.type="tpAbs",o.gapParsed.val=h}}if(o.vmin===o.vmax&&(o.gapParsed.type="tpAbs",o.gapParsed.val=0),t&&t.noNegative&&W(["vmin","vmax"],function(f){o[f]<0&&(o[f]=0)}),o.vmin>o.vmax){var d=o.vmax;o.vmax=o.vmin,o.vmin=d}r.push(o)}}),r.sort(function(s,o){return s.vmin-o.vmin});var a=-1/0;return W(r,function(s,o){a>s.vmin&&(r[o]=null),a=s.vmax}),{breaks:r.filter(function(s){return!!s})}}function iW(n,e){return tV(e)===tV(n)}function tV(n){return n.start+"_\0_"+n.end}function Q$e(n,e,t){var r=[];W(n,function(a,s){var o=e(a);o&&o.type==="vmin"&&r.push([s])}),W(n,function(a,s){var o=e(a);if(o&&o.type==="vmax"){var l=nx(r,function(u){return iW(e(n[u[0]]).parsedBreak.breakOption,o.parsedBreak.breakOption)});l&&l.push(s)}});var i=[];return W(r,function(a){a.length===2&&i.push(t?a:[n[a[0]],n[a[1]]])}),i}function J$e(n,e,t,r){var i,a;if(n.break){var s=n.break.parsedBreak,o=nx(t,function(h){return iW(h.breakOption,n.break.parsedBreak.breakOption)}),l=r(Math.pow(e,s.vmin),o.vmin),u=r(Math.pow(e,s.vmax),o.vmax),c={type:s.gapParsed.type,val:s.gapParsed.type==="tpAbs"?Wi(Math.pow(e,s.vmin+s.gapParsed.val))-l:s.gapParsed.val};i={type:n.break.type,parsedBreak:{breakOption:s.breakOption,vmin:l,vmax:u,gapParsed:c,gapReal:s.gapReal}},a=o[n.break.type]}return{brkRoundingCriterion:a,vBreak:i}}function eYe(n,e,t){var r={noNegative:!0},i=eV(n,t,r),a=eV(n,t,r),s=Math.log(e);return a.breaks=Ue(a.breaks,function(o){var l=Math.log(o.vmin)/s,u=Math.log(o.vmax)/s,c={type:o.gapParsed.type,val:o.gapParsed.type==="tpAbs"?Math.log(o.vmin+o.gapParsed.val)/s-l:o.gapParsed.val};return{vmin:l,vmax:u,gapParsed:c,gapReal:o.gapReal,breakOption:o.breakOption}}),{parsedOriginal:i,parsedLogged:a}}var tYe={vmin:"start",vmax:"end"};function nYe(n,e){return e&&(n=n||{},n.break={type:tYe[e.type],start:e.parsedBreak.vmin,end:e.parsedBreak.vmax}),n}function rYe(){jke({createScaleBreakContext:Y$e,pruneTicksByBreak:K$e,addBreaksToTicks:Z$e,parseAxisBreakOption:eV,identifyAxisBreak:iW,serializeAxisBreakIdentifier:tV,retrieveAxisBreakPairs:Q$e,getTicksLogTransformBreak:J$e,logarithmicParseBreaksFromOption:eYe,makeAxisLabelFormatterParamBreak:nYe})}var oie=mn();function iYe(n,e){var t=nx(n,function(r){return $i().identifyAxisBreak(r.parsedBreak.breakOption,e.breakOption)});return t||n.push(t={zigzagRandomList:[],parsedBreak:e,shouldRemove:!1}),t}function aYe(n){W(n,function(e){return e.shouldRemove=!0})}function sYe(n){for(var e=n.length-1;e>=0;e--)n[e].shouldRemove&&n.splice(e,1)}function oYe(n,e,t,r,i){var a=t.axis;if(a.scale.isBlank()||!$i())return;var s=$i().retrieveAxisBreakPairs(a.scale.getTicks({breakTicks:"only_break"}),function(I){return I.break},!1);if(!s.length)return;var o=t.getModel("breakArea"),l=o.get("zigzagAmplitude"),u=o.get("zigzagMinSpan"),c=o.get("zigzagMaxSpan");u=Math.max(2,u||0),c=Math.max(u,c||0);var h=o.get("expandOnClick"),d=o.get("zigzagZ"),f=o.getModel("itemStyle"),p=f.getItemStyle(),m=p.stroke,g=p.lineWidth,v=p.lineDash,b=p.fill,S=new wt({ignoreModelZ:!0}),w=a.isHorizontal(),E=oie(e).visualList||(oie(e).visualList=[]);aYe(E);for(var T=function(I){var D=s[I][0].break.parsedBreak,R=[];R[0]=a.toGlobalCoord(a.dataToCoord(D.vmin,!0)),R[1]=a.toGlobalCoord(a.dataToCoord(D.vmax,!0)),R[1]<R[0]&&R.reverse();var B=iYe(E,D);B.shouldRemove=!1;var k=new wt;P(B.zigzagRandomList,k,R[0],R[1],w,D),h&&k.on("click",function(){var V={type:E3,breaks:[{start:D.breakOption.start,end:D.breakOption.end}]};V[a.dim+"AxisIndex"]=t.componentIndex,i.dispatchAction(V)}),k.silent=!h,S.add(k)},M=0;M<s.length;M++)T(M);n.add(S),sYe(E);function P(I,D,R,B,k,V){var G={stroke:m,lineWidth:g,lineDash:v,fill:"none"},F=k?0:1,X=1-F,j=r[Yt[X]]+r[Yi[X]];function Q(pt){var lt=[],Mt=[];lt[F]=Mt[F]=pt,lt[X]=r[Yt[X]],Mt[X]=j;var mt={x1:lt[0],y1:lt[1],x2:Mt[0],y2:Mt[1]};return o3(mt,mt,{lineWidth:1}),lt[0]=mt.x1,lt[1]=mt.y1,lt[F]}R=Q(R),B=Q(B);for(var H=[],K=[],te=!0,Y=r[Yt[X]],de=0;;de++){var ge=Y===r[Yt[X]],se=Y>=j;se&&(Y=j);var he=[],fe=[];he[F]=R,fe[F]=B,!ge&&!se&&(he[F]+=te?-l:l,fe[F]-=te?l:-l),he[X]=Y,fe[X]=Y,H.push(he),K.push(fe);var Ee=void 0;if(de<I.length?Ee=I[de]:(Ee=Math.random(),I.push(Ee)),Y+=Ee*(c-u)+u,te=!te,se)break}var Ce=$i().serializeAxisBreakIdentifier(V.breakOption);if(D.add(new gs({anid:"break_a_"+Ce,shape:{points:H},style:G,z:d})),V.gapReal!==0){D.add(new gs({anid:"break_b_"+Ce,shape:{points:K},style:G,z:d}));var Re=K.slice();Re.reverse();var He=H.concat(Re);D.add(new Vs({anid:"break_c_"+Ce,shape:{points:He},style:{fill:b,opacity:p.opacity},z:d}))}}}function lYe(n,e,t,r){var i=n.axis,a=t.transform;Us(r.style);var s=i.getExtent();i.inverse&&(s=s.slice(),s.reverse());var o=$i().retrieveAxisBreakPairs(i.scale.getTicks({breakTicks:"only_break"}),function(g){return g.break},!1),l=Ue(o,function(g){var v=g[0].break.parsedBreak,b=[i.dataToCoord(v.vmin,!0),i.dataToCoord(v.vmax,!0)];return b[0]>b[1]&&b.reverse(),{coordPair:b,brkId:$i().serializeAxisBreakIdentifier(v.breakOption)}});l.sort(function(g,v){return g.coordPair[0]-v.coordPair[0]});for(var u=s[0],c=null,h=0;h<l.length;h++){var d=l[h],f=Math.max(d.coordPair[0],s[0]),p=Math.min(d.coordPair[1],s[1]);u<=f&&m(u,f,c,d),u=p,c=d}u<=s[1]&&m(u,s[1],c,null);function m(g,v,b,S){function w(R,B){a&&(Oi(R,R,a),Oi(B,B,a))}function E(R,B){var k={x1:R[0],y1:R[1],x2:B[0],y2:B[1]};o3(k,k,r.style),R[0]=k.x1,R[1]=k.y1,B[0]=k.x2,B[1]=k.y2}var T=[g,0],M=[v,0],P=[g,5],I=[v,5];w(T,P),E(T,P),w(M,I),E(M,I),E(T,M);var D=new Xi(Pe({shape:{x1:T[0],y1:T[1],x2:M[0],y2:M[1]}},r));e.add(D),D.anid="breakLine_"+(b?b.brkId:"\0")+"_\0_"+(S?S.brkId:"\0")}}function uYe(n,e,t){if(nx(t,function(b){return!b}))return;var r=new Ct;if(!w3(t[0],t[1],r,{direction:-(n?e+Math.PI:e),touchThreshold:0,bidirectional:!1}))return;var i=Ya();Rg(i,i,-e);var a=Ue(t,function(b){return b.transform?Wh(Ya(),i,b.transform):i});function s(b){var S=t[0].localRect,w=new Ct(S[Yi[b]]*a[0][0],S[Yi[b]]*a[0][1]);return Math.abs(w.y)<1e-5}var o=.5;if(s(0)||s(1)){var l=Ue(t,function(b,S){var w=b.localRect.clone();return w.applyTransform(a[S]),w}),u=new Ct;u.copy(t[0].label).add(t[1].label).scale(.5),u.transform(i);var c=r.clone().transform(i),h=l[0].x+l[1].x+(c.x>=0?l[0].width:l[1].width),d=(h+c.x)/2-u.x,f=Math.min(d,d-c.x),p=Math.max(d,d-c.x),m=p<0?p:f>0?f:0;o=(d-m)/c.x}var g=new Ct,v=new Ct;Ct.scale(g,r,-o),Ct.scale(v,r,1-o),n8(t[0],g),n8(t[1],v)}function cYe(n,e){var t={breaks:[]};return W(e.breaks,function(r){if(r){var i=nx(n.get("breaks",!0),function(o){return $i().identifyAxisBreak(o,r)});if(i){var a=e.type,s={isExpanded:!!i.isExpanded};i.isExpanded=a===E3?!0:a===Cpe?!1:a===Mpe?!i.isExpanded:i.isExpanded,t.breaks.push({start:i.start,end:i.end,isExpanded:!!i.isExpanded,old:s})}}}),t}function hYe(){s6e({adjustBreakLabelPair:uYe,buildAxisBreakLine:lYe,rectCoordBuildBreakAxis:oYe,updateModelAxisBreak:cYe})}function dYe(n){d6e(n),rYe(),hYe()}function fYe(){R6e(pYe)}function pYe(n,e){W(n,function(t){if(!t.model.get(["axisLabel","inside"])){var r=mYe(t);if(r){var i=t.isHorizontal()?"height":"width",a=t.model.get(["axisLabel","margin"]);e[i]-=r[i]+a,t.position==="top"?e.y+=r.height+a:t.position==="left"&&(e.x+=r.width+a)}}})}function mYe(n){var e=n.model,t=n.scale;if(!e.get(["axisLabel","show"])||t.isBlank())return;var r,i,a=t.getExtent();t instanceof sS?i=t.count():(r=t.getTicks(),i=r.length);var s=n.getLabelModel(),o=YS(n),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var h=r?r[c]:{value:a[0]+c},d=o(h,c),f=s.getTextRect(d),p=m(f,s.get("rotate")||0);l?l.union(p):l=p}return l;function m(g,v){var b=v*Math.PI/180,S=g.width,w=g.height,E=S*Math.abs(Math.cos(b))+Math.abs(w*Math.sin(b)),T=S*Math.abs(Math.sin(b))+Math.abs(w*Math.cos(b)),M=new Rt(g.x,g.y,E,T);return M}}sn([i5e]);sn([J4e]);sn([T5e,U5e,q5e,Q6e,uUe,QUe,Eze,l8e,D8e,O8e,H8e,K8e,GVe,fHe,THe,zHe,jHe,e9e,o9e,y9e,T9e,N9e,yGe]);sn(BGe);sn(lje);sn(eme);sn(_je);sn(zme);sn(Tje);sn(jje);sn(Jje);sn(U7e);sn(iWe);sn(D2);sn(_We);sn(wWe);sn(RWe);sn(VWe);sn($We);sn(JWe);sn(uXe);sn(MXe);sn(Xge);sn($ge);sn(YXe);sn(Qge);sn(Jge);sn(QXe);sn(r$e);sn(g$e);sn(x$e);sn(X$e);sn(x4e);sn(dYe);sn(fYe);sn(J6e);function ove(){const[n,e]=ee.useState(380),[t,r]=ee.useState(50),[i,a]=ee.useState(15),[s,o]=ee.useState(.85),[l,u]=ee.useState(.8),[c,h]=ee.useState(2),[d,f]=ee.useState({current:0,torque:0,synchronousSpeed:0,ratedSpeed:0,slip:0});return ee.useEffect(()=>{const p=i*1e3/(Math.sqrt(3)*n*l*s),m=60*t/c,g=.05,v=m*(1-g),b=i*1e3*60/(2*Math.PI*v);f({current:parseFloat(p.toFixed(2)),torque:parseFloat(b.toFixed(2)),synchronousSpeed:parseFloat(m.toFixed(1)),ratedSpeed:parseFloat(v.toFixed(1)),slip:parseFloat(g.toFixed(3))})},[n,t,i,s,l,c]),C.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-lg shadow-xl p-6 border border-cyan-500/30",children:[C.jsx("div",{className:"flex items-center mb-6",children:C.jsxs("h3",{className:"text-xl font-semibold text-cyan-400 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-microchip mr-3 text-2xl"}),""]})}),C.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[C.jsxs("div",{className:"lg:w-1/2",children:[C.jsxs("h4",{className:"font-medium mb-4 text-cyan-400 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-sliders mr-2"}),""]}),C.jsxs("div",{className:"space-y-5",children:[C.jsxs("div",{className:"bg-gray-800/60 p-4 rounded-lg border border-cyan-900/50 backdrop-blur-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(U)"})]}),C.jsx("span",{className:"text-sm font-medium text-cyan-400 min-w-[60px] text-right",children:n})]}),C.jsx("input",{type:"range",min:"220",max:"660",step:"10",value:n,onChange:p=>e(parseFloat(p.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${(n-220)/440*100}%, #374151 ${(n-220)/440*100}%, #374151 100%)`}}),C.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[C.jsx("span",{children:"220V"}),C.jsx("span",{children:"380V"}),C.jsx("span",{children:"660V"})]})]}),C.jsxs("div",{className:"bg-gray-800/60 p-4 rounded-lg border border-cyan-900/50 backdrop-blur-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(f)"})]}),C.jsx("span",{className:"text-sm font-medium text-cyan-400 min-w-[60px] text-right",children:t})]}),C.jsx("input",{type:"range",min:"50",max:"60",step:"1",value:t,onChange:p=>r(parseFloat(p.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${(t-50)/10*100}%, #374151 ${(t-50)/10*100}%, #374151 100%)`}}),C.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[C.jsx("span",{children:"50Hz"}),C.jsx("span",{children:"60Hz"})]})]}),C.jsxs("div",{className:"bg-gray-800/60 p-4 rounded-lg border border-cyan-900/50 backdrop-blur-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(P)"})]}),C.jsx("span",{className:"text-sm font-medium text-cyan-400 min-w-[60px] text-right",children:i})]}),C.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:i,onChange:p=>a(parseFloat(p.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${(i-1)/49*100}%, #374151 ${(i-1)/49*100}%, #374151 100%)`}}),C.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[C.jsx("span",{children:"1kW"}),C.jsx("span",{children:"15kW"}),C.jsx("span",{children:"50kW"})]})]}),C.jsxs("div",{className:"bg-gray-800/60 p-4 rounded-lg border border-cyan-900/50 backdrop-blur-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"()"})]}),C.jsxs("span",{className:"text-sm font-medium text-cyan-400 min-w-[60px] text-right",children:[Math.round(s*100),"%"]})]}),C.jsx("input",{type:"range",min:"0.7",max:"0.98",step:"0.01",value:s,onChange:p=>o(parseFloat(p.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${(s-.7)/(.98-.7)*100}%, #374151 ${(s-.7)/(.98-.7)*100}%, #374151 100%)`}}),C.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[C.jsx("span",{children:"70%"}),C.jsx("span",{children:"85%"}),C.jsx("span",{children:"98%"})]})]}),C.jsxs("div",{className:"bg-gray-800/60 p-4 rounded-lg border border-cyan-900/50 backdrop-blur-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(cos)"})]}),C.jsx("span",{className:"text-sm font-medium text-cyan-400 min-w-[60px] text-right",children:l.toFixed(2)})]}),C.jsx("input",{type:"range",min:"0.5",max:"0.95",step:"0.01",value:l,onChange:p=>u(parseFloat(p.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${(l-.5)/(.95-.5)*100}%, #374151 ${(l-.5)/(.95-.5)*100}%, #374151 100%)`}}),C.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[C.jsx("span",{children:"0.5"}),C.jsx("span",{children:"0.8"}),C.jsx("span",{children:"0.95"})]})]}),C.jsxs("div",{className:"bg-gray-800/60 p-4 rounded-lg border border-cyan-900/50 backdrop-blur-sm",children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsxs("label",{className:"text-sm font-medium text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(p)"})]}),C.jsx("span",{className:"text-sm font-medium text-cyan-400 min-w-[60px] text-right",children:c})]}),C.jsx("input",{type:"range",min:"1",max:"4",step:"1",value:c,onChange:p=>h(parseFloat(p.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #06b6d4 0%, #06b6d4 ${(c-1)/3*100}%, #374151 ${(c-1)/3*100}%, #374151 100%)`}}),C.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[C.jsx("span",{children:"1"}),C.jsx("span",{children:"2"}),C.jsx("span",{children:"3"}),C.jsx("span",{children:"4"})]})]})]})]}),C.jsxs("div",{className:"lg:w-1/2",children:[C.jsxs("h4",{className:"font-medium mb-4 text-cyan-400 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-chart-line mr-2"}),""]}),C.jsx("div",{className:"mb-5 bg-gray-800/60 p-4 rounded-lg border border-cyan-900/50 flex justify-center",children:C.jsxs("div",{className:"w-40 h-40 relative",children:[C.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-cyan-500/50 flex items-center justify-center",children:C.jsx("div",{className:"w-24 h-24 rounded-full border-2 border-cyan-700/50 flex items-center justify-center",children:C.jsx("div",{className:"w-12 h-12 rounded-full bg-cyan-600/20 flex items-center justify-center",children:C.jsx("i",{className:"fa-solid fa-bolt text-cyan-400 text-xl"})})})}),C.jsx("div",{className:"absolute inset-0",style:{animation:`spin-slow ${d.ratedSpeed>0?(3*1500/d.ratedSpeed).toFixed(2):3}s linear infinite`},children:[0,45,90,135,180,225,270,315].map(p=>C.jsx("div",{className:"absolute top-1/2 left-1/2 w-1 h-16 bg-cyan-500/30 origin-bottom",style:{transform:`translate(-50%, -100%) rotate(${p}deg)`}},p))}),C.jsx("div",{className:"absolute inset-0 rounded-full bg-cyan-500/10 animate-pulse"})]})}),C.jsx("div",{className:"bg-gray-800/60 rounded-lg p-5 border border-cyan-900/50",children:C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/40 rounded-lg border-l-4 border-cyan-500",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-bolt text-cyan-400 mr-2"}),C.jsxs("span",{className:"text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(I)"})]})]}),C.jsxs("span",{className:"font-medium text-cyan-400",children:[d.current," A"]})]}),C.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/40 rounded-lg border-l-4 border-cyan-500",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-rotate text-cyan-400 mr-2"}),C.jsxs("span",{className:"text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(T)"})]})]}),C.jsxs("span",{className:"font-medium text-cyan-400",children:[d.torque," Nm"]})]}),C.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/40 rounded-lg border-l-4 border-cyan-500",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-tachometer text-cyan-400 mr-2"}),C.jsxs("span",{className:"text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(n)"})]})]}),C.jsxs("span",{className:"font-medium text-cyan-400",children:[d.synchronousSpeed," rpm"]})]}),C.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/40 rounded-lg border-l-4 border-cyan-500",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-cog text-cyan-400 mr-2"}),C.jsxs("span",{className:"text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(n)"})]})]}),C.jsxs("span",{className:"font-medium text-cyan-400",children:[d.ratedSpeed," rpm"]})]}),C.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/40 rounded-lg border-l-4 border-cyan-500",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-percent text-cyan-400 mr-2"}),C.jsxs("span",{className:"text-gray-300",children:[" ",C.jsx("span",{className:"text-cyan-400 font-mono text-sm",children:"(s)"})]})]}),C.jsx("span",{className:"font-medium text-cyan-400",children:d.slip})]})]})}),C.jsxs("div",{className:"mt-5 p-4 bg-gray-800/60 rounded-lg border border-cyan-900/50",children:[C.jsxs("h5",{className:"text-sm font-medium text-cyan-400 mb-3 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-calculator mr-2"}),""]}),C.jsxs("div",{className:"text-xs text-gray-400 space-y-2",children:[C.jsxs("p",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-cyan-400 mr-1"}),"I = P  1000 / (3  U  cos  )"]}),C.jsxs("p",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-cyan-400 mr-1"}),"n = 60  f / p"]}),C.jsxs("p",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-cyan-400 mr-1"}),"n = n  (1 - s)"]}),C.jsxs("p",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-angle-right text-cyan-400 mr-1"}),"T = P  1000  60 / (2  n)"]})]})]})]})]})]})}function gYe(){var r,i,a;const[n,e]=ee.useState("frame"),t=[{id:"core",name:"",description:"",position:""},{id:"winding",name:"",description:"",position:""},{id:"slot",name:"",description:"",position:""},{id:"frame",name:"",description:"",position:""},{id:"endcap",name:"",description:"",position:""},{id:"cooling",name:"",description:"/",position:""},{id:"wiring",name:"",description:"IP67M6",position:""}];return C.jsxs("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[C.jsx("h3",{className:"text-md font-medium mb-4 text-[var(--text-primary)]",children:""}),C.jsx("p",{className:"mb-4 text-[var(--text-secondary)]",children:""}),C.jsxs("div",{className:"flex gap-4",children:[C.jsx("div",{className:"w-1/2",children:C.jsx("div",{className:"h-64 flex items-center justify-center",children:C.jsxs("div",{className:"w-48 h-48 rounded-full border-8 border-[var(--brand-pink)] relative",children:[C.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-[var(--text-primary)] cursor-pointer",onClick:()=>e("frame"),children:C.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[var(--brand-pink)] text-white text-xs px-2 py-1 rounded",children:""})}),C.jsx("div",{className:"absolute inset-4 rounded-full border-2 border-[var(--text-primary)] cursor-pointer",onClick:()=>e("core"),children:C.jsx("div",{className:"absolute top-4 left-1/2 transform -translate-x-full -translate-y-1/2 bg-[var(--brand-pink)] text-white text-xs px-2 py-1 rounded z-10",children:""})}),C.jsx("div",{className:"absolute inset-8 rounded-full border-2 border-dashed border-[var(--text-primary)] cursor-pointer",onClick:()=>e("winding"),children:C.jsx("div",{className:"absolute top-8 left-1/2 transform -translate-x-full -translate-y-1/2 bg-[var(--brand-pink)] text-white text-xs px-2 py-1 rounded z-10",children:""})}),[0,1,2,3,4,5].map(s=>C.jsx("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2 -translate-y-1/2 rotate-[${index*60}deg] w-2 h-10 bg-[var(--text-primary)] cursor-pointer",onClick:()=>e("slot")},s)),C.jsx("div",{className:"absolute -left-2 top-1/2 transform -translate-y-1/2 w-4 h-24 bg-[var(--text-primary)] rounded-l-md cursor-pointer",onClick:()=>e("endcap"),children:C.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[var(--brand-pink)] text-white text-xs px-2 py-1 rounded",children:""})}),C.jsx("div",{className:"absolute -right-2 top-1/2 transform -translate-y-1/2 w-4 h-24 bg-[var(--text-primary)] rounded-r-md cursor-pointer",onClick:()=>e("endcap")}),C.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-20 h-2 bg-[var(--text-primary)] cursor-pointer",onClick:()=>e("cooling"),children:C.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 bg-[var(--brand-pink)] text-white text-xs px-2 py-1 rounded",children:""})}),C.jsx("div",{className:"absolute top-1/2 -right-10 transform -translate-y-1/2 w-8 h-8 bg-[var(--brand-pink)] rounded-full flex items-center justify-center cursor-pointer",onClick:()=>e("wiring"),children:C.jsx("span",{className:"text-white text-xs",children:""})})]})})}),C.jsx("div",{className:"w-1/2",children:n&&C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-6 border border-[var(--light-pink)] h-full",children:[C.jsx("h4",{className:"text-md font-medium mb-3 text-[var(--text-primary)]",children:(r=t.find(s=>s.id===n))==null?void 0:r.name}),C.jsxs("p",{className:"mb-3 text-[var(--text-secondary)]",children:[C.jsx("strong",{children:""}),(i=t.find(s=>s.id===n))==null?void 0:i.description]}),C.jsxs("p",{className:"text-[var(--text-secondary)]",children:[C.jsx("strong",{children:""}),(a=t.find(s=>s.id===n))==null?void 0:a.position]})]})})]})]})}function vYe({currents:n,frequency:e,amplitude:t,currentTime:r}){const i=ee.useRef(null),a=ee.useRef([]),s=300,o={a:"#ef4444",b:"#22c55e",c:"#3b82f6",grid:"rgba(255, 255, 255, 0.1)",axis:"rgba(255, 255, 255, 0.3)",currentLine:"rgba(255, 255, 255, 0.5)"},l=ee.useCallback(()=>{const u=i.current;if(!u)return;const c=u.getContext("2d");if(!c)return;const h=window.devicePixelRatio||1,d=u.getBoundingClientRect();(u.width!==d.width*h||u.height!==d.height*h)&&(u.width=d.width*h,u.height=d.height*h,c.scale(h,h));const f=d.width,p=d.height;c.clearRect(0,0,f,p);const m={top:40,right:20,bottom:40,left:50},g=f-m.left-m.right,v=p-m.top-m.bottom,b=m.top+v/2;c.strokeStyle=o.grid,c.lineWidth=1;for(let w=0;w<=4;w++){const E=m.top+v/4*w;c.beginPath(),c.moveTo(m.left,E),c.lineTo(f-m.right,E),c.stroke()}for(let w=0;w<=6;w++){const E=m.left+g/6*w;c.beginPath(),c.moveTo(E,m.top),c.lineTo(E,p-m.bottom),c.stroke()}c.strokeStyle=o.axis,c.lineWidth=2,c.beginPath(),c.moveTo(m.left,b),c.lineTo(f-m.right,b),c.stroke(),c.beginPath(),c.moveTo(m.left,m.top),c.lineTo(m.left,p-m.bottom),c.stroke(),a.current.push({time:r,currents:{...n}}),a.current.length>s&&a.current.shift();const S=(w,E)=>{c.strokeStyle=E,c.lineWidth=2.5,c.beginPath();const T=a.current;if(T.length<2)return;const P=1/e*3,D=r-P;for(let X=0;X<T.length;X++){const j=T[X];if(j.time<D)continue;const Q=(j.time-D)/P,H=m.left+Q*g,te=(j.currents[w]+t*1.2)/(t*2.4),Y=m.top+(1-te)*v;X===0||j.time<=D?c.moveTo(H,Y):c.lineTo(H,Y)}c.stroke();const R=T[T.length-1],k=m.left+1*g,G=(R.currents[w]+t*1.2)/(t*2.4),F=m.top+(1-G)*v;c.fillStyle=E,c.beginPath(),c.arc(k,F,6,0,Math.PI*2),c.fill(),c.fillStyle="#fff",c.beginPath(),c.arc(k,F,3,0,Math.PI*2),c.fill()};S("a",o.a),S("b",o.b),S("c",o.c),c.strokeStyle=o.currentLine,c.lineWidth=1,c.setLineDash([5,5]),c.beginPath(),c.moveTo(f-m.right,m.top),c.lineTo(f-m.right,p-m.bottom),c.stroke(),c.setLineDash([]),c.font="12px Inter, sans-serif",c.fillStyle="rgba(255, 255, 255, 0.7)",c.textAlign="right",c.fillText(`+${t.toFixed(1)}`,m.left-10,m.top+5),c.fillText("0",m.left-10,b+4),c.fillText(`-${t.toFixed(1)}`,m.left-10,p-m.bottom),c.textAlign="center",c.fillText("t",f-m.right,p-10)},[n,e,t,r]);return ee.useEffect(()=>{l()},[l]),ee.useEffect(()=>{const u=()=>{l()};return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[l]),C.jsx("div",{className:"canvas-container",style:{height:"280px"},children:C.jsx("canvas",{ref:i,className:"w-full h-full",style:{display:"block"}})})}/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lve=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yYe=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xYe=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lie=n=>{const e=xYe(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Ye={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bYe=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SYe=ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>ee.createElement("svg",{ref:l,..._Ye,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:lve("lucide",i),...!a&&!bYe(o)&&{"aria-hidden":"true"},...o},[...s.map(([u,c])=>ee.createElement(u,c)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=(n,e)=>{const t=ee.forwardRef(({className:r,...i},a)=>ee.createElement(SYe,{ref:a,iconNode:e,className:lve(`lucide-${yYe(lie(n))}`,`lucide-${n}`,r),...i}));return t.displayName=lie(n),t};/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wYe=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],TYe=N3("arrow-right-left",wYe);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EYe=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],AYe=N3("pause",EYe);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CYe=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],MYe=N3("play",CYe);/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DYe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],IYe=N3("rotate-ccw",DYe);function uve(n,[e,t]){return Math.min(t,Math.max(e,n))}function ob(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function uie(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function cve(...n){return e=>{let t=!1;const r=n.map(i=>{const a=uie(i,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():uie(n[i],null)}}}}function Cg(...n){return ee.useCallback(cve(...n),n)}function hve(n,e=[]){let t=[];function r(a,s){const o=ee.createContext(s),l=t.length;t=[...t,s];const u=h=>{var v;const{scope:d,children:f,...p}=h,m=((v=d==null?void 0:d[n])==null?void 0:v[l])||o,g=ee.useMemo(()=>p,Object.values(p));return C.jsx(m.Provider,{value:g,children:f})};u.displayName=a+"Provider";function c(h,d){var m;const f=((m=d==null?void 0:d[n])==null?void 0:m[l])||o,p=ee.useContext(f);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,c]}const i=()=>{const a=t.map(s=>ee.createContext(s));return function(o){const l=(o==null?void 0:o[n])||a;return ee.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return i.scopeName=n,[r,PYe(i,...e)]}function PYe(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const h=l(a)[`__scope${u}`];return{...o,...h}},{});return ee.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return t.scopeName=e.scopeName,t}var dve=globalThis!=null&&globalThis.document?ee.useLayoutEffect:()=>{},LYe=_Se[" useInsertionEffect ".trim().toString()]||dve;function RYe({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,a,s]=NYe({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:i;{const c=ee.useRef(n!==void 0);ee.useEffect(()=>{const h=c.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),c.current=o},[o,r])}const u=ee.useCallback(c=>{var h;if(o){const d=kYe(c)?c(n):c;d!==n&&((h=s.current)==null||h.call(s,d))}else a(c)},[o,n,a,s]);return[l,u]}function NYe({defaultProp:n,onChange:e}){const[t,r]=ee.useState(n),i=ee.useRef(t),a=ee.useRef(e);return LYe(()=>{a.current=e},[e]),ee.useEffect(()=>{var s;i.current!==t&&((s=a.current)==null||s.call(a,t),i.current=t)},[t,i]),[t,r,a]}function kYe(n){return typeof n=="function"}var OYe=ee.createContext(void 0);function BYe(n){const e=ee.useContext(OYe);return n||e||"ltr"}function FYe(n){const e=ee.useRef({value:n,previous:n});return ee.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}function UYe(n){const[e,t]=ee.useState(void 0);return dve(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let s,o;if("borderBoxSize"in a){const l=a.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=n.offsetWidth,o=n.offsetHeight;t({width:s,height:o})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}function nV(n){const e=zYe(n),t=ee.forwardRef((r,i)=>{const{children:a,...s}=r,o=ee.Children.toArray(a),l=o.find(HYe);if(l){const u=l.props.children,c=o.map(h=>h===l?ee.Children.count(u)>1?ee.Children.only(null):ee.isValidElement(u)?u.props.children:null:h);return C.jsx(e,{...s,ref:i,children:ee.isValidElement(u)?ee.cloneElement(u,void 0,c):null})}return C.jsx(e,{...s,ref:i,children:a})});return t.displayName=`${n}.Slot`,t}function zYe(n){const e=ee.forwardRef((t,r)=>{const{children:i,...a}=t;if(ee.isValidElement(i)){const s=jYe(i),o=GYe(a,i.props);return i.type!==ee.Fragment&&(o.ref=r?cve(r,s):s),ee.cloneElement(i,o)}return ee.Children.count(i)>1?ee.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var VYe=Symbol("radix.slottable");function HYe(n){return ee.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===VYe}function GYe(n,e){const t={...e};for(const r in e){const i=n[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?t[r]=(...o)=>{const l=a(...o);return i(...o),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...a}:r==="className"&&(t[r]=[i,a].filter(Boolean).join(" "))}return{...n,...t}}function jYe(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var WYe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],I2=WYe.reduce((n,e)=>{const t=nV(`Primitive.${e}`),r=ee.forwardRef((i,a)=>{const{asChild:s,...o}=i,l=s?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(l,{...o,ref:a})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function XYe(n){const e=n+"CollectionProvider",[t,r]=hve(e),[i,a]=t(e,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:g,children:v}=m,b=st.useRef(null),S=st.useRef(new Map).current;return C.jsx(i,{scope:g,itemMap:S,collectionRef:b,children:v})};s.displayName=e;const o=n+"CollectionSlot",l=nV(o),u=st.forwardRef((m,g)=>{const{scope:v,children:b}=m,S=a(o,v),w=Cg(g,S.collectionRef);return C.jsx(l,{ref:w,children:b})});u.displayName=o;const c=n+"CollectionItemSlot",h="data-radix-collection-item",d=nV(c),f=st.forwardRef((m,g)=>{const{scope:v,children:b,...S}=m,w=st.useRef(null),E=Cg(g,w),T=a(c,v);return st.useEffect(()=>(T.itemMap.set(w,{ref:w,...S}),()=>void T.itemMap.delete(w))),C.jsx(d,{[h]:"",ref:E,children:b})});f.displayName=c;function p(m){const g=a(n+"CollectionConsumer",m);return st.useCallback(()=>{const b=g.collectionRef.current;if(!b)return[];const S=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((T,M)=>S.indexOf(T.ref.current)-S.indexOf(M.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:s,Slot:u,ItemSlot:f},p,r]}var fve=["PageUp","PageDown"],pve=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],mve={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},QS="Slider",[rV,$Ye,YYe]=XYe(QS),[gve]=hve(QS,[YYe]),[qYe,k3]=gve(QS),vve=ee.forwardRef((n,e)=>{const{name:t,min:r=0,max:i=100,step:a=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:c,onValueChange:h=()=>{},onValueCommit:d=()=>{},inverted:f=!1,form:p,...m}=n,g=ee.useRef(new Set),v=ee.useRef(0),S=s==="horizontal"?KYe:ZYe,[w=[],E]=RYe({prop:c,defaultProp:u,onChange:R=>{var k;(k=[...g.current][v.current])==null||k.focus(),h(R)}}),T=ee.useRef(w);function M(R){const B=nqe(w,R);D(R,B)}function P(R){D(R,v.current)}function I(){const R=T.current[v.current];w[v.current]!==R&&d(w)}function D(R,B,{commit:k}={commit:!1}){const V=sqe(a),G=oqe(Math.round((R-r)/a)*a+r,V),F=uve(G,[r,i]);E((X=[])=>{const j=eqe(X,F,B);if(aqe(j,l*a)){v.current=j.indexOf(F);const Q=String(j)!==String(X);return Q&&k&&d(j),Q?j:X}else return X})}return C.jsx(qYe,{scope:n.__scopeSlider,name:t,disabled:o,min:r,max:i,valueIndexToChangeRef:v,thumbs:g.current,values:w,orientation:s,form:p,children:C.jsx(rV.Provider,{scope:n.__scopeSlider,children:C.jsx(rV.Slot,{scope:n.__scopeSlider,children:C.jsx(S,{"aria-disabled":o,"data-disabled":o?"":void 0,...m,ref:e,onPointerDown:ob(m.onPointerDown,()=>{o||(T.current=w)}),min:r,max:i,inverted:f,onSlideStart:o?void 0:M,onSlideMove:o?void 0:P,onSlideEnd:o?void 0:I,onHomeKeyDown:()=>!o&&D(r,0,{commit:!0}),onEndKeyDown:()=>!o&&D(i,w.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:B})=>{if(!o){const G=fve.includes(R.key)||R.shiftKey&&pve.includes(R.key)?10:1,F=v.current,X=w[F],j=a*G*B;D(X+j,F,{commit:!0})}}})})})})});vve.displayName=QS;var[yve,xve]=gve(QS,{startEdge:"left",endEdge:"right",size:"width",direction:1}),KYe=ee.forwardRef((n,e)=>{const{min:t,max:r,dir:i,inverted:a,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...c}=n,[h,d]=ee.useState(null),f=Cg(e,S=>d(S)),p=ee.useRef(void 0),m=BYe(i),g=m==="ltr",v=g&&!a||!g&&a;function b(S){const w=p.current||h.getBoundingClientRect(),E=[0,w.width],M=aW(E,v?[t,r]:[r,t]);return p.current=w,M(S-w.left)}return C.jsx(yve,{scope:n.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:C.jsx(_ve,{dir:m,"data-orientation":"horizontal",...c,ref:f,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const w=b(S.clientX);s==null||s(w)},onSlideMove:S=>{const w=b(S.clientX);o==null||o(w)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:S=>{const E=mve[v?"from-left":"from-right"].includes(S.key);u==null||u({event:S,direction:E?-1:1})}})})}),ZYe=ee.forwardRef((n,e)=>{const{min:t,max:r,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...u}=n,c=ee.useRef(null),h=Cg(e,c),d=ee.useRef(void 0),f=!i;function p(m){const g=d.current||c.current.getBoundingClientRect(),v=[0,g.height],S=aW(v,f?[r,t]:[t,r]);return d.current=g,S(m-g.top)}return C.jsx(yve,{scope:n.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:C.jsx(_ve,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const g=p(m.clientY);a==null||a(g)},onSlideMove:m=>{const g=p(m.clientY);s==null||s(g)},onSlideEnd:()=>{d.current=void 0,o==null||o()},onStepKeyDown:m=>{const v=mve[f?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})})}),_ve=ee.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...u}=n,c=k3(QS,t);return C.jsx(I2.span,{...u,ref:e,onKeyDown:ob(n.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):fve.concat(pve).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:ob(n.onPointerDown,h=>{const d=h.target;d.setPointerCapture(h.pointerId),h.preventDefault(),c.thumbs.has(d)?d.focus():r(h)}),onPointerMove:ob(n.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:ob(n.onPointerUp,h=>{const d=h.target;d.hasPointerCapture(h.pointerId)&&(d.releasePointerCapture(h.pointerId),a(h))})})}),bve="SliderTrack",Sve=ee.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=k3(bve,t);return C.jsx(I2.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});Sve.displayName=bve;var iV="SliderRange",wve=ee.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,i=k3(iV,t),a=xve(iV,t),s=ee.useRef(null),o=Cg(e,s),l=i.values.length,u=i.values.map(d=>Ave(d,i.min,i.max)),c=l>1?Math.min(...u):0,h=100-Math.max(...u);return C.jsx(I2.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:o,style:{...n.style,[a.startEdge]:c+"%",[a.endEdge]:h+"%"}})});wve.displayName=iV;var aV="SliderThumb",Tve=ee.forwardRef((n,e)=>{const t=$Ye(n.__scopeSlider),[r,i]=ee.useState(null),a=Cg(e,o=>i(o)),s=ee.useMemo(()=>r?t().findIndex(o=>o.ref.current===r):-1,[t,r]);return C.jsx(QYe,{...n,ref:a,index:s})}),QYe=ee.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:i,...a}=n,s=k3(aV,t),o=xve(aV,t),[l,u]=ee.useState(null),c=Cg(e,b=>u(b)),h=l?s.form||!!l.closest("form"):!0,d=UYe(l),f=s.values[r],p=f===void 0?0:Ave(f,s.min,s.max),m=tqe(r,s.values.length),g=d==null?void 0:d[o.size],v=g?rqe(g,p,o.direction):0;return ee.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),C.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${p}% + ${v}px)`},children:[C.jsx(rV.ItemSlot,{scope:n.__scopeSlider,children:C.jsx(I2.span,{role:"slider","aria-label":n["aria-label"]||m,"aria-valuemin":s.min,"aria-valuenow":f,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...a,ref:c,style:f===void 0?{display:"none"}:n.style,onFocus:ob(n.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&C.jsx(Eve,{name:i??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:f},r)]})});Tve.displayName=aV;var JYe="RadioBubbleInput",Eve=ee.forwardRef(({__scopeSlider:n,value:e,...t},r)=>{const i=ee.useRef(null),a=Cg(i,r),s=FYe(e);return ee.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==e&&c){const h=new Event("input",{bubbles:!0});c.call(o,e),o.dispatchEvent(h)}},[s,e]),C.jsx(I2.input,{style:{display:"none"},...t,ref:a,defaultValue:e})});Eve.displayName=JYe;function eqe(n=[],e,t){const r=[...n];return r[t]=e,r.sort((i,a)=>i-a)}function Ave(n,e,t){const a=100/(t-e)*(n-e);return uve(a,[0,100])}function tqe(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function nqe(n,e){if(n.length===1)return 0;const t=n.map(i=>Math.abs(i-e)),r=Math.min(...t);return t.indexOf(r)}function rqe(n,e,t){const r=n/2,a=aW([0,50],[0,r]);return(r-a(e)*t)*t}function iqe(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function aqe(n,e){if(e>0){const t=iqe(n);return Math.min(...t)>=e}return!0}function aW(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function sqe(n){return(String(n).split(".")[1]||"").length}function oqe(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var lqe=vve,uqe=Sve,cqe=wve,hqe=Tve;function cie({className:n,defaultValue:e,value:t,min:r=0,max:i=100,...a}){const s=ee.useMemo(()=>Array.isArray(t)?t:Array.isArray(e)?e:[r,i],[t,e,r,i]);return C.jsxs(lqe,{"data-slot":"slider",defaultValue:e,value:t,min:r,max:i,className:DE("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),...a,children:[C.jsx(uqe,{"data-slot":"slider-track",className:DE("bg-gray-300 relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-2 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-2"),children:C.jsx(cqe,{"data-slot":"slider-range",className:DE("bg-blue-400 absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>C.jsx(hqe,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}function dqe({frequency:n,polePairs:e,amplitude:t,isPlaying:r,direction:i,onFrequencyChange:a,onPolePairsChange:s,onAmplitudeChange:o,onTogglePlay:l,onToggleDirection:u,onReset:c}){const[h,d]=ee.useState(n),[f,p]=ee.useState(t),m=[{value:1,label:"1 (2)"},{value:2,label:"2 (4)"},{value:4,label:"4 (8)"}],g=b=>{const S=b[0];d(S),a(S)},v=b=>{const S=b[0];p(S),o(S)};return C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("label",{className:"text-sm font-medium text-white/80",children:" (f)"}),C.jsxs("span",{className:"mono text-sm text-[#3b82f6] font-semibold",children:[h.toFixed(1)," Hz"]})]}),C.jsx(cie,{value:[h],onValueChange:g,min:.5,max:5,step:.1,className:"w-full"}),C.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[C.jsx("span",{children:"0.5 Hz"}),C.jsx("span",{children:"5 Hz"})]})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsx("label",{className:"text-sm font-medium text-white/80",children:" (p)"}),C.jsx("div",{className:"grid grid-cols-3 gap-2",children:m.map(b=>C.jsx("button",{onClick:()=>s(b.value),className:`
                px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                ${e===b.value?"bg-[#3b82f6] text-white shadow-lg shadow-[#3b82f6]/30":"bg-white/5 text-white/70 border border-white/10 hover:bg-white/10 hover:border-white/20"}
              `,children:b.label},b.value))})]}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex justify-between items-center",children:[C.jsx("label",{className:"text-sm font-medium text-white/80",children:" (I)"}),C.jsxs("span",{className:"mono text-sm text-[#f59e0b] font-semibold",children:[f.toFixed(1)," pu"]})]}),C.jsx(cie,{value:[f],onValueChange:v,min:.5,max:2,step:.1,className:"w-full"}),C.jsxs("div",{className:"flex justify-between text-xs text-white/50",children:[C.jsx("span",{children:"0.5"}),C.jsx("span",{children:"2.0"})]})]}),C.jsxs("div",{className:"grid grid-cols-3 gap-3 pt-2",children:[C.jsx("button",{onClick:l,className:`
            flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200
            ${r?"bg-[#ef4444]/20 text-[#ef4444] border border-[#ef4444]/50 hover:bg-[#ef4444]/30":"bg-[#22c55e]/20 text-[#22c55e] border border-[#22c55e]/50 hover:bg-[#22c55e]/30"}
          `,children:r?C.jsxs(C.Fragment,{children:[C.jsx(AYe,{className:"w-4 h-4"}),C.jsx("span",{children:""})]}):C.jsxs(C.Fragment,{children:[C.jsx(MYe,{className:"w-4 h-4"}),C.jsx("span",{children:""})]})}),C.jsxs("button",{onClick:u,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 bg-white/5 text-white/80 border border-white/10 hover:bg-white/10 hover:border-white/20",children:[C.jsx(TYe,{className:"w-4 h-4"}),C.jsx("span",{children:i===1?"":""})]}),C.jsxs("button",{onClick:c,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 bg-white/5 text-white/80 border border-white/10 hover:bg-white/10 hover:border-white/20",children:[C.jsx(IYe,{className:"w-4 h-4"}),C.jsx("span",{children:""})]})]})]})}function fqe(){const[n,e]=ee.useState(1),[t,r]=ee.useState(1),[i,a]=ee.useState(1),[s,o]=ee.useState(!0),[l,u]=ee.useState(1),[c,h]=ee.useState(0),[d,f]=ee.useState({a:0,b:0,c:0});ee.useEffect(()=>{const v=E=>{const T=2*Math.PI*n*E*l,M=T-2*Math.PI/3,P=T-4*Math.PI/3;return{a:i*Math.sin(T),b:i*Math.sin(M),c:i*Math.sin(P)}};f(v(c));let b,S=0;const w=E=>{S||(S=E);const T=(E-S)/1e3;S=E,s&&h(M=>{const P=M+T;return f(v(P)),P}),b=requestAnimationFrame(w)};return b=requestAnimationFrame(w),()=>{cancelAnimationFrame(b)}},[n,i,l,s]);const p=()=>{o(!s)},m=()=>{u(v=>v*-1)},g=()=>{h(0),o(!0)};return C.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-4 shadow-xl border border-gray-700",children:[C.jsxs("h3",{className:"text-lg font-semibold mb-3 text-white flex items-center",children:[C.jsx("i",{className:"fa-solid fa-wave-square text-blue-400 mr-2"}),""]}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("div",{className:"bg-gray-950 rounded-lg p-3 border border-gray-800",children:C.jsx(vYe,{currents:d,frequency:n,amplitude:i,currentTime:c,direction:l})}),C.jsx("div",{className:"bg-gray-850 rounded-lg p-3 border border-gray-700",children:C.jsx(dqe,{frequency:n,polePairs:t,amplitude:i,isPlaying:s,direction:l,onFrequencyChange:e,onPolePairsChange:r,onAmplitudeChange:a,onTogglePlay:p,onToggleDirection:m,onReset:g})}),C.jsxs("div",{className:"bg-gray-850/50 rounded-lg p-3 border border-gray-700/50",children:[C.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-300",children:""}),C.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[C.jsx("li",{children:" "}),C.jsx("li",{children:" "}),C.jsx("li",{children:" "}),C.jsx("li",{children:" /"}),C.jsx("li",{children:" "})]})]})]})]})}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sW="182",pqe=0,hie=1,mqe=2,UL=1,gqe=2,iE=3,Mg=0,Wo=1,Af=2,Ff=0,Sb=1,die=2,fie=3,pie=4,vqe=5,Zv=100,yqe=101,xqe=102,_qe=103,bqe=104,Sqe=200,wqe=201,Tqe=202,Eqe=203,sV=204,oV=205,Aqe=206,Cqe=207,Mqe=208,Dqe=209,Iqe=210,Pqe=211,Lqe=212,Rqe=213,Nqe=214,lV=0,uV=1,cV=2,mS=3,hV=4,dV=5,fV=6,pV=7,O3=0,kqe=1,Oqe=2,qh=0,Cve=1,Mve=2,Dve=3,Ive=4,Pve=5,Lve=6,Rve=7,mie="attached",Bqe="detached",Nve=300,Yy=301,gS=302,XN=303,mV=304,B3=306,HA=1e3,bc=1001,gV=1002,ps=1003,Fqe=1004,_P=1005,ks=1006,J5=1007,h0=1008,Ml=1009,kve=1010,Ove=1011,GA=1012,oW=1013,od=1014,Sc=1015,Jf=1016,lW=1017,uW=1018,jA=1020,Bve=35902,Fve=35899,Uve=1021,zve=1022,Iu=1023,ep=1026,d0=1027,Vve=1028,cW=1029,vS=1030,hW=1031,dW=1033,zL=33776,VL=33777,HL=33778,GL=33779,vV=35840,yV=35841,xV=35842,_V=35843,bV=36196,SV=37492,wV=37496,TV=37488,EV=37489,AV=37490,CV=37491,MV=37808,DV=37809,IV=37810,PV=37811,LV=37812,RV=37813,NV=37814,kV=37815,OV=37816,BV=37817,FV=37818,UV=37819,zV=37820,VV=37821,HV=36492,GV=36494,jV=36495,WV=36283,XV=36284,$V=36285,YV=36286,$N=2300,qV=2301,e6=2302,gie=2400,vie=2401,yie=2402,Uqe=2500,zqe=3200,fW=0,Vqe=1,rm="",si="srgb",yS="srgb-linear",YN="linear",Pr="srgb",m_=7680,xie=519,Hqe=512,Gqe=513,jqe=514,pW=515,Wqe=516,Xqe=517,mW=518,$qe=519,_ie=35044,bie="300 es",Gh=2e3,qN=2001;function Hve(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Yqe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function WA(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function qqe(){const n=WA("canvas");return n.style.display="block",n}const Sie={};function wie(...n){const e="THREE."+n.shift();console.log(e,...n)}function an(...n){const e="THREE."+n.shift();console.warn(e,...n)}function yn(...n){const e="THREE."+n.shift();console.error(e,...n)}function XA(...n){const e=n.join(" ");e in Sie||(Sie[e]=!0,an(...n))}function Kqe(n,e,t){return new Promise(function(r,i){function a(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:i();break;case n.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:r()}}setTimeout(a,t)})}class JS{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const r=t[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let a=0,s=i.length;a<s;a++)i[a].call(this,e);e.target=null}}}const ws=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Tie=1234567;const YE=Math.PI/180,xS=180/Math.PI;function Bg(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ws[n&255]+ws[n>>8&255]+ws[n>>16&255]+ws[n>>24&255]+"-"+ws[e&255]+ws[e>>8&255]+"-"+ws[e>>16&15|64]+ws[e>>24&255]+"-"+ws[t&63|128]+ws[t>>8&255]+"-"+ws[t>>16&255]+ws[t>>24&255]+ws[r&255]+ws[r>>8&255]+ws[r>>16&255]+ws[r>>24&255]).toLowerCase()}function Zn(n,e,t){return Math.max(e,Math.min(t,n))}function gW(n,e){return(n%e+e)%e}function Zqe(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function Qqe(n,e,t){return n!==e?(t-n)/(e-n):0}function qE(n,e,t){return(1-t)*n+t*e}function Jqe(n,e,t,r){return qE(n,e,1-Math.exp(-t*r))}function eKe(n,e=1){return e-Math.abs(gW(n,e*2)-e)}function tKe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function nKe(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function rKe(n,e){return n+Math.floor(Math.random()*(e-n+1))}function iKe(n,e){return n+Math.random()*(e-n)}function aKe(n){return n*(.5-Math.random())}function sKe(n){n!==void 0&&(Tie=n);let e=Tie+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function oKe(n){return n*YE}function lKe(n){return n*xS}function uKe(n){return(n&n-1)===0&&n!==0}function cKe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function hKe(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function dKe(n,e,t,r,i){const a=Math.cos,s=Math.sin,o=a(t/2),l=s(t/2),u=a((e+r)/2),c=s((e+r)/2),h=a((e-r)/2),d=s((e-r)/2),f=a((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":n.set(o*c,l*h,l*d,o*u);break;case"YZY":n.set(l*d,o*c,l*h,o*u);break;case"ZXZ":n.set(l*h,l*d,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*f,o*u);break;case"YXY":n.set(l*f,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*f,o*c,o*u);break;default:an("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function U_(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function qs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const io={DEG2RAD:YE,RAD2DEG:xS,generateUUID:Bg,clamp:Zn,euclideanModulo:gW,mapLinear:Zqe,inverseLerp:Qqe,lerp:qE,damp:Jqe,pingpong:eKe,smoothstep:tKe,smootherstep:nKe,randInt:rKe,randFloat:iKe,randFloatSpread:aKe,seededRandom:sKe,degToRad:oKe,radToDeg:lKe,isPowerOfTwo:uKe,ceilPowerOfTwo:cKe,floorPowerOfTwo:hKe,setQuaternionFromProperEuler:dKe,normalize:qs,denormalize:U_};class or{constructor(e=0,t=0){or.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Zn(this.x,e.x,t.x),this.y=Zn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Zn(this.x,e,t),this.y=Zn(this.y,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Zn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),a=this.x-e.x,s=this.y-e.y;return this.x=a*r-s*i+e.x,this.y=a*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class zo{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,a,s,o){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3],d=a[s+0],f=a[s+1],p=a[s+2],m=a[s+3];if(o<=0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(o>=1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=m;return}if(h!==m||l!==d||u!==f||c!==p){let g=l*d+u*f+c*p+h*m;g<0&&(d=-d,f=-f,p=-p,m=-m,g=-g);let v=1-o;if(g<.9995){const b=Math.acos(g),S=Math.sin(b);v=Math.sin(v*b)/S,o=Math.sin(o*b)/S,l=l*v+d*o,u=u*v+f*o,c=c*v+p*o,h=h*v+m*o}else{l=l*v+d*o,u=u*v+f*o,c=c*v+p*o,h=h*v+m*o;const b=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=b,u*=b,c*=b,h*=b}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,a,s){const o=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=a[s],d=a[s+1],f=a[s+2],p=a[s+3];return e[t]=o*p+c*h+l*f-u*d,e[t+1]=l*p+c*d+u*h-o*f,e[t+2]=u*p+c*f+o*d-l*h,e[t+3]=c*p-o*h-l*d-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const r=e._x,i=e._y,a=e._z,s=e._order,o=Math.cos,l=Math.sin,u=o(r/2),c=o(i/2),h=o(a/2),d=l(r/2),f=l(i/2),p=l(a/2);switch(s){case"XYZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"YXZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"ZXY":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"ZYX":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"YZX":this._x=d*c*h+u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h-d*f*p;break;case"XZY":this._x=d*c*h-u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h+d*f*p;break;default:an("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],a=t[8],s=t[1],o=t[5],l=t[9],u=t[2],c=t[6],h=t[10],d=r+o+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(c-l)*f,this._y=(a-u)*f,this._z=(s-i)*f}else if(r>o&&r>h){const f=2*Math.sqrt(1+r-o-h);this._w=(c-l)/f,this._x=.25*f,this._y=(i+s)/f,this._z=(a+u)/f}else if(o>h){const f=2*Math.sqrt(1+o-r-h);this._w=(a-u)/f,this._x=(i+s)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+h-r-o);this._w=(s-i)/f,this._x=(a+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,a=e._z,s=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+s*o+i*u-a*l,this._y=i*c+s*l+a*o-r*u,this._z=a*c+s*u+r*l-i*o,this._w=s*c-r*o-i*l-a*u,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let r=e._x,i=e._y,a=e._z,s=e._w,o=this.dot(e);o<0&&(r=-r,i=-i,a=-a,s=-s,o=-o);let l=1-t;if(o<.9995){const u=Math.acos(o),c=Math.sin(u);l=Math.sin(l*u)/c,t=Math.sin(t*u)/c,this._x=this._x*l+r*t,this._y=this._y*l+i*t,this._z=this._z*l+a*t,this._w=this._w*l+s*t,this._onChangeCallback()}else this._x=this._x*l+r*t,this._y=this._y*l+i*t,this._z=this._z*l+a*t,this._w=this._w*l+s*t,this.normalize();return this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),a=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Te{constructor(e=0,t=0,r=0){Te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Eie.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Eie.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[3]*r+a[6]*i,this.y=a[1]*t+a[4]*r+a[7]*i,this.z=a[2]*t+a[5]*r+a[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=e.elements,s=1/(a[3]*t+a[7]*r+a[11]*i+a[15]);return this.x=(a[0]*t+a[4]*r+a[8]*i+a[12])*s,this.y=(a[1]*t+a[5]*r+a[9]*i+a[13])*s,this.z=(a[2]*t+a[6]*r+a[10]*i+a[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,a=e.x,s=e.y,o=e.z,l=e.w,u=2*(s*i-o*r),c=2*(o*t-a*i),h=2*(a*r-s*t);return this.x=t+l*u+s*h-o*c,this.y=r+l*c+o*u-a*h,this.z=i+l*h+a*c-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i,this.y=a[1]*t+a[5]*r+a[9]*i,this.z=a[2]*t+a[6]*r+a[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Zn(this.x,e.x,t.x),this.y=Zn(this.y,e.y,t.y),this.z=Zn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Zn(this.x,e,t),this.y=Zn(this.y,e,t),this.z=Zn(this.z,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,a=e.z,s=t.x,o=t.y,l=t.z;return this.x=i*l-a*o,this.y=a*s-r*l,this.z=r*o-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return t6.copy(this).projectOnVector(e),this.sub(t6)}reflect(e){return this.sub(t6.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Zn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const t6=new Te,Eie=new zo;class Nn{constructor(e,t,r,i,a,s,o,l,u){Nn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u)}set(e,t,r,i,a,s,o,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=o,c[3]=t,c[4]=a,c[5]=l,c[6]=r,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[3],l=r[6],u=r[1],c=r[4],h=r[7],d=r[2],f=r[5],p=r[8],m=i[0],g=i[3],v=i[6],b=i[1],S=i[4],w=i[7],E=i[2],T=i[5],M=i[8];return a[0]=s*m+o*b+l*E,a[3]=s*g+o*S+l*T,a[6]=s*v+o*w+l*M,a[1]=u*m+c*b+h*E,a[4]=u*g+c*S+h*T,a[7]=u*v+c*w+h*M,a[2]=d*m+f*b+p*E,a[5]=d*g+f*S+p*T,a[8]=d*v+f*w+p*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*s*c-t*o*u-r*a*c+r*o*l+i*a*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=c*s-o*u,d=o*l-c*a,f=u*a-s*l,p=t*h+r*d+i*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=h*m,e[1]=(i*u-c*r)*m,e[2]=(o*r-i*s)*m,e[3]=d*m,e[4]=(c*t-i*l)*m,e[5]=(i*a-o*t)*m,e[6]=f*m,e[7]=(r*l-u*t)*m,e[8]=(s*t-r*a)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,a,s,o){const l=Math.cos(a),u=Math.sin(a);return this.set(r*l,r*u,-r*(l*s+u*o)+s+e,-i*u,i*l,-i*(-u*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(n6.makeScale(e,t)),this}rotate(e){return this.premultiply(n6.makeRotation(-e)),this}translate(e,t){return this.premultiply(n6.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const n6=new Nn,Aie=new Nn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Cie=new Nn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function fKe(){const n={enabled:!0,workingColorSpace:yS,spaces:{},convert:function(i,a,s){return this.enabled===!1||a===s||!a||!s||(this.spaces[a].transfer===Pr&&(i.r=Uf(i.r),i.g=Uf(i.g),i.b=Uf(i.b)),this.spaces[a].primaries!==this.spaces[s].primaries&&(i.applyMatrix3(this.spaces[a].toXYZ),i.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Pr&&(i.r=wb(i.r),i.g=wb(i.g),i.b=wb(i.b))),i},workingToColorSpace:function(i,a){return this.convert(i,this.workingColorSpace,a)},colorSpaceToWorking:function(i,a){return this.convert(i,a,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===rm?YN:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,a=this.workingColorSpace){return i.fromArray(this.spaces[a].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,a,s){return i.copy(this.spaces[a].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,a){return XA("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(i,a)},toWorkingColorSpace:function(i,a){return XA("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(i,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],r=[.3127,.329];return n.define({[yS]:{primaries:e,whitePoint:r,transfer:YN,toXYZ:Aie,fromXYZ:Cie,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:si},outputColorSpaceConfig:{drawingBufferColorSpace:si}},[si]:{primaries:e,whitePoint:r,transfer:Pr,toXYZ:Aie,fromXYZ:Cie,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:si}}}),n}const Fn=fKe();function Uf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function wb(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let g_;class pKe{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{g_===void 0&&(g_=WA("canvas")),g_.width=e.width,g_.height=e.height;const i=g_.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=g_}return r.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=WA("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),a=i.data;for(let s=0;s<a.length;s++)a[s]=Uf(a[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Uf(t[r]/255)*255):t[r]=Uf(t[r]);return{data:t,width:e.width,height:e.height}}else return an("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let mKe=0;class vW{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mKe++}),this.uuid=Bg(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let a;if(Array.isArray(i)){a=[];for(let s=0,o=i.length;s<o;s++)i[s].isDataTexture?a.push(r6(i[s].image)):a.push(r6(i[s]))}else a=r6(i);r.url=a}return t||(e.images[this.uuid]=r),r}}function r6(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?pKe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(an("Texture: Unable to serialize Texture."),{})}let gKe=0;const i6=new Te;class ms extends JS{constructor(e=ms.DEFAULT_IMAGE,t=ms.DEFAULT_MAPPING,r=bc,i=bc,a=ks,s=h0,o=Iu,l=Ml,u=ms.DEFAULT_ANISOTROPY,c=rm){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gKe++}),this.uuid=Bg(),this.name="",this.source=new vW(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=a,this.minFilter=s,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new or(0,0),this.repeat=new or(1,1),this.center=new or(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(i6).x}get height(){return this.source.getSize(i6).y}get depth(){return this.source.getSize(i6).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const r=e[t];if(r===void 0){an(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){an(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Nve)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case HA:e.x=e.x-Math.floor(e.x);break;case bc:e.x=e.x<0?0:1;break;case gV:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case HA:e.y=e.y-Math.floor(e.y);break;case bc:e.y=e.y<0?0:1;break;case gV:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ms.DEFAULT_IMAGE=null;ms.DEFAULT_MAPPING=Nve;ms.DEFAULT_ANISOTROPY=1;class Tr{constructor(e=0,t=0,r=0,i=1){Tr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,a=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*a,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*a,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*a,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,a;const l=e.elements,u=l[0],c=l[4],h=l[8],d=l[1],f=l[5],p=l[9],m=l[2],g=l[6],v=l[10];if(Math.abs(c-d)<.01&&Math.abs(h-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+d)<.1&&Math.abs(h+m)<.1&&Math.abs(p+g)<.1&&Math.abs(u+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,w=(f+1)/2,E=(v+1)/2,T=(c+d)/4,M=(h+m)/4,P=(p+g)/4;return S>w&&S>E?S<.01?(r=0,i=.707106781,a=.707106781):(r=Math.sqrt(S),i=T/r,a=M/r):w>E?w<.01?(r=.707106781,i=0,a=.707106781):(i=Math.sqrt(w),r=T/i,a=P/i):E<.01?(r=.707106781,i=.707106781,a=0):(a=Math.sqrt(E),r=M/a,i=P/a),this.set(r,i,a,t),this}let b=Math.sqrt((g-p)*(g-p)+(h-m)*(h-m)+(d-c)*(d-c));return Math.abs(b)<.001&&(b=1),this.x=(g-p)/b,this.y=(h-m)/b,this.z=(d-c)/b,this.w=Math.acos((u+f+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Zn(this.x,e.x,t.x),this.y=Zn(this.y,e.y,t.y),this.z=Zn(this.z,e.z,t.z),this.w=Zn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Zn(this.x,e,t),this.y=Zn(this.y,e,t),this.z=Zn(this.z,e,t),this.w=Zn(this.w,e,t),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Zn(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class vKe extends JS{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ks,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new Tr(0,0,e,t),this.scissorTest=!1,this.viewport=new Tr(0,0,e,t);const i={width:e,height:t,depth:r.depth},a=new ms(i);this.textures=[];const s=r.count;for(let o=0;o<s;o++)this.textures[o]=a.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const t={minFilter:ks,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,a=this.textures.length;i<a;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new vW(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Kh extends vKe{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class Gve extends ms{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ps,this.minFilter=ps,this.wrapR=bc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class yKe extends ms{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ps,this.minFilter=ps,this.wrapR=bc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ew{constructor(e=new Te(1/0,1/0,1/0),t=new Te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(qu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(qu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=qu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const a=r.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let s=0,o=a.count;s<o;s++)e.isMesh===!0?e.getVertexPosition(s,qu):qu.fromBufferAttribute(a,s),qu.applyMatrix4(e.matrixWorld),this.expandByPoint(qu);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bP.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),bP.copy(r.boundingBox)),bP.applyMatrix4(e.matrixWorld),this.union(bP)}const i=e.children;for(let a=0,s=i.length;a<s;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,qu),qu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(AT),SP.subVectors(this.max,AT),v_.subVectors(e.a,AT),y_.subVectors(e.b,AT),x_.subVectors(e.c,AT),zp.subVectors(y_,v_),Vp.subVectors(x_,y_),Dv.subVectors(v_,x_);let t=[0,-zp.z,zp.y,0,-Vp.z,Vp.y,0,-Dv.z,Dv.y,zp.z,0,-zp.x,Vp.z,0,-Vp.x,Dv.z,0,-Dv.x,-zp.y,zp.x,0,-Vp.y,Vp.x,0,-Dv.y,Dv.x,0];return!a6(t,v_,y_,x_,SP)||(t=[1,0,0,0,1,0,0,0,1],!a6(t,v_,y_,x_,SP))?!1:(wP.crossVectors(zp,Vp),t=[wP.x,wP.y,wP.z],a6(t,v_,y_,x_,SP))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,qu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(qu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Dd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Dd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Dd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Dd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Dd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Dd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Dd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Dd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Dd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Dd=[new Te,new Te,new Te,new Te,new Te,new Te,new Te,new Te],qu=new Te,bP=new ew,v_=new Te,y_=new Te,x_=new Te,zp=new Te,Vp=new Te,Dv=new Te,AT=new Te,SP=new Te,wP=new Te,Iv=new Te;function a6(n,e,t,r,i){for(let a=0,s=n.length-3;a<=s;a+=3){Iv.fromArray(n,a);const o=i.x*Math.abs(Iv.x)+i.y*Math.abs(Iv.y)+i.z*Math.abs(Iv.z),l=e.dot(Iv),u=t.dot(Iv),c=r.dot(Iv);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const xKe=new ew,CT=new Te,s6=new Te;class tw{constructor(e=new Te,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):xKe.setFromPoints(e).getCenter(r);let i=0;for(let a=0,s=e.length;a<s;a++)i=Math.max(i,r.distanceToSquared(e[a]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;CT.subVectors(e,this.center);const t=CT.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(CT,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(s6.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(CT.copy(e.center).add(s6)),this.expandByPoint(CT.copy(e.center).sub(s6))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Id=new Te,o6=new Te,TP=new Te,Hp=new Te,l6=new Te,EP=new Te,u6=new Te;class yW{constructor(e=new Te,t=new Te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Id)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Id.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Id.copy(this.origin).addScaledVector(this.direction,t),Id.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){o6.copy(e).add(t).multiplyScalar(.5),TP.copy(t).sub(e).normalize(),Hp.copy(this.origin).sub(o6);const a=e.distanceTo(t)*.5,s=-this.direction.dot(TP),o=Hp.dot(this.direction),l=-Hp.dot(TP),u=Hp.lengthSq(),c=Math.abs(1-s*s);let h,d,f,p;if(c>0)if(h=s*l-o,d=s*o-l,p=a*c,h>=0)if(d>=-p)if(d<=p){const m=1/c;h*=m,d*=m,f=h*(h+s*d+2*o)+d*(s*h+d+2*l)+u}else d=a,h=Math.max(0,-(s*d+o)),f=-h*h+d*(d+2*l)+u;else d=-a,h=Math.max(0,-(s*d+o)),f=-h*h+d*(d+2*l)+u;else d<=-p?(h=Math.max(0,-(-s*a+o)),d=h>0?-a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+u):d<=p?(h=0,d=Math.min(Math.max(-a,-l),a),f=d*(d+2*l)+u):(h=Math.max(0,-(s*a+o)),d=h>0?a:Math.min(Math.max(-a,-l),a),f=-h*h+d*(d+2*l)+u);else d=s>0?-a:a,h=Math.max(0,-(s*d+o)),f=-h*h+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(o6).addScaledVector(TP,d),f}intersectSphere(e,t){Id.subVectors(e.center,this.origin);const r=Id.dot(this.direction),i=Id.dot(Id)-r*r,a=e.radius*e.radius;if(i>a)return null;const s=Math.sqrt(a-i),o=r-s,l=r+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,a,s,o,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(a=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(a=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),r>s||a>i||((a>r||isNaN(r))&&(r=a),(s<i||isNaN(i))&&(i=s),h>=0?(o=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(o=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||o>i)||((o>r||r!==r)&&(r=o),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Id)!==null}intersectTriangle(e,t,r,i,a){l6.subVectors(t,e),EP.subVectors(r,e),u6.crossVectors(l6,EP);let s=this.direction.dot(u6),o;if(s>0){if(i)return null;o=1}else if(s<0)o=-1,s=-s;else return null;Hp.subVectors(this.origin,e);const l=o*this.direction.dot(EP.crossVectors(Hp,EP));if(l<0)return null;const u=o*this.direction.dot(l6.cross(Hp));if(u<0||l+u>s)return null;const c=-o*Hp.dot(u6);return c<0?null:this.at(c/s,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rn{constructor(e,t,r,i,a,s,o,l,u,c,h,d,f,p,m,g){rn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,a,s,o,l,u,c,h,d,f,p,m,g)}set(e,t,r,i,a,s,o,l,u,c,h,d,f,p,m,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=a,v[5]=s,v[9]=o,v[13]=l,v[2]=u,v[6]=c,v[10]=h,v[14]=d,v[3]=f,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),r.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this)}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,r=e.elements,i=1/__.setFromMatrixColumn(e,0).length(),a=1/__.setFromMatrixColumn(e,1).length(),s=1/__.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,a=e.z,s=Math.cos(r),o=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a);if(e.order==="XYZ"){const d=s*c,f=s*h,p=o*c,m=o*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=f+p*u,t[5]=d-m*u,t[9]=-o*l,t[2]=m-d*u,t[6]=p+f*u,t[10]=s*l}else if(e.order==="YXZ"){const d=l*c,f=l*h,p=u*c,m=u*h;t[0]=d+m*o,t[4]=p*o-f,t[8]=s*u,t[1]=s*h,t[5]=s*c,t[9]=-o,t[2]=f*o-p,t[6]=m+d*o,t[10]=s*l}else if(e.order==="ZXY"){const d=l*c,f=l*h,p=u*c,m=u*h;t[0]=d-m*o,t[4]=-s*h,t[8]=p+f*o,t[1]=f+p*o,t[5]=s*c,t[9]=m-d*o,t[2]=-s*u,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const d=s*c,f=s*h,p=o*c,m=o*h;t[0]=l*c,t[4]=p*u-f,t[8]=d*u+m,t[1]=l*h,t[5]=m*u+d,t[9]=f*u-p,t[2]=-u,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const d=s*l,f=s*u,p=o*l,m=o*u;t[0]=l*c,t[4]=m-d*h,t[8]=p*h+f,t[1]=h,t[5]=s*c,t[9]=-o*c,t[2]=-u*c,t[6]=f*h+p,t[10]=d-m*h}else if(e.order==="XZY"){const d=s*l,f=s*u,p=o*l,m=o*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=d*h+m,t[5]=s*c,t[9]=f*h-p,t[2]=p*h-f,t[6]=o*c,t[10]=m*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_Ke,e,bKe)}lookAt(e,t,r){const i=this.elements;return Jo.subVectors(e,t),Jo.lengthSq()===0&&(Jo.z=1),Jo.normalize(),Gp.crossVectors(r,Jo),Gp.lengthSq()===0&&(Math.abs(r.z)===1?Jo.x+=1e-4:Jo.z+=1e-4,Jo.normalize(),Gp.crossVectors(r,Jo)),Gp.normalize(),AP.crossVectors(Jo,Gp),i[0]=Gp.x,i[4]=AP.x,i[8]=Jo.x,i[1]=Gp.y,i[5]=AP.y,i[9]=Jo.y,i[2]=Gp.z,i[6]=AP.z,i[10]=Jo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,a=this.elements,s=r[0],o=r[4],l=r[8],u=r[12],c=r[1],h=r[5],d=r[9],f=r[13],p=r[2],m=r[6],g=r[10],v=r[14],b=r[3],S=r[7],w=r[11],E=r[15],T=i[0],M=i[4],P=i[8],I=i[12],D=i[1],R=i[5],B=i[9],k=i[13],V=i[2],G=i[6],F=i[10],X=i[14],j=i[3],Q=i[7],H=i[11],K=i[15];return a[0]=s*T+o*D+l*V+u*j,a[4]=s*M+o*R+l*G+u*Q,a[8]=s*P+o*B+l*F+u*H,a[12]=s*I+o*k+l*X+u*K,a[1]=c*T+h*D+d*V+f*j,a[5]=c*M+h*R+d*G+f*Q,a[9]=c*P+h*B+d*F+f*H,a[13]=c*I+h*k+d*X+f*K,a[2]=p*T+m*D+g*V+v*j,a[6]=p*M+m*R+g*G+v*Q,a[10]=p*P+m*B+g*F+v*H,a[14]=p*I+m*k+g*X+v*K,a[3]=b*T+S*D+w*V+E*j,a[7]=b*M+S*R+w*G+E*Q,a[11]=b*P+S*B+w*F+E*H,a[15]=b*I+S*k+w*X+E*K,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],a=e[12],s=e[1],o=e[5],l=e[9],u=e[13],c=e[2],h=e[6],d=e[10],f=e[14],p=e[3],m=e[7],g=e[11],v=e[15],b=l*f-u*d,S=o*f-u*h,w=o*d-l*h,E=s*f-u*c,T=s*d-l*c,M=s*h-o*c;return t*(m*b-g*S+v*w)-r*(p*b-g*E+v*T)+i*(p*S-m*E+v*M)-a*(p*w-m*T+g*M)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],a=e[3],s=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],m=e[13],g=e[14],v=e[15],b=h*g*u-m*d*u+m*l*f-o*g*f-h*l*v+o*d*v,S=p*d*u-c*g*u-p*l*f+s*g*f+c*l*v-s*d*v,w=c*m*u-p*h*u+p*o*f-s*m*f-c*o*v+s*h*v,E=p*h*l-c*m*l-p*o*d+s*m*d+c*o*g-s*h*g,T=t*b+r*S+i*w+a*E;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/T;return e[0]=b*M,e[1]=(m*d*a-h*g*a-m*i*f+r*g*f+h*i*v-r*d*v)*M,e[2]=(o*g*a-m*l*a+m*i*u-r*g*u-o*i*v+r*l*v)*M,e[3]=(h*l*a-o*d*a-h*i*u+r*d*u+o*i*f-r*l*f)*M,e[4]=S*M,e[5]=(c*g*a-p*d*a+p*i*f-t*g*f-c*i*v+t*d*v)*M,e[6]=(p*l*a-s*g*a-p*i*u+t*g*u+s*i*v-t*l*v)*M,e[7]=(s*d*a-c*l*a+c*i*u-t*d*u-s*i*f+t*l*f)*M,e[8]=w*M,e[9]=(p*h*a-c*m*a-p*r*f+t*m*f+c*r*v-t*h*v)*M,e[10]=(s*m*a-p*o*a+p*r*u-t*m*u-s*r*v+t*o*v)*M,e[11]=(c*o*a-s*h*a-c*r*u+t*h*u+s*r*f-t*o*f)*M,e[12]=E*M,e[13]=(c*m*i-p*h*i+p*r*d-t*m*d-c*r*g+t*h*g)*M,e[14]=(p*o*i-s*m*i-p*r*l+t*m*l+s*r*g-t*o*g)*M,e[15]=(s*h*i-c*o*i+c*r*l-t*h*l-s*r*d+t*o*d)*M,this}scale(e){const t=this.elements,r=e.x,i=e.y,a=e.z;return t[0]*=r,t[4]*=i,t[8]*=a,t[1]*=r,t[5]*=i,t[9]*=a,t[2]*=r,t[6]*=i,t[10]*=a,t[3]*=r,t[7]*=i,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),a=1-r,s=e.x,o=e.y,l=e.z,u=a*s,c=a*o;return this.set(u*s+r,u*o-i*l,u*l+i*o,0,u*o+i*l,c*o+r,c*l-i*s,0,u*l-i*o,c*l+i*s,a*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,a,s){return this.set(1,r,a,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,a=t._x,s=t._y,o=t._z,l=t._w,u=a+a,c=s+s,h=o+o,d=a*u,f=a*c,p=a*h,m=s*c,g=s*h,v=o*h,b=l*u,S=l*c,w=l*h,E=r.x,T=r.y,M=r.z;return i[0]=(1-(m+v))*E,i[1]=(f+w)*E,i[2]=(p-S)*E,i[3]=0,i[4]=(f-w)*T,i[5]=(1-(d+v))*T,i[6]=(g+b)*T,i[7]=0,i[8]=(p+S)*M,i[9]=(g-b)*M,i[10]=(1-(d+m))*M,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;if(e.x=i[12],e.y=i[13],e.z=i[14],this.determinant()===0)return r.set(1,1,1),t.identity(),this;let a=__.set(i[0],i[1],i[2]).length();const s=__.set(i[4],i[5],i[6]).length(),o=__.set(i[8],i[9],i[10]).length();this.determinant()<0&&(a=-a),Ku.copy(this);const u=1/a,c=1/s,h=1/o;return Ku.elements[0]*=u,Ku.elements[1]*=u,Ku.elements[2]*=u,Ku.elements[4]*=c,Ku.elements[5]*=c,Ku.elements[6]*=c,Ku.elements[8]*=h,Ku.elements[9]*=h,Ku.elements[10]*=h,t.setFromRotationMatrix(Ku),r.x=a,r.y=s,r.z=o,this}makePerspective(e,t,r,i,a,s,o=Gh,l=!1){const u=this.elements,c=2*a/(t-e),h=2*a/(r-i),d=(t+e)/(t-e),f=(r+i)/(r-i);let p,m;if(l)p=a/(s-a),m=s*a/(s-a);else if(o===Gh)p=-(s+a)/(s-a),m=-2*s*a/(s-a);else if(o===qN)p=-s/(s-a),m=-s*a/(s-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=d,u[12]=0,u[1]=0,u[5]=h,u[9]=f,u[13]=0,u[2]=0,u[6]=0,u[10]=p,u[14]=m,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,r,i,a,s,o=Gh,l=!1){const u=this.elements,c=2/(t-e),h=2/(r-i),d=-(t+e)/(t-e),f=-(r+i)/(r-i);let p,m;if(l)p=1/(s-a),m=s/(s-a);else if(o===Gh)p=-2/(s-a),m=-(s+a)/(s-a);else if(o===qN)p=-1/(s-a),m=-a/(s-a);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=0,u[12]=d,u[1]=0,u[5]=h,u[9]=0,u[13]=f,u[2]=0,u[6]=0,u[10]=p,u[14]=m,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const __=new Te,Ku=new rn,_Ke=new Te(0,0,0),bKe=new Te(1,1,1),Gp=new Te,AP=new Te,Jo=new Te,Mie=new rn,Die=new zo;class Xa{constructor(e=0,t=0,r=0,i=Xa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,a=i[0],s=i[4],o=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(Zn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Zn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(Zn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-Zn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Zn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Zn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,f),this._y=0);break;default:an("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return Mie.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Mie,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Die.setFromEuler(this),this.setFromQuaternion(Die,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Xa.DEFAULT_ORDER="XYZ";class jve{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let SKe=0;const Iie=new Te,b_=new zo,Pd=new rn,CP=new Te,MT=new Te,wKe=new Te,TKe=new zo,Pie=new Te(1,0,0),Lie=new Te(0,1,0),Rie=new Te(0,0,1),Nie={type:"added"},EKe={type:"removed"},S_={type:"childadded",child:null},c6={type:"childremoved",child:null};class pi extends JS{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:SKe++}),this.uuid=Bg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=pi.DEFAULT_UP.clone();const e=new Te,t=new Xa,r=new zo,i=new Te(1,1,1);function a(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(a),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new rn},normalMatrix:{value:new Nn}}),this.matrix=new rn,this.matrixWorld=new rn,this.matrixAutoUpdate=pi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=pi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new jve,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return b_.setFromAxisAngle(e,t),this.quaternion.multiply(b_),this}rotateOnWorldAxis(e,t){return b_.setFromAxisAngle(e,t),this.quaternion.premultiply(b_),this}rotateX(e){return this.rotateOnAxis(Pie,e)}rotateY(e){return this.rotateOnAxis(Lie,e)}rotateZ(e){return this.rotateOnAxis(Rie,e)}translateOnAxis(e,t){return Iie.copy(e).applyQuaternion(this.quaternion),this.position.add(Iie.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Pie,e)}translateY(e){return this.translateOnAxis(Lie,e)}translateZ(e){return this.translateOnAxis(Rie,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pd.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?CP.copy(e):CP.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),MT.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pd.lookAt(MT,CP,this.up):Pd.lookAt(CP,MT,this.up),this.quaternion.setFromRotationMatrix(Pd),i&&(Pd.extractRotation(i.matrixWorld),b_.setFromRotationMatrix(Pd),this.quaternion.premultiply(b_.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(yn("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Nie),S_.child=e,this.dispatchEvent(S_),S_.child=null):yn("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(EKe),c6.child=e,this.dispatchEvent(c6),c6.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Pd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pd.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Nie),S_.child=e,this.dispatchEvent(S_),S_.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(MT,e,wKe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(MT,TKe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let a=0,s=i.length;a<s;a++)i[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(o=>({...o})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function a(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=a(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];a(e.shapes,h)}else a(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(a(e.materials,this.material[l]));i.material=o}else i.material=a(e.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];i.animations.push(a(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),u=s(e.textures),c=s(e.images),h=s(e.shapes),d=s(e.skeletons),f=s(e.animations),p=s(e.nodes);o.length>0&&(r.geometries=o),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function s(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}pi.DEFAULT_UP=new Te(0,1,0);pi.DEFAULT_MATRIX_AUTO_UPDATE=!0;pi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Zu=new Te,Ld=new Te,h6=new Te,Rd=new Te,w_=new Te,T_=new Te,kie=new Te,d6=new Te,f6=new Te,p6=new Te,m6=new Tr,g6=new Tr,v6=new Tr;class xc{constructor(e=new Te,t=new Te,r=new Te){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Zu.subVectors(e,t),i.cross(Zu);const a=i.lengthSq();return a>0?i.multiplyScalar(1/Math.sqrt(a)):i.set(0,0,0)}static getBarycoord(e,t,r,i,a){Zu.subVectors(i,t),Ld.subVectors(r,t),h6.subVectors(e,t);const s=Zu.dot(Zu),o=Zu.dot(Ld),l=Zu.dot(h6),u=Ld.dot(Ld),c=Ld.dot(h6),h=s*u-o*o;if(h===0)return a.set(0,0,0),null;const d=1/h,f=(u*l-o*c)*d,p=(s*c-o*l)*d;return a.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Rd)===null?!1:Rd.x>=0&&Rd.y>=0&&Rd.x+Rd.y<=1}static getInterpolation(e,t,r,i,a,s,o,l){return this.getBarycoord(e,t,r,i,Rd)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(a,Rd.x),l.addScaledVector(s,Rd.y),l.addScaledVector(o,Rd.z),l)}static getInterpolatedAttribute(e,t,r,i,a,s){return m6.setScalar(0),g6.setScalar(0),v6.setScalar(0),m6.fromBufferAttribute(e,t),g6.fromBufferAttribute(e,r),v6.fromBufferAttribute(e,i),s.setScalar(0),s.addScaledVector(m6,a.x),s.addScaledVector(g6,a.y),s.addScaledVector(v6,a.z),s}static isFrontFacing(e,t,r,i){return Zu.subVectors(r,t),Ld.subVectors(e,t),Zu.cross(Ld).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zu.subVectors(this.c,this.b),Ld.subVectors(this.a,this.b),Zu.cross(Ld).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,a){return xc.getInterpolation(e,this.a,this.b,this.c,t,r,i,a)}containsPoint(e){return xc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,a=this.c;let s,o;w_.subVectors(i,r),T_.subVectors(a,r),d6.subVectors(e,r);const l=w_.dot(d6),u=T_.dot(d6);if(l<=0&&u<=0)return t.copy(r);f6.subVectors(e,i);const c=w_.dot(f6),h=T_.dot(f6);if(c>=0&&h<=c)return t.copy(i);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return s=l/(l-c),t.copy(r).addScaledVector(w_,s);p6.subVectors(e,a);const f=w_.dot(p6),p=T_.dot(p6);if(p>=0&&f<=p)return t.copy(a);const m=f*u-l*p;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(r).addScaledVector(T_,o);const g=c*p-f*h;if(g<=0&&h-c>=0&&f-p>=0)return kie.subVectors(a,i),o=(h-c)/(h-c+(f-p)),t.copy(i).addScaledVector(kie,o);const v=1/(g+m+d);return s=m*v,o=d*v,t.copy(r).addScaledVector(w_,s).addScaledVector(T_,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Wve={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},jp={h:0,s:0,l:0},MP={h:0,s:0,l:0};function y6(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Tn{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=si){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fn.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=Fn.workingColorSpace){return this.r=e,this.g=t,this.b=r,Fn.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=Fn.workingColorSpace){if(e=gW(e,1),t=Zn(t,0,1),r=Zn(r,0,1),t===0)this.r=this.g=this.b=r;else{const a=r<=.5?r*(1+t):r+t-r*t,s=2*r-a;this.r=y6(s,a,e+1/3),this.g=y6(s,a,e),this.b=y6(s,a,e-1/3)}return Fn.colorSpaceToWorking(this,i),this}setStyle(e,t=si){function r(a){a!==void 0&&parseFloat(a)<1&&an("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:an("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=i[1],s=a.length;if(s===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(a,16),t);an("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=si){const r=Wve[e.toLowerCase()];return r!==void 0?this.setHex(r,t):an("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Uf(e.r),this.g=Uf(e.g),this.b=Uf(e.b),this}copyLinearToSRGB(e){return this.r=wb(e.r),this.g=wb(e.g),this.b=wb(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=si){return Fn.workingToColorSpace(Ts.copy(this),e),Math.round(Zn(Ts.r*255,0,255))*65536+Math.round(Zn(Ts.g*255,0,255))*256+Math.round(Zn(Ts.b*255,0,255))}getHexString(e=si){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Fn.workingColorSpace){Fn.workingToColorSpace(Ts.copy(this),t);const r=Ts.r,i=Ts.g,a=Ts.b,s=Math.max(r,i,a),o=Math.min(r,i,a);let l,u;const c=(o+s)/2;if(o===s)l=0,u=0;else{const h=s-o;switch(u=c<=.5?h/(s+o):h/(2-s-o),s){case r:l=(i-a)/h+(i<a?6:0);break;case i:l=(a-r)/h+2;break;case a:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Fn.workingColorSpace){return Fn.workingToColorSpace(Ts.copy(this),t),e.r=Ts.r,e.g=Ts.g,e.b=Ts.b,e}getStyle(e=si){Fn.workingToColorSpace(Ts.copy(this),e);const t=Ts.r,r=Ts.g,i=Ts.b;return e!==si?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(jp),this.setHSL(jp.h+e,jp.s+t,jp.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(jp),e.getHSL(MP);const r=qE(jp.h,MP.h,t),i=qE(jp.s,MP.s,t),a=qE(jp.l,MP.l,t);return this.setHSL(r,i,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,a=e.elements;return this.r=a[0]*t+a[3]*r+a[6]*i,this.g=a[1]*t+a[4]*r+a[7]*i,this.b=a[2]*t+a[5]*r+a[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ts=new Tn;Tn.NAMES=Wve;let AKe=0;class Fg extends JS{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:AKe++}),this.uuid=Bg(),this.name="",this.type="Material",this.blending=Sb,this.side=Mg,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sV,this.blendDst=oV,this.blendEquation=Zv,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tn(0,0,0),this.blendAlpha=0,this.depthFunc=mS,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xie,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=m_,this.stencilZFail=m_,this.stencilZPass=m_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){an(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){an(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Sb&&(r.blending=this.blending),this.side!==Mg&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==sV&&(r.blendSrc=this.blendSrc),this.blendDst!==oV&&(r.blendDst=this.blendDst),this.blendEquation!==Zv&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==mS&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==xie&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==m_&&(r.stencilFail=this.stencilFail),this.stencilZFail!==m_&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==m_&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.allowOverride===!1&&(r.allowOverride=!1),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(a){const s=[];for(const o in a){const l=a[o];delete l.metadata,s.push(l)}return s}if(t){const a=i(e.textures),s=i(e.images);a.length>0&&(r.textures=a),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let a=0;a!==i;++a)r[a]=t[a].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Xve extends Fg{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Tn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xa,this.combine=O3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ta=new Te,DP=new or;let CKe=0;class Zh{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:CKe++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=_ie,this.updateRanges=[],this.gpuType=Sc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,a=this.itemSize;i<a;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)DP.fromBufferAttribute(this,t),DP.applyMatrix3(e),this.setXY(t,DP.x,DP.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix3(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix4(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ta.fromBufferAttribute(this,t),ta.applyNormalMatrix(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ta.fromBufferAttribute(this,t),ta.transformDirection(e),this.setXYZ(t,ta.x,ta.y,ta.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=U_(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=qs(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=U_(t,this.array)),t}setX(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=U_(t,this.array)),t}setY(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=U_(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=U_(t,this.array)),t}setW(e,t){return this.normalized&&(t=qs(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),r=qs(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),r=qs(r,this.array),i=qs(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,a){return e*=this.itemSize,this.normalized&&(t=qs(t,this.array),r=qs(r,this.array),i=qs(i,this.array),a=qs(a,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==_ie&&(e.usage=this.usage),e}}class xW extends Zh{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class $ve extends Zh{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class Rs extends Zh{constructor(e,t,r){super(new Float32Array(e),t,r)}}let MKe=0;const Kl=new rn,x6=new pi,E_=new Te,el=new ew,DT=new ew,ka=new Te;class Nl extends JS{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:MKe++}),this.uuid=Bg(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Hve(e)?$ve:xW)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const a=new Nn().getNormalMatrix(e);r.applyNormalMatrix(a),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Kl.makeRotationFromQuaternion(e),this.applyMatrix4(Kl),this}rotateX(e){return Kl.makeRotationX(e),this.applyMatrix4(Kl),this}rotateY(e){return Kl.makeRotationY(e),this.applyMatrix4(Kl),this}rotateZ(e){return Kl.makeRotationZ(e),this.applyMatrix4(Kl),this}translate(e,t,r){return Kl.makeTranslation(e,t,r),this.applyMatrix4(Kl),this}scale(e,t,r){return Kl.makeScale(e,t,r),this.applyMatrix4(Kl),this}lookAt(e){return x6.lookAt(e),x6.updateMatrix(),this.applyMatrix4(x6.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(E_).negate(),this.translate(E_.x,E_.y,E_.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const r=[];for(let i=0,a=e.length;i<a;i++){const s=e[i];r.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Rs(r,3))}else{const r=Math.min(e.length,t.count);for(let i=0;i<r;i++){const a=e[i];t.setXYZ(i,a.x,a.y,a.z||0)}e.length>t.count&&an("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ew);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){yn("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Te(-1/0,-1/0,-1/0),new Te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const a=t[r];el.setFromBufferAttribute(a),this.morphTargetsRelative?(ka.addVectors(this.boundingBox.min,el.min),this.boundingBox.expandByPoint(ka),ka.addVectors(this.boundingBox.max,el.max),this.boundingBox.expandByPoint(ka)):(this.boundingBox.expandByPoint(el.min),this.boundingBox.expandByPoint(el.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&yn('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new tw);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){yn("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Te,1/0);return}if(e){const r=this.boundingSphere.center;if(el.setFromBufferAttribute(e),t)for(let a=0,s=t.length;a<s;a++){const o=t[a];DT.setFromBufferAttribute(o),this.morphTargetsRelative?(ka.addVectors(el.min,DT.min),el.expandByPoint(ka),ka.addVectors(el.max,DT.max),el.expandByPoint(ka)):(el.expandByPoint(DT.min),el.expandByPoint(DT.max))}el.getCenter(r);let i=0;for(let a=0,s=e.count;a<s;a++)ka.fromBufferAttribute(e,a),i=Math.max(i,r.distanceToSquared(ka));if(t)for(let a=0,s=t.length;a<s;a++){const o=t[a],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)ka.fromBufferAttribute(o,u),l&&(E_.fromBufferAttribute(e,u),ka.add(E_)),i=Math.max(i,r.distanceToSquared(ka))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&yn('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){yn("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=t.position,i=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zh(new Float32Array(4*r.count),4));const s=this.getAttribute("tangent"),o=[],l=[];for(let P=0;P<r.count;P++)o[P]=new Te,l[P]=new Te;const u=new Te,c=new Te,h=new Te,d=new or,f=new or,p=new or,m=new Te,g=new Te;function v(P,I,D){u.fromBufferAttribute(r,P),c.fromBufferAttribute(r,I),h.fromBufferAttribute(r,D),d.fromBufferAttribute(a,P),f.fromBufferAttribute(a,I),p.fromBufferAttribute(a,D),c.sub(u),h.sub(u),f.sub(d),p.sub(d);const R=1/(f.x*p.y-p.x*f.y);isFinite(R)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(h,-f.y).multiplyScalar(R),g.copy(h).multiplyScalar(f.x).addScaledVector(c,-p.x).multiplyScalar(R),o[P].add(m),o[I].add(m),o[D].add(m),l[P].add(g),l[I].add(g),l[D].add(g))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let P=0,I=b.length;P<I;++P){const D=b[P],R=D.start,B=D.count;for(let k=R,V=R+B;k<V;k+=3)v(e.getX(k+0),e.getX(k+1),e.getX(k+2))}const S=new Te,w=new Te,E=new Te,T=new Te;function M(P){E.fromBufferAttribute(i,P),T.copy(E);const I=o[P];S.copy(I),S.sub(E.multiplyScalar(E.dot(I))).normalize(),w.crossVectors(T,I);const R=w.dot(l[P])<0?-1:1;s.setXYZW(P,S.x,S.y,S.z,R)}for(let P=0,I=b.length;P<I;++P){const D=b[P],R=D.start,B=D.count;for(let k=R,V=R+B;k<V;k+=3)M(e.getX(k+0)),M(e.getX(k+1)),M(e.getX(k+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Zh(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,f=r.count;d<f;d++)r.setXYZ(d,0,0,0);const i=new Te,a=new Te,s=new Te,o=new Te,l=new Te,u=new Te,c=new Te,h=new Te;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),c.subVectors(s,a),h.subVectors(i,a),c.cross(h),o.fromBufferAttribute(r,p),l.fromBufferAttribute(r,m),u.fromBufferAttribute(r,g),o.add(c),l.add(c),u.add(c),r.setXYZ(p,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z),r.setXYZ(g,u.x,u.y,u.z)}else for(let d=0,f=t.count;d<f;d+=3)i.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),s.fromBufferAttribute(t,d+2),c.subVectors(s,a),h.subVectors(i,a),c.cross(h),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)ka.fromBufferAttribute(e,t),ka.normalize(),e.setXYZ(t,ka.x,ka.y,ka.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,h=o.normalized,d=new u.constructor(l.length*c);let f=0,p=0;for(let m=0,g=l.length;m<g;m++){o.isInterleavedBufferAttribute?f=l[m]*o.data.stride+o.offset:f=l[m]*c;for(let v=0;v<c;v++)d[p++]=u[f++]}return new Zh(d,c,h)}if(this.index===null)return an("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Nl,r=this.index.array,i=this.attributes;for(const o in i){const l=i[o],u=e(l,r);t.setAttribute(o,u)}const a=this.morphAttributes;for(const o in a){const l=[],u=a[o];for(let c=0,h=u.length;c<h;c++){const d=u[c],f=e(d,r);l.push(f)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const u=s[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let a=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,d=u.length;h<d;h++){const f=u[h];c.push(f.toJSON(e.data))}c.length>0&&(i[l]=c,a=!0)}a&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const a=e.morphAttributes;for(const u in a){const c=[],h=a[u];for(let d=0,f=h.length;d<f;d++)c.push(h[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,c=s.length;u<c;u++){const h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Oie=new rn,Pv=new yW,IP=new tw,Bie=new Te,PP=new Te,LP=new Te,RP=new Te,_6=new Te,NP=new Te,Fie=new Te,kP=new Te;class Ou extends pi{constructor(e=new Nl,t=new Xve){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,a=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const o=this.morphTargetInfluences;if(a&&o){NP.set(0,0,0);for(let l=0,u=a.length;l<u;l++){const c=o[l],h=a[l];c!==0&&(_6.fromBufferAttribute(h,e),s?NP.addScaledVector(_6,c):NP.addScaledVector(_6.sub(t),c))}t.add(NP)}return t}raycast(e,t){const r=this.geometry,i=this.material,a=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),IP.copy(r.boundingSphere),IP.applyMatrix4(a),Pv.copy(e.ray).recast(e.near),!(IP.containsPoint(Pv.origin)===!1&&(Pv.intersectSphere(IP,Bie)===null||Pv.origin.distanceToSquared(Bie)>(e.far-e.near)**2))&&(Oie.copy(a).invert(),Pv.copy(e.ray).applyMatrix4(Oie),!(r.boundingBox!==null&&Pv.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Pv)))}_computeIntersections(e,t,r){let i;const a=this.geometry,s=this.material,o=a.index,l=a.attributes.position,u=a.attributes.uv,c=a.attributes.uv1,h=a.attributes.normal,d=a.groups,f=a.drawRange;if(o!==null)if(Array.isArray(s))for(let p=0,m=d.length;p<m;p++){const g=d[p],v=s[g.materialIndex],b=Math.max(g.start,f.start),S=Math.min(o.count,Math.min(g.start+g.count,f.start+f.count));for(let w=b,E=S;w<E;w+=3){const T=o.getX(w),M=o.getX(w+1),P=o.getX(w+2);i=OP(this,v,e,r,u,c,h,T,M,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),m=Math.min(o.count,f.start+f.count);for(let g=p,v=m;g<v;g+=3){const b=o.getX(g),S=o.getX(g+1),w=o.getX(g+2);i=OP(this,s,e,r,u,c,h,b,S,w),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let p=0,m=d.length;p<m;p++){const g=d[p],v=s[g.materialIndex],b=Math.max(g.start,f.start),S=Math.min(l.count,Math.min(g.start+g.count,f.start+f.count));for(let w=b,E=S;w<E;w+=3){const T=w,M=w+1,P=w+2;i=OP(this,v,e,r,u,c,h,T,M,P),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=g.materialIndex,t.push(i))}}else{const p=Math.max(0,f.start),m=Math.min(l.count,f.start+f.count);for(let g=p,v=m;g<v;g+=3){const b=g,S=g+1,w=g+2;i=OP(this,s,e,r,u,c,h,b,S,w),i&&(i.faceIndex=Math.floor(g/3),t.push(i))}}}}function DKe(n,e,t,r,i,a,s,o){let l;if(e.side===Wo?l=r.intersectTriangle(s,a,i,!0,o):l=r.intersectTriangle(i,a,s,e.side===Mg,o),l===null)return null;kP.copy(o),kP.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(kP);return u<t.near||u>t.far?null:{distance:u,point:kP.clone(),object:n}}function OP(n,e,t,r,i,a,s,o,l,u){n.getVertexPosition(o,PP),n.getVertexPosition(l,LP),n.getVertexPosition(u,RP);const c=DKe(n,e,t,r,PP,LP,RP,Fie);if(c){const h=new Te;xc.getBarycoord(Fie,PP,LP,RP,h),i&&(c.uv=xc.getInterpolatedAttribute(i,o,l,u,h,new or)),a&&(c.uv1=xc.getInterpolatedAttribute(a,o,l,u,h,new or)),s&&(c.normal=xc.getInterpolatedAttribute(s,o,l,u,h,new Te),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const d={a:o,b:l,c:u,normal:new Te,materialIndex:0};xc.getNormal(PP,LP,RP,d.normal),c.face=d,c.barycoord=h}return c}class P2 extends Nl{constructor(e=1,t=1,r=1,i=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:a,depthSegments:s};const o=this;i=Math.floor(i),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],c=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,r,t,e,s,a,0),p("z","y","x",1,-1,r,t,-e,s,a,1),p("x","z","y",1,1,e,r,t,i,s,2),p("x","z","y",1,-1,e,r,-t,i,s,3),p("x","y","z",1,-1,e,t,r,i,a,4),p("x","y","z",-1,-1,e,t,-r,i,a,5),this.setIndex(l),this.setAttribute("position",new Rs(u,3)),this.setAttribute("normal",new Rs(c,3)),this.setAttribute("uv",new Rs(h,2));function p(m,g,v,b,S,w,E,T,M,P,I){const D=w/M,R=E/P,B=w/2,k=E/2,V=T/2,G=M+1,F=P+1;let X=0,j=0;const Q=new Te;for(let H=0;H<F;H++){const K=H*R-k;for(let te=0;te<G;te++){const Y=te*D-B;Q[m]=Y*b,Q[g]=K*S,Q[v]=V,u.push(Q.x,Q.y,Q.z),Q[m]=0,Q[g]=0,Q[v]=T>0?1:-1,c.push(Q.x,Q.y,Q.z),h.push(te/M),h.push(1-H/P),X+=1}}for(let H=0;H<P;H++)for(let K=0;K<M;K++){const te=d+K+G*H,Y=d+K+G*(H+1),de=d+(K+1)+G*(H+1),ge=d+(K+1)+G*H;l.push(te,Y,ge),l.push(Y,de,ge),j+=6}o.addGroup(f,j,I),f+=j,d+=X}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new P2(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function _S(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(an("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Zs(n){const e={};for(let t=0;t<n.length;t++){const r=_S(n[t]);for(const i in r)e[i]=r[i]}return e}function IKe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Yve(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Fn.workingColorSpace}const PKe={clone:_S,merge:Zs};var LKe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,RKe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ld extends Fg{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=LKe,this.fragmentShader=RKe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=_S(e.uniforms),this.uniformsGroups=IKe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class qve extends pi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rn,this.projectionMatrix=new rn,this.projectionMatrixInverse=new rn,this.coordinateSystem=Gh,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Wp=new Te,Uie=new or,zie=new or;class uo extends qve{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=xS*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(YE*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return xS*2*Math.atan(Math.tan(YE*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){Wp.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Wp.x,Wp.y).multiplyScalar(-e/Wp.z),Wp.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Wp.x,Wp.y).multiplyScalar(-e/Wp.z)}getViewSize(e,t){return this.getViewBounds(e,Uie,zie),t.subVectors(zie,Uie)}setViewOffset(e,t,r,i,a,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(YE*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,a=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;a+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const o=this.filmOffset;o!==0&&(a+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const A_=-90,C_=1;class NKe extends pi{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new uo(A_,C_,e,t);i.layers=this.layers,this.add(i);const a=new uo(A_,C_,e,t);a.layers=this.layers,this.add(a);const s=new uo(A_,C_,e,t);s.layers=this.layers,this.add(s);const o=new uo(A_,C_,e,t);o.layers=this.layers,this.add(o);const l=new uo(A_,C_,e,t);l.layers=this.layers,this.add(l);const u=new uo(A_,C_,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,a,s,o,l]=t;for(const u of t)this.remove(u);if(e===Gh)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===qN)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,s,o,l,u,c]=this.children,h=e.getRenderTarget(),d=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,a),e.setRenderTarget(r,1,i),e.render(t,s),e.setRenderTarget(r,2,i),e.render(t,o),e.setRenderTarget(r,3,i),e.render(t,l),e.setRenderTarget(r,4,i),e.render(t,u),r.texture.generateMipmaps=m,e.setRenderTarget(r,5,i),e.render(t,c),e.setRenderTarget(h,d,f),e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class Kve extends ms{constructor(e=[],t=Yy,r,i,a,s,o,l,u,c){super(e,t,r,i,a,s,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Zve extends Kh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Kve(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new P2(5,5,5),a=new ld({name:"CubemapFromEquirect",uniforms:_S(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Wo,blending:Ff});a.uniforms.tEquirect.value=t;const s=new Ou(i,a),o=t.minFilter;return t.minFilter===h0&&(t.minFilter=ks),new NKe(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){const a=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(a)}}class f0 extends pi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const kKe={type:"move"};class b6{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new f0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new f0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new f0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,a=null,s=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,r),v=this._getHandJoint(u,m);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=g.radius),v.visible=g!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],d=c.position.distanceTo(h.position),f=.02,p=.005;u.inputState.pinching&&d>f+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=f-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,r),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&a!==null&&(i=a),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(kKe)))}return o!==null&&(o.visible=i!==null),l!==null&&(l.visible=a!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new f0;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class OKe extends pi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Xa,this.environmentIntensity=1,this.environmentRotation=new Xa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}const Vie=new Te,Hie=new Tr,Gie=new Tr,BKe=new Te,jie=new rn,BP=new Te,S6=new tw,Wie=new rn,w6=new yW;class FKe extends Ou{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=mie,this.bindMatrix=new rn,this.bindMatrixInverse=new rn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ew),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,BP),this.boundingBox.expandByPoint(BP)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new tw),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)this.getVertexPosition(r,BP),this.boundingSphere.expandByPoint(BP)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),S6.copy(this.boundingSphere),S6.applyMatrix4(i),e.ray.intersectsSphere(S6)!==!1&&(Wie.copy(i).invert(),w6.copy(e.ray).applyMatrix4(Wie),!(this.boundingBox!==null&&w6.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,w6)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Tr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===mie?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Bqe?this.bindMatrixInverse.copy(this.bindMatrix).invert():an("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;Hie.fromBufferAttribute(i.attributes.skinIndex,e),Gie.fromBufferAttribute(i.attributes.skinWeight,e),Vie.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const s=Gie.getComponent(a);if(s!==0){const o=Hie.getComponent(a);jie.multiplyMatrices(r.bones[o].matrixWorld,r.boneInverses[o]),t.addScaledVector(BKe.copy(Vie).applyMatrix4(jie),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}class KV extends pi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Qve extends ms{constructor(e=null,t=1,r=1,i,a,s,o,l,u=ps,c=ps,h,d){super(null,s,o,l,u,c,i,a,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Xie=new rn,UKe=new rn;class _W{constructor(e=[],t=[]){this.uuid=Bg(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){an("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new rn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new rn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let a=0,s=e.length;a<s;a++){const o=e[a]?e[a].matrixWorld:UKe;Xie.multiplyMatrices(o,t[a]),Xie.toArray(r,a*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new _W(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Qve(t,e,e,Iu,Sc);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const a=e.bones[r];let s=t[a];s===void 0&&(an("Skeleton: No bone found with UUID:",a),s=new KV),this.bones.push(s),this.boneInverses.push(new rn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,a=t.length;i<a;i++){const s=t[i];e.bones.push(s.uuid);const o=r[i];e.boneInverses.push(o.toArray())}return e}}const T6=new Te,zKe=new Te,VKe=new Nn;class Gv{constructor(e=new Te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=T6.subVectors(r,t).cross(zKe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(T6),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/i;return a<0||a>1?null:t.copy(e.start).addScaledVector(r,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||VKe.getNormalMatrix(e),i=this.coplanarPoint(T6).applyMatrix4(e),a=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Lv=new tw,HKe=new or(.5,.5),FP=new Te;class bW{constructor(e=new Gv,t=new Gv,r=new Gv,i=new Gv,a=new Gv,s=new Gv){this.planes=[e,t,r,i,a,s]}set(e,t,r,i,a,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(a),o[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Gh,r=!1){const i=this.planes,a=e.elements,s=a[0],o=a[1],l=a[2],u=a[3],c=a[4],h=a[5],d=a[6],f=a[7],p=a[8],m=a[9],g=a[10],v=a[11],b=a[12],S=a[13],w=a[14],E=a[15];if(i[0].setComponents(u-s,f-c,v-p,E-b).normalize(),i[1].setComponents(u+s,f+c,v+p,E+b).normalize(),i[2].setComponents(u+o,f+h,v+m,E+S).normalize(),i[3].setComponents(u-o,f-h,v-m,E-S).normalize(),r)i[4].setComponents(l,d,g,w).normalize(),i[5].setComponents(u-l,f-d,v-g,E-w).normalize();else if(i[4].setComponents(u-l,f-d,v-g,E-w).normalize(),t===Gh)i[5].setComponents(u+l,f+d,v+g,E+w).normalize();else if(t===qN)i[5].setComponents(l,d,g,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Lv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lv)}intersectsSprite(e){Lv.center.set(0,0,0);const t=HKe.distanceTo(e.center);return Lv.radius=.7071067811865476+t,Lv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lv)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(FP.x=i.normal.x>0?e.max.x:e.min.x,FP.y=i.normal.y>0?e.max.y:e.min.y,FP.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(FP)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Jve extends Fg{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const KN=new Te,ZN=new Te,$ie=new rn,IT=new yW,UP=new tw,E6=new Te,Yie=new Te;class GKe extends pi{constructor(e=new Nl,t=new Jve){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,a=t.count;i<a;i++)KN.fromBufferAttribute(t,i-1),ZN.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=KN.distanceTo(ZN);e.setAttribute("lineDistance",new Rs(r,1))}else an("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,a=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),UP.copy(r.boundingSphere),UP.applyMatrix4(i),UP.radius+=a,e.ray.intersectsSphere(UP)===!1)return;$ie.copy(i).invert(),IT.copy(e.ray).applyMatrix4($ie);const o=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,c=r.index,d=r.attributes.position;if(c!==null){const f=Math.max(0,s.start),p=Math.min(c.count,s.start+s.count);for(let m=f,g=p-1;m<g;m+=u){const v=c.getX(m),b=c.getX(m+1),S=zP(this,e,IT,l,v,b,m);S&&t.push(S)}if(this.isLineLoop){const m=c.getX(p-1),g=c.getX(f),v=zP(this,e,IT,l,m,g,p-1);v&&t.push(v)}}else{const f=Math.max(0,s.start),p=Math.min(d.count,s.start+s.count);for(let m=f,g=p-1;m<g;m+=u){const v=zP(this,e,IT,l,m,m+1,m);v&&t.push(v)}if(this.isLineLoop){const m=zP(this,e,IT,l,p-1,f,p-1);m&&t.push(m)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,s=i.length;a<s;a++){const o=i[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=a}}}}}function zP(n,e,t,r,i,a,s){const o=n.geometry.attributes.position;if(KN.fromBufferAttribute(o,i),ZN.fromBufferAttribute(o,a),t.distanceSqToSegment(KN,ZN,E6,Yie)>r)return;E6.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(E6);if(!(u<e.near||u>e.far))return{distance:u,point:Yie.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}class $A extends ms{constructor(e,t,r=od,i,a,s,o=ps,l=ps,u,c=ep,h=1){if(c!==ep&&c!==d0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const d={width:e,height:t,depth:h};super(d,i,a,s,o,l,c,r,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new vW(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class jKe extends $A{constructor(e,t=od,r=Yy,i,a,s=ps,o=ps,l,u=ep){const c={width:e,height:e,depth:1},h=[c,c,c,c,c,c];super(e,e,t,r,i,a,s,o,l,u),this.image=h,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class e0e extends ms{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class WKe{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){an("Curve: .getPoint() not implemented.")}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),a=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),a+=r.distanceTo(i),t.push(a),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const r=this.getLengths();let i=0;const a=r.length;let s;t?s=t:s=e*r[a-1];let o=0,l=a-1,u;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),u=r[i]-s,u<0)o=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(a-1);const c=r[i],d=r[i+1]-c,f=(s-c)/d;return(i+f)/(a-1)}getTangent(e,t){let i=e-1e-4,a=e+1e-4;i<0&&(i=0),a>1&&(a=1);const s=this.getPoint(i),o=this.getPoint(a),l=t||(s.isVector2?new or:new Te);return l.copy(o).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){const r=new Te,i=[],a=[],s=[],o=new Te,l=new rn;for(let f=0;f<=e;f++){const p=f/e;i[f]=this.getTangentAt(p,new Te)}a[0]=new Te,s[0]=new Te;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),d<=u&&r.set(0,0,1),o.crossVectors(i[0],r).normalize(),a[0].crossVectors(i[0],o),s[0].crossVectors(i[0],a[0]);for(let f=1;f<=e;f++){if(a[f]=a[f-1].clone(),s[f]=s[f-1].clone(),o.crossVectors(i[f-1],i[f]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(Zn(i[f-1].dot(i[f]),-1,1));a[f].applyMatrix4(l.makeRotationAxis(o,p))}s[f].crossVectors(i[f],a[f])}if(t===!0){let f=Math.acos(Zn(a[0].dot(a[e]),-1,1));f/=e,i[0].dot(o.crossVectors(a[0],a[e]))>0&&(f=-f);for(let p=1;p<=e;p++)a[p].applyMatrix4(l.makeRotationAxis(i[p],f*p)),s[p].crossVectors(i[p],a[p])}return{tangents:i,normals:a,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}function XKe(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let a=t0e(n,0,i,t,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,u;if(r&&(a=ZKe(n,e,a,t)),n.length>80*t){o=n[0],l=n[1];let c=o,h=l;for(let d=t;d<i;d+=t){const f=n[d],p=n[d+1];f<o&&(o=f),p<l&&(l=p),f>c&&(c=f),p>h&&(h=p)}u=Math.max(c-o,h-l),u=u!==0?32767/u:0}return YA(a,s,t,o,l,u,0),s}function t0e(n,e,t,r,i){let a;if(i===lZe(n,e,t,r)>0)for(let s=e;s<t;s+=r)a=qie(s/r|0,n[s],n[s+1],a);else for(let s=t-r;s>=e;s-=r)a=qie(s/r|0,n[s],n[s+1],a);return a&&bS(a,a.next)&&(KA(a),a=a.next),a}function qy(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(bS(t,t.next)||Si(t.prev,t,t.next)===0)){if(KA(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function YA(n,e,t,r,i,a,s){if(!n)return;!s&&a&&nZe(n,r,i,a);let o=n;for(;n.prev!==n.next;){const l=n.prev,u=n.next;if(a?YKe(n,r,i,a):$Ke(n)){e.push(l.i,n.i,u.i),KA(n),n=u.next,o=u.next;continue}if(n=u,n===o){s?s===1?(n=qKe(qy(n),e),YA(n,e,t,r,i,a,2)):s===2&&KKe(n,e,t,r,i,a):YA(qy(n),e,t,r,i,a,1);break}}}function $Ke(n){const e=n.prev,t=n,r=n.next;if(Si(e,t,r)>=0)return!1;const i=e.x,a=t.x,s=r.x,o=e.y,l=t.y,u=r.y,c=Math.min(i,a,s),h=Math.min(o,l,u),d=Math.max(i,a,s),f=Math.max(o,l,u);let p=r.next;for(;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&aE(i,o,a,l,s,u,p.x,p.y)&&Si(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function YKe(n,e,t,r){const i=n.prev,a=n,s=n.next;if(Si(i,a,s)>=0)return!1;const o=i.x,l=a.x,u=s.x,c=i.y,h=a.y,d=s.y,f=Math.min(o,l,u),p=Math.min(c,h,d),m=Math.max(o,l,u),g=Math.max(c,h,d),v=ZV(f,p,e,t,r),b=ZV(m,g,e,t,r);let S=n.prevZ,w=n.nextZ;for(;S&&S.z>=v&&w&&w.z<=b;){if(S.x>=f&&S.x<=m&&S.y>=p&&S.y<=g&&S!==i&&S!==s&&aE(o,c,l,h,u,d,S.x,S.y)&&Si(S.prev,S,S.next)>=0||(S=S.prevZ,w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==i&&w!==s&&aE(o,c,l,h,u,d,w.x,w.y)&&Si(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;S&&S.z>=v;){if(S.x>=f&&S.x<=m&&S.y>=p&&S.y<=g&&S!==i&&S!==s&&aE(o,c,l,h,u,d,S.x,S.y)&&Si(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;w&&w.z<=b;){if(w.x>=f&&w.x<=m&&w.y>=p&&w.y<=g&&w!==i&&w!==s&&aE(o,c,l,h,u,d,w.x,w.y)&&Si(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function qKe(n,e){let t=n;do{const r=t.prev,i=t.next.next;!bS(r,i)&&r0e(r,t,t.next,i)&&qA(r,i)&&qA(i,r)&&(e.push(r.i,t.i,i.i),KA(t),KA(t.next),t=n=i),t=t.next}while(t!==n);return qy(t)}function KKe(n,e,t,r,i,a){let s=n;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&aZe(s,o)){let l=i0e(s,o);s=qy(s,s.next),l=qy(l,l.next),YA(s,e,t,r,i,a,0),YA(l,e,t,r,i,a,0);return}o=o.next}s=s.next}while(s!==n)}function ZKe(n,e,t,r){const i=[];for(let a=0,s=e.length;a<s;a++){const o=e[a]*r,l=a<s-1?e[a+1]*r:n.length,u=t0e(n,o,l,r,!1);u===u.next&&(u.steiner=!0),i.push(iZe(u))}i.sort(QKe);for(let a=0;a<i.length;a++)t=JKe(i[a],t);return t}function QKe(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const r=(n.next.y-n.y)/(n.next.x-n.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=r-i}return t}function JKe(n,e){const t=eZe(n,e);if(!t)return e;const r=i0e(t,n);return qy(r,r.next),qy(t,t.next)}function eZe(n,e){let t=e;const r=n.x,i=n.y;let a=-1/0,s;if(bS(n,t))return t;do{if(bS(n,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>a&&(a=h,s=t.x<t.next.x?t:t.next,h===r))return s}t=t.next}while(t!==e);if(!s)return null;const o=s,l=s.x,u=s.y;let c=1/0;t=s;do{if(r>=t.x&&t.x>=l&&r!==t.x&&n0e(i<u?r:a,i,l,u,i<u?a:r,i,t.x,t.y)){const h=Math.abs(i-t.y)/(r-t.x);qA(t,n)&&(h<c||h===c&&(t.x>s.x||t.x===s.x&&tZe(s,t)))&&(s=t,c=h)}t=t.next}while(t!==o);return s}function tZe(n,e){return Si(n.prev,n,e.prev)<0&&Si(e.next,n,n.next)<0}function nZe(n,e,t,r){let i=n;do i.z===0&&(i.z=ZV(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,rZe(i)}function rZe(n){let e,t=1;do{let r=n,i;n=null;let a=null;for(e=0;r;){e++;let s=r,o=0;for(let u=0;u<t&&(o++,s=s.nextZ,!!s);u++);let l=t;for(;o>0||l>0&&s;)o!==0&&(l===0||!s||r.z<=s.z)?(i=r,r=r.nextZ,o--):(i=s,s=s.nextZ,l--),a?a.nextZ=i:n=i,i.prevZ=a,a=i;r=s}a.nextZ=null,t*=2}while(e>1);return n}function ZV(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function iZe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function n0e(n,e,t,r,i,a,s,o){return(i-s)*(e-o)>=(n-s)*(a-o)&&(n-s)*(r-o)>=(t-s)*(e-o)&&(t-s)*(a-o)>=(i-s)*(r-o)}function aE(n,e,t,r,i,a,s,o){return!(n===s&&e===o)&&n0e(n,e,t,r,i,a,s,o)}function aZe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!sZe(n,e)&&(qA(n,e)&&qA(e,n)&&oZe(n,e)&&(Si(n.prev,n,e.prev)||Si(n,e.prev,e))||bS(n,e)&&Si(n.prev,n,n.next)>0&&Si(e.prev,e,e.next)>0)}function Si(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function bS(n,e){return n.x===e.x&&n.y===e.y}function r0e(n,e,t,r){const i=HP(Si(n,e,t)),a=HP(Si(n,e,r)),s=HP(Si(t,r,n)),o=HP(Si(t,r,e));return!!(i!==a&&s!==o||i===0&&VP(n,t,e)||a===0&&VP(n,r,e)||s===0&&VP(t,n,r)||o===0&&VP(t,e,r))}function VP(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function HP(n){return n>0?1:n<0?-1:0}function sZe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&r0e(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function qA(n,e){return Si(n.prev,n,n.next)<0?Si(n,e,n.next)>=0&&Si(n,n.prev,e)>=0:Si(n,e,n.prev)<0||Si(n,n.next,e)<0}function oZe(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,a=(n.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&i<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function i0e(n,e){const t=QV(n.i,n.x,n.y),r=QV(e.i,e.x,e.y),i=n.next,a=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,a.next=r,r.prev=a,r}function qie(n,e,t,r){const i=QV(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function KA(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function QV(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function lZe(n,e,t,r){let i=0;for(let a=e,s=t-r;a<t;a+=r)i+=(n[s]-n[a])*(n[a+1]+n[s+1]),s=a;return i}class uZe{static triangulate(e,t,r=2){return XKe(e,t,r)}}class SW{static area(e){const t=e.length;let r=0;for(let i=t-1,a=0;a<t;i=a++)r+=e[i].x*e[a].y-e[a].x*e[i].y;return r*.5}static isClockWise(e){return SW.area(e)<0}static triangulateShape(e,t){const r=[],i=[],a=[];Kie(e),Zie(r,e);let s=e.length;t.forEach(Kie);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,Zie(r,t[l]);const o=uZe.triangulate(r,i);for(let l=0;l<o.length;l+=3)a.push(o.slice(l,l+3));return a}}function Kie(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Zie(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class F3 extends Nl{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const a=e/2,s=t/2,o=Math.floor(r),l=Math.floor(i),u=o+1,c=l+1,h=e/o,d=t/l,f=[],p=[],m=[],g=[];for(let v=0;v<c;v++){const b=v*d-s;for(let S=0;S<u;S++){const w=S*h-a;p.push(w,-b,0),m.push(0,0,1),g.push(S/o),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let b=0;b<o;b++){const S=b+u*v,w=b+u*(v+1),E=b+1+u*(v+1),T=b+1+u*v;f.push(S,w,T),f.push(w,E,T)}this.setIndex(f),this.setAttribute("position",new Rs(p,3)),this.setAttribute("normal",new Rs(m,3)),this.setAttribute("uv",new Rs(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F3(e.width,e.height,e.widthSegments,e.heightSegments)}}class cZe extends ld{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class GP extends Fg{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Tn(16777215),this.specular=new Tn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fW,this.normalScale=new or(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xa,this.combine=O3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hZe extends Fg{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Tn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fW,this.normalScale=new or(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Xa,this.combine=O3,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dZe extends Fg{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=zqe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class fZe extends Fg{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function jP(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function pZe(n){function e(i,a){return n[i]-n[a]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function Qie(n,e,t){const r=n.length,i=new n.constructor(r);for(let a=0,s=0;s!==r;++a){const o=t[a]*e;for(let l=0;l!==e;++l)i[s++]=n[o+l]}return i}function a0e(n,e,t,r){let i=1,a=n[0];for(;a!==void 0&&a[r]===void 0;)a=n[i++];if(a===void 0)return;let s=a[r];if(s!==void 0)if(Array.isArray(s))do s=a[r],s!==void 0&&(e.push(a.time),t.push(...s)),a=n[i++];while(a!==void 0);else if(s.toArray!==void 0)do s=a[r],s!==void 0&&(e.push(a.time),s.toArray(t,t.length)),a=n[i++];while(a!==void 0);else do s=a[r],s!==void 0&&(e.push(a.time),t.push(s)),a=n[i++];while(a!==void 0)}class U3{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],a=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let o=r+2;;){if(i===void 0){if(e<a)break r;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===o)break;if(a=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=a)){const o=t[1];e<o&&(r=2,a=o);for(let l=r-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=a,a=t[--r-1],e>=a)break t}s=r,r=0;break n}break e}for(;r<s;){const o=r+s>>>1;e<t[o]?s=o:r=o+1}if(i=t[r],a=t[r-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,a,i)}return this.interpolate_(r,a,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,a=e*i;for(let s=0;s!==i;++s)t[s]=r[a+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class mZe extends U3{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:gie,endingEnd:gie}}intervalChanged_(e,t,r){const i=this.parameterPositions;let a=e-2,s=e+1,o=i[a],l=i[s];if(o===void 0)switch(this.getSettings_().endingStart){case vie:a=e,o=2*t-r;break;case yie:a=i.length-2,o=t+i[a]-i[a+1];break;default:a=e,o=r}if(l===void 0)switch(this.getSettings_().endingEnd){case vie:s=e,l=2*r-t;break;case yie:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-r),this._offsetPrev=a*c,this._offsetNext=s*c}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(r-t)/(i-t),m=p*p,g=m*p,v=-d*g+2*d*m-d*p,b=(1+d)*g+(-1.5-2*d)*m+(-.5+d)*p+1,S=(-1-f)*g+(1.5+f)*m+.5*p,w=f*g-f*m;for(let E=0;E!==o;++E)a[E]=v*s[c+E]+b*s[u+E]+S*s[l+E]+w*s[h+E];return a}}class gZe extends U3{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(r-t)/(i-t),h=1-c;for(let d=0;d!==o;++d)a[d]=s[u+d]*h+s[l+d]*c;return a}}class vZe extends U3{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Bc{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=jP(t,this.TimeBufferType),this.values=jP(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:jP(e.times,Array),values:jP(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new vZe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new gZe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new mZe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case $N:t=this.InterpolantFactoryMethodDiscrete;break;case qV:t=this.InterpolantFactoryMethodLinear;break;case e6:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return an("KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return $N;case this.InterpolantFactoryMethodLinear:return qV;case this.InterpolantFactoryMethodSmooth:return e6}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let a=0,s=i-1;for(;a!==i&&r[a]<e;)++a;for(;s!==-1&&r[s]>t;)--s;if(++s,a!==0||s!==i){a>=s&&(s=Math.max(s,1),a=s-1);const o=this.getValueSize();this.times=r.slice(a,s),this.values=this.values.slice(a*o,s*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(yn("KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,a=r.length;a===0&&(yn("KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let o=0;o!==a;o++){const l=r[o];if(typeof l=="number"&&isNaN(l)){yn("KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(s!==null&&s>l){yn("KeyframeTrack: Out of order keys.",this,o,l,s),e=!1;break}s=l}if(i!==void 0&&Yqe(i))for(let o=0,l=i.length;o!==l;++o){const u=i[o];if(isNaN(u)){yn("KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===e6,a=e.length-1;let s=1;for(let o=1;o<a;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(i)l=!0;else{const h=o*r,d=h-r,f=h+r;for(let p=0;p!==r;++p){const m=t[h+p];if(m!==t[d+p]||m!==t[f+p]){l=!0;break}}}if(l){if(o!==s){e[s]=e[o];const h=o*r,d=s*r;for(let f=0;f!==r;++f)t[d+f]=t[h+f]}++s}}if(a>0){e[s]=e[a];for(let o=a*r,l=s*r,u=0;u!==r;++u)t[l+u]=t[o+u];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*r)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Bc.prototype.ValueTypeName="";Bc.prototype.TimeBufferType=Float32Array;Bc.prototype.ValueBufferType=Float32Array;Bc.prototype.DefaultInterpolation=qV;class nw extends Bc{constructor(e,t,r){super(e,t,r)}}nw.prototype.ValueTypeName="bool";nw.prototype.ValueBufferType=Array;nw.prototype.DefaultInterpolation=$N;nw.prototype.InterpolantFactoryMethodLinear=void 0;nw.prototype.InterpolantFactoryMethodSmooth=void 0;class s0e extends Bc{constructor(e,t,r,i){super(e,t,r,i)}}s0e.prototype.ValueTypeName="color";class ZA extends Bc{constructor(e,t,r,i){super(e,t,r,i)}}ZA.prototype.ValueTypeName="number";class yZe extends U3{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const a=this.resultBuffer,s=this.sampleValues,o=this.valueSize,l=(r-t)/(i-t);let u=e*o;for(let c=u+o;u!==c;u+=4)zo.slerpFlat(a,0,s,u-o,s,u,l);return a}}class SS extends Bc{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new yZe(this.times,this.values,this.getValueSize(),e)}}SS.prototype.ValueTypeName="quaternion";SS.prototype.InterpolantFactoryMethodSmooth=void 0;class rw extends Bc{constructor(e,t,r){super(e,t,r)}}rw.prototype.ValueTypeName="string";rw.prototype.ValueBufferType=Array;rw.prototype.DefaultInterpolation=$N;rw.prototype.InterpolantFactoryMethodLinear=void 0;rw.prototype.InterpolantFactoryMethodSmooth=void 0;class QA extends Bc{constructor(e,t,r,i){super(e,t,r,i)}}QA.prototype.ValueTypeName="vector";class xZe{constructor(e="",t=-1,r=[],i=Uqe){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Bg(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,o=r.length;s!==o;++s)t.push(bZe(r[s]).scale(i));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a.userData=JSON.parse(e.userData||"{}"),a}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let a=0,s=r.length;a!==s;++a)t.push(Bc.toJSON(r[a]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const a=t.length,s=[];for(let o=0;o<a;o++){let l=[],u=[];l.push((o+a-1)%a,o,(o+1)%a),u.push(0,1,0);const c=pZe(l);l=Qie(l,1,c),u=Qie(u,1,c),!i&&l[0]===0&&(l.push(a),u.push(u[0])),s.push(new ZA(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},a=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(a);if(c&&c.length>1){const h=c[1];let d=i[h];d||(i[h]=d=[]),d.push(u)}}const s=[];for(const o in i)s.push(this.CreateFromMorphTargetSequence(o,i[o],t,r));return s}static parseAnimation(e,t){if(an("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return yn("AnimationClip: No animation in JSONLoader data."),null;const r=function(h,d,f,p,m){if(f.length!==0){const g=[],v=[];a0e(f,g,v,p),g.length!==0&&m.push(new h(d,g,v))}},i=[],a=e.name||"default",s=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const d=u[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let m=0;m<d[p].morphTargets.length;m++)f[d[p].morphTargets[m]]=-1;for(const m in f){const g=[],v=[];for(let b=0;b!==d[p].morphTargets.length;++b){const S=d[p];g.push(S.time),v.push(S.morphTarget===m?1:0)}i.push(new ZA(".morphTargetInfluence["+m+"]",g,v))}l=f.length*s}else{const f=".bones["+t[h].name+"]";r(QA,f+".position",d,"pos",i),r(SS,f+".quaternion",d,"rot",i),r(QA,f+".scale",d,"scl",i)}}return i.length===0?null:new this(a,l,i,o)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const a=this.tracks[r];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let r=0;r<this.tracks.length;r++)e.push(this.tracks[r].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function _Ze(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ZA;case"vector":case"vector2":case"vector3":case"vector4":return QA;case"color":return s0e;case"quaternion":return SS;case"bool":case"boolean":return nw;case"string":return rw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function bZe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=_Ze(n.type);if(n.times===void 0){const t=[],r=[];a0e(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const KE={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class SZe{constructor(e,t,r){const i=this;let a=!1,s=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this._abortController=null,this.itemStart=function(c){o++,a===!1&&i.onStart!==void 0&&i.onStart(c,s,o),a=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,o),s===o&&(a=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,d=u.length;h<d;h+=2){const f=u[h],p=u[h+1];if(f.global&&(f.lastIndex=0),f.test(c))return p}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const wZe=new SZe;class Ky{constructor(e){this.manager=e!==void 0?e:wZe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,a){r.load(e,i,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Ky.DEFAULT_MATERIAL_NAME="__DEFAULT";const Nd={};class TZe extends Error{constructor(e,t){super(e),this.response=t}}class EZe extends Ky{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=KE.get(`file:${e}`);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Nd[e]!==void 0){Nd[e].push({onLoad:t,onProgress:r,onError:i});return}Nd[e]=[],Nd[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&an("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Nd[e],h=u.body.getReader(),d=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),f=d?parseInt(d):0,p=f!==0;let m=0;const g=new ReadableStream({start(v){b();function b(){h.read().then(({done:S,value:w})=>{if(S)v.close();else{m+=w.byteLength;const E=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:f});for(let T=0,M=c.length;T<M;T++){const P=c[T];P.onProgress&&P.onProgress(E)}v.enqueue(w),b()}},S=>{v.error(S)})}}});return new Response(g)}else throw new TZe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o==="")return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return u.arrayBuffer().then(p=>f.decode(p))}}}).then(u=>{KE.add(`file:${e}`,u);const c=Nd[e];delete Nd[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onLoad&&f.onLoad(u)}}).catch(u=>{const c=Nd[e];if(c===void 0)throw this.manager.itemError(e),u;delete Nd[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onError&&f.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const M_=new WeakMap;class AZe extends Ky{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,s=KE.get(`image:${e}`);if(s!==void 0){if(s.complete===!0)a.manager.itemStart(e),setTimeout(function(){t&&t(s),a.manager.itemEnd(e)},0);else{let h=M_.get(s);h===void 0&&(h=[],M_.set(s,h)),h.push({onLoad:t,onError:i})}return s}const o=WA("img");function l(){c(),t&&t(this);const h=M_.get(this)||[];for(let d=0;d<h.length;d++){const f=h[d];f.onLoad&&f.onLoad(this)}M_.delete(this),a.manager.itemEnd(e)}function u(h){c(),i&&i(h),KE.remove(`image:${e}`);const d=M_.get(this)||[];for(let f=0;f<d.length;f++){const p=d[f];p.onError&&p.onError(h)}M_.delete(this),a.manager.itemError(e),a.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),KE.add(`image:${e}`,o),a.manager.itemStart(e),o.src=e,o}}class CZe extends Ky{constructor(e){super(e)}load(e,t,r,i){const a=new ms,s=new AZe(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(o){a.image=o,a.needsUpdate=!0,t!==void 0&&t(a)},r,i),a}}class z3 extends pi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Tn(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}const A6=new rn,Jie=new Te,eae=new Te;class wW{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new or(512,512),this.mapType=Ml,this.map=null,this.mapPass=null,this.matrix=new rn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bW,this._frameExtents=new or(1,1),this._viewportCount=1,this._viewports=[new Tr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;Jie.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jie),eae.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(eae),t.updateMatrixWorld(),A6.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(A6,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(A6)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class MZe extends wW{constructor(){super(new uo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,r=xS*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(r!==t.fov||i!==t.aspect||a!==t.far)&&(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class DZe extends z3{constructor(e,t,r=0,i=Math.PI/3,a=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(pi.DEFAULT_UP),this.updateMatrix(),this.target=new pi,this.distance=r,this.angle=i,this.penumbra=a,this.decay=s,this.map=null,this.shadow=new MZe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class IZe extends wW{constructor(){super(new uo(90,1,.5,500)),this.isPointLightShadow=!0}}class tae extends z3{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new IZe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class TW extends qve{constructor(e=-1,t=1,r=1,i=-1,a=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=a,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,a,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=a,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let a=r-e,s=r+e,o=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=u*this.view.offsetX,s=a+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(a,s,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class PZe extends wW{constructor(){super(new TW(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class JV extends z3{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(pi.DEFAULT_UP),this.updateMatrix(),this.target=new pi,this.shadow=new PZe}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class o0e extends z3{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class LZe{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class RZe extends uo{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}const EW="\\[\\]\\.:\\/",NZe=new RegExp("["+EW+"]","g"),AW="[^"+EW+"]",kZe="[^"+EW.replace("\\.","")+"]",OZe=/((?:WC+[\/:])*)/.source.replace("WC",AW),BZe=/(WCOD+)?/.source.replace("WCOD",kZe),FZe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AW),UZe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AW),zZe=new RegExp("^"+OZe+BZe+FZe+UZe+"$"),VZe=["material","materials","bones","map"];class HZe{constructor(e,t,r){const i=r||pr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,a=r.length;i!==a;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class pr{constructor(e,t,r){this.path=t,this.parsedPath=r||pr.parseTrackName(t),this.node=pr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new pr.Composite(e,t,r):new pr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(NZe,"")}static parseTrackName(e){const t=zZe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const a=r.nodeName.substring(i+1);VZe.indexOf(a)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=a)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(a){for(let s=0;s<a.length;s++){const o=a[s];if(o.name===t||o.uuid===t)return o;const l=r(o.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,a=r.length;i!==a;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let a=t.propertyIndex;if(e||(e=pr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){an("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){yn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){yn("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){yn("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){yn("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){yn("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){yn("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){yn("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;yn("PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(a!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){yn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){yn("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=a}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}pr.Composite=HZe;pr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};pr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};pr.prototype.GetterByBindingType=[pr.prototype._getValue_direct,pr.prototype._getValue_array,pr.prototype._getValue_arrayElement,pr.prototype._getValue_toArray];pr.prototype.SetterByBindingTypeAndVersioning=[[pr.prototype._setValue_direct,pr.prototype._setValue_direct_setNeedsUpdate,pr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pr.prototype._setValue_array,pr.prototype._setValue_array_setNeedsUpdate,pr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pr.prototype._setValue_arrayElement,pr.prototype._setValue_arrayElement_setNeedsUpdate,pr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pr.prototype._setValue_fromArray,pr.prototype._setValue_fromArray_setNeedsUpdate,pr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];function nae(n,e,t,r){const i=GZe(r);switch(t){case Uve:return n*e;case Vve:return n*e/i.components*i.byteLength;case cW:return n*e/i.components*i.byteLength;case vS:return n*e*2/i.components*i.byteLength;case hW:return n*e*2/i.components*i.byteLength;case zve:return n*e*3/i.components*i.byteLength;case Iu:return n*e*4/i.components*i.byteLength;case dW:return n*e*4/i.components*i.byteLength;case zL:case VL:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case HL:case GL:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case yV:case _V:return Math.max(n,16)*Math.max(e,8)/4;case vV:case xV:return Math.max(n,8)*Math.max(e,8)/2;case bV:case SV:case TV:case EV:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case wV:case AV:case CV:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case MV:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case DV:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case IV:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case PV:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case LV:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case RV:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case NV:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case kV:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case OV:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case BV:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case FV:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case UV:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case zV:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case VV:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case HV:case GV:case jV:return Math.ceil(n/4)*Math.ceil(e/4)*16;case WV:case XV:return Math.ceil(n/4)*Math.ceil(e/4)*8;case $V:case YV:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function GZe(n){switch(n){case Ml:case kve:return{byteLength:1,components:1};case GA:case Ove:case Jf:return{byteLength:2,components:1};case lW:case uW:return{byteLength:2,components:4};case od:case oW:case Sc:return{byteLength:4,components:1};case Bve:case Fve:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sW}}));typeof window<"u"&&(window.__THREE__?an("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sW);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function l0e(){let n=null,e=!1,t=null,r=null;function i(a,s){t(a,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){n=a}}}function jZe(n){const e=new WeakMap;function t(o,l){const u=o.array,c=o.usage,h=u.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,u,c),o.onUploadCallback();let f;if(u instanceof Float32Array)f=n.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)f=n.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?f=n.HALF_FLOAT:f=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)f=n.SHORT;else if(u instanceof Uint32Array)f=n.UNSIGNED_INT;else if(u instanceof Int32Array)f=n.INT;else if(u instanceof Int8Array)f=n.BYTE;else if(u instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:d,type:f,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:h}}function r(o,l,u){const c=l.array,h=l.updateRanges;if(n.bindBuffer(u,o),h.length===0)n.bufferSubData(u,0,c);else{h.sort((f,p)=>f.start-p.start);let d=0;for(let f=1;f<h.length;f++){const p=h[d],m=h[f];m.start<=p.start+p.count+1?p.count=Math.max(p.count,m.start+m.count-p.start):(++d,h[d]=m)}h.length=d+1;for(let f=0,p=h.length;f<p;f++){const m=h[f];n.bufferSubData(u,m.start*c.BYTES_PER_ELEMENT,c,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function a(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function s(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(u.buffer,o,l),u.version=o.version}}return{get:i,remove:a,update:s}}var WZe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,XZe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,$Ze=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,YZe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qZe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,KZe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ZZe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,QZe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,JZe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,eQe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,tQe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,nQe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,rQe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iQe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,aQe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,sQe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,oQe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,lQe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,uQe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,cQe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hQe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,dQe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,fQe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,pQe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,mQe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,gQe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,vQe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,yQe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,xQe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,_Qe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bQe="gl_FragColor = linearToOutputTexel( gl_FragColor );",SQe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,wQe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,TQe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,EQe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,AQe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,CQe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,MQe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,DQe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,IQe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,PQe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,LQe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,RQe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,NQe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,kQe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,OQe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,BQe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,FQe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,UQe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,zQe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,VQe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,HQe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,GQe=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,jQe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,WQe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,XQe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,$Qe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,YQe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,qQe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KQe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,ZQe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,QQe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,JQe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,eJe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tJe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,nJe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,rJe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,iJe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,aJe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,sJe=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,oJe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lJe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,uJe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,cJe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,hJe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dJe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,fJe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,pJe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,mJe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,gJe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,vJe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,yJe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,xJe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,_Je=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,bJe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,SJe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,wJe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,TJe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,EJe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,AJe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,CJe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,MJe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,DJe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,IJe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,PJe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,LJe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,RJe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,NJe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,kJe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,OJe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,BJe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,FJe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,UJe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,zJe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,VJe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,HJe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,GJe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const jJe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,WJe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,XJe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$Je=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,YJe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,qJe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KJe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ZJe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,QJe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,JJe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,eet=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,tet=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,net=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ret=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iet=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,aet=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,set=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oet=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uet=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,cet=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,het=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,det=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,fet=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pet=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,met=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,get=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vet=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yet=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,xet=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,_et=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bet=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wet=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Tet=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Eet=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gn={alphahash_fragment:WZe,alphahash_pars_fragment:XZe,alphamap_fragment:$Ze,alphamap_pars_fragment:YZe,alphatest_fragment:qZe,alphatest_pars_fragment:KZe,aomap_fragment:ZZe,aomap_pars_fragment:QZe,batching_pars_vertex:JZe,batching_vertex:eQe,begin_vertex:tQe,beginnormal_vertex:nQe,bsdfs:rQe,iridescence_fragment:iQe,bumpmap_pars_fragment:aQe,clipping_planes_fragment:sQe,clipping_planes_pars_fragment:oQe,clipping_planes_pars_vertex:lQe,clipping_planes_vertex:uQe,color_fragment:cQe,color_pars_fragment:hQe,color_pars_vertex:dQe,color_vertex:fQe,common:pQe,cube_uv_reflection_fragment:mQe,defaultnormal_vertex:gQe,displacementmap_pars_vertex:vQe,displacementmap_vertex:yQe,emissivemap_fragment:xQe,emissivemap_pars_fragment:_Qe,colorspace_fragment:bQe,colorspace_pars_fragment:SQe,envmap_fragment:wQe,envmap_common_pars_fragment:TQe,envmap_pars_fragment:EQe,envmap_pars_vertex:AQe,envmap_physical_pars_fragment:BQe,envmap_vertex:CQe,fog_vertex:MQe,fog_pars_vertex:DQe,fog_fragment:IQe,fog_pars_fragment:PQe,gradientmap_pars_fragment:LQe,lightmap_pars_fragment:RQe,lights_lambert_fragment:NQe,lights_lambert_pars_fragment:kQe,lights_pars_begin:OQe,lights_toon_fragment:FQe,lights_toon_pars_fragment:UQe,lights_phong_fragment:zQe,lights_phong_pars_fragment:VQe,lights_physical_fragment:HQe,lights_physical_pars_fragment:GQe,lights_fragment_begin:jQe,lights_fragment_maps:WQe,lights_fragment_end:XQe,logdepthbuf_fragment:$Qe,logdepthbuf_pars_fragment:YQe,logdepthbuf_pars_vertex:qQe,logdepthbuf_vertex:KQe,map_fragment:ZQe,map_pars_fragment:QQe,map_particle_fragment:JQe,map_particle_pars_fragment:eJe,metalnessmap_fragment:tJe,metalnessmap_pars_fragment:nJe,morphinstance_vertex:rJe,morphcolor_vertex:iJe,morphnormal_vertex:aJe,morphtarget_pars_vertex:sJe,morphtarget_vertex:oJe,normal_fragment_begin:lJe,normal_fragment_maps:uJe,normal_pars_fragment:cJe,normal_pars_vertex:hJe,normal_vertex:dJe,normalmap_pars_fragment:fJe,clearcoat_normal_fragment_begin:pJe,clearcoat_normal_fragment_maps:mJe,clearcoat_pars_fragment:gJe,iridescence_pars_fragment:vJe,opaque_fragment:yJe,packing:xJe,premultiplied_alpha_fragment:_Je,project_vertex:bJe,dithering_fragment:SJe,dithering_pars_fragment:wJe,roughnessmap_fragment:TJe,roughnessmap_pars_fragment:EJe,shadowmap_pars_fragment:AJe,shadowmap_pars_vertex:CJe,shadowmap_vertex:MJe,shadowmask_pars_fragment:DJe,skinbase_vertex:IJe,skinning_pars_vertex:PJe,skinning_vertex:LJe,skinnormal_vertex:RJe,specularmap_fragment:NJe,specularmap_pars_fragment:kJe,tonemapping_fragment:OJe,tonemapping_pars_fragment:BJe,transmission_fragment:FJe,transmission_pars_fragment:UJe,uv_pars_fragment:zJe,uv_pars_vertex:VJe,uv_vertex:HJe,worldpos_vertex:GJe,background_vert:jJe,background_frag:WJe,backgroundCube_vert:XJe,backgroundCube_frag:$Je,cube_vert:YJe,cube_frag:qJe,depth_vert:KJe,depth_frag:ZJe,distance_vert:QJe,distance_frag:JJe,equirect_vert:eet,equirect_frag:tet,linedashed_vert:net,linedashed_frag:ret,meshbasic_vert:iet,meshbasic_frag:aet,meshlambert_vert:set,meshlambert_frag:oet,meshmatcap_vert:uet,meshmatcap_frag:cet,meshnormal_vert:het,meshnormal_frag:det,meshphong_vert:fet,meshphong_frag:pet,meshphysical_vert:met,meshphysical_frag:get,meshtoon_vert:vet,meshtoon_frag:yet,points_vert:xet,points_frag:_et,shadow_vert:bet,shadow_frag:wet,sprite_vert:Tet,sprite_frag:Eet},bt={common:{diffuse:{value:new Tn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nn}},envmap:{envMap:{value:null},envMapRotation:{value:new Nn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nn},normalScale:{value:new or(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0},uvTransform:{value:new Nn}},sprite:{diffuse:{value:new Tn(16777215)},opacity:{value:1},center:{value:new or(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}}},Lh={basic:{uniforms:Zs([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.fog]),vertexShader:Gn.meshbasic_vert,fragmentShader:Gn.meshbasic_frag},lambert:{uniforms:Zs([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new Tn(0)}}]),vertexShader:Gn.meshlambert_vert,fragmentShader:Gn.meshlambert_frag},phong:{uniforms:Zs([bt.common,bt.specularmap,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,bt.lights,{emissive:{value:new Tn(0)},specular:{value:new Tn(1118481)},shininess:{value:30}}]),vertexShader:Gn.meshphong_vert,fragmentShader:Gn.meshphong_frag},standard:{uniforms:Zs([bt.common,bt.envmap,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.roughnessmap,bt.metalnessmap,bt.fog,bt.lights,{emissive:{value:new Tn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gn.meshphysical_vert,fragmentShader:Gn.meshphysical_frag},toon:{uniforms:Zs([bt.common,bt.aomap,bt.lightmap,bt.emissivemap,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.gradientmap,bt.fog,bt.lights,{emissive:{value:new Tn(0)}}]),vertexShader:Gn.meshtoon_vert,fragmentShader:Gn.meshtoon_frag},matcap:{uniforms:Zs([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,bt.fog,{matcap:{value:null}}]),vertexShader:Gn.meshmatcap_vert,fragmentShader:Gn.meshmatcap_frag},points:{uniforms:Zs([bt.points,bt.fog]),vertexShader:Gn.points_vert,fragmentShader:Gn.points_frag},dashed:{uniforms:Zs([bt.common,bt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gn.linedashed_vert,fragmentShader:Gn.linedashed_frag},depth:{uniforms:Zs([bt.common,bt.displacementmap]),vertexShader:Gn.depth_vert,fragmentShader:Gn.depth_frag},normal:{uniforms:Zs([bt.common,bt.bumpmap,bt.normalmap,bt.displacementmap,{opacity:{value:1}}]),vertexShader:Gn.meshnormal_vert,fragmentShader:Gn.meshnormal_frag},sprite:{uniforms:Zs([bt.sprite,bt.fog]),vertexShader:Gn.sprite_vert,fragmentShader:Gn.sprite_frag},background:{uniforms:{uvTransform:{value:new Nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gn.background_vert,fragmentShader:Gn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Nn}},vertexShader:Gn.backgroundCube_vert,fragmentShader:Gn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gn.cube_vert,fragmentShader:Gn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gn.equirect_vert,fragmentShader:Gn.equirect_frag},distance:{uniforms:Zs([bt.common,bt.displacementmap,{referencePosition:{value:new Te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gn.distance_vert,fragmentShader:Gn.distance_frag},shadow:{uniforms:Zs([bt.lights,bt.fog,{color:{value:new Tn(0)},opacity:{value:1}}]),vertexShader:Gn.shadow_vert,fragmentShader:Gn.shadow_frag}};Lh.physical={uniforms:Zs([Lh.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nn},clearcoatNormalScale:{value:new or(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nn},sheen:{value:0},sheenColor:{value:new Tn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nn},transmissionSamplerSize:{value:new or},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nn},attenuationDistance:{value:0},attenuationColor:{value:new Tn(0)},specularColor:{value:new Tn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nn},anisotropyVector:{value:new or},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nn}}]),vertexShader:Gn.meshphysical_vert,fragmentShader:Gn.meshphysical_frag};const WP={r:0,b:0,g:0},Rv=new Xa,Aet=new rn;function Cet(n,e,t,r,i,a,s){const o=new Tn(0);let l=a===!0?0:1,u,c,h=null,d=0,f=null;function p(S){let w=S.isScene===!0?S.background:null;return w&&w.isTexture&&(w=(S.backgroundBlurriness>0?t:e).get(w)),w}function m(S){let w=!1;const E=p(S);E===null?v(o,l):E&&E.isColor&&(v(E,1),w=!0);const T=n.xr.getEnvironmentBlendMode();T==="additive"?r.buffers.color.setClear(0,0,0,1,s):T==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,s),(n.autoClear||w)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(S,w){const E=p(w);E&&(E.isCubeTexture||E.mapping===B3)?(c===void 0&&(c=new Ou(new P2(1,1,1),new ld({name:"BackgroundCubeMaterial",uniforms:_S(Lh.backgroundCube.uniforms),vertexShader:Lh.backgroundCube.vertexShader,fragmentShader:Lh.backgroundCube.fragmentShader,side:Wo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(T,M,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),Rv.copy(w.backgroundRotation),Rv.x*=-1,Rv.y*=-1,Rv.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(Rv.y*=-1,Rv.z*=-1),c.material.uniforms.envMap.value=E,c.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Aet.makeRotationFromEuler(Rv)),c.material.toneMapped=Fn.getTransfer(E.colorSpace)!==Pr,(h!==E||d!==E.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=E,d=E.version,f=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null)):E&&E.isTexture&&(u===void 0&&(u=new Ou(new F3(2,2),new ld({name:"BackgroundMaterial",uniforms:_S(Lh.background.uniforms),vertexShader:Lh.background.vertexShader,fragmentShader:Lh.background.fragmentShader,side:Mg,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=E,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=Fn.getTransfer(E.colorSpace)!==Pr,E.matrixAutoUpdate===!0&&E.updateMatrix(),u.material.uniforms.uvTransform.value.copy(E.matrix),(h!==E||d!==E.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=E,d=E.version,f=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null))}function v(S,w){S.getRGB(WP,Yve(n)),r.buffers.color.setClear(WP.r,WP.g,WP.b,w,s)}function b(){c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(S,w=1){o.set(S),l=w,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,v(o,l)},render:m,addToRenderList:g,dispose:b}}function Met(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),r={},i=d(null);let a=i,s=!1;function o(D,R,B,k,V){let G=!1;const F=h(k,B,R);a!==F&&(a=F,u(a.object)),G=f(D,k,B,V),G&&p(D,k,B,V),V!==null&&e.update(V,n.ELEMENT_ARRAY_BUFFER),(G||s)&&(s=!1,w(D,R,B,k),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(V).buffer))}function l(){return n.createVertexArray()}function u(D){return n.bindVertexArray(D)}function c(D){return n.deleteVertexArray(D)}function h(D,R,B){const k=B.wireframe===!0;let V=r[D.id];V===void 0&&(V={},r[D.id]=V);let G=V[R.id];G===void 0&&(G={},V[R.id]=G);let F=G[k];return F===void 0&&(F=d(l()),G[k]=F),F}function d(D){const R=[],B=[],k=[];for(let V=0;V<t;V++)R[V]=0,B[V]=0,k[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:B,attributeDivisors:k,object:D,attributes:{},index:null}}function f(D,R,B,k){const V=a.attributes,G=R.attributes;let F=0;const X=B.getAttributes();for(const j in X)if(X[j].location>=0){const H=V[j];let K=G[j];if(K===void 0&&(j==="instanceMatrix"&&D.instanceMatrix&&(K=D.instanceMatrix),j==="instanceColor"&&D.instanceColor&&(K=D.instanceColor)),H===void 0||H.attribute!==K||K&&H.data!==K.data)return!0;F++}return a.attributesNum!==F||a.index!==k}function p(D,R,B,k){const V={},G=R.attributes;let F=0;const X=B.getAttributes();for(const j in X)if(X[j].location>=0){let H=G[j];H===void 0&&(j==="instanceMatrix"&&D.instanceMatrix&&(H=D.instanceMatrix),j==="instanceColor"&&D.instanceColor&&(H=D.instanceColor));const K={};K.attribute=H,H&&H.data&&(K.data=H.data),V[j]=K,F++}a.attributes=V,a.attributesNum=F,a.index=k}function m(){const D=a.newAttributes;for(let R=0,B=D.length;R<B;R++)D[R]=0}function g(D){v(D,0)}function v(D,R){const B=a.newAttributes,k=a.enabledAttributes,V=a.attributeDivisors;B[D]=1,k[D]===0&&(n.enableVertexAttribArray(D),k[D]=1),V[D]!==R&&(n.vertexAttribDivisor(D,R),V[D]=R)}function b(){const D=a.newAttributes,R=a.enabledAttributes;for(let B=0,k=R.length;B<k;B++)R[B]!==D[B]&&(n.disableVertexAttribArray(B),R[B]=0)}function S(D,R,B,k,V,G,F){F===!0?n.vertexAttribIPointer(D,R,B,V,G):n.vertexAttribPointer(D,R,B,k,V,G)}function w(D,R,B,k){m();const V=k.attributes,G=B.getAttributes(),F=R.defaultAttributeValues;for(const X in G){const j=G[X];if(j.location>=0){let Q=V[X];if(Q===void 0&&(X==="instanceMatrix"&&D.instanceMatrix&&(Q=D.instanceMatrix),X==="instanceColor"&&D.instanceColor&&(Q=D.instanceColor)),Q!==void 0){const H=Q.normalized,K=Q.itemSize,te=e.get(Q);if(te===void 0)continue;const Y=te.buffer,de=te.type,ge=te.bytesPerElement,se=de===n.INT||de===n.UNSIGNED_INT||Q.gpuType===oW;if(Q.isInterleavedBufferAttribute){const he=Q.data,fe=he.stride,Ee=Q.offset;if(he.isInstancedInterleavedBuffer){for(let Ce=0;Ce<j.locationSize;Ce++)v(j.location+Ce,he.meshPerAttribute);D.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let Ce=0;Ce<j.locationSize;Ce++)g(j.location+Ce);n.bindBuffer(n.ARRAY_BUFFER,Y);for(let Ce=0;Ce<j.locationSize;Ce++)S(j.location+Ce,K/j.locationSize,de,H,fe*ge,(Ee+K/j.locationSize*Ce)*ge,se)}else{if(Q.isInstancedBufferAttribute){for(let he=0;he<j.locationSize;he++)v(j.location+he,Q.meshPerAttribute);D.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let he=0;he<j.locationSize;he++)g(j.location+he);n.bindBuffer(n.ARRAY_BUFFER,Y);for(let he=0;he<j.locationSize;he++)S(j.location+he,K/j.locationSize,de,H,K*ge,K/j.locationSize*he*ge,se)}}else if(F!==void 0){const H=F[X];if(H!==void 0)switch(H.length){case 2:n.vertexAttrib2fv(j.location,H);break;case 3:n.vertexAttrib3fv(j.location,H);break;case 4:n.vertexAttrib4fv(j.location,H);break;default:n.vertexAttrib1fv(j.location,H)}}}}b()}function E(){P();for(const D in r){const R=r[D];for(const B in R){const k=R[B];for(const V in k)c(k[V].object),delete k[V];delete R[B]}delete r[D]}}function T(D){if(r[D.id]===void 0)return;const R=r[D.id];for(const B in R){const k=R[B];for(const V in k)c(k[V].object),delete k[V];delete R[B]}delete r[D.id]}function M(D){for(const R in r){const B=r[R];if(B[D.id]===void 0)continue;const k=B[D.id];for(const V in k)c(k[V].object),delete k[V];delete B[D.id]}}function P(){I(),s=!0,a!==i&&(a=i,u(a.object))}function I(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:o,reset:P,resetDefaultState:I,dispose:E,releaseStatesOfGeometry:T,releaseStatesOfProgram:M,initAttributes:m,enableAttribute:g,disableUnusedAttributes:b}}function Det(n,e,t){let r;function i(u){r=u}function a(u,c){n.drawArrays(r,u,c),t.update(c,r,1)}function s(u,c,h){h!==0&&(n.drawArraysInstanced(r,u,c,h),t.update(c,r,h))}function o(u,c,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,u,0,c,0,h);let f=0;for(let p=0;p<h;p++)f+=c[p];t.update(f,r,1)}function l(u,c,h,d){if(h===0)return;const f=e.get("WEBGL_multi_draw");if(f===null)for(let p=0;p<u.length;p++)s(u[p],c[p],d[p]);else{f.multiDrawArraysInstancedWEBGL(r,u,0,c,0,d,0,h);let p=0;for(let m=0;m<h;m++)p+=c[m]*d[m];t.update(p,r,1)}}this.setMode=i,this.render=a,this.renderInstances=s,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function Iet(n,e,t,r){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(M){return!(M!==Iu&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(M){const P=M===Jf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==Ml&&r.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==Sc&&!P)}function l(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(an("WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const h=t.logarithmicDepthBuffer===!0,d=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),S=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=n.getParameter(n.MAX_SAMPLES),T=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:l,textureFormatReadable:s,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:h,reversedDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:b,maxVaryings:S,maxFragmentUniforms:w,maxSamples:E,samples:T}}function Pet(n){const e=this;let t=null,r=0,i=!1,a=!1;const s=new Gv,o=new Nn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||r!==0||i;return i=d,r=h.length,f},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(h,d){t=c(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,m=h.clipIntersection,g=h.clipShadows,v=n.get(h);if(!i||p===null||p.length===0||a&&!g)a?c(null):u();else{const b=a?0:r,S=b*4;let w=v.clippingState||null;l.value=w,w=c(p,d,S,f);for(let E=0;E!==S;++E)w[E]=t[E];v.clippingState=w,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=b}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,d,f,p){const m=h!==null?h.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const v=f+m*4,b=d.matrixWorldInverse;o.getNormalMatrix(b),(g===null||g.length<v)&&(g=new Float32Array(v));for(let S=0,w=f;S!==m;++S,w+=4)s.copy(h[S]).applyMatrix4(b,o),s.normal.toArray(g,w),g[w+3]=s.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function Let(n){let e=new WeakMap;function t(s,o){return o===XN?s.mapping=Yy:o===mV&&(s.mapping=gS),s}function r(s){if(s&&s.isTexture){const o=s.mapping;if(o===XN||o===mV)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new Zve(l.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const o=s.target;o.removeEventListener("dispose",i);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function a(){e=new WeakMap}return{get:r,dispose:a}}const ug=4,rae=[.125,.215,.35,.446,.526,.582],Qv=20,Ret=256,PT=new TW,iae=new Tn;let C6=null,M6=0,D6=0,I6=!1;const Net=new Te;class aae{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,r=.1,i=100,a={}){const{size:s=256,position:o=Net}=a;C6=this._renderer.getRenderTarget(),M6=this._renderer.getActiveCubeFace(),D6=this._renderer.getActiveMipmapLevel(),I6=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lae(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=oae(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(C6,M6,D6),this._renderer.xr.enabled=I6,e.scissorTest=!1,D_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Yy||e.mapping===gS?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),C6=this._renderer.getRenderTarget(),M6=this._renderer.getActiveCubeFace(),D6=this._renderer.getActiveMipmapLevel(),I6=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ks,minFilter:ks,generateMipmaps:!1,type:Jf,format:Iu,colorSpace:yS,depthBuffer:!1},i=sae(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=sae(e,t,r);const{_lodMax:a}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=ket(a)),this._blurMaterial=Bet(a,e,t),this._ggxMaterial=Oet(a,e,t)}return i}_compileMaterial(e){const t=new Ou(new Nl,e);this._renderer.compile(t,PT)}_sceneToCubeUV(e,t,r,i,a){const l=new uo(90,1,t,r),u=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,f=h.toneMapping;h.getClearColor(iae),h.toneMapping=qh,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(i),h.clearDepth(),h.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Ou(new P2,new Xve({name:"PMREM.Background",side:Wo,depthWrite:!1,depthTest:!1})));const m=this._backgroundBox,g=m.material;let v=!1;const b=e.background;b?b.isColor&&(g.color.copy(b),e.background=null,v=!0):(g.color.copy(iae),v=!0);for(let S=0;S<6;S++){const w=S%3;w===0?(l.up.set(0,u[S],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x+c[S],a.y,a.z)):w===1?(l.up.set(0,0,u[S]),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y+c[S],a.z)):(l.up.set(0,u[S],0),l.position.set(a.x,a.y,a.z),l.lookAt(a.x,a.y,a.z+c[S]));const E=this._cubeSize;D_(i,w*E,S>2?E:0,E,E),h.setRenderTarget(i),v&&h.render(m,l),h.render(e,l)}h.toneMapping=f,h.autoClear=d,e.background=b}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Yy||e.mapping===gS;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=lae()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=oae());const a=i?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=a;const o=a.uniforms;o.envMap.value=e;const l=this._cubeSize;D_(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,PT)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let a=1;a<i;a++)this._applyGGXFilter(e,a-1,a);t.autoClear=r}_applyGGXFilter(e,t,r){const i=this._renderer,a=this._pingPongRenderTarget,s=this._ggxMaterial,o=this._lodMeshes[r];o.material=s;const l=s.uniforms,u=r/(this._lodMeshes.length-1),c=t/(this._lodMeshes.length-1),h=Math.sqrt(u*u-c*c),d=0+u*1.25,f=h*d,{_lodMax:p}=this,m=this._sizeLods[r],g=3*m*(r>p-ug?r-p+ug:0),v=4*(this._cubeSize-m);l.envMap.value=e.texture,l.roughness.value=f,l.mipInt.value=p-t,D_(a,g,v,3*m,2*m),i.setRenderTarget(a),i.render(o,PT),l.envMap.value=a.texture,l.roughness.value=0,l.mipInt.value=p-r,D_(e,g,v,3*m,2*m),i.setRenderTarget(e),i.render(o,PT)}_blur(e,t,r,i,a){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",a),this._halfBlur(s,e,r,r,i,"longitudinal",a)}_halfBlur(e,t,r,i,a,s,o){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&yn("blur direction must be either latitudinal or longitudinal!");const c=3,h=this._lodMeshes[i];h.material=u;const d=u.uniforms,f=this._sizeLods[r]-1,p=isFinite(a)?Math.PI/(2*f):2*Math.PI/(2*Qv-1),m=a/p,g=isFinite(a)?1+Math.floor(c*m):Qv;g>Qv&&an(`sigmaRadians, ${a}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Qv}`);const v=[];let b=0;for(let M=0;M<Qv;++M){const P=M/m,I=Math.exp(-P*P/2);v.push(I),M===0?b+=I:M<g&&(b+=2*I)}for(let M=0;M<v.length;M++)v[M]=v[M]/b;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=v,d.latitudinal.value=s==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:S}=this;d.dTheta.value=p,d.mipInt.value=S-r;const w=this._sizeLods[i],E=3*w*(i>S-ug?i-S+ug:0),T=4*(this._cubeSize-w);D_(t,E,T,3*w,2*w),l.setRenderTarget(t),l.render(h,PT)}}function ket(n){const e=[],t=[],r=[];let i=n;const a=n-ug+1+rae.length;for(let s=0;s<a;s++){const o=Math.pow(2,i);e.push(o);let l=1/o;s>n-ug?l=rae[s-n+ug-1]:s===0&&(l=0),t.push(l);const u=1/(o-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,m=3,g=2,v=1,b=new Float32Array(m*p*f),S=new Float32Array(g*p*f),w=new Float32Array(v*p*f);for(let T=0;T<f;T++){const M=T%3*2/3-1,P=T>2?0:-1,I=[M,P,0,M+2/3,P,0,M+2/3,P+1,0,M,P,0,M+2/3,P+1,0,M,P+1,0];b.set(I,m*p*T),S.set(d,g*p*T);const D=[T,T,T,T,T,T];w.set(D,v*p*T)}const E=new Nl;E.setAttribute("position",new Zh(b,m)),E.setAttribute("uv",new Zh(S,g)),E.setAttribute("faceIndex",new Zh(w,v)),r.push(new Ou(E,null)),i>ug&&i--}return{lodMeshes:r,sizeLods:e,sigmas:t}}function sae(n,e,t){const r=new Kh(n,e,t);return r.texture.mapping=B3,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function D_(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function Oet(n,e,t){return new ld({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:Ret,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:V3(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Ff,depthTest:!1,depthWrite:!1})}function Bet(n,e,t){const r=new Float32Array(Qv),i=new Te(0,1,0);return new ld({name:"SphericalGaussianBlur",defines:{n:Qv,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:V3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ff,depthTest:!1,depthWrite:!1})}function oae(){return new ld({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:V3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ff,depthTest:!1,depthWrite:!1})}function lae(){return new ld({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:V3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ff,depthTest:!1,depthWrite:!1})}function V3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Fet(n){let e=new WeakMap,t=null;function r(o){if(o&&o.isTexture){const l=o.mapping,u=l===XN||l===mV,c=l===Yy||l===gS;if(u||c){let h=e.get(o);const d=h!==void 0?h.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==d)return t===null&&(t=new aae(n)),h=u?t.fromEquirectangular(o,h):t.fromCubemap(o,h),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),h.texture;if(h!==void 0)return h.texture;{const f=o.image;return u&&f&&f.height>0||c&&f&&i(f)?(t===null&&(t=new aae(n)),h=u?t.fromEquirectangular(o):t.fromCubemap(o),h.texture.pmremVersion=o.pmremVersion,e.set(o,h),o.addEventListener("dispose",a),h.texture):null}}}return o}function i(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function a(o){const l=o.target;l.removeEventListener("dispose",a);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function Uet(n){const e={};function t(r){if(e[r]!==void 0)return e[r];const i=n.getExtension(r);return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(r){const i=t(r);return i===null&&XA("WebGLRenderer: "+r+" extension not supported."),i}}}function zet(n,e,t,r){const i={},a=new WeakMap;function s(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",s),delete i[d.id];const f=a.get(d);f&&(e.remove(f),a.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(h,d){return i[d.id]===!0||(d.addEventListener("dispose",s),i[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const f in d)e.update(d[f],n.ARRAY_BUFFER)}function u(h){const d=[],f=h.index,p=h.attributes.position;let m=0;if(f!==null){const b=f.array;m=f.version;for(let S=0,w=b.length;S<w;S+=3){const E=b[S+0],T=b[S+1],M=b[S+2];d.push(E,T,T,M,M,E)}}else if(p!==void 0){const b=p.array;m=p.version;for(let S=0,w=b.length/3-1;S<w;S+=3){const E=S+0,T=S+1,M=S+2;d.push(E,T,T,M,M,E)}}else return;const g=new(Hve(d)?$ve:xW)(d,1);g.version=m;const v=a.get(h);v&&e.remove(v),a.set(h,g)}function c(h){const d=a.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&u(h)}else u(h);return a.get(h)}return{get:o,update:l,getWireframeAttribute:c}}function Vet(n,e,t){let r;function i(d){r=d}let a,s;function o(d){a=d.type,s=d.bytesPerElement}function l(d,f){n.drawElements(r,f,a,d*s),t.update(f,r,1)}function u(d,f,p){p!==0&&(n.drawElementsInstanced(r,f,a,d*s,p),t.update(f,r,p))}function c(d,f,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,f,0,a,d,0,p);let g=0;for(let v=0;v<p;v++)g+=f[v];t.update(g,r,1)}function h(d,f,p,m){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<d.length;v++)u(d[v]/s,f[v],m[v]);else{g.multiDrawElementsInstancedWEBGL(r,f,0,a,d,0,m,0,p);let v=0;for(let b=0;b<p;b++)v+=f[b]*m[b];t.update(v,r,1)}}this.setMode=i,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=h}function Het(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(a,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(a/3);break;case n.LINES:t.lines+=o*(a/2);break;case n.LINE_STRIP:t.lines+=o*(a-1);break;case n.LINE_LOOP:t.lines+=o*a;break;case n.POINTS:t.points+=o*a;break;default:yn("WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function Get(n,e,t){const r=new WeakMap,i=new Tr;function a(s,o,l){const u=s.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,h=c!==void 0?c.length:0;let d=r.get(o);if(d===void 0||d.count!==h){let I=function(){M.dispose(),r.delete(o),o.removeEventListener("dispose",I)};d!==void 0&&d.texture.dispose();const f=o.morphAttributes.position!==void 0,p=o.morphAttributes.normal!==void 0,m=o.morphAttributes.color!==void 0,g=o.morphAttributes.position||[],v=o.morphAttributes.normal||[],b=o.morphAttributes.color||[];let S=0;f===!0&&(S=1),p===!0&&(S=2),m===!0&&(S=3);let w=o.attributes.position.count*S,E=1;w>e.maxTextureSize&&(E=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const T=new Float32Array(w*E*4*h),M=new Gve(T,w,E,h);M.type=Sc,M.needsUpdate=!0;const P=S*4;for(let D=0;D<h;D++){const R=g[D],B=v[D],k=b[D],V=w*E*4*D;for(let G=0;G<R.count;G++){const F=G*P;f===!0&&(i.fromBufferAttribute(R,G),T[V+F+0]=i.x,T[V+F+1]=i.y,T[V+F+2]=i.z,T[V+F+3]=0),p===!0&&(i.fromBufferAttribute(B,G),T[V+F+4]=i.x,T[V+F+5]=i.y,T[V+F+6]=i.z,T[V+F+7]=0),m===!0&&(i.fromBufferAttribute(k,G),T[V+F+8]=i.x,T[V+F+9]=i.y,T[V+F+10]=i.z,T[V+F+11]=k.itemSize===4?i.w:1)}}d={count:h,texture:M,size:new or(w,E)},r.set(o,d),o.addEventListener("dispose",I)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",s.morphTexture,t);else{let f=0;for(let m=0;m<u.length;m++)f+=u[m];const p=o.morphTargetsRelative?1:1-f;l.getUniforms().setValue(n,"morphTargetBaseInfluence",p),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:a}}function jet(n,e,t,r){let i=new WeakMap;function a(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==u&&(d.update(),i.set(d,u))}return h}function s(){i=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:a,dispose:s}}const Wet={[Cve]:"LINEAR_TONE_MAPPING",[Mve]:"REINHARD_TONE_MAPPING",[Dve]:"CINEON_TONE_MAPPING",[Ive]:"ACES_FILMIC_TONE_MAPPING",[Lve]:"AGX_TONE_MAPPING",[Rve]:"NEUTRAL_TONE_MAPPING",[Pve]:"CUSTOM_TONE_MAPPING"};function Xet(n,e,t,r,i){const a=new Kh(e,t,{type:n,depthBuffer:r,stencilBuffer:i}),s=new Kh(e,t,{type:Jf,depthBuffer:!1,stencilBuffer:!1}),o=new Nl;o.setAttribute("position",new Rs([-1,3,0,-1,-1,0,3,-1,0],3)),o.setAttribute("uv",new Rs([0,2,0,0,2,0],2));const l=new cZe({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),u=new Ou(o,l),c=new TW(-1,1,1,-1,0,1);let h=null,d=null,f=!1,p,m=null,g=[],v=!1;this.setSize=function(b,S){a.setSize(b,S),s.setSize(b,S);for(let w=0;w<g.length;w++){const E=g[w];E.setSize&&E.setSize(b,S)}},this.setEffects=function(b){g=b,v=g.length>0&&g[0].isRenderPass===!0;const S=a.width,w=a.height;for(let E=0;E<g.length;E++){const T=g[E];T.setSize&&T.setSize(S,w)}},this.begin=function(b,S){if(f||b.toneMapping===qh&&g.length===0)return!1;if(m=S,S!==null){const w=S.width,E=S.height;(a.width!==w||a.height!==E)&&this.setSize(w,E)}return v===!1&&b.setRenderTarget(a),p=b.toneMapping,b.toneMapping=qh,!0},this.hasRenderPass=function(){return v},this.end=function(b,S){b.toneMapping=p,f=!0;let w=a,E=s;for(let T=0;T<g.length;T++){const M=g[T];if(M.enabled!==!1&&(M.render(b,E,w,S),M.needsSwap!==!1)){const P=w;w=E,E=P}}if(h!==b.outputColorSpace||d!==b.toneMapping){h=b.outputColorSpace,d=b.toneMapping,l.defines={},Fn.getTransfer(h)===Pr&&(l.defines.SRGB_TRANSFER="");const T=Wet[d];T&&(l.defines[T]=""),l.needsUpdate=!0}l.uniforms.tDiffuse.value=w.texture,b.setRenderTarget(m),b.render(u,c),m=null,f=!1},this.isCompositing=function(){return f},this.dispose=function(){a.dispose(),s.dispose(),o.dispose(),l.dispose()}}const u0e=new ms,eH=new $A(1,1),c0e=new Gve,h0e=new yKe,d0e=new Kve,uae=[],cae=[],hae=new Float32Array(16),dae=new Float32Array(9),fae=new Float32Array(4);function iw(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let a=uae[i];if(a===void 0&&(a=new Float32Array(i),uae[i]=a),e!==0){r.toArray(a,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(a,o)}return a}function Ca(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function Ma(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function H3(n,e){let t=cae[e];t===void 0&&(t=new Int32Array(e),cae[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function $et(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Yet(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ca(t,e))return;n.uniform2fv(this.addr,e),Ma(t,e)}}function qet(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ca(t,e))return;n.uniform3fv(this.addr,e),Ma(t,e)}}function Ket(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ca(t,e))return;n.uniform4fv(this.addr,e),Ma(t,e)}}function Zet(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ca(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ma(t,e)}else{if(Ca(t,r))return;fae.set(r),n.uniformMatrix2fv(this.addr,!1,fae),Ma(t,r)}}function Qet(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ca(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ma(t,e)}else{if(Ca(t,r))return;dae.set(r),n.uniformMatrix3fv(this.addr,!1,dae),Ma(t,r)}}function Jet(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(Ca(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ma(t,e)}else{if(Ca(t,r))return;hae.set(r),n.uniformMatrix4fv(this.addr,!1,hae),Ma(t,r)}}function ett(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function ttt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ca(t,e))return;n.uniform2iv(this.addr,e),Ma(t,e)}}function ntt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ca(t,e))return;n.uniform3iv(this.addr,e),Ma(t,e)}}function rtt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ca(t,e))return;n.uniform4iv(this.addr,e),Ma(t,e)}}function itt(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function att(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ca(t,e))return;n.uniform2uiv(this.addr,e),Ma(t,e)}}function stt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ca(t,e))return;n.uniform3uiv(this.addr,e),Ma(t,e)}}function ott(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ca(t,e))return;n.uniform4uiv(this.addr,e),Ma(t,e)}}function ltt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i);let a;this.type===n.SAMPLER_2D_SHADOW?(eH.compareFunction=t.isReversedDepthBuffer()?mW:pW,a=eH):a=u0e,t.setTexture2D(e||a,i)}function utt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||h0e,i)}function ctt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||d0e,i)}function htt(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||c0e,i)}function dtt(n){switch(n){case 5126:return $et;case 35664:return Yet;case 35665:return qet;case 35666:return Ket;case 35674:return Zet;case 35675:return Qet;case 35676:return Jet;case 5124:case 35670:return ett;case 35667:case 35671:return ttt;case 35668:case 35672:return ntt;case 35669:case 35673:return rtt;case 5125:return itt;case 36294:return att;case 36295:return stt;case 36296:return ott;case 35678:case 36198:case 36298:case 36306:case 35682:return ltt;case 35679:case 36299:case 36307:return utt;case 35680:case 36300:case 36308:case 36293:return ctt;case 36289:case 36303:case 36311:case 36292:return htt}}function ftt(n,e){n.uniform1fv(this.addr,e)}function ptt(n,e){const t=iw(e,this.size,2);n.uniform2fv(this.addr,t)}function mtt(n,e){const t=iw(e,this.size,3);n.uniform3fv(this.addr,t)}function gtt(n,e){const t=iw(e,this.size,4);n.uniform4fv(this.addr,t)}function vtt(n,e){const t=iw(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ytt(n,e){const t=iw(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function xtt(n,e){const t=iw(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _tt(n,e){n.uniform1iv(this.addr,e)}function btt(n,e){n.uniform2iv(this.addr,e)}function Stt(n,e){n.uniform3iv(this.addr,e)}function wtt(n,e){n.uniform4iv(this.addr,e)}function Ttt(n,e){n.uniform1uiv(this.addr,e)}function Ett(n,e){n.uniform2uiv(this.addr,e)}function Att(n,e){n.uniform3uiv(this.addr,e)}function Ctt(n,e){n.uniform4uiv(this.addr,e)}function Mtt(n,e,t){const r=this.cache,i=e.length,a=H3(t,i);Ca(r,a)||(n.uniform1iv(this.addr,a),Ma(r,a));let s;this.type===n.SAMPLER_2D_SHADOW?s=eH:s=u0e;for(let o=0;o!==i;++o)t.setTexture2D(e[o]||s,a[o])}function Dtt(n,e,t){const r=this.cache,i=e.length,a=H3(t,i);Ca(r,a)||(n.uniform1iv(this.addr,a),Ma(r,a));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||h0e,a[s])}function Itt(n,e,t){const r=this.cache,i=e.length,a=H3(t,i);Ca(r,a)||(n.uniform1iv(this.addr,a),Ma(r,a));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||d0e,a[s])}function Ptt(n,e,t){const r=this.cache,i=e.length,a=H3(t,i);Ca(r,a)||(n.uniform1iv(this.addr,a),Ma(r,a));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||c0e,a[s])}function Ltt(n){switch(n){case 5126:return ftt;case 35664:return ptt;case 35665:return mtt;case 35666:return gtt;case 35674:return vtt;case 35675:return ytt;case 35676:return xtt;case 5124:case 35670:return _tt;case 35667:case 35671:return btt;case 35668:case 35672:return Stt;case 35669:case 35673:return wtt;case 5125:return Ttt;case 36294:return Ett;case 36295:return Att;case 36296:return Ctt;case 35678:case 36198:case 36298:case 36306:case 35682:return Mtt;case 35679:case 36299:case 36307:return Dtt;case 35680:case 36300:case 36308:case 36293:return Itt;case 36289:case 36303:case 36311:case 36292:return Ptt}}class Rtt{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=dtt(t.type)}}class Ntt{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Ltt(t.type)}}class ktt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let a=0,s=i.length;a!==s;++a){const o=i[a];o.setValue(e,t[o.id],r)}}}const P6=/(\w+)(\])?(\[|\.)?/g;function pae(n,e){n.seq.push(e),n.map[e.id]=e}function Ott(n,e,t){const r=n.name,i=r.length;for(P6.lastIndex=0;;){const a=P6.exec(r),s=P6.lastIndex;let o=a[1];const l=a[2]==="]",u=a[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===i){pae(t,u===void 0?new Rtt(o,n,e):new Ntt(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new ktt(o),pae(t,h)),t=h}}}class jL{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<r;++s){const o=e.getActiveUniform(t,s),l=e.getUniformLocation(t,o.name);Ott(o,l,this)}const i=[],a=[];for(const s of this.seq)s.type===e.SAMPLER_2D_SHADOW||s.type===e.SAMPLER_CUBE_SHADOW||s.type===e.SAMPLER_2D_ARRAY_SHADOW?i.push(s):a.push(s);i.length>0&&(this.seq=i.concat(a))}setValue(e,t,r,i){const a=this.map[t];a!==void 0&&a.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let a=0,s=t.length;a!==s;++a){const o=t[a],l=r[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,a=e.length;i!==a;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function mae(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}const Btt=37297;let Ftt=0;function Utt(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let s=i;s<a;s++){const o=s+1;r.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return r.join(`
`)}const gae=new Nn;function ztt(n){Fn._getMatrix(gae,Fn.workingColorSpace,n);const e=`mat3( ${gae.elements.map(t=>t.toFixed(4))} )`;switch(Fn.getTransfer(n)){case YN:return[e,"LinearTransferOETF"];case Pr:return[e,"sRGBTransferOETF"];default:return an("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function vae(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),a=(n.getShaderInfoLog(e)||"").trim();if(r&&a==="")return"";const s=/ERROR: 0:(\d+)/.exec(a);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+a+`

`+Utt(n.getShaderSource(e),o)}else return a}function Vtt(n,e){const t=ztt(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const Htt={[Cve]:"Linear",[Mve]:"Reinhard",[Dve]:"Cineon",[Ive]:"ACESFilmic",[Lve]:"AgX",[Rve]:"Neutral",[Pve]:"Custom"};function Gtt(n,e){const t=Htt[e];return t===void 0?(an("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const XP=new Te;function jtt(){Fn.getLuminanceCoefficients(XP);const n=XP.x.toFixed(4),e=XP.y.toFixed(4),t=XP.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Wtt(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(sE).join(`
`)}function Xtt(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function $tt(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const a=n.getActiveAttrib(e,i),s=a.name;let o=1;a.type===n.FLOAT_MAT2&&(o=2),a.type===n.FLOAT_MAT3&&(o=3),a.type===n.FLOAT_MAT4&&(o=4),t[s]={type:a.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function sE(n){return n!==""}function yae(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xae(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Ytt=/^[ \t]*#include +<([\w\d./]+)>/gm;function tH(n){return n.replace(Ytt,Ktt)}const qtt=new Map;function Ktt(n,e){let t=Gn[e];if(t===void 0){const r=qtt.get(e);if(r!==void 0)t=Gn[r],an('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return tH(t)}const Ztt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _ae(n){return n.replace(Ztt,Qtt)}function Qtt(n,e,t,r){let i="";for(let a=parseInt(e);a<parseInt(t);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function bae(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const Jtt={[UL]:"SHADOWMAP_TYPE_PCF",[iE]:"SHADOWMAP_TYPE_VSM"};function ent(n){return Jtt[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const tnt={[Yy]:"ENVMAP_TYPE_CUBE",[gS]:"ENVMAP_TYPE_CUBE",[B3]:"ENVMAP_TYPE_CUBE_UV"};function nnt(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":tnt[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const rnt={[gS]:"ENVMAP_MODE_REFRACTION"};function int(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":rnt[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const ant={[O3]:"ENVMAP_BLENDING_MULTIPLY",[kqe]:"ENVMAP_BLENDING_MIX",[Oqe]:"ENVMAP_BLENDING_ADD"};function snt(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":ant[n.combine]||"ENVMAP_BLENDING_NONE"}function ont(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}function lnt(n,e,t,r){const i=n.getContext(),a=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=ent(t),u=nnt(t),c=int(t),h=snt(t),d=ont(t),f=Wtt(t),p=Xtt(a),m=i.createProgram();let g,v,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(sE).join(`
`),g.length>0&&(g+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(sE).join(`
`),v.length>0&&(v+=`
`)):(g=[bae(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(sE).join(`
`),v=[bae(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qh?"#define TONE_MAPPING":"",t.toneMapping!==qh?Gn.tonemapping_pars_fragment:"",t.toneMapping!==qh?Gtt("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Gn.colorspace_pars_fragment,Vtt("linearToOutputTexel",t.outputColorSpace),jtt(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(sE).join(`
`)),s=tH(s),s=yae(s,t),s=xae(s,t),o=tH(o),o=yae(o,t),o=xae(o,t),s=_ae(s),o=_ae(o),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",t.glslVersion===bie?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===bie?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const S=b+g+s,w=b+v+o,E=mae(i,i.VERTEX_SHADER,S),T=mae(i,i.FRAGMENT_SHADER,w);i.attachShader(m,E),i.attachShader(m,T),t.index0AttributeName!==void 0?i.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m);function M(R){if(n.debug.checkShaderErrors){const B=i.getProgramInfoLog(m)||"",k=i.getShaderInfoLog(E)||"",V=i.getShaderInfoLog(T)||"",G=B.trim(),F=k.trim(),X=V.trim();let j=!0,Q=!0;if(i.getProgramParameter(m,i.LINK_STATUS)===!1)if(j=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,m,E,T);else{const H=vae(i,E,"vertex"),K=vae(i,T,"fragment");yn("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+G+`
`+H+`
`+K)}else G!==""?an("WebGLProgram: Program Info Log:",G):(F===""||X==="")&&(Q=!1);Q&&(R.diagnostics={runnable:j,programLog:G,vertexShader:{log:F,prefix:g},fragmentShader:{log:X,prefix:v}})}i.deleteShader(E),i.deleteShader(T),P=new jL(i,m),I=$tt(i,m)}let P;this.getUniforms=function(){return P===void 0&&M(this),P};let I;this.getAttributes=function(){return I===void 0&&M(this),I};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=i.getProgramParameter(m,Btt)),D},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Ftt++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=E,this.fragmentShader=T,this}let unt=0;class cnt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),a=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(a)===!1&&(s.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new hnt(e),t.set(e,r)),r}}class hnt{constructor(e){this.id=unt++,this.code=e,this.usedTimes=0}}function dnt(n,e,t,r,i,a,s){const o=new jve,l=new cnt,u=new Set,c=[],h=new Map,d=i.logarithmicDepthBuffer;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(I){return u.add(I),I===0?"uv":`uv${I}`}function g(I,D,R,B,k){const V=B.fog,G=k.geometry,F=I.isMeshStandardMaterial?B.environment:null,X=(I.isMeshStandardMaterial?t:e).get(I.envMap||F),j=X&&X.mapping===B3?X.image.height:null,Q=p[I.type];I.precision!==null&&(f=i.getMaxPrecision(I.precision),f!==I.precision&&an("WebGLProgram.getParameters:",I.precision,"not supported, using",f,"instead."));const H=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,K=H!==void 0?H.length:0;let te=0;G.morphAttributes.position!==void 0&&(te=1),G.morphAttributes.normal!==void 0&&(te=2),G.morphAttributes.color!==void 0&&(te=3);let Y,de,ge,se;if(Q){const Xn=Lh[Q];Y=Xn.vertexShader,de=Xn.fragmentShader}else Y=I.vertexShader,de=I.fragmentShader,l.update(I),ge=l.getVertexShaderID(I),se=l.getFragmentShaderID(I);const he=n.getRenderTarget(),fe=n.state.buffers.depth.getReversed(),Ee=k.isInstancedMesh===!0,Ce=k.isBatchedMesh===!0,Re=!!I.map,He=!!I.matcap,pt=!!X,lt=!!I.aoMap,Mt=!!I.lightMap,mt=!!I.bumpMap,on=!!I.normalMap,ce=!!I.displacementMap,ln=!!I.emissiveMap,gn=!!I.metalnessMap,Cn=!!I.roughnessMap,ht=I.anisotropy>0,ie=I.clearcoat>0,Z=I.dispersion>0,_e=I.iridescence>0,le=I.sheen>0,xe=I.transmission>0,we=ht&&!!I.anisotropyMap,$e=ie&&!!I.clearcoatMap,Ve=ie&&!!I.clearcoatNormalMap,ft=ie&&!!I.clearcoatRoughnessMap,Vt=_e&&!!I.iridescenceMap,Ge=_e&&!!I.iridescenceThicknessMap,ot=le&&!!I.sheenColorMap,Et=le&&!!I.sheenRoughnessMap,gt=!!I.specularMap,nt=!!I.specularColorMap,Zt=!!I.specularIntensityMap,me=xe&&!!I.transmissionMap,yt=xe&&!!I.thicknessMap,tt=!!I.gradientMap,xt=!!I.alphaMap,Ze=I.alphaTest>0,Le=!!I.alphaHash,Ye=!!I.extensions;let Ht=qh;I.toneMapped&&(he===null||he.isXRRenderTarget===!0)&&(Ht=n.toneMapping);const Dn={shaderID:Q,shaderType:I.type,shaderName:I.name,vertexShader:Y,fragmentShader:de,defines:I.defines,customVertexShaderID:ge,customFragmentShaderID:se,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:f,batching:Ce,batchingColor:Ce&&k._colorsTexture!==null,instancing:Ee,instancingColor:Ee&&k.instanceColor!==null,instancingMorph:Ee&&k.morphTexture!==null,outputColorSpace:he===null?n.outputColorSpace:he.isXRRenderTarget===!0?he.texture.colorSpace:yS,alphaToCoverage:!!I.alphaToCoverage,map:Re,matcap:He,envMap:pt,envMapMode:pt&&X.mapping,envMapCubeUVHeight:j,aoMap:lt,lightMap:Mt,bumpMap:mt,normalMap:on,displacementMap:ce,emissiveMap:ln,normalMapObjectSpace:on&&I.normalMapType===Vqe,normalMapTangentSpace:on&&I.normalMapType===fW,metalnessMap:gn,roughnessMap:Cn,anisotropy:ht,anisotropyMap:we,clearcoat:ie,clearcoatMap:$e,clearcoatNormalMap:Ve,clearcoatRoughnessMap:ft,dispersion:Z,iridescence:_e,iridescenceMap:Vt,iridescenceThicknessMap:Ge,sheen:le,sheenColorMap:ot,sheenRoughnessMap:Et,specularMap:gt,specularColorMap:nt,specularIntensityMap:Zt,transmission:xe,transmissionMap:me,thicknessMap:yt,gradientMap:tt,opaque:I.transparent===!1&&I.blending===Sb&&I.alphaToCoverage===!1,alphaMap:xt,alphaTest:Ze,alphaHash:Le,combine:I.combine,mapUv:Re&&m(I.map.channel),aoMapUv:lt&&m(I.aoMap.channel),lightMapUv:Mt&&m(I.lightMap.channel),bumpMapUv:mt&&m(I.bumpMap.channel),normalMapUv:on&&m(I.normalMap.channel),displacementMapUv:ce&&m(I.displacementMap.channel),emissiveMapUv:ln&&m(I.emissiveMap.channel),metalnessMapUv:gn&&m(I.metalnessMap.channel),roughnessMapUv:Cn&&m(I.roughnessMap.channel),anisotropyMapUv:we&&m(I.anisotropyMap.channel),clearcoatMapUv:$e&&m(I.clearcoatMap.channel),clearcoatNormalMapUv:Ve&&m(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ft&&m(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Vt&&m(I.iridescenceMap.channel),iridescenceThicknessMapUv:Ge&&m(I.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&m(I.sheenColorMap.channel),sheenRoughnessMapUv:Et&&m(I.sheenRoughnessMap.channel),specularMapUv:gt&&m(I.specularMap.channel),specularColorMapUv:nt&&m(I.specularColorMap.channel),specularIntensityMapUv:Zt&&m(I.specularIntensityMap.channel),transmissionMapUv:me&&m(I.transmissionMap.channel),thicknessMapUv:yt&&m(I.thicknessMap.channel),alphaMapUv:xt&&m(I.alphaMap.channel),vertexTangents:!!G.attributes.tangent&&(on||ht),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!G.attributes.color&&G.attributes.color.itemSize===4,pointsUvs:k.isPoints===!0&&!!G.attributes.uv&&(Re||xt),fog:!!V,useFog:I.fog===!0,fogExp2:!!V&&V.isFogExp2,flatShading:I.flatShading===!0&&I.wireframe===!1,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:d,reversedDepthBuffer:fe,skinning:k.isSkinnedMesh===!0,morphTargets:G.morphAttributes.position!==void 0,morphNormals:G.morphAttributes.normal!==void 0,morphColors:G.morphAttributes.color!==void 0,morphTargetsCount:K,morphTextureStride:te,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ht,decodeVideoTexture:Re&&I.map.isVideoTexture===!0&&Fn.getTransfer(I.map.colorSpace)===Pr,decodeVideoTextureEmissive:ln&&I.emissiveMap.isVideoTexture===!0&&Fn.getTransfer(I.emissiveMap.colorSpace)===Pr,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Af,flipSided:I.side===Wo,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Ye&&I.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ye&&I.extensions.multiDraw===!0||Ce)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Dn.vertexUv1s=u.has(1),Dn.vertexUv2s=u.has(2),Dn.vertexUv3s=u.has(3),u.clear(),Dn}function v(I){const D=[];if(I.shaderID?D.push(I.shaderID):(D.push(I.customVertexShaderID),D.push(I.customFragmentShaderID)),I.defines!==void 0)for(const R in I.defines)D.push(R),D.push(I.defines[R]);return I.isRawShaderMaterial===!1&&(b(D,I),S(D,I),D.push(n.outputColorSpace)),D.push(I.customProgramCacheKey),D.join()}function b(I,D){I.push(D.precision),I.push(D.outputColorSpace),I.push(D.envMapMode),I.push(D.envMapCubeUVHeight),I.push(D.mapUv),I.push(D.alphaMapUv),I.push(D.lightMapUv),I.push(D.aoMapUv),I.push(D.bumpMapUv),I.push(D.normalMapUv),I.push(D.displacementMapUv),I.push(D.emissiveMapUv),I.push(D.metalnessMapUv),I.push(D.roughnessMapUv),I.push(D.anisotropyMapUv),I.push(D.clearcoatMapUv),I.push(D.clearcoatNormalMapUv),I.push(D.clearcoatRoughnessMapUv),I.push(D.iridescenceMapUv),I.push(D.iridescenceThicknessMapUv),I.push(D.sheenColorMapUv),I.push(D.sheenRoughnessMapUv),I.push(D.specularMapUv),I.push(D.specularColorMapUv),I.push(D.specularIntensityMapUv),I.push(D.transmissionMapUv),I.push(D.thicknessMapUv),I.push(D.combine),I.push(D.fogExp2),I.push(D.sizeAttenuation),I.push(D.morphTargetsCount),I.push(D.morphAttributeCount),I.push(D.numDirLights),I.push(D.numPointLights),I.push(D.numSpotLights),I.push(D.numSpotLightMaps),I.push(D.numHemiLights),I.push(D.numRectAreaLights),I.push(D.numDirLightShadows),I.push(D.numPointLightShadows),I.push(D.numSpotLightShadows),I.push(D.numSpotLightShadowsWithMaps),I.push(D.numLightProbes),I.push(D.shadowMapType),I.push(D.toneMapping),I.push(D.numClippingPlanes),I.push(D.numClipIntersection),I.push(D.depthPacking)}function S(I,D){o.disableAll(),D.instancing&&o.enable(0),D.instancingColor&&o.enable(1),D.instancingMorph&&o.enable(2),D.matcap&&o.enable(3),D.envMap&&o.enable(4),D.normalMapObjectSpace&&o.enable(5),D.normalMapTangentSpace&&o.enable(6),D.clearcoat&&o.enable(7),D.iridescence&&o.enable(8),D.alphaTest&&o.enable(9),D.vertexColors&&o.enable(10),D.vertexAlphas&&o.enable(11),D.vertexUv1s&&o.enable(12),D.vertexUv2s&&o.enable(13),D.vertexUv3s&&o.enable(14),D.vertexTangents&&o.enable(15),D.anisotropy&&o.enable(16),D.alphaHash&&o.enable(17),D.batching&&o.enable(18),D.dispersion&&o.enable(19),D.batchingColor&&o.enable(20),D.gradientMap&&o.enable(21),I.push(o.mask),o.disableAll(),D.fog&&o.enable(0),D.useFog&&o.enable(1),D.flatShading&&o.enable(2),D.logarithmicDepthBuffer&&o.enable(3),D.reversedDepthBuffer&&o.enable(4),D.skinning&&o.enable(5),D.morphTargets&&o.enable(6),D.morphNormals&&o.enable(7),D.morphColors&&o.enable(8),D.premultipliedAlpha&&o.enable(9),D.shadowMapEnabled&&o.enable(10),D.doubleSided&&o.enable(11),D.flipSided&&o.enable(12),D.useDepthPacking&&o.enable(13),D.dithering&&o.enable(14),D.transmission&&o.enable(15),D.sheen&&o.enable(16),D.opaque&&o.enable(17),D.pointsUvs&&o.enable(18),D.decodeVideoTexture&&o.enable(19),D.decodeVideoTextureEmissive&&o.enable(20),D.alphaToCoverage&&o.enable(21),I.push(o.mask)}function w(I){const D=p[I.type];let R;if(D){const B=Lh[D];R=PKe.clone(B.uniforms)}else R=I.uniforms;return R}function E(I,D){let R=h.get(D);return R!==void 0?++R.usedTimes:(R=new lnt(n,D,I,a),c.push(R),h.set(D,R)),R}function T(I){if(--I.usedTimes===0){const D=c.indexOf(I);c[D]=c[c.length-1],c.pop(),h.delete(I.cacheKey),I.destroy()}}function M(I){l.remove(I)}function P(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:w,acquireProgram:E,releaseProgram:T,releaseShaderCache:M,programs:c,dispose:P}}function fnt(){let n=new WeakMap;function e(s){return n.has(s)}function t(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function r(s){n.delete(s)}function i(s,o,l){n.get(s)[o]=l}function a(){n=new WeakMap}return{has:e,get:t,remove:r,update:i,dispose:a}}function pnt(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Sae(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function wae(){const n=[];let e=0;const t=[],r=[],i=[];function a(){e=0,t.length=0,r.length=0,i.length=0}function s(h,d,f,p,m,g){let v=n[e];return v===void 0?(v={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:m,group:g},n[e]=v):(v.id=h.id,v.object=h,v.geometry=d,v.material=f,v.groupOrder=p,v.renderOrder=h.renderOrder,v.z=m,v.group=g),e++,v}function o(h,d,f,p,m,g){const v=s(h,d,f,p,m,g);f.transmission>0?r.push(v):f.transparent===!0?i.push(v):t.push(v)}function l(h,d,f,p,m,g){const v=s(h,d,f,p,m,g);f.transmission>0?r.unshift(v):f.transparent===!0?i.unshift(v):t.unshift(v)}function u(h,d){t.length>1&&t.sort(h||pnt),r.length>1&&r.sort(d||Sae),i.length>1&&i.sort(d||Sae)}function c(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:r,transparent:i,init:a,push:o,unshift:l,finish:c,sort:u}}function mnt(){let n=new WeakMap;function e(r,i){const a=n.get(r);let s;return a===void 0?(s=new wae,n.set(r,[s])):i>=a.length?(s=new wae,a.push(s)):s=a[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function gnt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Te,color:new Tn};break;case"SpotLight":t={position:new Te,direction:new Te,color:new Tn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Te,color:new Tn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Te,skyColor:new Tn,groundColor:new Tn};break;case"RectAreaLight":t={color:new Tn,position:new Te,halfWidth:new Te,halfHeight:new Te};break}return n[e.id]=t,t}}}function vnt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new or};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new or};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new or,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let ynt=0;function xnt(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function _nt(n){const e=new gnt,t=vnt(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new Te);const i=new Te,a=new rn,s=new rn;function o(u){let c=0,h=0,d=0;for(let I=0;I<9;I++)r.probe[I].set(0,0,0);let f=0,p=0,m=0,g=0,v=0,b=0,S=0,w=0,E=0,T=0,M=0;u.sort(xnt);for(let I=0,D=u.length;I<D;I++){const R=u[I],B=R.color,k=R.intensity,V=R.distance;let G=null;if(R.shadow&&R.shadow.map&&(R.shadow.map.texture.format===vS?G=R.shadow.map.texture:G=R.shadow.map.depthTexture||R.shadow.map.texture),R.isAmbientLight)c+=B.r*k,h+=B.g*k,d+=B.b*k;else if(R.isLightProbe){for(let F=0;F<9;F++)r.probe[F].addScaledVector(R.sh.coefficients[F],k);M++}else if(R.isDirectionalLight){const F=e.get(R);if(F.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const X=R.shadow,j=t.get(R);j.shadowIntensity=X.intensity,j.shadowBias=X.bias,j.shadowNormalBias=X.normalBias,j.shadowRadius=X.radius,j.shadowMapSize=X.mapSize,r.directionalShadow[f]=j,r.directionalShadowMap[f]=G,r.directionalShadowMatrix[f]=R.shadow.matrix,b++}r.directional[f]=F,f++}else if(R.isSpotLight){const F=e.get(R);F.position.setFromMatrixPosition(R.matrixWorld),F.color.copy(B).multiplyScalar(k),F.distance=V,F.coneCos=Math.cos(R.angle),F.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),F.decay=R.decay,r.spot[m]=F;const X=R.shadow;if(R.map&&(r.spotLightMap[E]=R.map,E++,X.updateMatrices(R),R.castShadow&&T++),r.spotLightMatrix[m]=X.matrix,R.castShadow){const j=t.get(R);j.shadowIntensity=X.intensity,j.shadowBias=X.bias,j.shadowNormalBias=X.normalBias,j.shadowRadius=X.radius,j.shadowMapSize=X.mapSize,r.spotShadow[m]=j,r.spotShadowMap[m]=G,w++}m++}else if(R.isRectAreaLight){const F=e.get(R);F.color.copy(B).multiplyScalar(k),F.halfWidth.set(R.width*.5,0,0),F.halfHeight.set(0,R.height*.5,0),r.rectArea[g]=F,g++}else if(R.isPointLight){const F=e.get(R);if(F.color.copy(R.color).multiplyScalar(R.intensity),F.distance=R.distance,F.decay=R.decay,R.castShadow){const X=R.shadow,j=t.get(R);j.shadowIntensity=X.intensity,j.shadowBias=X.bias,j.shadowNormalBias=X.normalBias,j.shadowRadius=X.radius,j.shadowMapSize=X.mapSize,j.shadowCameraNear=X.camera.near,j.shadowCameraFar=X.camera.far,r.pointShadow[p]=j,r.pointShadowMap[p]=G,r.pointShadowMatrix[p]=R.shadow.matrix,S++}r.point[p]=F,p++}else if(R.isHemisphereLight){const F=e.get(R);F.skyColor.copy(R.color).multiplyScalar(k),F.groundColor.copy(R.groundColor).multiplyScalar(k),r.hemi[v]=F,v++}}g>0&&(n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=bt.LTC_FLOAT_1,r.rectAreaLTC2=bt.LTC_FLOAT_2):(r.rectAreaLTC1=bt.LTC_HALF_1,r.rectAreaLTC2=bt.LTC_HALF_2)),r.ambient[0]=c,r.ambient[1]=h,r.ambient[2]=d;const P=r.hash;(P.directionalLength!==f||P.pointLength!==p||P.spotLength!==m||P.rectAreaLength!==g||P.hemiLength!==v||P.numDirectionalShadows!==b||P.numPointShadows!==S||P.numSpotShadows!==w||P.numSpotMaps!==E||P.numLightProbes!==M)&&(r.directional.length=f,r.spot.length=m,r.rectArea.length=g,r.point.length=p,r.hemi.length=v,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=S,r.spotLightMatrix.length=w+E-T,r.spotLightMap.length=E,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=M,P.directionalLength=f,P.pointLength=p,P.spotLength=m,P.rectAreaLength=g,P.hemiLength=v,P.numDirectionalShadows=b,P.numPointShadows=S,P.numSpotShadows=w,P.numSpotMaps=E,P.numLightProbes=M,r.version=ynt++)}function l(u,c){let h=0,d=0,f=0,p=0,m=0;const g=c.matrixWorldInverse;for(let v=0,b=u.length;v<b;v++){const S=u[v];if(S.isDirectionalLight){const w=r.directional[h];w.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(g),h++}else if(S.isSpotLight){const w=r.spot[f];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(g),w.direction.setFromMatrixPosition(S.matrixWorld),i.setFromMatrixPosition(S.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(g),f++}else if(S.isRectAreaLight){const w=r.rectArea[p];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(g),s.identity(),a.copy(S.matrixWorld),a.premultiply(g),s.extractRotation(a),w.halfWidth.set(S.width*.5,0,0),w.halfHeight.set(0,S.height*.5,0),w.halfWidth.applyMatrix4(s),w.halfHeight.applyMatrix4(s),p++}else if(S.isPointLight){const w=r.point[d];w.position.setFromMatrixPosition(S.matrixWorld),w.position.applyMatrix4(g),d++}else if(S.isHemisphereLight){const w=r.hemi[m];w.direction.setFromMatrixPosition(S.matrixWorld),w.direction.transformDirection(g),m++}}}return{setup:o,setupView:l,state:r}}function Tae(n){const e=new _nt(n),t=[],r=[];function i(c){u.camera=c,t.length=0,r.length=0}function a(c){t.push(c)}function s(c){r.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:u,setupLights:o,setupLightsView:l,pushLight:a,pushShadow:s}}function bnt(n){let e=new WeakMap;function t(i,a=0){const s=e.get(i);let o;return s===void 0?(o=new Tae(n),e.set(i,[o])):a>=s.length?(o=new Tae(n),s.push(o)):o=s[a],o}function r(){e=new WeakMap}return{get:t,dispose:r}}const Snt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,wnt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,Tnt=[new Te(1,0,0),new Te(-1,0,0),new Te(0,1,0),new Te(0,-1,0),new Te(0,0,1),new Te(0,0,-1)],Ent=[new Te(0,-1,0),new Te(0,-1,0),new Te(0,0,1),new Te(0,0,-1),new Te(0,-1,0),new Te(0,-1,0)],Eae=new rn,LT=new Te,L6=new Te;function Ant(n,e,t){let r=new bW;const i=new or,a=new or,s=new Tr,o=new dZe,l=new fZe,u={},c=t.maxTextureSize,h={[Mg]:Wo,[Wo]:Mg,[Af]:Af},d=new ld({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new or},radius:{value:4}},vertexShader:Snt,fragmentShader:wnt}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Nl;p.setAttribute("position",new Zh(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Ou(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=UL;let v=this.type;this.render=function(T,M,P){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||T.length===0)return;T.type===gqe&&(an("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),T.type=UL);const I=n.getRenderTarget(),D=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),B=n.state;B.setBlending(Ff),B.buffers.depth.getReversed()===!0?B.buffers.color.setClear(0,0,0,0):B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const k=v!==this.type;k&&M.traverse(function(V){V.material&&(Array.isArray(V.material)?V.material.forEach(G=>G.needsUpdate=!0):V.material.needsUpdate=!0)});for(let V=0,G=T.length;V<G;V++){const F=T[V],X=F.shadow;if(X===void 0){an("WebGLShadowMap:",F,"has no shadow.");continue}if(X.autoUpdate===!1&&X.needsUpdate===!1)continue;i.copy(X.mapSize);const j=X.getFrameExtents();if(i.multiply(j),a.copy(X.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/j.x),i.x=a.x*j.x,X.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/j.y),i.y=a.y*j.y,X.mapSize.y=a.y)),X.map===null||k===!0){if(X.map!==null&&(X.map.depthTexture!==null&&(X.map.depthTexture.dispose(),X.map.depthTexture=null),X.map.dispose()),this.type===iE){if(F.isPointLight){an("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}X.map=new Kh(i.x,i.y,{format:vS,type:Jf,minFilter:ks,magFilter:ks,generateMipmaps:!1}),X.map.texture.name=F.name+".shadowMap",X.map.depthTexture=new $A(i.x,i.y,Sc),X.map.depthTexture.name=F.name+".shadowMapDepth",X.map.depthTexture.format=ep,X.map.depthTexture.compareFunction=null,X.map.depthTexture.minFilter=ps,X.map.depthTexture.magFilter=ps}else{F.isPointLight?(X.map=new Zve(i.x),X.map.depthTexture=new jKe(i.x,od)):(X.map=new Kh(i.x,i.y),X.map.depthTexture=new $A(i.x,i.y,od)),X.map.depthTexture.name=F.name+".shadowMap",X.map.depthTexture.format=ep;const H=n.state.buffers.depth.getReversed();this.type===UL?(X.map.depthTexture.compareFunction=H?mW:pW,X.map.depthTexture.minFilter=ks,X.map.depthTexture.magFilter=ks):(X.map.depthTexture.compareFunction=null,X.map.depthTexture.minFilter=ps,X.map.depthTexture.magFilter=ps)}X.camera.updateProjectionMatrix()}const Q=X.map.isWebGLCubeRenderTarget?6:1;for(let H=0;H<Q;H++){if(X.map.isWebGLCubeRenderTarget)n.setRenderTarget(X.map,H),n.clear();else{H===0&&(n.setRenderTarget(X.map),n.clear());const K=X.getViewport(H);s.set(a.x*K.x,a.y*K.y,a.x*K.z,a.y*K.w),B.viewport(s)}if(F.isPointLight){const K=X.camera,te=X.matrix,Y=F.distance||K.far;Y!==K.far&&(K.far=Y,K.updateProjectionMatrix()),LT.setFromMatrixPosition(F.matrixWorld),K.position.copy(LT),L6.copy(K.position),L6.add(Tnt[H]),K.up.copy(Ent[H]),K.lookAt(L6),K.updateMatrixWorld(),te.makeTranslation(-LT.x,-LT.y,-LT.z),Eae.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),X._frustum.setFromProjectionMatrix(Eae,K.coordinateSystem,K.reversedDepth)}else X.updateMatrices(F);r=X.getFrustum(),w(M,P,X.camera,F,this.type)}X.isPointLightShadow!==!0&&this.type===iE&&b(X,P),X.needsUpdate=!1}v=this.type,g.needsUpdate=!1,n.setRenderTarget(I,D,R)};function b(T,M){const P=e.update(m);d.defines.VSM_SAMPLES!==T.blurSamples&&(d.defines.VSM_SAMPLES=T.blurSamples,f.defines.VSM_SAMPLES=T.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new Kh(i.x,i.y,{format:vS,type:Jf})),d.uniforms.shadow_pass.value=T.map.depthTexture,d.uniforms.resolution.value=T.mapSize,d.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(M,null,P,d,m,null),f.uniforms.shadow_pass.value=T.mapPass.texture,f.uniforms.resolution.value=T.mapSize,f.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(M,null,P,f,m,null)}function S(T,M,P,I){let D=null;const R=P.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(R!==void 0)D=R;else if(D=P.isPointLight===!0?l:o,n.localClippingEnabled&&M.clipShadows===!0&&Array.isArray(M.clippingPlanes)&&M.clippingPlanes.length!==0||M.displacementMap&&M.displacementScale!==0||M.alphaMap&&M.alphaTest>0||M.map&&M.alphaTest>0||M.alphaToCoverage===!0){const B=D.uuid,k=M.uuid;let V=u[B];V===void 0&&(V={},u[B]=V);let G=V[k];G===void 0&&(G=D.clone(),V[k]=G,M.addEventListener("dispose",E)),D=G}if(D.visible=M.visible,D.wireframe=M.wireframe,I===iE?D.side=M.shadowSide!==null?M.shadowSide:M.side:D.side=M.shadowSide!==null?M.shadowSide:h[M.side],D.alphaMap=M.alphaMap,D.alphaTest=M.alphaToCoverage===!0?.5:M.alphaTest,D.map=M.map,D.clipShadows=M.clipShadows,D.clippingPlanes=M.clippingPlanes,D.clipIntersection=M.clipIntersection,D.displacementMap=M.displacementMap,D.displacementScale=M.displacementScale,D.displacementBias=M.displacementBias,D.wireframeLinewidth=M.wireframeLinewidth,D.linewidth=M.linewidth,P.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const B=n.properties.get(D);B.light=P}return D}function w(T,M,P,I,D){if(T.visible===!1)return;if(T.layers.test(M.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&D===iE)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,T.matrixWorld);const k=e.update(T),V=T.material;if(Array.isArray(V)){const G=k.groups;for(let F=0,X=G.length;F<X;F++){const j=G[F],Q=V[j.materialIndex];if(Q&&Q.visible){const H=S(T,Q,I,D);T.onBeforeShadow(n,T,M,P,k,H,j),n.renderBufferDirect(P,null,k,H,T,j),T.onAfterShadow(n,T,M,P,k,H,j)}}}else if(V.visible){const G=S(T,V,I,D);T.onBeforeShadow(n,T,M,P,k,G,null),n.renderBufferDirect(P,null,k,G,T,null),T.onAfterShadow(n,T,M,P,k,G,null)}}const B=T.children;for(let k=0,V=B.length;k<V;k++)w(B[k],M,P,I,D)}function E(T){T.target.removeEventListener("dispose",E);for(const P in u){const I=u[P],D=T.target.uuid;D in I&&(I[D].dispose(),delete I[D])}}}const Cnt={[lV]:uV,[cV]:fV,[hV]:pV,[mS]:dV,[uV]:lV,[fV]:cV,[pV]:hV,[dV]:mS};function Mnt(n,e){function t(){let me=!1;const yt=new Tr;let tt=null;const xt=new Tr(0,0,0,0);return{setMask:function(Ze){tt!==Ze&&!me&&(n.colorMask(Ze,Ze,Ze,Ze),tt=Ze)},setLocked:function(Ze){me=Ze},setClear:function(Ze,Le,Ye,Ht,Dn){Dn===!0&&(Ze*=Ht,Le*=Ht,Ye*=Ht),yt.set(Ze,Le,Ye,Ht),xt.equals(yt)===!1&&(n.clearColor(Ze,Le,Ye,Ht),xt.copy(yt))},reset:function(){me=!1,tt=null,xt.set(-1,0,0,0)}}}function r(){let me=!1,yt=!1,tt=null,xt=null,Ze=null;return{setReversed:function(Le){if(yt!==Le){const Ye=e.get("EXT_clip_control");Le?Ye.clipControlEXT(Ye.LOWER_LEFT_EXT,Ye.ZERO_TO_ONE_EXT):Ye.clipControlEXT(Ye.LOWER_LEFT_EXT,Ye.NEGATIVE_ONE_TO_ONE_EXT),yt=Le;const Ht=Ze;Ze=null,this.setClear(Ht)}},getReversed:function(){return yt},setTest:function(Le){Le?he(n.DEPTH_TEST):fe(n.DEPTH_TEST)},setMask:function(Le){tt!==Le&&!me&&(n.depthMask(Le),tt=Le)},setFunc:function(Le){if(yt&&(Le=Cnt[Le]),xt!==Le){switch(Le){case lV:n.depthFunc(n.NEVER);break;case uV:n.depthFunc(n.ALWAYS);break;case cV:n.depthFunc(n.LESS);break;case mS:n.depthFunc(n.LEQUAL);break;case hV:n.depthFunc(n.EQUAL);break;case dV:n.depthFunc(n.GEQUAL);break;case fV:n.depthFunc(n.GREATER);break;case pV:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}xt=Le}},setLocked:function(Le){me=Le},setClear:function(Le){Ze!==Le&&(yt&&(Le=1-Le),n.clearDepth(Le),Ze=Le)},reset:function(){me=!1,tt=null,xt=null,Ze=null,yt=!1}}}function i(){let me=!1,yt=null,tt=null,xt=null,Ze=null,Le=null,Ye=null,Ht=null,Dn=null;return{setTest:function(Xn){me||(Xn?he(n.STENCIL_TEST):fe(n.STENCIL_TEST))},setMask:function(Xn){yt!==Xn&&!me&&(n.stencilMask(Xn),yt=Xn)},setFunc:function(Xn,gr,Rr){(tt!==Xn||xt!==gr||Ze!==Rr)&&(n.stencilFunc(Xn,gr,Rr),tt=Xn,xt=gr,Ze=Rr)},setOp:function(Xn,gr,Rr){(Le!==Xn||Ye!==gr||Ht!==Rr)&&(n.stencilOp(Xn,gr,Rr),Le=Xn,Ye=gr,Ht=Rr)},setLocked:function(Xn){me=Xn},setClear:function(Xn){Dn!==Xn&&(n.clearStencil(Xn),Dn=Xn)},reset:function(){me=!1,yt=null,tt=null,xt=null,Ze=null,Le=null,Ye=null,Ht=null,Dn=null}}}const a=new t,s=new r,o=new i,l=new WeakMap,u=new WeakMap;let c={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,v=null,b=null,S=null,w=null,E=null,T=null,M=new Tn(0,0,0),P=0,I=!1,D=null,R=null,B=null,k=null,V=null;const G=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,X=0;const j=n.getParameter(n.VERSION);j.indexOf("WebGL")!==-1?(X=parseFloat(/^WebGL (\d)/.exec(j)[1]),F=X>=1):j.indexOf("OpenGL ES")!==-1&&(X=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),F=X>=2);let Q=null,H={};const K=n.getParameter(n.SCISSOR_BOX),te=n.getParameter(n.VIEWPORT),Y=new Tr().fromArray(K),de=new Tr().fromArray(te);function ge(me,yt,tt,xt){const Ze=new Uint8Array(4),Le=n.createTexture();n.bindTexture(me,Le),n.texParameteri(me,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(me,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ye=0;Ye<tt;Ye++)me===n.TEXTURE_3D||me===n.TEXTURE_2D_ARRAY?n.texImage3D(yt,0,n.RGBA,1,1,xt,0,n.RGBA,n.UNSIGNED_BYTE,Ze):n.texImage2D(yt+Ye,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ze);return Le}const se={};se[n.TEXTURE_2D]=ge(n.TEXTURE_2D,n.TEXTURE_2D,1),se[n.TEXTURE_CUBE_MAP]=ge(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),se[n.TEXTURE_2D_ARRAY]=ge(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),se[n.TEXTURE_3D]=ge(n.TEXTURE_3D,n.TEXTURE_3D,1,1),a.setClear(0,0,0,1),s.setClear(1),o.setClear(0),he(n.DEPTH_TEST),s.setFunc(mS),mt(!1),on(hie),he(n.CULL_FACE),lt(Ff);function he(me){c[me]!==!0&&(n.enable(me),c[me]=!0)}function fe(me){c[me]!==!1&&(n.disable(me),c[me]=!1)}function Ee(me,yt){return h[me]!==yt?(n.bindFramebuffer(me,yt),h[me]=yt,me===n.DRAW_FRAMEBUFFER&&(h[n.FRAMEBUFFER]=yt),me===n.FRAMEBUFFER&&(h[n.DRAW_FRAMEBUFFER]=yt),!0):!1}function Ce(me,yt){let tt=f,xt=!1;if(me){tt=d.get(yt),tt===void 0&&(tt=[],d.set(yt,tt));const Ze=me.textures;if(tt.length!==Ze.length||tt[0]!==n.COLOR_ATTACHMENT0){for(let Le=0,Ye=Ze.length;Le<Ye;Le++)tt[Le]=n.COLOR_ATTACHMENT0+Le;tt.length=Ze.length,xt=!0}}else tt[0]!==n.BACK&&(tt[0]=n.BACK,xt=!0);xt&&n.drawBuffers(tt)}function Re(me){return p!==me?(n.useProgram(me),p=me,!0):!1}const He={[Zv]:n.FUNC_ADD,[yqe]:n.FUNC_SUBTRACT,[xqe]:n.FUNC_REVERSE_SUBTRACT};He[_qe]=n.MIN,He[bqe]=n.MAX;const pt={[Sqe]:n.ZERO,[wqe]:n.ONE,[Tqe]:n.SRC_COLOR,[sV]:n.SRC_ALPHA,[Iqe]:n.SRC_ALPHA_SATURATE,[Mqe]:n.DST_COLOR,[Aqe]:n.DST_ALPHA,[Eqe]:n.ONE_MINUS_SRC_COLOR,[oV]:n.ONE_MINUS_SRC_ALPHA,[Dqe]:n.ONE_MINUS_DST_COLOR,[Cqe]:n.ONE_MINUS_DST_ALPHA,[Pqe]:n.CONSTANT_COLOR,[Lqe]:n.ONE_MINUS_CONSTANT_COLOR,[Rqe]:n.CONSTANT_ALPHA,[Nqe]:n.ONE_MINUS_CONSTANT_ALPHA};function lt(me,yt,tt,xt,Ze,Le,Ye,Ht,Dn,Xn){if(me===Ff){m===!0&&(fe(n.BLEND),m=!1);return}if(m===!1&&(he(n.BLEND),m=!0),me!==vqe){if(me!==g||Xn!==I){if((v!==Zv||w!==Zv)&&(n.blendEquation(n.FUNC_ADD),v=Zv,w=Zv),Xn)switch(me){case Sb:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case die:n.blendFunc(n.ONE,n.ONE);break;case fie:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case pie:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:yn("WebGLState: Invalid blending: ",me);break}else switch(me){case Sb:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case die:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case fie:yn("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case pie:yn("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:yn("WebGLState: Invalid blending: ",me);break}b=null,S=null,E=null,T=null,M.set(0,0,0),P=0,g=me,I=Xn}return}Ze=Ze||yt,Le=Le||tt,Ye=Ye||xt,(yt!==v||Ze!==w)&&(n.blendEquationSeparate(He[yt],He[Ze]),v=yt,w=Ze),(tt!==b||xt!==S||Le!==E||Ye!==T)&&(n.blendFuncSeparate(pt[tt],pt[xt],pt[Le],pt[Ye]),b=tt,S=xt,E=Le,T=Ye),(Ht.equals(M)===!1||Dn!==P)&&(n.blendColor(Ht.r,Ht.g,Ht.b,Dn),M.copy(Ht),P=Dn),g=me,I=!1}function Mt(me,yt){me.side===Af?fe(n.CULL_FACE):he(n.CULL_FACE);let tt=me.side===Wo;yt&&(tt=!tt),mt(tt),me.blending===Sb&&me.transparent===!1?lt(Ff):lt(me.blending,me.blendEquation,me.blendSrc,me.blendDst,me.blendEquationAlpha,me.blendSrcAlpha,me.blendDstAlpha,me.blendColor,me.blendAlpha,me.premultipliedAlpha),s.setFunc(me.depthFunc),s.setTest(me.depthTest),s.setMask(me.depthWrite),a.setMask(me.colorWrite);const xt=me.stencilWrite;o.setTest(xt),xt&&(o.setMask(me.stencilWriteMask),o.setFunc(me.stencilFunc,me.stencilRef,me.stencilFuncMask),o.setOp(me.stencilFail,me.stencilZFail,me.stencilZPass)),ln(me.polygonOffset,me.polygonOffsetFactor,me.polygonOffsetUnits),me.alphaToCoverage===!0?he(n.SAMPLE_ALPHA_TO_COVERAGE):fe(n.SAMPLE_ALPHA_TO_COVERAGE)}function mt(me){D!==me&&(me?n.frontFace(n.CW):n.frontFace(n.CCW),D=me)}function on(me){me!==pqe?(he(n.CULL_FACE),me!==R&&(me===hie?n.cullFace(n.BACK):me===mqe?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):fe(n.CULL_FACE),R=me}function ce(me){me!==B&&(F&&n.lineWidth(me),B=me)}function ln(me,yt,tt){me?(he(n.POLYGON_OFFSET_FILL),(k!==yt||V!==tt)&&(n.polygonOffset(yt,tt),k=yt,V=tt)):fe(n.POLYGON_OFFSET_FILL)}function gn(me){me?he(n.SCISSOR_TEST):fe(n.SCISSOR_TEST)}function Cn(me){me===void 0&&(me=n.TEXTURE0+G-1),Q!==me&&(n.activeTexture(me),Q=me)}function ht(me,yt,tt){tt===void 0&&(Q===null?tt=n.TEXTURE0+G-1:tt=Q);let xt=H[tt];xt===void 0&&(xt={type:void 0,texture:void 0},H[tt]=xt),(xt.type!==me||xt.texture!==yt)&&(Q!==tt&&(n.activeTexture(tt),Q=tt),n.bindTexture(me,yt||se[me]),xt.type=me,xt.texture=yt)}function ie(){const me=H[Q];me!==void 0&&me.type!==void 0&&(n.bindTexture(me.type,null),me.type=void 0,me.texture=void 0)}function Z(){try{n.compressedTexImage2D(...arguments)}catch(me){yn("WebGLState:",me)}}function _e(){try{n.compressedTexImage3D(...arguments)}catch(me){yn("WebGLState:",me)}}function le(){try{n.texSubImage2D(...arguments)}catch(me){yn("WebGLState:",me)}}function xe(){try{n.texSubImage3D(...arguments)}catch(me){yn("WebGLState:",me)}}function we(){try{n.compressedTexSubImage2D(...arguments)}catch(me){yn("WebGLState:",me)}}function $e(){try{n.compressedTexSubImage3D(...arguments)}catch(me){yn("WebGLState:",me)}}function Ve(){try{n.texStorage2D(...arguments)}catch(me){yn("WebGLState:",me)}}function ft(){try{n.texStorage3D(...arguments)}catch(me){yn("WebGLState:",me)}}function Vt(){try{n.texImage2D(...arguments)}catch(me){yn("WebGLState:",me)}}function Ge(){try{n.texImage3D(...arguments)}catch(me){yn("WebGLState:",me)}}function ot(me){Y.equals(me)===!1&&(n.scissor(me.x,me.y,me.z,me.w),Y.copy(me))}function Et(me){de.equals(me)===!1&&(n.viewport(me.x,me.y,me.z,me.w),de.copy(me))}function gt(me,yt){let tt=u.get(yt);tt===void 0&&(tt=new WeakMap,u.set(yt,tt));let xt=tt.get(me);xt===void 0&&(xt=n.getUniformBlockIndex(yt,me.name),tt.set(me,xt))}function nt(me,yt){const xt=u.get(yt).get(me);l.get(yt)!==xt&&(n.uniformBlockBinding(yt,xt,me.__bindingPointIndex),l.set(yt,xt))}function Zt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},Q=null,H={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,v=null,b=null,S=null,w=null,E=null,T=null,M=new Tn(0,0,0),P=0,I=!1,D=null,R=null,B=null,k=null,V=null,Y.set(0,0,n.canvas.width,n.canvas.height),de.set(0,0,n.canvas.width,n.canvas.height),a.reset(),s.reset(),o.reset()}return{buffers:{color:a,depth:s,stencil:o},enable:he,disable:fe,bindFramebuffer:Ee,drawBuffers:Ce,useProgram:Re,setBlending:lt,setMaterial:Mt,setFlipSided:mt,setCullFace:on,setLineWidth:ce,setPolygonOffset:ln,setScissorTest:gn,activeTexture:Cn,bindTexture:ht,unbindTexture:ie,compressedTexImage2D:Z,compressedTexImage3D:_e,texImage2D:Vt,texImage3D:Ge,updateUBOMapping:gt,uniformBlockBinding:nt,texStorage2D:Ve,texStorage3D:ft,texSubImage2D:le,texSubImage3D:xe,compressedTexSubImage2D:we,compressedTexSubImage3D:$e,scissor:ot,viewport:Et,reset:Zt}}function Dnt(n,e,t,r,i,a,s){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new or,c=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(ie,Z){return f?new OffscreenCanvas(ie,Z):WA("canvas")}function m(ie,Z,_e){let le=1;const xe=ht(ie);if((xe.width>_e||xe.height>_e)&&(le=_e/Math.max(xe.width,xe.height)),le<1)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap||typeof VideoFrame<"u"&&ie instanceof VideoFrame){const we=Math.floor(le*xe.width),$e=Math.floor(le*xe.height);h===void 0&&(h=p(we,$e));const Ve=Z?p(we,$e):h;return Ve.width=we,Ve.height=$e,Ve.getContext("2d").drawImage(ie,0,0,we,$e),an("WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+we+"x"+$e+")."),Ve}else return"data"in ie&&an("WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),ie;return ie}function g(ie){return ie.generateMipmaps}function v(ie){n.generateMipmap(ie)}function b(ie){return ie.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ie.isWebGL3DRenderTarget?n.TEXTURE_3D:ie.isWebGLArrayRenderTarget||ie.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function S(ie,Z,_e,le,xe=!1){if(ie!==null){if(n[ie]!==void 0)return n[ie];an("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let we=Z;if(Z===n.RED&&(_e===n.FLOAT&&(we=n.R32F),_e===n.HALF_FLOAT&&(we=n.R16F),_e===n.UNSIGNED_BYTE&&(we=n.R8)),Z===n.RED_INTEGER&&(_e===n.UNSIGNED_BYTE&&(we=n.R8UI),_e===n.UNSIGNED_SHORT&&(we=n.R16UI),_e===n.UNSIGNED_INT&&(we=n.R32UI),_e===n.BYTE&&(we=n.R8I),_e===n.SHORT&&(we=n.R16I),_e===n.INT&&(we=n.R32I)),Z===n.RG&&(_e===n.FLOAT&&(we=n.RG32F),_e===n.HALF_FLOAT&&(we=n.RG16F),_e===n.UNSIGNED_BYTE&&(we=n.RG8)),Z===n.RG_INTEGER&&(_e===n.UNSIGNED_BYTE&&(we=n.RG8UI),_e===n.UNSIGNED_SHORT&&(we=n.RG16UI),_e===n.UNSIGNED_INT&&(we=n.RG32UI),_e===n.BYTE&&(we=n.RG8I),_e===n.SHORT&&(we=n.RG16I),_e===n.INT&&(we=n.RG32I)),Z===n.RGB_INTEGER&&(_e===n.UNSIGNED_BYTE&&(we=n.RGB8UI),_e===n.UNSIGNED_SHORT&&(we=n.RGB16UI),_e===n.UNSIGNED_INT&&(we=n.RGB32UI),_e===n.BYTE&&(we=n.RGB8I),_e===n.SHORT&&(we=n.RGB16I),_e===n.INT&&(we=n.RGB32I)),Z===n.RGBA_INTEGER&&(_e===n.UNSIGNED_BYTE&&(we=n.RGBA8UI),_e===n.UNSIGNED_SHORT&&(we=n.RGBA16UI),_e===n.UNSIGNED_INT&&(we=n.RGBA32UI),_e===n.BYTE&&(we=n.RGBA8I),_e===n.SHORT&&(we=n.RGBA16I),_e===n.INT&&(we=n.RGBA32I)),Z===n.RGB&&(_e===n.UNSIGNED_INT_5_9_9_9_REV&&(we=n.RGB9_E5),_e===n.UNSIGNED_INT_10F_11F_11F_REV&&(we=n.R11F_G11F_B10F)),Z===n.RGBA){const $e=xe?YN:Fn.getTransfer(le);_e===n.FLOAT&&(we=n.RGBA32F),_e===n.HALF_FLOAT&&(we=n.RGBA16F),_e===n.UNSIGNED_BYTE&&(we=$e===Pr?n.SRGB8_ALPHA8:n.RGBA8),_e===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),_e===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function w(ie,Z){let _e;return ie?Z===null||Z===od||Z===jA?_e=n.DEPTH24_STENCIL8:Z===Sc?_e=n.DEPTH32F_STENCIL8:Z===GA&&(_e=n.DEPTH24_STENCIL8,an("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Z===null||Z===od||Z===jA?_e=n.DEPTH_COMPONENT24:Z===Sc?_e=n.DEPTH_COMPONENT32F:Z===GA&&(_e=n.DEPTH_COMPONENT16),_e}function E(ie,Z){return g(ie)===!0||ie.isFramebufferTexture&&ie.minFilter!==ps&&ie.minFilter!==ks?Math.log2(Math.max(Z.width,Z.height))+1:ie.mipmaps!==void 0&&ie.mipmaps.length>0?ie.mipmaps.length:ie.isCompressedTexture&&Array.isArray(ie.image)?Z.mipmaps.length:1}function T(ie){const Z=ie.target;Z.removeEventListener("dispose",T),P(Z),Z.isVideoTexture&&c.delete(Z)}function M(ie){const Z=ie.target;Z.removeEventListener("dispose",M),D(Z)}function P(ie){const Z=r.get(ie);if(Z.__webglInit===void 0)return;const _e=ie.source,le=d.get(_e);if(le){const xe=le[Z.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&I(ie),Object.keys(le).length===0&&d.delete(_e)}r.remove(ie)}function I(ie){const Z=r.get(ie);n.deleteTexture(Z.__webglTexture);const _e=ie.source,le=d.get(_e);delete le[Z.__cacheKey],s.memory.textures--}function D(ie){const Z=r.get(ie);if(ie.depthTexture&&(ie.depthTexture.dispose(),r.remove(ie.depthTexture)),ie.isWebGLCubeRenderTarget)for(let le=0;le<6;le++){if(Array.isArray(Z.__webglFramebuffer[le]))for(let xe=0;xe<Z.__webglFramebuffer[le].length;xe++)n.deleteFramebuffer(Z.__webglFramebuffer[le][xe]);else n.deleteFramebuffer(Z.__webglFramebuffer[le]);Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer[le])}else{if(Array.isArray(Z.__webglFramebuffer))for(let le=0;le<Z.__webglFramebuffer.length;le++)n.deleteFramebuffer(Z.__webglFramebuffer[le]);else n.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&n.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let le=0;le<Z.__webglColorRenderbuffer.length;le++)Z.__webglColorRenderbuffer[le]&&n.deleteRenderbuffer(Z.__webglColorRenderbuffer[le]);Z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const _e=ie.textures;for(let le=0,xe=_e.length;le<xe;le++){const we=r.get(_e[le]);we.__webglTexture&&(n.deleteTexture(we.__webglTexture),s.memory.textures--),r.remove(_e[le])}r.remove(ie)}let R=0;function B(){R=0}function k(){const ie=R;return ie>=i.maxTextures&&an("WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+i.maxTextures),R+=1,ie}function V(ie){const Z=[];return Z.push(ie.wrapS),Z.push(ie.wrapT),Z.push(ie.wrapR||0),Z.push(ie.magFilter),Z.push(ie.minFilter),Z.push(ie.anisotropy),Z.push(ie.internalFormat),Z.push(ie.format),Z.push(ie.type),Z.push(ie.generateMipmaps),Z.push(ie.premultiplyAlpha),Z.push(ie.flipY),Z.push(ie.unpackAlignment),Z.push(ie.colorSpace),Z.join()}function G(ie,Z){const _e=r.get(ie);if(ie.isVideoTexture&&gn(ie),ie.isRenderTargetTexture===!1&&ie.isExternalTexture!==!0&&ie.version>0&&_e.__version!==ie.version){const le=ie.image;if(le===null)an("WebGLRenderer: Texture marked for update but no image data found.");else if(le.complete===!1)an("WebGLRenderer: Texture marked for update but image is incomplete");else{se(_e,ie,Z);return}}else ie.isExternalTexture&&(_e.__webglTexture=ie.sourceTexture?ie.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,_e.__webglTexture,n.TEXTURE0+Z)}function F(ie,Z){const _e=r.get(ie);if(ie.isRenderTargetTexture===!1&&ie.version>0&&_e.__version!==ie.version){se(_e,ie,Z);return}else ie.isExternalTexture&&(_e.__webglTexture=ie.sourceTexture?ie.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,_e.__webglTexture,n.TEXTURE0+Z)}function X(ie,Z){const _e=r.get(ie);if(ie.isRenderTargetTexture===!1&&ie.version>0&&_e.__version!==ie.version){se(_e,ie,Z);return}t.bindTexture(n.TEXTURE_3D,_e.__webglTexture,n.TEXTURE0+Z)}function j(ie,Z){const _e=r.get(ie);if(ie.isCubeDepthTexture!==!0&&ie.version>0&&_e.__version!==ie.version){he(_e,ie,Z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture,n.TEXTURE0+Z)}const Q={[HA]:n.REPEAT,[bc]:n.CLAMP_TO_EDGE,[gV]:n.MIRRORED_REPEAT},H={[ps]:n.NEAREST,[Fqe]:n.NEAREST_MIPMAP_NEAREST,[_P]:n.NEAREST_MIPMAP_LINEAR,[ks]:n.LINEAR,[J5]:n.LINEAR_MIPMAP_NEAREST,[h0]:n.LINEAR_MIPMAP_LINEAR},K={[Hqe]:n.NEVER,[$qe]:n.ALWAYS,[Gqe]:n.LESS,[pW]:n.LEQUAL,[jqe]:n.EQUAL,[mW]:n.GEQUAL,[Wqe]:n.GREATER,[Xqe]:n.NOTEQUAL};function te(ie,Z){if(Z.type===Sc&&e.has("OES_texture_float_linear")===!1&&(Z.magFilter===ks||Z.magFilter===J5||Z.magFilter===_P||Z.magFilter===h0||Z.minFilter===ks||Z.minFilter===J5||Z.minFilter===_P||Z.minFilter===h0)&&an("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ie,n.TEXTURE_WRAP_S,Q[Z.wrapS]),n.texParameteri(ie,n.TEXTURE_WRAP_T,Q[Z.wrapT]),(ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ie,n.TEXTURE_WRAP_R,Q[Z.wrapR]),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,H[Z.magFilter]),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,H[Z.minFilter]),Z.compareFunction&&(n.texParameteri(ie,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ie,n.TEXTURE_COMPARE_FUNC,K[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===ps||Z.minFilter!==_P&&Z.minFilter!==h0||Z.type===Sc&&e.has("OES_texture_float_linear")===!1)return;if(Z.anisotropy>1||r.get(Z).__currentAnisotropy){const _e=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ie,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,i.getMaxAnisotropy())),r.get(Z).__currentAnisotropy=Z.anisotropy}}}function Y(ie,Z){let _e=!1;ie.__webglInit===void 0&&(ie.__webglInit=!0,Z.addEventListener("dispose",T));const le=Z.source;let xe=d.get(le);xe===void 0&&(xe={},d.set(le,xe));const we=V(Z);if(we!==ie.__cacheKey){xe[we]===void 0&&(xe[we]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,_e=!0),xe[we].usedTimes++;const $e=xe[ie.__cacheKey];$e!==void 0&&(xe[ie.__cacheKey].usedTimes--,$e.usedTimes===0&&I(Z)),ie.__cacheKey=we,ie.__webglTexture=xe[we].texture}return _e}function de(ie,Z,_e){return Math.floor(Math.floor(ie/_e)/Z)}function ge(ie,Z,_e,le){const we=ie.updateRanges;if(we.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,Z.width,Z.height,_e,le,Z.data);else{we.sort((Ge,ot)=>Ge.start-ot.start);let $e=0;for(let Ge=1;Ge<we.length;Ge++){const ot=we[$e],Et=we[Ge],gt=ot.start+ot.count,nt=de(Et.start,Z.width,4),Zt=de(ot.start,Z.width,4);Et.start<=gt+1&&nt===Zt&&de(Et.start+Et.count-1,Z.width,4)===nt?ot.count=Math.max(ot.count,Et.start+Et.count-ot.start):(++$e,we[$e]=Et)}we.length=$e+1;const Ve=n.getParameter(n.UNPACK_ROW_LENGTH),ft=n.getParameter(n.UNPACK_SKIP_PIXELS),Vt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,Z.width);for(let Ge=0,ot=we.length;Ge<ot;Ge++){const Et=we[Ge],gt=Math.floor(Et.start/4),nt=Math.ceil(Et.count/4),Zt=gt%Z.width,me=Math.floor(gt/Z.width),yt=nt,tt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Zt),n.pixelStorei(n.UNPACK_SKIP_ROWS,me),t.texSubImage2D(n.TEXTURE_2D,0,Zt,me,yt,tt,_e,le,Z.data)}ie.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Ve),n.pixelStorei(n.UNPACK_SKIP_PIXELS,ft),n.pixelStorei(n.UNPACK_SKIP_ROWS,Vt)}}function se(ie,Z,_e){let le=n.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(le=n.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(le=n.TEXTURE_3D);const xe=Y(ie,Z),we=Z.source;t.bindTexture(le,ie.__webglTexture,n.TEXTURE0+_e);const $e=r.get(we);if(we.version!==$e.__version||xe===!0){t.activeTexture(n.TEXTURE0+_e);const Ve=Fn.getPrimaries(Fn.workingColorSpace),ft=Z.colorSpace===rm?null:Fn.getPrimaries(Z.colorSpace),Vt=Z.colorSpace===rm||Ve===ft?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Vt);let Ge=m(Z.image,!1,i.maxTextureSize);Ge=Cn(Z,Ge);const ot=a.convert(Z.format,Z.colorSpace),Et=a.convert(Z.type);let gt=S(Z.internalFormat,ot,Et,Z.colorSpace,Z.isVideoTexture);te(le,Z);let nt;const Zt=Z.mipmaps,me=Z.isVideoTexture!==!0,yt=$e.__version===void 0||xe===!0,tt=we.dataReady,xt=E(Z,Ge);if(Z.isDepthTexture)gt=w(Z.format===d0,Z.type),yt&&(me?t.texStorage2D(n.TEXTURE_2D,1,gt,Ge.width,Ge.height):t.texImage2D(n.TEXTURE_2D,0,gt,Ge.width,Ge.height,0,ot,Et,null));else if(Z.isDataTexture)if(Zt.length>0){me&&yt&&t.texStorage2D(n.TEXTURE_2D,xt,gt,Zt[0].width,Zt[0].height);for(let Ze=0,Le=Zt.length;Ze<Le;Ze++)nt=Zt[Ze],me?tt&&t.texSubImage2D(n.TEXTURE_2D,Ze,0,0,nt.width,nt.height,ot,Et,nt.data):t.texImage2D(n.TEXTURE_2D,Ze,gt,nt.width,nt.height,0,ot,Et,nt.data);Z.generateMipmaps=!1}else me?(yt&&t.texStorage2D(n.TEXTURE_2D,xt,gt,Ge.width,Ge.height),tt&&ge(Z,Ge,ot,Et)):t.texImage2D(n.TEXTURE_2D,0,gt,Ge.width,Ge.height,0,ot,Et,Ge.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){me&&yt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,xt,gt,Zt[0].width,Zt[0].height,Ge.depth);for(let Ze=0,Le=Zt.length;Ze<Le;Ze++)if(nt=Zt[Ze],Z.format!==Iu)if(ot!==null)if(me){if(tt)if(Z.layerUpdates.size>0){const Ye=nae(nt.width,nt.height,Z.format,Z.type);for(const Ht of Z.layerUpdates){const Dn=nt.data.subarray(Ht*Ye/nt.data.BYTES_PER_ELEMENT,(Ht+1)*Ye/nt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ze,0,0,Ht,nt.width,nt.height,1,ot,Dn)}Z.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ze,0,0,0,nt.width,nt.height,Ge.depth,ot,nt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ze,gt,nt.width,nt.height,Ge.depth,0,nt.data,0,0);else an("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else me?tt&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ze,0,0,0,nt.width,nt.height,Ge.depth,ot,Et,nt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ze,gt,nt.width,nt.height,Ge.depth,0,ot,Et,nt.data)}else{me&&yt&&t.texStorage2D(n.TEXTURE_2D,xt,gt,Zt[0].width,Zt[0].height);for(let Ze=0,Le=Zt.length;Ze<Le;Ze++)nt=Zt[Ze],Z.format!==Iu?ot!==null?me?tt&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ze,0,0,nt.width,nt.height,ot,nt.data):t.compressedTexImage2D(n.TEXTURE_2D,Ze,gt,nt.width,nt.height,0,nt.data):an("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):me?tt&&t.texSubImage2D(n.TEXTURE_2D,Ze,0,0,nt.width,nt.height,ot,Et,nt.data):t.texImage2D(n.TEXTURE_2D,Ze,gt,nt.width,nt.height,0,ot,Et,nt.data)}else if(Z.isDataArrayTexture)if(me){if(yt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,xt,gt,Ge.width,Ge.height,Ge.depth),tt)if(Z.layerUpdates.size>0){const Ze=nae(Ge.width,Ge.height,Z.format,Z.type);for(const Le of Z.layerUpdates){const Ye=Ge.data.subarray(Le*Ze/Ge.data.BYTES_PER_ELEMENT,(Le+1)*Ze/Ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Le,Ge.width,Ge.height,1,ot,Et,Ye)}Z.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,ot,Et,Ge.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,gt,Ge.width,Ge.height,Ge.depth,0,ot,Et,Ge.data);else if(Z.isData3DTexture)me?(yt&&t.texStorage3D(n.TEXTURE_3D,xt,gt,Ge.width,Ge.height,Ge.depth),tt&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,ot,Et,Ge.data)):t.texImage3D(n.TEXTURE_3D,0,gt,Ge.width,Ge.height,Ge.depth,0,ot,Et,Ge.data);else if(Z.isFramebufferTexture){if(yt)if(me)t.texStorage2D(n.TEXTURE_2D,xt,gt,Ge.width,Ge.height);else{let Ze=Ge.width,Le=Ge.height;for(let Ye=0;Ye<xt;Ye++)t.texImage2D(n.TEXTURE_2D,Ye,gt,Ze,Le,0,ot,Et,null),Ze>>=1,Le>>=1}}else if(Zt.length>0){if(me&&yt){const Ze=ht(Zt[0]);t.texStorage2D(n.TEXTURE_2D,xt,gt,Ze.width,Ze.height)}for(let Ze=0,Le=Zt.length;Ze<Le;Ze++)nt=Zt[Ze],me?tt&&t.texSubImage2D(n.TEXTURE_2D,Ze,0,0,ot,Et,nt):t.texImage2D(n.TEXTURE_2D,Ze,gt,ot,Et,nt);Z.generateMipmaps=!1}else if(me){if(yt){const Ze=ht(Ge);t.texStorage2D(n.TEXTURE_2D,xt,gt,Ze.width,Ze.height)}tt&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ot,Et,Ge)}else t.texImage2D(n.TEXTURE_2D,0,gt,ot,Et,Ge);g(Z)&&v(le),$e.__version=we.version,Z.onUpdate&&Z.onUpdate(Z)}ie.__version=Z.version}function he(ie,Z,_e){if(Z.image.length!==6)return;const le=Y(ie,Z),xe=Z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+_e);const we=r.get(xe);if(xe.version!==we.__version||le===!0){t.activeTexture(n.TEXTURE0+_e);const $e=Fn.getPrimaries(Fn.workingColorSpace),Ve=Z.colorSpace===rm?null:Fn.getPrimaries(Z.colorSpace),ft=Z.colorSpace===rm||$e===Ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ft);const Vt=Z.isCompressedTexture||Z.image[0].isCompressedTexture,Ge=Z.image[0]&&Z.image[0].isDataTexture,ot=[];for(let Le=0;Le<6;Le++)!Vt&&!Ge?ot[Le]=m(Z.image[Le],!0,i.maxCubemapSize):ot[Le]=Ge?Z.image[Le].image:Z.image[Le],ot[Le]=Cn(Z,ot[Le]);const Et=ot[0],gt=a.convert(Z.format,Z.colorSpace),nt=a.convert(Z.type),Zt=S(Z.internalFormat,gt,nt,Z.colorSpace),me=Z.isVideoTexture!==!0,yt=we.__version===void 0||le===!0,tt=xe.dataReady;let xt=E(Z,Et);te(n.TEXTURE_CUBE_MAP,Z);let Ze;if(Vt){me&&yt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,xt,Zt,Et.width,Et.height);for(let Le=0;Le<6;Le++){Ze=ot[Le].mipmaps;for(let Ye=0;Ye<Ze.length;Ye++){const Ht=Ze[Ye];Z.format!==Iu?gt!==null?me?tt&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,0,0,Ht.width,Ht.height,gt,Ht.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,Zt,Ht.width,Ht.height,0,Ht.data):an("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):me?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,0,0,Ht.width,Ht.height,gt,nt,Ht.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,Zt,Ht.width,Ht.height,0,gt,nt,Ht.data)}}}else{if(Ze=Z.mipmaps,me&&yt){Ze.length>0&&xt++;const Le=ht(ot[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,xt,Zt,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(Ge){me?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,ot[Le].width,ot[Le].height,gt,nt,ot[Le].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Zt,ot[Le].width,ot[Le].height,0,gt,nt,ot[Le].data);for(let Ye=0;Ye<Ze.length;Ye++){const Dn=Ze[Ye].image[Le].image;me?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,0,0,Dn.width,Dn.height,gt,nt,Dn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,Zt,Dn.width,Dn.height,0,gt,nt,Dn.data)}}else{me?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,gt,nt,ot[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,Zt,gt,nt,ot[Le]);for(let Ye=0;Ye<Ze.length;Ye++){const Ht=Ze[Ye];me?tt&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,0,0,gt,nt,Ht.image[Le]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,Zt,gt,nt,Ht.image[Le])}}}g(Z)&&v(n.TEXTURE_CUBE_MAP),we.__version=xe.version,Z.onUpdate&&Z.onUpdate(Z)}ie.__version=Z.version}function fe(ie,Z,_e,le,xe,we){const $e=a.convert(_e.format,_e.colorSpace),Ve=a.convert(_e.type),ft=S(_e.internalFormat,$e,Ve,_e.colorSpace),Vt=r.get(Z),Ge=r.get(_e);if(Ge.__renderTarget=Z,!Vt.__hasExternalTextures){const ot=Math.max(1,Z.width>>we),Et=Math.max(1,Z.height>>we);xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,we,ft,ot,Et,Z.depth,0,$e,Ve,null):t.texImage2D(xe,we,ft,ot,Et,0,$e,Ve,null)}t.bindFramebuffer(n.FRAMEBUFFER,ie),ln(Z)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,le,xe,Ge.__webglTexture,0,ce(Z)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,le,xe,Ge.__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(ie,Z,_e){if(n.bindRenderbuffer(n.RENDERBUFFER,ie),Z.depthBuffer){const le=Z.depthTexture,xe=le&&le.isDepthTexture?le.type:null,we=w(Z.stencilBuffer,xe),$e=Z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;ln(Z)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ce(Z),we,Z.width,Z.height):_e?n.renderbufferStorageMultisample(n.RENDERBUFFER,ce(Z),we,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,we,Z.width,Z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,$e,n.RENDERBUFFER,ie)}else{const le=Z.textures;for(let xe=0;xe<le.length;xe++){const we=le[xe],$e=a.convert(we.format,we.colorSpace),Ve=a.convert(we.type),ft=S(we.internalFormat,$e,Ve,we.colorSpace);ln(Z)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ce(Z),ft,Z.width,Z.height):_e?n.renderbufferStorageMultisample(n.RENDERBUFFER,ce(Z),ft,Z.width,Z.height):n.renderbufferStorage(n.RENDERBUFFER,ft,Z.width,Z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ce(ie,Z,_e){const le=Z.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,ie),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const xe=r.get(Z.depthTexture);if(xe.__renderTarget=Z,(!xe.__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),le){if(xe.__webglInit===void 0&&(xe.__webglInit=!0,Z.depthTexture.addEventListener("dispose",T)),xe.__webglTexture===void 0){xe.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),te(n.TEXTURE_CUBE_MAP,Z.depthTexture);const Vt=a.convert(Z.depthTexture.format),Ge=a.convert(Z.depthTexture.type);let ot;Z.depthTexture.format===ep?ot=n.DEPTH_COMPONENT24:Z.depthTexture.format===d0&&(ot=n.DEPTH24_STENCIL8);for(let Et=0;Et<6;Et++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Et,0,ot,Z.width,Z.height,0,Vt,Ge,null)}}else G(Z.depthTexture,0);const we=xe.__webglTexture,$e=ce(Z),Ve=le?n.TEXTURE_CUBE_MAP_POSITIVE_X+_e:n.TEXTURE_2D,ft=Z.depthTexture.format===d0?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(Z.depthTexture.format===ep)ln(Z)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ft,Ve,we,0,$e):n.framebufferTexture2D(n.FRAMEBUFFER,ft,Ve,we,0);else if(Z.depthTexture.format===d0)ln(Z)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ft,Ve,we,0,$e):n.framebufferTexture2D(n.FRAMEBUFFER,ft,Ve,we,0);else throw new Error("Unknown depthTexture format")}function Re(ie){const Z=r.get(ie),_e=ie.isWebGLCubeRenderTarget===!0;if(Z.__boundDepthTexture!==ie.depthTexture){const le=ie.depthTexture;if(Z.__depthDisposeCallback&&Z.__depthDisposeCallback(),le){const xe=()=>{delete Z.__boundDepthTexture,delete Z.__depthDisposeCallback,le.removeEventListener("dispose",xe)};le.addEventListener("dispose",xe),Z.__depthDisposeCallback=xe}Z.__boundDepthTexture=le}if(ie.depthTexture&&!Z.__autoAllocateDepthBuffer)if(_e)for(let le=0;le<6;le++)Ce(Z.__webglFramebuffer[le],ie,le);else{const le=ie.texture.mipmaps;le&&le.length>0?Ce(Z.__webglFramebuffer[0],ie,0):Ce(Z.__webglFramebuffer,ie,0)}else if(_e){Z.__webglDepthbuffer=[];for(let le=0;le<6;le++)if(t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[le]),Z.__webglDepthbuffer[le]===void 0)Z.__webglDepthbuffer[le]=n.createRenderbuffer(),Ee(Z.__webglDepthbuffer[le],ie,!1);else{const xe=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=Z.__webglDepthbuffer[le];n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,xe,n.RENDERBUFFER,we)}}else{const le=ie.texture.mipmaps;if(le&&le.length>0?t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer===void 0)Z.__webglDepthbuffer=n.createRenderbuffer(),Ee(Z.__webglDepthbuffer,ie,!1);else{const xe=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=Z.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,xe,n.RENDERBUFFER,we)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function He(ie,Z,_e){const le=r.get(ie);Z!==void 0&&fe(le.__webglFramebuffer,ie,ie.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),_e!==void 0&&Re(ie)}function pt(ie){const Z=ie.texture,_e=r.get(ie),le=r.get(Z);ie.addEventListener("dispose",M);const xe=ie.textures,we=ie.isWebGLCubeRenderTarget===!0,$e=xe.length>1;if($e||(le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture()),le.__version=Z.version,s.memory.textures++),we){_e.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(Z.mipmaps&&Z.mipmaps.length>0){_e.__webglFramebuffer[Ve]=[];for(let ft=0;ft<Z.mipmaps.length;ft++)_e.__webglFramebuffer[Ve][ft]=n.createFramebuffer()}else _e.__webglFramebuffer[Ve]=n.createFramebuffer()}else{if(Z.mipmaps&&Z.mipmaps.length>0){_e.__webglFramebuffer=[];for(let Ve=0;Ve<Z.mipmaps.length;Ve++)_e.__webglFramebuffer[Ve]=n.createFramebuffer()}else _e.__webglFramebuffer=n.createFramebuffer();if($e)for(let Ve=0,ft=xe.length;Ve<ft;Ve++){const Vt=r.get(xe[Ve]);Vt.__webglTexture===void 0&&(Vt.__webglTexture=n.createTexture(),s.memory.textures++)}if(ie.samples>0&&ln(ie)===!1){_e.__webglMultisampledFramebuffer=n.createFramebuffer(),_e.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglMultisampledFramebuffer);for(let Ve=0;Ve<xe.length;Ve++){const ft=xe[Ve];_e.__webglColorRenderbuffer[Ve]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,_e.__webglColorRenderbuffer[Ve]);const Vt=a.convert(ft.format,ft.colorSpace),Ge=a.convert(ft.type),ot=S(ft.internalFormat,Vt,Ge,ft.colorSpace,ie.isXRRenderTarget===!0),Et=ce(ie);n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,ot,ie.width,ie.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,_e.__webglColorRenderbuffer[Ve])}n.bindRenderbuffer(n.RENDERBUFFER,null),ie.depthBuffer&&(_e.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(_e.__webglDepthRenderbuffer,ie,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(we){t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture),te(n.TEXTURE_CUBE_MAP,Z);for(let Ve=0;Ve<6;Ve++)if(Z.mipmaps&&Z.mipmaps.length>0)for(let ft=0;ft<Z.mipmaps.length;ft++)fe(_e.__webglFramebuffer[Ve][ft],ie,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,ft);else fe(_e.__webglFramebuffer[Ve],ie,Z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);g(Z)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($e){for(let Ve=0,ft=xe.length;Ve<ft;Ve++){const Vt=xe[Ve],Ge=r.get(Vt);let ot=n.TEXTURE_2D;(ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(ot=ie.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ot,Ge.__webglTexture),te(ot,Vt),fe(_e.__webglFramebuffer,ie,Vt,n.COLOR_ATTACHMENT0+Ve,ot,0),g(Vt)&&v(ot)}t.unbindTexture()}else{let Ve=n.TEXTURE_2D;if((ie.isWebGL3DRenderTarget||ie.isWebGLArrayRenderTarget)&&(Ve=ie.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ve,le.__webglTexture),te(Ve,Z),Z.mipmaps&&Z.mipmaps.length>0)for(let ft=0;ft<Z.mipmaps.length;ft++)fe(_e.__webglFramebuffer[ft],ie,Z,n.COLOR_ATTACHMENT0,Ve,ft);else fe(_e.__webglFramebuffer,ie,Z,n.COLOR_ATTACHMENT0,Ve,0);g(Z)&&v(Ve),t.unbindTexture()}ie.depthBuffer&&Re(ie)}function lt(ie){const Z=ie.textures;for(let _e=0,le=Z.length;_e<le;_e++){const xe=Z[_e];if(g(xe)){const we=b(ie),$e=r.get(xe).__webglTexture;t.bindTexture(we,$e),v(we),t.unbindTexture()}}}const Mt=[],mt=[];function on(ie){if(ie.samples>0){if(ln(ie)===!1){const Z=ie.textures,_e=ie.width,le=ie.height;let xe=n.COLOR_BUFFER_BIT;const we=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$e=r.get(ie),Ve=Z.length>1;if(Ve)for(let Vt=0;Vt<Z.length;Vt++)t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,$e.__webglMultisampledFramebuffer);const ft=ie.texture.mipmaps;ft&&ft.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglFramebuffer);for(let Vt=0;Vt<Z.length;Vt++){if(ie.resolveDepthBuffer&&(ie.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),ie.stencilBuffer&&ie.resolveStencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),Ve){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,$e.__webglColorRenderbuffer[Vt]);const Ge=r.get(Z[Vt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ge,0)}n.blitFramebuffer(0,0,_e,le,0,0,_e,le,xe,n.NEAREST),l===!0&&(Mt.length=0,mt.length=0,Mt.push(n.COLOR_ATTACHMENT0+Vt),ie.depthBuffer&&ie.resolveDepthBuffer===!1&&(Mt.push(we),mt.push(we),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,mt)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Mt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ve)for(let Vt=0;Vt<Z.length;Vt++){t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.RENDERBUFFER,$e.__webglColorRenderbuffer[Vt]);const Ge=r.get(Z[Vt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,$e.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.TEXTURE_2D,Ge,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,$e.__webglMultisampledFramebuffer)}else if(ie.depthBuffer&&ie.resolveDepthBuffer===!1&&l){const Z=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Z])}}}function ce(ie){return Math.min(i.maxSamples,ie.samples)}function ln(ie){const Z=r.get(ie);return ie.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function gn(ie){const Z=s.render.frame;c.get(ie)!==Z&&(c.set(ie,Z),ie.update())}function Cn(ie,Z){const _e=ie.colorSpace,le=ie.format,xe=ie.type;return ie.isCompressedTexture===!0||ie.isVideoTexture===!0||_e!==yS&&_e!==rm&&(Fn.getTransfer(_e)===Pr?(le!==Iu||xe!==Ml)&&an("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):yn("WebGLTextures: Unsupported texture color space:",_e)),Z}function ht(ie){return typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement?(u.width=ie.naturalWidth||ie.width,u.height=ie.naturalHeight||ie.height):typeof VideoFrame<"u"&&ie instanceof VideoFrame?(u.width=ie.displayWidth,u.height=ie.displayHeight):(u.width=ie.width,u.height=ie.height),u}this.allocateTextureUnit=k,this.resetTextureUnits=B,this.setTexture2D=G,this.setTexture2DArray=F,this.setTexture3D=X,this.setTextureCube=j,this.rebindTextures=He,this.setupRenderTarget=pt,this.updateRenderTargetMipmap=lt,this.updateMultisampleRenderTarget=on,this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=fe,this.useMultisampledRTT=ln,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function Int(n,e){function t(r,i=rm){let a;const s=Fn.getTransfer(i);if(r===Ml)return n.UNSIGNED_BYTE;if(r===lW)return n.UNSIGNED_SHORT_4_4_4_4;if(r===uW)return n.UNSIGNED_SHORT_5_5_5_1;if(r===Bve)return n.UNSIGNED_INT_5_9_9_9_REV;if(r===Fve)return n.UNSIGNED_INT_10F_11F_11F_REV;if(r===kve)return n.BYTE;if(r===Ove)return n.SHORT;if(r===GA)return n.UNSIGNED_SHORT;if(r===oW)return n.INT;if(r===od)return n.UNSIGNED_INT;if(r===Sc)return n.FLOAT;if(r===Jf)return n.HALF_FLOAT;if(r===Uve)return n.ALPHA;if(r===zve)return n.RGB;if(r===Iu)return n.RGBA;if(r===ep)return n.DEPTH_COMPONENT;if(r===d0)return n.DEPTH_STENCIL;if(r===Vve)return n.RED;if(r===cW)return n.RED_INTEGER;if(r===vS)return n.RG;if(r===hW)return n.RG_INTEGER;if(r===dW)return n.RGBA_INTEGER;if(r===zL||r===VL||r===HL||r===GL)if(s===Pr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(r===zL)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===VL)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===HL)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===GL)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(r===zL)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===VL)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===HL)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===GL)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===vV||r===yV||r===xV||r===_V)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(r===vV)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===yV)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===xV)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===_V)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===bV||r===SV||r===wV||r===TV||r===EV||r===AV||r===CV)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(r===bV||r===SV)return s===Pr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(r===wV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC;if(r===TV)return a.COMPRESSED_R11_EAC;if(r===EV)return a.COMPRESSED_SIGNED_R11_EAC;if(r===AV)return a.COMPRESSED_RG11_EAC;if(r===CV)return a.COMPRESSED_SIGNED_RG11_EAC}else return null;if(r===MV||r===DV||r===IV||r===PV||r===LV||r===RV||r===NV||r===kV||r===OV||r===BV||r===FV||r===UV||r===zV||r===VV)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(r===MV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===DV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===IV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===PV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===LV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===RV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===NV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===kV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===OV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===BV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===FV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===UV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===zV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===VV)return s===Pr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===HV||r===GV||r===jV)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(r===HV)return s===Pr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===GV)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===jV)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===WV||r===XV||r===$V||r===YV)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(r===WV)return a.COMPRESSED_RED_RGTC1_EXT;if(r===XV)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===$V)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===YV)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===jA?n.UNSIGNED_INT_24_8:n[r]!==void 0?n[r]:null}return{convert:t}}const Pnt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Lnt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Rnt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const r=new e0e(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,r=new ld({vertexShader:Pnt,fragmentShader:Lnt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ou(new F3(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Nnt extends JS{constructor(e,t){super();const r=this;let i=null,a=1,s=null,o="local-floor",l=1,u=null,c=null,h=null,d=null,f=null,p=null;const m=typeof XRWebGLBinding<"u",g=new Rnt,v={},b=t.getContextAttributes();let S=null,w=null;const E=[],T=[],M=new or;let P=null;const I=new uo;I.viewport=new Tr;const D=new uo;D.viewport=new Tr;const R=[I,D],B=new RZe;let k=null,V=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let he=E[se];return he===void 0&&(he=new b6,E[se]=he),he.getTargetRaySpace()},this.getControllerGrip=function(se){let he=E[se];return he===void 0&&(he=new b6,E[se]=he),he.getGripSpace()},this.getHand=function(se){let he=E[se];return he===void 0&&(he=new b6,E[se]=he),he.getHandSpace()};function G(se){const he=T.indexOf(se.inputSource);if(he===-1)return;const fe=E[he];fe!==void 0&&(fe.update(se.inputSource,se.frame,u||s),fe.dispatchEvent({type:se.type,data:se.inputSource}))}function F(){i.removeEventListener("select",G),i.removeEventListener("selectstart",G),i.removeEventListener("selectend",G),i.removeEventListener("squeeze",G),i.removeEventListener("squeezestart",G),i.removeEventListener("squeezeend",G),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",X);for(let se=0;se<E.length;se++){const he=T[se];he!==null&&(T[se]=null,E[se].disconnect(he))}k=null,V=null,g.reset();for(const se in v)delete v[se];e.setRenderTarget(S),f=null,d=null,h=null,i=null,w=null,ge.stop(),r.isPresenting=!1,e.setPixelRatio(P),e.setSize(M.width,M.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(se){a=se,r.isPresenting===!0&&an("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){o=se,r.isPresenting===!0&&an("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(se){u=se},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h===null&&m&&(h=new XRWebGLBinding(i,t)),h},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(se){if(i=se,i!==null){if(S=e.getRenderTarget(),i.addEventListener("select",G),i.addEventListener("selectstart",G),i.addEventListener("selectend",G),i.addEventListener("squeeze",G),i.addEventListener("squeezestart",G),i.addEventListener("squeezeend",G),i.addEventListener("end",F),i.addEventListener("inputsourceschange",X),b.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(M),m&&"createProjectionLayer"in XRWebGLBinding.prototype){let fe=null,Ee=null,Ce=null;b.depth&&(Ce=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,fe=b.stencil?d0:ep,Ee=b.stencil?jA:od);const Re={colorFormat:t.RGBA8,depthFormat:Ce,scaleFactor:a};h=this.getBinding(),d=h.createProjectionLayer(Re),i.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),w=new Kh(d.textureWidth,d.textureHeight,{format:Iu,type:Ml,depthTexture:new $A(d.textureWidth,d.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,fe),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1,resolveStencilBuffer:d.ignoreDepthValues===!1})}else{const fe={antialias:b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:a};f=new XRWebGLLayer(i,t,fe),i.updateRenderState({baseLayer:f}),e.setPixelRatio(1),e.setSize(f.framebufferWidth,f.framebufferHeight,!1),w=new Kh(f.framebufferWidth,f.framebufferHeight,{format:Iu,type:Ml,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(o),ge.setContext(i),ge.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function X(se){for(let he=0;he<se.removed.length;he++){const fe=se.removed[he],Ee=T.indexOf(fe);Ee>=0&&(T[Ee]=null,E[Ee].disconnect(fe))}for(let he=0;he<se.added.length;he++){const fe=se.added[he];let Ee=T.indexOf(fe);if(Ee===-1){for(let Re=0;Re<E.length;Re++)if(Re>=T.length){T.push(fe),Ee=Re;break}else if(T[Re]===null){T[Re]=fe,Ee=Re;break}if(Ee===-1)break}const Ce=E[Ee];Ce&&Ce.connect(fe)}}const j=new Te,Q=new Te;function H(se,he,fe){j.setFromMatrixPosition(he.matrixWorld),Q.setFromMatrixPosition(fe.matrixWorld);const Ee=j.distanceTo(Q),Ce=he.projectionMatrix.elements,Re=fe.projectionMatrix.elements,He=Ce[14]/(Ce[10]-1),pt=Ce[14]/(Ce[10]+1),lt=(Ce[9]+1)/Ce[5],Mt=(Ce[9]-1)/Ce[5],mt=(Ce[8]-1)/Ce[0],on=(Re[8]+1)/Re[0],ce=He*mt,ln=He*on,gn=Ee/(-mt+on),Cn=gn*-mt;if(he.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(Cn),se.translateZ(gn),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert(),Ce[10]===-1)se.projectionMatrix.copy(he.projectionMatrix),se.projectionMatrixInverse.copy(he.projectionMatrixInverse);else{const ht=He+gn,ie=pt+gn,Z=ce-Cn,_e=ln+(Ee-Cn),le=lt*pt/ie*ht,xe=Mt*pt/ie*ht;se.projectionMatrix.makePerspective(Z,_e,le,xe,ht,ie),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}}function K(se,he){he===null?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(he.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(i===null)return;let he=se.near,fe=se.far;g.texture!==null&&(g.depthNear>0&&(he=g.depthNear),g.depthFar>0&&(fe=g.depthFar)),B.near=D.near=I.near=he,B.far=D.far=I.far=fe,(k!==B.near||V!==B.far)&&(i.updateRenderState({depthNear:B.near,depthFar:B.far}),k=B.near,V=B.far),B.layers.mask=se.layers.mask|6,I.layers.mask=B.layers.mask&3,D.layers.mask=B.layers.mask&5;const Ee=se.parent,Ce=B.cameras;K(B,Ee);for(let Re=0;Re<Ce.length;Re++)K(Ce[Re],Ee);Ce.length===2?H(B,I,D):B.projectionMatrix.copy(I.projectionMatrix),te(se,B,Ee)};function te(se,he,fe){fe===null?se.matrix.copy(he.matrixWorld):(se.matrix.copy(fe.matrixWorld),se.matrix.invert(),se.matrix.multiply(he.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0),se.projectionMatrix.copy(he.projectionMatrix),se.projectionMatrixInverse.copy(he.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=xS*2*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}this.getCamera=function(){return B},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(se){l=se,d!==null&&(d.fixedFoveation=se),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=se)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(B)},this.getCameraTexture=function(se){return v[se]};let Y=null;function de(se,he){if(c=he.getViewerPose(u||s),p=he,c!==null){const fe=c.views;f!==null&&(e.setRenderTargetFramebuffer(w,f.framebuffer),e.setRenderTarget(w));let Ee=!1;fe.length!==B.cameras.length&&(B.cameras.length=0,Ee=!0);for(let pt=0;pt<fe.length;pt++){const lt=fe[pt];let Mt=null;if(f!==null)Mt=f.getViewport(lt);else{const on=h.getViewSubImage(d,lt);Mt=on.viewport,pt===0&&(e.setRenderTargetTextures(w,on.colorTexture,on.depthStencilTexture),e.setRenderTarget(w))}let mt=R[pt];mt===void 0&&(mt=new uo,mt.layers.enable(pt),mt.viewport=new Tr,R[pt]=mt),mt.matrix.fromArray(lt.transform.matrix),mt.matrix.decompose(mt.position,mt.quaternion,mt.scale),mt.projectionMatrix.fromArray(lt.projectionMatrix),mt.projectionMatrixInverse.copy(mt.projectionMatrix).invert(),mt.viewport.set(Mt.x,Mt.y,Mt.width,Mt.height),pt===0&&(B.matrix.copy(mt.matrix),B.matrix.decompose(B.position,B.quaternion,B.scale)),Ee===!0&&B.cameras.push(mt)}const Ce=i.enabledFeatures;if(Ce&&Ce.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&m){h=r.getBinding();const pt=h.getDepthInformation(fe[0]);pt&&pt.isValid&&pt.texture&&g.init(pt,i.renderState)}if(Ce&&Ce.includes("camera-access")&&m){e.state.unbindTexture(),h=r.getBinding();for(let pt=0;pt<fe.length;pt++){const lt=fe[pt].camera;if(lt){let Mt=v[lt];Mt||(Mt=new e0e,v[lt]=Mt);const mt=h.getCameraImage(lt);Mt.sourceTexture=mt}}}}for(let fe=0;fe<E.length;fe++){const Ee=T[fe],Ce=E[fe];Ee!==null&&Ce!==void 0&&Ce.update(Ee,he,u||s)}Y&&Y(se,he),he.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:he}),p=null}const ge=new l0e;ge.setAnimationLoop(de),this.setAnimationLoop=function(se){Y=se},this.dispose=function(){}}}const Nv=new Xa,knt=new rn;function Ont(n,e){function t(g,v){g.matrixAutoUpdate===!0&&g.updateMatrix(),v.value.copy(g.matrix)}function r(g,v){v.color.getRGB(g.fogColor.value,Yve(n)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function i(g,v,b,S,w){v.isMeshBasicMaterial||v.isMeshLambertMaterial?a(g,v):v.isMeshToonMaterial?(a(g,v),h(g,v)):v.isMeshPhongMaterial?(a(g,v),c(g,v)):v.isMeshStandardMaterial?(a(g,v),d(g,v),v.isMeshPhysicalMaterial&&f(g,v,w)):v.isMeshMatcapMaterial?(a(g,v),p(g,v)):v.isMeshDepthMaterial?a(g,v):v.isMeshDistanceMaterial?(a(g,v),m(g,v)):v.isMeshNormalMaterial?a(g,v):v.isLineBasicMaterial?(s(g,v),v.isLineDashedMaterial&&o(g,v)):v.isPointsMaterial?l(g,v,b,S):v.isSpriteMaterial?u(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function a(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.bumpMap&&(g.bumpMap.value=v.bumpMap,t(v.bumpMap,g.bumpMapTransform),g.bumpScale.value=v.bumpScale,v.side===Wo&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,t(v.normalMap,g.normalMapTransform),g.normalScale.value.copy(v.normalScale),v.side===Wo&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,t(v.displacementMap,g.displacementMapTransform),g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,g.emissiveMapTransform)),v.specularMap&&(g.specularMap.value=v.specularMap,t(v.specularMap,g.specularMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const b=e.get(v),S=b.envMap,w=b.envMapRotation;S&&(g.envMap.value=S,Nv.copy(w),Nv.x*=-1,Nv.y*=-1,Nv.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Nv.y*=-1,Nv.z*=-1),g.envMapRotation.value.setFromMatrix4(knt.makeRotationFromEuler(Nv)),g.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap&&(g.lightMap.value=v.lightMap,g.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,g.lightMapTransform)),v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,g.aoMapTransform))}function s(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform))}function o(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function l(g,v,b,S){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*b,g.scale.value=S*.5,v.map&&(g.map.value=v.map,t(v.map,g.uvTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function u(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function c(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function h(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function d(g,v){g.metalness.value=v.metalness,v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,g.metalnessMapTransform)),g.roughness.value=v.roughness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,g.roughnessMapTransform)),v.envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function f(g,v,b){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,g.sheenColorMapTransform)),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,g.sheenRoughnessMapTransform))),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,g.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(g.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Wo&&g.clearcoatNormalScale.value.negate())),v.dispersion>0&&(g.dispersion.value=v.dispersion),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,g.iridescenceMapTransform)),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=b.texture,g.transmissionSamplerSize.value.set(b.width,b.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,g.transmissionMapTransform)),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(g.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(g.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,g.specularColorMapTransform)),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,v){v.matcap&&(g.matcap.value=v.matcap)}function m(g,v){const b=e.get(v).light;g.referencePosition.value.setFromMatrixPosition(b.matrixWorld),g.nearDistance.value=b.shadow.camera.near,g.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Bnt(n,e,t,r){let i={},a={},s=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,S){const w=S.program;r.uniformBlockBinding(b,w)}function u(b,S){let w=i[b.id];w===void 0&&(p(b),w=c(b),i[b.id]=w,b.addEventListener("dispose",g));const E=S.program;r.updateUBOMapping(b,E);const T=e.render.frame;a[b.id]!==T&&(d(b),a[b.id]=T)}function c(b){const S=h();b.__bindingPointIndex=S;const w=n.createBuffer(),E=b.__size,T=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,E,T),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,w),w}function h(){for(let b=0;b<o;b++)if(s.indexOf(b)===-1)return s.push(b),b;return yn("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(b){const S=i[b.id],w=b.uniforms,E=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let T=0,M=w.length;T<M;T++){const P=Array.isArray(w[T])?w[T]:[w[T]];for(let I=0,D=P.length;I<D;I++){const R=P[I];if(f(R,T,I,E)===!0){const B=R.__offset,k=Array.isArray(R.value)?R.value:[R.value];let V=0;for(let G=0;G<k.length;G++){const F=k[G],X=m(F);typeof F=="number"||typeof F=="boolean"?(R.__data[0]=F,n.bufferSubData(n.UNIFORM_BUFFER,B+V,R.__data)):F.isMatrix3?(R.__data[0]=F.elements[0],R.__data[1]=F.elements[1],R.__data[2]=F.elements[2],R.__data[3]=0,R.__data[4]=F.elements[3],R.__data[5]=F.elements[4],R.__data[6]=F.elements[5],R.__data[7]=0,R.__data[8]=F.elements[6],R.__data[9]=F.elements[7],R.__data[10]=F.elements[8],R.__data[11]=0):(F.toArray(R.__data,V),V+=X.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,B,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function f(b,S,w,E){const T=b.value,M=S+"_"+w;if(E[M]===void 0)return typeof T=="number"||typeof T=="boolean"?E[M]=T:E[M]=T.clone(),!0;{const P=E[M];if(typeof T=="number"||typeof T=="boolean"){if(P!==T)return E[M]=T,!0}else if(P.equals(T)===!1)return P.copy(T),!0}return!1}function p(b){const S=b.uniforms;let w=0;const E=16;for(let M=0,P=S.length;M<P;M++){const I=Array.isArray(S[M])?S[M]:[S[M]];for(let D=0,R=I.length;D<R;D++){const B=I[D],k=Array.isArray(B.value)?B.value:[B.value];for(let V=0,G=k.length;V<G;V++){const F=k[V],X=m(F),j=w%E,Q=j%X.boundary,H=j+Q;w+=Q,H!==0&&E-H<X.storage&&(w+=E-H),B.__data=new Float32Array(X.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=w,w+=X.storage}}}const T=w%E;return T>0&&(w+=E-T),b.__size=w,b.__cache={},this}function m(b){const S={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(S.boundary=4,S.storage=4):b.isVector2?(S.boundary=8,S.storage=8):b.isVector3||b.isColor?(S.boundary=16,S.storage=12):b.isVector4?(S.boundary=16,S.storage=16):b.isMatrix3?(S.boundary=48,S.storage=48):b.isMatrix4?(S.boundary=64,S.storage=64):b.isTexture?an("WebGLRenderer: Texture samplers can not be part of an uniforms group."):an("WebGLRenderer: Unsupported uniform value type.",b),S}function g(b){const S=b.target;S.removeEventListener("dispose",g);const w=s.indexOf(S.__bindingPointIndex);s.splice(w,1),n.deleteBuffer(i[S.id]),delete i[S.id],delete a[S.id]}function v(){for(const b in i)n.deleteBuffer(i[b]);s=[],i={},a={}}return{bind:l,update:u,dispose:v}}const Fnt=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let th=null;function Unt(){return th===null&&(th=new Qve(Fnt,16,16,vS,Jf),th.name="DFG_LUT",th.minFilter=ks,th.magFilter=ks,th.wrapS=bc,th.wrapT=bc,th.generateMipmaps=!1,th.needsUpdate=!0),th}class znt{constructor(e={}){const{canvas:t=qqe(),context:r=null,depth:i=!0,stencil:a=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:d=!1,outputBufferType:f=Ml}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=s;const m=f,g=new Set([dW,hW,cW]),v=new Set([Ml,od,GA,jA,lW,uW]),b=new Uint32Array(4),S=new Int32Array(4);let w=null,E=null;const T=[],M=[];let P=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=qh,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const I=this;let D=!1;this._outputColorSpace=si;let R=0,B=0,k=null,V=-1,G=null;const F=new Tr,X=new Tr;let j=null;const Q=new Tn(0);let H=0,K=t.width,te=t.height,Y=1,de=null,ge=null;const se=new Tr(0,0,K,te),he=new Tr(0,0,K,te);let fe=!1;const Ee=new bW;let Ce=!1,Re=!1;const He=new rn,pt=new Te,lt=new Tr,Mt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let mt=!1;function on(){return k===null?Y:1}let ce=r;function ln(ne,Se){return t.getContext(ne,Se)}try{const ne={alpha:!0,depth:i,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${sW}`),t.addEventListener("webglcontextlost",Ht,!1),t.addEventListener("webglcontextrestored",Dn,!1),t.addEventListener("webglcontextcreationerror",Xn,!1),ce===null){const Se="webgl2";if(ce=ln(Se,ne),ce===null)throw ln(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ne){throw yn("WebGLRenderer: "+ne.message),ne}let gn,Cn,ht,ie,Z,_e,le,xe,we,$e,Ve,ft,Vt,Ge,ot,Et,gt,nt,Zt,me,yt,tt,xt,Ze;function Le(){gn=new Uet(ce),gn.init(),tt=new Int(ce,gn),Cn=new Iet(ce,gn,e,tt),ht=new Mnt(ce,gn),Cn.reversedDepthBuffer&&d&&ht.buffers.depth.setReversed(!0),ie=new Het(ce),Z=new fnt,_e=new Dnt(ce,gn,ht,Z,Cn,tt,ie),le=new Let(I),xe=new Fet(I),we=new jZe(ce),xt=new Met(ce,we),$e=new zet(ce,we,ie,xt),Ve=new jet(ce,$e,we,ie),Zt=new Get(ce,Cn,_e),Et=new Pet(Z),ft=new dnt(I,le,xe,gn,Cn,xt,Et),Vt=new Ont(I,Z),Ge=new mnt,ot=new bnt(gn),nt=new Cet(I,le,xe,ht,Ve,p,l),gt=new Ant(I,Ve,Cn),Ze=new Bnt(ce,ie,Cn,ht),me=new Det(ce,gn,ie),yt=new Vet(ce,gn,ie),ie.programs=ft.programs,I.capabilities=Cn,I.extensions=gn,I.properties=Z,I.renderLists=Ge,I.shadowMap=gt,I.state=ht,I.info=ie}Le(),m!==Ml&&(P=new Xet(m,t.width,t.height,i,a));const Ye=new Nnt(I,ce);this.xr=Ye,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const ne=gn.get("WEBGL_lose_context");ne&&ne.loseContext()},this.forceContextRestore=function(){const ne=gn.get("WEBGL_lose_context");ne&&ne.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(ne){ne!==void 0&&(Y=ne,this.setSize(K,te,!1))},this.getSize=function(ne){return ne.set(K,te)},this.setSize=function(ne,Se,Oe=!0){if(Ye.isPresenting){an("WebGLRenderer: Can't change size while VR device is presenting.");return}K=ne,te=Se,t.width=Math.floor(ne*Y),t.height=Math.floor(Se*Y),Oe===!0&&(t.style.width=ne+"px",t.style.height=Se+"px"),P!==null&&P.setSize(t.width,t.height),this.setViewport(0,0,ne,Se)},this.getDrawingBufferSize=function(ne){return ne.set(K*Y,te*Y).floor()},this.setDrawingBufferSize=function(ne,Se,Oe){K=ne,te=Se,Y=Oe,t.width=Math.floor(ne*Oe),t.height=Math.floor(Se*Oe),this.setViewport(0,0,ne,Se)},this.setEffects=function(ne){if(m===Ml){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(ne){for(let Se=0;Se<ne.length;Se++)if(ne[Se].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}P.setEffects(ne||[])},this.getCurrentViewport=function(ne){return ne.copy(F)},this.getViewport=function(ne){return ne.copy(se)},this.setViewport=function(ne,Se,Oe,Ne){ne.isVector4?se.set(ne.x,ne.y,ne.z,ne.w):se.set(ne,Se,Oe,Ne),ht.viewport(F.copy(se).multiplyScalar(Y).round())},this.getScissor=function(ne){return ne.copy(he)},this.setScissor=function(ne,Se,Oe,Ne){ne.isVector4?he.set(ne.x,ne.y,ne.z,ne.w):he.set(ne,Se,Oe,Ne),ht.scissor(X.copy(he).multiplyScalar(Y).round())},this.getScissorTest=function(){return fe},this.setScissorTest=function(ne){ht.setScissorTest(fe=ne)},this.setOpaqueSort=function(ne){de=ne},this.setTransparentSort=function(ne){ge=ne},this.getClearColor=function(ne){return ne.copy(nt.getClearColor())},this.setClearColor=function(){nt.setClearColor(...arguments)},this.getClearAlpha=function(){return nt.getClearAlpha()},this.setClearAlpha=function(){nt.setClearAlpha(...arguments)},this.clear=function(ne=!0,Se=!0,Oe=!0){let Ne=0;if(ne){let De=!1;if(k!==null){const vt=k.texture.format;De=g.has(vt)}if(De){const vt=k.texture.type,Dt=v.has(vt),ut=nt.getClearColor(),zt=nt.getClearAlpha(),kt=ut.r,pn=ut.g,tn=ut.b;Dt?(b[0]=kt,b[1]=pn,b[2]=tn,b[3]=zt,ce.clearBufferuiv(ce.COLOR,0,b)):(S[0]=kt,S[1]=pn,S[2]=tn,S[3]=zt,ce.clearBufferiv(ce.COLOR,0,S))}else Ne|=ce.COLOR_BUFFER_BIT}Se&&(Ne|=ce.DEPTH_BUFFER_BIT),Oe&&(Ne|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(Ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ht,!1),t.removeEventListener("webglcontextrestored",Dn,!1),t.removeEventListener("webglcontextcreationerror",Xn,!1),nt.dispose(),Ge.dispose(),ot.dispose(),Z.dispose(),le.dispose(),xe.dispose(),Ve.dispose(),xt.dispose(),Ze.dispose(),ft.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",js),Ye.removeEventListener("sessionend",cp),zu.stop()};function Ht(ne){ne.preventDefault(),wie("WebGLRenderer: Context Lost."),D=!0}function Dn(){wie("WebGLRenderer: Context Restored."),D=!1;const ne=ie.autoReset,Se=gt.enabled,Oe=gt.autoUpdate,Ne=gt.needsUpdate,De=gt.type;Le(),ie.autoReset=ne,gt.enabled=Se,gt.autoUpdate=Oe,gt.needsUpdate=Ne,gt.type=De}function Xn(ne){yn("WebGLRenderer: A WebGL context could not be created. Reason: ",ne.statusMessage)}function gr(ne){const Se=ne.target;Se.removeEventListener("dispose",gr),Rr(Se)}function Rr(ne){Uc(ne),Z.remove(ne)}function Uc(ne){const Se=Z.get(ne).programs;Se!==void 0&&(Se.forEach(function(Oe){ft.releaseProgram(Oe)}),ne.isShaderMaterial&&ft.releaseShaderCache(ne))}this.renderBufferDirect=function(ne,Se,Oe,Ne,De,vt){Se===null&&(Se=Mt);const Dt=De.isMesh&&De.matrixWorld.determinant()<0,ut=$2(ne,Se,Oe,Ne,De);ht.setMaterial(Ne,Dt);let zt=Oe.index,kt=1;if(Ne.wireframe===!0){if(zt=$e.getWireframeAttribute(Oe),zt===void 0)return;kt=2}const pn=Oe.drawRange,tn=Oe.attributes.position;let Hn=pn.start*kt,lr=(pn.start+pn.count)*kt;vt!==null&&(Hn=Math.max(Hn,vt.start*kt),lr=Math.min(lr,(vt.start+vt.count)*kt)),zt!==null?(Hn=Math.max(Hn,0),lr=Math.min(lr,zt.count)):tn!=null&&(Hn=Math.max(Hn,0),lr=Math.min(lr,tn.count));const jr=lr-Hn;if(jr<0||jr===1/0)return;xt.setup(De,Ne,ut,Oe,zt);let Nr,dr=me;if(zt!==null&&(Nr=we.get(zt),dr=yt,dr.setIndex(Nr)),De.isMesh)Ne.wireframe===!0?(ht.setLineWidth(Ne.wireframeLinewidth*on()),dr.setMode(ce.LINES)):dr.setMode(ce.TRIANGLES);else if(De.isLine){let nn=Ne.linewidth;nn===void 0&&(nn=1),ht.setLineWidth(nn*on()),De.isLineSegments?dr.setMode(ce.LINES):De.isLineLoop?dr.setMode(ce.LINE_LOOP):dr.setMode(ce.LINE_STRIP)}else De.isPoints?dr.setMode(ce.POINTS):De.isSprite&&dr.setMode(ce.TRIANGLES);if(De.isBatchedMesh)if(De._multiDrawInstances!==null)XA("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),dr.renderMultiDrawInstances(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount,De._multiDrawInstances);else if(gn.get("WEBGL_multi_draw"))dr.renderMultiDraw(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount);else{const nn=De._multiDrawStarts,vr=De._multiDrawCounts,nr=De._multiDrawCount,vs=zt?we.get(zt).bytesPerElement:1,Vc=Z.get(Ne).currentProgram.getUniforms();for(let da=0;da<nr;da++)Vc.setValue(ce,"_gl_DrawID",da),dr.render(nn[da]/vs,vr[da])}else if(De.isInstancedMesh)dr.renderInstances(Hn,jr,De.count);else if(Oe.isInstancedBufferGeometry){const nn=Oe._maxInstanceCount!==void 0?Oe._maxInstanceCount:1/0,vr=Math.min(Oe.instanceCount,nn);dr.renderInstances(Hn,jr,vr)}else dr.render(Hn,jr)};function Qi(ne,Se,Oe){ne.transparent===!0&&ne.side===Af&&ne.forceSinglePass===!1?(ne.side=Wo,ne.needsUpdate=!0,Vg(ne,Se,Oe),ne.side=Mg,ne.needsUpdate=!0,Vg(ne,Se,Oe),ne.side=Af):Vg(ne,Se,Oe)}this.compile=function(ne,Se,Oe=null){Oe===null&&(Oe=ne),E=ot.get(Oe),E.init(Se),M.push(E),Oe.traverseVisible(function(De){De.isLight&&De.layers.test(Se.layers)&&(E.pushLight(De),De.castShadow&&E.pushShadow(De))}),ne!==Oe&&ne.traverseVisible(function(De){De.isLight&&De.layers.test(Se.layers)&&(E.pushLight(De),De.castShadow&&E.pushShadow(De))}),E.setupLights();const Ne=new Set;return ne.traverse(function(De){if(!(De.isMesh||De.isPoints||De.isLine||De.isSprite))return;const vt=De.material;if(vt)if(Array.isArray(vt))for(let Dt=0;Dt<vt.length;Dt++){const ut=vt[Dt];Qi(ut,Oe,De),Ne.add(ut)}else Qi(vt,Oe,De),Ne.add(vt)}),E=M.pop(),Ne},this.compileAsync=function(ne,Se,Oe=null){const Ne=this.compile(ne,Se,Oe);return new Promise(De=>{function vt(){if(Ne.forEach(function(Dt){Z.get(Dt).currentProgram.isReady()&&Ne.delete(Dt)}),Ne.size===0){De(ne);return}setTimeout(vt,10)}gn.get("KHR_parallel_shader_compile")!==null?vt():setTimeout(vt,10)})};let Za=null;function zc(ne){Za&&Za(ne)}function js(){zu.stop()}function cp(){zu.start()}const zu=new l0e;zu.setAnimationLoop(zc),typeof self<"u"&&zu.setContext(self),this.setAnimationLoop=function(ne){Za=ne,Ye.setAnimationLoop(ne),ne===null?zu.stop():zu.start()},Ye.addEventListener("sessionstart",js),Ye.addEventListener("sessionend",cp),this.render=function(ne,Se){if(Se!==void 0&&Se.isCamera!==!0){yn("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(D===!0)return;const Oe=Ye.enabled===!0&&Ye.isPresenting===!0,Ne=P!==null&&(k===null||Oe)&&P.begin(I,k);if(ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Se.parent===null&&Se.matrixWorldAutoUpdate===!0&&Se.updateMatrixWorld(),Ye.enabled===!0&&Ye.isPresenting===!0&&(P===null||P.isCompositing()===!1)&&(Ye.cameraAutoUpdate===!0&&Ye.updateCamera(Se),Se=Ye.getCamera()),ne.isScene===!0&&ne.onBeforeRender(I,ne,Se,k),E=ot.get(ne,M.length),E.init(Se),M.push(E),He.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),Ee.setFromProjectionMatrix(He,Gh,Se.reversedDepth),Re=this.localClippingEnabled,Ce=Et.init(this.clippingPlanes,Re),w=Ge.get(ne,T.length),w.init(),T.push(w),Ye.enabled===!0&&Ye.isPresenting===!0){const Dt=I.xr.getDepthSensingMesh();Dt!==null&&cw(Dt,Se,-1/0,I.sortObjects)}cw(ne,Se,0,I.sortObjects),w.finish(),I.sortObjects===!0&&w.sort(de,ge),mt=Ye.enabled===!1||Ye.isPresenting===!1||Ye.hasDepthSensing()===!1,mt&&nt.addToRenderList(w,ne),this.info.render.frame++,Ce===!0&&Et.beginShadows();const De=E.state.shadowsArray;if(gt.render(De,ne,Se),Ce===!0&&Et.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Ne&&P.hasRenderPass())===!1){const Dt=w.opaque,ut=w.transmissive;if(E.setupLights(),Se.isArrayCamera){const zt=Se.cameras;if(ut.length>0)for(let kt=0,pn=zt.length;kt<pn;kt++){const tn=zt[kt];W2(Dt,ut,ne,tn)}mt&&nt.render(ne);for(let kt=0,pn=zt.length;kt<pn;kt++){const tn=zt[kt];j2(w,ne,tn,tn.viewport)}}else ut.length>0&&W2(Dt,ut,ne,Se),mt&&nt.render(ne),j2(w,ne,Se)}k!==null&&B===0&&(_e.updateMultisampleRenderTarget(k),_e.updateRenderTargetMipmap(k)),Ne&&P.end(I),ne.isScene===!0&&ne.onAfterRender(I,ne,Se),xt.resetDefaultState(),V=-1,G=null,M.pop(),M.length>0?(E=M[M.length-1],Ce===!0&&Et.setGlobalState(I.clippingPlanes,E.state.camera)):E=null,T.pop(),T.length>0?w=T[T.length-1]:w=null};function cw(ne,Se,Oe,Ne){if(ne.visible===!1)return;if(ne.layers.test(Se.layers)){if(ne.isGroup)Oe=ne.renderOrder;else if(ne.isLOD)ne.autoUpdate===!0&&ne.update(Se);else if(ne.isLight)E.pushLight(ne),ne.castShadow&&E.pushShadow(ne);else if(ne.isSprite){if(!ne.frustumCulled||Ee.intersectsSprite(ne)){Ne&&lt.setFromMatrixPosition(ne.matrixWorld).applyMatrix4(He);const Dt=Ve.update(ne),ut=ne.material;ut.visible&&w.push(ne,Dt,ut,Oe,lt.z,null)}}else if((ne.isMesh||ne.isLine||ne.isPoints)&&(!ne.frustumCulled||Ee.intersectsObject(ne))){const Dt=Ve.update(ne),ut=ne.material;if(Ne&&(ne.boundingSphere!==void 0?(ne.boundingSphere===null&&ne.computeBoundingSphere(),lt.copy(ne.boundingSphere.center)):(Dt.boundingSphere===null&&Dt.computeBoundingSphere(),lt.copy(Dt.boundingSphere.center)),lt.applyMatrix4(ne.matrixWorld).applyMatrix4(He)),Array.isArray(ut)){const zt=Dt.groups;for(let kt=0,pn=zt.length;kt<pn;kt++){const tn=zt[kt],Hn=ut[tn.materialIndex];Hn&&Hn.visible&&w.push(ne,Dt,Hn,Oe,lt.z,tn)}}else ut.visible&&w.push(ne,Dt,ut,Oe,lt.z,null)}}const vt=ne.children;for(let Dt=0,ut=vt.length;Dt<ut;Dt++)cw(vt[Dt],Se,Oe,Ne)}function j2(ne,Se,Oe,Ne){const{opaque:De,transmissive:vt,transparent:Dt}=ne;E.setupLightsView(Oe),Ce===!0&&Et.setGlobalState(I.clippingPlanes,Oe),Ne&&ht.viewport(F.copy(Ne)),De.length>0&&Ul(De,Se,Oe),vt.length>0&&Ul(vt,Se,Oe),Dt.length>0&&Ul(Dt,Se,Oe),ht.buffers.depth.setTest(!0),ht.buffers.depth.setMask(!0),ht.buffers.color.setMask(!0),ht.setPolygonOffset(!1)}function W2(ne,Se,Oe,Ne){if((Oe.isScene===!0?Oe.overrideMaterial:null)!==null)return;if(E.state.transmissionRenderTarget[Ne.id]===void 0){const Hn=gn.has("EXT_color_buffer_half_float")||gn.has("EXT_color_buffer_float");E.state.transmissionRenderTarget[Ne.id]=new Kh(1,1,{generateMipmaps:!0,type:Hn?Jf:Ml,minFilter:h0,samples:Cn.samples,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace})}const vt=E.state.transmissionRenderTarget[Ne.id],Dt=Ne.viewport||F;vt.setSize(Dt.z*I.transmissionResolutionScale,Dt.w*I.transmissionResolutionScale);const ut=I.getRenderTarget(),zt=I.getActiveCubeFace(),kt=I.getActiveMipmapLevel();I.setRenderTarget(vt),I.getClearColor(Q),H=I.getClearAlpha(),H<1&&I.setClearColor(16777215,.5),I.clear(),mt&&nt.render(Oe);const pn=I.toneMapping;I.toneMapping=qh;const tn=Ne.viewport;if(Ne.viewport!==void 0&&(Ne.viewport=void 0),E.setupLightsView(Ne),Ce===!0&&Et.setGlobalState(I.clippingPlanes,Ne),Ul(ne,Oe,Ne),_e.updateMultisampleRenderTarget(vt),_e.updateRenderTargetMipmap(vt),gn.has("WEBGL_multisampled_render_to_texture")===!1){let Hn=!1;for(let lr=0,jr=Se.length;lr<jr;lr++){const Nr=Se[lr],{object:dr,geometry:nn,material:vr,group:nr}=Nr;if(vr.side===Af&&dr.layers.test(Ne.layers)){const vs=vr.side;vr.side=Wo,vr.needsUpdate=!0,hw(dr,Oe,Ne,nn,vr,nr),vr.side=vs,vr.needsUpdate=!0,Hn=!0}}Hn===!0&&(_e.updateMultisampleRenderTarget(vt),_e.updateRenderTargetMipmap(vt))}I.setRenderTarget(ut,zt,kt),I.setClearColor(Q,H),tn!==void 0&&(Ne.viewport=tn),I.toneMapping=pn}function Ul(ne,Se,Oe){const Ne=Se.isScene===!0?Se.overrideMaterial:null;for(let De=0,vt=ne.length;De<vt;De++){const Dt=ne[De],{object:ut,geometry:zt,group:kt}=Dt;let pn=Dt.material;pn.allowOverride===!0&&Ne!==null&&(pn=Ne),ut.layers.test(Oe.layers)&&hw(ut,Se,Oe,zt,pn,kt)}}function hw(ne,Se,Oe,Ne,De,vt){ne.onBeforeRender(I,Se,Oe,Ne,De,vt),ne.modelViewMatrix.multiplyMatrices(Oe.matrixWorldInverse,ne.matrixWorld),ne.normalMatrix.getNormalMatrix(ne.modelViewMatrix),De.onBeforeRender(I,Se,Oe,Ne,ne,vt),De.transparent===!0&&De.side===Af&&De.forceSinglePass===!1?(De.side=Wo,De.needsUpdate=!0,I.renderBufferDirect(Oe,Se,Ne,De,ne,vt),De.side=Mg,De.needsUpdate=!0,I.renderBufferDirect(Oe,Se,Ne,De,ne,vt),De.side=Af):I.renderBufferDirect(Oe,Se,Ne,De,ne,vt),ne.onAfterRender(I,Se,Oe,Ne,De,vt)}function Vg(ne,Se,Oe){Se.isScene!==!0&&(Se=Mt);const Ne=Z.get(ne),De=E.state.lights,vt=E.state.shadowsArray,Dt=De.state.version,ut=ft.getParameters(ne,De.state,vt,Se,Oe),zt=ft.getProgramCacheKey(ut);let kt=Ne.programs;Ne.environment=ne.isMeshStandardMaterial?Se.environment:null,Ne.fog=Se.fog,Ne.envMap=(ne.isMeshStandardMaterial?xe:le).get(ne.envMap||Ne.environment),Ne.envMapRotation=Ne.environment!==null&&ne.envMap===null?Se.environmentRotation:ne.envMapRotation,kt===void 0&&(ne.addEventListener("dispose",gr),kt=new Map,Ne.programs=kt);let pn=kt.get(zt);if(pn!==void 0){if(Ne.currentProgram===pn&&Ne.lightsStateVersion===Dt)return dw(ne,ut),pn}else ut.uniforms=ft.getUniforms(ne),ne.onBeforeCompile(ut,I),pn=ft.acquireProgram(ut,zt),kt.set(zt,pn),Ne.uniforms=ut.uniforms;const tn=Ne.uniforms;return(!ne.isShaderMaterial&&!ne.isRawShaderMaterial||ne.clipping===!0)&&(tn.clippingPlanes=Et.uniform),dw(ne,ut),Ne.needsLights=q2(ne),Ne.lightsStateVersion=Dt,Ne.needsLights&&(tn.ambientLightColor.value=De.state.ambient,tn.lightProbe.value=De.state.probe,tn.directionalLights.value=De.state.directional,tn.directionalLightShadows.value=De.state.directionalShadow,tn.spotLights.value=De.state.spot,tn.spotLightShadows.value=De.state.spotShadow,tn.rectAreaLights.value=De.state.rectArea,tn.ltc_1.value=De.state.rectAreaLTC1,tn.ltc_2.value=De.state.rectAreaLTC2,tn.pointLights.value=De.state.point,tn.pointLightShadows.value=De.state.pointShadow,tn.hemisphereLights.value=De.state.hemi,tn.directionalShadowMap.value=De.state.directionalShadowMap,tn.directionalShadowMatrix.value=De.state.directionalShadowMatrix,tn.spotShadowMap.value=De.state.spotShadowMap,tn.spotLightMatrix.value=De.state.spotLightMatrix,tn.spotLightMap.value=De.state.spotLightMap,tn.pointShadowMap.value=De.state.pointShadowMap,tn.pointShadowMatrix.value=De.state.pointShadowMatrix),Ne.currentProgram=pn,Ne.uniformsList=null,pn}function X2(ne){if(ne.uniformsList===null){const Se=ne.currentProgram.getUniforms();ne.uniformsList=jL.seqWithValue(Se.seq,ne.uniforms)}return ne.uniformsList}function dw(ne,Se){const Oe=Z.get(ne);Oe.outputColorSpace=Se.outputColorSpace,Oe.batching=Se.batching,Oe.batchingColor=Se.batchingColor,Oe.instancing=Se.instancing,Oe.instancingColor=Se.instancingColor,Oe.instancingMorph=Se.instancingMorph,Oe.skinning=Se.skinning,Oe.morphTargets=Se.morphTargets,Oe.morphNormals=Se.morphNormals,Oe.morphColors=Se.morphColors,Oe.morphTargetsCount=Se.morphTargetsCount,Oe.numClippingPlanes=Se.numClippingPlanes,Oe.numIntersection=Se.numClipIntersection,Oe.vertexAlphas=Se.vertexAlphas,Oe.vertexTangents=Se.vertexTangents,Oe.toneMapping=Se.toneMapping}function $2(ne,Se,Oe,Ne,De){Se.isScene!==!0&&(Se=Mt),_e.resetTextureUnits();const vt=Se.fog,Dt=Ne.isMeshStandardMaterial?Se.environment:null,ut=k===null?I.outputColorSpace:k.isXRRenderTarget===!0?k.texture.colorSpace:yS,zt=(Ne.isMeshStandardMaterial?xe:le).get(Ne.envMap||Dt),kt=Ne.vertexColors===!0&&!!Oe.attributes.color&&Oe.attributes.color.itemSize===4,pn=!!Oe.attributes.tangent&&(!!Ne.normalMap||Ne.anisotropy>0),tn=!!Oe.morphAttributes.position,Hn=!!Oe.morphAttributes.normal,lr=!!Oe.morphAttributes.color;let jr=qh;Ne.toneMapped&&(k===null||k.isXRRenderTarget===!0)&&(jr=I.toneMapping);const Nr=Oe.morphAttributes.position||Oe.morphAttributes.normal||Oe.morphAttributes.color,dr=Nr!==void 0?Nr.length:0,nn=Z.get(Ne),vr=E.state.lights;if(Ce===!0&&(Re===!0||ne!==G)){const Da=ne===G&&Ne.id===V;Et.setState(Ne,ne,Da)}let nr=!1;Ne.version===nn.__version?(nn.needsLights&&nn.lightsStateVersion!==vr.state.version||nn.outputColorSpace!==ut||De.isBatchedMesh&&nn.batching===!1||!De.isBatchedMesh&&nn.batching===!0||De.isBatchedMesh&&nn.batchingColor===!0&&De.colorTexture===null||De.isBatchedMesh&&nn.batchingColor===!1&&De.colorTexture!==null||De.isInstancedMesh&&nn.instancing===!1||!De.isInstancedMesh&&nn.instancing===!0||De.isSkinnedMesh&&nn.skinning===!1||!De.isSkinnedMesh&&nn.skinning===!0||De.isInstancedMesh&&nn.instancingColor===!0&&De.instanceColor===null||De.isInstancedMesh&&nn.instancingColor===!1&&De.instanceColor!==null||De.isInstancedMesh&&nn.instancingMorph===!0&&De.morphTexture===null||De.isInstancedMesh&&nn.instancingMorph===!1&&De.morphTexture!==null||nn.envMap!==zt||Ne.fog===!0&&nn.fog!==vt||nn.numClippingPlanes!==void 0&&(nn.numClippingPlanes!==Et.numPlanes||nn.numIntersection!==Et.numIntersection)||nn.vertexAlphas!==kt||nn.vertexTangents!==pn||nn.morphTargets!==tn||nn.morphNormals!==Hn||nn.morphColors!==lr||nn.toneMapping!==jr||nn.morphTargetsCount!==dr)&&(nr=!0):(nr=!0,nn.__version=Ne.version);let vs=nn.currentProgram;nr===!0&&(vs=Vg(Ne,Se,De));let Vc=!1,da=!1,Hg=!1;const Sr=vs.getUniforms(),Mn=nn.uniforms;if(ht.useProgram(vs.program)&&(Vc=!0,da=!0,Hg=!0),Ne.id!==V&&(V=Ne.id,da=!0),Vc||G!==ne){ht.buffers.depth.getReversed()&&ne.reversedDepth!==!0&&(ne._reversedDepth=!0,ne.updateProjectionMatrix()),Sr.setValue(ce,"projectionMatrix",ne.projectionMatrix),Sr.setValue(ce,"viewMatrix",ne.matrixWorldInverse);const Ia=Sr.map.cameraPosition;Ia!==void 0&&Ia.setValue(ce,pt.setFromMatrixPosition(ne.matrixWorld)),Cn.logarithmicDepthBuffer&&Sr.setValue(ce,"logDepthBufFC",2/(Math.log(ne.far+1)/Math.LN2)),(Ne.isMeshPhongMaterial||Ne.isMeshToonMaterial||Ne.isMeshLambertMaterial||Ne.isMeshBasicMaterial||Ne.isMeshStandardMaterial||Ne.isShaderMaterial)&&Sr.setValue(ce,"isOrthographic",ne.isOrthographicCamera===!0),G!==ne&&(G=ne,da=!0,Hg=!0)}if(nn.needsLights&&(vr.state.directionalShadowMap.length>0&&Sr.setValue(ce,"directionalShadowMap",vr.state.directionalShadowMap,_e),vr.state.spotShadowMap.length>0&&Sr.setValue(ce,"spotShadowMap",vr.state.spotShadowMap,_e),vr.state.pointShadowMap.length>0&&Sr.setValue(ce,"pointShadowMap",vr.state.pointShadowMap,_e)),De.isSkinnedMesh){Sr.setOptional(ce,De,"bindMatrix"),Sr.setOptional(ce,De,"bindMatrixInverse");const Da=De.skeleton;Da&&(Da.boneTexture===null&&Da.computeBoneTexture(),Sr.setValue(ce,"boneTexture",Da.boneTexture,_e))}De.isBatchedMesh&&(Sr.setOptional(ce,De,"batchingTexture"),Sr.setValue(ce,"batchingTexture",De._matricesTexture,_e),Sr.setOptional(ce,De,"batchingIdTexture"),Sr.setValue(ce,"batchingIdTexture",De._indirectTexture,_e),Sr.setOptional(ce,De,"batchingColorTexture"),De._colorsTexture!==null&&Sr.setValue(ce,"batchingColorTexture",De._colorsTexture,_e));const Ws=Oe.morphAttributes;if((Ws.position!==void 0||Ws.normal!==void 0||Ws.color!==void 0)&&Zt.update(De,Oe,vs),(da||nn.receiveShadow!==De.receiveShadow)&&(nn.receiveShadow=De.receiveShadow,Sr.setValue(ce,"receiveShadow",De.receiveShadow)),Ne.isMeshGouraudMaterial&&Ne.envMap!==null&&(Mn.envMap.value=zt,Mn.flipEnvMap.value=zt.isCubeTexture&&zt.isRenderTargetTexture===!1?-1:1),Ne.isMeshStandardMaterial&&Ne.envMap===null&&Se.environment!==null&&(Mn.envMapIntensity.value=Se.environmentIntensity),Mn.dfgLUT!==void 0&&(Mn.dfgLUT.value=Unt()),da&&(Sr.setValue(ce,"toneMappingExposure",I.toneMappingExposure),nn.needsLights&&Y2(Mn,Hg),vt&&Ne.fog===!0&&Vt.refreshFogUniforms(Mn,vt),Vt.refreshMaterialUniforms(Mn,Ne,Y,te,E.state.transmissionRenderTarget[ne.id]),jL.upload(ce,X2(nn),Mn,_e)),Ne.isShaderMaterial&&Ne.uniformsNeedUpdate===!0&&(jL.upload(ce,X2(nn),Mn,_e),Ne.uniformsNeedUpdate=!1),Ne.isSpriteMaterial&&Sr.setValue(ce,"center",De.center),Sr.setValue(ce,"modelViewMatrix",De.modelViewMatrix),Sr.setValue(ce,"normalMatrix",De.normalMatrix),Sr.setValue(ce,"modelMatrix",De.matrixWorld),Ne.isShaderMaterial||Ne.isRawShaderMaterial){const Da=Ne.uniformsGroups;for(let Ia=0,vx=Da.length;Ia<vx;Ia++){const Hc=Da[Ia];Ze.update(Hc,vs),Ze.bind(Hc,vs)}}return vs}function Y2(ne,Se){ne.ambientLightColor.needsUpdate=Se,ne.lightProbe.needsUpdate=Se,ne.directionalLights.needsUpdate=Se,ne.directionalLightShadows.needsUpdate=Se,ne.pointLights.needsUpdate=Se,ne.pointLightShadows.needsUpdate=Se,ne.spotLights.needsUpdate=Se,ne.spotLightShadows.needsUpdate=Se,ne.rectAreaLights.needsUpdate=Se,ne.hemisphereLights.needsUpdate=Se}function q2(ne){return ne.isMeshLambertMaterial||ne.isMeshToonMaterial||ne.isMeshPhongMaterial||ne.isMeshStandardMaterial||ne.isShadowMaterial||ne.isShaderMaterial&&ne.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(ne,Se,Oe){const Ne=Z.get(ne);Ne.__autoAllocateDepthBuffer=ne.resolveDepthBuffer===!1,Ne.__autoAllocateDepthBuffer===!1&&(Ne.__useRenderToTexture=!1),Z.get(ne.texture).__webglTexture=Se,Z.get(ne.depthTexture).__webglTexture=Ne.__autoAllocateDepthBuffer?void 0:Oe,Ne.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ne,Se){const Oe=Z.get(ne);Oe.__webglFramebuffer=Se,Oe.__useDefaultFramebuffer=Se===void 0};const dO=ce.createFramebuffer();this.setRenderTarget=function(ne,Se=0,Oe=0){k=ne,R=Se,B=Oe;let Ne=null,De=!1,vt=!1;if(ne){const ut=Z.get(ne);if(ut.__useDefaultFramebuffer!==void 0){ht.bindFramebuffer(ce.FRAMEBUFFER,ut.__webglFramebuffer),F.copy(ne.viewport),X.copy(ne.scissor),j=ne.scissorTest,ht.viewport(F),ht.scissor(X),ht.setScissorTest(j),V=-1;return}else if(ut.__webglFramebuffer===void 0)_e.setupRenderTarget(ne);else if(ut.__hasExternalTextures)_e.rebindTextures(ne,Z.get(ne.texture).__webglTexture,Z.get(ne.depthTexture).__webglTexture);else if(ne.depthBuffer){const pn=ne.depthTexture;if(ut.__boundDepthTexture!==pn){if(pn!==null&&Z.has(pn)&&(ne.width!==pn.image.width||ne.height!==pn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");_e.setupDepthRenderbuffer(ne)}}const zt=ne.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(vt=!0);const kt=Z.get(ne).__webglFramebuffer;ne.isWebGLCubeRenderTarget?(Array.isArray(kt[Se])?Ne=kt[Se][Oe]:Ne=kt[Se],De=!0):ne.samples>0&&_e.useMultisampledRTT(ne)===!1?Ne=Z.get(ne).__webglMultisampledFramebuffer:Array.isArray(kt)?Ne=kt[Oe]:Ne=kt,F.copy(ne.viewport),X.copy(ne.scissor),j=ne.scissorTest}else F.copy(se).multiplyScalar(Y).floor(),X.copy(he).multiplyScalar(Y).floor(),j=fe;if(Oe!==0&&(Ne=dO),ht.bindFramebuffer(ce.FRAMEBUFFER,Ne)&&ht.drawBuffers(ne,Ne),ht.viewport(F),ht.scissor(X),ht.setScissorTest(j),De){const ut=Z.get(ne.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+Se,ut.__webglTexture,Oe)}else if(vt){const ut=Se;for(let zt=0;zt<ne.textures.length;zt++){const kt=Z.get(ne.textures[zt]);ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0+zt,kt.__webglTexture,Oe,ut)}}else if(ne!==null&&Oe!==0){const ut=Z.get(ne.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,ut.__webglTexture,Oe)}V=-1},this.readRenderTargetPixels=function(ne,Se,Oe,Ne,De,vt,Dt,ut=0){if(!(ne&&ne.isWebGLRenderTarget)){yn("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let zt=Z.get(ne).__webglFramebuffer;if(ne.isWebGLCubeRenderTarget&&Dt!==void 0&&(zt=zt[Dt]),zt){ht.bindFramebuffer(ce.FRAMEBUFFER,zt);try{const kt=ne.textures[ut],pn=kt.format,tn=kt.type;if(!Cn.textureFormatReadable(pn)){yn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Cn.textureTypeReadable(tn)){yn("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Se>=0&&Se<=ne.width-Ne&&Oe>=0&&Oe<=ne.height-De&&(ne.textures.length>1&&ce.readBuffer(ce.COLOR_ATTACHMENT0+ut),ce.readPixels(Se,Oe,Ne,De,tt.convert(pn),tt.convert(tn),vt))}finally{const kt=k!==null?Z.get(k).__webglFramebuffer:null;ht.bindFramebuffer(ce.FRAMEBUFFER,kt)}}},this.readRenderTargetPixelsAsync=async function(ne,Se,Oe,Ne,De,vt,Dt,ut=0){if(!(ne&&ne.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let zt=Z.get(ne).__webglFramebuffer;if(ne.isWebGLCubeRenderTarget&&Dt!==void 0&&(zt=zt[Dt]),zt)if(Se>=0&&Se<=ne.width-Ne&&Oe>=0&&Oe<=ne.height-De){ht.bindFramebuffer(ce.FRAMEBUFFER,zt);const kt=ne.textures[ut],pn=kt.format,tn=kt.type;if(!Cn.textureFormatReadable(pn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Cn.textureTypeReadable(tn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Hn=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Hn),ce.bufferData(ce.PIXEL_PACK_BUFFER,vt.byteLength,ce.STREAM_READ),ne.textures.length>1&&ce.readBuffer(ce.COLOR_ATTACHMENT0+ut),ce.readPixels(Se,Oe,Ne,De,tt.convert(pn),tt.convert(tn),0);const lr=k!==null?Z.get(k).__webglFramebuffer:null;ht.bindFramebuffer(ce.FRAMEBUFFER,lr);const jr=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),await Kqe(ce,jr,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Hn),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,vt),ce.deleteBuffer(Hn),ce.deleteSync(jr),vt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ne,Se=null,Oe=0){const Ne=Math.pow(2,-Oe),De=Math.floor(ne.image.width*Ne),vt=Math.floor(ne.image.height*Ne),Dt=Se!==null?Se.x:0,ut=Se!==null?Se.y:0;_e.setTexture2D(ne,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,Oe,0,0,Dt,ut,De,vt),ht.unbindTexture()};const fO=ce.createFramebuffer(),mi=ce.createFramebuffer();this.copyTextureToTexture=function(ne,Se,Oe=null,Ne=null,De=0,vt=null){vt===null&&(De!==0?(XA("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),vt=De,De=0):vt=0);let Dt,ut,zt,kt,pn,tn,Hn,lr,jr;const Nr=ne.isCompressedTexture?ne.mipmaps[vt]:ne.image;if(Oe!==null)Dt=Oe.max.x-Oe.min.x,ut=Oe.max.y-Oe.min.y,zt=Oe.isBox3?Oe.max.z-Oe.min.z:1,kt=Oe.min.x,pn=Oe.min.y,tn=Oe.isBox3?Oe.min.z:0;else{const Ws=Math.pow(2,-De);Dt=Math.floor(Nr.width*Ws),ut=Math.floor(Nr.height*Ws),ne.isDataArrayTexture?zt=Nr.depth:ne.isData3DTexture?zt=Math.floor(Nr.depth*Ws):zt=1,kt=0,pn=0,tn=0}Ne!==null?(Hn=Ne.x,lr=Ne.y,jr=Ne.z):(Hn=0,lr=0,jr=0);const dr=tt.convert(Se.format),nn=tt.convert(Se.type);let vr;Se.isData3DTexture?(_e.setTexture3D(Se,0),vr=ce.TEXTURE_3D):Se.isDataArrayTexture||Se.isCompressedArrayTexture?(_e.setTexture2DArray(Se,0),vr=ce.TEXTURE_2D_ARRAY):(_e.setTexture2D(Se,0),vr=ce.TEXTURE_2D),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,Se.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,Se.unpackAlignment);const nr=ce.getParameter(ce.UNPACK_ROW_LENGTH),vs=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),Vc=ce.getParameter(ce.UNPACK_SKIP_PIXELS),da=ce.getParameter(ce.UNPACK_SKIP_ROWS),Hg=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Nr.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Nr.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,kt),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,pn),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,tn);const Sr=ne.isDataArrayTexture||ne.isData3DTexture,Mn=Se.isDataArrayTexture||Se.isData3DTexture;if(ne.isDepthTexture){const Ws=Z.get(ne),Da=Z.get(Se),Ia=Z.get(Ws.__renderTarget),vx=Z.get(Da.__renderTarget);ht.bindFramebuffer(ce.READ_FRAMEBUFFER,Ia.__webglFramebuffer),ht.bindFramebuffer(ce.DRAW_FRAMEBUFFER,vx.__webglFramebuffer);for(let Hc=0;Hc<zt;Hc++)Sr&&(ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Z.get(ne).__webglTexture,De,tn+Hc),ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Z.get(Se).__webglTexture,vt,jr+Hc)),ce.blitFramebuffer(kt,pn,Dt,ut,Hn,lr,Dt,ut,ce.DEPTH_BUFFER_BIT,ce.NEAREST);ht.bindFramebuffer(ce.READ_FRAMEBUFFER,null),ht.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else if(De!==0||ne.isRenderTargetTexture||Z.has(ne)){const Ws=Z.get(ne),Da=Z.get(Se);ht.bindFramebuffer(ce.READ_FRAMEBUFFER,fO),ht.bindFramebuffer(ce.DRAW_FRAMEBUFFER,mi);for(let Ia=0;Ia<zt;Ia++)Sr?ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Ws.__webglTexture,De,tn+Ia):ce.framebufferTexture2D(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Ws.__webglTexture,De),Mn?ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Da.__webglTexture,vt,jr+Ia):ce.framebufferTexture2D(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Da.__webglTexture,vt),De!==0?ce.blitFramebuffer(kt,pn,Dt,ut,Hn,lr,Dt,ut,ce.COLOR_BUFFER_BIT,ce.NEAREST):Mn?ce.copyTexSubImage3D(vr,vt,Hn,lr,jr+Ia,kt,pn,Dt,ut):ce.copyTexSubImage2D(vr,vt,Hn,lr,kt,pn,Dt,ut);ht.bindFramebuffer(ce.READ_FRAMEBUFFER,null),ht.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else Mn?ne.isDataTexture||ne.isData3DTexture?ce.texSubImage3D(vr,vt,Hn,lr,jr,Dt,ut,zt,dr,nn,Nr.data):Se.isCompressedArrayTexture?ce.compressedTexSubImage3D(vr,vt,Hn,lr,jr,Dt,ut,zt,dr,Nr.data):ce.texSubImage3D(vr,vt,Hn,lr,jr,Dt,ut,zt,dr,nn,Nr):ne.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,vt,Hn,lr,Dt,ut,dr,nn,Nr.data):ne.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,vt,Hn,lr,Nr.width,Nr.height,dr,Nr.data):ce.texSubImage2D(ce.TEXTURE_2D,vt,Hn,lr,Dt,ut,dr,nn,Nr);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,nr),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,vs),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,Vc),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,da),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Hg),vt===0&&Se.generateMipmaps&&ce.generateMipmap(vr),ht.unbindTexture()},this.initRenderTarget=function(ne){Z.get(ne).__webglFramebuffer===void 0&&_e.setupRenderTarget(ne)},this.initTexture=function(ne){ne.isCubeTexture?_e.setTextureCube(ne,0):ne.isData3DTexture?_e.setTexture3D(ne,0):ne.isDataArrayTexture||ne.isCompressedArrayTexture?_e.setTexture2DArray(ne,0):_e.setTexture2D(ne,0),ht.unbindTexture()},this.resetState=function(){R=0,B=0,k=null,ht.reset(),xt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Gh}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Fn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Fn._getUnpackColorSpace()}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.8.2
*/var Eu=Uint8Array,lb=Uint16Array,Vnt=Int32Array,f0e=new Eu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p0e=new Eu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hnt=new Eu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m0e=function(n,e){for(var t=new lb(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Vnt(t[30]),r=1;r<30;++r)for(var a=t[r];a<t[r+1];++a)i[a]=a-t[r]<<5|r;return{b:t,r:i}},g0e=m0e(f0e,2),v0e=g0e.b,Gnt=g0e.r;v0e[28]=258,Gnt[258]=28;var jnt=m0e(p0e,0),Wnt=jnt.b,nH=new lb(32768);for(var oi=0;oi<32768;++oi){var Xp=(oi&43690)>>1|(oi&21845)<<1;Xp=(Xp&52428)>>2|(Xp&13107)<<2,Xp=(Xp&61680)>>4|(Xp&3855)<<4,nH[oi]=((Xp&65280)>>8|(Xp&255)<<8)>>1}var ZE=(function(n,e,t){for(var r=n.length,i=0,a=new lb(e);i<r;++i)n[i]&&++a[n[i]-1];var s=new lb(e);for(i=1;i<e;++i)s[i]=s[i-1]+a[i-1]<<1;var o;if(t){o=new lb(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],h=s[n[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)o[nH[h]>>l]=u}else for(o=new lb(r),i=0;i<r;++i)n[i]&&(o[i]=nH[s[n[i]-1]++]>>15-n[i]);return o}),L2=new Eu(288);for(var oi=0;oi<144;++oi)L2[oi]=8;for(var oi=144;oi<256;++oi)L2[oi]=9;for(var oi=256;oi<280;++oi)L2[oi]=7;for(var oi=280;oi<288;++oi)L2[oi]=8;var y0e=new Eu(32);for(var oi=0;oi<32;++oi)y0e[oi]=5;var Xnt=ZE(L2,9,1),$nt=ZE(y0e,5,1),R6=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Qu=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},N6=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Ynt=function(n){return(n+7)/8|0},qnt=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Eu(n.subarray(e,t))},Knt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],sc=function(n,e,t){var r=new Error(e||Knt[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,sc),!t)throw r;return r},Znt=function(n,e,t,r){var i=n.length,a=0;if(!i||e.f&&!e.l)return t||new Eu(0);var s=!t,o=s||e.i!=2,l=e.i;s&&(t=new Eu(i*3));var u=function(Re){var He=t.length;if(Re>He){var pt=new Eu(Math.max(He*2,Re));pt.set(t),t=pt}},c=e.f||0,h=e.p||0,d=e.b||0,f=e.l,p=e.d,m=e.m,g=e.n,v=i*8;do{if(!f){c=Qu(n,h,1);var b=Qu(n,h+1,3);if(h+=3,b)if(b==1)f=Xnt,p=$nt,m=9,g=5;else if(b==2){var T=Qu(n,h,31)+257,M=Qu(n,h+10,15)+4,P=T+Qu(n,h+5,31)+1;h+=14;for(var I=new Eu(P),D=new Eu(19),R=0;R<M;++R)D[Hnt[R]]=Qu(n,h+R*3,7);h+=M*3;for(var B=R6(D),k=(1<<B)-1,V=ZE(D,B,1),R=0;R<P;){var G=V[Qu(n,h,k)];h+=G&15;var S=G>>4;if(S<16)I[R++]=S;else{var F=0,X=0;for(S==16?(X=3+Qu(n,h,3),h+=2,F=I[R-1]):S==17?(X=3+Qu(n,h,7),h+=3):S==18&&(X=11+Qu(n,h,127),h+=7);X--;)I[R++]=F}}var j=I.subarray(0,T),Q=I.subarray(T);m=R6(j),g=R6(Q),f=ZE(j,m,1),p=ZE(Q,g,1)}else sc(1);else{var S=Ynt(h)+4,w=n[S-4]|n[S-3]<<8,E=S+w;if(E>i){l&&sc(0);break}o&&u(d+w),t.set(n.subarray(S,E),d),e.b=d+=w,e.p=h=E*8,e.f=c;continue}if(h>v){l&&sc(0);break}}o&&u(d+131072);for(var H=(1<<m)-1,K=(1<<g)-1,te=h;;te=h){var F=f[N6(n,h)&H],Y=F>>4;if(h+=F&15,h>v){l&&sc(0);break}if(F||sc(2),Y<256)t[d++]=Y;else if(Y==256){te=h,f=null;break}else{var de=Y-254;if(Y>264){var R=Y-257,ge=f0e[R];de=Qu(n,h,(1<<ge)-1)+v0e[R],h+=ge}var se=p[N6(n,h)&K],he=se>>4;se||sc(3),h+=se&15;var Q=Wnt[he];if(he>3){var ge=p0e[he];Q+=N6(n,h)&(1<<ge)-1,h+=ge}if(h>v){l&&sc(0);break}o&&u(d+131072);var fe=d+de;if(d<Q){var Ee=a-Q,Ce=Math.min(Q,fe);for(Ee+d<0&&sc(3);d<Ce;++d)t[d]=r[Ee+d]}for(;d<fe;++d)t[d]=t[d-Q]}}e.l=f,e.p=te,e.b=d,e.f=c,f&&(c=1,e.m=m,e.d=p,e.n=g)}while(!c);return d!=t.length&&s?qnt(t,0,d):t.subarray(0,d)},Qnt=new Eu(0),Jnt=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&sc(6,"invalid zlib data"),(n[1]>>5&1)==1&&sc(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ert(n,e){return Znt(n.subarray(Jnt(n),-4),{i:2},e,e)}var trt=typeof TextDecoder<"u"&&new TextDecoder,nrt=0;try{trt.decode(Qnt,{stream:!0}),nrt=1}catch{}function x0e(n,e,t){const r=t.length-n-1;if(e>=t[r])return r-1;if(e<=t[n])return n;let i=n,a=r,s=Math.floor((i+a)/2);for(;e<t[s]||e>=t[s+1];)e<t[s]?a=s:i=s,s=Math.floor((i+a)/2);return s}function rrt(n,e,t,r){const i=[],a=[],s=[];i[0]=1;for(let o=1;o<=t;++o){a[o]=e-r[n+1-o],s[o]=r[n+o]-e;let l=0;for(let u=0;u<o;++u){const c=s[u+1],h=a[o-u],d=i[u]/(c+h);i[u]=l+c*d,l=h*d}i[o]=l}return i}function irt(n,e,t,r){const i=x0e(n,r,e),a=rrt(i,r,n,e),s=new Tr(0,0,0,0);for(let o=0;o<=n;++o){const l=t[i-n+o],u=a[o],c=l.w*u;s.x+=l.x*c,s.y+=l.y*c,s.z+=l.z*c,s.w+=l.w*u}return s}function art(n,e,t,r,i){const a=[];for(let h=0;h<=t;++h)a[h]=0;const s=[];for(let h=0;h<=r;++h)s[h]=a.slice(0);const o=[];for(let h=0;h<=t;++h)o[h]=a.slice(0);o[0][0]=1;const l=a.slice(0),u=a.slice(0);for(let h=1;h<=t;++h){l[h]=e-i[n+1-h],u[h]=i[n+h]-e;let d=0;for(let f=0;f<h;++f){const p=u[f+1],m=l[h-f];o[h][f]=p+m;const g=o[f][h-1]/o[h][f];o[f][h]=d+p*g,d=m*g}o[h][h]=d}for(let h=0;h<=t;++h)s[0][h]=o[h][t];for(let h=0;h<=t;++h){let d=0,f=1;const p=[];for(let m=0;m<=t;++m)p[m]=a.slice(0);p[0][0]=1;for(let m=1;m<=r;++m){let g=0;const v=h-m,b=t-m;h>=m&&(p[f][0]=p[d][0]/o[b+1][v],g=p[f][0]*o[v][b]);const S=v>=-1?1:-v,w=h-1<=b?m-1:t-h;for(let T=S;T<=w;++T)p[f][T]=(p[d][T]-p[d][T-1])/o[b+1][v+T],g+=p[f][T]*o[v+T][b];h<=b&&(p[f][m]=-p[d][m-1]/o[b+1][h],g+=p[f][m]*o[h][b]),s[m][h]=g;const E=d;d=f,f=E}}let c=t;for(let h=1;h<=r;++h){for(let d=0;d<=t;++d)s[h][d]*=c;c*=t-h}return s}function srt(n,e,t,r,i){const a=i<n?i:n,s=[],o=x0e(n,r,e),l=art(o,r,n,a,e),u=[];for(let c=0;c<t.length;++c){const h=t[c].clone(),d=h.w;h.x*=d,h.y*=d,h.z*=d,u[c]=h}for(let c=0;c<=a;++c){const h=u[o-n].clone().multiplyScalar(l[c][0]);for(let d=1;d<=n;++d)h.add(u[o-n+d].clone().multiplyScalar(l[c][d]));s[c]=h}for(let c=a+1;c<=i+1;++c)s[c]=new Tr(0,0,0);return s}function ort(n,e){let t=1;for(let i=2;i<=n;++i)t*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=n-e;++i)r*=i;return t/r}function lrt(n){const e=n.length,t=[],r=[];for(let a=0;a<e;++a){const s=n[a];t[a]=new Te(s.x,s.y,s.z),r[a]=s.w}const i=[];for(let a=0;a<e;++a){const s=t[a].clone();for(let o=1;o<=a;++o)s.sub(i[a-o].clone().multiplyScalar(ort(a,o)*r[o]));i[a]=s.divideScalar(r[0])}return i}function urt(n,e,t,r,i){const a=srt(n,e,t,r,i);return lrt(a)}class crt extends WKe{constructor(e,t,r,i,a){super();const s=t?t.length-1:0,o=r?r.length:0;this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=a||s;for(let l=0;l<o;++l){const u=r[l];this.controlPoints[l]=new Tr(u.x,u.y,u.z,u.w)}}getPoint(e,t=new Te){const r=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=irt(this.degree,this.knots,this.controlPoints,i);return a.w!==1&&a.divideScalar(a.w),r.set(a.x,a.y,a.z)}getTangent(e,t=new Te){const r=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=urt(this.degree,this.knots,this.controlPoints,i,1);return r.copy(a[1]).normalize(),r}toJSON(){const e=super.toJSON();return e.degree=this.degree,e.knots=[...this.knots],e.controlPoints=this.controlPoints.map(t=>t.toArray()),e.startKnot=this.startKnot,e.endKnot=this.endKnot,e}fromJSON(e){return super.fromJSON(e),this.degree=e.degree,this.knots=[...e.knots],this.controlPoints=e.controlPoints.map(t=>new Tr(t[0],t[1],t[2],t[3])),this.startKnot=e.startKnot,this.endKnot=e.endKnot,this}}let Wn,Hi,Qs;class hrt extends Ky{constructor(e){super(e)}load(e,t,r,i){const a=this,s=a.path===""?LZe.extractUrlBase(e):a.path,o=new EZe(this.manager);o.setPath(a.path),o.setResponseType("arraybuffer"),o.setRequestHeader(a.requestHeader),o.setWithCredentials(a.withCredentials),o.load(e,function(l){try{t(a.parse(l,s))}catch(u){i?i(u):console.error(u),a.manager.itemError(e)}},r,i)}parse(e,t){if(vrt(e))Wn=new grt().parse(e);else{const i=S0e(e);if(!yrt(i))throw new Error("THREE.FBXLoader: Unknown format.");if(Cae(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Cae(i));Wn=new mrt().parse(i)}const r=new CZe(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new drt(r,this.manager).parse(Wn)}}class drt{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Hi=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),r=this.parseMaterials(t),i=this.parseDeformers(),a=new frt().parse(i);return this.parseScene(i,a,r),Qs}parseConnections(){const e=new Map;return"Connections"in Wn&&Wn.Connections.connections.forEach(function(r){const i=r[0],a=r[1],s=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:a,relationship:s};e.get(i).parents.push(o),e.has(a)||e.set(a,{parents:[],children:[]});const l={ID:i,relationship:s};e.get(a).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in Wn.Objects){const r=Wn.Objects.Video;for(const i in r){const a=r[i],s=parseInt(i);if(e[s]=a.RelativeFilename||a.Filename,"Content"in a){const o=a.Content instanceof ArrayBuffer&&a.Content.byteLength>0,l=typeof a.Content=="string"&&a.Content!=="";if(o||l){const u=this.parseImage(r[i]);t[a.RelativeFilename||a.Filename]=u}}}}for(const r in e){const i=e[r];t[i]!==void 0?e[r]=t[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const t=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let a;switch(i){case"bmp":a="image/bmp";break;case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"tif":a="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),a="image/tga";break;case"webp":a="image/webp";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof t=="string")return"data:"+a+";base64,"+t;{const s=new Uint8Array(t);return window.URL.createObjectURL(new Blob([s],{type:a}))}}parseTextures(e){const t=new Map;if("Texture"in Wn.Objects){const r=Wn.Objects.Texture;for(const i in r){const a=this.parseTexture(r[i],e);t.set(parseInt(i),a)}}return t}parseTexture(e,t){const r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,a=e.WrapModeV,s=i!==void 0?i.value:0,o=a!==void 0?a.value:0;if(r.wrapS=s===0?HA:bc,r.wrapT=o===0?HA:bc,"Scaling"in e){const l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;r.offset.x=l[0],r.offset.y=l[1]}return r}loadTexture(e,t){const r=e.FileName.split(".").pop().toLowerCase();let i=this.manager.getHandler(`.${r}`);i===null&&(i=this.textureLoader);const a=i.path;a||i.setPath(this.textureLoader.path);const s=Hi.get(e.id).children;let o;if(s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(o=t[s[0].ID],(o.indexOf("blob:")===0||o.indexOf("data:")===0)&&i.setPath(void 0)),o===void 0)return console.warn("FBXLoader: Undefined filename, creating placeholder texture."),new ms;const l=i.load(o);return i.setPath(a),l}parseMaterials(e){const t=new Map;if("Material"in Wn.Objects){const r=Wn.Objects.Material;for(const i in r){const a=this.parseMaterial(r[i],e);a!==null&&t.set(parseInt(i),a)}}return t}parseMaterial(e,t){const r=e.id,i=e.attrName;let a=e.ShadingModel;if(typeof a=="object"&&(a=a.value),!Hi.has(r))return null;const s=this.parseParameters(e,t,r);let o;switch(a.toLowerCase()){case"phong":o=new GP;break;case"lambert":o=new hZe;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),o=new GP;break}return o.setValues(s),o.name=i,o}parseParameters(e,t,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=Fn.colorSpaceToWorking(new Tn().fromArray(e.Diffuse.value),si):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=Fn.colorSpaceToWorking(new Tn().fromArray(e.DiffuseColor.value),si)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=Fn.colorSpaceToWorking(new Tn().fromArray(e.Emissive.value),si):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=Fn.colorSpaceToWorking(new Tn().fromArray(e.EmissiveColor.value),si)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),i.opacity=1-(e.TransparencyFactor?parseFloat(e.TransparencyFactor.value):0),(i.opacity===1||i.opacity===0)&&(i.opacity=e.Opacity?parseFloat(e.Opacity.value):null,i.opacity===null&&(i.opacity=1-(e.TransparentColor?parseFloat(e.TransparentColor.value[0]):0))),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=Fn.colorSpaceToWorking(new Tn().fromArray(e.Specular.value),si):e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=Fn.colorSpaceToWorking(new Tn().fromArray(e.SpecularColor.value),si));const a=this;return Hi.get(r).children.forEach(function(s){const o=s.relationship;switch(o){case"Bump":i.bumpMap=a.getTexture(t,s.ID);break;case"Maya|TEX_ao_map":i.aoMap=a.getTexture(t,s.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=a.getTexture(t,s.ID),i.map!==void 0&&(i.map.colorSpace=si);break;case"DisplacementColor":i.displacementMap=a.getTexture(t,s.ID);break;case"EmissiveColor":i.emissiveMap=a.getTexture(t,s.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=si);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=a.getTexture(t,s.ID);break;case"ReflectionColor":i.envMap=a.getTexture(t,s.ID),i.envMap!==void 0&&(i.envMap.mapping=XN,i.envMap.colorSpace=si);break;case"SpecularColor":i.specularMap=a.getTexture(t,s.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=si);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=a.getTexture(t,s.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),i}getTexture(e,t){return"LayeredTexture"in Wn.Objects&&t in Wn.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Hi.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Wn.Objects){const r=Wn.Objects.Deformer;for(const i in r){const a=r[i],s=Hi.get(parseInt(i));if(a.attrType==="Skin"){const o=this.parseSkeleton(s,r);o.ID=i,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=s.parents[0].ID,e[i]=o}else if(a.attrType==="BlendShape"){const o={id:i};o.rawTargets=this.parseMorphTargets(s,r),o.id=i,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[i]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const r=[];return e.children.forEach(function(i){const a=t[i.ID];if(a.attrType!=="Cluster")return;const s={ID:i.ID,indices:[],weights:[],transformLink:new rn().fromArray(a.TransformLink.a)};"Indexes"in a&&(s.indices=a.Indexes.a,s.weights=a.Weights.a),r.push(s)}),{rawBones:r,bones:[]}}parseMorphTargets(e,t){const r=[];for(let i=0;i<e.children.length;i++){const a=e.children[i],s=t[a.ID],o={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if(s.attrType!=="BlendShapeChannel")return;o.geoID=Hi.get(parseInt(a.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,r.push(o)}return r}parseScene(e,t,r){Qs=new f0;const i=this.parseModels(e.skeletons,t,r),a=Wn.Objects.Model,s=this;i.forEach(function(l){const u=a[l.ID];s.setLookAtProperties(l,u),Hi.get(l.ID).parents.forEach(function(h){const d=i.get(h.ID);d!==void 0&&d.add(l)}),l.parent===null&&Qs.add(l)}),this.bindSkeleton(e.skeletons,t,i),this.addGlobalSceneSettings(),Qs.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const u=b0e(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});const o=new prt().parse();Qs.children.length===1&&Qs.children[0].isGroup&&(Qs.children[0].animations=o,Qs=Qs.children[0]),Qs.animations=o}parseModels(e,t,r){const i=new Map,a=Wn.Objects.Model;for(const s in a){const o=parseInt(s),l=a[s],u=Hi.get(o);let c=this.buildSkeleton(u,e,o,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(u);break;case"Light":c=this.createLight(u);break;case"Mesh":c=this.createMesh(u,t,r);break;case"NurbsCurve":c=this.createCurve(u,t);break;case"LimbNode":case"Root":c=new KV;break;case"Null":default:c=new f0;break}c.name=l.attrName?pr.sanitizeNodeName(l.attrName):"",c.userData.originalName=l.attrName,c.ID=o}this.getTransformData(c,l),i.set(o,c)}return i}buildSkeleton(e,t,r,i){let a=null;return e.parents.forEach(function(s){for(const o in t){const l=t[o];l.rawBones.forEach(function(u,c){if(u.ID===s.ID){const h=a;a=new KV,a.matrixWorld.copy(u.transformLink),a.name=i?pr.sanitizeNodeName(i):"",a.userData.originalName=i,a.ID=r,l.bones[c]=a,h!==null&&a.add(h)}})}}),a}createCamera(e){let t,r;if(e.children.forEach(function(i){const a=Wn.Objects.NodeAttribute[i.ID];a!==void 0&&(r=a)}),r===void 0)t=new pi;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let a=1;r.NearPlane!==void 0&&(a=r.NearPlane.value/1e3);let s=1e3;r.FarPlane!==void 0&&(s=r.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(o=r.AspectWidth.value,l=r.AspectHeight.value);const u=o/l;let c=45;r.FieldOfView!==void 0&&(c=r.FieldOfView.value);const h=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:t=new uo(c,u,a,s),h!==null&&t.setFocalLength(h);break;case 1:console.warn("THREE.FBXLoader: Orthographic cameras not supported yet."),t=new pi;break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),t=new pi;break}}return t}createLight(e){let t,r;if(e.children.forEach(function(i){const a=Wn.Objects.NodeAttribute[i.ID];a!==void 0&&(r=a)}),r===void 0)t=new pi;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let a=16777215;r.Color!==void 0&&(a=Fn.colorSpaceToWorking(new Tn().fromArray(r.Color.value),si));let s=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(s=0);let o=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?o=0:o=r.FarAttenuationEnd.value);const l=1;switch(i){case 0:t=new tae(a,s,o,l);break;case 1:t=new JV(a,s);break;case 2:let u=Math.PI/3;r.InnerAngle!==void 0&&(u=io.degToRad(r.InnerAngle.value));let c=0;r.OuterAngle!==void 0&&(c=io.degToRad(r.OuterAngle.value),c=Math.max(c,1)),t=new DZe(a,s,o,u,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),t=new tae(a,s);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,r){let i,a=null,s=null;const o=[];if(e.children.forEach(function(l){t.has(l.ID)&&(a=t.get(l.ID)),r.has(l.ID)&&o.push(r.get(l.ID))}),o.length>1?s=o:o.length>0?s=o[0]:(s=new GP({name:Ky.DEFAULT_MATERIAL_NAME,color:13421772}),o.push(s)),"color"in a.attributes&&o.forEach(function(l){l.vertexColors=!0}),a.groups.length>0){let l=!1;for(let u=0,c=a.groups.length;u<c;u++){const h=a.groups[u];(h.materialIndex<0||h.materialIndex>=o.length)&&(h.materialIndex=o.length,l=!0)}if(l){const u=new GP;o.push(u)}}return a.FBX_Deformer?(i=new FKe(a,s),i.normalizeSkinWeights()):i=new Ou(a,s),i}createCurve(e,t){const r=e.children.reduce(function(a,s){return t.has(s.ID)&&(a=t.get(s.ID)),a},null),i=new Jve({name:Ky.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new GKe(r,i)}getTransformData(e,t){const r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?r.eulerOrder=JA(t.RotationOrder.value):r.eulerOrder=JA(0),"Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,t){"LookAtProperty"in t&&Hi.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const a=Wn.Objects.Model[i.ID];if("Lcl_Translation"in a){const s=a.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),Qs.add(e.target)):e.lookAt(new Te().fromArray(s))}}})}bindSkeleton(e,t,r){const i=this.parsePoseNodes();for(const a in e){const s=e[a];Hi.get(parseInt(s.ID)).parents.forEach(function(l){if(t.has(l.ID)){const u=l.ID;Hi.get(u).parents.forEach(function(h){r.has(h.ID)&&r.get(h.ID).bind(new _W(s.bones),i[h.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Wn.Objects){const t=Wn.Objects.Pose;for(const r in t)if(t[r].attrType==="BindPose"&&t[r].NbPoseNodes>0){const i=t[r].PoseNode;Array.isArray(i)?i.forEach(function(a){e[a.Node]=new rn().fromArray(a.Matrix.a)}):e[i.Node]=new rn().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in Wn){if("AmbientColor"in Wn.GlobalSettings){const e=Wn.GlobalSettings.AmbientColor.value,t=e[0],r=e[1],i=e[2];if(t!==0||r!==0||i!==0){const a=new Tn().setRGB(t,r,i,si);Qs.add(new o0e(a,1))}}"UnitScaleFactor"in Wn.GlobalSettings&&(Qs.userData.unitScaleFactor=Wn.GlobalSettings.UnitScaleFactor.value)}}}class frt{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in Wn.Objects){const r=Wn.Objects.Geometry;for(const i in r){const a=Hi.get(parseInt(i)),s=this.parseGeometry(a,r[i],e);t.set(parseInt(i),s)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,r){const i=r.skeletons,a=[],s=e.parents.map(function(h){return Wn.Objects.Model[h.ID]});if(s.length===0)return;const o=e.children.reduce(function(h,d){return i[d.ID]!==void 0&&(h=i[d.ID]),h},null);e.children.forEach(function(h){r.morphTargets[h.ID]!==void 0&&a.push(r.morphTargets[h.ID])});const l=s[0],u={};"RotationOrder"in l&&(u.eulerOrder=JA(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);const c=b0e(u);return this.genGeometry(t,o,a,c)}genGeometry(e,t,r,i){const a=new Nl;e.attrName&&(a.name=e.attrName);const s=this.parseGeoNode(e,t),o=this.genBuffers(s),l=new Rs(o.vertex,3);if(l.applyMatrix4(i),a.setAttribute("position",l),o.colors.length>0&&a.setAttribute("color",new Rs(o.colors,3)),t&&(a.setAttribute("skinIndex",new xW(o.weightsIndices,4)),a.setAttribute("skinWeight",new Rs(o.vertexWeights,4)),a.FBX_Deformer=t),o.normal.length>0){const u=new Nn().getNormalMatrix(i),c=new Rs(o.normal,3);c.applyNormalMatrix(u),a.setAttribute("normal",c)}if(o.uvs.forEach(function(u,c){const h=c===0?"uv":`uv${c}`;a.setAttribute(h,new Rs(o.uvs[c],2))}),s.material&&s.material.mappingType!=="AllSame"){let u=o.materialIndex[0],c=0;if(o.materialIndex.forEach(function(h,d){h!==u&&(a.addGroup(c,d-c,u),u=h,c=d)}),a.groups.length>0){const h=a.groups[a.groups.length-1],d=h.start+h.count;d!==o.materialIndex.length&&a.addGroup(d,o.materialIndex.length-d,u)}a.groups.length===0&&a.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(a,e,r,i),a}parseGeoNode(e,t){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&e.LayerElementColor[0].Colors&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},t!==null&&(r.skeleton=t,t.rawBones.forEach(function(i,a){i.indices.forEach(function(s,o){r.weightTable[s]===void 0&&(r.weightTable[s]=[]),r.weightTable[s].push({id:a,weight:i.weights[o]})})})),r}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,a=!1,s=[],o=[],l=[],u=[],c=[],h=[];const d=this;return e.vertexIndices.forEach(function(f,p){let m,g=!1;f<0&&(f=f^-1,g=!0);let v=[],b=[];if(s.push(f*3,f*3+1,f*3+2),e.color){const S=$P(p,r,f,e.color);l.push(S[0],S[1],S[2])}if(e.skeleton){if(e.weightTable[f]!==void 0&&e.weightTable[f].forEach(function(S){b.push(S.weight),v.push(S.id)}),b.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);const S=[0,0,0,0],w=[0,0,0,0];b.forEach(function(E,T){let M=E,P=v[T];w.forEach(function(I,D,R){if(M>I){R[D]=M,M=I;const B=S[D];S[D]=P,P=B}})}),v=S,b=w}for(;b.length<4;)b.push(0),v.push(0);for(let S=0;S<4;++S)c.push(b[S]),h.push(v[S])}if(e.normal){const S=$P(p,r,f,e.normal);o.push(S[0],S[1],S[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=$P(p,r,f,e.material)[0],m<0&&(d.negativeMaterialIndices=!0,m=0)),e.uv&&e.uv.forEach(function(S,w){const E=$P(p,r,f,S);u[w]===void 0&&(u[w]=[]),u[w].push(E[0]),u[w].push(E[1])}),i++,g&&(d.genFace(t,e,s,m,o,l,u,c,h,i),r++,i=0,s=[],o=[],l=[],u=[],c=[],h=[])}),t}getNormalNewell(e){const t=new Te(0,0,0);for(let r=0;r<e.length;r++){const i=e[r],a=e[(r+1)%e.length];t.x+=(i.y-a.y)*(i.z+a.z),t.y+=(i.z-a.z)*(i.x+a.x),t.z+=(i.x-a.x)*(i.y+a.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),i=(Math.abs(t.z)>.5?new Te(0,1,0):new Te(0,0,1)).cross(t).normalize(),a=t.clone().cross(i).normalize();return{normal:t,tangent:i,bitangent:a}}flattenVertex(e,t,r){return new or(e.dot(t),e.dot(r))}genFace(e,t,r,i,a,s,o,l,u,c){let h;if(c>3){const d=[],f=t.baseVertexPositions||t.vertexPositions;for(let v=0;v<r.length;v+=3)d.push(new Te(f[r[v]],f[r[v+1]],f[r[v+2]]));const{tangent:p,bitangent:m}=this.getNormalTangentAndBitangent(d),g=[];for(const v of d)g.push(this.flattenVertex(v,p,m));h=SW.triangulateShape(g,[])}else h=[[0,1,2]];for(const[d,f,p]of h)e.vertex.push(t.vertexPositions[r[d*3]]),e.vertex.push(t.vertexPositions[r[d*3+1]]),e.vertex.push(t.vertexPositions[r[d*3+2]]),e.vertex.push(t.vertexPositions[r[f*3]]),e.vertex.push(t.vertexPositions[r[f*3+1]]),e.vertex.push(t.vertexPositions[r[f*3+2]]),e.vertex.push(t.vertexPositions[r[p*3]]),e.vertex.push(t.vertexPositions[r[p*3+1]]),e.vertex.push(t.vertexPositions[r[p*3+2]]),t.skeleton&&(e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.vertexWeights.push(l[f*4]),e.vertexWeights.push(l[f*4+1]),e.vertexWeights.push(l[f*4+2]),e.vertexWeights.push(l[f*4+3]),e.vertexWeights.push(l[p*4]),e.vertexWeights.push(l[p*4+1]),e.vertexWeights.push(l[p*4+2]),e.vertexWeights.push(l[p*4+3]),e.weightsIndices.push(u[d*4]),e.weightsIndices.push(u[d*4+1]),e.weightsIndices.push(u[d*4+2]),e.weightsIndices.push(u[d*4+3]),e.weightsIndices.push(u[f*4]),e.weightsIndices.push(u[f*4+1]),e.weightsIndices.push(u[f*4+2]),e.weightsIndices.push(u[f*4+3]),e.weightsIndices.push(u[p*4]),e.weightsIndices.push(u[p*4+1]),e.weightsIndices.push(u[p*4+2]),e.weightsIndices.push(u[p*4+3])),t.color&&(e.colors.push(s[d*3]),e.colors.push(s[d*3+1]),e.colors.push(s[d*3+2]),e.colors.push(s[f*3]),e.colors.push(s[f*3+1]),e.colors.push(s[f*3+2]),e.colors.push(s[p*3]),e.colors.push(s[p*3+1]),e.colors.push(s[p*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(a[d*3]),e.normal.push(a[d*3+1]),e.normal.push(a[d*3+2]),e.normal.push(a[f*3]),e.normal.push(a[f*3+1]),e.normal.push(a[f*3+2]),e.normal.push(a[p*3]),e.normal.push(a[p*3+1]),e.normal.push(a[p*3+2])),t.uv&&t.uv.forEach(function(m,g){e.uvs[g]===void 0&&(e.uvs[g]=[]),e.uvs[g].push(o[g][d*2]),e.uvs[g].push(o[g][d*2+1]),e.uvs[g].push(o[g][f*2]),e.uvs[g].push(o[g][f*2+1]),e.uvs[g].push(o[g][p*2]),e.uvs[g].push(o[g][p*2+1])})}addMorphTargets(e,t,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const a=this;r.forEach(function(s){s.rawTargets.forEach(function(o){const l=Wn.Objects.Geometry[o.geoID];l!==void 0&&a.genMorphGeometry(e,t,l,i,o.name)})})}genMorphGeometry(e,t,r,i,a){const s=t.Vertices!==void 0?t.Vertices.a:[],o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],l=r.Vertices!==void 0?r.Vertices.a:[],u=r.Indexes!==void 0?r.Indexes.a:[],c=e.attributes.position.count*3,h=new Float32Array(c);for(let m=0;m<u.length;m++){const g=u[m]*3;h[g]=l[m*3],h[g+1]=l[m*3+1],h[g+2]=l[m*3+2]}const d={vertexIndices:o,vertexPositions:h,baseVertexPositions:s},f=this.genBuffers(d),p=new Rs(f.vertex,3);p.name=a||r.attrName,p.applyMatrix4(i),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let a=[];return r==="IndexToDirect"&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:a,mappingType:t,referenceType:r}}parseUVs(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let a=[];return r==="IndexToDirect"&&(a=e.UVIndex.a),{dataSize:2,buffer:i,indices:a,mappingType:t,referenceType:r}}parseVertexColors(e){const t=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let a=[];r==="IndexToDirect"&&(a=e.ColorIndex.a);for(let s=0,o=new Tn;s<i.length;s+=4)o.fromArray(i,s),Fn.colorSpaceToWorking(o,si),o.toArray(i,s);return{dataSize:4,buffer:i,indices:a,mappingType:t,referenceType:r}}parseMaterialIndices(e){const t=e.MappingInformationType,r=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,a=[];for(let s=0;s<i.length;++s)a.push(s);return{dataSize:1,buffer:i,indices:a,mappingType:t,referenceType:r}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Nl;const r=t-1,i=e.KnotVector.a,a=[],s=e.Points.a;for(let h=0,d=s.length;h<d;h+=4)a.push(new Tr().fromArray(s,h));let o,l;if(e.Form==="Closed")a.push(a[0]);else if(e.Form==="Periodic"){o=r,l=i.length-1-o;for(let h=0;h<r;++h)a.push(a[h])}const c=new crt(r,i,a,o,l).getPoints(a.length*12);return new Nl().setFromPoints(c)}}class prt{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const r in t){const i=t[r],a=this.addClip(i);e.push(a)}return e}parseClips(){if(Wn.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Wn.Objects.AnimationCurveNode,t=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const a={id:i.id,attr:i.attrName,curves:{}};t.set(a.id,a)}}return t}parseAnimationCurves(e){const t=Wn.Objects.AnimationCurve;for(const r in t){const i={id:t[r].id,times:t[r].KeyTime.a.map(xrt),values:t[r].KeyValueFloat.a},a=Hi.get(i.id);if(a!==void 0){const s=a.parents[0].ID,o=a.parents[0].relationship;o.match(/X/)?e.get(s).curves.x=i:o.match(/Y/)?e.get(s).curves.y=i:o.match(/Z/)?e.get(s).curves.z=i:o.match(/DeformPercent/)&&e.has(s)&&(e.get(s).curves.morph=i)}}}parseAnimationLayers(e){const t=Wn.Objects.AnimationLayer,r=new Map;for(const i in t){const a=[],s=Hi.get(parseInt(i));s!==void 0&&(s.children.forEach(function(l,u){if(e.has(l.ID)){const c=e.get(l.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(a[u]===void 0){const h=Hi.get(l.ID).parents.filter(function(d){return d.relationship!==void 0})[0].ID;if(h!==void 0){const d=Wn.Objects.Model[h.toString()];if(d===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const f={modelName:d.attrName?pr.sanitizeNodeName(d.attrName):"",ID:d.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Qs.traverse(function(p){p.ID===d.id&&(f.transform=p.matrix,p.userData.transformData&&(f.eulerOrder=p.userData.transformData.eulerOrder))}),f.transform||(f.transform=new rn),"PreRotation"in d&&(f.preRotation=d.PreRotation.value),"PostRotation"in d&&(f.postRotation=d.PostRotation.value),a[u]=f}}a[u]&&(a[u][c.attr]=c)}else if(c.curves.morph!==void 0){if(a[u]===void 0){const h=Hi.get(l.ID).parents.filter(function(v){return v.relationship!==void 0})[0].ID,d=Hi.get(h).parents[0].ID,f=Hi.get(d).parents[0].ID,p=Hi.get(f).parents[0].ID,m=Wn.Objects.Model[p],g={modelName:m.attrName?pr.sanitizeNodeName(m.attrName):"",morphName:Wn.Objects.Deformer[h].attrName};a[u]=g}a[u][c.attr]=c}}}),r.set(parseInt(i),a))}return r}parseAnimStacks(e){const t=Wn.Objects.AnimationStack,r={};for(const i in t){const a=Hi.get(parseInt(i)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const s=e.get(a[0].ID);r[i]={name:t[i].attrName,layer:s}}return r}addClip(e){let t=[];const r=this;return e.layer.forEach(function(i){t=t.concat(r.generateTracks(i))}),new xZe(e.name,-1,t)}generateTracks(e){const t=[];let r=new Te,i=new Te;if(e.transform&&e.transform.decompose(r,new zo,i),r=r.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");a!==void 0&&t.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&t.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");a!==void 0&&t.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&t.push(a)}return t}generateVectorTrack(e,t,r,i){const a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,r);return new QA(e+"."+i,a,s)}generateRotationTrack(e,t,r,i,a){let s,o;if(t.x!==void 0&&t.y!==void 0&&t.z!==void 0){const d=this.interpolateRotations(t.x,t.y,t.z,a);s=d[0],o=d[1]}const l=JA(0);r!==void 0&&(r=r.map(io.degToRad),r.push(l),r=new Xa().fromArray(r),r=new zo().setFromEuler(r)),i!==void 0&&(i=i.map(io.degToRad),i.push(l),i=new Xa().fromArray(i),i=new zo().setFromEuler(i).invert());const u=new zo,c=new Xa,h=[];if(!o||!s)return new SS(e+".quaternion",[0],[0]);for(let d=0;d<o.length;d+=3)c.set(o[d],o[d+1],o[d+2],a),u.setFromEuler(c),r!==void 0&&u.premultiply(r),i!==void 0&&u.multiply(i),d>2&&new zo().fromArray(h,(d-3)/3*4).dot(u)<0&&u.set(-u.x,-u.y,-u.z,-u.w),u.toArray(h,d/3*4);return new SS(e+".quaternion",s,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,r=t.values.map(function(a){return a/100}),i=Qs.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new ZA(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(r,i){return r-i}),t.length>1){let r=1,i=t[0];for(let a=1;a<t.length;a++){const s=t[a];s!==i&&(t[r]=s,i=s,r++)}t=t.slice(0,r)}return t}getKeyframeTrackValues(e,t,r){const i=r,a=[];let s=-1,o=-1,l=-1;return e.forEach(function(u){if(t.x&&(s=t.x.times.indexOf(u)),t.y&&(o=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),s!==-1){const c=t.x.values[s];a.push(c),i[0]=c}else a.push(i[0]);if(o!==-1){const c=t.y.values[o];a.push(c),i[1]=c}else a.push(i[1]);if(l!==-1){const c=t.z.values[l];a.push(c),i[2]=c}else a.push(i[2])}),a}interpolateRotations(e,t,r,i){const a=[],s=[];a.push(e.times[0]),s.push(io.degToRad(e.values[0])),s.push(io.degToRad(t.values[0])),s.push(io.degToRad(r.values[0]));for(let o=1;o<e.values.length;o++){const l=[e.values[o-1],t.values[o-1],r.values[o-1]];if(isNaN(l[0])||isNaN(l[1])||isNaN(l[2]))continue;const u=l.map(io.degToRad),c=[e.values[o],t.values[o],r.values[o]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;const h=c.map(io.degToRad),d=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],f=[Math.abs(d[0]),Math.abs(d[1]),Math.abs(d[2])];if(f[0]>=180||f[1]>=180||f[2]>=180){const m=Math.max(...f)/180,g=new Xa(...u,i),v=new Xa(...h,i),b=new zo().setFromEuler(g),S=new zo().setFromEuler(v);b.dot(S)&&S.set(-S.x,-S.y,-S.z,-S.w);const w=e.times[o-1],E=e.times[o]-w,T=new zo,M=new Xa;for(let P=0;P<1;P+=1/m)T.copy(b.clone().slerp(S.clone(),P)),a.push(w+P*E),M.setFromQuaternion(T,i),s.push(M.x),s.push(M.y),s.push(M.z)}else a.push(e.times[o]),s.push(io.degToRad(e.values[o])),s.push(io.degToRad(t.values[o])),s.push(io.degToRad(r.values[o]))}return[a,s]}}class mrt{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new _0e,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,a){const s=i.match(/^[\s\t]*;/),o=i.match(/^[\s\t]*$/);if(s||o)return;const l=i.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=i.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=i.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(i,l):u?t.parseNodeProperty(i,u,r[++a]):c?t.popStack():i.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,t){const r=t[1].trim().replace(/^"/,"").replace(/"$/,""),i=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),a={name:r},s=this.parseNodeAttr(i),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,a):r in o?(r==="PoseNode"?o.PoseNode.push(a):o[r].id!==void 0&&(o[r]={},o[r][o[r].id]=o[r]),s.id!==""&&(o[r][s.id]=a)):typeof s.id=="number"?(o[r]={},o[r][s.id]=a):r!=="Properties70"&&(r==="PoseNode"?o[r]=[a]:o[r]=a),typeof s.id=="number"&&(a.id=s.id),s.name!==""&&(a.attrName=s.name),s.type!==""&&(a.attrType=s.type),this.pushStack(a)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r,type:i}}parseNodeProperty(e,t,r){let i=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&a===","&&(a=r.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if(s.name==="Properties70"){this.parseNodeSpecialProperty(e,i,a);return}if(i==="C"){const l=a.split(",").slice(1),u=parseInt(l[0]),c=parseInt(l[1]);let h=a.split(",").slice(3);h=h.map(function(d){return d.trim().replace(/^"/,"")}),i="connections",a=[u,c],brt(a,h),s[i]===void 0&&(s[i]=[])}i==="Node"&&(s.id=a),i in s&&Array.isArray(s[i])?s[i].push(a):i!=="a"?s[i]=a:s.a=a,this.setCurrentProp(s,i),i==="a"&&a.slice(-1)!==","&&(s.a=O6(a))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=O6(t.a))}parseNodeSpecialProperty(e,t,r){const i=r.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=i[0],s=i[1],o=i[2],l=i[3];let u=i[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=O6(u);break}this.getPrevNode()[a]={type:s,type2:o,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),a)}}class grt{parse(e){const t=new Aae(e);t.skip(23);const r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new _0e;for(;!this.endOfContent(t);){const a=this.parseNode(t,r);a!==null&&i.add(a.name,a)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const r={},i=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const s=e.getUint8(),o=e.getString(s);if(i===0)return null;const l=[];for(let d=0;d<a;d++)l.push(this.parseProperty(e));const u=l.length>0?l[0]:"",c=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(r.singleProperty=a===1&&e.getOffset()===i;i>e.getOffset();){const d=this.parseNode(e,t);d!==null&&this.parseSubNode(o,r,d)}return r.propertyList=l,typeof u=="number"&&(r.id=u),c!==""&&(r.attrName=c),h!==""&&(r.attrType=h),o!==""&&(r.name=o),r}parseSubNode(e,t,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(t[r.name]=r,r.a=i):t[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(a,s){s!==0&&i.push(a)}),t.connections===void 0&&(t.connections=[]),t.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(a){t[a]=r[a]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],a=r.propertyList[1];const s=r.propertyList[2],o=r.propertyList[3];let l;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),a.indexOf("Lcl ")===0&&(a=a.replace("Lcl ","Lcl_")),a==="Color"||a==="ColorRGB"||a==="Vector"||a==="Vector3D"||a.indexOf("Lcl_")===0?l=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:l=r.propertyList[4],t[i]={type:a,type2:s,flag:o,value:l}}else t[r.name]===void 0?typeof r.id=="number"?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:r.name==="PoseNode"?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):t[r.name][r.id]===void 0&&(t[r.name][r.id]=r)}parseProperty(e){const t=e.getString(1);let r;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),a=e.getUint32(),s=e.getUint32();if(a===0)switch(t){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const o=ert(new Uint8Array(e.getArrayBuffer(s))),l=new Aae(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(i);case"d":return l.getFloat64Array(i);case"f":return l.getFloat32Array(i);case"i":return l.getInt32Array(i);case"l":return l.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class Aae{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let r=0;r<e;r++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let r=0;r<e;r++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let r=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,t,i)),this._textDecoder.decode(r)}}class _0e{add(e,t){this[e]=t}}function vrt(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===S0e(n,0,e.length)}function yrt(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function r(i){const a=n[i-1];return n=n.slice(t+i),t++,a}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function Cae(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function xrt(n){return n/46186158e3}const _rt=[];function $P(n,e,t,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=n;break;case"ByPolygon":i=e;break;case"ByVertice":i=t;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const a=i*r.dataSize,s=a+r.dataSize;return Srt(_rt,r.buffer,a,s)}const k6=new Xa,I_=new Te;function b0e(n){const e=new rn,t=new rn,r=new rn,i=new rn,a=new rn,s=new rn,o=new rn,l=new rn,u=new rn,c=new rn,h=new rn,d=new rn,f=n.inheritType?n.inheritType:0;n.translation&&e.setPosition(I_.fromArray(n.translation));const p=JA(0);if(n.preRotation){const R=n.preRotation.map(io.degToRad);R.push(p),t.makeRotationFromEuler(k6.fromArray(R))}if(n.rotation){const R=n.rotation.map(io.degToRad);R.push(n.eulerOrder||p),r.makeRotationFromEuler(k6.fromArray(R))}if(n.postRotation){const R=n.postRotation.map(io.degToRad);R.push(p),i.makeRotationFromEuler(k6.fromArray(R)),i.invert()}n.scale&&a.scale(I_.fromArray(n.scale)),n.scalingOffset&&o.setPosition(I_.fromArray(n.scalingOffset)),n.scalingPivot&&s.setPosition(I_.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(I_.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(I_.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(h.copy(n.parentMatrix),c.copy(n.parentMatrixWorld));const m=t.clone().multiply(r).multiply(i),g=new rn;g.extractRotation(c);const v=new rn;v.copyPosition(c);const b=v.clone().invert().multiply(c),S=g.clone().invert().multiply(b),w=a,E=new rn;if(f===0)E.copy(g).multiply(m).multiply(S).multiply(w);else if(f===1)E.copy(g).multiply(S).multiply(m).multiply(w);else{const B=new rn().scale(new Te().setFromMatrixScale(h)).clone().invert(),k=S.clone().multiply(B);E.copy(g).multiply(m).multiply(k).multiply(w)}const T=u.clone().invert(),M=s.clone().invert();let P=e.clone().multiply(l).multiply(u).multiply(t).multiply(r).multiply(i).multiply(T).multiply(o).multiply(s).multiply(a).multiply(M);const I=new rn().copyPosition(P),D=c.clone().multiply(I);return d.copyPosition(D),P=d.clone().multiply(E),P.premultiply(c.invert()),P}function JA(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function O6(n){return n.split(",").map(function(t){return parseFloat(t)})}function S0e(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),new TextDecoder().decode(new Uint8Array(n,e,t))}function brt(n,e){for(let t=0,r=n.length,i=e.length;t<i;t++,r++)n[r]=e[t]}function Srt(n,e,t,r){for(let i=t,a=0;i<r;i++,a++)n[a]=e[i];return n}function wrt(){const n=ee.useRef(null),e=ee.useRef(null),t=ee.useRef(null),r=ee.useRef(null),i=ee.useRef(null),a=ee.useRef(null),s=ee.useRef(!1),o=ee.useRef({x:0,y:0});return ee.useEffect(()=>{if(!n.current)return;const l=new OKe;l.background=new Tn(15790320),e.current=l;const u=new uo(50,n.current.clientWidth/n.current.clientHeight,.1,1e3);u.position.set(2,.5,2),u.lookAt(0,0,0),t.current=u;const c=new znt({antialias:!0});c.setSize(n.current.clientWidth,n.current.clientHeight),c.setPixelRatio(window.devicePixelRatio),n.current.appendChild(c.domElement),r.current=c;const h=new o0e(16777215,.6);l.add(h);const d=new JV(16777215,1);d.position.set(1,1,1),l.add(d);const f=new JV(16777215,.5);f.position.set(-1,-1,-1),l.add(f),new hrt().load("/_-.fbx",g=>{const v=new f0;l.add(v),a.current=v,g.scale.set(.04,.04,.04),g.position.set(0,0,0),g.rotation.y=Math.PI/2,v.add(g);const b=M=>{s.current=!0,o.current={x:M.clientX,y:M.clientY}},S=M=>{if(!s.current||!a.current)return;const P=M.clientX-o.current.x,I=M.clientY-o.current.y,D=a.current;D.rotation.y+=P*.01,D.rotation.x+=I*.01,D.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,D.rotation.x)),o.current={x:M.clientX,y:M.clientY}},w=()=>{s.current=!1},E=M=>{if(M.preventDefault(),!u)return;const P=.1,I=new Te;u.getWorldDirection(I),M.deltaY>0?u.position.addScaledVector(I,P):u.position.addScaledVector(I,-P);const D=u.position.length();D<1?u.position.setLength(1):D>5&&u.position.setLength(5)};n.current.addEventListener("mousedown",b),window.addEventListener("mousemove",S),window.addEventListener("mouseup",w),n.current.addEventListener("wheel",E,{passive:!1});const T=()=>{i.current=requestAnimationFrame(T),a.current&&!s.current&&(a.current.rotation.y+=.005),c.render(l,u)};return T(),()=>{var M,P;(M=n.current)==null||M.removeEventListener("mousedown",b),window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",w),(P=n.current)==null||P.removeEventListener("wheel",E)}},g=>{console.log(g.loaded/g.total*100+"% loaded")},g=>{console.error("Error loading FBX model:",g)});const m=()=>{if(!n.current||!t.current||!r.current)return;const g=t.current,v=r.current;g.aspect=n.current.clientWidth/n.current.clientHeight,g.updateProjectionMatrix(),v.setSize(n.current.clientWidth,n.current.clientHeight)};return window.addEventListener("resize",m),()=>{if(window.removeEventListener("resize",m),i.current&&cancelAnimationFrame(i.current),r.current){const g=r.current;g.dispose(),n.current&&g.domElement&&n.current.removeChild(g.domElement)}e.current&&e.current.traverse(v=>{v instanceof Ou&&(v.geometry.dispose(),v.material instanceof Fg?v.material.dispose():Array.isArray(v.material)&&v.material.forEach(b=>b.dispose()))})}},[]),C.jsx("div",{className:"w-full",children:C.jsx("div",{ref:n,className:"w-full h-96 rounded-lg overflow-hidden border border-gray-200 cursor-grab active:cursor-grabbing"})})}function Trt({onSelectText:n}){const[e,t]=ee.useState({goals:!0,structure:!0,magneticField:!0,calculation:!0,advantages:!0,resources:!0}),r=ee.useRef(null),i=ee.useRef(null),[a,s]=ee.useState(""),[o,l]=ee.useState({x:0,y:0}),[u,c]=ee.useState(!1),[h,d]=ee.useState(null),f=ee.useRef(null);ee.useEffect(()=>{const g=()=>{const v=window.getSelection();if(!v||v.isCollapsed){c(!1);return}const b=v.toString().trim();if(b.length<5){c(!1);return}s(b);const S=v.getRangeAt(0);if(f.current){const w=f.current.getBoundingClientRect(),E=S.getBoundingClientRect(),T=document.createRange(),M=S.endOffset-1;M>=0?(T.setStart(S.endContainer,M),T.setEnd(S.endContainer,S.endOffset)):(T.setStart(S.endContainer,0),T.setEnd(S.endContainer,1));const P=T.getBoundingClientRect(),I=80,D=32;let R=P.left-w.left+P.width/2-I/2,B=P.bottom-w.top+f.current.scrollTop+15;const k=w.width,V=w.height;R<10?R=10:R+I>k-10&&(R=k-I-10),B+D>V-10+f.current.scrollTop&&(B=E.top-w.top+f.current.scrollTop-D-15,B<10+f.current.scrollTop&&(B=10+f.current.scrollTop)),l({x:R,y:B}),c(!0)}};return window.addEventListener("mouseup",g),window.addEventListener("touchend",g),()=>{window.removeEventListener("mouseup",g),window.removeEventListener("touchend",g)}},[]);const p=()=>{a&&n&&n(a),c(!1)},m=g=>{t(v=>({...v,[g]:!v[g]}))};return ee.useEffect(()=>{if(r.current){i.current&&i.current.dispose(),i.current=ife(r.current);const g={title:{text:"",left:"center",top:0,textStyle:{fontSize:16,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["",""],top:30},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:["0.05","0.1","0.15","0.2","0.25","0.3","0.35","0.4","0.45","0.5"],name:"",nameLocation:"middle",nameGap:30,axisLabel:{interval:0,rotate:0},axisLine:{show:!0},axisTick:{show:!0},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#e0e0e0"}}}],yAxis:[{type:"value",name:"",min:-90,max:90,interval:45,axisLabel:{formatter:"{value}"},axisLine:{show:!0},axisTick:{show:!0},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#e0e0e0"}}},{type:"value",name:"(%)",min:0,max:100,interval:25,axisLabel:{formatter:"{value}"},axisLine:{show:!0},axisTick:{show:!0},splitLine:{show:!1}}],series:[{name:"",type:"line",smooth:!0,data:[45,85,90,88,46.6,20,10,5,3,2],symbol:"circle",symbolSize:6,itemStyle:{color:"white",borderColor:"#a78bfa",borderWidth:2,opacity:1},lineStyle:{color:"#a78bfa",width:2}},{name:"",type:"line",smooth:!0,yAxisIndex:1,data:[40,85,90,89,87.5,85,80,78,76,75],symbol:"circle",symbolSize:6,itemStyle:{color:"white",borderColor:"green",borderWidth:2,opacity:1},lineStyle:{color:"green",width:2}}]};i.current.setOption(g);const v=()=>{var b;(b=i.current)==null||b.resize()};return window.addEventListener("resize",v),()=>{var b;window.removeEventListener("resize",v),(b=i.current)==null||b.dispose()}}},[]),C.jsxs("div",{ref:f,className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 h-full overflow-y-auto relative",children:[C.jsx("h1",{className:"text-lg font-semibold mb-6 text-[var(--text-primary)] border-b border-[var(--light-pink)] pb-3",children:""}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>m("goals"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.goals?"transform rotate-180":""}`})]}),e.goals&&C.jsxs(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:[C.jsx("p",{className:"mb-3 text-[var(--text-primary)]",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-primary)] space-y-2",children:[C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:""})]})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>m("structure"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.structure?"transform rotate-180":""}`})]}),e.structure&&C.jsxs(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:[C.jsxs("div",{className:"mb-4",children:[C.jsxs("h3",{className:"font-medium mb-3 flex items-center text-[var(--text-primary)]",children:[C.jsx("i",{className:"fa-solid fa-cog text-[var(--brand-pink)] mr-2"}),"Stator"]}),C.jsxs("div",{className:"flex gap-4 items-start",children:[C.jsxs("div",{className:"flex-1",children:[C.jsx("p",{className:"mb-3 text-[var(--text-primary)] leading-relaxed",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-primary)] space-y-2",children:[C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:"/"}),C.jsx("li",{children:"IP67 M6 "})]})]}),C.jsx("div",{className:"w-1/3",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer",children:[C.jsx("img",{src:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=real%20AC%20motor%20stator%20structure%2C%20with%20core%20and%20windings%2C%20technical%20photograph%2C%20clear%20details%2C%20white%20background&image_size=square_hd",alt:"",className:"w-full h-auto rounded-lg object-cover hover:opacity-90 transition-opacity"}),C.jsxs("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center space-x-8",children:[C.jsx("button",{onClick:g=>{g.stopPropagation(),d("https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=real%20AC%20motor%20stator%20structure%2C%20with%20core%20and%20windings%2C%20technical%20photograph%2C%20clear%20details%2C%20white%20background&image_size=square_hd")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-search-plus"})}),C.jsx("button",{onClick:g=>{g.stopPropagation(),n&&n("[]https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=real%20AC%20motor%20stator%20structure%2C%20with%20core%20and%20windings%2C%20technical%20photograph%2C%20clear%20details%2C%20white%20background&image_size=square_hd")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-robot"})})]})]})})]})]}),C.jsx("div",{className:"mb-4",children:C.jsx(gYe,{})}),C.jsxs("div",{className:"mb-4",children:[C.jsxs("h3",{className:"font-medium mb-3 flex items-center text-[var(--text-primary)]",children:[C.jsx("i",{className:"fa-solid fa-cog text-[var(--brand-pink)] mr-2"}),"Rotor"]}),C.jsxs("div",{className:"flex gap-4 items-start",children:[C.jsxs("div",{className:"flex-1",children:[C.jsx("p",{className:"mb-3 text-[var(--text-primary)] leading-relaxed",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-primary)] space-y-2",children:[C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:""})]})]}),C.jsx("div",{className:"w-1/3",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer",children:[C.jsx("img",{src:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=real%20AC%20motor%20rotor%20structure%2C%20with%20core%20and%20windings%2C%20technical%20photograph%2C%20clear%20details%2C%20white%20background&image_size=square_hd",alt:"",className:"w-full h-auto rounded-lg object-cover hover:opacity-90 transition-opacity"}),C.jsxs("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center space-x-8",children:[C.jsx("button",{onClick:g=>{g.stopPropagation(),d("https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=real%20AC%20motor%20rotor%20structure%2C%20with%20core%20and%20windings%2C%20technical%20photograph%2C%20clear%20details%2C%20white%20background&image_size=square_hd")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-search-plus"})}),C.jsx("button",{onClick:g=>{g.stopPropagation(),n&&n("[]https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=real%20AC%20motor%20rotor%20structure%2C%20with%20core%20and%20windings%2C%20technical%20photograph%2C%20clear%20details%2C%20white%20background&image_size=square_hd")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-robot"})})]})]})})]})]}),C.jsx("div",{className:"mb-4",children:C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 border border-[var(--light-pink)]",children:[C.jsx("h3",{className:"font-medium mb-3 text-[var(--text-primary)]",children:" -3D"}),C.jsx(wrt,{})]})})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>m("magneticField"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.magneticField?"transform rotate-180":""}`})]}),e.magneticField&&C.jsxs(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:[C.jsxs("div",{className:"flex gap-4 mb-4",children:[C.jsx("div",{className:"flex-1",children:C.jsx("p",{className:"text-[var(--text-primary)] leading-relaxed",children:"120120n=60f/p"})}),C.jsx("div",{className:"w-1/3",children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden cursor-pointer",children:[C.jsx("img",{src:"https://e.necibook.com/api/media/api/v1/media/showImage/2022488447462375424",alt:"",className:"w-full h-auto rounded-lg object-cover hover:opacity-90 transition-opacity"}),C.jsxs("div",{className:"absolute inset-0 bg-black/10 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center space-x-8",children:[C.jsx("button",{onClick:g=>{g.stopPropagation(),d("https://e.necibook.com/api/media/api/v1/media/showImage/2022488447462375424")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-search-plus"})}),C.jsx("button",{onClick:g=>{g.stopPropagation(),n&&n("[]https://e.necibook.com/api/media/api/v1/media/showImage/2022488447462375424")},className:"text-white text-2xl hover:text-white/80 transition-colors",children:C.jsx("i",{className:"fa-solid fa-robot"})})]})]})})]}),C.jsx("div",{className:"mt-6",children:C.jsx(fqe,{})})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>m("calculation"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.calculation?"transform rotate-180":""}`})]}),e.calculation&&C.jsxs(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:[C.jsxs("div",{className:"mb-4",children:[C.jsxs("h3",{className:"font-medium mb-3 flex items-center text-[var(--text-primary)]",children:[C.jsx("i",{className:"fa-solid fa-calculator text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("p",{className:"mb-3 text-[var(--text-primary)] leading-relaxed",children:""}),C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-primary)] space-y-2",children:[C.jsx("li",{children:"n = 60f/p f p "}),C.jsx("li",{children:"MTPAMTPA = Id/Imax Id Imax "}),C.jsx("li",{children:" = 120/MTPA"})]})]}),C.jsxs("div",{className:"mb-4",children:[C.jsxs("h3",{className:"font-medium mb-3 flex items-center text-[var(--text-primary)]",children:[C.jsx("i",{className:"fa-solid fa-chart-line text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("div",{className:"bg-white rounded-lg p-4 border border-[var(--light-pink)]",children:C.jsx("div",{ref:r,className:"h-80 w-full"})})]}),C.jsx("div",{className:"bg-white border border-[var(--light-pink)] rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow mb-4",children:C.jsx(ove,{})})]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>m("advantages"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.advantages?"transform rotate-180":""}`})]}),e.advantages&&C.jsx(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:C.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-100 shadow-sm hover:shadow-md transition-shadow",children:[C.jsxs("h3",{className:"text-md font-semibold mb-3 text-green-700 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-plus-circle text-green-500 mr-2"}),""]}),C.jsxs("ul",{className:"space-y-2",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-green-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-green-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-green-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-green-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-green-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]})]})]}),C.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 rounded-lg p-4 border border-red-100 shadow-sm hover:shadow-md transition-shadow",children:[C.jsxs("h3",{className:"text-md font-semibold mb-3 text-red-700 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-minus-circle text-red-500 mr-2"}),""]}),C.jsxs("ul",{className:"space-y-2",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-red-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-red-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-red-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"text-red-500 mr-2 mt-1",children:""}),C.jsx("span",{className:"text-[var(--text-primary)]",children:""})]})]})]})]})})]}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("button",{onClick:()=>m("resources"),className:"w-full flex items-center justify-between text-lg font-medium mb-3 text-[var(--text-primary)]",children:[C.jsx("span",{children:""}),C.jsx("i",{className:`fa-solid fa-chevron-down transition-transform duration-200 ${e.resources?"transform rotate-180":""}`})]}),e.resources&&C.jsx(Kn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"pl-1",children:C.jsx("div",{className:"grid grid-cols-1 gap-4"})})]}),u&&C.jsx(Kn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute z-40",style:{left:`${o.x}px`,top:`${o.y}px`},children:C.jsxs("button",{onClick:p,className:"bg-[var(--brand-pink)] text-white px-3 py-1.5 rounded-full shadow-lg hover:bg-[var(--brand-pink)]/90 transition-colors flex items-center text-sm whitespace-nowrap min-w-[80px] justify-center",children:[C.jsx("i",{className:"fa-solid fa-robot mr-1"}),"AI"]})}),h&&C.jsx(Kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:()=>d(null),children:C.jsxs(Kn.div,{initial:{scale:.9},animate:{scale:1},exit:{scale:.9},className:"relative max-w-4xl max-h-[90vh]",onClick:g=>g.stopPropagation(),children:[C.jsx("img",{src:h,alt:"",className:"max-w-full max-h-[90vh] object-contain rounded-lg"}),C.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 bg-white/20 backdrop-blur-sm text-white p-2 rounded-full hover:bg-white/30 transition-colors",children:C.jsx("i",{className:"fa-solid fa-times text-xl"})})]})})]})}function Mae(n){const e=[],t=String(n||"");let r=t.indexOf(","),i=0,a=!1;for(;!a;){r===-1&&(r=t.length,a=!0);const s=t.slice(i,r).trim();(s||!a)&&e.push(s),i=r+1,r=t.indexOf(",",i)}return e}function w0e(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const Ert=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Art=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Crt={};function Dae(n,e){return(Crt.jsx?Art:Ert).test(n)}const Mrt=/[ \t\n\f\r]/g;function Drt(n){return typeof n=="object"?n.type==="text"?Iae(n.value):!1:Iae(n)}function Iae(n){return n.replace(Mrt,"")===""}class R2{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}R2.prototype.normal={};R2.prototype.property={};R2.prototype.space=void 0;function T0e(n,e){const t={},r={};for(const i of n)Object.assign(t,i.property),Object.assign(r,i.normal);return new R2(t,r,e)}function eC(n){return n.toLowerCase()}class $o{constructor(e,t){this.attribute=t,this.property=e}}$o.prototype.attribute="";$o.prototype.booleanish=!1;$o.prototype.boolean=!1;$o.prototype.commaOrSpaceSeparated=!1;$o.prototype.commaSeparated=!1;$o.prototype.defined=!1;$o.prototype.mustUseProperty=!1;$o.prototype.number=!1;$o.prototype.overloadedBoolean=!1;$o.prototype.property="";$o.prototype.spaceSeparated=!1;$o.prototype.space=void 0;let Irt=0;const Bn=fx(),aa=fx(),rH=fx(),rt=fx(),ei=fx(),Tb=fx(),tl=fx();function fx(){return 2**++Irt}const iH=Object.freeze(Object.defineProperty({__proto__:null,boolean:Bn,booleanish:aa,commaOrSpaceSeparated:tl,commaSeparated:Tb,number:rt,overloadedBoolean:rH,spaceSeparated:ei},Symbol.toStringTag,{value:"Module"})),B6=Object.keys(iH);class CW extends $o{constructor(e,t,r,i){let a=-1;if(super(e,t),Pae(this,"space",i),typeof r=="number")for(;++a<B6.length;){const s=B6[a];Pae(this,B6[a],(r&iH[s])===iH[s])}}}CW.prototype.defined=!0;function Pae(n,e,t){t&&(n[e]=t)}function aw(n){const e={},t={};for(const[r,i]of Object.entries(n.properties)){const a=new CW(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,t[eC(r)]=r,t[eC(a.attribute)]=r}return new R2(e,t,n.space)}const E0e=aw({properties:{ariaActiveDescendant:null,ariaAtomic:aa,ariaAutoComplete:null,ariaBusy:aa,ariaChecked:aa,ariaColCount:rt,ariaColIndex:rt,ariaColSpan:rt,ariaControls:ei,ariaCurrent:null,ariaDescribedBy:ei,ariaDetails:null,ariaDisabled:aa,ariaDropEffect:ei,ariaErrorMessage:null,ariaExpanded:aa,ariaFlowTo:ei,ariaGrabbed:aa,ariaHasPopup:null,ariaHidden:aa,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ei,ariaLevel:rt,ariaLive:null,ariaModal:aa,ariaMultiLine:aa,ariaMultiSelectable:aa,ariaOrientation:null,ariaOwns:ei,ariaPlaceholder:null,ariaPosInSet:rt,ariaPressed:aa,ariaReadOnly:aa,ariaRelevant:null,ariaRequired:aa,ariaRoleDescription:ei,ariaRowCount:rt,ariaRowIndex:rt,ariaRowSpan:rt,ariaSelected:aa,ariaSetSize:rt,ariaSort:null,ariaValueMax:rt,ariaValueMin:rt,ariaValueNow:rt,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function A0e(n,e){return e in n?n[e]:e}function C0e(n,e){return A0e(n,e.toLowerCase())}const Prt=aw({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Tb,acceptCharset:ei,accessKey:ei,action:null,allow:null,allowFullScreen:Bn,allowPaymentRequest:Bn,allowUserMedia:Bn,alt:null,as:null,async:Bn,autoCapitalize:null,autoComplete:ei,autoFocus:Bn,autoPlay:Bn,blocking:ei,capture:null,charSet:null,checked:Bn,cite:null,className:ei,cols:rt,colSpan:null,content:null,contentEditable:aa,controls:Bn,controlsList:ei,coords:rt|Tb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Bn,defer:Bn,dir:null,dirName:null,disabled:Bn,download:rH,draggable:aa,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Bn,formTarget:null,headers:ei,height:rt,hidden:rH,high:rt,href:null,hrefLang:null,htmlFor:ei,httpEquiv:ei,id:null,imageSizes:null,imageSrcSet:null,inert:Bn,inputMode:null,integrity:null,is:null,isMap:Bn,itemId:null,itemProp:ei,itemRef:ei,itemScope:Bn,itemType:ei,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Bn,low:rt,manifest:null,max:null,maxLength:rt,media:null,method:null,min:null,minLength:rt,multiple:Bn,muted:Bn,name:null,nonce:null,noModule:Bn,noValidate:Bn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Bn,optimum:rt,pattern:null,ping:ei,placeholder:null,playsInline:Bn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Bn,referrerPolicy:null,rel:ei,required:Bn,reversed:Bn,rows:rt,rowSpan:rt,sandbox:ei,scope:null,scoped:Bn,seamless:Bn,selected:Bn,shadowRootClonable:Bn,shadowRootDelegatesFocus:Bn,shadowRootMode:null,shape:null,size:rt,sizes:null,slot:null,span:rt,spellCheck:aa,src:null,srcDoc:null,srcLang:null,srcSet:null,start:rt,step:null,style:null,tabIndex:rt,target:null,title:null,translate:null,type:null,typeMustMatch:Bn,useMap:null,value:aa,width:rt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ei,axis:null,background:null,bgColor:null,border:rt,borderColor:null,bottomMargin:rt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Bn,declare:Bn,event:null,face:null,frame:null,frameBorder:null,hSpace:rt,leftMargin:rt,link:null,longDesc:null,lowSrc:null,marginHeight:rt,marginWidth:rt,noResize:Bn,noHref:Bn,noShade:Bn,noWrap:Bn,object:null,profile:null,prompt:null,rev:null,rightMargin:rt,rules:null,scheme:null,scrolling:aa,standby:null,summary:null,text:null,topMargin:rt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:rt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Bn,disableRemotePlayback:Bn,prefix:null,property:null,results:rt,security:null,unselectable:null},space:"html",transform:C0e}),Lrt=aw({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:tl,accentHeight:rt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:rt,amplitude:rt,arabicForm:null,ascent:rt,attributeName:null,attributeType:null,azimuth:rt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:rt,by:null,calcMode:null,capHeight:rt,className:ei,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:rt,diffuseConstant:rt,direction:null,display:null,dur:null,divisor:rt,dominantBaseline:null,download:Bn,dx:null,dy:null,edgeMode:null,editable:null,elevation:rt,enableBackground:null,end:null,event:null,exponent:rt,externalResourcesRequired:null,fill:null,fillOpacity:rt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Tb,g2:Tb,glyphName:Tb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:rt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:rt,horizOriginX:rt,horizOriginY:rt,id:null,ideographic:rt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:rt,k:rt,k1:rt,k2:rt,k3:rt,k4:rt,kernelMatrix:tl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:rt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:rt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:rt,overlineThickness:rt,paintOrder:null,panose1:null,path:null,pathLength:rt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ei,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:rt,pointsAtY:rt,pointsAtZ:rt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:tl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:tl,rev:tl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:tl,requiredFeatures:tl,requiredFonts:tl,requiredFormats:tl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:rt,specularExponent:rt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:rt,strikethroughThickness:rt,string:null,stroke:null,strokeDashArray:tl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:rt,strokeOpacity:rt,strokeWidth:null,style:null,surfaceScale:rt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:tl,tabIndex:rt,tableValues:null,target:null,targetX:rt,targetY:rt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:tl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:rt,underlineThickness:rt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:rt,values:null,vAlphabetic:rt,vMathematical:rt,vectorEffect:null,vHanging:rt,vIdeographic:rt,version:null,vertAdvY:rt,vertOriginX:rt,vertOriginY:rt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:rt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:A0e}),M0e=aw({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),D0e=aw({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:C0e}),I0e=aw({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),Rrt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Nrt=/[A-Z]/g,Lae=/-[a-z]/g,krt=/^data[-\w.:]+$/i;function G3(n,e){const t=eC(e);let r=e,i=$o;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&krt.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(Lae,Brt);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!Lae.test(a)){let s=a.replace(Nrt,Ort);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=CW}return new i(r,e)}function Ort(n){return"-"+n.toLowerCase()}function Brt(n){return n.charAt(1).toUpperCase()}const N2=T0e([E0e,Prt,M0e,D0e,I0e],"html"),Ug=T0e([E0e,Lrt,M0e,D0e,I0e],"svg");function Rae(n){const e=String(n||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function P0e(n){return n.join(" ").trim()}var P_={},F6,Nae;function Frt(){if(Nae)return F6;Nae=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,o=/^\s+|\s+$/g,l=`
`,u="/",c="*",h="",d="comment",f="declaration";function p(g,v){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];v=v||{};var b=1,S=1;function w(V){var G=V.match(e);G&&(b+=G.length);var F=V.lastIndexOf(l);S=~F?V.length-F:S+V.length}function E(){var V={line:b,column:S};return function(G){return G.position=new T(V),I(),G}}function T(V){this.start=V,this.end={line:b,column:S},this.source=v.source}T.prototype.content=g;function M(V){var G=new Error(v.source+":"+b+":"+S+": "+V);if(G.reason=V,G.filename=v.source,G.line=b,G.column=S,G.source=g,!v.silent)throw G}function P(V){var G=V.exec(g);if(G){var F=G[0];return w(F),g=g.slice(F.length),G}}function I(){P(t)}function D(V){var G;for(V=V||[];G=R();)G!==!1&&V.push(G);return V}function R(){var V=E();if(!(u!=g.charAt(0)||c!=g.charAt(1))){for(var G=2;h!=g.charAt(G)&&(c!=g.charAt(G)||u!=g.charAt(G+1));)++G;if(G+=2,h===g.charAt(G-1))return M("End of comment missing");var F=g.slice(2,G-2);return S+=2,w(F),g=g.slice(G),S+=2,V({type:d,comment:F})}}function B(){var V=E(),G=P(r);if(G){if(R(),!P(i))return M("property missing ':'");var F=P(a),X=V({type:f,property:m(G[0].replace(n,h)),value:F?m(F[0].replace(n,h)):h});return P(s),X}}function k(){var V=[];D(V);for(var G;G=B();)G!==!1&&(V.push(G),D(V));return V}return I(),k()}function m(g){return g?g.replace(o,h):h}return F6=p,F6}var kae;function Urt(){if(kae)return P_;kae=1;var n=P_&&P_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(P_,"__esModule",{value:!0}),P_.default=t;const e=n(Frt());function t(r,i){let a=null;if(!r||typeof r!="string")return a;const s=(0,e.default)(r),o=typeof i=="function";return s.forEach(l=>{if(l.type!=="declaration")return;const{property:u,value:c}=l;o?i(u,c,l):c&&(a=a||{},a[u]=c)}),a}return P_}var RT={},Oae;function zrt(){if(Oae)return RT;Oae=1,Object.defineProperty(RT,"__esModule",{value:!0}),RT.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(u){return!u||t.test(u)||n.test(u)},s=function(u,c){return c.toUpperCase()},o=function(u,c){return"".concat(c,"-")},l=function(u,c){return c===void 0&&(c={}),a(u)?u:(u=u.toLowerCase(),c.reactCompat?u=u.replace(i,o):u=u.replace(r,o),u.replace(e,s))};return RT.camelCase=l,RT}var NT,Bae;function Vrt(){if(Bae)return NT;Bae=1;var n=NT&&NT.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=n(Urt()),t=zrt();function r(i,a){var s={};return!i||typeof i!="string"||(0,e.default)(i,function(o,l){o&&l&&(s[(0,t.camelCase)(o,a)]=l)}),s}return r.default=r,NT=r,NT}var Hrt=Vrt();const Grt=i2(Hrt),j3=L0e("end"),fd=L0e("start");function L0e(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function jrt(n){const e=fd(n),t=j3(n);if(e&&t)return{start:e,end:t}}function QE(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?Fae(n.position):"start"in n||"end"in n?Fae(n):"line"in n||"column"in n?aH(n):""}function aH(n){return Uae(n&&n.line)+":"+Uae(n&&n.column)}function Fae(n){return aH(n&&n.start)+"-"+aH(n&&n.end)}function Uae(n){return n&&typeof n=="number"?n:1}class Hs extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let i="",a={},s=!1;if(t&&("line"in t&&"column"in t?a={place:t}:"start"in t&&"end"in t?a={place:t}:"type"in t?a={ancestors:[t],place:t.position}:a={...t}),typeof e=="string"?i=e:!a.cause&&e&&(s=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=QE(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Hs.prototype.file="";Hs.prototype.name="";Hs.prototype.reason="";Hs.prototype.message="";Hs.prototype.stack="";Hs.prototype.column=void 0;Hs.prototype.line=void 0;Hs.prototype.ancestors=void 0;Hs.prototype.cause=void 0;Hs.prototype.fatal=void 0;Hs.prototype.place=void 0;Hs.prototype.ruleId=void 0;Hs.prototype.source=void 0;const MW={}.hasOwnProperty,Wrt=new Map,Xrt=/[A-Z]/g,$rt=new Set(["table","tbody","thead","tfoot","tr"]),Yrt=new Set(["td","th"]),R0e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function qrt(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=rit(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=nit(t,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Ug:N2,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=N0e(i,n,void 0);return a&&typeof a!="string"?a:i.create(n,i.Fragment,{children:a||void 0},void 0)}function N0e(n,e,t){if(e.type==="element")return Krt(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Zrt(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Jrt(n,e,t);if(e.type==="mdxjsEsm")return Qrt(n,e);if(e.type==="root")return eit(n,e,t);if(e.type==="text")return tit(n,e)}function Krt(n,e,t){const r=n.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Ug,n.schema=i),n.ancestors.push(e);const a=O0e(n,e.tagName,!1),s=iit(n,e);let o=IW(n,e);return $rt.has(e.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!Drt(l):!0})),k0e(n,s,a,e),DW(s,o),n.ancestors.pop(),n.schema=r,n.create(e,a,s,t)}function Zrt(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}tC(n,e.position)}function Qrt(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);tC(n,e.position)}function Jrt(n,e,t){const r=n.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Ug,n.schema=i),n.ancestors.push(e);const a=e.name===null?n.Fragment:O0e(n,e.name,!0),s=ait(n,e),o=IW(n,e);return k0e(n,s,a,e),DW(s,o),n.ancestors.pop(),n.schema=r,n.create(e,a,s,t)}function eit(n,e,t){const r={};return DW(r,IW(n,e)),n.create(e,n.Fragment,r,t)}function tit(n,e){return e.value}function k0e(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function DW(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function nit(n,e,t){return r;function r(i,a,s,o){const u=Array.isArray(s.children)?t:e;return o?u(a,s,o):u(a,s)}}function rit(n,e){return t;function t(r,i,a,s){const o=Array.isArray(a.children),l=fd(r);return e(i,a,s,o,{columnNumber:l?l.column-1:void 0,fileName:n,lineNumber:l?l.line:void 0},void 0)}}function iit(n,e){const t={};let r,i;for(i in e.properties)if(i!=="children"&&MW.call(e.properties,i)){const a=sit(n,i,e.properties[i]);if(a){const[s,o]=a;n.tableCellAlignToStyle&&s==="align"&&typeof o=="string"&&Yrt.has(e.tagName)?r=o:t[s]=o}}if(r){const a=t.style||(t.style={});a[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function ait(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const a=r.data.estree.body[0];a.type;const s=a.expression;s.type;const o=s.properties[0];o.type,Object.assign(t,n.evaluater.evaluateExpression(o.argument))}else tC(n,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const o=r.value.data.estree.body[0];o.type,a=n.evaluater.evaluateExpression(o.expression)}else tC(n,e.position);else a=r.value===null?!0:r.value;t[i]=a}return t}function IW(n,e){const t=[];let r=-1;const i=n.passKeys?new Map:Wrt;for(;++r<e.children.length;){const a=e.children[r];let s;if(n.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const u=i.get(l)||0;s=l+"-"+u,i.set(l,u+1)}}const o=N0e(n,a,s);o!==void 0&&t.push(o)}return t}function sit(n,e,t){const r=G3(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?w0e(t):P0e(t)),r.property==="style"){let i=typeof t=="object"?t:oit(n,String(t));return n.stylePropertyNameCase==="css"&&(i=lit(i)),["style",i]}return[n.elementAttributeNameCase==="react"&&r.space?Rrt[r.property]||r.property:r.attribute,t]}}function oit(n,e){try{return Grt(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,i=new Hs("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=n.filePath||void 0,i.url=R0e+"#cannot-parse-style-attribute",i}}function O0e(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,s;for(;++a<i.length;){const o=Dae(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};s=s?{type:"MemberExpression",object:s,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}r=s}else r=Dae(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return MW.call(n.components,i)?n.components[i]:i}if(n.evaluater)return n.evaluater.evaluateExpression(r);tC(n)}function tC(n,e){const t=new Hs("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=R0e+"#cannot-handle-mdx-estrees-without-createevaluater",t}function lit(n){const e={};let t;for(t in n)MW.call(n,t)&&(e[uit(t)]=n[t]);return e}function uit(n){let e=n.replace(Xrt,cit);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function cit(n){return"-"+n.toLowerCase()}const U6={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},hit={};function PW(n,e){const t=hit,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return B0e(n,r,i)}function B0e(n,e,t){if(dit(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return zae(n.children,e,t)}return Array.isArray(n)?zae(n,e,t):""}function zae(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=B0e(n[i],e,t);return r.join("")}function dit(n){return!!(n&&typeof n=="object")}const Vae=document.createElement("i");function LW(n){const e="&"+n+";";Vae.innerHTML=e;const t=Vae.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function kl(n,e,t,r){const i=n.length;let a=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)s=Array.from(r),s.unshift(e,t),n.splice(...s);else for(t&&n.splice(e,t);a<r.length;)s=r.slice(a,a+1e4),s.unshift(e,0),n.splice(...s),a+=1e4,e+=1e4}function bu(n,e){return n.length>0?(kl(n,n.length,0,e),n):e}const Hae={}.hasOwnProperty;function F0e(n){const e={};let t=-1;for(;++t<n.length;)fit(e,n[t]);return e}function fit(n,e){let t;for(t in e){const i=(Hae.call(n,t)?n[t]:void 0)||(n[t]={}),a=e[t];let s;if(a)for(s in a){Hae.call(i,s)||(i[s]=[]);const o=a[s];pit(i[s],Array.isArray(o)?o:o?[o]:[])}}}function pit(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);kl(n,0,0,r)}function U0e(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function Mc(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const co=zg(/[A-Za-z]/),Os=zg(/[\dA-Za-z]/),mit=zg(/[#-'*+\--9=?A-Z^-~]/);function QN(n){return n!==null&&(n<32||n===127)}const sH=zg(/\d/),git=zg(/[\dA-Fa-f]/),vit=zg(/[!-/:-@[-`{-~]/);function hn(n){return n!==null&&n<-2}function $r(n){return n!==null&&(n<0||n===32)}function tr(n){return n===-2||n===-1||n===32}const W3=zg(new RegExp("\\p{P}|\\p{S}","u")),Zy=zg(/\s/);function zg(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function sw(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const a=n.charCodeAt(t);let s="";if(a===37&&Os(n.charCodeAt(t+1))&&Os(n.charCodeAt(t+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const o=n.charCodeAt(t+1);a<56320&&o>56319&&o<57344?(s=String.fromCharCode(a,o),i=1):s=""}else s=String.fromCharCode(a);s&&(e.push(n.slice(r,t),encodeURIComponent(s)),r=t+i+1,s=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function sr(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(l){return tr(l)?(n.enter(t),o(l)):e(l)}function o(l){return tr(l)&&a++<i?(n.consume(l),o):(n.exit(t),e(l))}}const yit={tokenize:xit};function xit(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),sr(n,e,"linePrefix")}function i(o){return n.enter("paragraph"),a(o)}function a(o){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,s(o)}function s(o){if(o===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(o);return}return hn(o)?(n.consume(o),n.exit("chunkText"),a):(n.consume(o),s)}}const _it={tokenize:bit},Gae={tokenize:Sit};function bit(n){const e=this,t=[];let r=0,i,a,s;return o;function o(S){if(r<t.length){const w=t[r];return e.containerState=w[1],n.attempt(w[0].continuation,l,u)(S)}return u(S)}function l(S){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&b();const w=e.events.length;let E=w,T;for(;E--;)if(e.events[E][0]==="exit"&&e.events[E][1].type==="chunkFlow"){T=e.events[E][1].end;break}v(r);let M=w;for(;M<e.events.length;)e.events[M][1].end={...T},M++;return kl(e.events,E+1,0,e.events.slice(w)),e.events.length=M,u(S)}return o(S)}function u(S){if(r===t.length){if(!i)return d(S);if(i.currentConstruct&&i.currentConstruct.concrete)return p(S);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(Gae,c,h)(S)}function c(S){return i&&b(),v(r),d(S)}function h(S){return e.parser.lazy[e.now().line]=r!==t.length,s=e.now().offset,p(S)}function d(S){return e.containerState={},n.attempt(Gae,f,p)(S)}function f(S){return r++,t.push([e.currentConstruct,e.containerState]),d(S)}function p(S){if(S===null){i&&b(),v(0),n.consume(S);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),m(S)}function m(S){if(S===null){g(n.exit("chunkFlow"),!0),v(0),n.consume(S);return}return hn(S)?(n.consume(S),g(n.exit("chunkFlow")),r=0,e.interrupt=void 0,o):(n.consume(S),m)}function g(S,w){const E=e.sliceStream(S);if(w&&E.push(null),S.previous=a,a&&(a.next=S),a=S,i.defineSkip(S.start),i.write(E),e.parser.lazy[S.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<s&&(!i.events[T][1].end||i.events[T][1].end.offset>s))return;const M=e.events.length;let P=M,I,D;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(I){D=e.events[P][1].end;break}I=!0}for(v(r),T=M;T<e.events.length;)e.events[T][1].end={...D},T++;kl(e.events,P+1,0,e.events.slice(M)),e.events.length=T}}function v(S){let w=t.length;for(;w-- >S;){const E=t[w];e.containerState=E[1],E[0].exit.call(e,n)}t.length=S}function b(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Sit(n,e,t){return sr(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function wS(n){if(n===null||$r(n)||Zy(n))return 1;if(W3(n))return 2}function X3(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const a=n[i].resolveAll;a&&!r.includes(a)&&(e=a(e,t),r.push(a))}return e}const oH={name:"attention",resolveAll:wit,tokenize:Tit};function wit(n,e){let t=-1,r,i,a,s,o,l,u,c;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const h={...n[r][1].end},d={...n[t][1].start};jae(h,-l),jae(d,l),s={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...n[r][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:d},a={type:l>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},i={type:l>1?"strong":"emphasis",start:{...s.start},end:{...o.end}},n[r][1].end={...s.start},n[t][1].start={...o.end},u=[],n[r][1].end.offset-n[r][1].start.offset&&(u=bu(u,[["enter",n[r][1],e],["exit",n[r][1],e]])),u=bu(u,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",a,e]]),u=bu(u,X3(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),u=bu(u,[["exit",a,e],["enter",o,e],["exit",o,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(c=2,u=bu(u,[["enter",n[t][1],e],["exit",n[t][1],e]])):c=0,kl(n,r-1,t-r+3,u),t=r+u.length-c-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function Tit(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=wS(r);let a;return s;function s(l){return a=l,n.enter("attentionSequence"),o(l)}function o(l){if(l===a)return n.consume(l),o;const u=n.exit("attentionSequence"),c=wS(l),h=!c||c===2&&i||t.includes(l),d=!i||i===2&&c||t.includes(r);return u._open=!!(a===42?h:h&&(i||!d)),u._close=!!(a===42?d:d&&(c||!h)),e(l)}}function jae(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const Eit={name:"autolink",tokenize:Ait};function Ait(n,e,t){let r=0;return i;function i(f){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),a}function a(f){return co(f)?(n.consume(f),s):f===64?t(f):u(f)}function s(f){return f===43||f===45||f===46||Os(f)?(r=1,o(f)):u(f)}function o(f){return f===58?(n.consume(f),r=0,l):(f===43||f===45||f===46||Os(f))&&r++<32?(n.consume(f),o):(r=0,u(f))}function l(f){return f===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):f===null||f===32||f===60||QN(f)?t(f):(n.consume(f),l)}function u(f){return f===64?(n.consume(f),c):mit(f)?(n.consume(f),u):t(f)}function c(f){return Os(f)?h(f):t(f)}function h(f){return f===46?(n.consume(f),r=0,c):f===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):d(f)}function d(f){if((f===45||Os(f))&&r++<63){const p=f===45?d:h;return n.consume(f),p}return t(f)}}const k2={partial:!0,tokenize:Cit};function Cit(n,e,t){return r;function r(a){return tr(a)?sr(n,i,"linePrefix")(a):i(a)}function i(a){return a===null||hn(a)?e(a):t(a)}}const z0e={continuation:{tokenize:Dit},exit:Iit,name:"blockQuote",tokenize:Mit};function Mit(n,e,t){const r=this;return i;function i(s){if(s===62){const o=r.containerState;return o.open||(n.enter("blockQuote",{_container:!0}),o.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(s),n.exit("blockQuoteMarker"),a}return t(s)}function a(s){return tr(s)?(n.enter("blockQuotePrefixWhitespace"),n.consume(s),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(s))}}function Dit(n,e,t){const r=this;return i;function i(s){return tr(s)?sr(n,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return n.attempt(z0e,e,t)(s)}}function Iit(n){n.exit("blockQuote")}const V0e={name:"characterEscape",tokenize:Pit};function Pit(n,e,t){return r;function r(a){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(a),n.exit("escapeMarker"),i}function i(a){return vit(a)?(n.enter("characterEscapeValue"),n.consume(a),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(a)}}const H0e={name:"characterReference",tokenize:Lit};function Lit(n,e,t){const r=this;let i=0,a,s;return o;function o(h){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),l}function l(h){return h===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(h),n.exit("characterReferenceMarkerNumeric"),u):(n.enter("characterReferenceValue"),a=31,s=Os,c(h))}function u(h){return h===88||h===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(h),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),a=6,s=git,c):(n.enter("characterReferenceValue"),a=7,s=sH,c(h))}function c(h){if(h===59&&i){const d=n.exit("characterReferenceValue");return s===Os&&!LW(r.sliceSerialize(d))?t(h):(n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return s(h)&&i++<a?(n.consume(h),c):t(h)}}const Wae={partial:!0,tokenize:Nit},Xae={concrete:!0,name:"codeFenced",tokenize:Rit};function Rit(n,e,t){const r=this,i={partial:!0,tokenize:E};let a=0,s=0,o;return l;function l(T){return u(T)}function u(T){const M=r.events[r.events.length-1];return a=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,o=T,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===o?(s++,n.consume(T),c):s<3?t(T):(n.exit("codeFencedFenceSequence"),tr(T)?sr(n,h,"whitespace")(T):h(T))}function h(T){return T===null||hn(T)?(n.exit("codeFencedFence"),r.interrupt?e(T):n.check(Wae,m,w)(T)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||hn(T)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),h(T)):tr(T)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),sr(n,f,"whitespace")(T)):T===96&&T===o?t(T):(n.consume(T),d)}function f(T){return T===null||hn(T)?h(T):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||hn(T)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),h(T)):T===96&&T===o?t(T):(n.consume(T),p)}function m(T){return n.attempt(i,w,g)(T)}function g(T){return n.enter("lineEnding"),n.consume(T),n.exit("lineEnding"),v}function v(T){return a>0&&tr(T)?sr(n,b,"linePrefix",a+1)(T):b(T)}function b(T){return T===null||hn(T)?n.check(Wae,m,w)(T):(n.enter("codeFlowValue"),S(T))}function S(T){return T===null||hn(T)?(n.exit("codeFlowValue"),b(T)):(n.consume(T),S)}function w(T){return n.exit("codeFenced"),e(T)}function E(T,M,P){let I=0;return D;function D(G){return T.enter("lineEnding"),T.consume(G),T.exit("lineEnding"),R}function R(G){return T.enter("codeFencedFence"),tr(G)?sr(T,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(G):B(G)}function B(G){return G===o?(T.enter("codeFencedFenceSequence"),k(G)):P(G)}function k(G){return G===o?(I++,T.consume(G),k):I>=s?(T.exit("codeFencedFenceSequence"),tr(G)?sr(T,V,"whitespace")(G):V(G)):P(G)}function V(G){return G===null||hn(G)?(T.exit("codeFencedFence"),M(G)):P(G)}}}function Nit(n,e,t){const r=this;return i;function i(s){return s===null?t(s):(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),a)}function a(s){return r.parser.lazy[r.now().line]?t(s):e(s)}}const z6={name:"codeIndented",tokenize:Oit},kit={partial:!0,tokenize:Bit};function Oit(n,e,t){const r=this;return i;function i(u){return n.enter("codeIndented"),sr(n,a,"linePrefix",5)(u)}function a(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?s(u):t(u)}function s(u){return u===null?l(u):hn(u)?n.attempt(kit,s,l)(u):(n.enter("codeFlowValue"),o(u))}function o(u){return u===null||hn(u)?(n.exit("codeFlowValue"),s(u)):(n.consume(u),o)}function l(u){return n.exit("codeIndented"),e(u)}}function Bit(n,e,t){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?t(s):hn(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),i):sr(n,a,"linePrefix",5)(s)}function a(s){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):hn(s)?i(s):t(s)}}const Fit={name:"codeText",previous:zit,resolve:Uit,tokenize:Vit};function Uit(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function zit(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Vit(n,e,t){let r=0,i,a;return s;function s(h){return n.enter("codeText"),n.enter("codeTextSequence"),o(h)}function o(h){return h===96?(n.consume(h),r++,o):(n.exit("codeTextSequence"),l(h))}function l(h){return h===null?t(h):h===32?(n.enter("space"),n.consume(h),n.exit("space"),l):h===96?(a=n.enter("codeTextSequence"),i=0,c(h)):hn(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),l):(n.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||hn(h)?(n.exit("codeTextData"),l(h)):(n.consume(h),u)}function c(h){return h===96?(n.consume(h),i++,c):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(h)):(a.type="codeTextData",u(h))}}class Hit{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const i=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&kT(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),kT(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),kT(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);kT(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);kT(this.left,t.reverse())}}}function kT(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function G0e(n){const e={};let t=-1,r,i,a,s,o,l,u;const c=new Hit(n);for(;++t<c.length;){for(;t in e;)t=e[t];if(r=c.get(t),t&&r[1].type==="chunkFlow"&&c.get(t-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Git(c,t)),t=e[t],u=!0);else if(r[1]._container){for(a=t,i=void 0;a--;)if(s=c.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},o=c.slice(i,t),o.unshift(r),c.splice(i,t-i+1,o))}}return kl(n,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function Git(n,e){const t=n.get(e)[1],r=n.get(e)[2];let i=e-1;const a=[];let s=t._tokenizer;s||(s=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const o=s.events,l=[],u={};let c,h,d=-1,f=t,p=0,m=0;const g=[m];for(;f;){for(;n.get(++i)[1]!==f;);a.push(i),f._tokenizer||(c=r.sliceStream(f),f.next||c.push(null),h&&s.defineSkip(f.start),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(c),f._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=t;++d<o.length;)o[d][0]==="exit"&&o[d-1][0]==="enter"&&o[d][1].type===o[d-1][1].type&&o[d][1].start.line!==o[d][1].end.line&&(m=d+1,g.push(m),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(s.events=[],f?(f._tokenizer=void 0,f.previous=void 0):g.pop(),d=g.length;d--;){const v=o.slice(g[d],g[d+1]),b=a.pop();l.push([b,b+v.length-1]),n.splice(b,2,v)}for(l.reverse(),d=-1;++d<l.length;)u[p+l[d][0]]=p+l[d][1],p+=l[d][1]-l[d][0]-1;return u}const jit={resolve:Xit,tokenize:$it},Wit={partial:!0,tokenize:Yit};function Xit(n){return G0e(n),n}function $it(n,e){let t;return r;function r(o){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?a(o):hn(o)?n.check(Wit,s,a)(o):(n.consume(o),i)}function a(o){return n.exit("chunkContent"),n.exit("content"),e(o)}function s(o){return n.consume(o),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function Yit(n,e,t){const r=this;return i;function i(s){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),sr(n,a,"linePrefix")}function a(s){if(s===null||hn(s))return t(s);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(s):n.interrupt(r.parser.constructs.flow,t,e)(s)}}function j0e(n,e,t,r,i,a,s,o,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(v){return v===60?(n.enter(r),n.enter(i),n.enter(a),n.consume(v),n.exit(a),d):v===null||v===32||v===41||QN(v)?t(v):(n.enter(r),n.enter(s),n.enter(o),n.enter("chunkString",{contentType:"string"}),m(v))}function d(v){return v===62?(n.enter(a),n.consume(v),n.exit(a),n.exit(i),n.exit(r),e):(n.enter(o),n.enter("chunkString",{contentType:"string"}),f(v))}function f(v){return v===62?(n.exit("chunkString"),n.exit(o),d(v)):v===null||v===60||hn(v)?t(v):(n.consume(v),v===92?p:f)}function p(v){return v===60||v===62||v===92?(n.consume(v),f):f(v)}function m(v){return!c&&(v===null||v===41||$r(v))?(n.exit("chunkString"),n.exit(o),n.exit(s),n.exit(r),e(v)):c<u&&v===40?(n.consume(v),c++,m):v===41?(n.consume(v),c--,m):v===null||v===32||v===40||QN(v)?t(v):(n.consume(v),v===92?g:m)}function g(v){return v===40||v===41||v===92?(n.consume(v),m):m(v)}}function W0e(n,e,t,r,i,a){const s=this;let o=0,l;return u;function u(f){return n.enter(r),n.enter(i),n.consume(f),n.exit(i),n.enter(a),c}function c(f){return o>999||f===null||f===91||f===93&&!l||f===94&&!o&&"_hiddenFootnoteSupport"in s.parser.constructs?t(f):f===93?(n.exit(a),n.enter(i),n.consume(f),n.exit(i),n.exit(r),e):hn(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),c):(n.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||hn(f)||o++>999?(n.exit("chunkString"),c(f)):(n.consume(f),l||(l=!tr(f)),f===92?d:h)}function d(f){return f===91||f===92||f===93?(n.consume(f),o++,h):h(f)}}function X0e(n,e,t,r,i,a){let s;return o;function o(d){return d===34||d===39||d===40?(n.enter(r),n.enter(i),n.consume(d),n.exit(i),s=d===40?41:d,l):t(d)}function l(d){return d===s?(n.enter(i),n.consume(d),n.exit(i),n.exit(r),e):(n.enter(a),u(d))}function u(d){return d===s?(n.exit(a),l(s)):d===null?t(d):hn(d)?(n.enter("lineEnding"),n.consume(d),n.exit("lineEnding"),sr(n,u,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===s||d===null||hn(d)?(n.exit("chunkString"),u(d)):(n.consume(d),d===92?h:c)}function h(d){return d===s||d===92?(n.consume(d),c):c(d)}}function JE(n,e){let t;return r;function r(i){return hn(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):tr(i)?sr(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}const qit={name:"definition",tokenize:Zit},Kit={partial:!0,tokenize:Qit};function Zit(n,e,t){const r=this;let i;return a;function a(f){return n.enter("definition"),s(f)}function s(f){return W0e.call(r,n,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function o(f){return i=Mc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),f===58?(n.enter("definitionMarker"),n.consume(f),n.exit("definitionMarker"),l):t(f)}function l(f){return $r(f)?JE(n,u)(f):u(f)}function u(f){return j0e(n,c,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function c(f){return n.attempt(Kit,h,h)(f)}function h(f){return tr(f)?sr(n,d,"whitespace")(f):d(f)}function d(f){return f===null||hn(f)?(n.exit("definition"),r.parser.defined.push(i),e(f)):t(f)}}function Qit(n,e,t){return r;function r(o){return $r(o)?JE(n,i)(o):t(o)}function i(o){return X0e(n,a,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return tr(o)?sr(n,s,"whitespace")(o):s(o)}function s(o){return o===null||hn(o)?e(o):t(o)}}const Jit={name:"hardBreakEscape",tokenize:eat};function eat(n,e,t){return r;function r(a){return n.enter("hardBreakEscape"),n.consume(a),i}function i(a){return hn(a)?(n.exit("hardBreakEscape"),e(a)):t(a)}}const tat={name:"headingAtx",resolve:nat,tokenize:rat};function nat(n,e){let t=n.length-2,r=3,i,a;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},a={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},kl(n,r,t-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),n}function rat(n,e,t){let r=0;return i;function i(c){return n.enter("atxHeading"),a(c)}function a(c){return n.enter("atxHeadingSequence"),s(c)}function s(c){return c===35&&r++<6?(n.consume(c),s):c===null||$r(c)?(n.exit("atxHeadingSequence"),o(c)):t(c)}function o(c){return c===35?(n.enter("atxHeadingSequence"),l(c)):c===null||hn(c)?(n.exit("atxHeading"),e(c)):tr(c)?sr(n,o,"whitespace")(c):(n.enter("atxHeadingText"),u(c))}function l(c){return c===35?(n.consume(c),l):(n.exit("atxHeadingSequence"),o(c))}function u(c){return c===null||c===35||$r(c)?(n.exit("atxHeadingText"),o(c)):(n.consume(c),u)}}const iat=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$ae=["pre","script","style","textarea"],aat={concrete:!0,name:"htmlFlow",resolveTo:lat,tokenize:uat},sat={partial:!0,tokenize:hat},oat={partial:!0,tokenize:cat};function lat(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function uat(n,e,t){const r=this;let i,a,s,o,l;return u;function u(Y){return c(Y)}function c(Y){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(Y),h}function h(Y){return Y===33?(n.consume(Y),d):Y===47?(n.consume(Y),a=!0,m):Y===63?(n.consume(Y),i=3,r.interrupt?e:H):co(Y)?(n.consume(Y),s=String.fromCharCode(Y),g):t(Y)}function d(Y){return Y===45?(n.consume(Y),i=2,f):Y===91?(n.consume(Y),i=5,o=0,p):co(Y)?(n.consume(Y),i=4,r.interrupt?e:H):t(Y)}function f(Y){return Y===45?(n.consume(Y),r.interrupt?e:H):t(Y)}function p(Y){const de="CDATA[";return Y===de.charCodeAt(o++)?(n.consume(Y),o===de.length?r.interrupt?e:B:p):t(Y)}function m(Y){return co(Y)?(n.consume(Y),s=String.fromCharCode(Y),g):t(Y)}function g(Y){if(Y===null||Y===47||Y===62||$r(Y)){const de=Y===47,ge=s.toLowerCase();return!de&&!a&&$ae.includes(ge)?(i=1,r.interrupt?e(Y):B(Y)):iat.includes(s.toLowerCase())?(i=6,de?(n.consume(Y),v):r.interrupt?e(Y):B(Y)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(Y):a?b(Y):S(Y))}return Y===45||Os(Y)?(n.consume(Y),s+=String.fromCharCode(Y),g):t(Y)}function v(Y){return Y===62?(n.consume(Y),r.interrupt?e:B):t(Y)}function b(Y){return tr(Y)?(n.consume(Y),b):D(Y)}function S(Y){return Y===47?(n.consume(Y),D):Y===58||Y===95||co(Y)?(n.consume(Y),w):tr(Y)?(n.consume(Y),S):D(Y)}function w(Y){return Y===45||Y===46||Y===58||Y===95||Os(Y)?(n.consume(Y),w):E(Y)}function E(Y){return Y===61?(n.consume(Y),T):tr(Y)?(n.consume(Y),E):S(Y)}function T(Y){return Y===null||Y===60||Y===61||Y===62||Y===96?t(Y):Y===34||Y===39?(n.consume(Y),l=Y,M):tr(Y)?(n.consume(Y),T):P(Y)}function M(Y){return Y===l?(n.consume(Y),l=null,I):Y===null||hn(Y)?t(Y):(n.consume(Y),M)}function P(Y){return Y===null||Y===34||Y===39||Y===47||Y===60||Y===61||Y===62||Y===96||$r(Y)?E(Y):(n.consume(Y),P)}function I(Y){return Y===47||Y===62||tr(Y)?S(Y):t(Y)}function D(Y){return Y===62?(n.consume(Y),R):t(Y)}function R(Y){return Y===null||hn(Y)?B(Y):tr(Y)?(n.consume(Y),R):t(Y)}function B(Y){return Y===45&&i===2?(n.consume(Y),F):Y===60&&i===1?(n.consume(Y),X):Y===62&&i===4?(n.consume(Y),K):Y===63&&i===3?(n.consume(Y),H):Y===93&&i===5?(n.consume(Y),Q):hn(Y)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(sat,te,k)(Y)):Y===null||hn(Y)?(n.exit("htmlFlowData"),k(Y)):(n.consume(Y),B)}function k(Y){return n.check(oat,V,te)(Y)}function V(Y){return n.enter("lineEnding"),n.consume(Y),n.exit("lineEnding"),G}function G(Y){return Y===null||hn(Y)?k(Y):(n.enter("htmlFlowData"),B(Y))}function F(Y){return Y===45?(n.consume(Y),H):B(Y)}function X(Y){return Y===47?(n.consume(Y),s="",j):B(Y)}function j(Y){if(Y===62){const de=s.toLowerCase();return $ae.includes(de)?(n.consume(Y),K):B(Y)}return co(Y)&&s.length<8?(n.consume(Y),s+=String.fromCharCode(Y),j):B(Y)}function Q(Y){return Y===93?(n.consume(Y),H):B(Y)}function H(Y){return Y===62?(n.consume(Y),K):Y===45&&i===2?(n.consume(Y),H):B(Y)}function K(Y){return Y===null||hn(Y)?(n.exit("htmlFlowData"),te(Y)):(n.consume(Y),K)}function te(Y){return n.exit("htmlFlow"),e(Y)}}function cat(n,e,t){const r=this;return i;function i(s){return hn(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),a):t(s)}function a(s){return r.parser.lazy[r.now().line]?t(s):e(s)}}function hat(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(k2,e,t)}}const dat={name:"htmlText",tokenize:fat};function fat(n,e,t){const r=this;let i,a,s;return o;function o(H){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(H),l}function l(H){return H===33?(n.consume(H),u):H===47?(n.consume(H),E):H===63?(n.consume(H),S):co(H)?(n.consume(H),P):t(H)}function u(H){return H===45?(n.consume(H),c):H===91?(n.consume(H),a=0,p):co(H)?(n.consume(H),b):t(H)}function c(H){return H===45?(n.consume(H),f):t(H)}function h(H){return H===null?t(H):H===45?(n.consume(H),d):hn(H)?(s=h,X(H)):(n.consume(H),h)}function d(H){return H===45?(n.consume(H),f):h(H)}function f(H){return H===62?F(H):H===45?d(H):h(H)}function p(H){const K="CDATA[";return H===K.charCodeAt(a++)?(n.consume(H),a===K.length?m:p):t(H)}function m(H){return H===null?t(H):H===93?(n.consume(H),g):hn(H)?(s=m,X(H)):(n.consume(H),m)}function g(H){return H===93?(n.consume(H),v):m(H)}function v(H){return H===62?F(H):H===93?(n.consume(H),v):m(H)}function b(H){return H===null||H===62?F(H):hn(H)?(s=b,X(H)):(n.consume(H),b)}function S(H){return H===null?t(H):H===63?(n.consume(H),w):hn(H)?(s=S,X(H)):(n.consume(H),S)}function w(H){return H===62?F(H):S(H)}function E(H){return co(H)?(n.consume(H),T):t(H)}function T(H){return H===45||Os(H)?(n.consume(H),T):M(H)}function M(H){return hn(H)?(s=M,X(H)):tr(H)?(n.consume(H),M):F(H)}function P(H){return H===45||Os(H)?(n.consume(H),P):H===47||H===62||$r(H)?I(H):t(H)}function I(H){return H===47?(n.consume(H),F):H===58||H===95||co(H)?(n.consume(H),D):hn(H)?(s=I,X(H)):tr(H)?(n.consume(H),I):F(H)}function D(H){return H===45||H===46||H===58||H===95||Os(H)?(n.consume(H),D):R(H)}function R(H){return H===61?(n.consume(H),B):hn(H)?(s=R,X(H)):tr(H)?(n.consume(H),R):I(H)}function B(H){return H===null||H===60||H===61||H===62||H===96?t(H):H===34||H===39?(n.consume(H),i=H,k):hn(H)?(s=B,X(H)):tr(H)?(n.consume(H),B):(n.consume(H),V)}function k(H){return H===i?(n.consume(H),i=void 0,G):H===null?t(H):hn(H)?(s=k,X(H)):(n.consume(H),k)}function V(H){return H===null||H===34||H===39||H===60||H===61||H===96?t(H):H===47||H===62||$r(H)?I(H):(n.consume(H),V)}function G(H){return H===47||H===62||$r(H)?I(H):t(H)}function F(H){return H===62?(n.consume(H),n.exit("htmlTextData"),n.exit("htmlText"),e):t(H)}function X(H){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(H),n.exit("lineEnding"),j}function j(H){return tr(H)?sr(n,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(H):Q(H)}function Q(H){return n.enter("htmlTextData"),s(H)}}const RW={name:"labelEnd",resolveAll:vat,resolveTo:yat,tokenize:xat},pat={tokenize:_at},mat={tokenize:bat},gat={tokenize:Sat};function vat(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return n.length!==t.length&&kl(n,0,n.length,t),n}function yat(n,e){let t=n.length,r=0,i,a,s,o;for(;t--;)if(i=n[t][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=t);const l={type:n[a][1].type==="labelLink"?"link":"image",start:{...n[a][1].start},end:{...n[n.length-1][1].end}},u={type:"label",start:{...n[a][1].start},end:{...n[s][1].end}},c={type:"labelText",start:{...n[a+r+2][1].end},end:{...n[s-2][1].start}};return o=[["enter",l,e],["enter",u,e]],o=bu(o,n.slice(a+1,a+r+3)),o=bu(o,[["enter",c,e]]),o=bu(o,X3(e.parser.constructs.insideSpan.null,n.slice(a+r+4,s-3),e)),o=bu(o,[["exit",c,e],n[s-2],n[s-1],["exit",u,e]]),o=bu(o,n.slice(s+1)),o=bu(o,[["exit",l,e]]),kl(n,a,n.length,o),n}function xat(n,e,t){const r=this;let i=r.events.length,a,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return o;function o(d){return a?a._inactive?h(d):(s=r.parser.defined.includes(Mc(r.sliceSerialize({start:a.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(d),n.exit("labelMarker"),n.exit("labelEnd"),l):t(d)}function l(d){return d===40?n.attempt(pat,c,s?c:h)(d):d===91?n.attempt(mat,c,s?u:h)(d):s?c(d):h(d)}function u(d){return n.attempt(gat,c,h)(d)}function c(d){return e(d)}function h(d){return a._balanced=!0,t(d)}}function _at(n,e,t){return r;function r(h){return n.enter("resource"),n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),i}function i(h){return $r(h)?JE(n,a)(h):a(h)}function a(h){return h===41?c(h):j0e(n,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function s(h){return $r(h)?JE(n,l)(h):c(h)}function o(h){return t(h)}function l(h){return h===34||h===39||h===40?X0e(n,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return $r(h)?JE(n,c)(h):c(h)}function c(h){return h===41?(n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),n.exit("resource"),e):t(h)}}function bat(n,e,t){const r=this;return i;function i(o){return W0e.call(r,n,a,s,"reference","referenceMarker","referenceString")(o)}function a(o){return r.parser.defined.includes(Mc(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):t(o)}function s(o){return t(o)}}function Sat(n,e,t){return r;function r(a){return n.enter("reference"),n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),i}function i(a){return a===93?(n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),n.exit("reference"),e):t(a)}}const wat={name:"labelStartImage",resolveAll:RW.resolveAll,tokenize:Tat};function Tat(n,e,t){const r=this;return i;function i(o){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(o),n.exit("labelImageMarker"),a}function a(o){return o===91?(n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelImage"),s):t(o)}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const Eat={name:"labelStartLink",resolveAll:RW.resolveAll,tokenize:Aat};function Aat(n,e,t){const r=this;return i;function i(s){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(s),n.exit("labelMarker"),n.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(s):e(s)}}const V6={name:"lineEnding",tokenize:Cat};function Cat(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),sr(n,e,"linePrefix")}}const WL={name:"thematicBreak",tokenize:Mat};function Mat(n,e,t){let r=0,i;return a;function a(u){return n.enter("thematicBreak"),s(u)}function s(u){return i=u,o(u)}function o(u){return u===i?(n.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||hn(u))?(n.exit("thematicBreak"),e(u)):t(u)}function l(u){return u===i?(n.consume(u),r++,l):(n.exit("thematicBreakSequence"),tr(u)?sr(n,o,"whitespace")(u):o(u))}}const Co={continuation:{tokenize:Lat},exit:Nat,name:"list",tokenize:Pat},Dat={partial:!0,tokenize:kat},Iat={partial:!0,tokenize:Rat};function Pat(n,e,t){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return o;function o(f){const p=r.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||f===r.containerState.marker:sH(f)){if(r.containerState.type||(r.containerState.type=p,n.enter(p,{_container:!0})),p==="listUnordered")return n.enter("listItemPrefix"),f===42||f===45?n.check(WL,t,u)(f):u(f);if(!r.interrupt||f===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(f)}return t(f)}function l(f){return sH(f)&&++s<10?(n.consume(f),l):(!r.interrupt||s<2)&&(r.containerState.marker?f===r.containerState.marker:f===41||f===46)?(n.exit("listItemValue"),u(f)):t(f)}function u(f){return n.enter("listItemMarker"),n.consume(f),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||f,n.check(k2,r.interrupt?t:c,n.attempt(Dat,d,h))}function c(f){return r.containerState.initialBlankLine=!0,a++,d(f)}function h(f){return tr(f)?(n.enter("listItemPrefixWhitespace"),n.consume(f),n.exit("listItemPrefixWhitespace"),d):t(f)}function d(f){return r.containerState.size=a+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(f)}}function Lat(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(k2,i,a);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,sr(n,e,"listItemIndent",r.containerState.size+1)(o)}function a(o){return r.containerState.furtherBlankLines||!tr(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(Iat,e,s)(o))}function s(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,sr(n,n.attempt(Co,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Rat(n,e,t){const r=this;return sr(n,i,"listItemIndent",r.containerState.size+1);function i(a){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?e(a):t(a)}}function Nat(n){n.exit(this.containerState.type)}function kat(n,e,t){const r=this;return sr(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=r.events[r.events.length-1];return!tr(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):t(a)}}const Yae={name:"setextUnderline",resolveTo:Oat,tokenize:Bat};function Oat(n,e){let t=n.length,r,i,a;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!a&&n[t][1].type==="definition"&&(a=t);const s={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[i][1].type="setextHeadingText",a?(n.splice(i,0,["enter",s,e]),n.splice(a+1,0,["exit",n[r][1],e]),n[r][1].end={...n[a][1].end}):n[r][1]=s,n.push(["exit",s,e]),n}function Bat(n,e,t){const r=this;let i;return a;function a(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(n.enter("setextHeadingLine"),i=u,s(u)):t(u)}function s(u){return n.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===i?(n.consume(u),o):(n.exit("setextHeadingLineSequence"),tr(u)?sr(n,l,"lineSuffix")(u):l(u))}function l(u){return u===null||hn(u)?(n.exit("setextHeadingLine"),e(u)):t(u)}}const Fat={tokenize:Uat};function Uat(n){const e=this,t=n.attempt(k2,r,n.attempt(this.parser.constructs.flowInitial,i,sr(n,n.attempt(this.parser.constructs.flow,i,n.attempt(jit,i)),"linePrefix")));return t;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEndingBlank"),n.consume(a),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const zat={resolveAll:Y0e()},Vat=$0e("string"),Hat=$0e("text");function $0e(n){return{resolveAll:Y0e(n==="text"?Gat:void 0),tokenize:e};function e(t){const r=this,i=this.parser.constructs[n],a=t.attempt(i,s,o);return s;function s(c){return u(c)?a(c):o(c)}function o(c){if(c===null){t.consume(c);return}return t.enter("data"),t.consume(c),l}function l(c){return u(c)?(t.exit("data"),a(c)):(t.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let d=-1;if(h)for(;++d<h.length;){const f=h[d];if(!f.previous||f.previous.call(r,r.previous))return!0}return!1}}}function Y0e(n){return e;function e(t,r){let i=-1,a;for(;++i<=t.length;)a===void 0?t[i]&&t[i][1].type==="data"&&(a=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),i=a+2),a=void 0);return n?n(t,r):t}}function Gat(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let a=i.length,s=-1,o=0,l;for(;a--;){const u=i[a];if(typeof u=="string"){for(s=u.length;u.charCodeAt(s-1)===32;)o++,s--;if(s)break;s=-1}else if(u===-2)l=!0,o++;else if(u!==-1){a++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(o=0),o){const u={type:t===n.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(n.splice(t,0,["enter",u,e],["exit",u,e]),t+=2)}t++}return n}const jat={42:Co,43:Co,45:Co,48:Co,49:Co,50:Co,51:Co,52:Co,53:Co,54:Co,55:Co,56:Co,57:Co,62:z0e},Wat={91:qit},Xat={[-2]:z6,[-1]:z6,32:z6},$at={35:tat,42:WL,45:[Yae,WL],60:aat,61:Yae,95:WL,96:Xae,126:Xae},Yat={38:H0e,92:V0e},qat={[-5]:V6,[-4]:V6,[-3]:V6,33:wat,38:H0e,42:oH,60:[Eit,dat],91:Eat,92:[Jit,V0e],93:RW,95:oH,96:Fit},Kat={null:[oH,zat]},Zat={null:[42,95]},Qat={null:[]},Jat=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Zat,contentInitial:Wat,disable:Qat,document:jat,flow:$at,flowInitial:Xat,insideSpan:Kat,string:Yat,text:qat},Symbol.toStringTag,{value:"Module"}));function est(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const i={},a=[];let s=[],o=[];const l={attempt:M(E),check:M(T),consume:b,enter:S,exit:w,interrupt:M(T,{interrupt:!0})},u={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:n,previous:null,sliceSerialize:d,sliceStream:f,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&a.push(e),u;function h(R){return s=bu(s,R),g(),s[s.length-1]!==null?[]:(P(e,0),u.events=X3(a,u.events,u),u.events)}function d(R,B){return nst(f(R),B)}function f(R){return tst(s,R)}function p(){const{_bufferIndex:R,_index:B,line:k,column:V,offset:G}=r;return{_bufferIndex:R,_index:B,line:k,column:V,offset:G}}function m(R){i[R.line]=R.column,D()}function g(){let R;for(;r._index<s.length;){const B=s[r._index];if(typeof B=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<B.length;)v(B.charCodeAt(r._bufferIndex));else v(B)}}function v(R){c=c(R)}function b(R){hn(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,D()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=R}function S(R,B){const k=B||{};return k.type=R,k.start=p(),u.events.push(["enter",k,u]),o.push(k),k}function w(R){const B=o.pop();return B.end=p(),u.events.push(["exit",B,u]),B}function E(R,B){P(R,B.from)}function T(R,B){B.restore()}function M(R,B){return k;function k(V,G,F){let X,j,Q,H;return Array.isArray(V)?te(V):"tokenize"in V?te([V]):K(V);function K(se){return he;function he(fe){const Ee=fe!==null&&se[fe],Ce=fe!==null&&se.null,Re=[...Array.isArray(Ee)?Ee:Ee?[Ee]:[],...Array.isArray(Ce)?Ce:Ce?[Ce]:[]];return te(Re)(fe)}}function te(se){return X=se,j=0,se.length===0?F:Y(se[j])}function Y(se){return he;function he(fe){return H=I(),Q=se,se.partial||(u.currentConstruct=se),se.name&&u.parser.constructs.disable.null.includes(se.name)?ge():se.tokenize.call(B?Object.assign(Object.create(u),B):u,l,de,ge)(fe)}}function de(se){return R(Q,H),G}function ge(se){return H.restore(),++j<X.length?Y(X[j]):F}}}function P(R,B){R.resolveAll&&!a.includes(R)&&a.push(R),R.resolve&&kl(u.events,B,u.events.length-B,R.resolve(u.events.slice(B),u)),R.resolveTo&&(u.events=R.resolveTo(u.events,u))}function I(){const R=p(),B=u.previous,k=u.currentConstruct,V=u.events.length,G=Array.from(o);return{from:V,restore:F};function F(){r=R,u.previous=B,u.currentConstruct=k,u.events.length=V,o=G,D()}}function D(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function tst(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let s;if(t===i)s=[n[t].slice(r,a)];else{if(s=n.slice(t,i),r>-1){const o=s[0];typeof o=="string"?s[0]=o.slice(r):s.shift()}a>0&&s.push(n[i].slice(0,a))}return s}function nst(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const a=n[t];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,r.push(s)}return r.join("")}function rst(n){const r={constructs:F0e([Jat,...(n||{}).extensions||[]]),content:i(yit),defined:[],document:i(_it),flow:i(Fat),lazy:{},string:i(Vat),text:i(Hat)};return r;function i(a){return s;function s(o){return est(r,a,o)}}}function ist(n){for(;!G0e(n););return n}const qae=/[\0\t\n\r]/g;function ast(){let n=1,e="",t=!0,r;return i;function i(a,s,o){const l=[];let u,c,h,d,f;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),h=0,e="",t&&(a.charCodeAt(0)===65279&&h++,t=void 0);h<a.length;){if(qae.lastIndex=h,u=qae.exec(a),d=u&&u.index!==void 0?u.index:a.length,f=a.charCodeAt(d),!u){e=a.slice(h);break}if(f===10&&h===d&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<d&&(l.push(a.slice(h,d)),n+=d-h),f){case 0:{l.push(65533),n++;break}case 9:{for(c=Math.ceil(n/4)*4,l.push(-2);n++<c;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}h=d+1}return o&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const sst=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function ost(n){return n.replace(sst,lst)}function lst(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),a=i===120||i===88;return U0e(t.slice(a?2:1),a?16:10)}return LW(t)||n}const q0e={}.hasOwnProperty;function ust(n,e,t){return typeof e!="string"&&(t=e,e=void 0),cst(t)(ist(rst(t).document().write(ast()(n,e,!0))))}function cst(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ln),autolinkProtocol:I,autolinkEmail:I,atxHeading:a(Mt),blockQuote:a(Ce),characterEscape:I,characterReference:I,codeFenced:a(Re),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(Re,s),codeText:a(He,s),codeTextData:I,data:I,codeFlowValue:I,definition:a(pt),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(lt),hardBreakEscape:a(mt),hardBreakTrailing:a(mt),htmlFlow:a(on,s),htmlFlowData:I,htmlText:a(on,s),htmlTextData:I,image:a(ce),label:s,link:a(ln),listItem:a(Cn),listItemValue:d,listOrdered:a(gn,h),listUnordered:a(gn),paragraph:a(ht),reference:Y,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(Mt),strong:a(ie),thematicBreak:a(_e)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:Ee,autolinkProtocol:fe,blockQuote:l(),characterEscapeValue:D,characterReferenceMarkerHexadecimal:ge,characterReferenceMarkerNumeric:ge,characterReferenceValue:se,characterReference:he,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:D,codeIndented:l(v),codeText:l(G),codeTextData:D,data:D,definition:l(),definitionDestinationString:w,definitionLabelString:b,definitionTitleString:S,emphasis:l(),hardBreakEscape:l(B),hardBreakTrailing:l(B),htmlFlow:l(k),htmlFlowData:D,htmlText:l(V),htmlTextData:D,image:l(X),label:Q,labelText:j,lineEnding:R,link:l(F),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:de,resourceDestinationString:H,resourceTitleString:K,resource:te,setextHeading:l(P),setextHeadingLineSequence:M,setextHeadingText:T,strong:l(),thematicBreak:l()}};K0e(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(le){let xe={type:"root",children:[]};const we={stack:[xe],tokenStack:[],config:e,enter:o,exit:u,buffer:s,resume:c,data:t},$e=[];let Ve=-1;for(;++Ve<le.length;)if(le[Ve][1].type==="listOrdered"||le[Ve][1].type==="listUnordered")if(le[Ve][0]==="enter")$e.push(Ve);else{const ft=$e.pop();Ve=i(le,ft,Ve)}for(Ve=-1;++Ve<le.length;){const ft=e[le[Ve][0]];q0e.call(ft,le[Ve][1].type)&&ft[le[Ve][1].type].call(Object.assign({sliceSerialize:le[Ve][2].sliceSerialize},we),le[Ve][1])}if(we.tokenStack.length>0){const ft=we.tokenStack[we.tokenStack.length-1];(ft[1]||Kae).call(we,void 0,ft[0])}for(xe.position={start:$p(le.length>0?le[0][1].start:{line:1,column:1,offset:0}),end:$p(le.length>0?le[le.length-2][1].end:{line:1,column:1,offset:0})},Ve=-1;++Ve<e.transforms.length;)xe=e.transforms[Ve](xe)||xe;return xe}function i(le,xe,we){let $e=xe-1,Ve=-1,ft=!1,Vt,Ge,ot,Et;for(;++$e<=we;){const gt=le[$e];switch(gt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{gt[0]==="enter"?Ve++:Ve--,Et=void 0;break}case"lineEndingBlank":{gt[0]==="enter"&&(Vt&&!Et&&!Ve&&!ot&&(ot=$e),Et=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Et=void 0}if(!Ve&&gt[0]==="enter"&&gt[1].type==="listItemPrefix"||Ve===-1&&gt[0]==="exit"&&(gt[1].type==="listUnordered"||gt[1].type==="listOrdered")){if(Vt){let nt=$e;for(Ge=void 0;nt--;){const Zt=le[nt];if(Zt[1].type==="lineEnding"||Zt[1].type==="lineEndingBlank"){if(Zt[0]==="exit")continue;Ge&&(le[Ge][1].type="lineEndingBlank",ft=!0),Zt[1].type="lineEnding",Ge=nt}else if(!(Zt[1].type==="linePrefix"||Zt[1].type==="blockQuotePrefix"||Zt[1].type==="blockQuotePrefixWhitespace"||Zt[1].type==="blockQuoteMarker"||Zt[1].type==="listItemIndent"))break}ot&&(!Ge||ot<Ge)&&(Vt._spread=!0),Vt.end=Object.assign({},Ge?le[Ge][1].start:gt[1].end),le.splice(Ge||$e,0,["exit",Vt,gt[2]]),$e++,we++}if(gt[1].type==="listItemPrefix"){const nt={type:"listItem",_spread:!1,start:Object.assign({},gt[1].start),end:void 0};Vt=nt,le.splice($e,0,["enter",nt,gt[2]]),$e++,we++,ot=void 0,Et=!0}}}return le[xe][1]._spread=ft,we}function a(le,xe){return we;function we($e){o.call(this,le($e),$e),xe&&xe.call(this,$e)}}function s(){this.stack.push({type:"fragment",children:[]})}function o(le,xe,we){this.stack[this.stack.length-1].children.push(le),this.stack.push(le),this.tokenStack.push([xe,we||void 0]),le.position={start:$p(xe.start),end:void 0}}function l(le){return xe;function xe(we){le&&le.call(this,we),u.call(this,we)}}function u(le,xe){const we=this.stack.pop(),$e=this.tokenStack.pop();if($e)$e[0].type!==le.type&&(xe?xe.call(this,le,$e[0]):($e[1]||Kae).call(this,le,$e[0]));else throw new Error("Cannot close `"+le.type+"` ("+QE({start:le.start,end:le.end})+"): its not open");we.position.end=$p(le.end)}function c(){return PW(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(le){if(this.data.expectingFirstListItemValue){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(le),10),this.data.expectingFirstListItemValue=void 0}}function f(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=le}function p(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=le}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le.replace(/(\r?\n|\r)$/g,"")}function b(le){const xe=this.resume(),we=this.stack[this.stack.length-1];we.label=xe,we.identifier=Mc(this.sliceSerialize(le)).toLowerCase()}function S(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.title=le}function w(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.url=le}function E(le){const xe=this.stack[this.stack.length-1];if(!xe.depth){const we=this.sliceSerialize(le).length;xe.depth=we}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function M(le){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(le).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function I(le){const we=this.stack[this.stack.length-1].children;let $e=we[we.length-1];(!$e||$e.type!=="text")&&($e=Z(),$e.position={start:$p(le.start),end:void 0},we.push($e)),this.stack.push($e)}function D(le){const xe=this.stack.pop();xe.value+=this.sliceSerialize(le),xe.position.end=$p(le.end)}function R(le){const xe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const we=xe.children[xe.children.length-1];we.position.end=$p(le.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(xe.type)&&(I.call(this,le),D.call(this,le))}function B(){this.data.atHardBreak=!0}function k(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le}function V(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le}function G(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.value=le}function F(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=xe,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function X(){const le=this.stack[this.stack.length-1];if(this.data.inReference){const xe=this.data.referenceType||"shortcut";le.type+="Reference",le.referenceType=xe,delete le.url,delete le.title}else delete le.identifier,delete le.label;this.data.referenceType=void 0}function j(le){const xe=this.sliceSerialize(le),we=this.stack[this.stack.length-2];we.label=ost(xe),we.identifier=Mc(xe).toLowerCase()}function Q(){const le=this.stack[this.stack.length-1],xe=this.resume(),we=this.stack[this.stack.length-1];if(this.data.inReference=!0,we.type==="link"){const $e=le.children;we.children=$e}else we.alt=xe}function H(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.url=le}function K(){const le=this.resume(),xe=this.stack[this.stack.length-1];xe.title=le}function te(){this.data.inReference=void 0}function Y(){this.data.referenceType="collapsed"}function de(le){const xe=this.resume(),we=this.stack[this.stack.length-1];we.label=xe,we.identifier=Mc(this.sliceSerialize(le)).toLowerCase(),this.data.referenceType="full"}function ge(le){this.data.characterReferenceType=le.type}function se(le){const xe=this.sliceSerialize(le),we=this.data.characterReferenceType;let $e;we?($e=U0e(xe,we==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$e=LW(xe);const Ve=this.stack[this.stack.length-1];Ve.value+=$e}function he(le){const xe=this.stack.pop();xe.position.end=$p(le.end)}function fe(le){D.call(this,le);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(le)}function Ee(le){D.call(this,le);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(le)}function Ce(){return{type:"blockquote",children:[]}}function Re(){return{type:"code",lang:null,meta:null,value:""}}function He(){return{type:"inlineCode",value:""}}function pt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function lt(){return{type:"emphasis",children:[]}}function Mt(){return{type:"heading",depth:0,children:[]}}function mt(){return{type:"break"}}function on(){return{type:"html",value:""}}function ce(){return{type:"image",title:null,url:"",alt:null}}function ln(){return{type:"link",title:null,url:"",children:[]}}function gn(le){return{type:"list",ordered:le.type==="listOrdered",start:null,spread:le._spread,children:[]}}function Cn(le){return{type:"listItem",spread:le._spread,checked:null,children:[]}}function ht(){return{type:"paragraph",children:[]}}function ie(){return{type:"strong",children:[]}}function Z(){return{type:"text",value:""}}function _e(){return{type:"thematicBreak"}}}function $p(n){return{line:n.line,column:n.column,offset:n.offset}}function K0e(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?K0e(n,r):hst(n,r)}}function hst(n,e){let t;for(t in e)if(q0e.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function Kae(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+QE({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+QE({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+QE({start:e.start,end:e.end})+") is still open")}function dst(n){const e=this;e.parser=t;function t(r){return ust(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function fst(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function pst(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function mst(n,e){const t=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(a.data={meta:e.meta}),n.patch(e,a),a=n.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},n.patch(e,a),a}function gst(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function vst(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function yst(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=sw(r.toLowerCase()),a=n.footnoteOrder.indexOf(r);let s,o=n.footnoteCounts.get(r);o===void 0?(o=0,n.footnoteOrder.push(r),s=n.footnoteOrder.length):s=a+1,o+=1,n.footnoteCounts.set(r,o);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+i,id:t+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return n.patch(e,u),n.applyData(e,u)}function xst(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function _st(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function Z0e(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=n.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function bst(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return Z0e(n,e);const i={src:sw(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return n.patch(e,a),n.applyData(e,a)}function Sst(n,e){const t={src:sw(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function wst(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function Tst(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return Z0e(n,e);const i={href:sw(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:n.all(e)};return n.patch(e,a),n.applyData(e,a)}function Est(n,e){const t={href:sw(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function Ast(n,e,t){const r=n.all(e),i=t?Cst(t):Q0e(e),a={},s=[];if(typeof e.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const c=r[o];(i||o!==0||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?s.push(...c.children):s.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&s.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:a,children:s};return n.patch(e,u),n.applyData(e,u)}function Cst(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=Q0e(t[r])}return e}function Q0e(n){const e=n.spread;return e??n.children.length>1}function Mst(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,a),n.applyData(e,a)}function Dst(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Ist(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function Pst(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Lst(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],s),i.push(s)}if(t.length>0){const s={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},o=fd(e.children[1]),l=j3(e.children[e.children.length-1]);o&&l&&(s.position={start:o,end:l}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,a),n.applyData(e,a)}function Rst(n,e,t){const r=t?t.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",s=t&&t.type==="table"?t.align:void 0,o=s?s.length:e.children.length;let l=-1;const u=[];for(;++l<o;){const h=e.children[l],d={},f=s?s[l]:void 0;f&&(d.align=f);let p={type:"element",tagName:a,properties:d,children:[]};h&&(p.children=n.all(h),n.patch(h,p),p=n.applyData(h,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:n.wrap(u,!0)};return n.patch(e,c),n.applyData(e,c)}function Nst(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const Zae=9,Qae=32;function kst(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const a=[];for(;r;)a.push(Jae(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return a.push(Jae(e.slice(i),i>0,!1)),a.join("")}function Jae(n,e,t){let r=0,i=n.length;if(e){let a=n.codePointAt(r);for(;a===Zae||a===Qae;)r++,a=n.codePointAt(r)}if(t){let a=n.codePointAt(i-1);for(;a===Zae||a===Qae;)i--,a=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function Ost(n,e){const t={type:"text",value:kst(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function Bst(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const Fst={blockquote:fst,break:pst,code:mst,delete:gst,emphasis:vst,footnoteReference:yst,heading:xst,html:_st,imageReference:bst,image:Sst,inlineCode:wst,linkReference:Tst,link:Est,listItem:Ast,list:Mst,paragraph:Dst,root:Ist,strong:Pst,table:Lst,tableCell:Nst,tableRow:Rst,text:Ost,thematicBreak:Bst,toml:YP,yaml:YP,definition:YP,footnoteDefinition:YP};function YP(){}const J0e=-1,$3=0,eA=1,JN=2,NW=3,kW=4,OW=5,BW=6,eye=7,tye=8,ese=typeof self=="object"?self:globalThis,Ust=(n,e)=>{const t=(i,a)=>(n.set(a,i),i),r=i=>{if(n.has(i))return n.get(i);const[a,s]=e[i];switch(a){case $3:case J0e:return t(s,i);case eA:{const o=t([],i);for(const l of s)o.push(r(l));return o}case JN:{const o=t({},i);for(const[l,u]of s)o[r(l)]=r(u);return o}case NW:return t(new Date(s),i);case kW:{const{source:o,flags:l}=s;return t(new RegExp(o,l),i)}case OW:{const o=t(new Map,i);for(const[l,u]of s)o.set(r(l),r(u));return o}case BW:{const o=t(new Set,i);for(const l of s)o.add(r(l));return o}case eye:{const{name:o,message:l}=s;return t(new ese[o](l),i)}case tye:return t(BigInt(s),i);case"BigInt":return t(Object(BigInt(s)),i);case"ArrayBuffer":return t(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:o}=new Uint8Array(s);return t(new DataView(o),s)}}return t(new ese[a](s),i)};return r},tse=n=>Ust(new Map,n)(0),L_="",{toString:zst}={},{keys:Vst}=Object,OT=n=>{const e=typeof n;if(e!=="object"||!n)return[$3,e];const t=zst.call(n).slice(8,-1);switch(t){case"Array":return[eA,L_];case"Object":return[JN,L_];case"Date":return[NW,L_];case"RegExp":return[kW,L_];case"Map":return[OW,L_];case"Set":return[BW,L_];case"DataView":return[eA,t]}return t.includes("Array")?[eA,t]:t.includes("Error")?[eye,t]:[JN,t]},qP=([n,e])=>n===$3&&(e==="function"||e==="symbol"),Hst=(n,e,t,r)=>{const i=(s,o)=>{const l=r.push(s)-1;return t.set(o,l),l},a=s=>{if(t.has(s))return t.get(s);let[o,l]=OT(s);switch(o){case $3:{let c=s;switch(l){case"bigint":o=tye,c=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([J0e],s)}return i([o,c],s)}case eA:{if(l){let d=s;return l==="DataView"?d=new Uint8Array(s.buffer):l==="ArrayBuffer"&&(d=new Uint8Array(s)),i([l,[...d]],s)}const c=[],h=i([o,c],s);for(const d of s)c.push(a(d));return h}case JN:{if(l)switch(l){case"BigInt":return i([l,s.toString()],s);case"Boolean":case"Number":case"String":return i([l,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const c=[],h=i([o,c],s);for(const d of Vst(s))(n||!qP(OT(s[d])))&&c.push([a(d),a(s[d])]);return h}case NW:return i([o,s.toISOString()],s);case kW:{const{source:c,flags:h}=s;return i([o,{source:c,flags:h}],s)}case OW:{const c=[],h=i([o,c],s);for(const[d,f]of s)(n||!(qP(OT(d))||qP(OT(f))))&&c.push([a(d),a(f)]);return h}case BW:{const c=[],h=i([o,c],s);for(const d of s)(n||!qP(OT(d)))&&c.push(a(d));return h}}const{message:u}=s;return i([o,{name:l,message:u}],s)};return a},nse=(n,{json:e,lossy:t}={})=>{const r=[];return Hst(!(e||t),!!e,new Map,r)(n),r},TS=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?tse(nse(n,e)):structuredClone(n):(n,e)=>tse(nse(n,e));function Gst(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function jst(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function Wst(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||Gst,r=n.options.footnoteBackLabel||jst,i=n.options.footnoteLabel||"Footnotes",a=n.options.footnoteLabelTagName||"h2",s=n.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<n.footnoteOrder.length;){const u=n.footnoteById.get(n.footnoteOrder[l]);if(!u)continue;const c=n.all(u),h=String(u.identifier).toUpperCase(),d=sw(h.toLowerCase());let f=0;const p=[],m=n.footnoteCounts.get(h);for(;m!==void 0&&++f<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof t=="string"?t:t(l,f);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+d+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,f),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+d},children:n.wrap(c,!0)};n.patch(u,v),o.push(v)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...TS(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(o,!0)},{type:"text",value:`
`}]}}const Y3=(function(n){if(n==null)return qst;if(typeof n=="function")return q3(n);if(typeof n=="object")return Array.isArray(n)?Xst(n):$st(n);if(typeof n=="string")return Yst(n);throw new Error("Expected function, string, or object as test")});function Xst(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Y3(n[t]);return q3(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function $st(n){const e=n;return q3(t);function t(r){const i=r;let a;for(a in n)if(i[a]!==e[a])return!1;return!0}}function Yst(n){return q3(e);function e(t){return t&&t.type===n}}function q3(n){return e;function e(t,r,i){return!!(Kst(t)&&n.call(this,t,typeof r=="number"?r:void 0,i||void 0))}}function qst(){return!0}function Kst(n){return n!==null&&typeof n=="object"&&"type"in n}const nye=[],Zst=!0,lH=!1,Qst="skip";function rye(n,e,t,r){let i;typeof e=="function"&&typeof t!="function"?(r=t,t=e):i=e;const a=Y3(i),s=r?-1:1;o(n,void 0,[])();function o(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return d;function d(){let f=nye,p,m,g;if((!e||a(l,u,c[c.length-1]||void 0))&&(f=Jst(t(l,c)),f[0]===lH))return f;if("children"in l&&l.children){const v=l;if(v.children&&f[0]!==Qst)for(m=(r?v.children.length:-1)+s,g=c.concat(v);m>-1&&m<v.children.length;){const b=v.children[m];if(p=o(b,m,g)(),p[0]===lH)return p;m=typeof p[1]=="number"?p[1]:m+s}}return f}}}function Jst(n){return Array.isArray(n)?n:typeof n=="number"?[Zst,n]:n==null?nye:[n]}function K3(n,e,t,r){let i,a,s;typeof e=="function"&&typeof t!="function"?(a=void 0,s=e,i=t):(a=e,s=t,i=r),rye(n,a,o,i);function o(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return s(l,h,c)}}const uH={}.hasOwnProperty,eot={};function tot(n,e){const t=e||eot,r=new Map,i=new Map,a=new Map,s={...Fst,...t.handlers},o={all:u,applyData:rot,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:s,one:l,options:t,patch:not,wrap:aot};return K3(n,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();h.has(d)||h.set(d,c)}}),o;function l(c,h){const d=c.type,f=o.handlers[d];if(uH.call(o.handlers,d)&&f)return f(o,c,h);if(o.options.passThrough&&o.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,v=TS(g);return v.children=o.all(c),v}return TS(c)}return(o.options.unknownHandler||iot)(o,c,h)}function u(c){const h=[];if("children"in c){const d=c.children;let f=-1;for(;++f<d.length;){const p=o.one(d[f],c);if(p){if(f&&d[f-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=rse(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=rse(m.value))}Array.isArray(p)?h.push(...p):h.push(p)}}}return h}}function not(n,e){n.position&&(e.position=jrt(n))}function rot(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,a=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const s="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:s}}t.type==="element"&&a&&Object.assign(t.properties,TS(a)),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function iot(n,e){const t=e.data||{},r="value"in e&&!(uH.call(t,"hProperties")||uH.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function aot(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function rse(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function ise(n,e){const t=tot(n,e),r=t.one(n,void 0),i=Wst(t),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function sot(n,e){return n&&"run"in n?async function(t,r){const i=ise(t,{file:r,...e});await n.run(i,r)}:function(t,r){return ise(t,{file:r,...n||e})}}function ase(n){if(n)throw n}var H6,sse;function oot(){if(sse)return H6;sse=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):e.call(u)==="[object Array]"},a=function(u){if(!u||e.call(u)!=="[object Object]")return!1;var c=n.call(u,"constructor"),h=u.constructor&&u.constructor.prototype&&n.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!c&&!h)return!1;var d;for(d in u);return typeof d>"u"||n.call(u,d)},s=function(u,c){t&&c.name==="__proto__"?t(u,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):u[c.name]=c.newValue},o=function(u,c){if(c==="__proto__")if(n.call(u,c)){if(r)return r(u,c).value}else return;return u[c]};return H6=function l(){var u,c,h,d,f,p,m=arguments[0],g=1,v=arguments.length,b=!1;for(typeof m=="boolean"&&(b=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<v;++g)if(u=arguments[g],u!=null)for(c in u)h=o(m,c),d=o(u,c),m!==d&&(b&&d&&(a(d)||(f=i(d)))?(f?(f=!1,p=h&&i(h)?h:[]):p=h&&a(h)?h:{},s(m,{name:c,newValue:l(b,p,d)})):typeof d<"u"&&s(m,{name:c,newValue:d}));return m},H6}var lot=oot();const G6=i2(lot);function cH(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function uot(){const n=[],e={run:t,use:r};return e;function t(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);o(null,...i);function o(l,...u){const c=n[++a];let h=-1;if(l){s(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?cot(c,o)(...u):s(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function cot(n,e){let t;return r;function r(...s){const o=n.length>s.length;let l;o&&s.push(i);try{l=n.apply(this,s)}catch(u){const c=u;if(o&&t)throw c;return i(c)}o||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(s,...o){t||(t=!0,e(s,...o))}function a(s){i(null,s)}}const lh={basename:hot,dirname:dot,extname:fot,join:pot,sep:"/"};function hot(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');O2(n);let t=0,r=-1,i=n.length,a;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let s=-1,o=e.length-1;for(;i--;)if(n.codePointAt(i)===47){if(a){t=i+1;break}}else s<0&&(a=!0,s=i+1),o>-1&&(n.codePointAt(i)===e.codePointAt(o--)?o<0&&(r=i):(o=-1,r=s));return t===r?r=s:r<0&&(r=n.length),n.slice(t,r)}function dot(n){if(O2(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function fot(n){O2(n);let e=n.length,t=-1,r=0,i=-1,a=0,s;for(;e--;){const o=n.codePointAt(e);if(o===47){if(s){r=e+1;break}continue}t<0&&(s=!0,t=e+1),o===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||t<0||a===0||a===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function pot(...n){let e=-1,t;for(;++e<n.length;)O2(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":mot(t)}function mot(n){O2(n);const e=n.codePointAt(0)===47;let t=got(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function got(n,e){let t="",r=0,i=-1,a=0,s=-1,o,l;for(;++s<=n.length;){if(s<n.length)o=n.codePointAt(s);else{if(o===47)break;o=47}if(o===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=s,a=0;continue}}else if(t.length>0){t="",r=0,i=s,a=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,s):t=n.slice(i+1,s),r=s-i-1;i=s,a=0}else o===46&&a>-1?a++:a=-1}return t}function O2(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const vot={cwd:yot};function yot(){return"/"}function hH(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function xot(n){if(typeof n=="string")n=new URL(n);else if(!hH(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return _ot(n)}function _ot(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const j6=["history","path","basename","stem","extname","dirname"];class iye{constructor(e){let t;e?hH(e)?t={path:e}:typeof e=="string"||bot(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":vot.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<j6.length;){const a=j6[r];a in t&&t[a]!==void 0&&t[a]!==null&&(this[a]=a==="history"?[...t[a]]:t[a])}let i;for(i in t)j6.includes(i)||(this[i]=t[i])}get basename(){return typeof this.path=="string"?lh.basename(this.path):void 0}set basename(e){X6(e,"basename"),W6(e,"basename"),this.path=lh.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?lh.dirname(this.path):void 0}set dirname(e){ose(this.basename,"dirname"),this.path=lh.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?lh.extname(this.path):void 0}set extname(e){if(W6(e,"extname"),ose(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=lh.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){hH(e)&&(e=xot(e)),X6(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?lh.basename(this.path,this.extname):void 0}set stem(e){X6(e,"stem"),W6(e,"stem"),this.path=lh.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=void 0,i}message(e,t,r){const i=new Hs(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function W6(n,e){if(n&&n.includes(lh.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+lh.sep+"`")}function X6(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function ose(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function bot(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const Sot=(function(n){const r=this.constructor.prototype,i=r[n],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),wot={}.hasOwnProperty;class FW extends Sot{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=uot()}copy(){const e=new FW;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(G6(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(q6("data",this.frozen),this.namespace[e]=t,this):wot.call(this.namespace,e)&&this.namespace[e]||void 0:e?(q6("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=t.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=KP(e),r=this.parser||this.Parser;return $6("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),$6("process",this.parser||this.Parser),Y6("process",this.compiler||this.Compiler),t?i(void 0,t):new Promise(i);function i(a,s){const o=KP(e),l=r.parse(o);r.run(l,o,function(c,h,d){if(c||!h||!d)return u(c);const f=h,p=r.stringify(f,d);Aot(p)?d.value=p:d.result=p,u(c,d)});function u(c,h){c||!h?s(c):a?a(h):t(void 0,h)}}}processSync(e){let t=!1,r;return this.freeze(),$6("processSync",this.parser||this.Parser),Y6("processSync",this.compiler||this.Compiler),this.process(e,i),use("processSync","process",t),r;function i(a,s){t=!0,ase(a),r=s}}run(e,t,r){lse(e),this.freeze();const i=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?a(void 0,r):new Promise(a);function a(s,o){const l=KP(t);i.run(e,l,u);function u(c,h,d){const f=h||e;c?o(c):s?s(f):r(void 0,f,d)}}}runSync(e,t){let r=!1,i;return this.run(e,t,a),use("runSync","run",r),i;function a(s,o){ase(s),i=o,r=!0}}stringify(e,t){this.freeze();const r=KP(t),i=this.compiler||this.Compiler;return Y6("stringify",i),lse(e),i(e,r)}use(e,...t){const r=this.attachers,i=this.namespace;if(q6("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?o(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else s(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function s(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(i.settings=G6(!0,i.settings,u.settings))}function o(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];a(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,d=-1;for(;++h<r.length;)if(r[h][0]===u){d=h;break}if(d===-1)r.push([u,...c]);else if(c.length>0){let[f,...p]=c;const m=r[d][1];cH(m)&&cH(f)&&(f=G6(!0,m,f)),r[d]=[u,f,...p]}}}}const Tot=new FW().freeze();function $6(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function Y6(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function q6(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function lse(n){if(!cH(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function use(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function KP(n){return Eot(n)?n:new iye(n)}function Eot(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function Aot(n){return typeof n=="string"||Cot(n)}function Cot(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const Mot="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",cse=[],hse={allowDangerousHtml:!0},Dot=/^(https?|ircs?|mailto|xmpp)$/i,Iot=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function aye(n){const e=Pot(n),t=Lot(n);return Rot(e.runSync(e.parse(t),t),n)}function Pot(n){const e=n.rehypePlugins||cse,t=n.remarkPlugins||cse,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...hse}:hse;return Tot().use(dst).use(t).use(sot,r).use(e)}function Lot(n){const e=n.children||"",t=new iye;return typeof e=="string"&&(t.value=e),t}function Rot(n,e){const t=e.allowedElements,r=e.allowElement,i=e.components,a=e.disallowedElements,s=e.skipHtml,o=e.unwrapDisallowed,l=e.urlTransform||Not;for(const c of Iot)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+Mot+c.id,void 0);return K3(n,u),qrt(n,{Fragment:C.Fragment,components:i,ignoreInvalidStyle:!0,jsx:C.jsx,jsxs:C.jsxs,passKeys:!0,passNode:!0});function u(c,h,d){if(c.type==="raw"&&d&&typeof h=="number")return s?d.children.splice(h,1):d.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let f;for(f in U6)if(Object.hasOwn(U6,f)&&Object.hasOwn(c.properties,f)){const p=c.properties[f],m=U6[f];(m===null||m.includes(c.tagName))&&(c.properties[f]=l(String(p||""),f,c))}}if(c.type==="element"){let f=t?!t.includes(c.tagName):a?a.includes(c.tagName):!1;if(!f&&r&&typeof h=="number"&&(f=!r(c,h,d)),f&&d&&typeof h=="number")return o&&c.children?d.children.splice(h,1,...c.children):d.children.splice(h,1),h}}}function Not(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),i=n.indexOf("/");return e===-1||i!==-1&&e>i||t!==-1&&e>t||r!==-1&&e>r||Dot.test(n.slice(0,e))?n:""}const dse=/[#.]/g;function kot(n,e){const t=n||"",r={};let i=0,a,s;for(;i<t.length;){dse.lastIndex=i;const o=dse.exec(t),l=t.slice(i,o?o.index:t.length);l&&(a?a==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:s=l,i+=l.length),o&&(a=o[0],i++)}return{type:"element",tagName:s||e||"div",properties:r,children:[]}}function sye(n,e,t){const r=t?Uot(t):void 0;function i(a,s,...o){let l;if(a==null){l={type:"root",children:[]};const u=s;o.unshift(u)}else{l=kot(a,e);const u=l.tagName.toLowerCase(),c=r?r.get(u):void 0;if(l.tagName=c||u,Oot(s))o.unshift(s);else for(const[h,d]of Object.entries(s))Bot(n,l.properties,h,d)}for(const u of o)dH(l.children,u);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Oot(n){if(n===null||typeof n!="object"||Array.isArray(n))return!0;if(typeof n.type!="string")return!1;const e=n,t=Object.keys(n);for(const r of t){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const a=i;for(const s of a)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in n&&Array.isArray(n.children))}function Bot(n,e,t,r){const i=G3(n,t);let a;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;a=r}else typeof r=="boolean"?a=r:typeof r=="string"?i.spaceSeparated?a=Rae(r):i.commaSeparated?a=Mae(r):i.commaOrSpaceSeparated?a=Rae(Mae(r).join(" ")):a=fse(i,i.property,r):Array.isArray(r)?a=[...r]:a=i.property==="style"?Fot(r):String(r);if(Array.isArray(a)){const s=[];for(const o of a)s.push(fse(i,i.property,o));a=s}i.property==="className"&&Array.isArray(e.className)&&(a=e.className.concat(a)),e[i.property]=a}}function dH(n,e){if(e!=null)if(typeof e=="number"||typeof e=="string")n.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const t of e)dH(n,t);else if(typeof e=="object"&&"type"in e)e.type==="root"?dH(n,e.children):n.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function fse(n,e,t){if(typeof t=="string"){if(n.number&&t&&!Number.isNaN(Number(t)))return Number(t);if((n.boolean||n.overloadedBoolean)&&(t===""||eC(t)===eC(e)))return!0}return t}function Fot(n){const e=[];for(const[t,r]of Object.entries(n))e.push([t,r].join(": "));return e.join("; ")}function Uot(n){const e=new Map;for(const t of n)e.set(t.toLowerCase(),t);return e}const zot=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Vot=sye(N2,"div"),Hot=sye(Ug,"g",zot);function Got(n){const e=String(n),t=[];return{toOffset:i,toPoint:r};function r(a){if(typeof a=="number"&&a>-1&&a<=e.length){let s=0;for(;;){let o=t[s];if(o===void 0){const l=pse(e,t[s-1]);o=l===-1?e.length+1:l+1,t[s]=o}if(o>a)return{line:s+1,column:a-(s>0?t[s-1]:0)+1,offset:a};s++}}}function i(a){if(a&&typeof a.line=="number"&&typeof a.column=="number"&&!Number.isNaN(a.line)&&!Number.isNaN(a.column)){for(;t.length<a.line;){const o=t[t.length-1],l=pse(e,o),u=l===-1?e.length+1:l+1;if(o===u)break;t.push(u)}const s=(a.line>1?t[a.line-2]:0)+a.column-1;if(s<t[a.line-1])return s}}}function pse(n,e){const t=n.indexOf("\r",e),r=n.indexOf(`
`,e);return r===-1?t:t===-1||t+1===r?r:t<r?t:r}const p0={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},oye={}.hasOwnProperty,jot=Object.prototype;function Wot(n,e){const t=e||{};return UW({file:t.file||void 0,location:!1,schema:t.space==="svg"?Ug:N2,verbose:t.verbose||!1},n)}function UW(n,e){let t;switch(e.nodeName){case"#comment":{const r=e;return t={type:"comment",value:r.data},XL(n,r,t),t}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(t={type:"root",children:lye(n,e.childNodes),data:{quirksMode:i}},n.file&&n.location){const a=String(n.file),s=Got(a),o=s.toPoint(0),l=s.toPoint(a.length);t.position={start:o,end:l}}return t}case"#documentType":{const r=e;return t={type:"doctype"},XL(n,r,t),t}case"#text":{const r=e;return t={type:"text",value:r.value},XL(n,r,t),t}default:return t=Xot(n,e),t}}function lye(n,e){let t=-1;const r=[];for(;++t<e.length;){const i=UW(n,e[t]);r.push(i)}return r}function Xot(n,e){const t=n.schema;n.schema=e.namespaceURI===p0.svg?Ug:N2;let r=-1;const i={};for(;++r<e.attrs.length;){const o=e.attrs[r],l=(o.prefix?o.prefix+":":"")+o.name;oye.call(jot,l)||(i[l]=o.value)}const s=(n.schema.space==="svg"?Hot:Vot)(e.tagName,i,lye(n,e.childNodes));if(XL(n,e,s),s.tagName==="template"){const o=e,l=o.sourceCodeLocation,u=l&&l.startTag&&ub(l.startTag),c=l&&l.endTag&&ub(l.endTag),h=UW(n,o.content);u&&c&&n.file&&(h.position={start:u.end,end:c.start}),s.content=h}return n.schema=t,s}function XL(n,e,t){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&n.file){const r=$ot(n,t,e.sourceCodeLocation);r&&(n.location=!0,t.position=r)}}function $ot(n,e,t){const r=ub(t);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!t.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),n.verbose){const a={};let s;if(t.attrs)for(s in t.attrs)oye.call(t.attrs,s)&&(a[G3(n.schema,s).property]=ub(t.attrs[s]));t.startTag;const o=ub(t.startTag),l=t.endTag?ub(t.endTag):void 0,u={opening:o};l&&(u.closing=l),u.properties=a,e.data={position:u}}}return r}function ub(n){const e=mse({line:n.startLine,column:n.startCol,offset:n.startOffset}),t=mse({line:n.endLine,column:n.endCol,offset:n.endOffset});return e||t?{start:e,end:t}:void 0}function mse(n){return n.line&&n.column?n:void 0}const gse={}.hasOwnProperty;function uye(n,e){const t=e||{};function r(i,...a){let s=r.invalid;const o=r.handlers;if(i&&gse.call(i,n)){const l=String(i[n]);s=gse.call(o,l)?o[l]:r.unknown}if(s)return s.call(this,i,...a)}return r.handlers=t.handlers||{},r.invalid=t.invalid,r.unknown=t.unknown,r}const Yot={},qot={}.hasOwnProperty,cye=uye("type",{handlers:{root:Zot,element:nlt,text:elt,comment:tlt,doctype:Jot}});function Kot(n,e){const r=(e||Yot).space;return cye(n,r==="svg"?Ug:N2)}function Zot(n,e){const t={nodeName:"#document",mode:(n.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return t.childNodes=zW(n.children,t,e),ow(n,t),t}function Qot(n,e){const t={nodeName:"#document-fragment",childNodes:[]};return t.childNodes=zW(n.children,t,e),ow(n,t),t}function Jot(n){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return ow(n,e),e}function elt(n){const e={nodeName:"#text",value:n.value,parentNode:null};return ow(n,e),e}function tlt(n){const e={nodeName:"#comment",data:n.value,parentNode:null};return ow(n,e),e}function nlt(n,e){const t=e;let r=t;n.type==="element"&&n.tagName.toLowerCase()==="svg"&&t.space==="html"&&(r=Ug);const i=[];let a;if(n.properties){for(a in n.properties)if(a!=="children"&&qot.call(n.properties,a)){const l=rlt(r,a,n.properties[a]);l&&i.push(l)}}const s=r.space,o={nodeName:n.tagName,tagName:n.tagName,attrs:i,namespaceURI:p0[s],childNodes:[],parentNode:null};return o.childNodes=zW(n.children,o,r),ow(n,o),n.tagName==="template"&&n.content&&(o.content=Qot(n.content,r)),o}function rlt(n,e,t){const r=G3(n,e);if(t===!1||t===null||t===void 0||typeof t=="number"&&Number.isNaN(t)||!t&&r.boolean)return;Array.isArray(t)&&(t=r.commaSeparated?w0e(t):P0e(t));const i={name:r.attribute,value:t===!0?"":String(t)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const a=i.name.indexOf(":");a<0?i.prefix="":(i.name=i.name.slice(a+1),i.prefix=r.attribute.slice(0,a)),i.namespace=p0[r.space]}return i}function zW(n,e,t){let r=-1;const i=[];if(n)for(;++r<n.length;){const a=cye(n[r],t);a.parentNode=e,i.push(a)}return i}function ow(n,e){const t=n.position;t&&t.start&&t.end&&(t.start.offset,t.end.offset,e.sourceCodeLocation={startLine:t.start.line,startCol:t.start.column,startOffset:t.start.offset,endLine:t.end.line,endCol:t.end.column,endOffset:t.end.offset})}const ilt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],alt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ui="";var re;(function(n){n[n.EOF=-1]="EOF",n[n.NULL=0]="NULL",n[n.TABULATION=9]="TABULATION",n[n.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",n[n.LINE_FEED=10]="LINE_FEED",n[n.FORM_FEED=12]="FORM_FEED",n[n.SPACE=32]="SPACE",n[n.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",n[n.QUOTATION_MARK=34]="QUOTATION_MARK",n[n.AMPERSAND=38]="AMPERSAND",n[n.APOSTROPHE=39]="APOSTROPHE",n[n.HYPHEN_MINUS=45]="HYPHEN_MINUS",n[n.SOLIDUS=47]="SOLIDUS",n[n.DIGIT_0=48]="DIGIT_0",n[n.DIGIT_9=57]="DIGIT_9",n[n.SEMICOLON=59]="SEMICOLON",n[n.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",n[n.EQUALS_SIGN=61]="EQUALS_SIGN",n[n.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",n[n.QUESTION_MARK=63]="QUESTION_MARK",n[n.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",n[n.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",n[n.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",n[n.GRAVE_ACCENT=96]="GRAVE_ACCENT",n[n.LATIN_SMALL_A=97]="LATIN_SMALL_A",n[n.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(re||(re={}));const Ao={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function hye(n){return n>=55296&&n<=57343}function slt(n){return n>=56320&&n<=57343}function olt(n,e){return(n-55296)*1024+9216+e}function dye(n){return n!==32&&n!==10&&n!==13&&n!==9&&n!==12&&n>=1&&n<=31||n>=127&&n<=159}function fye(n){return n>=64976&&n<=65007||alt.has(n)}var ze;(function(n){n.controlCharacterInInputStream="control-character-in-input-stream",n.noncharacterInInputStream="noncharacter-in-input-stream",n.surrogateInInputStream="surrogate-in-input-stream",n.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",n.endTagWithAttributes="end-tag-with-attributes",n.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",n.unexpectedSolidusInTag="unexpected-solidus-in-tag",n.unexpectedNullCharacter="unexpected-null-character",n.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",n.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",n.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",n.missingEndTagName="missing-end-tag-name",n.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",n.unknownNamedCharacterReference="unknown-named-character-reference",n.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",n.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",n.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",n.eofBeforeTagName="eof-before-tag-name",n.eofInTag="eof-in-tag",n.missingAttributeValue="missing-attribute-value",n.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",n.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",n.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",n.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",n.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",n.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",n.missingDoctypePublicIdentifier="missing-doctype-public-identifier",n.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",n.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",n.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",n.cdataInHtmlContent="cdata-in-html-content",n.incorrectlyOpenedComment="incorrectly-opened-comment",n.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",n.eofInDoctype="eof-in-doctype",n.nestedComment="nested-comment",n.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",n.eofInComment="eof-in-comment",n.incorrectlyClosedComment="incorrectly-closed-comment",n.eofInCdata="eof-in-cdata",n.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",n.nullCharacterReference="null-character-reference",n.surrogateCharacterReference="surrogate-character-reference",n.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",n.controlCharacterReference="control-character-reference",n.noncharacterCharacterReference="noncharacter-character-reference",n.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",n.missingDoctypeName="missing-doctype-name",n.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",n.duplicateAttribute="duplicate-attribute",n.nonConformingDoctype="non-conforming-doctype",n.missingDoctype="missing-doctype",n.misplacedDoctype="misplaced-doctype",n.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",n.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",n.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",n.openElementsLeftAfterEof="open-elements-left-after-eof",n.abandonedHeadElementChild="abandoned-head-element-child",n.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",n.nestedNoscriptInHead="nested-noscript-in-head",n.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ze||(ze={}));const llt=65536;class ult{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=llt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,t){const{line:r,col:i,offset:a}=this,s=i+t,o=a+t;return{code:e,startLine:r,endLine:r,startCol:s,endCol:s,startOffset:o,endOffset:o}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(slt(t))return this.pos++,this._addGap(),olt(e,t)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,re.EOF;return this._err(ze.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,re.EOF;const r=this.html.charCodeAt(t);return r===re.CARRIAGE_RETURN?re.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,re.EOF;let e=this.html.charCodeAt(this.pos);return e===re.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,re.LINE_FEED):e===re.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,hye(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===re.LINE_FEED||e===re.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){dye(e)?this._err(ze.controlCharacterInInputStream):fye(e)&&this._err(ze.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var qn;(function(n){n[n.CHARACTER=0]="CHARACTER",n[n.NULL_CHARACTER=1]="NULL_CHARACTER",n[n.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",n[n.START_TAG=3]="START_TAG",n[n.END_TAG=4]="END_TAG",n[n.COMMENT=5]="COMMENT",n[n.DOCTYPE=6]="DOCTYPE",n[n.EOF=7]="EOF",n[n.HIBERNATION=8]="HIBERNATION"})(qn||(qn={}));function pye(n,e){for(let t=n.attrs.length-1;t>=0;t--)if(n.attrs[t].name===e)return n.attrs[t].value;return null}const clt=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(n=>n.charCodeAt(0))),hlt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function dlt(n){var e;return n>=55296&&n<=57343||n>1114111?65533:(e=hlt.get(n))!==null&&e!==void 0?e:n}var $a;(function(n){n[n.NUM=35]="NUM",n[n.SEMI=59]="SEMI",n[n.EQUALS=61]="EQUALS",n[n.ZERO=48]="ZERO",n[n.NINE=57]="NINE",n[n.LOWER_A=97]="LOWER_A",n[n.LOWER_F=102]="LOWER_F",n[n.LOWER_X=120]="LOWER_X",n[n.LOWER_Z=122]="LOWER_Z",n[n.UPPER_A=65]="UPPER_A",n[n.UPPER_F=70]="UPPER_F",n[n.UPPER_Z=90]="UPPER_Z"})($a||($a={}));const flt=32;var cg;(function(n){n[n.VALUE_LENGTH=49152]="VALUE_LENGTH",n[n.BRANCH_LENGTH=16256]="BRANCH_LENGTH",n[n.JUMP_TABLE=127]="JUMP_TABLE"})(cg||(cg={}));function fH(n){return n>=$a.ZERO&&n<=$a.NINE}function plt(n){return n>=$a.UPPER_A&&n<=$a.UPPER_F||n>=$a.LOWER_A&&n<=$a.LOWER_F}function mlt(n){return n>=$a.UPPER_A&&n<=$a.UPPER_Z||n>=$a.LOWER_A&&n<=$a.LOWER_Z||fH(n)}function glt(n){return n===$a.EQUALS||mlt(n)}var Ba;(function(n){n[n.EntityStart=0]="EntityStart",n[n.NumericStart=1]="NumericStart",n[n.NumericDecimal=2]="NumericDecimal",n[n.NumericHex=3]="NumericHex",n[n.NamedEntity=4]="NamedEntity"})(Ba||(Ba={}));var Cf;(function(n){n[n.Legacy=0]="Legacy",n[n.Strict=1]="Strict",n[n.Attribute=2]="Attribute"})(Cf||(Cf={}));class vlt{constructor(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=Ba.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Cf.Strict}startEntity(e){this.decodeMode=e,this.state=Ba.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case Ba.EntityStart:return e.charCodeAt(t)===$a.NUM?(this.state=Ba.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=Ba.NamedEntity,this.stateNamedEntity(e,t));case Ba.NumericStart:return this.stateNumericStart(e,t);case Ba.NumericDecimal:return this.stateNumericDecimal(e,t);case Ba.NumericHex:return this.stateNumericHex(e,t);case Ba.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(e.charCodeAt(t)|flt)===$a.LOWER_X?(this.state=Ba.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=Ba.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,r,i){if(t!==r){const a=r-t;this.result=this.result*Math.pow(i,a)+Number.parseInt(e.substr(t,a),i),this.consumed+=a}}stateNumericHex(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(fH(i)||plt(i))t+=1;else return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,t,16),-1}stateNumericDecimal(e,t){const r=t;for(;t<e.length;){const i=e.charCodeAt(t);if(fH(i))t+=1;else return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,t,10),-1}emitNumericEntity(e,t){var r;if(this.consumed<=t)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===$a.SEMI)this.consumed+=1;else if(this.decodeMode===Cf.Strict)return 0;return this.emitCodePoint(dlt(this.result),this.consumed),this.errors&&(e!==$a.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:r}=this;let i=r[this.treeIndex],a=(i&cg.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const s=e.charCodeAt(t);if(this.treeIndex=ylt(r,i,this.treeIndex+Math.max(1,a),s),this.treeIndex<0)return this.result===0||this.decodeMode===Cf.Attribute&&(a===0||glt(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],a=(i&cg.VALUE_LENGTH)>>14,a!==0){if(s===$a.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==Cf.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:r}=this,i=(r[t]&cg.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,r){const{decodeTree:i}=this;return this.emitCodePoint(t===1?i[e]&~cg.VALUE_LENGTH:i[e+1],r),t===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Ba.NamedEntity:return this.result!==0&&(this.decodeMode!==Cf.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ba.NumericDecimal:return this.emitNumericEntity(0,2);case Ba.NumericHex:return this.emitNumericEntity(0,3);case Ba.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ba.EntityStart:return 0}}}function ylt(n,e,t,r){const i=(e&cg.BRANCH_LENGTH)>>7,a=e&cg.JUMP_TABLE;if(i===0)return a!==0&&r===a?t:-1;if(a){const l=r-a;return l<0||l>=i?-1:n[t+l]-1}let s=t,o=s+i-1;for(;s<=o;){const l=s+o>>>1,u=n[l];if(u<r)s=l+1;else if(u>r)o=l-1;else return n[l+i]}return-1}var We;(function(n){n.HTML="http://www.w3.org/1999/xhtml",n.MATHML="http://www.w3.org/1998/Math/MathML",n.SVG="http://www.w3.org/2000/svg",n.XLINK="http://www.w3.org/1999/xlink",n.XML="http://www.w3.org/XML/1998/namespace",n.XMLNS="http://www.w3.org/2000/xmlns/"})(We||(We={}));var By;(function(n){n.TYPE="type",n.ACTION="action",n.ENCODING="encoding",n.PROMPT="prompt",n.NAME="name",n.COLOR="color",n.FACE="face",n.SIZE="size"})(By||(By={}));var Su;(function(n){n.NO_QUIRKS="no-quirks",n.QUIRKS="quirks",n.LIMITED_QUIRKS="limited-quirks"})(Su||(Su={}));var Me;(function(n){n.A="a",n.ADDRESS="address",n.ANNOTATION_XML="annotation-xml",n.APPLET="applet",n.AREA="area",n.ARTICLE="article",n.ASIDE="aside",n.B="b",n.BASE="base",n.BASEFONT="basefont",n.BGSOUND="bgsound",n.BIG="big",n.BLOCKQUOTE="blockquote",n.BODY="body",n.BR="br",n.BUTTON="button",n.CAPTION="caption",n.CENTER="center",n.CODE="code",n.COL="col",n.COLGROUP="colgroup",n.DD="dd",n.DESC="desc",n.DETAILS="details",n.DIALOG="dialog",n.DIR="dir",n.DIV="div",n.DL="dl",n.DT="dt",n.EM="em",n.EMBED="embed",n.FIELDSET="fieldset",n.FIGCAPTION="figcaption",n.FIGURE="figure",n.FONT="font",n.FOOTER="footer",n.FOREIGN_OBJECT="foreignObject",n.FORM="form",n.FRAME="frame",n.FRAMESET="frameset",n.H1="h1",n.H2="h2",n.H3="h3",n.H4="h4",n.H5="h5",n.H6="h6",n.HEAD="head",n.HEADER="header",n.HGROUP="hgroup",n.HR="hr",n.HTML="html",n.I="i",n.IMG="img",n.IMAGE="image",n.INPUT="input",n.IFRAME="iframe",n.KEYGEN="keygen",n.LABEL="label",n.LI="li",n.LINK="link",n.LISTING="listing",n.MAIN="main",n.MALIGNMARK="malignmark",n.MARQUEE="marquee",n.MATH="math",n.MENU="menu",n.META="meta",n.MGLYPH="mglyph",n.MI="mi",n.MO="mo",n.MN="mn",n.MS="ms",n.MTEXT="mtext",n.NAV="nav",n.NOBR="nobr",n.NOFRAMES="noframes",n.NOEMBED="noembed",n.NOSCRIPT="noscript",n.OBJECT="object",n.OL="ol",n.OPTGROUP="optgroup",n.OPTION="option",n.P="p",n.PARAM="param",n.PLAINTEXT="plaintext",n.PRE="pre",n.RB="rb",n.RP="rp",n.RT="rt",n.RTC="rtc",n.RUBY="ruby",n.S="s",n.SCRIPT="script",n.SEARCH="search",n.SECTION="section",n.SELECT="select",n.SOURCE="source",n.SMALL="small",n.SPAN="span",n.STRIKE="strike",n.STRONG="strong",n.STYLE="style",n.SUB="sub",n.SUMMARY="summary",n.SUP="sup",n.TABLE="table",n.TBODY="tbody",n.TEMPLATE="template",n.TEXTAREA="textarea",n.TFOOT="tfoot",n.TD="td",n.TH="th",n.THEAD="thead",n.TITLE="title",n.TR="tr",n.TRACK="track",n.TT="tt",n.U="u",n.UL="ul",n.SVG="svg",n.VAR="var",n.WBR="wbr",n.XMP="xmp"})(Me||(Me={}));var N;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.A=1]="A",n[n.ADDRESS=2]="ADDRESS",n[n.ANNOTATION_XML=3]="ANNOTATION_XML",n[n.APPLET=4]="APPLET",n[n.AREA=5]="AREA",n[n.ARTICLE=6]="ARTICLE",n[n.ASIDE=7]="ASIDE",n[n.B=8]="B",n[n.BASE=9]="BASE",n[n.BASEFONT=10]="BASEFONT",n[n.BGSOUND=11]="BGSOUND",n[n.BIG=12]="BIG",n[n.BLOCKQUOTE=13]="BLOCKQUOTE",n[n.BODY=14]="BODY",n[n.BR=15]="BR",n[n.BUTTON=16]="BUTTON",n[n.CAPTION=17]="CAPTION",n[n.CENTER=18]="CENTER",n[n.CODE=19]="CODE",n[n.COL=20]="COL",n[n.COLGROUP=21]="COLGROUP",n[n.DD=22]="DD",n[n.DESC=23]="DESC",n[n.DETAILS=24]="DETAILS",n[n.DIALOG=25]="DIALOG",n[n.DIR=26]="DIR",n[n.DIV=27]="DIV",n[n.DL=28]="DL",n[n.DT=29]="DT",n[n.EM=30]="EM",n[n.EMBED=31]="EMBED",n[n.FIELDSET=32]="FIELDSET",n[n.FIGCAPTION=33]="FIGCAPTION",n[n.FIGURE=34]="FIGURE",n[n.FONT=35]="FONT",n[n.FOOTER=36]="FOOTER",n[n.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",n[n.FORM=38]="FORM",n[n.FRAME=39]="FRAME",n[n.FRAMESET=40]="FRAMESET",n[n.H1=41]="H1",n[n.H2=42]="H2",n[n.H3=43]="H3",n[n.H4=44]="H4",n[n.H5=45]="H5",n[n.H6=46]="H6",n[n.HEAD=47]="HEAD",n[n.HEADER=48]="HEADER",n[n.HGROUP=49]="HGROUP",n[n.HR=50]="HR",n[n.HTML=51]="HTML",n[n.I=52]="I",n[n.IMG=53]="IMG",n[n.IMAGE=54]="IMAGE",n[n.INPUT=55]="INPUT",n[n.IFRAME=56]="IFRAME",n[n.KEYGEN=57]="KEYGEN",n[n.LABEL=58]="LABEL",n[n.LI=59]="LI",n[n.LINK=60]="LINK",n[n.LISTING=61]="LISTING",n[n.MAIN=62]="MAIN",n[n.MALIGNMARK=63]="MALIGNMARK",n[n.MARQUEE=64]="MARQUEE",n[n.MATH=65]="MATH",n[n.MENU=66]="MENU",n[n.META=67]="META",n[n.MGLYPH=68]="MGLYPH",n[n.MI=69]="MI",n[n.MO=70]="MO",n[n.MN=71]="MN",n[n.MS=72]="MS",n[n.MTEXT=73]="MTEXT",n[n.NAV=74]="NAV",n[n.NOBR=75]="NOBR",n[n.NOFRAMES=76]="NOFRAMES",n[n.NOEMBED=77]="NOEMBED",n[n.NOSCRIPT=78]="NOSCRIPT",n[n.OBJECT=79]="OBJECT",n[n.OL=80]="OL",n[n.OPTGROUP=81]="OPTGROUP",n[n.OPTION=82]="OPTION",n[n.P=83]="P",n[n.PARAM=84]="PARAM",n[n.PLAINTEXT=85]="PLAINTEXT",n[n.PRE=86]="PRE",n[n.RB=87]="RB",n[n.RP=88]="RP",n[n.RT=89]="RT",n[n.RTC=90]="RTC",n[n.RUBY=91]="RUBY",n[n.S=92]="S",n[n.SCRIPT=93]="SCRIPT",n[n.SEARCH=94]="SEARCH",n[n.SECTION=95]="SECTION",n[n.SELECT=96]="SELECT",n[n.SOURCE=97]="SOURCE",n[n.SMALL=98]="SMALL",n[n.SPAN=99]="SPAN",n[n.STRIKE=100]="STRIKE",n[n.STRONG=101]="STRONG",n[n.STYLE=102]="STYLE",n[n.SUB=103]="SUB",n[n.SUMMARY=104]="SUMMARY",n[n.SUP=105]="SUP",n[n.TABLE=106]="TABLE",n[n.TBODY=107]="TBODY",n[n.TEMPLATE=108]="TEMPLATE",n[n.TEXTAREA=109]="TEXTAREA",n[n.TFOOT=110]="TFOOT",n[n.TD=111]="TD",n[n.TH=112]="TH",n[n.THEAD=113]="THEAD",n[n.TITLE=114]="TITLE",n[n.TR=115]="TR",n[n.TRACK=116]="TRACK",n[n.TT=117]="TT",n[n.U=118]="U",n[n.UL=119]="UL",n[n.SVG=120]="SVG",n[n.VAR=121]="VAR",n[n.WBR=122]="WBR",n[n.XMP=123]="XMP"})(N||(N={}));const xlt=new Map([[Me.A,N.A],[Me.ADDRESS,N.ADDRESS],[Me.ANNOTATION_XML,N.ANNOTATION_XML],[Me.APPLET,N.APPLET],[Me.AREA,N.AREA],[Me.ARTICLE,N.ARTICLE],[Me.ASIDE,N.ASIDE],[Me.B,N.B],[Me.BASE,N.BASE],[Me.BASEFONT,N.BASEFONT],[Me.BGSOUND,N.BGSOUND],[Me.BIG,N.BIG],[Me.BLOCKQUOTE,N.BLOCKQUOTE],[Me.BODY,N.BODY],[Me.BR,N.BR],[Me.BUTTON,N.BUTTON],[Me.CAPTION,N.CAPTION],[Me.CENTER,N.CENTER],[Me.CODE,N.CODE],[Me.COL,N.COL],[Me.COLGROUP,N.COLGROUP],[Me.DD,N.DD],[Me.DESC,N.DESC],[Me.DETAILS,N.DETAILS],[Me.DIALOG,N.DIALOG],[Me.DIR,N.DIR],[Me.DIV,N.DIV],[Me.DL,N.DL],[Me.DT,N.DT],[Me.EM,N.EM],[Me.EMBED,N.EMBED],[Me.FIELDSET,N.FIELDSET],[Me.FIGCAPTION,N.FIGCAPTION],[Me.FIGURE,N.FIGURE],[Me.FONT,N.FONT],[Me.FOOTER,N.FOOTER],[Me.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[Me.FORM,N.FORM],[Me.FRAME,N.FRAME],[Me.FRAMESET,N.FRAMESET],[Me.H1,N.H1],[Me.H2,N.H2],[Me.H3,N.H3],[Me.H4,N.H4],[Me.H5,N.H5],[Me.H6,N.H6],[Me.HEAD,N.HEAD],[Me.HEADER,N.HEADER],[Me.HGROUP,N.HGROUP],[Me.HR,N.HR],[Me.HTML,N.HTML],[Me.I,N.I],[Me.IMG,N.IMG],[Me.IMAGE,N.IMAGE],[Me.INPUT,N.INPUT],[Me.IFRAME,N.IFRAME],[Me.KEYGEN,N.KEYGEN],[Me.LABEL,N.LABEL],[Me.LI,N.LI],[Me.LINK,N.LINK],[Me.LISTING,N.LISTING],[Me.MAIN,N.MAIN],[Me.MALIGNMARK,N.MALIGNMARK],[Me.MARQUEE,N.MARQUEE],[Me.MATH,N.MATH],[Me.MENU,N.MENU],[Me.META,N.META],[Me.MGLYPH,N.MGLYPH],[Me.MI,N.MI],[Me.MO,N.MO],[Me.MN,N.MN],[Me.MS,N.MS],[Me.MTEXT,N.MTEXT],[Me.NAV,N.NAV],[Me.NOBR,N.NOBR],[Me.NOFRAMES,N.NOFRAMES],[Me.NOEMBED,N.NOEMBED],[Me.NOSCRIPT,N.NOSCRIPT],[Me.OBJECT,N.OBJECT],[Me.OL,N.OL],[Me.OPTGROUP,N.OPTGROUP],[Me.OPTION,N.OPTION],[Me.P,N.P],[Me.PARAM,N.PARAM],[Me.PLAINTEXT,N.PLAINTEXT],[Me.PRE,N.PRE],[Me.RB,N.RB],[Me.RP,N.RP],[Me.RT,N.RT],[Me.RTC,N.RTC],[Me.RUBY,N.RUBY],[Me.S,N.S],[Me.SCRIPT,N.SCRIPT],[Me.SEARCH,N.SEARCH],[Me.SECTION,N.SECTION],[Me.SELECT,N.SELECT],[Me.SOURCE,N.SOURCE],[Me.SMALL,N.SMALL],[Me.SPAN,N.SPAN],[Me.STRIKE,N.STRIKE],[Me.STRONG,N.STRONG],[Me.STYLE,N.STYLE],[Me.SUB,N.SUB],[Me.SUMMARY,N.SUMMARY],[Me.SUP,N.SUP],[Me.TABLE,N.TABLE],[Me.TBODY,N.TBODY],[Me.TEMPLATE,N.TEMPLATE],[Me.TEXTAREA,N.TEXTAREA],[Me.TFOOT,N.TFOOT],[Me.TD,N.TD],[Me.TH,N.TH],[Me.THEAD,N.THEAD],[Me.TITLE,N.TITLE],[Me.TR,N.TR],[Me.TRACK,N.TRACK],[Me.TT,N.TT],[Me.U,N.U],[Me.UL,N.UL],[Me.SVG,N.SVG],[Me.VAR,N.VAR],[Me.WBR,N.WBR],[Me.XMP,N.XMP]]);function lw(n){var e;return(e=xlt.get(n))!==null&&e!==void 0?e:N.UNKNOWN}const et=N,_lt={[We.HTML]:new Set([et.ADDRESS,et.APPLET,et.AREA,et.ARTICLE,et.ASIDE,et.BASE,et.BASEFONT,et.BGSOUND,et.BLOCKQUOTE,et.BODY,et.BR,et.BUTTON,et.CAPTION,et.CENTER,et.COL,et.COLGROUP,et.DD,et.DETAILS,et.DIR,et.DIV,et.DL,et.DT,et.EMBED,et.FIELDSET,et.FIGCAPTION,et.FIGURE,et.FOOTER,et.FORM,et.FRAME,et.FRAMESET,et.H1,et.H2,et.H3,et.H4,et.H5,et.H6,et.HEAD,et.HEADER,et.HGROUP,et.HR,et.HTML,et.IFRAME,et.IMG,et.INPUT,et.LI,et.LINK,et.LISTING,et.MAIN,et.MARQUEE,et.MENU,et.META,et.NAV,et.NOEMBED,et.NOFRAMES,et.NOSCRIPT,et.OBJECT,et.OL,et.P,et.PARAM,et.PLAINTEXT,et.PRE,et.SCRIPT,et.SECTION,et.SELECT,et.SOURCE,et.STYLE,et.SUMMARY,et.TABLE,et.TBODY,et.TD,et.TEMPLATE,et.TEXTAREA,et.TFOOT,et.TH,et.THEAD,et.TITLE,et.TR,et.TRACK,et.UL,et.WBR,et.XMP]),[We.MATHML]:new Set([et.MI,et.MO,et.MN,et.MS,et.MTEXT,et.ANNOTATION_XML]),[We.SVG]:new Set([et.TITLE,et.FOREIGN_OBJECT,et.DESC]),[We.XLINK]:new Set,[We.XML]:new Set,[We.XMLNS]:new Set},pH=new Set([et.H1,et.H2,et.H3,et.H4,et.H5,et.H6]);Me.STYLE,Me.SCRIPT,Me.XMP,Me.IFRAME,Me.NOEMBED,Me.NOFRAMES,Me.PLAINTEXT;var ae;(function(n){n[n.DATA=0]="DATA",n[n.RCDATA=1]="RCDATA",n[n.RAWTEXT=2]="RAWTEXT",n[n.SCRIPT_DATA=3]="SCRIPT_DATA",n[n.PLAINTEXT=4]="PLAINTEXT",n[n.TAG_OPEN=5]="TAG_OPEN",n[n.END_TAG_OPEN=6]="END_TAG_OPEN",n[n.TAG_NAME=7]="TAG_NAME",n[n.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",n[n.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",n[n.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",n[n.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",n[n.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",n[n.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",n[n.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",n[n.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",n[n.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",n[n.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",n[n.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",n[n.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",n[n.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",n[n.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",n[n.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",n[n.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",n[n.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",n[n.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",n[n.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",n[n.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",n[n.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",n[n.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",n[n.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",n[n.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",n[n.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",n[n.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",n[n.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",n[n.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",n[n.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",n[n.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",n[n.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",n[n.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",n[n.BOGUS_COMMENT=40]="BOGUS_COMMENT",n[n.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",n[n.COMMENT_START=42]="COMMENT_START",n[n.COMMENT_START_DASH=43]="COMMENT_START_DASH",n[n.COMMENT=44]="COMMENT",n[n.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",n[n.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",n[n.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",n[n.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",n[n.COMMENT_END_DASH=49]="COMMENT_END_DASH",n[n.COMMENT_END=50]="COMMENT_END",n[n.COMMENT_END_BANG=51]="COMMENT_END_BANG",n[n.DOCTYPE=52]="DOCTYPE",n[n.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",n[n.DOCTYPE_NAME=54]="DOCTYPE_NAME",n[n.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",n[n.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",n[n.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",n[n.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",n[n.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",n[n.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",n[n.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",n[n.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",n[n.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",n[n.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",n[n.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",n[n.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",n[n.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",n[n.CDATA_SECTION=68]="CDATA_SECTION",n[n.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",n[n.CDATA_SECTION_END=70]="CDATA_SECTION_END",n[n.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",n[n.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(ae||(ae={}));const ji={DATA:ae.DATA,RCDATA:ae.RCDATA,RAWTEXT:ae.RAWTEXT,SCRIPT_DATA:ae.SCRIPT_DATA,PLAINTEXT:ae.PLAINTEXT,CDATA_SECTION:ae.CDATA_SECTION};function blt(n){return n>=re.DIGIT_0&&n<=re.DIGIT_9}function oE(n){return n>=re.LATIN_CAPITAL_A&&n<=re.LATIN_CAPITAL_Z}function Slt(n){return n>=re.LATIN_SMALL_A&&n<=re.LATIN_SMALL_Z}function Qp(n){return Slt(n)||oE(n)}function vse(n){return Qp(n)||blt(n)}function ZP(n){return n+32}function mye(n){return n===re.SPACE||n===re.LINE_FEED||n===re.TABULATION||n===re.FORM_FEED}function yse(n){return mye(n)||n===re.SOLIDUS||n===re.GREATER_THAN_SIGN}function wlt(n){return n===re.NULL?ze.nullCharacterReference:n>1114111?ze.characterReferenceOutsideUnicodeRange:hye(n)?ze.surrogateCharacterReference:fye(n)?ze.noncharacterCharacterReference:dye(n)||n===re.CARRIAGE_RETURN?ze.controlCharacterReference:null}class Tlt{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ae.DATA,this.returnState=ae.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new ult(t),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new vlt(clt,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},t.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ze.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(ze.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=wlt(r);i&&this._err(i,1)}}:void 0)}_err(e,t=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(e,t))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e==null||e())}write(e,t,r){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return this.preprocessor.startsWith(e,t)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:qn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:qn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:qn.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:qn.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const r=this.currentToken;if(pye(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(t=r.location).attrs)!==null&&e!==void 0?e:t.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ze.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=lw(e.tagName),e.type===qn.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(ze.endTagWithAttributes),e.selfClosing&&this._err(ze.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case qn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case qn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case qn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:qn.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=t;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,t)}_emitCodePoint(e){const t=mye(e)?qn.WHITESPACE_CHARACTER:e===re.NULL?qn.NULL_CHARACTER:qn.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(qn.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=ae.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Cf.Attribute:Cf.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ae.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ae.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case ae.DATA:{this._stateData(e);break}case ae.RCDATA:{this._stateRcdata(e);break}case ae.RAWTEXT:{this._stateRawtext(e);break}case ae.SCRIPT_DATA:{this._stateScriptData(e);break}case ae.PLAINTEXT:{this._statePlaintext(e);break}case ae.TAG_OPEN:{this._stateTagOpen(e);break}case ae.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case ae.TAG_NAME:{this._stateTagName(e);break}case ae.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case ae.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case ae.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case ae.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case ae.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case ae.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case ae.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case ae.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case ae.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case ae.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case ae.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case ae.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case ae.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case ae.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case ae.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case ae.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case ae.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case ae.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case ae.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case ae.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case ae.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case ae.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case ae.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case ae.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case ae.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case ae.BOGUS_COMMENT:{this._stateBogusComment(e);break}case ae.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case ae.COMMENT_START:{this._stateCommentStart(e);break}case ae.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case ae.COMMENT:{this._stateComment(e);break}case ae.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case ae.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case ae.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case ae.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case ae.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case ae.COMMENT_END:{this._stateCommentEnd(e);break}case ae.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case ae.DOCTYPE:{this._stateDoctype(e);break}case ae.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case ae.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case ae.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case ae.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case ae.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case ae.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case ae.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case ae.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case ae.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case ae.CDATA_SECTION:{this._stateCdataSection(e);break}case ae.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case ae.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case ae.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case ae.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case re.LESS_THAN_SIGN:{this.state=ae.TAG_OPEN;break}case re.AMPERSAND:{this._startCharacterReference();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitCodePoint(e);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case re.AMPERSAND:{this._startCharacterReference();break}case re.LESS_THAN_SIGN:{this.state=ae.RCDATA_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ui);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case re.LESS_THAN_SIGN:{this.state=ae.RAWTEXT_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ui);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case re.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ui);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ui);break}case re.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Qp(e))this._createStartTagToken(),this.state=ae.TAG_NAME,this._stateTagName(e);else switch(e){case re.EXCLAMATION_MARK:{this.state=ae.MARKUP_DECLARATION_OPEN;break}case re.SOLIDUS:{this.state=ae.END_TAG_OPEN;break}case re.QUESTION_MARK:{this._err(ze.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(e);break}case re.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ae.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Qp(e))this._createEndTagToken(),this.state=ae.TAG_NAME,this._stateTagName(e);else switch(e){case re.GREATER_THAN_SIGN:{this._err(ze.missingEndTagName),this.state=ae.DATA;break}case re.EOF:{this._err(ze.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ze.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case re.SOLIDUS:{this.state=ae.SELF_CLOSING_START_TAG;break}case re.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentTagToken();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.tagName+=ui;break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:t.tagName+=String.fromCodePoint(oE(e)?ZP(e):e)}}_stateRcdataLessThanSign(e){e===re.SOLIDUS?this.state=ae.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ae.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Qp(e)?(this.state=ae.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=ae.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const t=this.currentToken;switch(t.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ae.BEFORE_ATTRIBUTE_NAME,!1;case re.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ae.SELF_CLOSING_START_TAG,!1;case re.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ae.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ae.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===re.SOLIDUS?this.state=ae.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ae.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Qp(e)?(this.state=ae.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=ae.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ae.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case re.SOLIDUS:{this.state=ae.SCRIPT_DATA_END_TAG_OPEN;break}case re.EXCLAMATION_MARK:{this.state=ae.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ae.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Qp(e)?(this.state=ae.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=ae.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ae.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===re.HYPHEN_MINUS?(this.state=ae.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ae.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===re.HYPHEN_MINUS?(this.state=ae.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ae.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case re.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ui);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case re.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_ESCAPED,this._emitChars(ui);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case re.HYPHEN_MINUS:{this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case re.GREATER_THAN_SIGN:{this.state=ae.SCRIPT_DATA,this._emitChars(">");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_ESCAPED,this._emitChars(ui);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===re.SOLIDUS?this.state=ae.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Qp(e)?(this._emitChars("<"),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Qp(e)?(this.state=ae.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Ao.SCRIPT,!1)&&yse(this.preprocessor.peek(Ao.SCRIPT.length))){this._emitCodePoint(e);for(let t=0;t<Ao.SCRIPT.length;t++)this._emitCodePoint(this._consume());this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ae.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case re.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this._emitChars(ui);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case re.HYPHEN_MINUS:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ui);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case re.HYPHEN_MINUS:{this._emitChars("-");break}case re.LESS_THAN_SIGN:{this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case re.GREATER_THAN_SIGN:{this.state=ae.SCRIPT_DATA,this._emitChars(">");break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ui);break}case re.EOF:{this._err(ze.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===re.SOLIDUS?(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Ao.SCRIPT,!1)&&yse(this.preprocessor.peek(Ao.SCRIPT.length))){this._emitCodePoint(e);for(let t=0;t<Ao.SCRIPT.length;t++)this._emitCodePoint(this._consume());this.state=ae.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ae.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.SOLIDUS:case re.GREATER_THAN_SIGN:case re.EOF:{this.state=ae.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case re.EQUALS_SIGN:{this._err(ze.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ae.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ae.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:case re.SOLIDUS:case re.GREATER_THAN_SIGN:case re.EOF:{this._leaveAttrName(),this.state=ae.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case re.EQUALS_SIGN:{this._leaveAttrName(),this.state=ae.BEFORE_ATTRIBUTE_VALUE;break}case re.QUOTATION_MARK:case re.APOSTROPHE:case re.LESS_THAN_SIGN:{this._err(ze.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.name+=ui;break}default:this.currentAttr.name+=String.fromCodePoint(oE(e)?ZP(e):e)}}_stateAfterAttributeName(e){switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.SOLIDUS:{this.state=ae.SELF_CLOSING_START_TAG;break}case re.EQUALS_SIGN:{this.state=ae.BEFORE_ATTRIBUTE_VALUE;break}case re.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentTagToken();break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ae.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.QUOTATION_MARK:{this.state=ae.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this.state=ae.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingAttributeValue),this.state=ae.DATA,this.emitCurrentTagToken();break}default:this.state=ae.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case re.QUOTATION_MARK:{this.state=ae.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case re.AMPERSAND:{this._startCharacterReference();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=ui;break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case re.APOSTROPHE:{this.state=ae.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case re.AMPERSAND:{this._startCharacterReference();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=ui;break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this._leaveAttrValue(),this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case re.AMPERSAND:{this._startCharacterReference();break}case re.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ae.DATA,this.emitCurrentTagToken();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),this.currentAttr.value+=ui;break}case re.QUOTATION_MARK:case re.APOSTROPHE:case re.LESS_THAN_SIGN:case re.EQUALS_SIGN:case re.GRAVE_ACCENT:{this._err(ze.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this._leaveAttrValue(),this.state=ae.BEFORE_ATTRIBUTE_NAME;break}case re.SOLIDUS:{this._leaveAttrValue(),this.state=ae.SELF_CLOSING_START_TAG;break}case re.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ae.DATA,this.emitCurrentTagToken();break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBetweenAttributes),this.state=ae.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case re.GREATER_THAN_SIGN:{const t=this.currentToken;t.selfClosing=!0,this.state=ae.DATA,this.emitCurrentTagToken();break}case re.EOF:{this._err(ze.eofInTag),this._emitEOFToken();break}default:this._err(ze.unexpectedSolidusInTag),this.state=ae.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case re.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentComment(t);break}case re.EOF:{this.emitCurrentComment(t),this._emitEOFToken();break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.data+=ui;break}default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Ao.DASH_DASH,!0)?(this._createCommentToken(Ao.DASH_DASH.length+1),this.state=ae.COMMENT_START):this._consumeSequenceIfMatch(Ao.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Ao.DOCTYPE.length+1),this.state=ae.DOCTYPE):this._consumeSequenceIfMatch(Ao.CDATA_START,!0)?this.inForeignNode?this.state=ae.CDATA_SECTION:(this._err(ze.cdataInHtmlContent),this._createCommentToken(Ao.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ae.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ze.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ae.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case re.HYPHEN_MINUS:{this.state=ae.COMMENT_START_DASH;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=ae.DATA;const t=this.currentToken;this.emitCurrentComment(t);break}default:this.state=ae.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case re.HYPHEN_MINUS:{this.state=ae.COMMENT_END;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptClosingOfEmptyComment),this.state=ae.DATA,this.emitCurrentComment(t);break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="-",this.state=ae.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case re.HYPHEN_MINUS:{this.state=ae.COMMENT_END_DASH;break}case re.LESS_THAN_SIGN:{t.data+="<",this.state=ae.COMMENT_LESS_THAN_SIGN;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.data+=ui;break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case re.EXCLAMATION_MARK:{t.data+="!",this.state=ae.COMMENT_LESS_THAN_SIGN_BANG;break}case re.LESS_THAN_SIGN:{t.data+="<";break}default:this.state=ae.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===re.HYPHEN_MINUS?this.state=ae.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ae.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===re.HYPHEN_MINUS?this.state=ae.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ae.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==re.GREATER_THAN_SIGN&&e!==re.EOF&&this._err(ze.nestedComment),this.state=ae.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case re.HYPHEN_MINUS:{this.state=ae.COMMENT_END;break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="-",this.state=ae.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case re.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentComment(t);break}case re.EXCLAMATION_MARK:{this.state=ae.COMMENT_END_BANG;break}case re.HYPHEN_MINUS:{t.data+="-";break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="--",this.state=ae.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case re.HYPHEN_MINUS:{t.data+="--!",this.state=ae.COMMENT_END_DASH;break}case re.GREATER_THAN_SIGN:{this._err(ze.incorrectlyClosedComment),this.state=ae.DATA,this.emitCurrentComment(t);break}case re.EOF:{this._err(ze.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break}default:t.data+="--!",this.state=ae.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_NAME;break}case re.GREATER_THAN_SIGN:{this.state=ae.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case re.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const t=this.currentToken;t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.missingWhitespaceBeforeDoctypeName),this.state=ae.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(oE(e))this._createDoctypeToken(String.fromCharCode(ZP(e))),this.state=ae.DOCTYPE_NAME;else switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.NULL:{this._err(ze.unexpectedNullCharacter),this._createDoctypeToken(ui),this.state=ae.DOCTYPE_NAME;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeName),this._createDoctypeToken(null);const t=this.currentToken;t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),this._createDoctypeToken(null);const t=this.currentToken;t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=ae.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=ae.AFTER_DOCTYPE_NAME;break}case re.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(t);break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.name+=ui;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.name+=String.fromCodePoint(oE(e)?ZP(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(t);break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Ao.PUBLIC,!1)?this.state=ae.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Ao.SYSTEM,!1)?this.state=ae.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ze.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case re.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(t);break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.QUOTATION_MARK:{t.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{t.publicId="",this.state=ae.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(t);break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case re.QUOTATION_MARK:{this.state=ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.publicId+=ui;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case re.APOSTROPHE:{this.state=ae.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.publicId+=ui;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=ae.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case re.GREATER_THAN_SIGN:{this.state=ae.DATA,this.emitCurrentDoctype(t);break}case re.QUOTATION_MARK:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this._err(ze.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.GREATER_THAN_SIGN:{this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.QUOTATION_MARK:{t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:{this.state=ae.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case re.QUOTATION_MARK:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{this._err(ze.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(t);break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.QUOTATION_MARK:{t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case re.APOSTROPHE:{t.systemId="",this.state=ae.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case re.GREATER_THAN_SIGN:{this._err(ze.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ae.DATA,this.emitCurrentDoctype(t);break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case re.QUOTATION_MARK:{this.state=ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.systemId+=ui;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case re.APOSTROPHE:{this.state=ae.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case re.NULL:{this._err(ze.unexpectedNullCharacter),t.systemId+=ui;break}case re.GREATER_THAN_SIGN:{this._err(ze.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case re.SPACE:case re.LINE_FEED:case re.TABULATION:case re.FORM_FEED:break;case re.GREATER_THAN_SIGN:{this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.EOF:{this._err(ze.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break}default:this._err(ze.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ae.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case re.GREATER_THAN_SIGN:{this.emitCurrentDoctype(t),this.state=ae.DATA;break}case re.NULL:{this._err(ze.unexpectedNullCharacter);break}case re.EOF:{this.emitCurrentDoctype(t),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case re.RIGHT_SQUARE_BRACKET:{this.state=ae.CDATA_SECTION_BRACKET;break}case re.EOF:{this._err(ze.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===re.RIGHT_SQUARE_BRACKET?this.state=ae.CDATA_SECTION_END:(this._emitChars("]"),this.state=ae.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case re.GREATER_THAN_SIGN:{this.state=ae.DATA;break}case re.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ae.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(re.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&vse(this.preprocessor.peek(1))?ae.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){vse(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===re.SEMICOLON&&this._err(ze.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const gye=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),xse=new Set([...gye,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),ek=new Set([N.APPLET,N.CAPTION,N.HTML,N.MARQUEE,N.OBJECT,N.TABLE,N.TD,N.TEMPLATE,N.TH]),Elt=new Set([...ek,N.OL,N.UL]),Alt=new Set([...ek,N.BUTTON]),_se=new Set([N.ANNOTATION_XML,N.MI,N.MN,N.MO,N.MS,N.MTEXT]),bse=new Set([N.DESC,N.FOREIGN_OBJECT,N.TITLE]),Clt=new Set([N.TR,N.TEMPLATE,N.HTML]),Mlt=new Set([N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML]),Dlt=new Set([N.TABLE,N.TEMPLATE,N.HTML]),Ilt=new Set([N.TD,N.TH]);class Plt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,r){this.treeAdapter=t,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===We.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const r=this._indexOf(e);this.items[r]=t,r===this.stackTop&&(this.current=t)}insertAfter(e,t,r){const i=this._indexOf(e)+1;this.items.splice(i,0,t),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do t=this.tagIDs.lastIndexOf(e,t-1);while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==We.HTML);this.shortenToLength(Math.max(t,0))}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(Math.max(t,0))}popUntilPopped(e,t){const r=this._indexOfTagNames(e,t);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(pH,We.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Ilt,We.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===t)return r;return-1}clearBackTo(e,t){const r=this._indexOfTagNames(e,t);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Dlt,We.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Mlt,We.HTML)}clearBackToTableRowContext(){this.clearBackTo(Clt,We.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInDynamicScope(e,t){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case We.HTML:{if(i===e)return!0;if(t.has(i))return!1;break}case We.SVG:{if(bse.has(i))return!1;break}case We.MATHML:{if(_se.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,ek)}hasInListItemScope(e){return this.hasInDynamicScope(e,Elt)}hasInButtonScope(e){return this.hasInDynamicScope(e,Alt)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case We.HTML:{if(pH.has(t))return!0;if(ek.has(t))return!1;break}case We.SVG:{if(bse.has(t))return!1;break}case We.MATHML:{if(_se.has(t))return!1;break}}}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===We.HTML)switch(this.tagIDs[t]){case e:return!0;case N.TABLE:case N.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===We.HTML)switch(this.tagIDs[e]){case N.TBODY:case N.THEAD:case N.TFOOT:return!0;case N.TABLE:case N.HTML:return!1}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===We.HTML)switch(this.tagIDs[t]){case e:return!0;case N.OPTION:case N.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&gye.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&xse.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&xse.has(this.currentTagId);)this.pop()}}const K6=3;var Rh;(function(n){n[n.Marker=0]="Marker",n[n.Element=1]="Element"})(Rh||(Rh={}));const Sse={type:Rh.Marker};class Llt{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const r=[],i=t.length,a=this.treeAdapter.getTagName(e),s=this.treeAdapter.getNamespaceURI(e);for(let o=0;o<this.entries.length;o++){const l=this.entries[o];if(l.type===Rh.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===a&&this.treeAdapter.getNamespaceURI(u)===s){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:o,attrs:c})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<K6)return;const t=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,t);if(r.length<K6)return;const i=new Map(t.map(s=>[s.name,s.value]));let a=0;for(let s=0;s<r.length;s++){const o=r[s];o.attrs.every(l=>i.get(l.name)===l.value)&&(a+=1,a>=K6&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(Sse)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:Rh.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Rh.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);t!==-1&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(Sse);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const t=this.entries.find(r=>r.type===Rh.Marker||this.treeAdapter.getTagName(r.element)===e);return t&&t.type===Rh.Element?t:null}getElementEntry(e){return this.entries.find(t=>t.type===Rh.Element&&t.element===e)}}const Jp={createDocument(){return{nodeName:"#document",mode:Su.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(n,e,t){return{nodeName:n,tagName:n,attrs:t,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(n){return{nodeName:"#comment",data:n,parentNode:null}},createTextNode(n){return{nodeName:"#text",value:n,parentNode:null}},appendChild(n,e){n.childNodes.push(e),e.parentNode=n},insertBefore(n,e,t){const r=n.childNodes.indexOf(t);n.childNodes.splice(r,0,e),e.parentNode=n},setTemplateContent(n,e){n.content=e},getTemplateContent(n){return n.content},setDocumentType(n,e,t,r){const i=n.childNodes.find(a=>a.nodeName==="#documentType");if(i)i.name=e,i.publicId=t,i.systemId=r;else{const a={nodeName:"#documentType",name:e,publicId:t,systemId:r,parentNode:null};Jp.appendChild(n,a)}},setDocumentMode(n,e){n.mode=e},getDocumentMode(n){return n.mode},detachNode(n){if(n.parentNode){const e=n.parentNode.childNodes.indexOf(n);n.parentNode.childNodes.splice(e,1),n.parentNode=null}},insertText(n,e){if(n.childNodes.length>0){const t=n.childNodes[n.childNodes.length-1];if(Jp.isTextNode(t)){t.value+=e;return}}Jp.appendChild(n,Jp.createTextNode(e))},insertTextBefore(n,e,t){const r=n.childNodes[n.childNodes.indexOf(t)-1];r&&Jp.isTextNode(r)?r.value+=e:Jp.insertBefore(n,Jp.createTextNode(e),t)},adoptAttributes(n,e){const t=new Set(n.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)t.has(e[r].name)||n.attrs.push(e[r])},getFirstChild(n){return n.childNodes[0]},getChildNodes(n){return n.childNodes},getParentNode(n){return n.parentNode},getAttrList(n){return n.attrs},getTagName(n){return n.tagName},getNamespaceURI(n){return n.namespaceURI},getTextNodeContent(n){return n.value},getCommentNodeContent(n){return n.data},getDocumentTypeNodeName(n){return n.name},getDocumentTypeNodePublicId(n){return n.publicId},getDocumentTypeNodeSystemId(n){return n.systemId},isTextNode(n){return n.nodeName==="#text"},isCommentNode(n){return n.nodeName==="#comment"},isDocumentTypeNode(n){return n.nodeName==="#documentType"},isElementNode(n){return Object.prototype.hasOwnProperty.call(n,"tagName")},setNodeSourceCodeLocation(n,e){n.sourceCodeLocation=e},getNodeSourceCodeLocation(n){return n.sourceCodeLocation},updateNodeSourceCodeLocation(n,e){n.sourceCodeLocation={...n.sourceCodeLocation,...e}}},vye="html",Rlt="about:legacy-compat",Nlt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",yye=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],klt=[...yye,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Olt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),xye=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Blt=[...xye,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function wse(n,e){return e.some(t=>n.startsWith(t))}function Flt(n){return n.name===vye&&n.publicId===null&&(n.systemId===null||n.systemId===Rlt)}function Ult(n){if(n.name!==vye)return Su.QUIRKS;const{systemId:e}=n;if(e&&e.toLowerCase()===Nlt)return Su.QUIRKS;let{publicId:t}=n;if(t!==null){if(t=t.toLowerCase(),Olt.has(t))return Su.QUIRKS;let r=e===null?klt:yye;if(wse(t,r))return Su.QUIRKS;if(r=e===null?xye:Blt,wse(t,r))return Su.LIMITED_QUIRKS}return Su.NO_QUIRKS}const Tse={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},zlt="definitionurl",Vlt="definitionURL",Hlt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(n=>[n.toLowerCase(),n])),Glt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:We.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:We.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:We.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:We.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:We.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:We.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:We.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:We.XML}],["xml:space",{prefix:"xml",name:"space",namespace:We.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:We.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:We.XMLNS}]]),jlt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(n=>[n.toLowerCase(),n])),Wlt=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function Xlt(n){const e=n.tagID;return e===N.FONT&&n.attrs.some(({name:r})=>r===By.COLOR||r===By.SIZE||r===By.FACE)||Wlt.has(e)}function _ye(n){for(let e=0;e<n.attrs.length;e++)if(n.attrs[e].name===zlt){n.attrs[e].name=Vlt;break}}function bye(n){for(let e=0;e<n.attrs.length;e++){const t=Hlt.get(n.attrs[e].name);t!=null&&(n.attrs[e].name=t)}}function VW(n){for(let e=0;e<n.attrs.length;e++){const t=Glt.get(n.attrs[e].name);t&&(n.attrs[e].prefix=t.prefix,n.attrs[e].name=t.name,n.attrs[e].namespace=t.namespace)}}function $lt(n){const e=jlt.get(n.tagName);e!=null&&(n.tagName=e,n.tagID=lw(n.tagName))}function Ylt(n,e){return e===We.MATHML&&(n===N.MI||n===N.MO||n===N.MN||n===N.MS||n===N.MTEXT)}function qlt(n,e,t){if(e===We.MATHML&&n===N.ANNOTATION_XML){for(let r=0;r<t.length;r++)if(t[r].name===By.ENCODING){const i=t[r].value.toLowerCase();return i===Tse.TEXT_HTML||i===Tse.APPLICATION_XML}}return e===We.SVG&&(n===N.FOREIGN_OBJECT||n===N.DESC||n===N.TITLE)}function Klt(n,e,t,r){return(!r||r===We.HTML)&&qlt(n,e,t)||(!r||r===We.MATHML)&&Ylt(n,e)}const Zlt="hidden",Qlt=8,Jlt=3;var ue;(function(n){n[n.INITIAL=0]="INITIAL",n[n.BEFORE_HTML=1]="BEFORE_HTML",n[n.BEFORE_HEAD=2]="BEFORE_HEAD",n[n.IN_HEAD=3]="IN_HEAD",n[n.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",n[n.AFTER_HEAD=5]="AFTER_HEAD",n[n.IN_BODY=6]="IN_BODY",n[n.TEXT=7]="TEXT",n[n.IN_TABLE=8]="IN_TABLE",n[n.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",n[n.IN_CAPTION=10]="IN_CAPTION",n[n.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",n[n.IN_TABLE_BODY=12]="IN_TABLE_BODY",n[n.IN_ROW=13]="IN_ROW",n[n.IN_CELL=14]="IN_CELL",n[n.IN_SELECT=15]="IN_SELECT",n[n.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",n[n.IN_TEMPLATE=17]="IN_TEMPLATE",n[n.AFTER_BODY=18]="AFTER_BODY",n[n.IN_FRAMESET=19]="IN_FRAMESET",n[n.AFTER_FRAMESET=20]="AFTER_FRAMESET",n[n.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",n[n.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ue||(ue={}));const eut={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Sye=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),Ese={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Jp,onParseError:null};class Ase{constructor(e,t,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ue.INITIAL,this.originalInsertionMode=ue.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Ese,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=t??this.treeAdapter.createDocument(),this.tokenizer=new Tlt(this.options,this),this.activeFormattingElements=new Llt(this.treeAdapter),this.fragmentContextID=r?lw(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Plt(this.document,this.treeAdapter,this)}static parse(e,t){const r=new this(t);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,t){const r={...Ese,...t};e??(e=r.treeAdapter.createElement(Me.TEMPLATE,We.HTML,[]));const i=r.treeAdapter.createElement("documentmock",We.HTML,[]),a=new this(r,i,e);return a.fragmentContextID===N.TEMPLATE&&a.tmplInsertionModeStack.unshift(ue.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,r){var i;if(!this.onParseError)return;const a=(i=e.location)!==null&&i!==void 0?i:eut,s={code:t,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:r?a.startLine:a.endLine,endCol:r?a.startCol:a.endCol,endOffset:r?a.startOffset:a.endOffset};this.onParseError(s)}onItemPush(e,t,r){var i,a;(a=(i=this.treeAdapter).onItemPush)===null||a===void 0||a.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),t){let a,s;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,s=this.fragmentContextID):{current:a,currentTagId:s}=this.openElements,this._setContextModes(a,s)}}_setContextModes(e,t){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===We.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&t!==void 0&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,We.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=ue.TEXT}switchToPlaintextParsing(){this.insertionMode=ue.TEXT,this.originalInsertionMode=ue.IN_BODY,this.tokenizer.state=ji.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Me.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==We.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=ji.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=ji.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=ji.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=ji.PLAINTEXT;break}}}_setDocumentType(e){const t=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,r,i),e.location){const s=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));s&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const r=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,t){const r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,t){const r=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,t){const r=this.treeAdapter.createElement(e,We.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,We.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,r),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Me.HTML,We.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,N.HTML)}_appendCommentNode(e,t){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let t,r;if(this._shouldFosterParentOnInsertion()?({parent:t,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(t,e.chars,r):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(t),a=r?i.lastIndexOf(r):i.length,s=i[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:l,endCol:u,endOffset:c}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,t){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(t,r)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const r=t.location,i=this.treeAdapter.getTagName(e),a=t.type===qn.END_TAG&&i===t.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,a)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,r;return this.openElements.stackTop===0&&this.fragmentContext?(t=this.fragmentContext,r=this.fragmentContextID):{current:t,currentTagId:r}=this.openElements,e.tagID===N.SVG&&this.treeAdapter.getTagName(t)===Me.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(t)===We.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===N.MGLYPH||e.tagID===N.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,t,We.HTML)}_processToken(e){switch(e.type){case qn.CHARACTER:{this.onCharacter(e);break}case qn.NULL_CHARACTER:{this.onNullCharacter(e);break}case qn.COMMENT:{this.onComment(e);break}case qn.DOCTYPE:{this.onDoctype(e);break}case qn.START_TAG:{this._processStartTag(e);break}case qn.END_TAG:{this.onEndTag(e);break}case qn.EOF:{this.onEof(e);break}case qn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,t,r){const i=this.treeAdapter.getNamespaceURI(t),a=this.treeAdapter.getAttrList(t);return Klt(e,i,a,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex(i=>i.type===Rh.Marker||this.openElements.contains(i.element)),r=t===-1?e-1:t-1;for(let i=r;i>=0;i--){const a=this.activeFormattingElements.entries[i];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ue.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case N.TR:{this.insertionMode=ue.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ue.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ue.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ue.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ue.IN_TABLE;return}case N.BODY:{this.insertionMode=ue.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ue.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(e);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ue.AFTER_HEAD:ue.BEFORE_HEAD;return}case N.TD:case N.TH:{if(e>0){this.insertionMode=ue.IN_CELL;return}break}case N.HEAD:{if(e>0){this.insertionMode=ue.IN_HEAD;return}break}}this.insertionMode=ue.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const r=this.openElements.tagIDs[t];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ue.IN_SELECT_IN_TABLE;return}}this.insertionMode=ue.IN_SELECT}_isElementCausesFosterParenting(e){return Sye.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(t)===We.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(t);return r?{parent:r,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const r=this.treeAdapter.getNamespaceURI(e);return _lt[r].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ict(this,e);return}switch(this.insertionMode){case ue.INITIAL:{BT(this,e);break}case ue.BEFORE_HTML:{tA(this,e);break}case ue.BEFORE_HEAD:{nA(this,e);break}case ue.IN_HEAD:{rA(this,e);break}case ue.IN_HEAD_NO_SCRIPT:{iA(this,e);break}case ue.AFTER_HEAD:{aA(this,e);break}case ue.IN_BODY:case ue.IN_CAPTION:case ue.IN_CELL:case ue.IN_TEMPLATE:{Tye(this,e);break}case ue.TEXT:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case ue.IN_TABLE:case ue.IN_TABLE_BODY:case ue.IN_ROW:{Z6(this,e);break}case ue.IN_TABLE_TEXT:{Iye(this,e);break}case ue.IN_COLUMN_GROUP:{tk(this,e);break}case ue.AFTER_BODY:{nk(this,e);break}case ue.AFTER_AFTER_BODY:{$L(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Dct(this,e);return}switch(this.insertionMode){case ue.INITIAL:{BT(this,e);break}case ue.BEFORE_HTML:{tA(this,e);break}case ue.BEFORE_HEAD:{nA(this,e);break}case ue.IN_HEAD:{rA(this,e);break}case ue.IN_HEAD_NO_SCRIPT:{iA(this,e);break}case ue.AFTER_HEAD:{aA(this,e);break}case ue.TEXT:{this._insertCharacters(e);break}case ue.IN_TABLE:case ue.IN_TABLE_BODY:case ue.IN_ROW:{Z6(this,e);break}case ue.IN_COLUMN_GROUP:{tk(this,e);break}case ue.AFTER_BODY:{nk(this,e);break}case ue.AFTER_AFTER_BODY:{$L(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){mH(this,e);return}switch(this.insertionMode){case ue.INITIAL:case ue.BEFORE_HTML:case ue.BEFORE_HEAD:case ue.IN_HEAD:case ue.IN_HEAD_NO_SCRIPT:case ue.AFTER_HEAD:case ue.IN_BODY:case ue.IN_TABLE:case ue.IN_CAPTION:case ue.IN_COLUMN_GROUP:case ue.IN_TABLE_BODY:case ue.IN_ROW:case ue.IN_CELL:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:case ue.IN_TEMPLATE:case ue.IN_FRAMESET:case ue.AFTER_FRAMESET:{mH(this,e);break}case ue.IN_TABLE_TEXT:{FT(this,e);break}case ue.AFTER_BODY:{out(this,e);break}case ue.AFTER_AFTER_BODY:case ue.AFTER_AFTER_FRAMESET:{lut(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case ue.INITIAL:{uut(this,e);break}case ue.BEFORE_HEAD:case ue.IN_HEAD:case ue.IN_HEAD_NO_SCRIPT:case ue.AFTER_HEAD:{this._err(e,ze.misplacedDoctype);break}case ue.IN_TABLE_TEXT:{FT(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,ze.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?Pct(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case ue.INITIAL:{BT(this,e);break}case ue.BEFORE_HTML:{cut(this,e);break}case ue.BEFORE_HEAD:{dut(this,e);break}case ue.IN_HEAD:{Fc(this,e);break}case ue.IN_HEAD_NO_SCRIPT:{mut(this,e);break}case ue.AFTER_HEAD:{vut(this,e);break}case ue.IN_BODY:{Gs(this,e);break}case ue.IN_TABLE:{ES(this,e);break}case ue.IN_TABLE_TEXT:{FT(this,e);break}case ue.IN_CAPTION:{fct(this,e);break}case ue.IN_COLUMN_GROUP:{jW(this,e);break}case ue.IN_TABLE_BODY:{J3(this,e);break}case ue.IN_ROW:{eO(this,e);break}case ue.IN_CELL:{gct(this,e);break}case ue.IN_SELECT:{Rye(this,e);break}case ue.IN_SELECT_IN_TABLE:{yct(this,e);break}case ue.IN_TEMPLATE:{_ct(this,e);break}case ue.AFTER_BODY:{Sct(this,e);break}case ue.IN_FRAMESET:{wct(this,e);break}case ue.AFTER_FRAMESET:{Ect(this,e);break}case ue.AFTER_AFTER_BODY:{Cct(this,e);break}case ue.AFTER_AFTER_FRAMESET:{Mct(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?Lct(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case ue.INITIAL:{BT(this,e);break}case ue.BEFORE_HTML:{hut(this,e);break}case ue.BEFORE_HEAD:{fut(this,e);break}case ue.IN_HEAD:{put(this,e);break}case ue.IN_HEAD_NO_SCRIPT:{gut(this,e);break}case ue.AFTER_HEAD:{yut(this,e);break}case ue.IN_BODY:{Q3(this,e);break}case ue.TEXT:{rct(this,e);break}case ue.IN_TABLE:{nC(this,e);break}case ue.IN_TABLE_TEXT:{FT(this,e);break}case ue.IN_CAPTION:{pct(this,e);break}case ue.IN_COLUMN_GROUP:{mct(this,e);break}case ue.IN_TABLE_BODY:{gH(this,e);break}case ue.IN_ROW:{Lye(this,e);break}case ue.IN_CELL:{vct(this,e);break}case ue.IN_SELECT:{Nye(this,e);break}case ue.IN_SELECT_IN_TABLE:{xct(this,e);break}case ue.IN_TEMPLATE:{bct(this,e);break}case ue.AFTER_BODY:{Oye(this,e);break}case ue.IN_FRAMESET:{Tct(this,e);break}case ue.AFTER_FRAMESET:{Act(this,e);break}case ue.AFTER_AFTER_BODY:{$L(this,e);break}}}onEof(e){switch(this.insertionMode){case ue.INITIAL:{BT(this,e);break}case ue.BEFORE_HTML:{tA(this,e);break}case ue.BEFORE_HEAD:{nA(this,e);break}case ue.IN_HEAD:{rA(this,e);break}case ue.IN_HEAD_NO_SCRIPT:{iA(this,e);break}case ue.AFTER_HEAD:{aA(this,e);break}case ue.IN_BODY:case ue.IN_TABLE:case ue.IN_CAPTION:case ue.IN_COLUMN_GROUP:case ue.IN_TABLE_BODY:case ue.IN_ROW:case ue.IN_CELL:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:{Mye(this,e);break}case ue.TEXT:{ict(this,e);break}case ue.IN_TABLE_TEXT:{FT(this,e);break}case ue.IN_TEMPLATE:{kye(this,e);break}case ue.AFTER_BODY:case ue.IN_FRAMESET:case ue.AFTER_FRAMESET:case ue.AFTER_AFTER_BODY:case ue.AFTER_AFTER_FRAMESET:{GW(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===re.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case ue.IN_HEAD:case ue.IN_HEAD_NO_SCRIPT:case ue.AFTER_HEAD:case ue.TEXT:case ue.IN_COLUMN_GROUP:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:case ue.IN_FRAMESET:case ue.AFTER_FRAMESET:{this._insertCharacters(e);break}case ue.IN_BODY:case ue.IN_CAPTION:case ue.IN_CELL:case ue.IN_TEMPLATE:case ue.AFTER_BODY:case ue.AFTER_AFTER_BODY:case ue.AFTER_AFTER_FRAMESET:{wye(this,e);break}case ue.IN_TABLE:case ue.IN_TABLE_BODY:case ue.IN_ROW:{Z6(this,e);break}case ue.IN_TABLE_TEXT:{Dye(this,e);break}}}}function tut(n,e){let t=n.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return t?n.openElements.contains(t.element)?n.openElements.hasInScope(e.tagID)||(t=null):(n.activeFormattingElements.removeEntry(t),t=null):Cye(n,e),t}function nut(n,e){let t=null,r=n.openElements.stackTop;for(;r>=0;r--){const i=n.openElements.items[r];if(i===e.element)break;n._isSpecialElement(i,n.openElements.tagIDs[r])&&(t=i)}return t||(n.openElements.shortenToLength(Math.max(r,0)),n.activeFormattingElements.removeEntry(e)),t}function rut(n,e,t){let r=e,i=n.openElements.getCommonAncestor(e);for(let a=0,s=i;s!==t;a++,s=i){i=n.openElements.getCommonAncestor(s);const o=n.activeFormattingElements.getElementEntry(s),l=o&&a>=Jlt;!o||l?(l&&n.activeFormattingElements.removeEntry(o),n.openElements.remove(s)):(s=iut(n,o),r===e&&(n.activeFormattingElements.bookmark=o),n.treeAdapter.detachNode(r),n.treeAdapter.appendChild(s,r),r=s)}return r}function iut(n,e){const t=n.treeAdapter.getNamespaceURI(e.element),r=n.treeAdapter.createElement(e.token.tagName,t,e.token.attrs);return n.openElements.replace(e.element,r),e.element=r,r}function aut(n,e,t){const r=n.treeAdapter.getTagName(e),i=lw(r);if(n._isElementCausesFosterParenting(i))n._fosterParentElement(t);else{const a=n.treeAdapter.getNamespaceURI(e);i===N.TEMPLATE&&a===We.HTML&&(e=n.treeAdapter.getTemplateContent(e)),n.treeAdapter.appendChild(e,t)}}function sut(n,e,t){const r=n.treeAdapter.getNamespaceURI(t.element),{token:i}=t,a=n.treeAdapter.createElement(i.tagName,r,i.attrs);n._adoptNodes(e,a),n.treeAdapter.appendChild(e,a),n.activeFormattingElements.insertElementAfterBookmark(a,i),n.activeFormattingElements.removeEntry(t),n.openElements.remove(t.element),n.openElements.insertAfter(e,a,i.tagID)}function HW(n,e){for(let t=0;t<Qlt;t++){const r=tut(n,e);if(!r)break;const i=nut(n,r);if(!i)break;n.activeFormattingElements.bookmark=r;const a=rut(n,i,r.element),s=n.openElements.getCommonAncestor(r.element);n.treeAdapter.detachNode(a),s&&aut(n,s,a),sut(n,i,r)}}function mH(n,e){n._appendCommentNode(e,n.openElements.currentTmplContentOrNode)}function out(n,e){n._appendCommentNode(e,n.openElements.items[0])}function lut(n,e){n._appendCommentNode(e,n.document)}function GW(n,e){if(n.stopped=!0,e.location){const t=n.fragmentContext?0:2;for(let r=n.openElements.stackTop;r>=t;r--)n._setEndLocation(n.openElements.items[r],e);if(!n.fragmentContext&&n.openElements.stackTop>=0){const r=n.openElements.items[0],i=n.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(n._setEndLocation(r,e),n.openElements.stackTop>=1)){const a=n.openElements.items[1],s=n.treeAdapter.getNodeSourceCodeLocation(a);s&&!s.endTag&&n._setEndLocation(a,e)}}}}function uut(n,e){n._setDocumentType(e);const t=e.forceQuirks?Su.QUIRKS:Ult(e);Flt(e)||n._err(e,ze.nonConformingDoctype),n.treeAdapter.setDocumentMode(n.document,t),n.insertionMode=ue.BEFORE_HTML}function BT(n,e){n._err(e,ze.missingDoctype,!0),n.treeAdapter.setDocumentMode(n.document,Su.QUIRKS),n.insertionMode=ue.BEFORE_HTML,n._processToken(e)}function cut(n,e){e.tagID===N.HTML?(n._insertElement(e,We.HTML),n.insertionMode=ue.BEFORE_HEAD):tA(n,e)}function hut(n,e){const t=e.tagID;(t===N.HTML||t===N.HEAD||t===N.BODY||t===N.BR)&&tA(n,e)}function tA(n,e){n._insertFakeRootElement(),n.insertionMode=ue.BEFORE_HEAD,n._processToken(e)}function dut(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.HEAD:{n._insertElement(e,We.HTML),n.headElement=n.openElements.current,n.insertionMode=ue.IN_HEAD;break}default:nA(n,e)}}function fut(n,e){const t=e.tagID;t===N.HEAD||t===N.BODY||t===N.HTML||t===N.BR?nA(n,e):n._err(e,ze.endTagWithoutMatchingOpenElement)}function nA(n,e){n._insertFakeElement(Me.HEAD,N.HEAD),n.headElement=n.openElements.current,n.insertionMode=ue.IN_HEAD,n._processToken(e)}function Fc(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{n._appendElement(e,We.HTML),e.ackSelfClosing=!0;break}case N.TITLE:{n._switchToTextParsing(e,ji.RCDATA);break}case N.NOSCRIPT:{n.options.scriptingEnabled?n._switchToTextParsing(e,ji.RAWTEXT):(n._insertElement(e,We.HTML),n.insertionMode=ue.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{n._switchToTextParsing(e,ji.RAWTEXT);break}case N.SCRIPT:{n._switchToTextParsing(e,ji.SCRIPT_DATA);break}case N.TEMPLATE:{n._insertTemplate(e),n.activeFormattingElements.insertMarker(),n.framesetOk=!1,n.insertionMode=ue.IN_TEMPLATE,n.tmplInsertionModeStack.unshift(ue.IN_TEMPLATE);break}case N.HEAD:{n._err(e,ze.misplacedStartTagForHeadElement);break}default:rA(n,e)}}function put(n,e){switch(e.tagID){case N.HEAD:{n.openElements.pop(),n.insertionMode=ue.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{rA(n,e);break}case N.TEMPLATE:{px(n,e);break}default:n._err(e,ze.endTagWithoutMatchingOpenElement)}}function px(n,e){n.openElements.tmplCount>0?(n.openElements.generateImpliedEndTagsThoroughly(),n.openElements.currentTagId!==N.TEMPLATE&&n._err(e,ze.closingOfElementWithOpenChildElements),n.openElements.popUntilTagNamePopped(N.TEMPLATE),n.activeFormattingElements.clearToLastMarker(),n.tmplInsertionModeStack.shift(),n._resetInsertionMode()):n._err(e,ze.endTagWithoutMatchingOpenElement)}function rA(n,e){n.openElements.pop(),n.insertionMode=ue.AFTER_HEAD,n._processToken(e)}function mut(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{Fc(n,e);break}case N.NOSCRIPT:{n._err(e,ze.nestedNoscriptInHead);break}default:iA(n,e)}}function gut(n,e){switch(e.tagID){case N.NOSCRIPT:{n.openElements.pop(),n.insertionMode=ue.IN_HEAD;break}case N.BR:{iA(n,e);break}default:n._err(e,ze.endTagWithoutMatchingOpenElement)}}function iA(n,e){const t=e.type===qn.EOF?ze.openElementsLeftAfterEof:ze.disallowedContentInNoscriptInHead;n._err(e,t),n.openElements.pop(),n.insertionMode=ue.IN_HEAD,n._processToken(e)}function vut(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.BODY:{n._insertElement(e,We.HTML),n.framesetOk=!1,n.insertionMode=ue.IN_BODY;break}case N.FRAMESET:{n._insertElement(e,We.HTML),n.insertionMode=ue.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{n._err(e,ze.abandonedHeadElementChild),n.openElements.push(n.headElement,N.HEAD),Fc(n,e),n.openElements.remove(n.headElement);break}case N.HEAD:{n._err(e,ze.misplacedStartTagForHeadElement);break}default:aA(n,e)}}function yut(n,e){switch(e.tagID){case N.BODY:case N.HTML:case N.BR:{aA(n,e);break}case N.TEMPLATE:{px(n,e);break}default:n._err(e,ze.endTagWithoutMatchingOpenElement)}}function aA(n,e){n._insertFakeElement(Me.BODY,N.BODY),n.insertionMode=ue.IN_BODY,Z3(n,e)}function Z3(n,e){switch(e.type){case qn.CHARACTER:{Tye(n,e);break}case qn.WHITESPACE_CHARACTER:{wye(n,e);break}case qn.COMMENT:{mH(n,e);break}case qn.START_TAG:{Gs(n,e);break}case qn.END_TAG:{Q3(n,e);break}case qn.EOF:{Mye(n,e);break}}}function wye(n,e){n._reconstructActiveFormattingElements(),n._insertCharacters(e)}function Tye(n,e){n._reconstructActiveFormattingElements(),n._insertCharacters(e),n.framesetOk=!1}function xut(n,e){n.openElements.tmplCount===0&&n.treeAdapter.adoptAttributes(n.openElements.items[0],e.attrs)}function _ut(n,e){const t=n.openElements.tryPeekProperlyNestedBodyElement();t&&n.openElements.tmplCount===0&&(n.framesetOk=!1,n.treeAdapter.adoptAttributes(t,e.attrs))}function but(n,e){const t=n.openElements.tryPeekProperlyNestedBodyElement();n.framesetOk&&t&&(n.treeAdapter.detachNode(t),n.openElements.popAllUpToHtmlElement(),n._insertElement(e,We.HTML),n.insertionMode=ue.IN_FRAMESET)}function Sut(n,e){n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._insertElement(e,We.HTML)}function wut(n,e){n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n.openElements.currentTagId!==void 0&&pH.has(n.openElements.currentTagId)&&n.openElements.pop(),n._insertElement(e,We.HTML)}function Tut(n,e){n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._insertElement(e,We.HTML),n.skipNextNewLine=!0,n.framesetOk=!1}function Eut(n,e){const t=n.openElements.tmplCount>0;(!n.formElement||t)&&(n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._insertElement(e,We.HTML),t||(n.formElement=n.openElements.current))}function Aut(n,e){n.framesetOk=!1;const t=e.tagID;for(let r=n.openElements.stackTop;r>=0;r--){const i=n.openElements.tagIDs[r];if(t===N.LI&&i===N.LI||(t===N.DD||t===N.DT)&&(i===N.DD||i===N.DT)){n.openElements.generateImpliedEndTagsWithExclusion(i),n.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&n._isSpecialElement(n.openElements.items[r],i))break}n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._insertElement(e,We.HTML)}function Cut(n,e){n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._insertElement(e,We.HTML),n.tokenizer.state=ji.PLAINTEXT}function Mut(n,e){n.openElements.hasInScope(N.BUTTON)&&(n.openElements.generateImpliedEndTags(),n.openElements.popUntilTagNamePopped(N.BUTTON)),n._reconstructActiveFormattingElements(),n._insertElement(e,We.HTML),n.framesetOk=!1}function Dut(n,e){const t=n.activeFormattingElements.getElementEntryInScopeWithTagName(Me.A);t&&(HW(n,e),n.openElements.remove(t.element),n.activeFormattingElements.removeEntry(t)),n._reconstructActiveFormattingElements(),n._insertElement(e,We.HTML),n.activeFormattingElements.pushElement(n.openElements.current,e)}function Iut(n,e){n._reconstructActiveFormattingElements(),n._insertElement(e,We.HTML),n.activeFormattingElements.pushElement(n.openElements.current,e)}function Put(n,e){n._reconstructActiveFormattingElements(),n.openElements.hasInScope(N.NOBR)&&(HW(n,e),n._reconstructActiveFormattingElements()),n._insertElement(e,We.HTML),n.activeFormattingElements.pushElement(n.openElements.current,e)}function Lut(n,e){n._reconstructActiveFormattingElements(),n._insertElement(e,We.HTML),n.activeFormattingElements.insertMarker(),n.framesetOk=!1}function Rut(n,e){n.treeAdapter.getDocumentMode(n.document)!==Su.QUIRKS&&n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._insertElement(e,We.HTML),n.framesetOk=!1,n.insertionMode=ue.IN_TABLE}function Eye(n,e){n._reconstructActiveFormattingElements(),n._appendElement(e,We.HTML),n.framesetOk=!1,e.ackSelfClosing=!0}function Aye(n){const e=pye(n,By.TYPE);return e!=null&&e.toLowerCase()===Zlt}function Nut(n,e){n._reconstructActiveFormattingElements(),n._appendElement(e,We.HTML),Aye(e)||(n.framesetOk=!1),e.ackSelfClosing=!0}function kut(n,e){n._appendElement(e,We.HTML),e.ackSelfClosing=!0}function Out(n,e){n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._appendElement(e,We.HTML),n.framesetOk=!1,e.ackSelfClosing=!0}function But(n,e){e.tagName=Me.IMG,e.tagID=N.IMG,Eye(n,e)}function Fut(n,e){n._insertElement(e,We.HTML),n.skipNextNewLine=!0,n.tokenizer.state=ji.RCDATA,n.originalInsertionMode=n.insertionMode,n.framesetOk=!1,n.insertionMode=ue.TEXT}function Uut(n,e){n.openElements.hasInButtonScope(N.P)&&n._closePElement(),n._reconstructActiveFormattingElements(),n.framesetOk=!1,n._switchToTextParsing(e,ji.RAWTEXT)}function zut(n,e){n.framesetOk=!1,n._switchToTextParsing(e,ji.RAWTEXT)}function Cse(n,e){n._switchToTextParsing(e,ji.RAWTEXT)}function Vut(n,e){n._reconstructActiveFormattingElements(),n._insertElement(e,We.HTML),n.framesetOk=!1,n.insertionMode=n.insertionMode===ue.IN_TABLE||n.insertionMode===ue.IN_CAPTION||n.insertionMode===ue.IN_TABLE_BODY||n.insertionMode===ue.IN_ROW||n.insertionMode===ue.IN_CELL?ue.IN_SELECT_IN_TABLE:ue.IN_SELECT}function Hut(n,e){n.openElements.currentTagId===N.OPTION&&n.openElements.pop(),n._reconstructActiveFormattingElements(),n._insertElement(e,We.HTML)}function Gut(n,e){n.openElements.hasInScope(N.RUBY)&&n.openElements.generateImpliedEndTags(),n._insertElement(e,We.HTML)}function jut(n,e){n.openElements.hasInScope(N.RUBY)&&n.openElements.generateImpliedEndTagsWithExclusion(N.RTC),n._insertElement(e,We.HTML)}function Wut(n,e){n._reconstructActiveFormattingElements(),_ye(e),VW(e),e.selfClosing?n._appendElement(e,We.MATHML):n._insertElement(e,We.MATHML),e.ackSelfClosing=!0}function Xut(n,e){n._reconstructActiveFormattingElements(),bye(e),VW(e),e.selfClosing?n._appendElement(e,We.SVG):n._insertElement(e,We.SVG),e.ackSelfClosing=!0}function Mse(n,e){n._reconstructActiveFormattingElements(),n._insertElement(e,We.HTML)}function Gs(n,e){switch(e.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{Iut(n,e);break}case N.A:{Dut(n,e);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{wut(n,e);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SEARCH:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Sut(n,e);break}case N.LI:case N.DD:case N.DT:{Aut(n,e);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{Eye(n,e);break}case N.HR:{Out(n,e);break}case N.RB:case N.RTC:{Gut(n,e);break}case N.RT:case N.RP:{jut(n,e);break}case N.PRE:case N.LISTING:{Tut(n,e);break}case N.XMP:{Uut(n,e);break}case N.SVG:{Xut(n,e);break}case N.HTML:{xut(n,e);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{Fc(n,e);break}case N.BODY:{_ut(n,e);break}case N.FORM:{Eut(n,e);break}case N.NOBR:{Put(n,e);break}case N.MATH:{Wut(n,e);break}case N.TABLE:{Rut(n,e);break}case N.INPUT:{Nut(n,e);break}case N.PARAM:case N.TRACK:case N.SOURCE:{kut(n,e);break}case N.IMAGE:{But(n,e);break}case N.BUTTON:{Mut(n,e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{Lut(n,e);break}case N.IFRAME:{zut(n,e);break}case N.SELECT:{Vut(n,e);break}case N.OPTION:case N.OPTGROUP:{Hut(n,e);break}case N.NOEMBED:case N.NOFRAMES:{Cse(n,e);break}case N.FRAMESET:{but(n,e);break}case N.TEXTAREA:{Fut(n,e);break}case N.NOSCRIPT:{n.options.scriptingEnabled?Cse(n,e):Mse(n,e);break}case N.PLAINTEXT:{Cut(n,e);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:Mse(n,e)}}function $ut(n,e){if(n.openElements.hasInScope(N.BODY)&&(n.insertionMode=ue.AFTER_BODY,n.options.sourceCodeLocationInfo)){const t=n.openElements.tryPeekProperlyNestedBodyElement();t&&n._setEndLocation(t,e)}}function Yut(n,e){n.openElements.hasInScope(N.BODY)&&(n.insertionMode=ue.AFTER_BODY,Oye(n,e))}function qut(n,e){const t=e.tagID;n.openElements.hasInScope(t)&&(n.openElements.generateImpliedEndTags(),n.openElements.popUntilTagNamePopped(t))}function Kut(n){const e=n.openElements.tmplCount>0,{formElement:t}=n;e||(n.formElement=null),(t||e)&&n.openElements.hasInScope(N.FORM)&&(n.openElements.generateImpliedEndTags(),e?n.openElements.popUntilTagNamePopped(N.FORM):t&&n.openElements.remove(t))}function Zut(n){n.openElements.hasInButtonScope(N.P)||n._insertFakeElement(Me.P,N.P),n._closePElement()}function Qut(n){n.openElements.hasInListItemScope(N.LI)&&(n.openElements.generateImpliedEndTagsWithExclusion(N.LI),n.openElements.popUntilTagNamePopped(N.LI))}function Jut(n,e){const t=e.tagID;n.openElements.hasInScope(t)&&(n.openElements.generateImpliedEndTagsWithExclusion(t),n.openElements.popUntilTagNamePopped(t))}function ect(n){n.openElements.hasNumberedHeaderInScope()&&(n.openElements.generateImpliedEndTags(),n.openElements.popUntilNumberedHeaderPopped())}function tct(n,e){const t=e.tagID;n.openElements.hasInScope(t)&&(n.openElements.generateImpliedEndTags(),n.openElements.popUntilTagNamePopped(t),n.activeFormattingElements.clearToLastMarker())}function nct(n){n._reconstructActiveFormattingElements(),n._insertFakeElement(Me.BR,N.BR),n.openElements.pop(),n.framesetOk=!1}function Cye(n,e){const t=e.tagName,r=e.tagID;for(let i=n.openElements.stackTop;i>0;i--){const a=n.openElements.items[i],s=n.openElements.tagIDs[i];if(r===s&&(r!==N.UNKNOWN||n.treeAdapter.getTagName(a)===t)){n.openElements.generateImpliedEndTagsWithExclusion(r),n.openElements.stackTop>=i&&n.openElements.shortenToLength(i);break}if(n._isSpecialElement(a,s))break}}function Q3(n,e){switch(e.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{HW(n,e);break}case N.P:{Zut(n);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SEARCH:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{qut(n,e);break}case N.LI:{Qut(n);break}case N.DD:case N.DT:{Jut(n,e);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{ect(n);break}case N.BR:{nct(n);break}case N.BODY:{$ut(n,e);break}case N.HTML:{Yut(n,e);break}case N.FORM:{Kut(n);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{tct(n,e);break}case N.TEMPLATE:{px(n,e);break}default:Cye(n,e)}}function Mye(n,e){n.tmplInsertionModeStack.length>0?kye(n,e):GW(n,e)}function rct(n,e){var t;e.tagID===N.SCRIPT&&((t=n.scriptHandler)===null||t===void 0||t.call(n,n.openElements.current)),n.openElements.pop(),n.insertionMode=n.originalInsertionMode}function ict(n,e){n._err(e,ze.eofInElementThatCanContainOnlyText),n.openElements.pop(),n.insertionMode=n.originalInsertionMode,n.onEof(e)}function Z6(n,e){if(n.openElements.currentTagId!==void 0&&Sye.has(n.openElements.currentTagId))switch(n.pendingCharacterTokens.length=0,n.hasNonWhitespacePendingCharacterToken=!1,n.originalInsertionMode=n.insertionMode,n.insertionMode=ue.IN_TABLE_TEXT,e.type){case qn.CHARACTER:{Iye(n,e);break}case qn.WHITESPACE_CHARACTER:{Dye(n,e);break}}else B2(n,e)}function act(n,e){n.openElements.clearBackToTableContext(),n.activeFormattingElements.insertMarker(),n._insertElement(e,We.HTML),n.insertionMode=ue.IN_CAPTION}function sct(n,e){n.openElements.clearBackToTableContext(),n._insertElement(e,We.HTML),n.insertionMode=ue.IN_COLUMN_GROUP}function oct(n,e){n.openElements.clearBackToTableContext(),n._insertFakeElement(Me.COLGROUP,N.COLGROUP),n.insertionMode=ue.IN_COLUMN_GROUP,jW(n,e)}function lct(n,e){n.openElements.clearBackToTableContext(),n._insertElement(e,We.HTML),n.insertionMode=ue.IN_TABLE_BODY}function uct(n,e){n.openElements.clearBackToTableContext(),n._insertFakeElement(Me.TBODY,N.TBODY),n.insertionMode=ue.IN_TABLE_BODY,J3(n,e)}function cct(n,e){n.openElements.hasInTableScope(N.TABLE)&&(n.openElements.popUntilTagNamePopped(N.TABLE),n._resetInsertionMode(),n._processStartTag(e))}function hct(n,e){Aye(e)?n._appendElement(e,We.HTML):B2(n,e),e.ackSelfClosing=!0}function dct(n,e){!n.formElement&&n.openElements.tmplCount===0&&(n._insertElement(e,We.HTML),n.formElement=n.openElements.current,n.openElements.pop())}function ES(n,e){switch(e.tagID){case N.TD:case N.TH:case N.TR:{uct(n,e);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{Fc(n,e);break}case N.COL:{oct(n,e);break}case N.FORM:{dct(n,e);break}case N.TABLE:{cct(n,e);break}case N.TBODY:case N.TFOOT:case N.THEAD:{lct(n,e);break}case N.INPUT:{hct(n,e);break}case N.CAPTION:{act(n,e);break}case N.COLGROUP:{sct(n,e);break}default:B2(n,e)}}function nC(n,e){switch(e.tagID){case N.TABLE:{n.openElements.hasInTableScope(N.TABLE)&&(n.openElements.popUntilTagNamePopped(N.TABLE),n._resetInsertionMode());break}case N.TEMPLATE:{px(n,e);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:B2(n,e)}}function B2(n,e){const t=n.fosterParentingEnabled;n.fosterParentingEnabled=!0,Z3(n,e),n.fosterParentingEnabled=t}function Dye(n,e){n.pendingCharacterTokens.push(e)}function Iye(n,e){n.pendingCharacterTokens.push(e),n.hasNonWhitespacePendingCharacterToken=!0}function FT(n,e){let t=0;if(n.hasNonWhitespacePendingCharacterToken)for(;t<n.pendingCharacterTokens.length;t++)B2(n,n.pendingCharacterTokens[t]);else for(;t<n.pendingCharacterTokens.length;t++)n._insertCharacters(n.pendingCharacterTokens[t]);n.insertionMode=n.originalInsertionMode,n._processToken(e)}const Pye=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function fct(n,e){const t=e.tagID;Pye.has(t)?n.openElements.hasInTableScope(N.CAPTION)&&(n.openElements.generateImpliedEndTags(),n.openElements.popUntilTagNamePopped(N.CAPTION),n.activeFormattingElements.clearToLastMarker(),n.insertionMode=ue.IN_TABLE,ES(n,e)):Gs(n,e)}function pct(n,e){const t=e.tagID;switch(t){case N.CAPTION:case N.TABLE:{n.openElements.hasInTableScope(N.CAPTION)&&(n.openElements.generateImpliedEndTags(),n.openElements.popUntilTagNamePopped(N.CAPTION),n.activeFormattingElements.clearToLastMarker(),n.insertionMode=ue.IN_TABLE,t===N.TABLE&&nC(n,e));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:Q3(n,e)}}function jW(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.COL:{n._appendElement(e,We.HTML),e.ackSelfClosing=!0;break}case N.TEMPLATE:{Fc(n,e);break}default:tk(n,e)}}function mct(n,e){switch(e.tagID){case N.COLGROUP:{n.openElements.currentTagId===N.COLGROUP&&(n.openElements.pop(),n.insertionMode=ue.IN_TABLE);break}case N.TEMPLATE:{px(n,e);break}case N.COL:break;default:tk(n,e)}}function tk(n,e){n.openElements.currentTagId===N.COLGROUP&&(n.openElements.pop(),n.insertionMode=ue.IN_TABLE,n._processToken(e))}function J3(n,e){switch(e.tagID){case N.TR:{n.openElements.clearBackToTableBodyContext(),n._insertElement(e,We.HTML),n.insertionMode=ue.IN_ROW;break}case N.TH:case N.TD:{n.openElements.clearBackToTableBodyContext(),n._insertFakeElement(Me.TR,N.TR),n.insertionMode=ue.IN_ROW,eO(n,e);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{n.openElements.hasTableBodyContextInTableScope()&&(n.openElements.clearBackToTableBodyContext(),n.openElements.pop(),n.insertionMode=ue.IN_TABLE,ES(n,e));break}default:ES(n,e)}}function gH(n,e){const t=e.tagID;switch(e.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{n.openElements.hasInTableScope(t)&&(n.openElements.clearBackToTableBodyContext(),n.openElements.pop(),n.insertionMode=ue.IN_TABLE);break}case N.TABLE:{n.openElements.hasTableBodyContextInTableScope()&&(n.openElements.clearBackToTableBodyContext(),n.openElements.pop(),n.insertionMode=ue.IN_TABLE,nC(n,e));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:nC(n,e)}}function eO(n,e){switch(e.tagID){case N.TH:case N.TD:{n.openElements.clearBackToTableRowContext(),n._insertElement(e,We.HTML),n.insertionMode=ue.IN_CELL,n.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{n.openElements.hasInTableScope(N.TR)&&(n.openElements.clearBackToTableRowContext(),n.openElements.pop(),n.insertionMode=ue.IN_TABLE_BODY,J3(n,e));break}default:ES(n,e)}}function Lye(n,e){switch(e.tagID){case N.TR:{n.openElements.hasInTableScope(N.TR)&&(n.openElements.clearBackToTableRowContext(),n.openElements.pop(),n.insertionMode=ue.IN_TABLE_BODY);break}case N.TABLE:{n.openElements.hasInTableScope(N.TR)&&(n.openElements.clearBackToTableRowContext(),n.openElements.pop(),n.insertionMode=ue.IN_TABLE_BODY,gH(n,e));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(n.openElements.hasInTableScope(e.tagID)||n.openElements.hasInTableScope(N.TR))&&(n.openElements.clearBackToTableRowContext(),n.openElements.pop(),n.insertionMode=ue.IN_TABLE_BODY,gH(n,e));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:nC(n,e)}}function gct(n,e){const t=e.tagID;Pye.has(t)?(n.openElements.hasInTableScope(N.TD)||n.openElements.hasInTableScope(N.TH))&&(n._closeTableCell(),eO(n,e)):Gs(n,e)}function vct(n,e){const t=e.tagID;switch(t){case N.TD:case N.TH:{n.openElements.hasInTableScope(t)&&(n.openElements.generateImpliedEndTags(),n.openElements.popUntilTagNamePopped(t),n.activeFormattingElements.clearToLastMarker(),n.insertionMode=ue.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{n.openElements.hasInTableScope(t)&&(n._closeTableCell(),Lye(n,e));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:Q3(n,e)}}function Rye(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.OPTION:{n.openElements.currentTagId===N.OPTION&&n.openElements.pop(),n._insertElement(e,We.HTML);break}case N.OPTGROUP:{n.openElements.currentTagId===N.OPTION&&n.openElements.pop(),n.openElements.currentTagId===N.OPTGROUP&&n.openElements.pop(),n._insertElement(e,We.HTML);break}case N.HR:{n.openElements.currentTagId===N.OPTION&&n.openElements.pop(),n.openElements.currentTagId===N.OPTGROUP&&n.openElements.pop(),n._appendElement(e,We.HTML),e.ackSelfClosing=!0;break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{n.openElements.hasInSelectScope(N.SELECT)&&(n.openElements.popUntilTagNamePopped(N.SELECT),n._resetInsertionMode(),e.tagID!==N.SELECT&&n._processStartTag(e));break}case N.SCRIPT:case N.TEMPLATE:{Fc(n,e);break}}}function Nye(n,e){switch(e.tagID){case N.OPTGROUP:{n.openElements.stackTop>0&&n.openElements.currentTagId===N.OPTION&&n.openElements.tagIDs[n.openElements.stackTop-1]===N.OPTGROUP&&n.openElements.pop(),n.openElements.currentTagId===N.OPTGROUP&&n.openElements.pop();break}case N.OPTION:{n.openElements.currentTagId===N.OPTION&&n.openElements.pop();break}case N.SELECT:{n.openElements.hasInSelectScope(N.SELECT)&&(n.openElements.popUntilTagNamePopped(N.SELECT),n._resetInsertionMode());break}case N.TEMPLATE:{px(n,e);break}}}function yct(n,e){const t=e.tagID;t===N.CAPTION||t===N.TABLE||t===N.TBODY||t===N.TFOOT||t===N.THEAD||t===N.TR||t===N.TD||t===N.TH?(n.openElements.popUntilTagNamePopped(N.SELECT),n._resetInsertionMode(),n._processStartTag(e)):Rye(n,e)}function xct(n,e){const t=e.tagID;t===N.CAPTION||t===N.TABLE||t===N.TBODY||t===N.TFOOT||t===N.THEAD||t===N.TR||t===N.TD||t===N.TH?n.openElements.hasInTableScope(t)&&(n.openElements.popUntilTagNamePopped(N.SELECT),n._resetInsertionMode(),n.onEndTag(e)):Nye(n,e)}function _ct(n,e){switch(e.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{Fc(n,e);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{n.tmplInsertionModeStack[0]=ue.IN_TABLE,n.insertionMode=ue.IN_TABLE,ES(n,e);break}case N.COL:{n.tmplInsertionModeStack[0]=ue.IN_COLUMN_GROUP,n.insertionMode=ue.IN_COLUMN_GROUP,jW(n,e);break}case N.TR:{n.tmplInsertionModeStack[0]=ue.IN_TABLE_BODY,n.insertionMode=ue.IN_TABLE_BODY,J3(n,e);break}case N.TD:case N.TH:{n.tmplInsertionModeStack[0]=ue.IN_ROW,n.insertionMode=ue.IN_ROW,eO(n,e);break}default:n.tmplInsertionModeStack[0]=ue.IN_BODY,n.insertionMode=ue.IN_BODY,Gs(n,e)}}function bct(n,e){e.tagID===N.TEMPLATE&&px(n,e)}function kye(n,e){n.openElements.tmplCount>0?(n.openElements.popUntilTagNamePopped(N.TEMPLATE),n.activeFormattingElements.clearToLastMarker(),n.tmplInsertionModeStack.shift(),n._resetInsertionMode(),n.onEof(e)):GW(n,e)}function Sct(n,e){e.tagID===N.HTML?Gs(n,e):nk(n,e)}function Oye(n,e){var t;if(e.tagID===N.HTML){if(n.fragmentContext||(n.insertionMode=ue.AFTER_AFTER_BODY),n.options.sourceCodeLocationInfo&&n.openElements.tagIDs[0]===N.HTML){n._setEndLocation(n.openElements.items[0],e);const r=n.openElements.items[1];r&&!(!((t=n.treeAdapter.getNodeSourceCodeLocation(r))===null||t===void 0)&&t.endTag)&&n._setEndLocation(r,e)}}else nk(n,e)}function nk(n,e){n.insertionMode=ue.IN_BODY,Z3(n,e)}function wct(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.FRAMESET:{n._insertElement(e,We.HTML);break}case N.FRAME:{n._appendElement(e,We.HTML),e.ackSelfClosing=!0;break}case N.NOFRAMES:{Fc(n,e);break}}}function Tct(n,e){e.tagID===N.FRAMESET&&!n.openElements.isRootHtmlElementCurrent()&&(n.openElements.pop(),!n.fragmentContext&&n.openElements.currentTagId!==N.FRAMESET&&(n.insertionMode=ue.AFTER_FRAMESET))}function Ect(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.NOFRAMES:{Fc(n,e);break}}}function Act(n,e){e.tagID===N.HTML&&(n.insertionMode=ue.AFTER_AFTER_FRAMESET)}function Cct(n,e){e.tagID===N.HTML?Gs(n,e):$L(n,e)}function $L(n,e){n.insertionMode=ue.IN_BODY,Z3(n,e)}function Mct(n,e){switch(e.tagID){case N.HTML:{Gs(n,e);break}case N.NOFRAMES:{Fc(n,e);break}}}function Dct(n,e){e.chars=ui,n._insertCharacters(e)}function Ict(n,e){n._insertCharacters(e),n.framesetOk=!1}function Bye(n){for(;n.treeAdapter.getNamespaceURI(n.openElements.current)!==We.HTML&&n.openElements.currentTagId!==void 0&&!n._isIntegrationPoint(n.openElements.currentTagId,n.openElements.current);)n.openElements.pop()}function Pct(n,e){if(Xlt(e))Bye(n),n._startTagOutsideForeignContent(e);else{const t=n._getAdjustedCurrentElement(),r=n.treeAdapter.getNamespaceURI(t);r===We.MATHML?_ye(e):r===We.SVG&&($lt(e),bye(e)),VW(e),e.selfClosing?n._appendElement(e,r):n._insertElement(e,r),e.ackSelfClosing=!0}}function Lct(n,e){if(e.tagID===N.P||e.tagID===N.BR){Bye(n),n._endTagOutsideForeignContent(e);return}for(let t=n.openElements.stackTop;t>0;t--){const r=n.openElements.items[t];if(n.treeAdapter.getNamespaceURI(r)===We.HTML){n._endTagOutsideForeignContent(e);break}const i=n.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,n.openElements.shortenToLength(t);break}}}Me.AREA,Me.BASE,Me.BASEFONT,Me.BGSOUND,Me.BR,Me.COL,Me.EMBED,Me.FRAME,Me.HR,Me.IMG,Me.INPUT,Me.KEYGEN,Me.LINK,Me.META,Me.PARAM,Me.SOURCE,Me.TRACK,Me.WBR;const Rct=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,Nct=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Dse={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Fye(n,e){const t=jct(n),r=uye("type",{handlers:{root:kct,element:Oct,text:Bct,comment:zye,doctype:Fct,raw:zct},unknown:Vct}),i={parser:t?new Ase(Dse):Ase.getFragmentParser(void 0,Dse),handle(o){r(o,i)},stitches:!1,options:e||{}};r(n,i),uw(i,fd());const a=t?i.parser.document:i.parser.getFragment(),s=Wot(a,{file:i.options.file});return i.stitches&&K3(s,"comment",function(o,l,u){const c=o;if(c.value.stitch&&u&&l!==void 0){const h=u.children;return h[l]=c.value.stitch,l}}),s.type==="root"&&s.children.length===1&&s.children[0].type===n.type?s.children[0]:s}function Uye(n,e){let t=-1;if(n)for(;++t<n.length;)e.handle(n[t])}function kct(n,e){Uye(n.children,e)}function Oct(n,e){Hct(n,e),Uye(n.children,e),Gct(n,e)}function Bct(n,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const t={type:qn.CHARACTER,chars:n.value,location:F2(n)};uw(e,fd(n)),e.parser.currentToken=t,e.parser._processToken(e.parser.currentToken)}function Fct(n,e){const t={type:qn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:F2(n)};uw(e,fd(n)),e.parser.currentToken=t,e.parser._processToken(e.parser.currentToken)}function Uct(n,e){e.stitches=!0;const t=Wct(n);if("children"in n&&"children"in t){const r=Fye({type:"root",children:n.children},e.options);t.children=r.children}zye({type:"comment",value:{stitch:t}},e)}function zye(n,e){const t=n.value,r={type:qn.COMMENT,data:t,location:F2(n)};uw(e,fd(n)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function zct(n,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,Vye(e,fd(n)),e.parser.tokenizer.write(e.options.tagfilter?n.value.replace(Rct,"&lt;$1$2"):n.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const t=e.parser.tokenizer._consume();e.parser.tokenizer._callState(t)}}function Vct(n,e){const t=n;if(e.options.passThrough&&e.options.passThrough.includes(t.type))Uct(t,e);else{let r="";throw Nct.has(t.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+t.type+"` node"+r)}}function uw(n,e){Vye(n,e);const t=n.parser.tokenizer.currentCharacterToken;t&&t.location&&(t.location.endLine=n.parser.tokenizer.preprocessor.line,t.location.endCol=n.parser.tokenizer.preprocessor.col+1,t.location.endOffset=n.parser.tokenizer.preprocessor.offset+1,n.parser.currentToken=t,n.parser._processToken(n.parser.currentToken)),n.parser.tokenizer.paused=!1,n.parser.tokenizer.inLoop=!1,n.parser.tokenizer.active=!1,n.parser.tokenizer.returnState=ji.DATA,n.parser.tokenizer.charRefCode=-1,n.parser.tokenizer.consumedAfterSnapshot=-1,n.parser.tokenizer.currentLocation=null,n.parser.tokenizer.currentCharacterToken=null,n.parser.tokenizer.currentToken=null,n.parser.tokenizer.currentAttr={name:"",value:""}}function Vye(n,e){if(e&&e.offset!==void 0){const t={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};n.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,n.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,n.parser.tokenizer.preprocessor.line=e.line,n.parser.tokenizer.currentLocation=t}}function Hct(n,e){const t=n.tagName.toLowerCase();if(e.parser.tokenizer.state===ji.PLAINTEXT)return;uw(e,fd(n));const r=e.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:p0.html;i===p0.html&&t==="svg"&&(i=p0.svg);const a=Kot({...n,children:[]},{space:i===p0.svg?"svg":"html"}),s={type:qn.START_TAG,tagName:t,tagID:lw(t),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in a?a.attrs:[],location:F2(n)};e.parser.currentToken=s,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=t}function Gct(n,e){const t=n.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&ilt.includes(t)||e.parser.tokenizer.state===ji.PLAINTEXT)return;uw(e,j3(n));const r={type:qn.END_TAG,tagName:t,tagID:lw(t),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:F2(n)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),t===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===ji.RCDATA||e.parser.tokenizer.state===ji.RAWTEXT||e.parser.tokenizer.state===ji.SCRIPT_DATA)&&(e.parser.tokenizer.state=ji.DATA)}function jct(n){const e=n.type==="root"?n.children[0]:n;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function F2(n){const e=fd(n)||{line:void 0,column:void 0,offset:void 0},t=j3(n)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:t.line,endCol:t.column,endOffset:t.offset}}function Wct(n){return"children"in n?TS({...n,children:[]}):TS(n)}function Hye(n){return function(e,t){return Fye(e,{...n,file:t})}}function Ise(n,e){const t=String(n);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=t.indexOf(e);for(;i!==-1;)r++,i=t.indexOf(e,i+e.length);return r}function Xct(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function $ct(n,e,t){const i=Y3((t||{}).ignore||[]),a=Yct(e);let s=-1;for(;++s<a.length;)rye(n,"text",o);function o(u,c){let h=-1,d;for(;++h<c.length;){const f=c[h],p=d?d.children:void 0;if(i(f,p?p.indexOf(f):void 0,d))return;d=f}if(d)return l(u,c)}function l(u,c){const h=c[c.length-1],d=a[s][0],f=a[s][1];let p=0;const g=h.children.indexOf(u);let v=!1,b=[];d.lastIndex=0;let S=d.exec(u.value);for(;S;){const w=S.index,E={index:S.index,input:S.input,stack:[...c,u]};let T=f(...S,E);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?d.lastIndex=w+1:(p!==w&&b.push({type:"text",value:u.value.slice(p,w)}),Array.isArray(T)?b.push(...T):T&&b.push(T),p=w+S[0].length,v=!0),!d.global)break;S=d.exec(u.value)}return v?(p<u.value.length&&b.push({type:"text",value:u.value.slice(p)}),h.children.splice(g,1,...b)):b=[u],g+b.length}}function Yct(n){const e=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const t=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<t.length;){const i=t[r];e.push([qct(i[0]),Kct(i[1])])}return e}function qct(n){return typeof n=="string"?new RegExp(Xct(n),"g"):n}function Kct(n){return typeof n=="function"?n:function(){return n}}const Q6="phrasing",J6=["autolink","link","image","label"];function Zct(){return{transforms:[iht],enter:{literalAutolink:Jct,literalAutolinkEmail:eU,literalAutolinkHttp:eU,literalAutolinkWww:eU},exit:{literalAutolink:rht,literalAutolinkEmail:nht,literalAutolinkHttp:eht,literalAutolinkWww:tht}}}function Qct(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Q6,notInConstruct:J6},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Q6,notInConstruct:J6},{character:":",before:"[ps]",after:"\\/",inConstruct:Q6,notInConstruct:J6}]}}function Jct(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function eU(n){this.config.enter.autolinkProtocol.call(this,n)}function eht(n){this.config.exit.autolinkProtocol.call(this,n)}function tht(n){this.config.exit.data.call(this,n);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(n)}function nht(n){this.config.exit.autolinkEmail.call(this,n)}function rht(n){this.exit(n)}function iht(n){$ct(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,aht],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),sht]],{ignore:["link","linkReference"]})}function aht(n,e,t,r,i){let a="";if(!Gye(i)||(/^w/i.test(e)&&(t=e+t,e="",a="http://"),!oht(t)))return!1;const s=lht(t+r);if(!s[0])return!1;const o={type:"link",title:null,url:a+e+s[0],children:[{type:"text",value:e+s[0]}]};return s[1]?[o,{type:"text",value:s[1]}]:o}function sht(n,e,t,r){return!Gye(r,!0)||/[-\d_]$/.test(t)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+t,children:[{type:"text",value:e+"@"+t}]}}function oht(n){const e=n.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function lht(n){const e=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!e)return[n,void 0];n=n.slice(0,e.index);let t=e[0],r=t.indexOf(")");const i=Ise(n,"(");let a=Ise(n,")");for(;r!==-1&&i>a;)n+=t.slice(0,r+1),t=t.slice(r+1),r=t.indexOf(")"),a++;return[n,t]}function Gye(n,e){const t=n.input.charCodeAt(n.index-1);return(n.index===0||Zy(t)||W3(t))&&(!e||t!==47)}jye.peek=vht;function uht(){this.buffer()}function cht(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function hht(){this.buffer()}function dht(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function fht(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Mc(this.sliceSerialize(n)).toLowerCase(),t.label=e}function pht(n){this.exit(n)}function mht(n){const e=this.resume(),t=this.stack[this.stack.length-1];t.type,t.identifier=Mc(this.sliceSerialize(n)).toLowerCase(),t.label=e}function ght(n){this.exit(n)}function vht(){return"["}function jye(n,e,t,r){const i=t.createTracker(r);let a=i.move("[^");const s=t.enter("footnoteReference"),o=t.enter("reference");return a+=i.move(t.safe(t.associationId(n),{after:"]",before:a})),o(),s(),a+=i.move("]"),a}function yht(){return{enter:{gfmFootnoteCallString:uht,gfmFootnoteCall:cht,gfmFootnoteDefinitionLabelString:hht,gfmFootnoteDefinition:dht},exit:{gfmFootnoteCallString:fht,gfmFootnoteCall:pht,gfmFootnoteDefinitionLabelString:mht,gfmFootnoteDefinition:ght}}}function xht(n){let e=!1;return n&&n.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:t,footnoteReference:jye},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function t(r,i,a,s){const o=a.createTracker(s);let l=o.move("[^");const u=a.enter("footnoteDefinition"),c=a.enter("label");return l+=o.move(a.safe(a.associationId(r),{before:l,after:"]"})),c(),l+=o.move("]:"),r.children&&r.children.length>0&&(o.shift(4),l+=o.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,o.current()),e?Wye:_ht))),u(),l}}function _ht(n,e,t){return e===0?n:Wye(n,e,t)}function Wye(n,e,t){return(t?"":"    ")+n}const bht=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];Xye.peek=Aht;function Sht(){return{canContainEols:["delete"],enter:{strikethrough:Tht},exit:{strikethrough:Eht}}}function wht(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:bht}],handlers:{delete:Xye}}}function Tht(n){this.enter({type:"delete",children:[]},n)}function Eht(n){this.exit(n)}function Xye(n,e,t,r){const i=t.createTracker(r),a=t.enter("strikethrough");let s=i.move("~~");return s+=t.containerPhrasing(n,{...i.current(),before:s,after:"~"}),s+=i.move("~~"),a(),s}function Aht(){return"~"}function Cht(n){return n.length}function Mht(n,e){const t=e||{},r=(t.align||[]).concat(),i=t.stringLength||Cht,a=[],s=[],o=[],l=[];let u=0,c=-1;for(;++c<n.length;){const m=[],g=[];let v=-1;for(n[c].length>u&&(u=n[c].length);++v<n[c].length;){const b=Dht(n[c][v]);if(t.alignDelimiters!==!1){const S=i(b);g[v]=S,(l[v]===void 0||S>l[v])&&(l[v]=S)}m.push(b)}s[c]=m,o[c]=g}let h=-1;if(typeof r=="object"&&"length"in r)for(;++h<u;)a[h]=Pse(r[h]);else{const m=Pse(r);for(;++h<u;)a[h]=m}h=-1;const d=[],f=[];for(;++h<u;){const m=a[h];let g="",v="";m===99?(g=":",v=":"):m===108?g=":":m===114&&(v=":");let b=t.alignDelimiters===!1?1:Math.max(1,l[h]-g.length-v.length);const S=g+"-".repeat(b)+v;t.alignDelimiters!==!1&&(b=g.length+b+v.length,b>l[h]&&(l[h]=b),f[h]=b),d[h]=S}s.splice(1,0,d),o.splice(1,0,f),c=-1;const p=[];for(;++c<s.length;){const m=s[c],g=o[c];h=-1;const v=[];for(;++h<u;){const b=m[h]||"";let S="",w="";if(t.alignDelimiters!==!1){const E=l[h]-(g[h]||0),T=a[h];T===114?S=" ".repeat(E):T===99?E%2?(S=" ".repeat(E/2+.5),w=" ".repeat(E/2-.5)):(S=" ".repeat(E/2),w=S):w=" ".repeat(E)}t.delimiterStart!==!1&&!h&&v.push("|"),t.padding!==!1&&!(t.alignDelimiters===!1&&b==="")&&(t.delimiterStart!==!1||h)&&v.push(" "),t.alignDelimiters!==!1&&v.push(S),v.push(b),t.alignDelimiters!==!1&&v.push(w),t.padding!==!1&&v.push(" "),(t.delimiterEnd!==!1||h!==u-1)&&v.push("|")}p.push(t.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return p.join(`
`)}function Dht(n){return n==null?"":String(n)}function Pse(n){const e=typeof n=="string"?n.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Iht(n,e,t,r){const i=t.enter("blockquote"),a=t.createTracker(r);a.move("> "),a.shift(2);const s=t.indentLines(t.containerFlow(n,a.current()),Pht);return i(),s}function Pht(n,e,t){return">"+(t?"":" ")+n}function Lht(n,e){return Lse(n,e.inConstruct,!0)&&!Lse(n,e.notInConstruct,!1)}function Lse(n,e,t){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return t;let r=-1;for(;++r<e.length;)if(n.includes(e[r]))return!0;return!1}function Rse(n,e,t,r){let i=-1;for(;++i<t.unsafe.length;)if(t.unsafe[i].character===`
`&&Lht(t.stack,t.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Rht(n,e){const t=String(n);let r=t.indexOf(e),i=r,a=0,s=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>s&&(s=a):a=1,i=r+e.length,r=t.indexOf(e,i);return s}function Nht(n,e){return!!(e.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function kht(n){const e=n.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Oht(n,e,t,r){const i=kht(t),a=n.value||"",s=i==="`"?"GraveAccent":"Tilde";if(Nht(n,t)){const h=t.enter("codeIndented"),d=t.indentLines(a,Bht);return h(),d}const o=t.createTracker(r),l=i.repeat(Math.max(Rht(a,i)+1,3)),u=t.enter("codeFenced");let c=o.move(l);if(n.lang){const h=t.enter(`codeFencedLang${s}`);c+=o.move(t.safe(n.lang,{before:c,after:" ",encode:["`"],...o.current()})),h()}if(n.lang&&n.meta){const h=t.enter(`codeFencedMeta${s}`);c+=o.move(" "),c+=o.move(t.safe(n.meta,{before:c,after:`
`,encode:["`"],...o.current()})),h()}return c+=o.move(`
`),a&&(c+=o.move(a+`
`)),c+=o.move(l),u(),c}function Bht(n,e,t){return(t?"":"    ")+n}function WW(n){const e=n.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Fht(n,e,t,r){const i=WW(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("definition");let o=t.enter("label");const l=t.createTracker(r);let u=l.move("[");return u+=l.move(t.safe(t.associationId(n),{before:u,after:"]",...l.current()})),u+=l.move("]: "),o(),!n.url||/[\0- \u007F]/.test(n.url)?(o=t.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(t.safe(n.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=t.enter("destinationRaw"),u+=l.move(t.safe(n.url,{before:u,after:n.title?" ":`
`,...l.current()}))),o(),n.title&&(o=t.enter(`title${a}`),u+=l.move(" "+i),u+=l.move(t.safe(n.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),s(),u}function Uht(n){const e=n.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function rC(n){return"&#x"+n.toString(16).toUpperCase()+";"}function rk(n,e,t){const r=wS(n),i=wS(e);return r===void 0?i===void 0?t==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}$ye.peek=zht;function $ye(n,e,t,r){const i=Uht(t),a=t.enter("emphasis"),s=t.createTracker(r),o=s.move(i);let l=s.move(t.containerPhrasing(n,{after:i,before:o,...s.current()}));const u=l.charCodeAt(0),c=rk(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=rC(u)+l.slice(1));const h=l.charCodeAt(l.length-1),d=rk(r.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+rC(h));const f=s.move(i);return a(),t.attentionEncodeSurroundingInfo={after:d.outside,before:c.outside},o+l+f}function zht(n,e,t){return t.options.emphasis||"*"}function Vht(n,e){let t=!1;return K3(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return t=!0,lH}),!!((!n.depth||n.depth<3)&&PW(n)&&(e.options.setext||t))}function Hht(n,e,t,r){const i=Math.max(Math.min(6,n.depth||1),1),a=t.createTracker(r);if(Vht(n,t)){const c=t.enter("headingSetext"),h=t.enter("phrasing"),d=t.containerPhrasing(n,{...a.current(),before:`
`,after:`
`});return h(),c(),d+`
`+(i===1?"=":"-").repeat(d.length-(Math.max(d.lastIndexOf("\r"),d.lastIndexOf(`
`))+1))}const s="#".repeat(i),o=t.enter("headingAtx"),l=t.enter("phrasing");a.move(s+" ");let u=t.containerPhrasing(n,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(u)&&(u=rC(u.charCodeAt(0))+u.slice(1)),u=u?s+" "+u:s,t.options.closeAtx&&(u+=" "+s),l(),o(),u}Yye.peek=Ght;function Yye(n){return n.value||""}function Ght(){return"<"}qye.peek=jht;function qye(n,e,t,r){const i=WW(t),a=i==='"'?"Quote":"Apostrophe",s=t.enter("image");let o=t.enter("label");const l=t.createTracker(r);let u=l.move("![");return u+=l.move(t.safe(n.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),o(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(o=t.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(t.safe(n.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(o=t.enter("destinationRaw"),u+=l.move(t.safe(n.url,{before:u,after:n.title?" ":")",...l.current()}))),o(),n.title&&(o=t.enter(`title${a}`),u+=l.move(" "+i),u+=l.move(t.safe(n.title,{before:u,after:i,...l.current()})),u+=l.move(i),o()),u+=l.move(")"),s(),u}function jht(){return"!"}Kye.peek=Wht;function Kye(n,e,t,r){const i=n.referenceType,a=t.enter("imageReference");let s=t.enter("label");const o=t.createTracker(r);let l=o.move("![");const u=t.safe(n.alt,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),s();const c=t.stack;t.stack=[],s=t.enter("reference");const h=t.safe(t.associationId(n),{before:l,after:"]",...o.current()});return s(),t.stack=c,a(),i==="full"||!u||u!==h?l+=o.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function Wht(){return"!"}Zye.peek=Xht;function Zye(n,e,t){let r=n.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<t.unsafe.length;){const s=t.unsafe[a],o=t.compilePattern(s);let l;if(s.atBreak)for(;l=o.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function Xht(){return"`"}function Qye(n,e){const t=PW(n);return!!(!e.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(t===n.url||"mailto:"+t===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}Jye.peek=$ht;function Jye(n,e,t,r){const i=WW(t),a=i==='"'?"Quote":"Apostrophe",s=t.createTracker(r);let o,l;if(Qye(n,t)){const c=t.stack;t.stack=[],o=t.enter("autolink");let h=s.move("<");return h+=s.move(t.containerPhrasing(n,{before:h,after:">",...s.current()})),h+=s.move(">"),o(),t.stack=c,h}o=t.enter("link"),l=t.enter("label");let u=s.move("[");return u+=s.move(t.containerPhrasing(n,{before:u,after:"](",...s.current()})),u+=s.move("]("),l(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(l=t.enter("destinationLiteral"),u+=s.move("<"),u+=s.move(t.safe(n.url,{before:u,after:">",...s.current()})),u+=s.move(">")):(l=t.enter("destinationRaw"),u+=s.move(t.safe(n.url,{before:u,after:n.title?" ":")",...s.current()}))),l(),n.title&&(l=t.enter(`title${a}`),u+=s.move(" "+i),u+=s.move(t.safe(n.title,{before:u,after:i,...s.current()})),u+=s.move(i),l()),u+=s.move(")"),o(),u}function $ht(n,e,t){return Qye(n,t)?"<":"["}exe.peek=Yht;function exe(n,e,t,r){const i=n.referenceType,a=t.enter("linkReference");let s=t.enter("label");const o=t.createTracker(r);let l=o.move("[");const u=t.containerPhrasing(n,{before:l,after:"]",...o.current()});l+=o.move(u+"]["),s();const c=t.stack;t.stack=[],s=t.enter("reference");const h=t.safe(t.associationId(n),{before:l,after:"]",...o.current()});return s(),t.stack=c,a(),i==="full"||!u||u!==h?l+=o.move(h+"]"):i==="shortcut"?l=l.slice(0,-1):l+=o.move("]"),l}function Yht(){return"["}function XW(n){const e=n.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function qht(n){const e=XW(n),t=n.options.bulletOther;if(!t)return e==="*"?"-":"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(t===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+t+"`) to be different");return t}function Kht(n){const e=n.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function txe(n){const e=n.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Zht(n,e,t,r){const i=t.enter("list"),a=t.bulletCurrent;let s=n.ordered?Kht(t):XW(t);const o=n.ordered?s==="."?")":".":qht(t);let l=e&&t.bulletLastUsed?s===t.bulletLastUsed:!1;if(!n.ordered){const c=n.children?n.children[0]:void 0;if((s==="*"||s==="-")&&c&&(!c.children||!c.children[0])&&t.stack[t.stack.length-1]==="list"&&t.stack[t.stack.length-2]==="listItem"&&t.stack[t.stack.length-3]==="list"&&t.stack[t.stack.length-4]==="listItem"&&t.indexStack[t.indexStack.length-1]===0&&t.indexStack[t.indexStack.length-2]===0&&t.indexStack[t.indexStack.length-3]===0&&(l=!0),txe(t)===s&&c){let h=-1;for(;++h<n.children.length;){const d=n.children[h];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(s=o),t.bulletCurrent=s;const u=t.containerFlow(n,r);return t.bulletLastUsed=s,t.bulletCurrent=a,i(),u}function Qht(n){const e=n.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Jht(n,e,t,r){const i=Qht(t);let a=t.bulletCurrent||XW(t);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(t.options.incrementListMarker===!1?0:e.children.indexOf(n))+a);let s=a.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||n.spread))&&(s=Math.ceil(s/4)*4);const o=t.createTracker(r);o.move(a+" ".repeat(s-a.length)),o.shift(s);const l=t.enter("listItem"),u=t.indentLines(t.containerFlow(n,o.current()),c);return l(),u;function c(h,d,f){return d?(f?"":" ".repeat(s))+h:(f?a:a+" ".repeat(s-a.length))+h}}function edt(n,e,t,r){const i=t.enter("paragraph"),a=t.enter("phrasing"),s=t.containerPhrasing(n,r);return a(),i(),s}const tdt=Y3(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function ndt(n,e,t,r){return(n.children.some(function(s){return tdt(s)})?t.containerPhrasing:t.containerFlow).call(t,n,r)}function rdt(n){const e=n.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}nxe.peek=idt;function nxe(n,e,t,r){const i=rdt(t),a=t.enter("strong"),s=t.createTracker(r),o=s.move(i+i);let l=s.move(t.containerPhrasing(n,{after:i,before:o,...s.current()}));const u=l.charCodeAt(0),c=rk(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=rC(u)+l.slice(1));const h=l.charCodeAt(l.length-1),d=rk(r.after.charCodeAt(0),h,i);d.inside&&(l=l.slice(0,-1)+rC(h));const f=s.move(i+i);return a(),t.attentionEncodeSurroundingInfo={after:d.outside,before:c.outside},o+l+f}function idt(n,e,t){return t.options.strong||"*"}function adt(n,e,t,r){return t.safe(n.value,r)}function sdt(n){const e=n.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function odt(n,e,t){const r=(txe(t)+(t.options.ruleSpaces?" ":"")).repeat(sdt(t));return t.options.ruleSpaces?r.slice(0,-1):r}const rxe={blockquote:Iht,break:Rse,code:Oht,definition:Fht,emphasis:$ye,hardBreak:Rse,heading:Hht,html:Yye,image:qye,imageReference:Kye,inlineCode:Zye,link:Jye,linkReference:exe,list:Zht,listItem:Jht,paragraph:edt,root:ndt,strong:nxe,text:adt,thematicBreak:odt};function ldt(){return{enter:{table:udt,tableData:Nse,tableHeader:Nse,tableRow:hdt},exit:{codeText:ddt,table:cdt,tableData:tU,tableHeader:tU,tableRow:tU}}}function udt(n){const e=n._align;this.enter({type:"table",align:e.map(function(t){return t==="none"?null:t}),children:[]},n),this.data.inTable=!0}function cdt(n){this.exit(n),this.data.inTable=void 0}function hdt(n){this.enter({type:"tableRow",children:[]},n)}function tU(n){this.exit(n)}function Nse(n){this.enter({type:"tableCell",children:[]},n)}function ddt(n){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,fdt));const t=this.stack[this.stack.length-1];t.type,t.value=e,this.exit(n)}function fdt(n,e){return e==="|"?e:n}function pdt(n){const e=n||{},t=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,a=t?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:d,table:s,tableCell:l,tableRow:o}};function s(f,p,m,g){return u(c(f,m,g),f.align)}function o(f,p,m,g){const v=h(f,m,g),b=u([v]);return b.slice(0,b.indexOf(`
`))}function l(f,p,m,g){const v=m.enter("tableCell"),b=m.enter("phrasing"),S=m.containerPhrasing(f,{...g,before:a,after:a});return b(),v(),S}function u(f,p){return Mht(f,{align:p,alignDelimiters:r,padding:t,stringLength:i})}function c(f,p,m){const g=f.children;let v=-1;const b=[],S=p.enter("table");for(;++v<g.length;)b[v]=h(g[v],p,m);return S(),b}function h(f,p,m){const g=f.children;let v=-1;const b=[],S=p.enter("tableRow");for(;++v<g.length;)b[v]=l(g[v],f,p,m);return S(),b}function d(f,p,m){let g=rxe.inlineCode(f,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function mdt(){return{exit:{taskListCheckValueChecked:kse,taskListCheckValueUnchecked:kse,paragraph:vdt}}}function gdt(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:ydt}}}function kse(n){const e=this.stack[this.stack.length-2];e.type,e.checked=n.type==="taskListCheckValueChecked"}function vdt(n){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const t=this.stack[this.stack.length-1];t.type;const r=t.children[0];if(r&&r.type==="text"){const i=e.children;let a=-1,s;for(;++a<i.length;){const o=i[a];if(o.type==="paragraph"){s=o;break}}s===t&&(r.value=r.value.slice(1),r.value.length===0?t.children.shift():t.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,t.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function ydt(n,e,t,r){const i=n.children[0],a=typeof n.checked=="boolean"&&i&&i.type==="paragraph",s="["+(n.checked?"x":" ")+"] ",o=t.createTracker(r);a&&o.move(s);let l=rxe.listItem(n,e,t,{...r,...o.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+s}}function xdt(){return[Zct(),yht(),Sht(),ldt(),mdt()]}function _dt(n){return{extensions:[Qct(),xht(n),wht(),pdt(n),gdt()]}}const bdt={tokenize:Cdt,partial:!0},ixe={tokenize:Mdt,partial:!0},axe={tokenize:Ddt,partial:!0},sxe={tokenize:Idt,partial:!0},Sdt={tokenize:Pdt,partial:!0},oxe={name:"wwwAutolink",tokenize:Edt,previous:uxe},lxe={name:"protocolAutolink",tokenize:Adt,previous:cxe},up={name:"emailAutolink",tokenize:Tdt,previous:hxe},pd={};function wdt(){return{text:pd}}let kv=48;for(;kv<123;)pd[kv]=up,kv++,kv===58?kv=65:kv===91&&(kv=97);pd[43]=up;pd[45]=up;pd[46]=up;pd[95]=up;pd[72]=[up,lxe];pd[104]=[up,lxe];pd[87]=[up,oxe];pd[119]=[up,oxe];function Tdt(n,e,t){const r=this;let i,a;return s;function s(h){return!vH(h)||!hxe.call(r,r.previous)||$W(r.events)?t(h):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),o(h))}function o(h){return vH(h)?(n.consume(h),o):h===64?(n.consume(h),l):t(h)}function l(h){return h===46?n.check(Sdt,c,u)(h):h===45||h===95||Os(h)?(a=!0,n.consume(h),l):c(h)}function u(h){return n.consume(h),i=!0,l}function c(h){return a&&i&&co(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),e(h)):t(h)}}function Edt(n,e,t){const r=this;return i;function i(s){return s!==87&&s!==119||!uxe.call(r,r.previous)||$W(r.events)?t(s):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(bdt,n.attempt(ixe,n.attempt(axe,a),t),t)(s))}function a(s){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),e(s)}}function Adt(n,e,t){const r=this;let i="",a=!1;return s;function s(h){return(h===72||h===104)&&cxe.call(r,r.previous)&&!$W(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),i+=String.fromCodePoint(h),n.consume(h),o):t(h)}function o(h){if(co(h)&&i.length<5)return i+=String.fromCodePoint(h),n.consume(h),o;if(h===58){const d=i.toLowerCase();if(d==="http"||d==="https")return n.consume(h),l}return t(h)}function l(h){return h===47?(n.consume(h),a?u:(a=!0,l)):t(h)}function u(h){return h===null||QN(h)||$r(h)||Zy(h)||W3(h)?t(h):n.attempt(ixe,n.attempt(axe,c),t)(h)}function c(h){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),e(h)}}function Cdt(n,e,t){let r=0;return i;function i(s){return(s===87||s===119)&&r<3?(r++,n.consume(s),i):s===46&&r===3?(n.consume(s),a):t(s)}function a(s){return s===null?t(s):e(s)}}function Mdt(n,e,t){let r,i,a;return s;function s(u){return u===46||u===95?n.check(sxe,l,o)(u):u===null||$r(u)||Zy(u)||u!==45&&W3(u)?l(u):(a=!0,n.consume(u),s)}function o(u){return u===95?r=!0:(i=r,r=void 0),n.consume(u),s}function l(u){return i||r||!a?t(u):e(u)}}function Ddt(n,e){let t=0,r=0;return i;function i(s){return s===40?(t++,n.consume(s),i):s===41&&r<t?a(s):s===33||s===34||s===38||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===60||s===63||s===93||s===95||s===126?n.check(sxe,e,a)(s):s===null||$r(s)||Zy(s)?e(s):(n.consume(s),i)}function a(s){return s===41&&r++,n.consume(s),i}}function Idt(n,e,t){return r;function r(o){return o===33||o===34||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===63||o===95||o===126?(n.consume(o),r):o===38?(n.consume(o),a):o===93?(n.consume(o),i):o===60||o===null||$r(o)||Zy(o)?e(o):t(o)}function i(o){return o===null||o===40||o===91||$r(o)||Zy(o)?e(o):r(o)}function a(o){return co(o)?s(o):t(o)}function s(o){return o===59?(n.consume(o),r):co(o)?(n.consume(o),s):t(o)}}function Pdt(n,e,t){return r;function r(a){return n.consume(a),i}function i(a){return Os(a)?t(a):e(a)}}function uxe(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||$r(n)}function cxe(n){return!co(n)}function hxe(n){return!(n===47||vH(n))}function vH(n){return n===43||n===45||n===46||n===95||Os(n)}function $W(n){let e=n.length,t=!1;for(;e--;){const r=n[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){t=!0;break}if(r._gfmAutolinkLiteralWalkedInto){t=!1;break}}return n.length>0&&!t&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),t}const Ldt={tokenize:zdt,partial:!0};function Rdt(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Bdt,continuation:{tokenize:Fdt},exit:Udt}},text:{91:{name:"gfmFootnoteCall",tokenize:Odt},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ndt,resolveTo:kdt}}}}function Ndt(n,e,t){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){s=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return o;function o(l){if(!s||!s._balanced)return t(l);const u=Mc(r.sliceSerialize({start:s.end,end:r.now()}));return u.codePointAt(0)!==94||!a.includes(u.slice(1))?t(l):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(l),n.exit("gfmFootnoteCallLabelMarker"),e(l))}}function kdt(n,e){let t=n.length;for(;t--;)if(n[t][1].type==="labelImage"&&n[t][0]==="enter"){n[t][1];break}n[t+1][1].type="data",n[t+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[t+3][1].start),end:Object.assign({},n[n.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},n[t+3][1].end),end:Object.assign({},n[t+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},n[n.length-1][1].start)},s={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},o=[n[t+1],n[t+2],["enter",r,e],n[t+3],n[t+4],["enter",i,e],["exit",i,e],["enter",a,e],["enter",s,e],["exit",s,e],["exit",a,e],n[n.length-2],n[n.length-1],["exit",r,e]];return n.splice(t,n.length-t+1,...o),n}function Odt(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,s;return o;function o(h){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),l}function l(h){return h!==94?t(h):(n.enter("gfmFootnoteCallMarker"),n.consume(h),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",u)}function u(h){if(a>999||h===93&&!s||h===null||h===91||$r(h))return t(h);if(h===93){n.exit("chunkString");const d=n.exit("gfmFootnoteCallString");return i.includes(Mc(r.sliceSerialize(d)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),e):t(h)}return $r(h)||(s=!0),a++,n.consume(h),h===92?c:u}function c(h){return h===91||h===92||h===93?(n.consume(h),a++,u):u(h)}}function Bdt(n,e,t){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,s=0,o;return l;function l(p){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",c):t(p)}function c(p){if(s>999||p===93&&!o||p===null||p===91||$r(p))return t(p);if(p===93){n.exit("chunkString");const m=n.exit("gfmFootnoteDefinitionLabelString");return a=Mc(r.sliceSerialize(m)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(p),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),d}return $r(p)||(o=!0),s++,n.consume(p),p===92?h:c}function h(p){return p===91||p===92||p===93?(n.consume(p),s++,c):c(p)}function d(p){return p===58?(n.enter("definitionMarker"),n.consume(p),n.exit("definitionMarker"),i.includes(a)||i.push(a),sr(n,f,"gfmFootnoteDefinitionWhitespace")):t(p)}function f(p){return e(p)}}function Fdt(n,e,t){return n.check(k2,e,n.attempt(Ldt,e,t))}function Udt(n){n.exit("gfmFootnoteDefinition")}function zdt(n,e,t){const r=this;return sr(n,i,"gfmFootnoteDefinitionIndent",5);function i(a){const s=r.events[r.events.length-1];return s&&s[1].type==="gfmFootnoteDefinitionIndent"&&s[2].sliceSerialize(s[1],!0).length===4?e(a):t(a)}}function Vdt(n){let t=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:i};return t==null&&(t=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(s,o){let l=-1;for(;++l<s.length;)if(s[l][0]==="enter"&&s[l][1].type==="strikethroughSequenceTemporary"&&s[l][1]._close){let u=l;for(;u--;)if(s[u][0]==="exit"&&s[u][1].type==="strikethroughSequenceTemporary"&&s[u][1]._open&&s[l][1].end.offset-s[l][1].start.offset===s[u][1].end.offset-s[u][1].start.offset){s[l][1].type="strikethroughSequence",s[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},s[u][1].start),end:Object.assign({},s[l][1].end)},h={type:"strikethroughText",start:Object.assign({},s[u][1].end),end:Object.assign({},s[l][1].start)},d=[["enter",c,o],["enter",s[u][1],o],["exit",s[u][1],o],["enter",h,o]],f=o.parser.constructs.insideSpan.null;f&&kl(d,d.length,0,X3(f,s.slice(u+1,l),o)),kl(d,d.length,0,[["exit",h,o],["enter",s[l][1],o],["exit",s[l][1],o],["exit",c,o]]),kl(s,u-1,l-u+3,d),l=u+d.length-2;break}}for(l=-1;++l<s.length;)s[l][1].type==="strikethroughSequenceTemporary"&&(s[l][1].type="data");return s}function a(s,o,l){const u=this.previous,c=this.events;let h=0;return d;function d(p){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(p):(s.enter("strikethroughSequenceTemporary"),f(p))}function f(p){const m=wS(u);if(p===126)return h>1?l(p):(s.consume(p),h++,f);if(h<2&&!t)return l(p);const g=s.exit("strikethroughSequenceTemporary"),v=wS(p);return g._open=!v||v===2&&!!m,g._close=!m||m===2&&!!v,o(p)}}}class Hdt{constructor(){this.map=[]}add(e,t,r){Gdt(this,e,t,r)}consume(e){if(this.map.sort(function(a,s){return a[0]-s[0]}),this.map.length===0)return;let t=this.map.length;const r=[];for(;t>0;)t-=1,r.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const a of i)e.push(a);i=r.pop()}this.map.length=0}}function Gdt(n,e,t,r){let i=0;if(!(t===0&&r.length===0)){for(;i<n.map.length;){if(n.map[i][0]===e){n.map[i][1]+=t,n.map[i][2].push(...r);return}i+=1}n.map.push([e,t,r])}}function jdt(n,e){let t=!1;const r=[];for(;e<n.length;){const i=n[e];if(t){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(n[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(n[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(t=!0);e+=1}return r}function Wdt(){return{flow:{null:{name:"table",tokenize:Xdt,resolveAll:$dt}}}}function Xdt(n,e,t){const r=this;let i=0,a=0,s;return o;function o(D){let R=r.events.length-1;for(;R>-1;){const V=r.events[R][1].type;if(V==="lineEnding"||V==="linePrefix")R--;else break}const B=R>-1?r.events[R][1].type:null,k=B==="tableHead"||B==="tableRow"?T:l;return k===T&&r.parser.lazy[r.now().line]?t(D):k(D)}function l(D){return n.enter("tableHead"),n.enter("tableRow"),u(D)}function u(D){return D===124||(s=!0,a+=1),c(D)}function c(D){return D===null?t(D):hn(D)?a>1?(a=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(D),n.exit("lineEnding"),f):t(D):tr(D)?sr(n,c,"whitespace")(D):(a+=1,s&&(s=!1,i+=1),D===124?(n.enter("tableCellDivider"),n.consume(D),n.exit("tableCellDivider"),s=!0,c):(n.enter("data"),h(D)))}function h(D){return D===null||D===124||$r(D)?(n.exit("data"),c(D)):(n.consume(D),D===92?d:h)}function d(D){return D===92||D===124?(n.consume(D),h):h(D)}function f(D){return r.interrupt=!1,r.parser.lazy[r.now().line]?t(D):(n.enter("tableDelimiterRow"),s=!1,tr(D)?sr(n,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):p(D))}function p(D){return D===45||D===58?g(D):D===124?(s=!0,n.enter("tableCellDivider"),n.consume(D),n.exit("tableCellDivider"),m):E(D)}function m(D){return tr(D)?sr(n,g,"whitespace")(D):g(D)}function g(D){return D===58?(a+=1,s=!0,n.enter("tableDelimiterMarker"),n.consume(D),n.exit("tableDelimiterMarker"),v):D===45?(a+=1,v(D)):D===null||hn(D)?w(D):E(D)}function v(D){return D===45?(n.enter("tableDelimiterFiller"),b(D)):E(D)}function b(D){return D===45?(n.consume(D),b):D===58?(s=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(D),n.exit("tableDelimiterMarker"),S):(n.exit("tableDelimiterFiller"),S(D))}function S(D){return tr(D)?sr(n,w,"whitespace")(D):w(D)}function w(D){return D===124?p(D):D===null||hn(D)?!s||i!==a?E(D):(n.exit("tableDelimiterRow"),n.exit("tableHead"),e(D)):E(D)}function E(D){return t(D)}function T(D){return n.enter("tableRow"),M(D)}function M(D){return D===124?(n.enter("tableCellDivider"),n.consume(D),n.exit("tableCellDivider"),M):D===null||hn(D)?(n.exit("tableRow"),e(D)):tr(D)?sr(n,M,"whitespace")(D):(n.enter("data"),P(D))}function P(D){return D===null||D===124||$r(D)?(n.exit("data"),M(D)):(n.consume(D),D===92?I:P)}function I(D){return D===92||D===124?(n.consume(D),P):P(D)}}function $dt(n,e){let t=-1,r=!0,i=0,a=[0,0,0,0],s=[0,0,0,0],o=!1,l=0,u,c,h;const d=new Hdt;for(;++t<n.length;){const f=n[t],p=f[1];f[0]==="enter"?p.type==="tableHead"?(o=!1,l!==0&&(Ose(d,e,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(t,0,[["enter",u,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,h=void 0,a=[0,0,0,0],s=[0,t+1,0,0],o&&(o=!1,c={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},d.add(t,0,[["enter",c,e]])),i=p.type==="tableDelimiterRow"?2:c?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,s[2]===0&&(a[1]!==0&&(s[0]=s[1],h=QP(d,e,a,i,void 0,h),a=[0,0,0,0]),s[2]=t)):p.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(s[0]=s[1],h=QP(d,e,a,i,void 0,h)),a=s,s=[a[1],t,0,0])):p.type==="tableHead"?(o=!0,l=t):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=t,a[1]!==0?(s[0]=s[1],h=QP(d,e,a,i,t,h)):s[1]!==0&&(h=QP(d,e,s,i,t,h)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(s[3]=t)}for(l!==0&&Ose(d,e,l,u,c),d.consume(e.events),t=-1;++t<e.events.length;){const f=e.events[t];f[0]==="enter"&&f[1].type==="table"&&(f[1]._align=jdt(e.events,t))}return n}function QP(n,e,t,r,i,a){const s=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",o="tableContent";t[0]!==0&&(a.end=Object.assign({},z_(e.events,t[0])),n.add(t[0],0,[["exit",a,e]]));const l=z_(e.events,t[1]);if(a={type:s,start:Object.assign({},l),end:Object.assign({},l)},n.add(t[1],0,[["enter",a,e]]),t[2]!==0){const u=z_(e.events,t[2]),c=z_(e.events,t[3]),h={type:o,start:Object.assign({},u),end:Object.assign({},c)};if(n.add(t[2],0,[["enter",h,e]]),r!==2){const d=e.events[t[2]],f=e.events[t[3]];if(d[1].end=Object.assign({},f[1].end),d[1].type="chunkText",d[1].contentType="text",t[3]>t[2]+1){const p=t[2]+1,m=t[3]-t[2]-1;n.add(p,m,[])}}n.add(t[3]+1,0,[["exit",h,e]])}return i!==void 0&&(a.end=Object.assign({},z_(e.events,i)),n.add(i,0,[["exit",a,e]]),a=void 0),a}function Ose(n,e,t,r,i){const a=[],s=z_(e.events,t);i&&(i.end=Object.assign({},s),a.push(["exit",i,e])),r.end=Object.assign({},s),a.push(["exit",r,e]),n.add(t+1,0,a)}function z_(n,e){const t=n[e],r=t[0]==="enter"?"start":"end";return t[1][r]}const Ydt={name:"tasklistCheck",tokenize:Kdt};function qdt(){return{text:{91:Ydt}}}function Kdt(n,e,t){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?t(l):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(l),n.exit("taskListCheckMarker"),a)}function a(l){return $r(l)?(n.enter("taskListCheckValueUnchecked"),n.consume(l),n.exit("taskListCheckValueUnchecked"),s):l===88||l===120?(n.enter("taskListCheckValueChecked"),n.consume(l),n.exit("taskListCheckValueChecked"),s):t(l)}function s(l){return l===93?(n.enter("taskListCheckMarker"),n.consume(l),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),o):t(l)}function o(l){return hn(l)?e(l):tr(l)?n.check({tokenize:Zdt},e,t)(l):t(l)}}function Zdt(n,e,t){return sr(n,r,"whitespace");function r(i){return i===null?t(i):e(i)}}function Qdt(n){return F0e([wdt(),Rdt(),Vdt(n),Wdt(),qdt()])}const Jdt={};function dxe(n){const e=this,t=n||Jdt,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),s=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(Qdt(t)),a.push(xdt()),s.push(_dt(t))}function eft({selectedText:n}){const[e,t]=ee.useState([{role:"assistant",content:"AI",type:"text"}]),[r,i]=ee.useState(""),[a,s]=ee.useState(!1),o=ee.useRef(null),[l,u]=ee.useState(null),[c,h]=ee.useState(""),[d,f]=ee.useState(null);ee.useEffect(()=>{if(n)if(n.startsWith("[]")){const T=n.substring(4);f(T),h("")}else h(n),f(null)},[n]);const p=ee.useRef(null),m=()=>{var T;(T=p.current)==null||T.scrollIntoView({behavior:"smooth"})};ee.useEffect(()=>{m()},[e]);const g=async T=>{var I,D,R,B,k,V;if(typeof T=="object"&&T.role==="user"){if(a)return;const G=[...e,T];t(G),i(""),u(null),h(""),f(null),s(!0);try{const F=[{role:"system",content:"You are a helpful assistant."}];F.push({role:T.role,content:`${T.content} ${T.imageUrl}`});const j=await fetch("https://api.moonshot.cn/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer sk-4eO2ekEo0bZbimbr9OreFy1F1W79bvWXuKycc1suiqnpB5yF"},body:JSON.stringify({model:"kimi-k2.5",messages:F,temperature:.6,max_tokens:32768,top_p:.95,stream:!0,thinking:{type:"disabled"}})});if(!j.ok)try{const te=await j.json();throw new Error(`API: ${j.status} ${j.statusText} - ${JSON.stringify(te)}`)}catch{throw new Error(`API: ${j.status} ${j.statusText}`)}const Q=(I=j.body)==null?void 0:I.getReader();if(!Q)throw new Error("");let H="";const K=new TextDecoder;for(;;){const{done:te,value:Y}=await Q.read();if(te)break;const ge=K.decode(Y,{stream:!0}).split(`
`);for(const se of ge)if(se.startsWith("data: ")){const he=se.slice(6);if(he==="[DONE]")break;try{const fe=JSON.parse(he);fe.choices&&((R=(D=fe.choices[0])==null?void 0:D.delta)!=null&&R.content)&&(H+=fe.choices[0].delta.content,t(Ee=>{const Ce=[...Ee],Re=Ce[Ce.length-1];return Re.role==="assistant"?Re.content=H:Ce.push({role:"assistant",content:H,type:"text"}),Ce}))}catch(fe){console.error(":",fe)}}}s(!1)}catch(F){console.error(":",F),t(X=>[...X,{role:"assistant",content:`: ${F.message}`,type:"text"}]),s(!1)}return}const M=T||r;if(!M.trim()&&!l||a)return;let P=[...e];if(c.trim()){const G=`${M}`;G.trim()&&(P=[...P,{role:"user",content:G,type:"text"}])}else d?P=[...P,{role:"user",content:"",type:"image",imageUrl:d}]:l&&M.trim()?P=[...P,{role:"user",content:M,type:"image",imageUrl:l.url}]:l?P=[...P,{role:"user",content:"",type:"image",imageUrl:l.url}]:M.trim()&&(P=[...P,{role:"user",content:M,type:"text"}]);t(P),i(""),u(null),h(""),f(null),s(!0);try{const G=[{role:"system",content:"You are a helpful assistant."}],F=P.filter(te=>te.role==="user");if(F.length>0){const te=F[F.length-1];te.type==="image"&&te.imageUrl?G.push({role:te.role,content:[{type:"image_url",image_url:{url:te.imageUrl}},{type:"text",text:te.content}]}):G.push({role:te.role,content:te.content})}const j=await fetch("https://api.moonshot.cn/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer sk-4eO2ekEo0bZbimbr9OreFy1F1W79bvWXuKycc1suiqnpB5yF"},body:JSON.stringify({model:"kimi-k2.5",messages:G,temperature:.6,max_tokens:32768,top_p:.95,stream:!0,thinking:{type:"disabled"}})});if(!j.ok)throw new Error(`API: ${j.status} ${j.statusText}`);const Q=(B=j.body)==null?void 0:B.getReader();if(!Q)throw new Error("");let H="";const K=new TextDecoder;for(;;){const{done:te,value:Y}=await Q.read();if(te)break;const ge=K.decode(Y,{stream:!0}).split(`
`);for(const se of ge)if(se.startsWith("data: ")){const he=se.slice(6);if(he==="[DONE]")break;try{const fe=JSON.parse(he);fe.choices&&((V=(k=fe.choices[0])==null?void 0:k.delta)!=null&&V.content)&&(H+=fe.choices[0].delta.content,t([...P,{role:"assistant",content:H}]))}catch(fe){console.error(":",fe)}}}}catch(G){console.error("AI API:",G);const F={role:"assistant",content:`${G instanceof Error?G.message:""}`};t([...P,F])}finally{s(!1)}},v=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),g())},b=()=>{var T;(T=o.current)==null||T.click()},S=T=>{const M=T.target.files;M&&M.length>0&&E(M[0])},w=T=>{const M=T.clipboardData.items;for(const P of M)if(P.type.indexOf("image")===0){const I=P.getAsFile();I&&E(I)}},E=T=>{const M=new FileReader;M.onload=P=>{var D;const I=(D=P.target)==null?void 0:D.result;u({file:T,url:I})},M.readAsDataURL(T)};return C.jsxs("div",{className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] flex flex-col h-full",children:[C.jsxs("div",{className:"p-4 border-b border-[var(--light-pink)] flex items-center justify-between",children:[C.jsxs("h3",{className:"text-lg font-semibold text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-robot text-[var(--brand-pink)] mr-2"}),"AI"]}),C.jsx("button",{onClick:()=>{t([{role:"assistant",content:"AI",type:"text"}]),i(""),u(null),h("")},className:"text-sm text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors",disabled:a,children:""})]}),C.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[e.map((T,M)=>C.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:T.type==="image"&&T.imageUrl?C.jsx("div",{className:`max-w-[90%] p-2 rounded-lg ${T.role==="user"?"bg-[var(--brand-pink)]/10 rounded-tr-none":"bg-[var(--bg-primary)] rounded-tl-none border border-[var(--light-pink)]"}`,children:C.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[C.jsx("img",{src:T.imageUrl,alt:"",className:"w-full h-auto max-h-64 object-contain"}),C.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1",children:T.content})]})}):C.jsx("div",{className:`max-w-[90%] p-3 rounded-lg ${T.role==="user"?"bg-[var(--brand-pink)] text-white rounded-tr-none":"bg-[var(--bg-primary)] text-[var(--text-primary)] rounded-tl-none border border-[var(--light-pink)]"}`,children:C.jsxs("div",{className:"prose prose-sm max-w-none prose-table border-collapse prose-ol list-decimal overflow-x-auto",style:{wordWrap:"break-word",overflowWrap:"break-word",overflowX:"auto"},children:[C.jsx("style",{children:`
                    .prose table {
                      width: 100%;
                      border-collapse: collapse;
                    }
                    .prose th,
                    .prose td {
                      border: 1px solid #e5e7eb;
                      padding: 0.5rem;
                      text-align: left;
                    }
                    .prose code {
                      white-space: pre-wrap;
                      word-break: break-all;
                    }
                    .prose pre {
                      overflow-x: auto;
                    }
                    .prose p {
                      word-wrap: break-word;
                      overflow-wrap: break-word;
                    }
                  `}),C.jsx(aye,{remarkPlugins:[dxe],rehypePlugins:[Hye],children:T.content})]})})},M)),a&&C.jsx("div",{className:"flex justify-start",children:C.jsx("div",{className:"max-w-[80%] p-3 rounded-lg bg-[var(--bg-primary)] text-[var(--text-primary)] rounded-tl-none border border-[var(--light-pink)]",children:C.jsxs("div",{className:"flex space-x-1",children:[C.jsx("div",{className:"h-2 w-2 rounded-full bg-[var(--brand-pink)] animate-bounce [animation-delay:-0.3s]"}),C.jsx("div",{className:"h-2 w-2 rounded-full bg-[var(--brand-pink)] animate-bounce [animation-delay:-0.15s]"}),C.jsx("div",{className:"h-2 w-2 rounded-full bg-[var(--brand-pink)] animate-bounce"})]})})}),C.jsx("div",{ref:p})]}),C.jsxs("div",{className:"p-4 border-t border-[var(--light-pink)]",children:[(c||d)&&C.jsxs("div",{className:"mb-3 p-3 bg-[var(--bg-primary)] rounded-lg border border-[var(--light-pink)] relative",children:[C.jsx("button",{onClick:()=>{h(""),f(null)},className:"absolute top-2 right-2 text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors",disabled:a,children:C.jsx("i",{className:"fa-solid fa-times"})}),d&&C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"mb-3 p-2 bg-white rounded border border-[var(--light-pink)]",children:C.jsx("img",{src:d,alt:"",className:"w-full h-auto object-cover"})}),C.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"flex space-x-2",children:C.jsx("button",{onClick:()=>{if(d){const T={role:"user",content:"",type:"image",imageUrl:d};f(null),g(T)}},className:"flex-1 px-3 py-2 rounded-full bg-[var(--brand-pink)] text-white hover:bg-[var(--brand-pink)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",disabled:a,children:""})})]}),c&&!d&&C.jsxs(C.Fragment,{children:[C.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"mb-3 p-2 bg-white rounded border border-[var(--light-pink)]",children:C.jsx("p",{className:"text-sm text-[var(--text-primary)]",children:c})}),C.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsx("button",{onClick:()=>{const T=`${c}`;h(""),g(T)},className:"flex-1 px-3 py-2 rounded-full bg-[var(--brand-pink)] text-white hover:bg-[var(--brand-pink)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",disabled:a,children:""}),C.jsx("button",{onClick:()=>{const T=`${c}`;h(""),g(T)},className:"flex-1 px-3 py-2 rounded-full bg-[var(--brand-pink)] text-white hover:bg-[var(--brand-pink)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",disabled:a,children:""})]})]})]}),l&&C.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-[var(--bg-primary)] rounded-lg",children:[C.jsxs("div",{className:"flex items-center space-x-3",children:[C.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden",children:C.jsx("img",{src:l.url,alt:"",className:"w-full h-full object-cover"})}),C.jsxs("div",{children:[C.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)]",children:""}),C.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:l.file.name})]})]}),C.jsx("button",{onClick:()=>u(null),className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-colors",children:C.jsx("i",{className:"fa-solid fa-times"})})]}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsx("button",{onClick:b,className:"px-3 py-2 rounded-full bg-[var(--bg-primary)] text-[var(--text-secondary)] hover:bg-[var(--bg-primary)]/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,children:C.jsx("i",{className:"fa-solid fa-image"})}),C.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:S,className:"hidden",disabled:a}),C.jsx("textarea",{value:r,onChange:T=>i(T.target.value),onKeyPress:v,onPaste:w,placeholder:"...",rows:1,maxLength:500,className:"flex-1 px-4 py-2 rounded-full border border-[var(--light-pink)] focus:outline-none focus:border-[var(--brand-pink)] resize-none overflow-y-auto",style:{maxHeight:"3.5rem"},disabled:a}),C.jsx("button",{onClick:g,className:"px-4 py-2 rounded-full bg-[var(--brand-pink)] text-white hover:bg-[var(--brand-pink)]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:a||!r.trim()&&!l,children:C.jsx("i",{className:"fa-solid fa-paper-plane"})})]})]})]})}const tft=[{id:1,title:"",subtitle:"3DBMS",image:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=3DBMS&image_size=landscape_16_9",video:"https://e.necibook.com/api/media/api/v1/media/showImage/2021466156888952832",tags:["","3D",""],difficulty:"",difficultyLevel:"",duration:"4",description:"BMS",learningGoals:["","BMS",""],link:"#/simulation/battery-system",status:"",isClickable:!0},{id:2,title:"",subtitle:"",image:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=&image_size=landscape_16_9",video:"https://e.necibook.com/api/media/api/v1/media/showImage/2021463124759248896",tags:["","",""],difficulty:"",difficultyLevel:"",duration:"6",description:"SVPWMmap",learningGoals:["","",""],link:"#/simulation/edrive-system",status:"",isClickable:!0},{id:3,title:"",subtitle:"CANVCU",image:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=VCUBMSMCUOBCCAN/LIN&image_size=landscape_16_9",video:"https://e.necibook.com/api/media/api/v1/media/showImage/2021463972480602112",tags:["","",""],difficulty:"",difficultyLevel:"",duration:"8",description:"VCUBMSMCUCAN",learningGoals:["CAN","",""],link:"#/simulation/vehicle-control",status:"",isClickable:!0},{id:4,title:"",subtitle:"",image:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=CC/CP3D&image_size=landscape_16_9",video:"https://e.necibook.com/api/media/api/v1/media/showImage/2021464281667915776",tags:["","",""],difficulty:"",difficultyLevel:"",duration:"4",description:"GB/T 18487GB/T 27930BMS",learningGoals:["","",""],link:"#/simulation/charging-system",status:"",isClickable:!0},{id:5,title:"",subtitle:"",image:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=&image_size=landscape_16_9",video:"https://e.necibook.com/api/media/api/v1/media/showImage/2021464898052259840",tags:["","",""],difficulty:"",difficultyLevel:"",duration:"5",description:"PTC//",learningGoals:["","",""],link:"#/simulation/thermal-system",status:"",isClickable:!0}];function nft(){const[n,e]=ee.useState(!1),[t,r]=ee.useState(null),i=l=>{l.isClickable&&l.link&&alert(`${l.title}`)},a=(l,u)=>{l.stopPropagation(),r(u),e(!0)},s=(l,u)=>{l.stopPropagation(),u.isClickable&&u.link&&alert(`${u.title}`)},o=()=>{e(!1),r(null)};return C.jsxs("div",{className:"h-full",children:[C.jsxs("div",{className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 h-[calc(100vh-100px)] overflow-y-auto max-w-5xl mx-auto",children:[C.jsxs("div",{className:"mb-8 text-center",children:[C.jsx("h2",{className:"text-xl font-medium text-[var(--text-primary)] mb-2",children:"5  3D  "}),C.jsx("div",{className:"bg-[var(--bg-primary)] px-4 py-2 rounded-lg inline-block mx-auto mt-4",children:C.jsx("span",{className:"text-[var(--text-primary)]",children:" 2/5 "})})]}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:tft.map(l=>C.jsxs(Kn.div,{whileHover:{scale:1.02,boxShadow:"0 12px 32px rgba(255,143,163,0.16)"},whileTap:{scale:.98},className:`bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] overflow-hidden cursor-${l.isClickable?"pointer":"default"}`,onClick:()=>i(l),children:[C.jsxs("div",{className:"relative h-48",children:[C.jsx(Kn.img,{src:l.image,alt:l.title,className:"w-full h-full object-cover",loading:"lazy",whileHover:{scale:1.05},transition:{duration:.3}}),C.jsx("div",{className:"absolute top-3 left-3",children:C.jsx("span",{className:"bg-[var(--brand-pink)] text-white px-3 py-1 rounded-full text-xs font-medium",children:l.tags[0]})}),C.jsx(Kn.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent flex flex-col justify-end p-4",children:C.jsx("div",{className:"flex space-x-3 justify-center",children:C.jsxs("button",{onClick:u=>a(u,l),className:"bg-white/90 text-[var(--text-primary)] px-4 py-2 rounded-full text-sm font-medium hover:bg-white transition-colors flex items-center justify-center",children:[C.jsx("i",{className:"fa-solid fa-eye mr-1"}),""]})})})]}),C.jsxs("div",{className:"p-4",children:[C.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:l.tags.map((u,c)=>C.jsx("span",{className:"text-xs px-2 py-1 bg-[var(--bg-primary)] text-[var(--text-secondary)] rounded-full",children:u},c))}),C.jsx("h3",{className:"text-base font-medium text-[var(--text-primary)] mb-1 line-clamp-2",children:l.title}),C.jsx("p",{className:"text-xs text-[var(--text-secondary)] mb-3",children:l.subtitle}),C.jsxs("div",{className:"flex items-center mb-3 text-sm",children:[C.jsxs("span",{className:"text-[var(--text-primary)]",children:[l.difficulty," ",l.difficultyLevel]}),C.jsx("span",{className:"mx-2 text-[var(--text-secondary)]",children:"|"}),C.jsxs("span",{className:"text-[var(--text-secondary)]",children:["",l.duration]})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-3 line-clamp-3",children:l.description}),C.jsxs("div",{className:"mb-4",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("ul",{className:"text-xs text-[var(--text-secondary)] space-y-1",children:l.learningGoals.map((u,c)=>C.jsxs("li",{className:"flex items-start",children:[C.jsx("span",{className:"mr-2",children:""}),C.jsx("span",{children:u})]},c))})]}),C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-[var(--bg-primary)] text-[var(--text-secondary)]",children:l.status}),C.jsx("button",{onClick:u=>s(u,l),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${l.isClickable?"bg-[var(--brand-pink)] text-white hover:bg-[var(--brand-pink)]/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!l.isClickable,children:""})]})]})]},l.id))}),C.jsxs("div",{className:"mt-8 p-4 bg-[var(--bg-primary)] rounded-lg",children:[C.jsx("h3",{className:"text-lg font-medium mb-2 text-[var(--text-primary)]",children:""}),C.jsxs("ul",{className:"space-y-2 text-sm text-[var(--text-secondary)]",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx("i",{className:"fa-solid fa-circle-info text-[var(--brand-pink)] mt-1 mr-2"}),C.jsx("span",{children:"3D"})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("i",{className:"fa-solid fa-circle-info text-[var(--brand-pink)] mt-1 mr-2"}),C.jsx("span",{children:'""'})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("i",{className:"fa-solid fa-circle-info text-[var(--brand-pink)] mt-1 mr-2"}),C.jsx("span",{children:"ChromeFirefox"})]})]})]})]}),n&&t&&C.jsx(Kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",onClick:o,children:C.jsxs(Kn.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"relative max-w-4xl max-h-[90vh] w-full",onClick:l=>l.stopPropagation(),children:[C.jsx("button",{onClick:o,className:"absolute -top-12 right-0 text-white text-2xl hover:text-gray-300 transition-colors z-10",children:C.jsx("i",{className:"fa-solid fa-times"})}),C.jsxs("h3",{className:"text-white text-xl font-medium mb-4 text-center",children:[t.title," - "]}),C.jsx("div",{className:"bg-black rounded-lg overflow-hidden",children:C.jsx("video",{src:t.video,controls:!0,autoPlay:!0,muted:!0,className:"w-full h-auto max-h-[70vh]",children:""})})]})})]})}const rft=[{id:1,title:"",image:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%96%B0%E8%83%BD%E6%BA%90%E6%B1%BD%E8%BD%A6%E7%BB%93%E6%9E%84%E5%8E%9F%E7%90%86%E5%AE%9E%E8%AE%AD%EF%BC%8C%E7%9C%9F%E5%AE%9E%E5%AE%9E%E9%AA%8C%E5%AE%A4%E5%9C%BA%E6%99%AF%EF%BC%8C%E5%AD%A6%E7%94%9F%E6%93%8D%E4%BD%9C&sign=17343d3df5bcff3c31b591236cc792da",isClickable:!1},{id:2,title:"-",image:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%96%B0%E8%83%BD%E6%BA%90%E6%B1%BD%E8%BD%A6%E5%85%85%E9%85%8D%E7%94%B5%E6%80%BB%E6%88%90%E6%8B%86%E8%A3%85%E5%AE%9E%E8%AE%AD%EF%BC%8C%E7%9C%9F%E5%AE%9E%E6%93%8D%E4%BD%9C%E5%9C%BA%E6%99%AF&sign=3989d4754e150e5b5dab50df3b2e4723",isClickable:!1},{id:3,title:"",image:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%96%B0%E8%83%BD%E6%BA%90%E6%B1%BD%E8%BD%A6%E9%AB%98%E5%8E%8B%E7%B3%BB%E7%BB%9F%E5%AE%9E%E8%AE%AD%EF%BC%8C%E5%AE%89%E5%85%A8%E6%93%8D%E4%BD%9C%E6%BC%94%E7%A4%BA&sign=ae9e42893425f988a4a28332c5cec619",isClickable:!1},{id:4,title:"",image:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E6%96%B0%E8%83%BD%E6%BA%90%E6%B1%BD%E8%BD%A6%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD%E4%B8%8E%E7%BB%B4%E6%8A%A4%E5%AE%9E%E8%AE%AD%EF%BC%8C%E7%9C%9F%E5%AE%9E%E7%BB%B4%E4%BF%AE%E5%9C%BA%E6%99%AF&sign=a50af15f2c70c77fb55a8d97e1ef0162",isClickable:!1},{id:5,title:"",image:"https://space.coze.cn/api/coze_space/gen_image?image_size=landscape_4_3&prompt=%E4%BA%A4%E6%B5%81%E5%BC%82%E6%AD%A5%E7%94%B5%E6%9C%BA%E6%8B%86%E5%8D%B8%E5%AE%9E%E8%AE%AD%EF%BC%8C%E7%9C%9F%E5%AE%9E%E6%93%8D%E4%BD%9C%E5%9C%BA%E6%99%AF%EF%BC%8C%E5%AD%A6%E7%94%9F%E5%88%86%E7%BB%84%E5%AD%A6%E4%B9%A0&sign=7ab9b4172433cc940001d63f03dbcc09",isClickable:!0},{id:6,title:"",image:"https://trae-api-cn.mchost.guru/api/ide/v1/text_to_image?prompt=&image_size=landscape_4_3",isClickable:!0,htmlPath:"/Observe_LSTM_Project/web/realtime_tasks_to_lstm_T60_v2c_demo_ui_fix9_fullvideo_judgeNEWUI_no_animation (5)DEMO.html"}];function ift(){const[n,e]=ee.useState(!1),[t,r]=ee.useState(null),i=l=>{r(l),e(!0)},a=()=>{e(!1),r(null)},s=l=>{l.isClickable&&i(l)},o=(l,u)=>{l.stopPropagation(),u.isClickable&&i(u)};return C.jsxs("div",{className:"h-full",children:[C.jsxs("div",{className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 h-[calc(100vh-100px)] overflow-y-auto max-w-5xl mx-auto",children:[C.jsx("div",{className:"mb-8 text-center",children:C.jsx("h2",{className:"text-xl font-medium text-[var(--text-primary)] mb-2",children:"6    "})}),C.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:rft.map(l=>C.jsxs(Kn.div,{whileHover:{scale:1.02,boxShadow:"0 12px 32px rgba(255,143,163,0.16)"},whileTap:{scale:.98},className:`bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] overflow-hidden cursor-${l.isClickable?"pointer":"default"}`,onClick:()=>s(l),children:[C.jsx("div",{className:"relative h-48",children:C.jsx(Kn.img,{src:l.image,alt:l.title,className:"w-full h-full object-cover",loading:"lazy",whileHover:{scale:1.05},transition:{duration:.3}})}),C.jsxs("div",{className:"p-4",children:[C.jsx("h3",{className:"text-base font-medium text-[var(--text-primary)] mb-1 line-clamp-2",children:l.title}),C.jsx("div",{className:"flex justify-end",children:C.jsx("button",{onClick:u=>o(u,l),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${l.isClickable?"bg-[var(--brand-pink)] text-white hover:bg-[var(--brand-pink)]/90":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,disabled:!l.isClickable,children:""})})]})]},l.id))}),C.jsxs("div",{className:"mt-8 p-4 bg-[var(--bg-primary)] rounded-lg",children:[C.jsx("h3",{className:"text-lg font-medium mb-2 text-[var(--text-primary)]",children:""}),C.jsxs("ul",{className:"space-y-2 text-sm text-[var(--text-secondary)]",children:[C.jsxs("li",{className:"flex items-start",children:[C.jsx("i",{className:"fa-solid fa-circle-info text-[var(--brand-pink)] mt-1 mr-2"}),C.jsx("span",{children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("i",{className:"fa-solid fa-circle-info text-[var(--brand-pink)] mt-1 mr-2"}),C.jsx("span",{children:""})]}),C.jsxs("li",{className:"flex items-start",children:[C.jsx("i",{className:"fa-solid fa-circle-info text-[var(--brand-pink)] mt-1 mr-2"}),C.jsx("span",{children:""})]})]})]})]}),n&&t&&C.jsx(Kn.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,children:C.jsxs(Kn.div,{className:"bg-white rounded-xl shadow-2xl p-2 w-full h-full flex flex-col",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:l=>l.stopPropagation(),children:[C.jsxs("div",{className:"flex justify-between items-center mb-2",children:[C.jsx("h3",{className:"text-xl font-medium text-[var(--text-primary)]",children:t.title}),C.jsx("button",{className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",onClick:a,children:C.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),C.jsx("div",{className:"bg-gray-100 rounded-lg overflow-hidden mb-1 flex-grow",children:C.jsx("iframe",{src:t.htmlPath?encodeURI(t.htmlPath):"/demo_three_views_IMU_POSE (2).html",className:"w-full h-full",title:t.title})})]})})]})}function aft(){const[n,e]=ee.useState(null),t=[{id:"low-voltage-electrician",title:"",description:"36300-800V",details:["","","","","","18-60","","80","80+80"],officialWebsite:"https://www.mem.gov.cn/"},{id:"high-voltage-electrician",title:"",description:"1kV",details:["","","","","+1","120","+803"],officialWebsite:"https://www.mem.gov.cn/"},{id:"new-energy-auto-mechanic",title:"-",description:"",details:["","BMS","/","VCUCAN","","18","+2/","+3","/","+60"],officialWebsite:"https://www.mohrss.gov.cn/"},{id:"auto-mechanic-electrician",title:"-",description:"",details:["","",":VCUMCUBMS","",""],officialWebsite:"https://www.mohrss.gov.cn/"},{id:"transport-certificate",title:"",description:"4S",details:["","/","+80-120","60+60",""],officialWebsite:"https://www.mot.gov.cn/"},{id:"battery-maintenance",title:"",description:"4S",details:["//","BMSSOH","","","","60-80","+"],officialWebsite:"https://www.camra.org.cn/"},{id:"intelligent-new-energy",title:"1+X",description:"1+X//",details:["1//","2","3","4","5","","40-80","+60"],officialWebsite:"https://www.zhongchehang.com/"},{id:"power-drive",title:"1+X",description:"",details:["","","","","",""],officialWebsite:"https://www.zhongchehang.com/"},{id:"byd-certification",title:"",description:"DiPilot4S",details:["e","SiC","BMSVCUMCU","","","","DiagTool","","/+"],officialWebsite:"https://www.byd.com/"},{id:"tesla-certification",title:"",description:"Autopilot",details:["400V/800V","/BMS","","Toolbox","","","Autopilot","",""],officialWebsite:"https://www.tesla.com/"},{id:"other-manufacturer",title:"",description:"",details:["//","//MEBeDriveEQ","/BMS"],officialWebsite:"https://www.caam.org.cn/"}],r=a=>{const s=t.find(o=>o.id===a);e(s||null)},i=()=>{e(null)};return C.jsxs("div",{className:"h-full",children:[C.jsxs("div",{className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 h-[calc(100vh-100px)] overflow-y-auto max-w-5xl mx-auto",children:[C.jsx("div",{className:"mb-8 text-center",children:C.jsx("h2",{className:"text-xl font-medium text-[var(--text-primary)] mb-2",children:"    "})}),C.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col lg:flex-row gap-8",children:[C.jsxs(Kn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"flex-1 space-y-6",children:[C.jsxs(Kn.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6",children:[C.jsxs("h3",{className:"text-xl font-semibold mb-4 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-shield-halved text-[var(--brand-pink)] mr-2"}),""]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("low-voltage-electrician"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"1. "}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:"36"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("high-voltage-electrician"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"2. "}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:"1kV"})]})]})]}),C.jsxs(Kn.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6",children:[C.jsxs("h3",{className:"text-xl font-semibold mb-4 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-award text-[var(--brand-pink)] mr-2"}),""]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("new-energy-auto-mechanic"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"1. -"}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("auto-mechanic-electrician"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"2. -"}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:""})]})]})]}),C.jsxs(Kn.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6",children:[C.jsxs("h3",{className:"text-xl font-semibold mb-4 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-screwdriver-wrench text-[var(--brand-pink)] mr-2"}),""]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("transport-certificate"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"1. "}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:""})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("battery-maintenance"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"2. "}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:""})]})]})]}),C.jsxs(Kn.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6",children:[C.jsxs("h3",{className:"text-xl font-semibold mb-4 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-graduation-cap text-[var(--brand-pink)] mr-2"}),"1+X"]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("intelligent-new-energy"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"1. 1+X"}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:"1+X//"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("power-drive"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"2. 1+X"}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:""})]})]})]}),C.jsxs(Kn.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6",children:[C.jsxs("h3",{className:"text-xl font-semibold mb-4 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-building text-[var(--brand-pink)] mr-2"}),""]}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("byd-certification"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"1. "}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:"DiPilot"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("tesla-certification"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"2. "}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:"Autopilot"})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4 cursor-pointer hover:bg-[var(--light-pink)]/30 transition-all duration-300 hover:shadow-md hover:translate-y-[-2px]",onClick:()=>r("other-manufacturer"),children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] transition-colors duration-300",children:"3. "}),C.jsx("button",{className:"px-4 py-1 bg-[var(--brand-pink)] text-white rounded-full text-sm hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:scale-105",children:""})]}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] transition-colors duration-300",children:"/////"})]})]})]})]}),C.jsx(Kn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},className:"w-full lg:w-80 shrink-0",children:C.jsxs(Kn.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 sticky top-4",children:[C.jsxs("h3",{className:"text-xl font-semibold mb-6 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-route text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("div",{className:"space-y-4",children:C.jsxs("div",{className:"relative",children:[C.jsx("div",{className:"absolute left-4 top-8 bottom-6 w-0.5 bg-[var(--light-pink)]"}),C.jsxs("div",{className:"flex mb-8",children:[C.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[var(--brand-pink)] flex items-center justify-center text-white font-medium relative z-10",children:"1"}),C.jsxs("div",{className:"ml-4 flex-1",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"  "})]})]}),C.jsxs("div",{className:"flex mb-8",children:[C.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[var(--brand-pink)] flex items-center justify-center text-white font-medium relative z-10",children:"2"}),C.jsxs("div",{className:"ml-4 flex-1",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"/ "})]})]}),C.jsxs("div",{className:"flex mb-8",children:[C.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[var(--brand-pink)] flex items-center justify-center text-white font-medium relative z-10",children:"3"}),C.jsxs("div",{className:"ml-4 flex-1",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"+   "})]})]}),C.jsxs("div",{className:"flex mb-8",children:[C.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[var(--brand-pink)] flex items-center justify-center text-white font-medium relative z-10",children:"4"}),C.jsxs("div",{className:"ml-4 flex-1",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"/+   4S/"})]})]}),C.jsxs("div",{className:"flex",children:[C.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-[var(--brand-pink)] flex items-center justify-center text-white font-medium relative z-10",children:"5"}),C.jsxs("div",{className:"ml-4 flex-1",children:[C.jsx("h4",{className:"text-base font-medium text-[var(--text-primary)] mb-1",children:""}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"/ +   //"})]})]})]})})]})})]})]}),C.jsx(o2e,{children:n&&C.jsx(Kn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:i,children:C.jsxs(Kn.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",damping:20,stiffness:100},className:"bg-white rounded-[16px] max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-[0_20px_60px_rgba(255,143,163,0.3)]",onClick:a=>a.stopPropagation(),children:[C.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[var(--light-pink)] bg-[var(--bg-primary)]",children:[C.jsxs("h3",{className:"text-xl font-semibold text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-certificate text-[var(--brand-pink)] mr-2"}),n.title]}),C.jsx("button",{onClick:i,className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)] transition-all duration-300 hover:bg-[var(--light-pink)]/50 rounded-full p-1",children:C.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),C.jsxs("div",{className:"p-6 space-y-4",children:[C.jsx("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4",children:C.jsx("p",{className:"text-[var(--text-secondary)] leading-relaxed",children:n.description})}),C.jsxs("div",{children:[C.jsxs("h4",{className:"text-base font-medium mb-3 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-list-check text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("ul",{className:"space-y-2 bg-[var(--bg-primary)] rounded-lg p-4",children:n.details.map((a,s)=>C.jsxs("li",{className:"flex items-start transition-all duration-200 hover:translate-x-1",children:[C.jsx("i",{className:"fa-solid fa-circle text-[var(--brand-pink)] mr-2 mt-1 flex-shrink-0"}),C.jsx("span",{className:"text-sm text-[var(--text-secondary)]",children:a})]},s))})]}),n.officialWebsite&&C.jsxs("div",{children:[C.jsxs("h4",{className:"text-base font-medium mb-3 text-[var(--text-primary)] flex items-center",children:[C.jsx("i",{className:"fa-solid fa-file-lines text-[var(--brand-pink)] mr-2"}),""]}),C.jsx("div",{className:"bg-[var(--bg-primary)] rounded-lg p-4",children:C.jsxs("a",{href:n.officialWebsite,target:"_blank",rel:"noopener noreferrer",className:"text-[var(--brand-pink)] hover:text-[var(--brand-pink)]/80 transition-colors duration-300 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-link mr-2"}),"",n.title]})})]})]}),C.jsx("div",{className:"p-6 border-t border-[var(--light-pink)] flex justify-end bg-[var(--bg-primary)]",children:C.jsxs("button",{onClick:i,className:"px-6 py-2 bg-[var(--brand-pink)] text-white rounded-full hover:bg-[var(--brand-pink)]/90 transition-all duration-300 hover:shadow-md hover:scale-105 flex items-center",children:[C.jsx("i",{className:"fa-solid fa-times-circle mr-2"}),""]})})]})})})]})}const ao=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),yH=[.001,0,0,.001,0,0],nU=1.35,Sl={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},im={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},iC="pdfjs_internal_editor_",Pn={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ir={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},sft={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},xH={TRIANGLES:1,LATTICE:2},va={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},YL={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ra={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},V_={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},tO={ERRORS:0,WARNINGS:1,INFOS:5},aC={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},UT={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},oft={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let nO=tO.WARNINGS;function lft(n){Number.isInteger(n)&&(nO=n)}function uft(){return nO}function rO(n){nO>=tO.INFOS&&console.info(`Info: ${n}`)}function wn(n){nO>=tO.WARNINGS&&console.warn(`Warning: ${n}`)}function _r(n){throw new Error(n)}function xr(n,e){n||_r(e)}function cft(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fxe(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=gft(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return cft(r)?r:null}function pxe(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&fxe(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function En(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const mx=(function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class Bse extends mx{constructor(e,t){super(e,"PasswordException"),this.code=t}}class rU extends mx{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class _H extends mx{constructor(e){super(e,"InvalidPDFException")}}class ik extends mx{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class hft extends mx{constructor(e){super(e,"FormatError")}}class Dg extends mx{constructor(e){super(e,"AbortException")}}function dft(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&_r("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const a=Math.min(i+t,e),s=n.subarray(i,a);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function iO(n){typeof n!="string"&&_r("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function fft(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function pft(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function mft(){try{return new Function(""),!0}catch{return!1}}class Ea{static get isLittleEndian(){return En(this,"isLittleEndian",pft())}static get isEvalSupported(){return En(this,"isEvalSupported",mft())}static get isOffscreenCanvasSupported(){return En(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return En(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return En(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return En(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return En(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return En(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const iU=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var zf,qL,bH;class It{static makeHexColor(e,t,r){return`#${iU[e]}${iU[t]}${iU[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const i=e[r],a=e[r+1];e[r]=i*t[0]+a*t[2]+t[4],e[r+1]=i*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],a=t[1],s=t[2],o=t[3],l=t[4],u=t[5];for(let c=0;c<6;c+=2){const h=e[r+c],d=e[r+c+1];e[r+c]=h*i+d*s+l,e[r+c+1]=h*a+d*o+u}}static applyInverseTransform(e,t){const r=e[0],i=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,r){const i=t[0],a=t[1],s=t[2],o=t[3],l=t[4],u=t[5],c=e[0],h=e[1],d=e[2],f=e[3];let p=i*c+l,m=p,g=i*d+l,v=g,b=o*h+u,S=b,w=o*f+u,E=w;if(a!==0||s!==0){const T=a*c,M=a*d,P=s*h,I=s*f;p+=P,v+=P,g+=I,m+=I,b+=T,E+=T,w+=M,S+=M}r[0]=Math.min(r[0],p,g,m,v),r[1]=Math.min(r[1],b,w,S,E),r[2]=Math.max(r[2],p,g,m,v),r[3]=Math.max(r[3],b,w,S,E)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],a=e[2],s=e[3],o=r**2+i**2,l=r*a+i*s,u=a**2+s**2,c=(o+u)/2,h=Math.sqrt(c**2-(o*u-l**2));t[0]=Math.sqrt(c+h||1),t[1]=Math.sqrt(c-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>s?null:[r,a,i,s]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,a){a[0]=Math.min(a[0],e,r),a[1]=Math.min(a[1],t,i),a[2]=Math.max(a[2],e,r),a[3]=Math.max(a[3],t,i)}static bezierBoundingBox(e,t,r,i,a,s,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l),q(this,zf,bH).call(this,e,r,a,o,t,i,s,l,3*(-e+3*(r-a)+o),6*(e-2*r+a),3*(r-e),u),q(this,zf,bH).call(this,e,r,a,o,t,i,s,l,3*(-t+3*(i-s)+l),6*(t-2*i+s),3*(i-t),u)}}zf=new WeakSet,qL=function(e,t,r,i,a,s,o,l,u,c){if(u<=0||u>=1)return;const h=1-u,d=u*u,f=d*u,p=h*(h*(h*e+3*u*t)+3*d*r)+f*i,m=h*(h*(h*a+3*u*s)+3*d*o)+f*l;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)},bH=function(e,t,r,i,a,s,o,l,u,c,h,d){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&q(this,zf,qL).call(this,e,t,r,i,a,s,o,l,-h/c,d);return}const f=c**2-4*h*u;if(f<0)return;const p=Math.sqrt(f),m=2*u;q(this,zf,qL).call(this,e,t,r,i,a,s,o,l,(-c+p)/m,d),q(this,zf,qL).call(this,e,t,r,i,a,s,o,l,(-c-p)/m,d)},$(It,zf);function gft(n){return decodeURIComponent(escape(n))}let aU=null,Fse=null;function vft(n){return aU||(aU=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Fse=new Map([["","t"]])),n.replaceAll(aU,(e,t,r)=>t?t.normalize("NFKC"):Fse.get(r))}function mxe(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),dft(n)}const cb="pdfjs_internal_id_";function yft(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...a]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const s=a.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(const l of a)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function us(n,e,t){return Math.min(Math.max(n,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class sC{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(a){var l;if(!a)return;let s=null;const o=a.name;if(o==="#text")s=a.value;else if(sC.shouldBuildText(o))(l=a==null?void 0:a.attributes)!=null&&l.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&t.push({str:s}),!!a.children)for(const u of a.children)i(u)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class gxe{static setupStorage(e,t,r,i,a){const s=i.getValue(t,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?e.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",o=>{i.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(t,{value:o.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const o of r.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:a}){const{attributes:s}=t,o=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[l,u]of Object.entries(s))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&a.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,t,r)}static render(e){var h,d;const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:r});const o=a!=="richText",l=e.div;if(l.append(s),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const f=document.createTextNode(i.value);s.append(f),o&&sC.shouldBuildText(i.name)&&u.push(f)}return{textDivs:u}}const c=[[i,-1,s]];for(;c.length>0;){const[f,p,m]=c.at(-1);if(p+1===f.children.length){c.pop();continue}const g=f.children[++c.at(-1)[1]];if(g===null)continue;const{name:v}=g;if(v==="#text"){const S=document.createTextNode(g.value);u.push(S),m.append(S);continue}const b=(h=g==null?void 0:g.attributes)!=null&&h.xmlns?document.createElementNS(g.attributes.xmlns,v):document.createElement(v);if(m.append(b),g.attributes&&this.setAttributes({html:b,element:g,storage:t,intent:a,linkService:r}),((d=g.children)==null?void 0:d.length)>0)c.push([g,-1,b]);else if(g.value){const S=document.createTextNode(g.value);o&&sC.shouldBuildText(v)&&u.push(S),b.append(S)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const kd="http://www.w3.org/2000/svg",Jv=class Jv{};Fe(Jv,"CSS",96),Fe(Jv,"PDF",72),Fe(Jv,"PDF_TO_CSS_UNITS",Jv.CSS/Jv.PDF);let Ig=Jv;async function U2(n,e="text"){if(lE(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class z2{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=s,r*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,h,d,f;switch(i%=360,i<0&&(i+=360),i){case 180:c=-1,h=0,d=0,f=1;break;case 90:c=0,h=1,d=1,f=0;break;case 270:c=0,h=-1,d=-1,f=0;break;case 0:c=1,h=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(d=-d,f=-f);let p,m,g,v;c===0?(p=Math.abs(u-e[1])*r+a,m=Math.abs(l-e[0])*r+s,g=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(p=Math.abs(l-e[0])*r+a,m=Math.abs(u-e[1])*r+s,g=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[c*r,h*r,d*r,f*r,p-c*r*l-d*r*u,m-h*r*l-f*r*u],this.width=g,this.height=v}get rawDims(){const e=this.viewBox;return En(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new z2({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,t){const r=[e,t];return It.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];It.applyTransform(t,this.transform);const r=[e[2],e[3]];return It.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return It.applyInverseTransform(r,this.transform),r}}class YW extends mx{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function aO(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function qW(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function xft(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function _ft(n,e="document.pdf"){if(typeof n!="string")return e;if(aO(n))return wn('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},a=/\.pdf$/i,s=r.pathname.split("/").at(-1);if(a.test(s))return i(s);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const u of o)if(a.test(u))return i(u);const l=Array.from(r.searchParams.keys()).reverse();for(const u of l)if(a.test(u))return i(u)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e}class Use{constructor(){Fe(this,"started",Object.create(null));Fe(this,"times",[])}time(e){e in this.started&&wn(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||wn(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:a}of this.times)e.push(`${r.padEnd(t)} ${a-i}ms
`);return e.join("")}}function lE(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Bu(n){n.preventDefault()}function Ri(n){n.preventDefault(),n.stopPropagation()}function bft(n){console.log("Deprecated API usage: "+n)}var cC;class ak{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;_(this,cC)||U(this,cC,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=_(this,cC).exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(s+=c,o+=h):u==="+"&&(s-=c,o-=h),new Date(Date.UTC(r,i,a,s,o,l))}}cC=new WeakMap,$(ak,cC);function Sft(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new z2({viewBox:a,userUnit:1,scale:e,rotation:t})}function V2(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(wn(`Not a valid color format: "${n}"`),[0,0,0])}function wft(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,V2(r))}e.remove()}function _i(n){const{a:e,b:t,c:r,d:i,e:a,f:s}=n.getTransform();return[e,t,r,i,a,s]}function nh(n){const{a:e,b:t,c:r,d:i,e:a,f:s}=n.getTransform().invertSelf();return[e,t,r,i,a,s]}function Qy(n,e,t=!1,r=!0){if(e instanceof z2){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=n,o=Ea.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${a}px`,c=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(s.width=c,s.height=h):(s.width=h,s.height=c)}r&&n.setAttribute("data-main-rotation",e.rotation)}class ud{constructor(){const{pixelRatio:e}=ud;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,a=-1){let s=1/0,o=1/0,l=1/0;r=ud.capPixels(r,a),r>0&&(s=Math.sqrt(r/(e*t))),i!==-1&&(o=i/e,l=i/t);const u=Math.min(s,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const SH=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Tft{static get isDarkMode(){var e;return En(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class Eft{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),En(this,"commentForegroundColor",V2(r))}}function Aft(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return n=Math.round(n*r+i),e=Math.round(e*r+i),t=Math.round(t*r+i),[n,e,t]}function zse(n,e){const t=n[0]/255,r=n[1]/255,i=n[2]/255,a=Math.max(t,r,i),s=Math.min(t,r,i),o=(a+s)/2;if(a===s)e[0]=e[1]=0;else{const l=a-s;switch(e[1]=o<.5?l/(a+s):l/(2-a-s),a){case t:e[0]=((r-i)/l+(r<i?6:0))*60;break;case r:e[0]=((i-t)/l+2)*60;break;case i:e[0]=((t-r)/l+4)*60;break}}e[2]=o}function wH(n,e){const t=n[0],r=n[1],i=n[2],a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(t/60%2-1)),o=i-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 1:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 2:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 3:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 4:e[0]=s+o,e[1]=o,e[2]=a+o;break;case 5:case 6:e[0]=a+o,e[1]=o,e[2]=s+o;break}}function Vse(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function Hse(n,e,t){wH(n,t),t.map(Vse);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];wH(e,t),t.map(Vse);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const Gse=new Map;function Cft(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=Gse.get(t);if(r)return r;const i=new Float32Array(9),a=i.subarray(0,3),s=i.subarray(3,6);zse(n,s);const o=i.subarray(6,9);zse(e,o);const l=o[2]<.5,u=l?12:4.5;if(s[2]=l?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),Hse(s,o,a)<u){let c,h;l?(c=s[2],h=1):(c=0,h=s[2]);const d=.005;for(;h-c>d;){const f=s[2]=(c+h)/2;l===Hse(s,o,a)<u?c=f:h=f}s[2]=l?h:c}return wH(s,a),r=It.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),Gse.set(t,r),r}function vxe({html:n,dir:e,className:t},r){const i=document.createDocumentFragment();if(typeof n=="string"){const a=document.createElement("p");a.dir=e||"auto";const s=n.split(/(?:\r\n?|\n)/);for(let o=0,l=s.length;o<l;++o){const u=s[o];a.append(document.createTextNode(u)),o<l-1&&a.append(document.createElement("br"))}i.append(a)}else gxe.render({xfaHtml:n,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",t),r.append(i)}function yxe(n){const e=new Path2D;if(!n)return e;for(let t=0,r=n.length;t<r;)switch(n[t++]){case UT.moveTo:e.moveTo(n[t++],n[t++]);break;case UT.lineTo:e.lineTo(n[t++],n[t++]);break;case UT.curveTo:e.bezierCurveTo(n[t++],n[t++],n[t++],n[t++],n[t++],n[t++]);break;case UT.quadraticCurveTo:e.quadraticCurveTo(n[t++],n[t++],n[t++],n[t++]);break;case UT.closePath:e.closePath();break;default:wn(`Unrecognized drawing path operator: ${n[t-1]}`);break}return e}var Hd,oc,Ab,am,m0,AS,xxe,_xe;const ar=class ar{constructor(){$(this,AS)}get pagesNumber(){return _(ar,am)}set pagesNumber(e){_(ar,am)!==e&&(U(ar,am,e),e===0&&(U(ar,oc,null),U(ar,Hd,null)))}addListener(e){_(ar,m0).push(e)}removeListener(e){const t=_(ar,m0).indexOf(e);t>=0&&_(ar,m0).splice(t,1)}movePages(e,t,r){q(this,AS,_xe).call(this,!0);const i=_(ar,oc),a=_(ar,Hd);_(ar,Ab).set(a);const s=t.length,o=new Uint32Array(s);let l=0;for(let f=0;f<s;f++){const p=t[f]-1;o[f]=i[p],p<r&&(l+=1)}const u=_(ar,am);let c=r-l;const h=u-s;c=us(c,0,h);for(let f=0,p=0;f<u;f++)e.has(f+1)||(i[p++]=i[f]);i.copyWithin(c+s,c,h),i.set(o,c);let d=!1;for(let f=0,p=u;f<p;f++){const m=i[f];d||(d=m!==f+1),a[m-1]=f+1}q(this,AS,xxe).call(this),d||(this.pagesNumber=0)}hasBeenAltered(){return _(ar,oc)!==null}getPageMappingForSaving(){return{pageIndices:_(ar,Hd)?_(ar,Hd).map(e=>e-1):null}}getPrevPageNumber(e){return _(ar,Ab)[_(ar,oc)[e-1]-1]}getPageNumber(e){var t;return((t=_(ar,Hd))==null?void 0:t[e-1])??e}getPageId(e){var t;return((t=_(ar,oc))==null?void 0:t[e-1])??e}static get instance(){return En(this,"instance",new ar)}getMapping(){return _(ar,oc).subarray(0,this.pagesNumber)}};Hd=new WeakMap,oc=new WeakMap,Ab=new WeakMap,am=new WeakMap,m0=new WeakMap,AS=new WeakSet,xxe=function(){for(const e of _(ar,m0))e()},_xe=function(e){if(_(ar,oc))return;const t=_(ar,am),r=new Uint32Array(3*t),i=U(ar,oc,r.subarray(0,t)),a=U(ar,Hd,r.subarray(t,2*t));if(e)for(let s=0;s<t;s++)i[s]=a[s]=s+1;U(ar,Ab,r.subarray(2*t))},$(ar,Hd,null),$(ar,oc,null),$(ar,Ab,null),$(ar,am,0),$(ar,m0,[]);let oC=ar;var sm,om,nu,ru,hC,lm,Cb,Mb,dC,vk,bxe,ds,Sxe,wxe,H_,uE;const zd=class zd{constructor(e){$(this,ds);$(this,sm,null);$(this,om,null);$(this,nu);$(this,ru,null);$(this,hC,null);$(this,lm,null);$(this,Cb,null);$(this,Mb,null);U(this,nu,e),_(zd,dC)||U(zd,dC,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=U(this,sm,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=_(this,nu)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Bu,{signal:t}),e.addEventListener("pointerdown",q(zd,vk,bxe),{signal:t}));const r=U(this,ru,document.createElement("div"));r.className="buttons",e.append(r);const i=_(this,nu).toolbarPosition;if(i){const{style:a}=e,s=_(this,nu)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return _(this,sm)}hide(){var e;_(this,sm).classList.add("hidden"),(e=_(this,om))==null||e.hideDropdown()}show(){var e,t;_(this,sm).classList.remove("hidden"),(e=_(this,hC))==null||e.shown(),(t=_(this,lm))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=_(this,nu),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",_(zd,dC)[e]),q(this,ds,H_).call(this,r)&&r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),_(this,ru).append(r)}async addAltText(e){const t=await e.render();q(this,ds,H_).call(this,t),_(this,ru).append(t,_(this,ds,uE)),U(this,hC,e)}addComment(e,t=null){if(_(this,lm))return;const r=e.renderForToolbar();if(!r)return;q(this,ds,H_).call(this,r);const i=U(this,Cb,_(this,ds,uE));t?(_(this,ru).insertBefore(r,t),_(this,ru).insertBefore(i,t)):_(this,ru).append(r,i),U(this,lm,e),e.toolbar=this}addColorPicker(e){if(_(this,om))return;U(this,om,e);const t=e.renderButton();q(this,ds,H_).call(this,t),_(this,ru).append(t,_(this,ds,uE))}async addEditSignatureButton(e){const t=U(this,Mb,await e.renderEditButton(_(this,nu)));q(this,ds,H_).call(this,t),_(this,ru).append(t,_(this,ds,uE))}removeButton(e){var t,r;switch(e){case"comment":(t=_(this,lm))==null||t.removeToolbarCommentButton(),U(this,lm,null),(r=_(this,Cb))==null||r.remove(),U(this,Cb,null);break}}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,r){if(!t&&e==="comment")return;const i=_(this,ru).querySelector(r);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){_(this,Mb)&&(_(this,Mb).title=e)}remove(){var e;_(this,sm).remove(),(e=_(this,om))==null||e.destroy(),U(this,om,null)}};sm=new WeakMap,om=new WeakMap,nu=new WeakMap,ru=new WeakMap,hC=new WeakMap,lm=new WeakMap,Cb=new WeakMap,Mb=new WeakMap,dC=new WeakMap,vk=new WeakSet,bxe=function(e){e.stopPropagation()},ds=new WeakSet,Sxe=function(e){_(this,nu)._focusEventsAllowed=!1,Ri(e)},wxe=function(e){_(this,nu)._focusEventsAllowed=!0,Ri(e)},H_=function(e){const t=_(this,nu)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",q(this,ds,Sxe).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",q(this,ds,wxe).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Bu,{signal:t}),!0)},uE=function(){const e=document.createElement("div");return e.className="divider",e},$(zd,vk),$(zd,dC,null);let TH=zd;var fC,g0,Gd,tp,Txe,Exe,EH;class Mft{constructor(e){$(this,tp);$(this,fC,null);$(this,g0,null);$(this,Gd);U(this,Gd,e)}show(e,t,r){const[i,a]=q(this,tp,Exe).call(this,t,r),{style:s}=_(this,g0)||U(this,g0,q(this,tp,Txe).call(this));e.append(_(this,g0)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){_(this,g0).remove()}}fC=new WeakMap,g0=new WeakMap,Gd=new WeakMap,tp=new WeakSet,Txe=function(){const e=U(this,g0,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=_(this,Gd)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Bu,{signal:t});const r=U(this,fC,document.createElement("div"));return r.className="buttons",e.append(r),_(this,Gd).hasCommentManager()&&q(this,tp,EH).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{_(this,Gd).commentSelection("floating_button")}),q(this,tp,EH).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{_(this,Gd).highlightSelection("floating_button")}),e},Exe=function(e,t){let r=0,i=0;for(const a of e){const s=a.y+a.height;if(s<r)continue;const o=a.x+(t?a.width:0);if(s>r){i=o,r=s;continue}t?o>i&&(i=o):o<i&&(i=o)}return[t?1-i:i,r]},EH=function(e,t,r,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",r);const o=_(this,Gd)._signal;o instanceof AbortSignal&&!o.aborted&&(a.addEventListener("contextmenu",Bu,{signal:o}),a.addEventListener("click",i,{signal:o})),_(this,fC).append(a)};function Axe(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var v0,y0,Db,x0;const kr=class kr{static initializeAndAddPointerId(e){(_(kr,y0)||U(kr,y0,new Set)).add(e)}static setPointer(e,t){_(kr,v0)||U(kr,v0,t),_(kr,x0)??U(kr,x0,e)}static setTimeStamp(e){U(kr,Db,e)}static isSamePointerId(e){return _(kr,v0)===e}static isSamePointerIdOrRemove(e){var t;return _(kr,v0)===e?!0:((t=_(kr,y0))==null||t.delete(e),!1)}static isSamePointerType(e){return _(kr,x0)===e}static isInitializedAndDifferentPointerType(e){return _(kr,x0)!==null&&!kr.isSamePointerType(e)}static isSameTimeStamp(e){return _(kr,Db)===e}static isUsingMultiplePointers(){var e;return((e=_(kr,y0))==null?void 0:e.size)>=1}static clearPointerType(){U(kr,x0,null)}static clearPointerIds(){U(kr,v0,NaN),U(kr,y0,null)}static clearTimeStamp(){U(kr,Db,NaN)}};v0=new WeakMap,y0=new WeakMap,Db=new WeakMap,x0=new WeakMap,$(kr,v0,NaN),$(kr,y0,null),$(kr,Db,NaN),$(kr,x0,null);let As=kr;var yk;class Dft{constructor(){$(this,yk,0)}get id(){return`${iC}${ma(this,yk)._++}`}}yk=new WeakMap;var Ib,pC,Cs,Pb,KL;const rX=class rX{constructor(){$(this,Pb);$(this,Ib,mxe());$(this,pC,0);$(this,Cs,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return En(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:r,size:i,type:a}=e;return q(this,Pb,KL).call(this,`${t}_${r}_${i}_${a}`,e)}async getFromUrl(e){return q(this,Pb,KL).call(this,e,e)}async getFromBlob(e,t){const r=await t;return q(this,Pb,KL).call(this,e,r)}async getFromId(e){_(this,Cs)||U(this,Cs,new Map);const t=_(this,Cs).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){_(this,Cs)||U(this,Cs,new Map);let r=_(this,Cs).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${_(this,Ib)}_${ma(this,pC)._++}`,refCounter:1,isSvg:!1},_(this,Cs).set(e,r),_(this,Cs).set(r.id,r),r}getSvgUrl(e){const t=_(this,Cs).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;_(this,Cs)||U(this,Cs,new Map);const t=_(this,Cs).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(r.width,r.height);a.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=a.convertToBlob()}(i=r.close)==null||i.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${_(this,Ib)}_`)}};Ib=new WeakMap,pC=new WeakMap,Cs=new WeakMap,Pb=new WeakSet,KL=async function(e,t){_(this,Cs)||U(this,Cs,new Map);let r=_(this,Cs).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${_(this,Ib)}_${ma(this,pC)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(r.url=t,i=await U2(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const a=rX._isSVGFittingCanvas,s=new FileReader,o=new Image,l=new Promise((u,c)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,u()},s.onload=async()=>{const h=r.svgUrl=s.result;o.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=s.onerror=c});s.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){wn(i),r=null}return _(this,Cs).set(e,r),r&&_(this,Cs).set(r.id,r),r};let AH=rX;var Ui,um,mC,yi;class Ift{constructor(e=128){$(this,Ui,[]);$(this,um,!1);$(this,mC);$(this,yi,-1);U(this,mC,e)}add({cmd:e,undo:t,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(i&&e(),_(this,um))return;const l={cmd:e,undo:t,post:r,type:a};if(_(this,yi)===-1){_(this,Ui).length>0&&(_(this,Ui).length=0),U(this,yi,0),_(this,Ui).push(l);return}if(s&&_(this,Ui)[_(this,yi)].type===a){o&&(l.undo=_(this,Ui)[_(this,yi)].undo),_(this,Ui)[_(this,yi)]=l;return}const u=_(this,yi)+1;u===_(this,mC)?_(this,Ui).splice(0,1):(U(this,yi,u),u<_(this,Ui).length&&_(this,Ui).splice(u)),_(this,Ui).push(l)}undo(){if(_(this,yi)===-1)return;U(this,um,!0);const{undo:e,post:t}=_(this,Ui)[_(this,yi)];e(),t==null||t(),U(this,um,!1),U(this,yi,_(this,yi)-1)}redo(){if(_(this,yi)<_(this,Ui).length-1){U(this,yi,_(this,yi)+1),U(this,um,!0);const{cmd:e,post:t}=_(this,Ui)[_(this,yi)];e(),t==null||t(),U(this,um,!1)}}hasSomethingToUndo(){return _(this,yi)!==-1}hasSomethingToRedo(){return _(this,yi)<_(this,Ui).length-1}cleanType(e){if(_(this,yi)!==-1){for(let t=_(this,yi);t>=0;t--)if(_(this,Ui)[t].type!==e){_(this,Ui).splice(t+1,_(this,yi)-t),U(this,yi,t);return}_(this,Ui).length=0,U(this,yi,-1)}}destroy(){U(this,Ui,null)}}Ui=new WeakMap,um=new WeakMap,mC=new WeakMap,yi=new WeakMap;var xk,Cxe;class H2{constructor(e){$(this,xk);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Ea.platform;for(const[r,i,a={}]of e)for(const s of r){const o=s.startsWith("mac+");t&&o?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!t&&!o&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(q(this,xk,Cxe).call(this,t));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:o=null}}=r;o&&!o(e,t)||(i.bind(e,...s,t)(),a||Ri(t))}}xk=new WeakSet,Cxe=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const _k=class _k{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return wft(e),En(this,"_colors",e)}convert(e){const t=V2(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((a,s)=>a===t[s]))return _k._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?It.makeHexColor(...t):e}};Fe(_k,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let CH=_k;var Lb,rl,Rb,xi,zi,Nb,iu,kb,au,Ms,cm,hm,Ob,dm,ch,su,_0,gC,vC,Bb,yC,hh,fm,Fb,pm,dh,bk,mm,Ub,xC,gm,b0,zb,vm,_C,ia,Mr,jd,ym,xm,bC,Vb,SC,_m,fh,Wd,wC,TC,ou,_t,ZL,MH,Mxe,Dxe,cE,Ixe,Pxe,Lxe,DH,Rxe,Nxe,kxe,Oxe,Ks,Od,Bxe,Fxe,IH,Uxe,hE,PH;const db=class db{constructor(e,t,r,i,a,s,o,l,u,c,h,d,f,p,m,g){$(this,_t);$(this,Lb,new AbortController);$(this,rl,null);$(this,Rb,null);$(this,xi,new Map);$(this,zi,new Map);$(this,Nb,null);$(this,iu,null);$(this,kb,null);$(this,au,new Ift);$(this,Ms,null);$(this,cm,null);$(this,hm,null);$(this,Ob,0);$(this,dm,new Set);$(this,ch,null);$(this,su,null);$(this,_0,new Set);Fe(this,"_editorUndoBar",null);$(this,gC,!1);$(this,vC,!1);$(this,Bb,!1);$(this,yC,null);$(this,hh,null);$(this,fm,null);$(this,Fb,null);$(this,pm,!1);$(this,dh,null);$(this,bk,new Dft);$(this,mm,!1);$(this,Ub,!1);$(this,xC,!1);$(this,gm,null);$(this,b0,null);$(this,zb,null);$(this,vm,null);$(this,_C,null);$(this,ia,Pn.NONE);$(this,Mr,new Set);$(this,jd,null);$(this,ym,null);$(this,xm,null);$(this,bC,null);$(this,Vb,null);$(this,SC,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});$(this,_m,[0,0]);$(this,fh,null);$(this,Wd,null);$(this,wC,null);$(this,TC,null);$(this,ou,null);const v=this._signal=_(this,Lb).signal;U(this,Wd,e),U(this,wC,t),U(this,TC,r),U(this,Nb,i),U(this,Ms,a),U(this,ym,s),U(this,Vb,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),o._on("pagesedited",this.onPagesEdited.bind(this),{signal:v}),window.addEventListener("pointerdown",()=>{U(this,Ub,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{U(this,Ub,!1)},{capture:!0,signal:v}),q(this,_t,Ixe).call(this),q(this,_t,Oxe).call(this),q(this,_t,DH).call(this),U(this,iu,l.annotationStorage),U(this,yC,l.filterFactory),U(this,xm,u),U(this,Fb,c||null),U(this,gC,h),U(this,vC,d),U(this,Bb,f),U(this,_C,p||null),this.viewParameters={realScale:Ig.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=g!==!1,a==null||a.setSidebarUiManager(this)}static get _keyboardManager(){const e=db.prototype,t=s=>_(s,Wd).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return En(this,"_keyboardManager",new H2([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&_(s,Wd).contains(o)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&_(s,Wd).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,r,i,a,s,o,l,u;(e=_(this,ou))==null||e.resolve(),U(this,ou,null),(t=_(this,Lb))==null||t.abort(),U(this,Lb,null),this._signal=null;for(const c of _(this,zi).values())c.destroy();_(this,zi).clear(),_(this,xi).clear(),_(this,_0).clear(),(r=_(this,vm))==null||r.clear(),U(this,rl,null),_(this,Mr).clear(),_(this,au).destroy(),(i=_(this,Nb))==null||i.destroy(),(a=_(this,Ms))==null||a.destroy(),(s=_(this,ym))==null||s.destroy(),(o=_(this,dh))==null||o.hide(),U(this,dh,null),(l=_(this,zb))==null||l.destroy(),U(this,zb,null),U(this,Rb,null),_(this,hh)&&(clearTimeout(_(this,hh)),U(this,hh,null)),_(this,fh)&&(clearTimeout(_(this,fh)),U(this,fh,null)),(u=this._editorUndoBar)==null||u.destroy(),U(this,Vb,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return _(this,_C)}get useNewAltTextFlow(){return _(this,vC)}get useNewAltTextWhenAddingImage(){return _(this,Bb)}get hcmFilter(){return En(this,"hcmFilter",_(this,xm)?_(this,yC).addHCMFilter(_(this,xm).foreground,_(this,xm).background):"none")}get direction(){return En(this,"direction",getComputedStyle(_(this,Wd)).direction)}get _highlightColors(){return En(this,"_highlightColors",_(this,Fb)?new Map(_(this,Fb).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return En(this,"highlightColors",null);const t=new Map,r=!!_(this,xm);for(const[i,a]of e){const s=i.endsWith("_HCM");if(r&&s){t.set(i.replace("_HCM",""),a);continue}!r&&!s&&t.set(i,a)}return En(this,"highlightColors",t)}get highlightColorNames(){return En(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),U(this,hm,e)}setMainHighlightColorPicker(e){U(this,zb,e)}editAltText(e,t=!1){var r;(r=_(this,Nb))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!_(this,Ms)}editComment(e,t,r,i){var a;(a=_(this,Ms))==null||a.showDialog(this,e,t,r,i)}selectComment(e,t){const r=_(this,zi).get(e),i=r==null?void 0:r.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=_(this,Ms))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=_(this,Ms))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=_(this,Ms))==null||t.removeComments([e.uid])}deleteComment(e,t){const r=()=>{e.comment=t},i=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:i,undo:r,mustExec:!0})}toggleComment(e,t,r=void 0){var i;(i=_(this,Ms))==null||i.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var r;return e&&((r=_(this,Ms))==null?void 0:r.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=_(this,Ms))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(_(this,zi).has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){var t;(t=_(this,ym))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return _(this,ym)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":U(this,Bb,t);break}}onPagesEdited({pagesMapper:e}){for(const i of _(this,xi).values())i.updatePageIndex(e.getPrevPageNumber(i.pageIndex+1)-1);const t=_(this,zi),r=U(this,zi,new Map);for(const[i,a]of t){const s=e.getPrevPageNumber(i+1)-1;if(s===-1){a.destroy();continue}r.set(s,a),a.updatePageIndex(s)}}onPageChanging({pageNumber:e}){U(this,Ob,e-1)}focusMainContainer(){_(this,Wd).focus()}findParent(e,t){for(const r of _(this,zi).values()){const{x:i,y:a,width:s,height:o}=r.div.getBoundingClientRect();if(e>=i&&e<=i+s&&t>=a&&t<=a+o)return r}return null}disableUserSelect(e=!1){_(this,wC).classList.toggle("noUserSelect",e)}addShouldRescale(e){_(this,_0).add(e)}removeShouldRescale(e){_(this,_0).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Ig.PDF_TO_CSS_UNITS;for(const r of _(this,_0))r.onScaleChanging();(t=_(this,hm))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o}=r,l=r.toString(),c=q(this,_t,ZL).call(this,r).closest(".textLayer"),h=this.getSelectionBoxes(c);if(!h)return;r.empty();const d=q(this,_t,MH).call(this,c),f=_(this,ia)===Pn.NONE,p=()=>{const m=d==null?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o,text:l});f&&this.showAllEditors("highlight",!0,!0),t&&(m==null||m.editComment())};if(f){this.switchToMode(Pn.HIGHLIGHT,p);return}p()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!_(this,iu))return null;const t=`${iC}${e}`,r=_(this,iu).getRawValue(t);return r&&_(this,iu).remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&_(this,iu)&&!_(this,iu).has(e.id)&&_(this,iu).setValue(e.id,e)}a11yAlert(e,t=null){const r=_(this,TC);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,_(this,pm)&&(U(this,pm,!1),q(this,_t,cE).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of _(this,Mr))if(t.div.contains(e)){U(this,b0,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!_(this,b0))return;const[e,t]=_(this,b0);U(this,b0,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){q(this,_t,DH).call(this),this.setEditingState(!0)}removeEditListeners(){q(this,_t,Rxe).call(this),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of _(this,su))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of _(this,su))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=_(this,rl))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of _(this,Mr)){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const s of _(this,su))if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){wn(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const l of r){const u=await i.deserialize(l);if(!u)return;a.push(u)}const s=()=>{for(const l of a)q(this,_t,IH).call(this,l);q(this,_t,PH).call(this,a)},o=()=>{for(const l of a)l.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}catch(a){wn(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),_(this,ia)!==Pn.NONE&&!this.isEditorHandlingKeyboard&&db._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,_(this,pm)&&(U(this,pm,!1),q(this,_t,cE).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(q(this,_t,Pxe).call(this),q(this,_t,Nxe).call(this),q(this,_t,Ks).call(this,{isEditing:_(this,ia)!==Pn.NONE,isEmpty:q(this,_t,hE).call(this),hasSomethingToUndo:_(this,au).hasSomethingToUndo(),hasSomethingToRedo:_(this,au).hasSomethingToRedo(),hasSelectedEditor:!1})):(q(this,_t,Lxe).call(this),q(this,_t,kxe).call(this),q(this,_t,Ks).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!_(this,su)){U(this,su,e);for(const t of _(this,su))q(this,_t,Od).call(this,t.defaultPropertiesToUpdate)}}getId(){return _(this,bk).id}get currentLayer(){return _(this,zi).get(_(this,Ob))}getLayer(e){return _(this,zi).get(e)}get currentPageIndex(){return _(this,Ob)}addLayer(e){_(this,zi).set(e.pageIndex,e),_(this,mm)?e.enable():e.disable()}removeLayer(e){_(this,zi).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,i=!1,a=!1,s=!1){var o,l,u,c,h,d;if(_(this,ia)!==e&&!(_(this,ou)&&(await _(this,ou).promise,!_(this,ou)))){if(U(this,ou,Promise.withResolvers()),(o=_(this,hm))==null||o.commitOrRemove(),_(this,ia)===Pn.POPUP&&((l=_(this,Ms))==null||l.hideSidebar()),(u=_(this,Ms))==null||u.destroyPopup(),U(this,ia,e),e===Pn.NONE){this.setEditingState(!1),q(this,_t,Fxe).call(this);for(const f of _(this,xi).values())f.hideStandaloneCommentButton();(c=this._editorUndoBar)==null||c.hide(),this.toggleComment(null),_(this,ou).resolve();return}for(const f of _(this,xi).values())f.addStandaloneCommentButton();e===Pn.SIGNATURE&&await((h=_(this,ym))==null?void 0:h.loadSignatures()),r&&As.clearPointerType(),this.setEditingState(!0),await q(this,_t,Bxe).call(this),this.unselectAll();for(const f of _(this,zi).values())f.updateMode(e);if(e===Pn.POPUP){_(this,Rb)||U(this,Rb,await _(this,Vb).getAnnotationsByType(new Set(_(this,su).map(m=>m._editorType))));const f=new Set,p=[];for(const m of _(this,xi).values()){const{annotationElementId:g,hasComment:v,deleted:b}=m;g&&f.add(g),v&&!b&&p.push(m.getData())}for(const m of _(this,Rb)){const{id:g,popupRef:v,contentsObj:b}=m;v&&(b!=null&&b.str)&&!f.has(g)&&!_(this,dm).has(g)&&p.push(m)}(d=_(this,Ms))==null||d.showSidebar(p)}if(!t){i&&this.addNewEditorFromKeyboard(),_(this,ou).resolve();return}for(const f of _(this,xi).values())f.uid===t?(this.setSelected(f),s?f.editComment():a?f.enterInEditMode():f.focus()):f.unselect();_(this,ou).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==_(this,ia)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(_(this,su)){switch(e){case ir.CREATE:this.currentLayer.addNewEditor(t);return;case ir.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(_(this,bC)||U(this,bC,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of _(this,Mr))r.updateParams(e,t);else for(const r of _(this,su))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var a;for(const s of _(this,xi).values())s.editorType===e&&s.show(t);(((a=_(this,bC))==null?void 0:a.get(ir.HIGHLIGHT_SHOW_ALL))??!0)!==t&&q(this,_t,Od).call(this,[[ir.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(_(this,xC)!==e){U(this,xC,e);for(const t of _(this,zi).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of _(this,xi).values())t.pageIndex===e&&(yield t)}getEditor(e){return _(this,xi).get(e)}addEditor(e){_(this,xi).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(_(this,hh)&&clearTimeout(_(this,hh)),U(this,hh,setTimeout(()=>{this.focusMainContainer(),U(this,hh,null)},0))),_(this,xi).delete(e.id),e.annotationElementId&&((t=_(this,vm))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!_(this,dm).has(e.annotationElementId))&&((r=_(this,iu))==null||r.remove(e.id))}addDeletedAnnotationElement(e){_(this,dm).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return _(this,dm).has(e)}removeDeletedAnnotationElement(e){_(this,dm).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){_(this,rl)!==e&&(U(this,rl,e),e&&q(this,_t,Od).call(this,e.propertiesToUpdate))}updateUI(e){_(this,_t,Uxe)===e&&q(this,_t,Od).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){q(this,_t,Od).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(_(this,Mr).has(e)){_(this,Mr).delete(e),e.unselect(),q(this,_t,Ks).call(this,{hasSelectedEditor:this.hasSelection});return}_(this,Mr).add(e),e.select(),q(this,_t,Od).call(this,e.propertiesToUpdate),q(this,_t,Ks).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.uid}),(t=_(this,hm))==null||t.commitOrRemove();for(const r of _(this,Mr))r!==e&&r.unselect();_(this,Mr).clear(),_(this,Mr).add(e),e.select(),q(this,_t,Od).call(this,e.propertiesToUpdate),q(this,_t,Ks).call(this,{hasSelectedEditor:!0})}isSelected(e){return _(this,Mr).has(e)}get firstSelectedEditor(){return _(this,Mr).values().next().value}unselect(e){e.unselect(),_(this,Mr).delete(e),q(this,_t,Ks).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return _(this,Mr).size!==0}get isEnterHandled(){return _(this,Mr).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;_(this,au).undo(),q(this,_t,Ks).call(this,{hasSomethingToUndo:_(this,au).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:q(this,_t,hE).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){_(this,au).redo(),q(this,_t,Ks).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_(this,au).hasSomethingToRedo(),isEmpty:q(this,_t,hE).call(this)})}addCommands(e){_(this,au).add(e),q(this,_t,Ks).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:q(this,_t,hE).call(this)})}cleanUndoStack(e){_(this,au).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[..._(this,Mr)],r=()=>{var s;(s=this._editorUndoBar)==null||s.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const s of t)q(this,_t,IH).call(this,s)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=_(this,rl))==null||e.commitOrRemove()}hasSomethingToControl(){return _(this,rl)||this.hasSelection}selectAll(){for(const e of _(this,Mr))e.commit();q(this,_t,PH).call(this,_(this,xi).values())}unselectAll(){var e;if(!(_(this,rl)&&(_(this,rl).commitOrRemove(),_(this,ia)!==Pn.NONE))&&!((e=_(this,hm))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of _(this,Mr))t.unselect();_(this,Mr).clear(),q(this,_t,Ks).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;_(this,_m)[0]+=e,_(this,_m)[1]+=t;const[i,a]=_(this,_m),s=[..._(this,Mr)],o=1e3;_(this,fh)&&clearTimeout(_(this,fh)),U(this,fh,setTimeout(()=>{U(this,fh,null),_(this,_m)[0]=_(this,_m)[1]=0,this.addCommands({cmd:()=>{for(const l of s)_(this,xi).has(l.id)&&(l.translateInPage(i,a),l.translationDone())},undo:()=>{for(const l of s)_(this,xi).has(l.id)&&(l.translateInPage(-i,-a),l.translationDone())},mustExec:!1})},o));for(const l of s)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),U(this,ch,new Map);for(const e of _(this,Mr))_(this,ch).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!_(this,ch))return!1;this.disableUserSelect(!1);const e=_(this,ch);U(this,ch,null);let t=!1;for(const[{x:i,y:a,pageIndex:s},o]of e)o.newX=i,o.newY=a,o.newPageIndex=s,t||(t=i!==o.savedX||a!==o.savedY||s!==o.savedPageIndex);if(!t)return!1;const r=(i,a,s,o)=>{if(_(this,xi).has(i.id)){const l=_(this,zi).get(o);l?i._setParentAndPosition(l,a,s):(i.pageIndex=o,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:o}]of e)r(i,a,s,o)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:o}]of e)r(i,a,s,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(_(this,ch))for(const r of _(this,ch).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||_(this,Mr).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return _(this,rl)===e}getActive(){return _(this,rl)}getMode(){return _(this,ia)}isEditingMode(){return _(this,ia)!==Pn.NONE}get imageManager(){return En(this,"imageManager",new AH)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,c=t.rangeCount;u<c;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,c,h,d)=>({x:(c-i)/s,y:1-(u+h-r)/a,width:d/s,height:h/a});break;case"180":o=(u,c,h,d)=>({x:1-(u+h-r)/a,y:1-(c+d-i)/s,width:h/a,height:d/s});break;case"270":o=(u,c,h,d)=>({x:1-(c+d-i)/s,y:(u-r)/a,width:d/s,height:h/a});break;default:o=(u,c,h,d)=>({x:(u-r)/a,y:(c-i)/s,width:h/a,height:d/s});break}const l=[];for(let u=0,c=t.rangeCount;u<c;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:d,y:f,width:p,height:m}of h.getClientRects())p===0||m===0||l.push(o(d,f,p,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(_(this,kb)||U(this,kb,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=_(this,kb))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=_(this,kb))==null?void 0:i.get(e.data.id);if(!t)return;const r=_(this,iu).getRawValue(t);r&&(_(this,ia)===Pn.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var a;const i=(a=_(this,vm))==null?void 0:a.get(e);i&&(i.setCanvas(t,r),_(this,vm).delete(e))}addMissingCanvas(e,t){(_(this,vm)||U(this,vm,new Map)).set(e,t)}};Lb=new WeakMap,rl=new WeakMap,Rb=new WeakMap,xi=new WeakMap,zi=new WeakMap,Nb=new WeakMap,iu=new WeakMap,kb=new WeakMap,au=new WeakMap,Ms=new WeakMap,cm=new WeakMap,hm=new WeakMap,Ob=new WeakMap,dm=new WeakMap,ch=new WeakMap,su=new WeakMap,_0=new WeakMap,gC=new WeakMap,vC=new WeakMap,Bb=new WeakMap,yC=new WeakMap,hh=new WeakMap,fm=new WeakMap,Fb=new WeakMap,pm=new WeakMap,dh=new WeakMap,bk=new WeakMap,mm=new WeakMap,Ub=new WeakMap,xC=new WeakMap,gm=new WeakMap,b0=new WeakMap,zb=new WeakMap,vm=new WeakMap,_C=new WeakMap,ia=new WeakMap,Mr=new WeakMap,jd=new WeakMap,ym=new WeakMap,xm=new WeakMap,bC=new WeakMap,Vb=new WeakMap,SC=new WeakMap,_m=new WeakMap,fh=new WeakMap,Wd=new WeakMap,wC=new WeakMap,TC=new WeakMap,ou=new WeakMap,_t=new WeakSet,ZL=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},MH=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of _(this,zi).values())if(r.hasTextLayer(e))return r;return null},Mxe=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=q(this,_t,ZL).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(_(this,dh)||U(this,dh,new Mft(this)),_(this,dh).show(r,i,this.direction==="ltr"))},Dxe=function(){var a,s,o;const e=document.getSelection();if(!e||e.isCollapsed){_(this,jd)&&((a=_(this,dh))==null||a.hide(),U(this,jd,null),q(this,_t,Ks).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===_(this,jd))return;const i=q(this,_t,ZL).call(this,e).closest(".textLayer");if(!i){_(this,jd)&&((s=_(this,dh))==null||s.hide(),U(this,jd,null),q(this,_t,Ks).call(this,{hasSelectedText:!1}));return}if((o=_(this,dh))==null||o.hide(),U(this,jd,t),q(this,_t,Ks).call(this,{hasSelectedText:!0}),!(_(this,ia)!==Pn.HIGHLIGHT&&_(this,ia)!==Pn.NONE)&&(_(this,ia)===Pn.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),U(this,pm,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=_(this,ia)===Pn.HIGHLIGHT?q(this,_t,MH).call(this,i):null;if(l==null||l.toggleDrawing(),_(this,Ub)){const u=new AbortController,c=this.combinedSignal(u),h=d=>{d.type==="pointerup"&&d.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),d.type==="pointerup"&&q(this,_t,cE).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}else l==null||l.toggleDrawing(!0),q(this,_t,cE).call(this,"main_toolbar")}},cE=function(e=""){_(this,ia)===Pn.HIGHLIGHT?this.highlightSelection(e):_(this,gC)&&q(this,_t,Mxe).call(this)},Ixe=function(){document.addEventListener("selectionchange",q(this,_t,Dxe).bind(this),{signal:this._signal})},Pxe=function(){if(_(this,fm))return;U(this,fm,new AbortController);const e=this.combinedSignal(_(this,fm));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Lxe=function(){var e;(e=_(this,fm))==null||e.abort(),U(this,fm,null)},DH=function(){if(_(this,gm))return;U(this,gm,new AbortController);const e=this.combinedSignal(_(this,gm));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Rxe=function(){var e;(e=_(this,gm))==null||e.abort(),U(this,gm,null)},Nxe=function(){if(_(this,cm))return;U(this,cm,new AbortController);const e=this.combinedSignal(_(this,cm));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},kxe=function(){var e;(e=_(this,cm))==null||e.abort(),U(this,cm,null)},Oxe=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Ks=function(e){Object.entries(e).some(([r,i])=>_(this,SC)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_(this,SC),e)}),_(this,ia)===Pn.HIGHLIGHT&&e.hasSelectedEditor===!1&&q(this,_t,Od).call(this,[[ir.HIGHLIGHT_FREE,!0]]))},Od=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Bxe=async function(){if(!_(this,mm)){U(this,mm,!0);const e=[];for(const t of _(this,zi).values())e.push(t.enable());await Promise.all(e);for(const t of _(this,xi).values())t.enable()}},Fxe=function(){if(this.unselectAll(),_(this,mm)){U(this,mm,!1);for(const e of _(this,zi).values())e.disable();for(const e of _(this,xi).values())e.disable()}},IH=function(e){const t=_(this,zi).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Uxe=function(){let e=null;for(e of _(this,Mr));return e},hE=function(){if(_(this,xi).size===0)return!0;if(_(this,xi).size===1)for(const e of _(this,xi).values())return e.isEmpty();return!1},PH=function(e){for(const t of _(this,Mr))t.unselect();_(this,Mr).clear();for(const t of e)t.isEmpty()||(_(this,Mr).add(t),t.select());q(this,_t,Ks).call(this,{hasSelectedEditor:this.hasSelection})},Fe(db,"TRANSLATE_SMALL",1),Fe(db,"TRANSLATE_BIG",10);let Jy=db;var Fa,ph,lc,Hb,mh,il,Gb,gh,Io,Xd,S0,vh,bm,wc,dE,QL;const Js=class Js{constructor(e){$(this,wc);$(this,Fa,null);$(this,ph,!1);$(this,lc,null);$(this,Hb,null);$(this,mh,null);$(this,il,null);$(this,Gb,!1);$(this,gh,null);$(this,Io,null);$(this,Xd,null);$(this,S0,null);$(this,vh,!1);U(this,Io,e),U(this,vh,e._uiManager.useNewAltTextFlow),_(Js,bm)||U(Js,bm,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Js._l10n??(Js._l10n=e)}async render(){const e=U(this,lc,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=U(this,Hb,document.createElement("span"));e.append(t),_(this,vh)?(e.classList.add("new"),e.setAttribute("data-l10n-id",_(Js,bm).missing),t.setAttribute("data-l10n-id",_(Js,bm)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=_(this,Io)._uiManager._signal;e.addEventListener("contextmenu",Bu,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),_(this,Io)._uiManager.editAltText(_(this,Io)),_(this,vh)&&_(this,Io)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:_(this,wc,dE)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(U(this,Gb,!0),i(a))},{signal:r}),await q(this,wc,QL).call(this),e}finish(){_(this,lc)&&(_(this,lc).focus({focusVisible:_(this,Gb)}),U(this,Gb,!1))}isEmpty(){return _(this,vh)?_(this,Fa)===null:!_(this,Fa)&&!_(this,ph)}hasData(){return _(this,vh)?_(this,Fa)!==null||!!_(this,Xd):this.isEmpty()}get guessedText(){return _(this,Xd)}async setGuessedText(e){_(this,Fa)===null&&(U(this,Xd,e),U(this,S0,await Js._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),q(this,wc,QL).call(this))}toggleAltTextBadge(e=!1){var t;if(!_(this,vh)||_(this,Fa)){(t=_(this,gh))==null||t.remove(),U(this,gh,null);return}if(!_(this,gh)){const r=U(this,gh,document.createElement("div"));r.className="noAltTextBadge",_(this,Io).div.append(r)}_(this,gh).classList.toggle("hidden",!e)}serialize(e){let t=_(this,Fa);return!e&&_(this,Xd)===t&&(t=_(this,S0)),{altText:t,decorative:_(this,ph),guessedText:_(this,Xd),textWithDisclaimer:_(this,S0)}}get data(){return{altText:_(this,Fa),decorative:_(this,ph)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(U(this,Xd,r),U(this,S0,i)),!(_(this,Fa)===e&&_(this,ph)===t)&&(a||(U(this,Fa,e),U(this,ph,t)),q(this,wc,QL).call(this))}toggle(e=!1){_(this,lc)&&(!e&&_(this,il)&&(clearTimeout(_(this,il)),U(this,il,null)),_(this,lc).disabled=!e)}shown(){_(this,Io)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:_(this,wc,dE)}})}destroy(){var e,t;(e=_(this,lc))==null||e.remove(),U(this,lc,null),U(this,Hb,null),U(this,mh,null),(t=_(this,gh))==null||t.remove(),U(this,gh,null)}};Fa=new WeakMap,ph=new WeakMap,lc=new WeakMap,Hb=new WeakMap,mh=new WeakMap,il=new WeakMap,Gb=new WeakMap,gh=new WeakMap,Io=new WeakMap,Xd=new WeakMap,S0=new WeakMap,vh=new WeakMap,bm=new WeakMap,wc=new WeakSet,dE=function(){return _(this,Fa)&&"added"||_(this,Fa)===null&&this.guessedText&&"review"||"missing"},QL=async function(){var i,a,s;const e=_(this,lc);if(!e)return;if(_(this,vh)){if(e.classList.toggle("done",!!_(this,Fa)),e.setAttribute("data-l10n-id",_(Js,bm)[_(this,wc,dE)]),(i=_(this,Hb))==null||i.setAttribute("data-l10n-id",_(Js,bm)[`${_(this,wc,dE)}-label`]),!_(this,Fa)){(a=_(this,mh))==null||a.remove();return}}else{if(!_(this,Fa)&&!_(this,ph)){e.classList.remove("done"),(s=_(this,mh))==null||s.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=_(this,mh);if(!t){U(this,mh,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${_(this,Io).id}`;const o=100,l=_(this,Io)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(_(this,il)),U(this,il,null)},{once:!0}),e.addEventListener("mouseenter",()=>{U(this,il,setTimeout(()=>{U(this,il,null),_(this,mh).classList.add("show"),_(this,Io)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;_(this,il)&&(clearTimeout(_(this,il)),U(this,il,null)),(u=_(this,mh))==null||u.classList.remove("show")},{signal:l})}_(this,ph)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=_(this,Fa)),t.parentNode||e.append(t);const r=_(this,Io).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},$(Js,bm,null),Fe(Js,"_l10n",null);let sk=Js;var ts,lu,w0,Jr,EC,Sm,uu,wm,Tm,T0,AC,LH;class JP{constructor(e){$(this,AC);$(this,ts,null);$(this,lu,null);$(this,w0,!1);$(this,Jr,null);$(this,EC,null);$(this,Sm,null);$(this,uu,null);$(this,wm,null);$(this,Tm,!1);$(this,T0,null);U(this,Jr,e)}renderForToolbar(){const e=U(this,lu,document.createElement("button"));return e.className="comment",q(this,AC,LH).call(this,e,!1)}renderForStandalone(){const e=U(this,ts,document.createElement("button"));e.className="annotationCommentButton";const t=_(this,Jr).commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(_(this,Jr)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=_(this,Jr).commentButtonColor;i&&(r.backgroundColor=i)}return q(this,AC,LH).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=_(this,ts)??_(this,lu))==null||e.focus()},0)}onUpdatedColor(){if(!_(this,ts))return;const e=_(this,Jr).commentButtonColor;e&&(_(this,ts).style.backgroundColor=e),_(this,Jr)._uiManager.updatePopupColor(_(this,Jr))}get commentButtonWidth(){var e;return(((e=_(this,ts))==null?void 0:e.getBoundingClientRect().width)??0)/_(this,Jr).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(_(this,T0))return _(this,T0);if(!_(this,ts))return null;const{x:e,y:t,height:r}=_(this,ts).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=_(this,Jr).parent.boundingClientRect;return[(e-i)/s,(t+r-a)/o]}set commentPopupPositionInLayer(e){U(this,T0,e)}hasDefaultPopupPosition(){return _(this,T0)===null}removeStandaloneCommentButton(){var e;(e=_(this,ts))==null||e.remove(),U(this,ts,null)}removeToolbarCommentButton(){var e;(e=_(this,lu))==null||e.remove(),U(this,lu,null)}setCommentButtonStates({selected:e,hasPopup:t}){_(this,ts)&&(_(this,ts).classList.toggle("selected",e),_(this,ts).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let r,i;if(t)[r,i]=t;else{[r,i]=_(this,Jr).commentButtonPosition;const{width:c,height:h,x:d,y:f}=_(this,Jr);r=d+r*c,i=f+i*h}const a=_(this,Jr).parent.boundingClientRect,{x:s,y:o,width:l,height:u}=a;_(this,Jr)._uiManager.editComment(_(this,Jr),s+r*l,o+i*u,{...e,parentDimensions:a})}finish(){_(this,lu)&&(_(this,lu).focus({focusVisible:_(this,w0)}),U(this,w0,!1))}isDeleted(){return _(this,Tm)||_(this,uu)===""}isEmpty(){return _(this,uu)===null}hasBeenEdited(){return this.isDeleted()||_(this,uu)!==_(this,EC)}serialize(){return this.data}get data(){return{text:_(this,uu),richText:_(this,Sm),date:_(this,wm),deleted:this.isDeleted()}}set data(e){if(e!==_(this,uu)&&U(this,Sm,null),e===null){U(this,uu,""),U(this,Tm,!0);return}U(this,uu,e),U(this,wm,new Date),U(this,Tm,!1)}restoreData({text:e,richText:t,date:r}){U(this,uu,e),U(this,Sm,t),U(this,wm,r),U(this,Tm,!1)}setInitialText(e,t=null){U(this,EC,e),this.data=e,U(this,wm,null),U(this,Sm,t)}shown(){}destroy(){var e,t;(e=_(this,lu))==null||e.remove(),U(this,lu,null),(t=_(this,ts))==null||t.remove(),U(this,ts,null),U(this,uu,""),U(this,Sm,null),U(this,wm,null),U(this,Jr,null),U(this,w0,!1),U(this,Tm,!1)}}ts=new WeakMap,lu=new WeakMap,w0=new WeakMap,Jr=new WeakMap,EC=new WeakMap,Sm=new WeakMap,uu=new WeakMap,wm=new WeakMap,Tm=new WeakMap,T0=new WeakMap,AC=new WeakSet,LH=function(e,t){if(!_(this,Jr)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[_(this,Jr)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=_(this,Jr)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Bu,{signal:r}),t&&(e.addEventListener("focusin",a=>{_(this,Jr)._focusEventsAllowed=!1,Ri(a)},{capture:!0,signal:r}),e.addEventListener("focusout",a=>{_(this,Jr)._focusEventsAllowed=!0,Ri(a)},{capture:!0,signal:r})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),e===_(this,lu)?this.edit():_(this,Jr).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(U(this,w0,!0),i(a))},{signal:r}),e.addEventListener("pointerenter",()=>{_(this,Jr).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{_(this,Jr).toggleComment(!1,!1)},{signal:r}),e};var jb,E0,CC,MC,DC,IC,PC,$d,A0,Yd,C0,qd,Pg,zxe,Vxe,Hxe;const iX=class iX{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:o}){$(this,Pg);$(this,jb);$(this,E0,!1);$(this,CC,null);$(this,MC);$(this,DC);$(this,IC);$(this,PC);$(this,$d,null);$(this,A0);$(this,Yd,null);$(this,C0);$(this,qd,null);U(this,jb,e),U(this,CC,r),U(this,MC,t),U(this,DC,i),U(this,IC,a),U(this,PC,s),U(this,C0,new AbortController),U(this,A0,AbortSignal.any([o,_(this,C0).signal])),e.addEventListener("touchstart",q(this,Pg,zxe).bind(this),{passive:!1,signal:_(this,A0)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ud.pixelRatio}destroy(){var e,t;(e=_(this,C0))==null||e.abort(),U(this,C0,null),(t=_(this,$d))==null||t.abort(),U(this,$d,null)}};jb=new WeakMap,E0=new WeakMap,CC=new WeakMap,MC=new WeakMap,DC=new WeakMap,IC=new WeakMap,PC=new WeakMap,$d=new WeakMap,A0=new WeakMap,Yd=new WeakMap,C0=new WeakMap,qd=new WeakMap,Pg=new WeakSet,zxe=function(e){var i,a,s;if((i=_(this,MC))!=null&&i.call(this))return;if(e.touches.length===1){if(_(this,$d))return;const o=U(this,$d,new AbortController),l=AbortSignal.any([_(this,A0),o.signal]),u=_(this,jb),c={capture:!0,signal:l,passive:!1},h=d=>{var f;d.pointerType==="touch"&&((f=_(this,$d))==null||f.abort(),U(this,$d,null))};u.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(Ri(d),h(d))},c),u.addEventListener("pointerup",h,c),u.addEventListener("pointercancel",h,c);return}if(!_(this,qd)){U(this,qd,new AbortController);const o=AbortSignal.any([_(this,A0),_(this,qd).signal]),l=_(this,jb),u={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",q(this,Pg,Vxe).bind(this),u);const c=q(this,Pg,Hxe).bind(this);l.addEventListener("touchend",c,u),l.addEventListener("touchcancel",c,u),u.capture=!0,l.addEventListener("pointerdown",Ri,u),l.addEventListener("pointermove",Ri,u),l.addEventListener("pointercancel",Ri,u),l.addEventListener("pointerup",Ri,u),(a=_(this,DC))==null||a.call(this)}if(Ri(e),e.touches.length!==2||(s=_(this,CC))!=null&&s.call(this)){U(this,Yd,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),U(this,Yd,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},Vxe=function(e){var w;if(!_(this,Yd)||e.touches.length!==2)return;Ri(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:a}=t,{screenX:s,screenY:o}=r,l=_(this,Yd),{touch0X:u,touch0Y:c,touch1X:h,touch1Y:d}=l,f=h-u,p=d-c,m=s-i,g=o-a,v=Math.hypot(m,g)||1,b=Math.hypot(f,p)||1;if(!_(this,E0)&&Math.abs(b-v)<=iX.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=a,l.touch1X=s,l.touch1Y=o,!_(this,E0)){U(this,E0,!0);return}const S=[(i+s)/2,(a+o)/2];(w=_(this,IC))==null||w.call(this,S,b,v)},Hxe=function(e){var t;e.touches.length>=2||(_(this,qd)&&(_(this,qd).abort(),U(this,qd,null),(t=_(this,PC))==null||t.call(this)),_(this,Yd)&&(Ri(e),U(this,Yd,null),U(this,E0,!1)))};let ok=iX;var M0,uc,hi,Dr,Kd,Wb,Em,LC,ns,D0,Zd,cu,Am,RC,I0,al,NC,P0,Qd,yh,Xb,$b,hu,L0,kC,Sk,dn,RH,OC,NH,JL,Gxe,jxe,kH,eR,OH,Wxe,Xxe,$xe,BH,Yxe,FH,qxe,Kxe,Zxe,UH,fE;const In=class In{constructor(e){$(this,dn);$(this,M0,null);$(this,uc,null);$(this,hi,null);$(this,Dr,null);$(this,Kd,null);$(this,Wb,!1);$(this,Em,null);$(this,LC,"");$(this,ns,null);$(this,D0,null);$(this,Zd,null);$(this,cu,null);$(this,Am,null);$(this,RC,"");$(this,I0,!1);$(this,al,null);$(this,NC,!1);$(this,P0,!1);$(this,Qd,!1);$(this,yh,null);$(this,Xb,0);$(this,$b,0);$(this,hu,null);$(this,L0,null);Fe(this,"isSelected",!1);Fe(this,"_isCopy",!1);Fe(this,"_editToolbar",null);Fe(this,"_initialOptions",Object.create(null));Fe(this,"_initialData",null);Fe(this,"_isVisible",!0);Fe(this,"_uiManager",null);Fe(this,"_focusEventsAllowed",!0);$(this,kC,!1);$(this,Sk,In._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,s];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=In.prototype._resizeWithKeyboard,t=Jy.TRANSLATE_SMALL,r=Jy.TRANSLATE_BIG;return En(this,"_resizerKeyboardManager",new H2([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],In.prototype._stopResizingWithKeyboard]]))}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return En(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Pft({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(In._l10n??(In._l10n=e),In._l10nResizer||(In._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),In._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);In._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){_r("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return _(this,kC)}set _isDraggable(e){var t;U(this,kC,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_(this,Sk)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(q(this,dn,fE).call(this),(t=_(this,cu))==null||t.remove(),U(this,cu,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(_(this,I0)?U(this,I0,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[a,s]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(t+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}translate(e,t){q(this,dn,RH).call(this,this.parentDimensions,e,t)}translateInPage(e,t){_(this,al)||U(this,al,[this.x,this.y,this.width,this.height]),q(this,dn,RH).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){_(this,al)||U(this,al,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[l,u]=this.getBaseTranslation();s+=l,o+=u;const{style:c}=r;c.left=`${(100*s).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!_(this,al)&&(_(this,al)[0]!==this.x||_(this,al)[1]!==this.y)}get _hasBeenResized(){return!!_(this,al)&&(_(this,al)[2]!==this.width||_(this,al)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=In,i=r/e,a=r/t;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:a,y:s,width:o,height:l}=this;if(o*=r,l*=i,a*=r,s*=i,this._mustFixPosition)switch(e){case 0:a=us(a,0,r-o),s=us(s,0,i-l);break;case 90:a=us(a,0,r-l),s=us(s,o,i);break;case 180:a=us(a,o,r),s=us(s,l,i);break;case 270:a=us(a,l,r),s=us(s,0,i-o);break}this.x=a/=r,this.y=s/=i;const[u,c]=this.getBaseTranslation();a+=u,s+=c,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return q(r=In,OC,NH).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return q(r=In,OC,NH).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=_(this,hi))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||_(this,P0))return this._editToolbar;this._editToolbar=new TH(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=_(this,hi))==null||t.destroy()}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return _(this,hi)||(sk.initialize(In._l10n),U(this,hi,new sk(this)),_(this,M0)&&(_(this,hi).data=_(this,M0),U(this,M0,null))),_(this,hi)}get altTextData(){var e;return(e=_(this,hi))==null?void 0:e.data}set altTextData(e){_(this,hi)&&(_(this,hi).data=e)}get guessedAltText(){var e;return(e=_(this,hi))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=_(this,hi))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=_(this,hi))==null?void 0:t.serialize(e)}hasAltText(){return!!_(this,hi)&&!_(this,hi).isEmpty()}hasAltTextData(){var e;return((e=_(this,hi))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=_(this,Dr))==null||e.focusButton()}addCommentButton(){return this.canAddComment?_(this,Dr)||U(this,Dr,new JP(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(_(this,Kd)){this._uiManager.isEditingMode()&&_(this,Kd).classList.remove("hidden");return}this.hasComment&&(U(this,Kd,_(this,Dr).renderForStandalone()),this.div.append(_(this,Kd)))}}removeStandaloneCommentButton(){_(this,Dr).removeStandaloneCommentButton(),U(this,Kd,null)}hideStandaloneCommentButton(){var e;(e=_(this,Kd))==null||e.classList.add("hidden")}get comment(){if(!_(this,Dr))return null;const{data:{richText:e,text:t,date:r,deleted:i}}=_(this,Dr);return{text:t,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){_(this,Dr)||U(this,Dr,new JP(this)),typeof e=="object"&&e!==null?_(this,Dr).restoreData(e):_(this,Dr).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(_(this,Dr)||U(this,Dr,new JP(this)),_(this,Dr).setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=_(this,Dr))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=_(this,Dr))==null?void 0:e.isDeleted()}get hasComment(){return!!_(this,Dr)&&!_(this,Dr).isEmpty()&&!_(this,Dr).isDeleted()}async editComment(e){_(this,Dr)||U(this,Dr,new JP(this)),_(this,Dr).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){_(this,Dr).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,o=s+a+1,l=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){_(this,Dr).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var s;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=_(this,Wb)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),q(this,dn,FH).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),Axe(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(_(this,L0)||U(this,L0,new ok({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:q(this,dn,Wxe).bind(this),onPinching:q(this,dn,Xxe).bind(this),onPinchEnd:q(this,dn,$xe).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(s=this._uiManager._editorUndoBar)==null||s.hide(),e}pointerdown(e){const{isMac:t}=Ea.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(U(this,I0,!0),this._isDraggable){q(this,dn,Yxe).call(this,e);return}q(this,dn,BH).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){_(this,yh)&&clearTimeout(_(this,yh)),U(this,yh,setTimeout(()=>{var e;U(this,yh,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/i,c=t/i,h=this.x*a,d=this.y*s,f=this.width*a,p=this.height*s;switch(r){case 0:return[h+u+o,s-d-c-p+l,h+u+f+o,s-d-c+l];case 90:return[h+c+o,s-d+u+l,h+c+p+o,s-d+u+f+l];case 180:return[h-u-f+o,s-d+c+l,h-u+o,s-d+c+p+l];case 270:return[h-c-p+o,s-d-u-f+l,h-c+o,s-d-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,a,s]=e,o=a-r,l=s-i;switch(this.rotation){case 0:return[r,t-s,o,l];case 90:return[r,t-i,l,o];case 180:return[a,t-i,o,l];case 270:return[a,t-s,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&In._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=_(this,Dr))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:i,deleted:a,richText:s},uid:o,pageIndex:l,creationDate:u,modificationDate:c}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:u,modificationDate:r||c,popupRef:!a,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),U(this,P0,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),U(this,P0,!1),!0):!1}isInEditMode(){return _(this,P0)}shouldGetKeyboardEvents(){return _(this,Qd)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return t<s&&i>0&&e<a&&r>0}rebuild(){q(this,dn,FH).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,U(i,M0,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[o,l,u,c]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/a,i.y=l/s,i.width=u/a,i.height=c/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t,r;if((e=_(this,Am))==null||e.abort(),U(this,Am,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),_(this,yh)&&(clearTimeout(_(this,yh)),U(this,yh,null)),q(this,dn,fE).call(this),this.removeEditToolbar(),_(this,hu)){for(const i of _(this,hu).values())clearTimeout(i);U(this,hu,null)}this.parent=null,(t=_(this,L0))==null||t.destroy(),U(this,L0,null),(r=_(this,cu))==null||r.remove(),U(this,cu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(q(this,dn,Gxe).call(this),_(this,ns).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,i,a,s]=this.getPDFRect();return[In._round(r+(a-r)*e),In._round(i+(s-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return _(this,Dr).commentPopupPositionInLayer}set commentPopupPosition(e){_(this,Dr).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return _(this,Dr).hasDefaultPopupPosition()}get commentButtonWidth(){return _(this,Dr).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){var t;(t=_(this,Dr))==null||t.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),U(this,Zd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=_(this,ns).children;if(!_(this,uc)){U(this,uc,Array.from(t));const s=q(this,dn,qxe).bind(this),o=q(this,dn,Kxe).bind(this),l=this._uiManager._signal;for(const u of _(this,uc)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",q(this,dn,Zxe).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",In._l10nResizer[c])}}const r=_(this,uc)[0];let i=0;for(const s of t){if(s===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(_(this,uc).length/4);if(a!==i){if(a<i)for(let o=0;o<i-a;o++)_(this,ns).append(_(this,ns).firstElementChild);else if(a>i)for(let o=0;o<a-i;o++)_(this,ns).firstElementChild.before(_(this,ns).lastElementChild);let s=0;for(const o of t){const u=_(this,uc)[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",In._l10nResizer[u])}}q(this,dn,UH).call(this,0),U(this,Qd,!0),_(this,ns).firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){_(this,Qd)&&q(this,dn,OH).call(this,_(this,RC),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){q(this,dn,fE).call(this),this.div.focus()}select(){var e,t,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(r=_(this,hi))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,r,i,a;this.isSelected&&(this.isSelected=!1,(e=_(this,ns))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=_(this,hi))==null||a.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return _(this,NC)}set isEditing(e){U(this,NC,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){_(this,hu)||U(this,hu,new Map);const{action:r}=e;let i=_(this,hu).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),_(this,hu).delete(r),_(this,hu).size===0&&U(this,hu,null)},In._telemetryTimeout),_(this,hu).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),U(this,Wb,!1)}disable(){this.div&&(this.div.tabIndex=-1),U(this,Wb,!0)}updateFakeAnnotationElement(e){if(!_(this,cu)&&!this.deleted){U(this,cu,e.addFakeAnnotation(this));return}if(this.deleted){_(this,cu).remove(),U(this,cu,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&_(this,cu).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};M0=new WeakMap,uc=new WeakMap,hi=new WeakMap,Dr=new WeakMap,Kd=new WeakMap,Wb=new WeakMap,Em=new WeakMap,LC=new WeakMap,ns=new WeakMap,D0=new WeakMap,Zd=new WeakMap,cu=new WeakMap,Am=new WeakMap,RC=new WeakMap,I0=new WeakMap,al=new WeakMap,NC=new WeakMap,P0=new WeakMap,Qd=new WeakMap,yh=new WeakMap,Xb=new WeakMap,$b=new WeakMap,hu=new WeakMap,L0=new WeakMap,kC=new WeakMap,Sk=new WeakMap,dn=new WeakSet,RH=function([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},OC=new WeakSet,NH=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},JL=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},Gxe=function(){if(_(this,ns))return;U(this,ns,document.createElement("div")),_(this,ns).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");_(this,ns).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",q(this,dn,jxe).bind(this,r),{signal:t}),i.addEventListener("contextmenu",Bu,{signal:t}),i.tabIndex=-1}this.div.prepend(_(this,ns))},jxe=function(e,t){var c;t.preventDefault();const{isMac:r}=Ea.platform;if(t.button!==0||t.ctrlKey&&r)return;(c=_(this,hi))==null||c.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,U(this,D0,[t.screenX,t.screenY]);const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",q(this,dn,OH).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Ri,{passive:!1,signal:s}),window.addEventListener("contextmenu",Bu,{signal:s}),U(this,Zd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;a.abort(),this.parent.togglePointerEvents(!0),(h=_(this,hi))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,q(this,dn,eR).call(this)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})},kH=function(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},eR=function(){if(!_(this,Zd))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=_(this,Zd);U(this,Zd,null);const a=this.x,s=this.y,o=this.width,l=this.height;a===e&&s===t&&o===r&&l===i||this.addCommands({cmd:q(this,dn,kH).bind(this,a,s,o,l),undo:q(this,dn,kH).bind(this,e,t,r,i),mustExec:!0})},OH=function(e,t){const[r,i]=this.parentDimensions,a=this.x,s=this.y,o=this.width,l=this.height,u=In.MIN_SIZE/r,c=In.MIN_SIZE/i,h=q(this,dn,JL).call(this,this.rotation),d=(F,X)=>[h[0]*F+h[2]*X,h[1]*F+h[3]*X],f=q(this,dn,JL).call(this,360-this.rotation),p=(F,X)=>[f[0]*F+f[2]*X,f[1]*F+f[3]*X];let m,g,v=!1,b=!1;switch(e){case"topLeft":v=!0,m=(F,X)=>[0,0],g=(F,X)=>[F,X];break;case"topMiddle":m=(F,X)=>[F/2,0],g=(F,X)=>[F/2,X];break;case"topRight":v=!0,m=(F,X)=>[F,0],g=(F,X)=>[0,X];break;case"middleRight":b=!0,m=(F,X)=>[F,X/2],g=(F,X)=>[0,X/2];break;case"bottomRight":v=!0,m=(F,X)=>[F,X],g=(F,X)=>[0,0];break;case"bottomMiddle":m=(F,X)=>[F/2,X],g=(F,X)=>[F/2,0];break;case"bottomLeft":v=!0,m=(F,X)=>[0,X],g=(F,X)=>[F,0];break;case"middleLeft":b=!0,m=(F,X)=>[0,X/2],g=(F,X)=>[F,X/2];break}const S=m(o,l),w=g(o,l);let E=d(...w);const T=In._round(a+E[0]),M=In._round(s+E[1]);let P=1,I=1,D,R;if(t.fromKeyboard)({deltaX:D,deltaY:R}=t);else{const{screenX:F,screenY:X}=t,[j,Q]=_(this,D0);[D,R]=this.screenToPageTranslation(F-j,X-Q),_(this,D0)[0]=F,_(this,D0)[1]=X}if([D,R]=p(D/r,R/i),v){const F=Math.hypot(o,l);P=I=Math.max(Math.min(Math.hypot(w[0]-S[0]-D,w[1]-S[1]-R)/F,1/o,1/l),u/o,c/l)}else b?P=us(Math.abs(w[0]-S[0]-D),u,1)/o:I=us(Math.abs(w[1]-S[1]-R),c,1)/l;const B=In._round(o*P),k=In._round(l*I);E=d(...g(B,k));const V=T-E[0],G=M-E[1];_(this,al)||U(this,al,[this.x,this.y,this.width,this.height]),this.width=B,this.height=k,this.x=V,this.y=G,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Wxe=function(){var e;U(this,Zd,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=_(this,hi))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Xxe=function(e,t,r){let a=.7*(r/t)+1-.7;if(a===1)return;const s=q(this,dn,JL).call(this,this.rotation),o=(T,M)=>[s[0]*T+s[2]*M,s[1]*T+s[3]*M],[l,u]=this.parentDimensions,c=this.x,h=this.y,d=this.width,f=this.height,p=In.MIN_SIZE/l,m=In.MIN_SIZE/u;a=Math.max(Math.min(a,1/d,1/f),p/d,m/f);const g=In._round(d*a),v=In._round(f*a);if(g===d&&v===f)return;_(this,al)||U(this,al,[c,h,d,f]);const b=o(d/2,f/2),S=In._round(c+b[0]),w=In._round(h+b[1]),E=o(g/2,v/2);this.x=S-E[0],this.y=w-E[1],this.width=g,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},$xe=function(){var e;(e=_(this,hi))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),q(this,dn,eR).call(this)},BH=function(e){const{isMac:t}=Ea.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Yxe=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},o=u=>{i.abort(),U(this,Em,null),U(this,I0,!1),this._uiManager.endDragSession()||q(this,dn,BH).call(this,u),r&&this._onStopDragging()};t&&(U(this,Xb,e.clientX),U(this,$b,e.clientY),U(this,Em,e.pointerId),U(this,LC,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:c,clientY:h,pointerId:d}=u;if(d!==_(this,Em)){Ri(u);return}const[f,p]=this.screenToPageTranslation(c-_(this,Xb),h-_(this,$b));U(this,Xb,c),U(this,$b,h),this._uiManager.dragSelectedEditors(f,p)},s),window.addEventListener("touchmove",Ri,s),window.addEventListener("pointerdown",u=>{u.pointerType===_(this,LC)&&(_(this,L0)||u.isPrimary)&&o(u),Ri(u)},s));const l=u=>{if(!_(this,Em)||_(this,Em)===u.pointerId){o(u);return}Ri(u)};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})},FH=function(){if(_(this,Am)||!this.div)return;U(this,Am,new AbortController);const e=this._uiManager.combinedSignal(_(this,Am));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},qxe=function(e){In._resizerKeyboardManager.exec(this,e)},Kxe=function(e){var t;_(this,Qd)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==_(this,ns)&&q(this,dn,fE).call(this)},Zxe=function(e){U(this,RC,_(this,Qd)?e:"")},UH=function(e){if(_(this,uc))for(const t of _(this,uc))t.tabIndex=e},fE=function(){U(this,Qd,!1),q(this,dn,UH).call(this,-1),q(this,dn,eR).call(this)},$(In,OC),Fe(In,"_l10n",null),Fe(In,"_l10nResizer",null),Fe(In,"_borderLineWidth",-1),Fe(In,"_colorManager",new CH),Fe(In,"_zIndex",1),Fe(In,"_telemetryTimeout",1e3);let ti=In;class Pft extends ti{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const jse=3285377520,Zl=4294901760,rh=65535;class Qxe{constructor(e){this.h1=e?e&4294967295:jse,this.h2=e?e&4294967295:jse}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let m=0,g=e.length;m<g;m++){const v=e.charCodeAt(m);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,s=new Uint32Array(t.buffer,0,i);let o=0,l=0,u=this.h1,c=this.h2;const h=3432918353,d=461845907,f=h&rh,p=d&rh;for(let m=0;m<i;m++)m&1?(o=s[m],o=o*h&Zl|o*f&rh,o=o<<15|o>>>17,o=o*d&Zl|o*p&rh,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=s[m],l=l*h&Zl|l*f&rh,l=l<<15|l>>>17,l=l*d&Zl|l*p&rh,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,a){case 3:o^=t[i*4+2]<<16;case 2:o^=t[i*4+1]<<8;case 1:o^=t[i*4],o=o*h&Zl|o*f&rh,o=o<<15|o>>>17,o=o*d&Zl|o*p&rh,i&1?u^=o:c^=o}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Zl|e*36045&rh,t=t*4283543511&Zl|((t<<16|e>>>16)*2950163797&Zl)>>>16,e^=t>>>1,e=e*444984403&Zl|e*60499&rh,t=t*3301882366&Zl|((t<<16|e>>>16)*3120437893&Zl)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const zH=Object.freeze({map:null,hash:"",transfer:void 0});var R0,N0,Jd,rs,wk,Jxe;class KW{constructor(){$(this,wk);$(this,R0,!1);$(this,N0,null);$(this,Jd,null);$(this,rs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=_(this,rs).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return _(this,rs).get(e)}remove(e){const t=_(this,rs).get(e);if(t!==void 0&&(t instanceof ti&&_(this,Jd).delete(t.annotationElementId),_(this,rs).delete(e),_(this,rs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of _(this,rs).values())if(r instanceof ti)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=_(this,rs).get(e);let i=!1;if(r!==void 0)for(const[a,s]of Object.entries(t))r[a]!==s&&(i=!0,r[a]=s);else i=!0,_(this,rs).set(e,t);i&&q(this,wk,Jxe).call(this),t instanceof ti&&((_(this,Jd)||U(this,Jd,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return _(this,rs).has(e)}get size(){return _(this,rs).size}resetModified(){_(this,R0)&&(U(this,R0,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new e_e(this)}get serializable(){if(_(this,rs).size===0)return zH;const e=new Map,t=new Qxe,r=[],i=Object.create(null);let a=!1;for(const[s,o]of _(this,rs)){const l=o instanceof ti?o.serialize(!1,i):o;o.page&&(o.pageIndex=o.page._pageIndex,delete o.page),l&&(e.set(s,l),t.update(`${s}:${JSON.stringify(l)}`),a||(a=!!l.bitmap))}if(a)for(const s of e.values())s.bitmap&&r.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:zH}get editorStats(){let e=null;const t=new Map;let r=0,i=0;for(const a of _(this,rs).values()){if(!(a instanceof ti)){a.popup&&(a.popup.deleted?i+=1:r+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(r+=1);const s=a.telemetryFinalData;if(!s)continue;const{type:o}=s;t.has(o)||t.set(o,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[u,c]of Object.entries(s)){if(u==="type")continue;let h=l.get(u);h||(h=new Map,l.set(u,h));const d=h.get(c)??0;h.set(c,d+1)}}if((i>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:r}),!e)return null;for(const[a,s]of t)e[a]=s.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){U(this,N0,null)}updateEditor(e,t){var i;const r=(i=_(this,Jd))==null?void 0:i.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=_(this,Jd))==null?void 0:t.get(e))||null}get modifiedIds(){if(_(this,N0))return _(this,N0);const e=[];if(_(this,Jd))for(const t of _(this,Jd).values())t.serialize()&&e.push(t.annotationElementId);return U(this,N0,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return _(this,rs).entries()}}R0=new WeakMap,N0=new WeakMap,Jd=new WeakMap,rs=new WeakMap,wk=new WeakSet,Jxe=function(){_(this,R0)||(U(this,R0,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var BC;class e_e extends KW{constructor(t){super();$(this,BC);const{map:r,hash:i,transfer:a}=t.serializable,s=structuredClone(r,a?{transfer:a}:null);U(this,BC,{map:s,hash:i,transfer:a})}get print(){_r("Should not call PrintAnnotationStorage.print")}get serializable(){return _(this,BC)}get modifiedIds(){return En(this,"modifiedIds",{ids:new Set,hash:""})}}BC=new WeakMap;var Yb;class Lft{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){$(this,Yb,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),_(this,Yb).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||_(this,Yb).has(e.loadedName))){if(xr(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,o=new FontFace(i,a,s);this.addNativeFontFace(o);try{await o.load(),_(this,Yb).add(i),r==null||r(e)}catch{wn(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}_r("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw wn(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return En(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return En(this,"isSyncFontLoadingSupported",ao||Ea.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(xr(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return En(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(w,E){return w.charCodeAt(E)<<24|w.charCodeAt(E+1)<<16|w.charCodeAt(E+2)<<8|w.charCodeAt(E+3)&255}function i(w,E,T,M){const P=w.substring(0,E),I=w.substring(E+T);return P+M+I}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(w,E){if(++u>30){wn("Load test font never loaded."),E();return}if(l.font="30px "+w,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(c.bind(null,w,E))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=i(d,976,h.length,h);const p=16,m=1482184792;let g=r(d,p);for(a=0,s=h.length-3;a<s;a+=4)g=g-m+r(h,a)|0;a<h.length&&(g=g-m+r(h+"XXX",a)|0),d=i(d,p,4,fft(g));const v=`url(data:font/opentype;base64,${btoa(d)});`,b=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(b);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const w of[e.loadedName,h]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=w,S.append(E)}this._document.body.append(S),c(h,()=>{S.remove(),t.complete()})}}Yb=new WeakMap;var Or;class Rft{constructor(e,t=null,r,i){$(this,Or);this.compiledGlyphs=Object.create(null),U(this,Or,e),this._inspectFont=t,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(s){wn(`getPathGenerator - ignoring character: "${s}".`)}const a=yxe(i==null?void 0:i.path);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=a}get black(){return _(this,Or).black}get bold(){return _(this,Or).bold}get disableFontFace(){return _(this,Or).disableFontFace??!1}set disableFontFace(e){En(this,"disableFontFace",!!e)}get fontExtraProperties(){return _(this,Or).fontExtraProperties??!1}get isInvalidPDFjsFont(){return _(this,Or).isInvalidPDFjsFont}get isType3Font(){return _(this,Or).isType3Font}get italic(){return _(this,Or).italic}get missingFile(){return _(this,Or).missingFile}get remeasure(){return _(this,Or).remeasure}get vertical(){return _(this,Or).vertical}get ascent(){return _(this,Or).ascent}get defaultWidth(){return _(this,Or).defaultWidth}get descent(){return _(this,Or).descent}get bbox(){return _(this,Or).bbox}set bbox(e){En(this,"bbox",e)}get fontMatrix(){return _(this,Or).fontMatrix}get fallbackName(){return _(this,Or).fallbackName}get loadedName(){return _(this,Or).loadedName}get mimetype(){return _(this,Or).mimetype}get name(){return _(this,Or).name}get data(){return _(this,Or).data}clearData(){_(this,Or).clearData()}get cssFontInfo(){return _(this,Or).cssFontInfo}get systemFontInfo(){return _(this,Or).systemFontInfo}get defaultVMetrics(){return _(this,Or).defaultVMetrics}}Or=new WeakMap;var qb,Kb,FC,Zb,tR;const fb=class fb{constructor(e){$(this,Zb);$(this,qb);$(this,Kb);$(this,FC);U(this,qb,e),U(this,Kb,new DataView(_(this,qb))),U(this,FC,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let i=0;for(const u of fb.strings){const c=t.encode(e[u]);r[u]=c,i+=4+c.length}const a=new ArrayBuffer(i),s=new Uint8Array(a),o=new DataView(a);let l=0;for(const u of fb.strings){const c=r[u],h=c.length;o.setUint32(l,h),s.set(c,l+4),l+=4+h}return xr(l===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return q(this,Zb,tR).call(this,0)}get fontWeight(){return q(this,Zb,tR).call(this,1)}get italicAngle(){return q(this,Zb,tR).call(this,2)}};qb=new WeakMap,Kb=new WeakMap,FC=new WeakMap,Zb=new WeakSet,tR=function(e){xr(e<fb.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=_(this,Kb).getUint32(t)+4;const r=_(this,Kb).getUint32(t);return _(this,FC).decode(new Uint8Array(_(this,qb),t+4,r))},Fe(fb,"strings",["fontFamily","fontWeight","italicAngle"]);let lk=fb;var Cm,xh,k0,O0,pE;const pb=class pb{constructor(e){$(this,O0);$(this,Cm);$(this,xh);$(this,k0);U(this,Cm,e),U(this,xh,new DataView(_(this,Cm))),U(this,k0,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let i=0;for(const d of pb.strings){const f=t.encode(e[d]);r[d]=f,i+=4+f.length}i+=4;let a,s,o=1+i;e.style&&(a=t.encode(e.style.style),s=t.encode(e.style.weight),o+=4+a.length+4+s.length);const l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;c.setUint8(h++,e.guessFallback?1:0),c.setUint32(h,0),h+=4,i=0;for(const d of pb.strings){const f=r[d],p=f.length;i+=4+p,c.setUint32(h,p),u.set(f,h+4),h+=4+p}return c.setUint32(h-i-4,i),e.style&&(c.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length,c.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length),xr(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}get guessFallback(){return _(this,xh).getUint8(0)!==0}get css(){return q(this,O0,pE).call(this,0)}get loadedName(){return q(this,O0,pE).call(this,1)}get baseFontName(){return q(this,O0,pE).call(this,2)}get src(){return q(this,O0,pE).call(this,3)}get style(){let e=1;e+=4+_(this,xh).getUint32(e);const t=_(this,xh).getUint32(e),r=_(this,k0).decode(new Uint8Array(_(this,Cm),e+4,t));e+=4+t;const i=_(this,xh).getUint32(e),a=_(this,k0).decode(new Uint8Array(_(this,Cm),e+4,i));return{style:r,weight:a}}};Cm=new WeakMap,xh=new WeakMap,k0=new WeakMap,O0=new WeakSet,pE=function(e){xr(e<pb.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=_(this,xh).getUint32(t)+4;const r=_(this,xh).getUint32(t);return _(this,k0).decode(new Uint8Array(_(this,Cm),t+4,r))},Fe(pb,"strings",["css","loadedName","baseFontName","src"]);let uk=pb;var Qb,Jb,e1,t1,sl,_h,UC,Br,Pi,ec,nR,mE;const Rn=class Rn{constructor({data:e,extra:t}){$(this,Pi);$(this,_h);$(this,UC);$(this,Br);U(this,_h,e),U(this,UC,new TextDecoder),U(this,Br,new DataView(_(this,_h))),t&&Object.assign(this,t)}get black(){return q(this,Pi,ec).call(this,0)}get bold(){return q(this,Pi,ec).call(this,1)}get disableFontFace(){return q(this,Pi,ec).call(this,2)}get fontExtraProperties(){return q(this,Pi,ec).call(this,3)}get isInvalidPDFjsFont(){return q(this,Pi,ec).call(this,4)}get isType3Font(){return q(this,Pi,ec).call(this,5)}get italic(){return q(this,Pi,ec).call(this,6)}get missingFile(){return q(this,Pi,ec).call(this,7)}get remeasure(){return q(this,Pi,ec).call(this,8)}get vertical(){return q(this,Pi,ec).call(this,9)}get ascent(){return q(this,Pi,nR).call(this,0)}get defaultWidth(){return q(this,Pi,nR).call(this,1)}get descent(){return q(this,Pi,nR).call(this,2)}get bbox(){let e=_(Rn,Jb);if(_(this,Br).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(_(this,Br).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=_(Rn,e1);if(_(this,Br).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(_(this,Br).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=_(Rn,t1);if(_(this,Br).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(_(this,Br).getInt16(e,!0)),e+=2;return r}get fallbackName(){return q(this,Pi,mE).call(this,0)}get loadedName(){return q(this,Pi,mE).call(this,1)}get mimetype(){return q(this,Pi,mE).call(this,2)}get name(){return q(this,Pi,mE).call(this,3)}get data(){let e=_(Rn,sl);const t=_(this,Br).getUint32(e);e+=4+t;const r=_(this,Br).getUint32(e);e+=4+r;const i=_(this,Br).getUint32(e);e+=4+i;const a=_(this,Br).getUint32(e);if(a!==0)return new Uint8Array(_(this,_h),e+4,a)}clearData(){let e=_(Rn,sl);const t=_(this,Br).getUint32(e);e+=4+t;const r=_(this,Br).getUint32(e);e+=4+r;const i=_(this,Br).getUint32(e);e+=4+i;const a=_(this,Br).getUint32(e);new Uint8Array(_(this,_h),e+4,a).fill(0),_(this,Br).setUint32(e,0)}get cssFontInfo(){let e=_(Rn,sl);const t=_(this,Br).getUint32(e);e+=4+t;const r=_(this,Br).getUint32(e);e+=4+r;const i=_(this,Br).getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(_(this,_h),e+4,i)),new lk(a.buffer)}get systemFontInfo(){let e=_(Rn,sl);const t=_(this,Br).getUint32(e);e+=4+t;const r=_(this,Br).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(_(this,_h),e+4,r)),new uk(i.buffer)}static write(e){const t=e.systemFontInfo?uk.write(e.systemFontInfo):null,r=e.cssFontInfo?lk.write(e.cssFontInfo):null,i=new TextEncoder,a={};let s=0;for(const m of Rn.strings)a[m]=i.encode(e[m]),s+=4+a[m].length;const o=_(Rn,sl)+4+s+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),u=new Uint8Array(l),c=new DataView(l);let h=0;const d=Rn.bools.length;let f=0,p=0;for(let m=0;m<d;m++){const g=e[Rn.bools[m]];f|=(g===void 0?0:g?2:1)<<p,p+=2,(p===8||m===d-1)&&(c.setUint8(h++,f),f=0,p=0)}xr(h===_(Rn,Qb),"FontInfo.write: Boolean properties offset mismatch");for(const m of Rn.numbers)c.setFloat64(h,e[m]),h+=8;if(xr(h===_(Rn,Jb),"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(h++,4);for(const m of e.bbox)c.setInt16(h,m,!0),h+=2}else c.setUint8(h++,0),h+=8;if(xr(h===_(Rn,e1),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(h++,6);for(const m of e.fontMatrix)c.setFloat64(h,m,!0),h+=8}else c.setUint8(h++,0),h+=48;if(xr(h===_(Rn,t1),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(h++,1);for(const m of e.defaultVMetrics)c.setInt16(h,m,!0),h+=2}else c.setUint8(h++,0),h+=6;xr(h===_(Rn,sl),"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(_(Rn,sl),0),h+=4;for(const m of Rn.strings){const g=a[m],v=g.length;c.setUint32(h,v),u.set(g,h+4),h+=4+v}if(c.setUint32(_(Rn,sl),h-_(Rn,sl)-4),!t)c.setUint32(h,0),h+=4;else{const m=t.byteLength;c.setUint32(h,m),xr(h+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+m}if(!r)c.setUint32(h,0),h+=4;else{const m=r.byteLength;c.setUint32(h,m),xr(h+4+m<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+m}return e.data===void 0?(c.setUint32(h,0),h+=4):(c.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),xr(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}};Qb=new WeakMap,Jb=new WeakMap,e1=new WeakMap,t1=new WeakMap,sl=new WeakMap,_h=new WeakMap,UC=new WeakMap,Br=new WeakMap,Pi=new WeakSet,ec=function(e){xr(e<Rn.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,i=_(this,Br).getUint8(t)>>r&3;return i===0?void 0:i===2},nR=function(e){return xr(e<Rn.numbers.length,"Invalid number index"),_(this,Br).getFloat64(_(Rn,Qb)+e*8)},mE=function(e){xr(e<Rn.strings.length,"Invalid string index");let t=_(Rn,sl)+4;for(let a=0;a<e;a++)t+=_(this,Br).getUint32(t)+4;const r=_(this,Br).getUint32(t),i=new Uint8Array(r);return i.set(new Uint8Array(_(this,_h),t+4,r)),_(this,UC).decode(i)},Fe(Rn,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Fe(Rn,"numbers",["ascent","defaultWidth","descent"]),Fe(Rn,"strings",["fallbackName","loadedName","mimetype","name"]),$(Rn,Qb,Math.ceil(Rn.bools.length*2/8)),$(Rn,Jb,_(Rn,Qb)+Rn.numbers.length*8),$(Rn,e1,_(Rn,Jb)+1+8),$(Rn,t1,_(Rn,e1)+1+48),$(Rn,sl,_(Rn,t1)+1+6);let VH=Rn;var zC,VC,HC,GC,jC,WC,XC,$C;const Qr=class Qr{constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,r=null,i=[],a=[],s=[],o=[],l=null,u=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,r=e[2],s=e[3],t===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,l=e[1],i=e[2],a=e[3],o=e[4]||[],r=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const c=Math.floor(i.length/2),h=Math.floor(a.length/3),d=s.length,f=o.length;let p=0;for(const E of o)p+=1,p=Math.ceil(p/4)*4,p+=4+E.coords.length*4,p+=4+E.colors.length*4,E.verticesPerRow!==void 0&&(p+=4);const m=20+c*8+h*3+d*8+(r?16:0)+(u?3:0)+p,g=new ArrayBuffer(m),v=new DataView(g),b=new Uint8Array(g);v.setUint8(_(Qr,zC),t),v.setUint8(_(Qr,VC),r?1:0),v.setUint8(_(Qr,HC),u?1:0),v.setUint8(_(Qr,GC),l),v.setUint32(_(Qr,jC),c,!0),v.setUint32(_(Qr,WC),h,!0),v.setUint32(_(Qr,XC),d,!0),v.setUint32(_(Qr,$C),f,!0);let S=20;new Float32Array(g,S,c*2).set(i),S+=c*8,b.set(a,S),S+=h*3;for(const[E,T]of s)v.setFloat32(S,E,!0),S+=4,v.setUint32(S,parseInt(T.slice(1),16),!0),S+=4;if(r)for(const E of r)v.setFloat32(S,E,!0),S+=4;u&&(b.set(u,S),S+=3);for(let E=0;E<o.length;E++){const T=o[E];v.setUint8(S,T.type),S+=1,S=Math.ceil(S/4)*4,v.setUint32(S,T.coords.length,!0),S+=4,new Int32Array(g,S,T.coords.length).set(T.coords),S+=T.coords.length*4,v.setUint32(S,T.colors.length,!0),S+=4,new Int32Array(g,S,T.colors.length).set(T.colors),S+=T.colors.length*4,T.verticesPerRow!==void 0&&(v.setUint32(S,T.verticesPerRow,!0),S+=4)}return g}getIR(){const e=this.view,t=this.data[_(Qr,zC)],r=!!this.data[_(Qr,VC)],i=!!this.data[_(Qr,HC)],a=e.getUint32(_(Qr,jC),!0),s=e.getUint32(_(Qr,WC),!0),o=e.getUint32(_(Qr,XC),!0),l=e.getUint32(_(Qr,$C),!0);let u=20;const c=new Float32Array(this.buffer,u,a*2);u+=a*8;const h=new Uint8Array(this.buffer,u,s*3);u+=s*3;const d=[];for(let g=0;g<o;++g){const v=e.getFloat32(u,!0);u+=4;const b=e.getUint32(u,!0);u+=4,d.push([v,`#${b.toString(16).padStart(6,"0")}`])}let f=null;if(r){f=[];for(let g=0;g<4;++g)f.push(e.getFloat32(u,!0)),u+=4}let p=null;i&&(p=new Uint8Array(this.buffer,u,3),u+=3);const m=[];for(let g=0;g<l;++g){const v=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const b=e.getUint32(u,!0);u+=4;const S=new Int32Array(this.buffer,u,b);u+=b*4;const w=e.getUint32(u,!0);u+=4;const E=new Int32Array(this.buffer,u,w);u+=w*4;const T={type:v,coords:S,colors:E};v===xH.LATTICE&&(T.verticesPerRow=e.getUint32(u,!0),u+=4),m.push(T)}if(t===1)return["RadialAxial","axial",f,d,Array.from(c.slice(0,2)),Array.from(c.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",f,d,[c[0],c[1]],[c[3],c[4]],c[2],c[5]];if(t===3){const g=this.data[_(Qr,GC)];let v=null;if(c.length>0){let b=c[0],S=c[0],w=c[1],E=c[1];for(let T=0;T<c.length;T+=2){const M=c[T],P=c[T+1];b=b>M?M:b,w=w>P?P:w,S=S<M?M:S,E=E<P?P:E}v=[b,w,S,E]}return["Mesh",g,c,h,m,v,f,p]}throw new Error(`Unsupported pattern kind: ${t}`)}};zC=new WeakMap,VC=new WeakMap,HC=new WeakMap,GC=new WeakMap,jC=new WeakMap,WC=new WeakMap,XC=new WeakMap,$C=new WeakMap,$(Qr,zC,0),$(Qr,VC,1),$(Qr,HC,2),$(Qr,GC,3),$(Qr,jC,4),$(Qr,WC,8),$(Qr,XC,12),$(Qr,$C,16);let HH=Qr;var n1;class Nft{constructor(e){$(this,n1);U(this,n1,e)}static write(e){let t,r;return Ea.isFloat16ArraySupported?(r=new ArrayBuffer(e.length*2),t=new Float16Array(r)):(r=new ArrayBuffer(e.length*4),t=new Float32Array(r)),t.set(e),r}get path(){return Ea.isFloat16ArraySupported?new Float16Array(_(this,n1)):new Float32Array(_(this,n1))}}n1=new WeakMap;function kft(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(ao)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Oft(n){if(ao&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return iO(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function eL(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const GH=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,Bft=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",Fft=yft.bind(null,GH,Bft);var ef,Tk;class Uft{constructor(){$(this,ef,new Map);$(this,Tk,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};_(this,Tk).then(()=>{for(const[i]of _(this,ef))i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:a}=r;if(a.aborted){wn("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,t);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}_(this,ef).set(t,i)}removeEventListener(e,t){const r=_(this,ef).get(t);r==null||r(),_(this,ef).delete(t)}terminate(){for(const[,e]of _(this,ef))e==null||e();_(this,ef).clear()}}ef=new WeakMap,Tk=new WeakMap;const tL={DATA:1,ERROR:2},na={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Wse(){}function Mo(n){if(n instanceof Dg||n instanceof _H||n instanceof Bse||n instanceof ik||n instanceof rU)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||_r('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Dg(n.message);case"InvalidPDFException":return new _H(n.message);case"PasswordException":return new Bse(n.message,n.code);case"ResponseException":return new ik(n.message,n.status,n.missing);case"UnknownErrorException":return new rU(n.message,n.details)}return new rU(n.message,n.toString())}var r1,Ru,t_e,n_e,r_e,rR;class gE{constructor(e,t,r){$(this,Ru);$(this,r1,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",q(this,Ru,t_e).bind(this),{signal:_(this,r1).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,t,r,i){const a=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:e,streamId:a,data:t,desiredSize:u.desiredSize},i),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[a].pullCall=c,l.postMessage({sourceName:s,targetName:o,stream:na.PULL,streamId:a,desiredSize:u.desiredSize}),c.promise},cancel:u=>{xr(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[a].cancelCall=c,this.streamControllers[a].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:na.CANCEL,streamId:a,reason:Mo(u)}),c.promise}},r)}destroy(){var e;(e=_(this,r1))==null||e.abort(),U(this,r1,null)}}r1=new WeakMap,Ru=new WeakSet,t_e=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){q(this,Ru,r_e).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===tL.DATA)i.resolve(e.data);else if(e.callback===tL.ERROR)i.reject(Mo(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(s){a.postMessage({sourceName:r,targetName:i,callback:tL.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:r,targetName:i,callback:tL.ERROR,callbackId:e.callbackId,reason:Mo(s)})});return}if(e.streamId){q(this,Ru,n_e).call(this,e);return}t(e.data)},n_e=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],l={enqueue(u,c=1,h){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:na.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:na.CLOSE,streamId:t}),delete s.streamSinks[t])},error(u){xr(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:na.ERROR,streamId:t,reason:Mo(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){a.postMessage({sourceName:r,targetName:i,stream:na.START_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:na.START_COMPLETE,streamId:t,reason:Mo(u)})})},r_e=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case na.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(Mo(e.reason));break;case na.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(Mo(e.reason));break;case na.PULL:if(!o){a.postMessage({sourceName:r,targetName:i,stream:na.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||Wse).then(function(){a.postMessage({sourceName:r,targetName:i,stream:na.PULL_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:na.PULL_COMPLETE,streamId:t,reason:Mo(u)})});break;case na.ENQUEUE:if(xr(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case na.CLOSE:if(xr(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),q(this,Ru,rR).call(this,s,t);break;case na.ERROR:xr(s,"error should have stream controller"),s.controller.error(Mo(e.reason)),q(this,Ru,rR).call(this,s,t);break;case na.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(Mo(e.reason)),q(this,Ru,rR).call(this,s,t);break;case na.CANCEL:if(!o)break;const l=Mo(e.reason);Promise.try(o.onCancel||Wse,l).then(function(){a.postMessage({sourceName:r,targetName:i,stream:na.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:na.CANCEL_COMPLETE,streamId:t,reason:Mo(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},rR=async function(e,t){var r,i,a;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var YC;class i_e{constructor({enableHWA:e=!1}){$(this,YC,!1);U(this,YC,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!_(this,YC)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){_r("Abstract method `_createCanvas` called.")}}YC=new WeakMap;class zft extends i_e{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class a_e{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){_r("Abstract method `_fetch` called.")}}class Xse extends a_e{async _fetch(e){const t=await U2(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):iO(t)}}class s_e{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,a){return"none"}destroy(e=!1){}}var B0,i1,tf,nf,Ds,F0,U0,Ot,Es,vE,G_,iR,j_,o_e,jH,W_,yE,xE,WH,_E;class Vft extends s_e{constructor({docId:t,ownerDocument:r=globalThis.document}){super();$(this,Ot);$(this,B0);$(this,i1);$(this,tf);$(this,nf);$(this,Ds);$(this,F0);$(this,U0,0);U(this,nf,t),U(this,Ds,r)}addFilter(t){if(!t)return"none";let r=_(this,Ot,Es).get(t);if(r)return r;const[i,a,s]=q(this,Ot,iR).call(this,t),o=t.length===1?i:`${i}${a}${s}`;if(r=_(this,Ot,Es).get(o),r)return _(this,Ot,Es).set(t,r),r;const l=`g_${_(this,nf)}_transfer_map_${ma(this,U0)._++}`,u=q(this,Ot,j_).call(this,l);_(this,Ot,Es).set(t,u),_(this,Ot,Es).set(o,u);const c=q(this,Ot,W_).call(this,l);return q(this,Ot,xE).call(this,i,a,s,c),u}addHCMFilter(t,r){var p;const i=`${t}-${r}`,a="base";let s=_(this,Ot,vE).get(a);if((s==null?void 0:s.key)===i||(s?((p=s.filter)==null||p.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},_(this,Ot,vE).set(a,s)),!t||!r))return s.url;const o=q(this,Ot,_E).call(this,t);t=It.makeHexColor(...o);const l=q(this,Ot,_E).call(this,r);if(r=It.makeHexColor(...l),_(this,Ot,G_).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return s.url;const u=new Array(256);for(let m=0;m<=255;m++){const g=m/255;u[m]=g<=.03928?g/12.92:((g+.055)/1.055)**2.4}const c=u.join(","),h=`g_${_(this,nf)}_hcm_filter`,d=s.filter=q(this,Ot,W_).call(this,h);q(this,Ot,xE).call(this,c,c,c,d),q(this,Ot,jH).call(this,d);const f=(m,g)=>{const v=o[m]/255,b=l[m]/255,S=new Array(g+1);for(let w=0;w<=g;w++)S[w]=v+w/g*(b-v);return S.join(",")};return q(this,Ot,xE).call(this,f(0,5),f(1,5),f(2,5),d),s.url=q(this,Ot,j_).call(this,h),s.url}addAlphaFilter(t){let r=_(this,Ot,Es).get(t);if(r)return r;const[i]=q(this,Ot,iR).call(this,[t]),a=`alpha_${i}`;if(r=_(this,Ot,Es).get(a),r)return _(this,Ot,Es).set(t,r),r;const s=`g_${_(this,nf)}_alpha_map_${ma(this,U0)._++}`,o=q(this,Ot,j_).call(this,s);_(this,Ot,Es).set(t,o),_(this,Ot,Es).set(a,o);const l=q(this,Ot,W_).call(this,s);return q(this,Ot,WH).call(this,i,l),o}addLuminosityFilter(t){let r=_(this,Ot,Es).get(t||"luminosity");if(r)return r;let i,a;if(t?([i]=q(this,Ot,iR).call(this,[t]),a=`luminosity_${i}`):a="luminosity",r=_(this,Ot,Es).get(a),r)return _(this,Ot,Es).set(t,r),r;const s=`g_${_(this,nf)}_luminosity_map_${ma(this,U0)._++}`,o=q(this,Ot,j_).call(this,s);_(this,Ot,Es).set(t,o),_(this,Ot,Es).set(a,o);const l=q(this,Ot,W_).call(this,s);return q(this,Ot,o_e).call(this,l),t&&q(this,Ot,WH).call(this,i,l),o}addHighlightHCMFilter(t,r,i,a,s){var b;const o=`${r}-${i}-${a}-${s}`;let l=_(this,Ot,vE).get(t);if((l==null?void 0:l.key)===o||(l?((b=l.filter)==null||b.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},_(this,Ot,vE).set(t,l)),!r||!i))return l.url;const[u,c]=[r,i].map(q(this,Ot,_E).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[f,p]=[a,s].map(q(this,Ot,_E).bind(this));d<h&&([h,d,f,p]=[d,h,p,f]),_(this,Ot,G_).style.color="";const m=(S,w,E)=>{const T=new Array(256),M=(d-h)/E,P=S/255,I=(w-S)/(255*E);let D=0;for(let R=0;R<=E;R++){const B=Math.round(h+R*M),k=P+R*I;for(let V=D;V<=B;V++)T[V]=k;D=B+1}for(let R=D;R<256;R++)T[R]=T[D-1];return T.join(",")},g=`g_${_(this,nf)}_hcm_${t}_filter`,v=l.filter=q(this,Ot,W_).call(this,g);return q(this,Ot,jH).call(this,v),q(this,Ot,xE).call(this,m(f[0],p[0],5),m(f[1],p[1],5),m(f[2],p[2],5),v),l.url=q(this,Ot,j_).call(this,g),l.url}destroy(t=!1){var r,i,a,s;t&&((r=_(this,F0))!=null&&r.size)||((i=_(this,tf))==null||i.parentNode.parentNode.remove(),U(this,tf,null),(a=_(this,i1))==null||a.clear(),U(this,i1,null),(s=_(this,F0))==null||s.clear(),U(this,F0,null),U(this,U0,0))}}B0=new WeakMap,i1=new WeakMap,tf=new WeakMap,nf=new WeakMap,Ds=new WeakMap,F0=new WeakMap,U0=new WeakMap,Ot=new WeakSet,Es=function(){return _(this,i1)||U(this,i1,new Map)},vE=function(){return _(this,F0)||U(this,F0,new Map)},G_=function(){if(!_(this,tf)){const t=_(this,Ds).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=_(this,Ds).createElementNS(kd,"svg");i.setAttribute("width",0),i.setAttribute("height",0),U(this,tf,_(this,Ds).createElementNS(kd,"defs")),t.append(i),i.append(_(this,tf)),_(this,Ds).body.append(t)}return _(this,tf)},iR=function(t){if(t.length===1){const u=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=u[d]/255;const h=c.join(",");return[h,h,h]}const[r,i,a]=t,s=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)s[u]=r[u]/255,o[u]=i[u]/255,l[u]=a[u]/255;return[s.join(","),o.join(","),l.join(",")]},j_=function(t){if(_(this,B0)===void 0){U(this,B0,"");const r=_(this,Ds).URL;r!==_(this,Ds).baseURI&&(aO(r)?wn('#createUrl: ignore "data:"-URL for performance reasons.'):U(this,B0,pxe(r,"")))}return`url(${_(this,B0)}#${t})`},o_e=function(t){const r=_(this,Ds).createElementNS(kd,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},jH=function(t){const r=_(this,Ds).createElementNS(kd,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},W_=function(t){const r=_(this,Ds).createElementNS(kd,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),_(this,Ot,G_).append(r),r},yE=function(t,r,i){const a=_(this,Ds).createElementNS(kd,r);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)},xE=function(t,r,i,a){const s=_(this,Ds).createElementNS(kd,"feComponentTransfer");a.append(s),q(this,Ot,yE).call(this,s,"feFuncR",t),q(this,Ot,yE).call(this,s,"feFuncG",r),q(this,Ot,yE).call(this,s,"feFuncB",i)},WH=function(t,r){const i=_(this,Ds).createElementNS(kd,"feComponentTransfer");r.append(i),q(this,Ot,yE).call(this,i,"feFuncA",t)},_E=function(t){return _(this,Ot,G_).style.color=t,V2(getComputedStyle(_(this,Ot,G_)).getPropertyValue("color"))};class l_e{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){_r("Abstract method `_fetch` called.")}}class $se extends l_e{async _fetch(e){const t=await U2(e,"arraybuffer");return new Uint8Array(t)}}class u_e{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){_r("Abstract method `_fetch` called.")}}class Yse extends u_e{async _fetch(e){const t=await U2(e,"arraybuffer");return new Uint8Array(t)}}ao&&wn("Please use the `legacy` build in Node.js environments.");async function ZW(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class Hft extends s_e{}class Gft extends i_e{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class jft extends a_e{async _fetch(e){return ZW(e)}}class Wft extends l_e{async _fetch(e){return ZW(e)}}class Xft extends u_e{async _fetch(e){return ZW(e)}}const R_="__forcedDependency",{floor:qse,ceil:Kse}=Math;function nL(n,e,t,r,i,a){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],a)}const XH=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var a1,Mm;class $ft{constructor(e,t){$(this,a1);$(this,Mm);U(this,a1,e),U(this,Mm,t)}get length(){return _(this,a1).length}isEmpty(e){return _(this,a1)[e]===XH}minX(e){return _(this,Mm)[e*4+0]/256}minY(e){return _(this,Mm)[e*4+1]/256}maxX(e){return(_(this,Mm)[e*4+2]+1)/256}maxY(e){return(_(this,Mm)[e*4+3]+1)/256}}a1=new WeakMap,Mm=new WeakMap;const rL=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Po,Lo,z0,cc,V0,rf,Ir,Fr,af,Ro,qC,s1,H0,G0,sf,Is,bh,KC,$H;class Yft{constructor(e,t,r=!1){$(this,KC);$(this,Po,{__proto__:null});$(this,Lo,{__proto__:null,transform:[],moveText:[],sameLineText:[],[R_]:[]});$(this,z0,new Map);$(this,cc,[]);$(this,V0,[]);$(this,rf,[[1,0,0,1,0,0]]);$(this,Ir,[-1/0,-1/0,1/0,1/0]);$(this,Fr,new Float64Array([1/0,1/0,-1/0,-1/0]));$(this,af,-1);$(this,Ro,new Set);$(this,qC,new Map);$(this,s1,new Map);$(this,H0);$(this,G0);$(this,sf);$(this,Is);$(this,bh);U(this,H0,e.width),U(this,G0,e.height),q(this,KC,$H).call(this,t),r&&U(this,bh,new Map)}growOperationsCount(e){e>=_(this,Is).length&&q(this,KC,$H).call(this,e,_(this,Is))}save(e){return U(this,Po,{__proto__:_(this,Po)}),U(this,Lo,{__proto__:_(this,Lo),transform:{__proto__:_(this,Lo).transform},moveText:{__proto__:_(this,Lo).moveText},sameLineText:{__proto__:_(this,Lo).sameLineText},[R_]:{__proto__:_(this,Lo)[R_]}}),U(this,Ir,{__proto__:_(this,Ir)}),_(this,cc).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(_(this,Po));if(t===null)return this;U(this,Po,t),U(this,Lo,Object.getPrototypeOf(_(this,Lo))),U(this,Ir,Object.getPrototypeOf(_(this,Ir)));const r=_(this,cc).pop();return r!==void 0&&((i=rL(_(this,bh),e))==null||i.dependencies.add(r),_(this,Is)[e]=_(this,Is)[r]),this}recordOpenMarker(e){return _(this,cc).push(e),this}getOpenMarker(){return _(this,cc).length===0?null:_(this,cc).at(-1)}recordCloseMarker(e){var r;const t=_(this,cc).pop();return t!==void 0&&((r=rL(_(this,bh),e))==null||r.dependencies.add(t),_(this,Is)[e]=_(this,Is)[t]),this}beginMarkedContent(e){return _(this,V0).push(e),this}endMarkedContent(e){var r;const t=_(this,V0).pop();return t!==void 0&&((r=rL(_(this,bh),e))==null||r.dependencies.add(t),_(this,Is)[e]=_(this,Is)[t]),this}pushBaseTransform(e){return _(this,rf).push(It.multiplyByDOMMatrix(_(this,rf).at(-1),e.getTransform())),this}popBaseTransform(){return _(this,rf).length>1&&_(this,rf).pop(),this}recordSimpleData(e,t){return _(this,Po)[e]=t,this}recordIncrementalData(e,t){return _(this,Lo)[e].push(t),this}resetIncrementalData(e,t){return _(this,Lo)[e].length=0,this}recordNamedData(e,t){return _(this,z0).set(e,t),this}recordSimpleDataFromNamed(e,t,r){_(this,Po)[e]=_(this,z0).get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(R_,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in _(this,Po)&&this.recordFutureForcedDependency(t,_(this,Po)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of _(this,Ro))this.recordFutureForcedDependency(R_,e);return this}resetBBox(e){return _(this,af)!==e&&(U(this,af,e),_(this,Fr)[0]=1/0,_(this,Fr)[1]=1/0,_(this,Fr)[2]=-1/0,_(this,Fr)[3]=-1/0),this}recordClipBox(e,t,r,i,a,s){const o=It.multiplyByDOMMatrix(_(this,rf).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];It.axialAlignedBoundingBox([r,a,i,s],o,l);const u=It.intersect(_(this,Ir),l);return u?(_(this,Ir)[0]=u[0],_(this,Ir)[1]=u[1],_(this,Ir)[2]=u[2],_(this,Ir)[3]=u[3]):(_(this,Ir)[0]=_(this,Ir)[1]=1/0,_(this,Ir)[2]=_(this,Ir)[3]=-1/0),this}recordBBox(e,t,r,i,a,s){const o=_(this,Ir);if(o[0]===1/0)return this;const l=It.multiplyByDOMMatrix(_(this,rf).at(-1),t.getTransform());if(o[0]===-1/0)return It.axialAlignedBoundingBox([r,a,i,s],l,_(this,Fr)),this;const u=[1/0,1/0,-1/0,-1/0];return It.axialAlignedBoundingBox([r,a,i,s],l,u),_(this,Fr)[0]=Math.min(_(this,Fr)[0],Math.max(u[0],o[0])),_(this,Fr)[1]=Math.min(_(this,Fr)[1],Math.max(u[1],o[1])),_(this,Fr)[2]=Math.max(_(this,Fr)[2],Math.min(u[2],o[2])),_(this,Fr)[3]=Math.max(_(this,Fr)[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,t,r,i=1,a=0,s=0,o){const l=r.bbox;let u,c;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&_(this,s1).get(r),u!==!1&&(c=[0,0,0,0],It.axialAlignedBoundingBox(l,r.fontMatrix,c),(i!==1||a!==0||s!==0)&&It.scaleMinMax([i,0,0,-i,a,s],c),u)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return l&&c&&u===void 0&&(u=c[0]<=a-h.actualBoundingBoxLeft&&c[2]>=a+h.actualBoundingBoxRight&&c[1]<=s-h.actualBoundingBoxAscent&&c[3]>=s+h.actualBoundingBoxDescent,_(this,s1).set(r,u),u)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,a-h.actualBoundingBoxLeft,a+h.actualBoundingBoxRight,s-h.actualBoundingBoxAscent,s+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return _(this,Fr)[0]=Math.max(0,_(this,Ir)[0]),_(this,Fr)[1]=Math.max(0,_(this,Ir)[1]),_(this,Fr)[2]=Math.min(_(this,H0),_(this,Ir)[2]),_(this,Fr)[3]=Math.min(_(this,G0),_(this,Ir)[3]),this}getSimpleIndex(e){return _(this,Po)[e]}recordDependencies(e,t){const r=_(this,Ro),i=_(this,Po),a=_(this,Lo);for(const s of t)s in _(this,Po)?r.add(i[s]):s in a&&a[s].forEach(r.add,r);return this}recordNamedDependency(e,t){return _(this,z0).has(t)&&_(this,Ro).add(_(this,z0).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[R_]),_(this,bh)){const r=rL(_(this,bh),e),{dependencies:i}=r;_(this,Ro).forEach(i.add,i),_(this,cc).forEach(i.add,i),_(this,V0).forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(_(this,af)===e){const r=qse(_(this,Fr)[0]*256/_(this,H0)),i=qse(_(this,Fr)[1]*256/_(this,G0)),a=Kse(_(this,Fr)[2]*256/_(this,H0)),s=Kse(_(this,Fr)[3]*256/_(this,G0));nL(_(this,sf),e,r,i,a,s);for(const o of _(this,Ro))o!==e&&nL(_(this,sf),o,r,i,a,s);for(const o of _(this,cc))o!==e&&nL(_(this,sf),o,r,i,a,s);for(const o of _(this,V0))o!==e&&nL(_(this,sf),o,r,i,a,s);t||(_(this,Ro).clear(),U(this,af,-1))}return this}recordShowTextOperation(e,t=!1){const r=Array.from(_(this,Ro));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return _(this,af)===e&&(U(this,af,-1),_(this,Ir)[0]=Math.max(_(this,Ir)[0],_(this,Fr)[0]),_(this,Ir)[1]=Math.max(_(this,Ir)[1],_(this,Fr)[1]),_(this,Ir)[2]=Math.min(_(this,Ir)[2],_(this,Fr)[2]),_(this,Ir)[3]=Math.min(_(this,Ir)[3],_(this,Fr)[3]),t||_(this,Ro).clear()),this}_takePendingDependencies(){const e=_(this,Ro);return U(this,Ro,new Set),e}_extractOperation(e){const t=_(this,qC).get(e);return _(this,qC).delete(e),t}_pushPendingDependencies(e){for(const t of e)_(this,Ro).add(t)}take(){return _(this,s1).clear(),new $ft(_(this,Is),_(this,sf))}takeDebugMetadata(){return _(this,bh)}}Po=new WeakMap,Lo=new WeakMap,z0=new WeakMap,cc=new WeakMap,V0=new WeakMap,rf=new WeakMap,Ir=new WeakMap,Fr=new WeakMap,af=new WeakMap,Ro=new WeakMap,qC=new WeakMap,s1=new WeakMap,H0=new WeakMap,G0=new WeakMap,sf=new WeakMap,Is=new WeakMap,bh=new WeakMap,KC=new WeakSet,$H=function(e,t){const r=new ArrayBuffer(e*4);U(this,sf,new Uint8ClampedArray(r)),U(this,Is,new Uint32Array(r)),t&&t.length>0?(_(this,Is).set(t),_(this,Is).fill(XH,t.length)):_(this,Is).fill(XH)};var Wr,Ai,hc,o1,l1;const aX=class aX{constructor(e,t,r){$(this,Wr);$(this,Ai);$(this,hc);$(this,o1,0);$(this,l1,0);if(e instanceof aX&&_(e,hc)===!!r)return e;U(this,Wr,e),U(this,Ai,t),U(this,hc,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return ma(this,l1)._++,_(this,Wr).save(_(this,Ai)),this}restore(e){return _(this,l1)>0&&(_(this,Wr).restore(_(this,Ai)),ma(this,l1)._--),this}recordOpenMarker(e){return ma(this,o1)._++,this}getOpenMarker(){return _(this,o1)>0?_(this,Ai):_(this,Wr).getOpenMarker()}recordCloseMarker(e){return ma(this,o1)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return _(this,Wr).pushBaseTransform(e),this}popBaseTransform(){return _(this,Wr).popBaseTransform(),this}recordSimpleData(e,t){return _(this,Wr).recordSimpleData(e,_(this,Ai)),this}recordIncrementalData(e,t){return _(this,Wr).recordIncrementalData(e,_(this,Ai)),this}resetIncrementalData(e,t){return _(this,Wr).resetIncrementalData(e,_(this,Ai)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return _(this,Wr).recordSimpleDataFromNamed(e,t,_(this,Ai)),this}recordFutureForcedDependency(e,t){return _(this,Wr).recordFutureForcedDependency(e,_(this,Ai)),this}inheritSimpleDataAsFutureForcedDependencies(e){return _(this,Wr).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return _(this,Wr).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return _(this,hc)||_(this,Wr).resetBBox(_(this,Ai)),this}recordClipBox(e,t,r,i,a,s){return _(this,hc)||_(this,Wr).recordClipBox(_(this,Ai),t,r,i,a,s),this}recordBBox(e,t,r,i,a,s){return _(this,hc)||_(this,Wr).recordBBox(_(this,Ai),t,r,i,a,s),this}recordCharacterBBox(e,t,r,i,a,s,o){return _(this,hc)||_(this,Wr).recordCharacterBBox(_(this,Ai),t,r,i,a,s,o),this}recordFullPageBBox(e){return _(this,hc)||_(this,Wr).recordFullPageBBox(_(this,Ai)),this}getSimpleIndex(e){return _(this,Wr).getSimpleIndex(e)}recordDependencies(e,t){return _(this,Wr).recordDependencies(_(this,Ai),t),this}recordNamedDependency(e,t){return _(this,Wr).recordNamedDependency(_(this,Ai),t),this}recordOperation(e){return _(this,Wr).recordOperation(_(this,Ai),!0),this}recordShowTextOperation(e){return _(this,Wr).recordShowTextOperation(_(this,Ai),!0),this}bboxToClipBoxDropOperation(e){return _(this,hc)||_(this,Wr).bboxToClipBoxDropOperation(_(this,Ai),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Wr=new WeakMap,Ai=new WeakMap,hc=new WeakMap,o1=new WeakMap,l1=new WeakMap;let ck=aX;const Ql={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},cs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function YH(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class QW{isModifyingCurrentTransform(){return!1}getPattern(){_r("Abstract method `getPattern` called.")}}class qft extends QW{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let r,i=this._p0,a=this._p1;if(t&&(i=i.slice(),a=a.slice(),It.applyTransform(i,t),It.applyTransform(a,t)),this._type==="axial")r=e.createLinearGradient(i[0],i[1],a[0],a[1]);else if(this._type==="radial"){let s=this._r0,o=this._r1;if(t){const l=new Float32Array(2);It.singularValueDecompose2dScale(t,l),s*=l[0],o*=l[0]}r=e.createRadialGradient(i[0],i[1],s,a[0],a[1],o)}for(const s of this._colorStops)r.addColorStop(s[0],s[1]);return r}getPattern(e,t,r,i){let a;if(i===cs.STROKE||i===cs.FILL){if(this.isOriginBased()){let d=It.transform(r,t.baseTransform);this.matrix&&(d=It.transform(d,this.matrix));const f=.001,p=Math.hypot(d[0],d[1]),m=Math.hypot(d[2],d[3]),g=(d[0]*d[2]+d[1]*d[3])/(p*m);if(Math.abs(g)<f)if(this.isRadial()){if(Math.abs(p-m)<f)return this._createGradient(e,d)}else return this._createGradient(e,d)}const s=t.current.getClippedPathBoundingBox(i,_i(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,l=Math.ceil(s[3]-s[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),r=It.transform(r,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),YH(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),a=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(r);a.setTransform(h)}else YH(e,this._bbox),a=this._createGradient(e);return a}}function sU(n,e,t,r,i,a,s,o){const l=e.coords,u=e.colors,c=n.data,h=n.width*4;let d;l[t+1]>l[r+1]&&(d=t,t=r,r=d,d=a,a=s,s=d),l[r+1]>l[i+1]&&(d=r,r=i,i=d,d=s,s=o,o=d),l[t+1]>l[r+1]&&(d=t,t=r,r=d,d=a,a=s,s=d);const f=(l[t]+e.offsetX)*e.scaleX,p=(l[t+1]+e.offsetY)*e.scaleY,m=(l[r]+e.offsetX)*e.scaleX,g=(l[r+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,b=(l[i+1]+e.offsetY)*e.scaleY;if(p>=b)return;const S=u[a],w=u[a+1],E=u[a+2],T=u[s],M=u[s+1],P=u[s+2],I=u[o],D=u[o+1],R=u[o+2],B=Math.round(p),k=Math.round(b);let V,G,F,X,j,Q,H,K;for(let te=B;te<=k;te++){if(te<g){const he=te<p?0:(p-te)/(p-g);V=f-(f-m)*he,G=S-(S-T)*he,F=w-(w-M)*he,X=E-(E-P)*he}else{let he;te>b?he=1:g===b?he=0:he=(g-te)/(g-b),V=m-(m-v)*he,G=T-(T-I)*he,F=M-(M-D)*he,X=P-(P-R)*he}let Y;te<p?Y=0:te>b?Y=1:Y=(p-te)/(p-b),j=f-(f-v)*Y,Q=S-(S-I)*Y,H=w-(w-D)*Y,K=E-(E-R)*Y;const de=Math.round(Math.min(V,j)),ge=Math.round(Math.max(V,j));let se=h*te+de*4;for(let he=de;he<=ge;he++)Y=(V-he)/(V-j),Y<0?Y=0:Y>1&&(Y=1),c[se++]=G-(G-Q)*Y|0,c[se++]=F-(F-H)*Y|0,c[se++]=X-(X-K)*Y|0,c[se++]=255}}function Kft(n,e,t){const r=e.coords,i=e.colors;let a,s;switch(e.type){case xH.LATTICE:const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,u=o-1;for(a=0;a<l;a++){let c=a*o;for(let h=0;h<u;h++,c++)sU(n,t,r[c],r[c+1],r[c+o],i[c],i[c+1],i[c+o]),sU(n,t,r[c+o+1],r[c+1],r[c+o],i[c+o+1],i[c+1],i[c+o])}break;case xH.TRIANGLES:for(a=0,s=r.length;a<s;a+=3)sU(n,t,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class Zft extends QW{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),f=u/h,p=c/d,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/p},g=h+4,v=d+4,b=r.getCanvas("mesh",g,v),S=b.context,w=S.createImageData(h,d);if(t){const T=w.data;for(let M=0,P=T.length;M<P;M+=4)T[M]=t[0],T[M+1]=t[1],T[M+2]=t[2],T[M+3]=255}for(const T of this._figures)Kft(w,T,m);return S.putImageData(w,2,2),{canvas:b.canvas,offsetX:o-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){YH(e,this._bbox);const a=new Float32Array(2);if(i===cs.SHADING)It.singularValueDecompose2dScale(_i(e),a);else if(this.matrix){It.singularValueDecompose2dScale(this.matrix,a);const[o,l]=a;It.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=o,a[1]*=l}else It.singularValueDecompose2dScale(t.baseTransform,a);const s=this._createMeshCanvas(a,i===cs.SHADING?null:this._background,t.cachedCanvases);return i!==cs.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class Qft extends QW{getPattern(){return"hotpink"}}function Jft(n){switch(n[0]){case"RadialAxial":return new qft(n);case"Mesh":return new Zft(n);case"Dummy":return new Qft}throw new Error(`Unknown IR type: ${n[0]}`)}const Zse={COLORED:1,UNCOLORED:2},Ek=class Ek{constructor(e,t,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,t){var Q,H;const{bbox:r,operatorList:i,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:c}=this;u=Math.abs(u),c=Math.abs(c),rO("TilingType: "+s);const h=r[0],d=r[1],f=r[2],p=r[3],m=f-h,g=p-d,v=new Float32Array(2);It.singularValueDecompose2dScale(this.matrix,v);const[b,S]=v;It.singularValueDecompose2dScale(this.baseTransform,v);const w=b*v[0],E=S*v[1];let T=m,M=g,P=!1,I=!1;const D=Math.ceil(u*w),R=Math.ceil(c*E),B=Math.ceil(m*w),k=Math.ceil(g*E);D>=B?T=u:P=!0,R>=k?M=c:I=!0;const V=this.getSizeAndScale(T,this.ctx.canvas.width,w),G=this.getSizeAndScale(M,this.ctx.canvas.height,E),F=e.cachedCanvases.getCanvas("pattern",V.size,G.size),X=F.context,j=l.createCanvasGraphics(X,t);if(j.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(j,a,o),X.translate(-V.scale*h,-G.scale*d),j.transform(0,V.scale,0,0,G.scale,0,0),X.save(),(Q=j.dependencyTracker)==null||Q.save(),this.clipBbox(j,h,d,f,p),j.baseTransform=_i(j.ctx),j.executeOperatorList(i),j.endDrawing(),(H=j.dependencyTracker)==null||H.restore(),X.restore(),P||I){const K=F.canvas;P&&(T=u),I&&(M=c);const te=this.getSizeAndScale(T,this.ctx.canvas.width,w),Y=this.getSizeAndScale(M,this.ctx.canvas.height,E),de=te.size,ge=Y.size,se=e.cachedCanvases.getCanvas("pattern-workaround",de,ge),he=se.context,fe=P?Math.floor(m/u):0,Ee=I?Math.floor(g/c):0;for(let Ce=0;Ce<=fe;Ce++)for(let Re=0;Re<=Ee;Re++)he.drawImage(K,de*Ce,ge*Re,de,ge,0,0,de,ge);return{canvas:se.canvas,scaleX:te.scale,scaleY:Y.scale,offsetX:h,offsetY:d}}return{canvas:F.canvas,scaleX:V.scale,scaleY:G.scale,offsetX:h,offsetY:d}}getSizeAndScale(e,t,r){const i=Math.max(Ek.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*r);return a>=i?a=i:r=a/e,{scale:r,size:a}}clipBbox(e,t,r,i,a){const s=i-t,o=a-r;e.ctx.rect(t,r,s,o),It.axialAlignedBoundingBox([t,r,i,a],_i(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,a=e.current;switch(t){case Zse.COLORED:const{fillStyle:s,strokeStyle:o}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=o;break;case Zse.UNCOLORED:i.fillStyle=i.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new hft(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,i,a){let s=r;i!==cs.SHADING&&(s=It.transform(s,t.baseTransform),this.matrix&&(s=It.transform(s,this.matrix)));const o=this.createPatternCanvas(t,a);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(l),u}};Fe(Ek,"MAX_PATTERN_SIZE",3e3);let qH=Ek;function ept({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const o=Ea.isLittleEndian?4278190080:255,[l,u]=s?[a,o]:[o,a],c=r>>3,h=r&7,d=n.length;t=new Uint32Array(t.buffer);let f=0;for(let p=0;p<i;p++){for(const g=e+c;e<g;e++){const v=e<d?n[e]:255;t[f++]=v&128?u:l,t[f++]=v&64?u:l,t[f++]=v&32?u:l,t[f++]=v&16?u:l,t[f++]=v&8?u:l,t[f++]=v&4?u:l,t[f++]=v&2?u:l,t[f++]=v&1?u:l}if(h===0)continue;const m=e<d?n[e++]:255;for(let g=0;g<h;g++)t[f++]=m&1<<7-g?u:l}return{srcPos:e,destPos:f}}const Qse=16,Jse=100,tpt=15,eoe=10,Uo=16,oU=new DOMMatrix,El=new Float32Array(2),hb=new Float32Array([1/0,1/0,-1/0,-1/0]);function npt(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,a,s,o){e.transform(t,r,i,a,s,o),this.__originalTransform(t,r,i,a,s,o)},n.setTransform=function(t,r,i,a,s,o){e.setTransform(t,r,i,a,s,o),this.__originalSetTransform(t,r,i,a,s,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,a,s,o){e.bezierCurveTo(t,r,i,a,s,o),this.__originalBezierCurveTo(t,r,i,a,s,o)},n.rect=function(t,r,i,a){e.rect(t,r,i,a),this.__originalRect(t,r,i,a)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class rpt{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function iL(n,e,t,r,i,a,s,o,l,u){const[c,h,d,f,p,m]=_i(n);if(h===0&&d===0){const b=s*c+p,S=Math.round(b),w=o*f+m,E=Math.round(w),T=(s+l)*c+p,M=Math.abs(Math.round(T)-S)||1,P=(o+u)*f+m,I=Math.abs(Math.round(P)-E)||1;return n.setTransform(Math.sign(c),0,0,Math.sign(f),S,E),n.drawImage(e,t,r,i,a,0,0,M,I),n.setTransform(c,h,d,f,p,m),[M,I]}if(c===0&&f===0){const b=o*d+p,S=Math.round(b),w=s*h+m,E=Math.round(w),T=(o+u)*d+p,M=Math.abs(Math.round(T)-S)||1,P=(s+l)*h+m,I=Math.abs(Math.round(P)-E)||1;return n.setTransform(0,Math.sign(h),Math.sign(d),0,S,E),n.drawImage(e,t,r,i,a,0,0,I,M),n.setTransform(c,h,d,f,p,m),[I,M]}n.drawImage(e,t,r,i,a,s,o,l,u);const g=Math.hypot(c,h),v=Math.hypot(d,f);return[g*l,v*u]}class toe{constructor(e,t,r){Fe(this,"alphaIsShape",!1);Fe(this,"fontSize",0);Fe(this,"fontSizeScale",1);Fe(this,"textMatrix",null);Fe(this,"textMatrixScale",1);Fe(this,"fontMatrix",yH);Fe(this,"leading",0);Fe(this,"x",0);Fe(this,"y",0);Fe(this,"lineX",0);Fe(this,"lineY",0);Fe(this,"charSpacing",0);Fe(this,"wordSpacing",0);Fe(this,"textHScale",1);Fe(this,"textRenderingMode",va.FILL);Fe(this,"textRise",0);Fe(this,"fillColor","#000000");Fe(this,"strokeColor","#000000");Fe(this,"patternFill",!1);Fe(this,"patternStroke",!1);Fe(this,"fillAlpha",1);Fe(this,"strokeAlpha",1);Fe(this,"lineWidth",1);Fe(this,"activeSMask",null);Fe(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=hb.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=cs.FILL,t=null){const r=this.minMax.slice();if(e===cs.STROKE){t||_r("Stroke bounding box must include transform."),It.singularValueDecompose2dScale(t,El);const i=El[0]*this.lineWidth/2,a=El[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=It.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(hb,0)}getClippedPathBoundingBox(e=cs.FILL,t=null){return It.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function noe(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%Uo,a=(t-i)/Uo,s=i===0?a:a+1,o=n.createImageData(r,Uo);let l=0,u;const c=e.data,h=o.data;let d,f,p,m;if(e.kind===YL.GRAYSCALE_1BPP){const g=c.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),b=v.length,S=r+7>>3,w=4294967295,E=Ea.isLittleEndian?4278190080:255;for(d=0;d<s;d++){for(p=d<a?Uo:i,u=0,f=0;f<p;f++){const T=g-l;let M=0;const P=T>S?r:T*8-7,I=P&-8;let D=0,R=0;for(;M<I;M+=8)R=c[l++],v[u++]=R&128?w:E,v[u++]=R&64?w:E,v[u++]=R&32?w:E,v[u++]=R&16?w:E,v[u++]=R&8?w:E,v[u++]=R&4?w:E,v[u++]=R&2?w:E,v[u++]=R&1?w:E;for(;M<P;M++)D===0&&(R=c[l++],D=128),v[u++]=R&D?w:E,D>>=1}for(;u<b;)v[u++]=0;n.putImageData(o,0,d*Uo)}}else if(e.kind===YL.RGBA_32BPP){for(f=0,m=r*Uo*4,d=0;d<a;d++)h.set(c.subarray(l,l+m)),l+=m,n.putImageData(o,0,f),f+=Uo;d<s&&(m=r*i*4,h.set(c.subarray(l,l+m)),n.putImageData(o,0,f))}else if(e.kind===YL.RGB_24BPP)for(p=Uo,m=r*p,d=0;d<s;d++){for(d>=a&&(p=i,m=r*p),u=0,f=m;f--;)h[u++]=c[l++],h[u++]=c[l++],h[u++]=c[l++],h[u++]=255;n.putImageData(o,0,d*Uo)}else throw new Error(`bad image kind: ${e.kind}`)}function roe(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%Uo,a=(t-i)/Uo,s=i===0?a:a+1,o=n.createImageData(r,Uo);let l=0;const u=e.data,c=o.data;for(let h=0;h<s;h++){const d=h<a?Uo:i;({srcPos:l}=ept({src:u,srcPos:l,dest:c,width:r,height:d,nonBlackColor:0})),n.putImageData(o,0,h*Uo)}}function zT(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function aL(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function ioe(n,e){if(e)return!0;It.singularValueDecompose2dScale(n,El);const t=Math.fround(ud.pixelRatio*Ig.PDF_TO_CSS_UNITS);return El[0]<=t&&El[1]<=t}const ipt=["butt","round","square"],apt=["miter","round","bevel"],spt={},aoe={};var Rc,KH,ZH,QH;const sX=class sX{constructor(e,t,r,i,a,{optionalContentConfig:s,markedContentStack:o=null},l,u,c){$(this,Rc);this.ctx=e,this.current=new toe(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new rpt(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=c??null}getObject(e,t,r=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(..._i(this.compositeCtx))}this.ctx.save(),aL(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=_i(this.ctx)}executeOperatorList(e,t,r,i,a){var v;const s=e.argsArray,o=e.fnArray;let l=t||0;const u=s.length;if(u===l)return l;const c=u-l>eoe&&typeof r=="function",h=c?Date.now()+tpt:0;let d=0;const f=this.commonObjs,p=this.objs;let m,g;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!a||a(l))if(m=o[l],g=s[l]??null,m!==aC.dependency)g===null?this[m](l):this[m](l,...g);else for(const b of g){(v=this.dependencyTracker)==null||v.recordNamedData(b,l);const S=b.startsWith("g_")?f:p;if(!S.has(b))return S.get(b,r),l}if(l++,l===u)return l;if(c&&++d>eoe){if(Date.now()>h)return r(),l;d=0}}}endDrawing(){q(this,Rc,KH).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),q(this,Rc,ZH).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),o=r,l=i,u="prescale1",c,h;for(;a>2&&o>1||s>2&&l>1;){let d=o,f=l;a>2&&o>1&&(d=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/d),s>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,s/=l/f),c=this.cachedCanvases.getCanvas(u,d,f),h=c.context,h.clearRect(0,0,d,f),h.drawImage(e,0,0,o,l,0,0,d,f),e=c.canvas,o=d,l=f,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,t){var D,R;const r=this.ctx,{width:i,height:a}=t,s=this.current.fillColor,o=this.current.patternFill,l=_i(r);let u,c,h,d;if((t.bitmap||t.data)&&t.count>1){const B=t.bitmap||t.data.buffer;c=JSON.stringify(o?l:[l.slice(0,4),s]),u=this._cachedBitmapsMap.get(B),u||(u=new Map,this._cachedBitmapsMap.set(B,u));const k=u.get(c);if(k&&!o){const V=Math.round(Math.min(l[0],l[2])+l[4]),G=Math.round(Math.min(l[1],l[3])+l[5]);return(D=this.dependencyTracker)==null||D.recordDependencies(e,Ql.transformAndFill),{canvas:k,offsetX:V,offsetY:G}}h=k}h||(d=this.cachedCanvases.getCanvas("maskCanvas",i,a),roe(d.context,t));let f=It.transform(l,[1/i,0,0,-1/a,0,0]);f=It.transform(f,[1,0,0,1,0,-a]);const p=hb.slice();It.axialAlignedBoundingBox([0,0,i,a],f,p);const[m,g,v,b]=p,S=Math.round(v-m)||1,w=Math.round(b-g)||1,E=this.cachedCanvases.getCanvas("fillCanvas",S,w),T=E.context,M=m,P=g;T.translate(-M,-P),T.transform(...f),h||(h=this._scaleImage(d.canvas,nh(T)),h=h.img,u&&o&&u.set(c,h)),T.imageSmoothingEnabled=ioe(_i(T),t.interpolate),iL(T,h,0,0,h.width,h.height,0,0,i,a),T.globalCompositeOperation="source-in";const I=It.transform(nh(T),[1,0,0,1,-M,-P]);return T.fillStyle=o?s.getPattern(r,this,I,cs.FILL,e):s,T.fillRect(0,0,i,a),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,E.canvas)),(R=this.dependencyTracker)==null||R.recordDependencies(e,Ql.transformAndFill),{canvas:E.canvas,offsetX:Math.round(M),offsetY:Math.round(P)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=ipt[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=apt[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,i,a,s,o;for(const[l,u]of t)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(s=this.dependencyTracker)==null||s.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,t,r);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),zT(this.suspendedCtx,s),npt(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zT(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const a=i[0],s=i[1],o=i[2]-a,l=i[3]-s;o===0||l===0||(this.genericComposeSMask(t.context,r,o,l,t.subtype,t.backdrop,t.transferMap,a,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,a,s,o,l,u,c,h){let d=e.canvas,f=l-c,p=u-h;if(s)if(f<0||p<0||f+r>d.width||p+i>d.height){const g=this.cachedCanvases.getCanvas("maskExtension",r,i),v=g.context;v.drawImage(d,-f,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=s,v.fillRect(0,0,r,i),v.globalCompositeOperation="source-over",d=g.canvas,f=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(f,p,r,i),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(f,p,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,u,r,i),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(d,f,p,r,i,l,u,r,i),t.restore()}save(e){var r;this.inSMaskMode&&zT(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zT(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,i,a,s,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,r,i,a,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,i){let[a]=r;if(!i){a||(a=r[0]=new Path2D),this[t](e,a);return}if(this.dependencyTracker!==null){const s=t===aC.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}a instanceof Path2D||(a=r[0]=yxe(a)),It.axialAlignedBoundingBox(i,_i(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var s;const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const o=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,nh(i),cs.STROKE,e),o){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(s=this.dependencyTracker)==null||s.recordDependencies(e,Ql.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(cs.STROKE,_i(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var u,c,h;const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let o=!1;if(s){const d=a.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=a.getPattern(i,this,nh(i),cs.FILL,e),d){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(d)),t=f}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(c=this.dependencyTracker)==null||c.recordDependencies(e,Ql.fill),o&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),r&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,Ql.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=spt}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=aoe}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,a=r.getTransform().invertSelf();for(const{transform:s,x:o,y:l,fontSize:u,path:c}of t)c&&i.addPath(c,new DOMMatrix(s).preMultiplySelf(a).translate(o,l).scale(u,-u));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var h,d;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),a=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=i.fontMatrix||yH,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&wn("Invalid font matrix for font "+t),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=((d=i.systemFontInfo)==null?void 0:d.css)||`"${s}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const u=i.italic?"italic":"normal";let c=r;r<Qse?c=Qse:r>Jse&&(c=Jse),this.current.fontSizeScale=r/c,this.ctx.font=`${u} ${l} ${c}px ${o}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,i,a,s){var v,b,S,w;const o=this.ctx,l=this.current,u=l.font,c=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,d=c&va.FILL_STROKE_MASK,f=!!(c&va.ADD_TO_PATH_FLAG),p=l.patternFill&&!u.missingFile,m=l.patternStroke&&!u.missingFile;let g;if((u.disableFontFace||f||p||m)&&!u.missingFile&&(g=u.getPathGenerator(this.commonObjs,t)),g&&(u.disableFontFace||p||m)){o.save(),o.translate(r,i),o.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,u);let E;if(d===va.FILL||d===va.FILL_STROKE)if(a){E=o.getTransform(),o.setTransform(...a);const T=q(this,Rc,QH).call(this,g,E,a);o.fill(T)}else o.fill(g);if(d===va.STROKE||d===va.FILL_STROKE)if(s){E||(E=o.getTransform()),o.setTransform(...s);const{a:T,b:M,c:P,d:I}=E,D=It.inverseTransform(s),R=It.transform([T,M,P,I,0,0],D);It.singularValueDecompose2dScale(R,El),o.lineWidth*=Math.max(El[0],El[1])/h,o.stroke(q(this,Rc,QH).call(this,g,E,s))}else o.lineWidth/=h,o.stroke(g);o.restore()}else(d===va.FILL||d===va.FILL_STROKE)&&(o.fillText(t,r,i),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,o,u,h,r,i,()=>o.measureText(t))),(d===va.STROKE||d===va.FILL_STROKE)&&(this.dependencyTracker&&((S=this.dependencyTracker)==null||S.recordCharacterBBox(e,o,u,h,r,i,()=>o.measureText(t)).recordDependencies(e,Ql.stroke)),o.strokeText(t,r,i));f&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:_i(o),x:r,y:i,fontSize:h,path:g}),(w=this.dependencyTracker)==null||w.recordCharacterBBox(e,o,u,h,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return En(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var R,B,k,V;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ql.showText).resetBBox(e),this.current.textRenderingMode&va.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,t),(R=this.dependencyTracker)==null||R.recordShowTextOperation(e);return}const a=r.fontSize;if(a===0){(B=this.dependencyTracker)==null||B.recordOperation(e);return}const s=this.ctx,o=r.fontSizeScale,l=r.charSpacing,u=r.wordSpacing,c=r.fontDirection,h=r.textHScale*c,d=t.length,f=i.vertical,p=f?1:-1,m=i.defaultVMetrics,g=a*r.fontMatrix[0],v=r.textRenderingMode===va.FILL&&!i.disableFontFace&&!r.patternFill;s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),c>0?s.scale(h,-1):s.scale(h,1);let b,S;const w=r.textRenderingMode&va.FILL_STROKE_MASK,E=w===va.FILL||w===va.FILL_STROKE,T=w===va.STROKE||w===va.FILL_STROKE;if(E&&r.patternFill){s.save();const G=r.fillColor.getPattern(s,this,nh(s),cs.FILL,e);b=_i(s),s.restore(),s.fillStyle=G}if(T&&r.patternStroke){s.save();const G=r.strokeColor.getPattern(s,this,nh(s),cs.STROKE,e);S=_i(s),s.restore(),s.strokeStyle=G}let M=r.lineWidth;const P=r.textMatrixScale;if(P===0||M===0?T&&(M=this.getSinglePixelWidth()):M/=P,o!==1&&(s.scale(o,o),M/=o),s.lineWidth=M,i.isInvalidPDFjsFont){const G=[];let F=0;for(const j of t)G.push(j.unicode),F+=j.width;const X=G.join("");if(s.fillText(X,0,0),this.dependencyTracker!==null){const j=s.measureText(X);this.dependencyTracker.recordBBox(e,this.ctx,-j.actualBoundingBoxLeft,j.actualBoundingBoxRight,-j.actualBoundingBoxAscent,j.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=F*g*h,s.restore(),this.compose();return}let I=0,D;for(D=0;D<d;++D){const G=t[D];if(typeof G=="number"){I+=p*G*a/1e3;continue}let F=!1;const X=(G.isSpace?u:0)+l,j=G.fontChar,Q=G.accent;let H,K,te=G.width;if(f){const ge=G.vmetric||m,se=-(G.vmetric?ge[1]:te*.5)*g,he=ge[2]*g;te=ge?-ge[0]:te,H=se/o,K=(I+he)/o}else H=I/o,K=0;let Y;if(i.remeasure&&te>0){Y=s.measureText(j);const ge=Y.width*1e3/a*o;if(te<ge&&this.isFontSubpixelAAEnabled){const se=te/ge;F=!0,s.save(),s.scale(se,1),H/=se}else te!==ge&&(H+=(te-ge)/2e3*a/o)}if(this.contentVisible&&(G.isInFont||i.missingFile)){if(v&&!Q)s.fillText(j,H,K),(k=this.dependencyTracker)==null||k.recordCharacterBBox(e,s,Y?{bbox:null}:i,a/o,H,K,()=>Y??s.measureText(j));else if(this.paintChar(e,j,H,K,b,S),Q){const ge=H+a*Q.offset.x/o,se=K-a*Q.offset.y/o;this.paintChar(e,Q.fontChar,ge,se,b,S)}}const de=f?te*g-X*c:te*g+X*c;I+=de,F&&s.restore()}f?r.y-=I:r.x+=I*h,s.restore(),this.compose(),(V=this.dependencyTracker)==null||V.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,i=this.current,a=i.font,s=i.fontSize,o=i.fontDirection,l=a.vertical?1:-1,u=i.charSpacing,c=i.wordSpacing,h=i.textHScale*o,d=i.fontMatrix||yH,f=t.length,p=i.textRenderingMode===va.INVISIBLE;let m,g,v,b;if(p||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(h,o);const S=this.dependencyTracker;for(this.dependencyTracker=S?new ck(S,e):null,m=0;m<f;++m){if(g=t[m],typeof g=="number"){b=l*g*s/1e3,this.ctx.translate(b,0),i.x+=b*h;continue}const w=(g.isSpace?c:0)+u,E=a.charProcOperatorList[g.operatorListId];E?this.contentVisible&&(this.save(),r.scale(s,s),r.transform(...d),this.executeOperatorList(E),this.restore()):wn(`Type3 character "${g.operatorListId}" is not available.`);const T=[g.width,0];It.applyTransform(T,d),v=T[0]*s+w,r.translate(v,0),i.x+=v*h}r.restore(),S&&(this.dependencyTracker=S)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,i,a,s,o){var u;const l=new Path2D;l.rect(i,a,s-i,o-a),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,s,a,o).recordClipBox(e,this.ctx,i,s,a,o),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const i=this.baseTransform||_i(this.ctx),a={createCanvasGraphics:(s,o)=>new sX(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new ck(this.dependencyTracker,o,!0):null)};r=new qH(t,this.ctx,a,i)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Jft(this.getObject(e,t)),this.cachedPatterns.set(t,i)),r&&(i.matrix=r),i}shadingFill(e,t){var s;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,nh(r),cs.SHADING,e);const a=nh(r);if(a){const{width:o,height:l}=r.canvas,u=hb.slice();It.axialAlignedBoundingBox([0,0,o,l],a,u);const[c,h,d,f]=u;this.ctx.fillRect(c,h,d-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(s=this.dependencyTracker)==null||s.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ql.transform).recordDependencies(e,Ql.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){_r("Should not call beginInlineImage")}beginImageData(){_r("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=_i(this.ctx),r)){It.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[a,s,o,l]=r,u=new Path2D;u.rect(a,s,o-a,l-s),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,a,o,s,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var S;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||rO("TODO: Support non-isolated groups."),t.knockout&&wn("Knockout groups not supported.");const i=_i(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=hb.slice();It.axialAlignedBoundingBox(t.bbox,_i(r),a);const s=[0,0,r.canvas.width,r.canvas.height];a=It.intersect(a,s)||[0,0,0,0];const o=Math.floor(a[0]),l=Math.floor(a[1]),u=Math.max(Math.ceil(a[2])-o,1),c=Math.max(Math.ceil(a[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,c]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(h,u,c),f=d.context;f.translate(-o,-l),f.transform(...i);let p=new Path2D;const[m,g,v,b]=t.bbox;if(p.rect(m,g,v-m,b-g),t.matrix){const w=new Path2D;w.addPath(p,new DOMMatrix(t.matrix)),p=w}f.clip(p),t.smask&&this.smaskStack.push({canvas:d.canvas,context:f,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),zT(r,f),this.ctx=f,(S=this.dependencyTracker)==null||S.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var a;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=_i(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const o=hb.slice();It.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],s,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,r,i,a,s){if(q(this,Rc,KH).call(this),aL(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],l=r[3]-r[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=l,It.singularValueDecompose2dScale(_i(this.ctx),El);const{viewportScale:u}=this,c=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,h);const{canvas:d,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(El[0],0,0,-El[1],0,l*El[1]),aL(this.ctx)}else{aL(this.ctx),this.endPath(e);const u=new Path2D;u.rect(r[0],r[1],o,l),this.ctx.clip(u)}}this.current=new toe(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),q(this,Rc,ZH).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const i=this.ctx,a=this._createMaskCanvas(e,t),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,i=0,a=0,s,o){var h,d,f;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const u=_i(l);l.transform(r,i,a,s,0,0);const c=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,c.offsetX-u[4],c.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let p=0,m=o.length;p<m;p+=2){const g=It.transform(u,[r,i,a,s,o[p],o[p+1]]);l.drawImage(c.canvas,g[4],g[5]),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,g[4],g[4]+c.canvas.width,g[5],g[5]+c.canvas.height)}l.restore(),this.compose(),(f=this.dependencyTracker)==null||f.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var s,o,l;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;(s=this.dependencyTracker)==null||s.resetBBox(e).recordDependencies(e,Ql.transformAndFill);for(const u of t){const{data:c,width:h,height:d,transform:f}=u,p=this.cachedCanvases.getCanvas("maskCanvas",h,d),m=p.context;m.save();const g=this.getObject(e,c,u);roe(m,g),m.globalCompositeOperation="source-in",m.fillStyle=a?i.getPattern(m,this,nh(r),cs.FILL,e):i,m.fillRect(0,0,h,d),m.restore(),r.save(),r.transform(...f),r.scale(1,-1),iL(r,p.canvas,0,0,h,d,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,r,0,h,0,d),r.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){wn("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,i,a){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){wn("Dependent image isn't ready yet");return}const o=s.width,l=s.height,u=[];for(let c=0,h=a.length;c<h;c+=2)u.push({transform:[r,0,0,i,a[c],a[c+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const r=t.width,i=t.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/r,-1/i);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,i).context;noe(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,nh(a));a.imageSmoothingEnabled=ioe(_i(a),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,a,0,r,-i,0).recordDependencies(e,Ql.imageXObject).recordOperation(e),iL(a,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var s,o,l;if(!this.contentVisible)return;const i=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const u=t.width,c=t.height,d=this.cachedCanvases.getCanvas("inlineImage",u,c).context;noe(d,t),a=this.applyTransferMapsToCanvas(d)}(s=this.dependencyTracker)==null||s.resetBBox(e);for(const u of r)i.save(),i.transform(...u.transform),i.scale(1,-1),iL(i,a,u.x,u.y,u.w,u.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Ql.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var s,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===aoe?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,(s=this.dependencyTracker)==null||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=_i(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:a}=this.ctx.getTransform();let s,o;if(r===0&&i===0){const l=Math.abs(t),u=Math.abs(a);if(l===u)if(e===0)s=o=1/l;else{const c=l*e;s=o=c<1?1/c:1}else if(e===0)s=1/l,o=1/u;else{const c=l*e,h=u*e;s=c<1?1/c:1,o=h<1?1/h:1}}else{const l=Math.abs(t*a-r*i),u=Math.hypot(t,r),c=Math.hypot(i,a);if(e===0)s=c/l,o=u/l;else{const h=e*l;s=c>h?c/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){r.lineWidth=(i||1)*a,r.stroke(e);return}const o=r.getLineDash();t&&r.save(),r.scale(a,s),oU.a=1/a,oU.d=1/s;const l=new Path2D;if(l.addPath(e,oU),o.length>0){const u=Math.max(a,s);r.setLineDash(o.map(c=>c/u)),r.lineDashOffset/=u}r.lineWidth=i||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Rc=new WeakSet,KH=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ZH=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},QH=function(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i};let Eb=sX;for(const n in aC)Eb.prototype[n]!==void 0&&(Eb.prototype[aC[n]]=Eb.prototype[n]);var ZC,QC;class Mf{static get workerPort(){return _(this,ZC)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");U(this,ZC,e)}static get workerSrc(){return _(this,QC)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");U(this,QC,e)}}ZC=new WeakMap,QC=new WeakMap,$(Mf,ZC,null),$(Mf,QC,"");var u1,JC;class opt{constructor({parsedData:e,rawData:t}){$(this,u1);$(this,JC);U(this,u1,e),U(this,JC,t)}getRaw(){return _(this,JC)}get(e){return _(this,u1).get(e)??null}[Symbol.iterator](){return _(this,u1).entries()}}u1=new WeakMap,JC=new WeakMap;const X_=Symbol("INTERNAL");var eM,tM,nM,c1;class lpt{constructor(e,{name:t,intent:r,usage:i,rbGroups:a}){$(this,eM,!1);$(this,tM,!1);$(this,nM,!1);$(this,c1,!0);U(this,eM,!!(e&Sl.DISPLAY)),U(this,tM,!!(e&Sl.PRINT)),this.name=t,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(_(this,nM))return _(this,c1);if(!_(this,c1))return!1;const{print:e,view:t}=this.usage;return _(this,eM)?(t==null?void 0:t.viewState)!=="OFF":_(this,tM)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==X_&&_r("Internal method `_setVisible` called."),U(this,nM,r),U(this,c1,t)}}eM=new WeakMap,tM=new WeakMap,nM=new WeakMap,c1=new WeakMap;var Dm,Ur,h1,d1,rM,JH;class upt{constructor(e,t=Sl.DISPLAY){$(this,rM);$(this,Dm,null);$(this,Ur,new Map);$(this,h1,null);$(this,d1,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,U(this,d1,e.order);for(const r of e.groups)_(this,Ur).set(r.id,new lpt(t,r));if(e.baseState==="OFF")for(const r of _(this,Ur).values())r._setVisible(X_,!1);for(const r of e.on)_(this,Ur).get(r)._setVisible(X_,!0);for(const r of e.off)_(this,Ur).get(r)._setVisible(X_,!1);U(this,h1,this.getHash())}}isVisible(e){if(_(this,Ur).size===0)return!0;if(!e)return rO("Optional content group not defined."),!0;if(e.type==="OCG")return _(this,Ur).has(e.id)?_(this,Ur).get(e.id).visible:(wn(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return q(this,rM,JH).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!_(this,Ur).has(t))return wn(`Optional content group not found: ${t}`),!0;if(_(this,Ur).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!_(this,Ur).has(t))return wn(`Optional content group not found: ${t}`),!0;if(!_(this,Ur).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!_(this,Ur).has(t))return wn(`Optional content group not found: ${t}`),!0;if(!_(this,Ur).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!_(this,Ur).has(t))return wn(`Optional content group not found: ${t}`),!0;if(_(this,Ur).get(t).visible)return!1}return!0}return wn(`Unknown optional content policy ${e.policy}.`),!0}return wn(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var a;const i=_(this,Ur).get(e);if(!i){wn(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const s of i.rbGroups)for(const o of s)o!==e&&((a=_(this,Ur).get(o))==null||a._setVisible(X_,!1,!0));i._setVisible(X_,!!t,!0),U(this,Dm,null)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=_(this,Ur).get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!a.visible,t);break}}U(this,Dm,null)}get hasInitialVisibility(){return _(this,h1)===null||this.getHash()===_(this,h1)}getOrder(){return _(this,Ur).size?_(this,d1)?_(this,d1).slice():[..._(this,Ur).keys()]:null}getGroup(e){return _(this,Ur).get(e)||null}getHash(){if(_(this,Dm)!==null)return _(this,Dm);const e=new Qxe;for(const[t,r]of _(this,Ur))e.update(`${t}:${r.visible}`);return U(this,Dm,e.hexdigest())}[Symbol.iterator](){return _(this,Ur).entries()}}Dm=new WeakMap,Ur=new WeakMap,h1=new WeakMap,d1=new WeakMap,rM=new WeakSet,JH=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const a=e[i];let s;if(Array.isArray(a))s=q(this,rM,JH).call(this,a);else if(_(this,Ur).has(a))s=_(this,Ur).get(a).visible;else return wn(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"};var iM,aM;class sO{constructor(e,t,r){$(this,iM,null);$(this,aM,null);Fe(this,"_fullReader",null);Fe(this,"_rangeReaders",new Set);Fe(this,"_source",null);this._source=e,U(this,iM,t),U(this,aM,r)}get _progressiveDataLength(){var e;return((e=this._fullReader)==null?void 0:e._loaded)??0}getFullReader(){return xr(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new(_(this,iM))(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new(_(this,aM))(this,e,t);return this._rangeReaders.add(r),r}cancelAllRequests(e){var t;(t=this._fullReader)==null||t.cancel(e);for(const r of new Set(this._rangeReaders))r.cancel(e)}}iM=new WeakMap,aM=new WeakMap;class oO{constructor(e){Fe(this,"onProgress",null);Fe(this,"_contentLength",0);Fe(this,"_filename",null);Fe(this,"_headersCapability",Promise.withResolvers());Fe(this,"_isRangeSupported",!1);Fe(this,"_isStreamingSupported",!1);Fe(this,"_loaded",0);Fe(this,"_stream",null);this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){_r("Abstract method `read` called")}cancel(e){_r("Abstract method `cancel` called")}}class lO{constructor(e,t,r){Fe(this,"_stream",null);this._stream=e}async read(){_r("Abstract method `read` called")}cancel(e){_r("Abstract method `cancel` called")}}function soe(n){return n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}var sM,e9;class cpt extends sO{constructor(t){super(t,hpt,dpt);$(this,sM);Fe(this,"_progressiveDone",!1);Fe(this,"_queuedChunks",[]);const{pdfDataRangeTransport:r}=t,{initialData:i,progressiveDone:a}=r;if((i==null?void 0:i.length)>0){const s=soe(i);this._queuedChunks.push(s)}this._progressiveDone=a,r.addRangeListener((s,o)=>{q(this,sM,e9).call(this,s,o)}),r.addProgressListener((s,o)=>{var l,u;o!==void 0&&((u=(l=this._fullReader)==null?void 0:l.onProgress)==null||u.call(l,{loaded:s,total:o}))}),r.addProgressiveReadListener(s=>{q(this,sM,e9).call(this,void 0,s)}),r.addProgressiveDoneListener(()=>{var s;(s=this._fullReader)==null||s.progressiveDone(),this._progressiveDone=!0}),r.transportReady()}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,r){const i=super.getRangeReader(t,r);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(t,r)),i}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}sM=new WeakSet,e9=function(t,r){const i=soe(r);if(t===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.keys().find(s=>s._begin===t);xr(a,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),a._enqueue(i)}};class hpt extends oO{constructor(t){super(t);Fe(this,"_done",!1);Fe(this,"_queuedChunks",null);Fe(this,"_requests",[]);const{pdfDataRangeTransport:r,disableRange:i,disableStream:a}=t._source,{length:s,contentDispositionFilename:o}=r;this._queuedChunks=t._queuedChunks||[];for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._done=t._progressiveDone,this._contentLength=s,this._isStreamingSupported=!a,this._isRangeSupported=!i,qW(o)&&(this._filename=o),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dpt extends lO{constructor(t,r,i){super(t,r,i);Fe(this,"onDone",null);Fe(this,"_begin",-1);Fe(this,"_done",!1);Fe(this,"_queuedChunk",null);Fe(this,"_requests",[]);this._begin=r}_enqueue(t){var r;if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,(r=this.onDone)==null||r.call(this)}}async read(){if(this._queuedChunk){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var r;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,(r=this.onDone)==null||r.call(this)}}function fpt(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let c=o(t);return c=unescape(c),c=l(c),c=u(c),a(c)}if(t=s(n),t){const c=u(t);return a(c)}if(t=r("filename","i").exec(n),t){t=t[1];let c=o(t);return c=u(c),a(c)}function r(c,h){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(c,h){if(c){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const d=new TextDecoder(c,{fatal:!0}),f=iO(h);h=d.decode(f),e=!1}catch{}}return h}function a(c){return e&&/[\x80-\xff]/.test(c)&&(c=i("utf-8",c),e&&(c=i("iso-8859-1",c))),c}function s(c){const h=[];let d;const f=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(d=f.exec(c))!==null;){let[,m,g,v]=d;if(m=parseInt(m,10),m in h){if(m===0)break;continue}h[m]=[g,v]}const p=[];for(let m=0;m<h.length&&m in h;++m){let[g,v]=h[m];v=o(v),g&&(v=unescape(v),m===0&&(v=l(v))),p.push(v)}return p.join("")}function o(c){if(c.startsWith('"')){const h=c.slice(1).split('\\"');for(let d=0;d<h.length;++d){const f=h[d].indexOf('"');f!==-1&&(h[d]=h[d].slice(0,f),h.length=d+1),h[d]=h[d].replaceAll(/\\(.)/g,"$1")}c=h.join('"')}return c}function l(c){const h=c.indexOf("'");if(h===-1)return c;const d=c.slice(0,h),p=c.slice(h+1).replace(/^[^']*'/,"");return i(d,p)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,d,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,g){return String.fromCharCode(parseInt(g,16))}),i(d,p);try{p=atob(p)}catch{}return i(d,p)})}return""}function c_e(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function uO(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function h_e({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(n.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function d_e(n){const e=n.get("Content-Disposition");if(e){let t=fpt(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(qW(t))return t}return null}function cO(n,e){return new ik(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function f_e(n,e){if(n!==e)throw new Error(`Expected range response-origin "${n}" to match "${e}".`)}function p_e(n,e,t,r){return fetch(n,{method:"GET",headers:e,signal:r.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function m_e(n,e){if(n!==200&&n!==206)throw cO(n,e)}function g_e(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(wn(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class ppt extends sO{constructor(t){super(t,mpt,gpt);Fe(this,"_responseOrigin",null);this.isHttp=/^https?:/i.test(t.url),this.headers=c_e(this.isHttp,t.httpHeaders)}}class mpt extends oO{constructor(t){super(t);Fe(this,"_abortController",new AbortController);Fe(this,"_reader",null);const{disableRange:r,disableStream:i,length:a,rangeChunkSize:s,url:o,withCredentials:l}=t._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!r;const u=new Headers(t.headers);p_e(o,u,l,this._abortController).then(c=>{t._responseOrigin=uO(c.url),m_e(c.status,o),this._reader=c.body.getReader();const h=c.headers,{allowRangeRequests:d,suggestedLength:f}=h_e({responseHeaders:h,isHttp:t.isHttp,rangeChunkSize:s,disableRange:r});this._isRangeSupported=d,this._contentLength=f||this._contentLength,this._filename=d_e(h),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Dg("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){var i;await this._headersCapability.promise;const{value:t,done:r}=await this._reader.read();return r?{value:t,done:r}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:g_e(t),done:!1})}cancel(t){var r;(r=this._reader)==null||r.cancel(t),this._abortController.abort()}}class gpt extends lO{constructor(t,r,i){super(t,r,i);Fe(this,"_abortController",new AbortController);Fe(this,"_readCapability",Promise.withResolvers());Fe(this,"_reader",null);const{url:a,withCredentials:s}=t._source,o=new Headers(t.headers);o.append("Range",`bytes=${r}-${i-1}`),p_e(a,o,s,this._abortController).then(l=>{const u=uO(l.url);f_e(u,t._responseOrigin),m_e(l.status,a),this._reader=l.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:r}=await this._reader.read();return r?{value:t,done:r}:{value:g_e(t),done:!1}}cancel(t){var r;(r=this._reader)==null||r.cancel(t),this._abortController.abort()}}const lU=200,ooe=206;function vpt(n){return typeof n!="string"?n:iO(n).buffer}var Sh,CS,v_e,y_e;class ypt extends sO{constructor(t){super(t,xpt,_pt);$(this,CS);$(this,Sh,new WeakMap);Fe(this,"_responseOrigin",null);this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=c_e(this.isHttp,t.httpHeaders)}_request(t){const r=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};_(this,Sh).set(r,i),r.open("GET",this.url),r.withCredentials=this._source.withCredentials;for(const[a,s]of this.headers)r.setRequestHeader(a,s);return this.isHttp&&"begin"in t&&"end"in t?(r.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.validateStatus=a=>a===ooe||a===lU):i.validateStatus=a=>a===lU,r.responseType="arraybuffer",xr(t.onError,"Expected `onError` callback to be provided."),r.onerror=()=>t.onError(r.status),r.onreadystatechange=q(this,CS,y_e).bind(this,r),r.onprogress=q(this,CS,v_e).bind(this,r),r.send(null),r}_abortRequest(t){_(this,Sh).has(t)&&(_(this,Sh).delete(t),t.abort())}getRangeReader(t,r){const i=super.getRangeReader(t,r);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}Sh=new WeakMap,CS=new WeakSet,v_e=function(t,r){var a;const i=_(this,Sh).get(t);(a=i==null?void 0:i.onProgress)==null||a.call(i,r)},y_e=function(t,r){const i=_(this,Sh).get(t);if(!i||(t.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),t.readyState!==4)||!_(this,Sh).has(t))return;if(_(this,Sh).delete(t),t.status===0&&this.isHttp){i.onError(t.status);return}const a=t.status||lU;if(!i.validateStatus(a)){i.onError(t.status);return}const s=vpt(t.response);if(a===ooe){const o=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(o)?i.onDone(s):(wn('Missing or invalid "Content-Range" header.'),i.onError(0))}else s?i.onDone(s):i.onError(t.status)};var cd,x_e,__e,b_e,S_e;class xpt extends oO{constructor(t){super(t);$(this,cd);Fe(this,"_cachedChunks",[]);Fe(this,"_done",!1);Fe(this,"_requests",[]);Fe(this,"_storedError",null);const{length:r}=t._source;this._contentLength=r,this._fullRequestXhr=t._request({onHeadersReceived:q(this,cd,x_e).bind(this),onDone:q(this,cd,__e).bind(this),onError:q(this,cd,b_e).bind(this),onProgress:q(this,cd,S_e).bind(this)})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}cd=new WeakSet,x_e=function(){const t=this._stream,{disableRange:r,rangeChunkSize:i}=t._source,a=this._fullRequestXhr;t._responseOrigin=uO(a.responseURL);const s=a.getAllResponseHeaders(),o=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[h,...d]=c.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:u}=h_e({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:i,disableRange:r});l&&(this._isRangeSupported=!0),this._contentLength=u||this._contentLength,this._filename=d_e(o),this._isRangeSupported&&t._abortRequest(a),this._headersCapability.resolve()},__e=function(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}},b_e=function(t){this._storedError=cO(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0},S_e=function(t){var r;(r=this.onProgress)==null||r.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})};var np,w_e,T_e,t9;class _pt extends lO{constructor(t,r,i){super(t,r,i);$(this,np);Fe(this,"onClosed",null);Fe(this,"_done",!1);Fe(this,"_queuedChunk",null);Fe(this,"_requests",[]);Fe(this,"_storedError",null);this._requestXhr=t._request({begin:r,end:i,onHeadersReceived:q(this,np,w_e).bind(this),onDone:q(this,np,T_e).bind(this),onError:q(this,np,t9).bind(this),onProgress:null})}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){var r;this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),(r=this.onClosed)==null||r.call(this)}}np=new WeakSet,w_e=function(){var r;const t=uO((r=this._requestXhr)==null?void 0:r.responseURL);try{f_e(t,this._stream._responseOrigin)}catch(i){this._storedError=i,q(this,np,t9).call(this,0)}},T_e=function(t){var r;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,(r=this.onClosed)==null||r.call(this)},t9=function(t){this._storedError??(this._storedError=cO(t,this._stream.url));for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null};const bpt=/^[a-z][a-z0-9\-+.]+:/i;function Spt(n){if(bpt.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}function E_e(n){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(n):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(n)}function A_e(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(wn(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class wpt extends sO{constructor(e){super(e,Tpt,Ept),this.url=Spt(e.url),xr(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class Tpt extends oO{constructor(t){super(t);Fe(this,"_reader",null);const{disableRange:r,disableStream:i,length:a,rangeChunkSize:s}=t._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!r;const o=t.url,l=process.getBuiltinModule("fs");l.promises.lstat(o).then(u=>{const c=l.createReadStream(o),h=E_e(c);this._reader=h.getReader();const{size:d}=u;d<=2*s&&(this._isRangeSupported=!1),this._contentLength=d,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Dg("Streaming is disabled.")),this._headersCapability.resolve()}).catch(u=>{u.code==="ENOENT"&&(u=cO(0,o.href)),this._headersCapability.reject(u)})}async read(){var i;await this._headersCapability.promise;const{value:t,done:r}=await this._reader.read();return r?{value:t,done:r}:(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:A_e(t),done:!1})}cancel(t){var r;(r=this._reader)==null||r.cancel(t)}}class Ept extends lO{constructor(t,r,i){super(t,r,i);Fe(this,"_readCapability",Promise.withResolvers());Fe(this,"_reader",null);const a=t.url,s=process.getBuiltinModule("fs");try{const o=s.createReadStream(a,{start:r,end:i-1}),l=E_e(o);this._reader=l.getReader(),this._readCapability.resolve()}catch(o){this._readCapability.reject(o)}}async read(){await this._readCapability.promise;const{value:t,done:r}=await this._reader.read();return r?{value:t,done:r}:{value:A_e(t),done:!1}}cancel(t){var r;(r=this._reader)==null||r.cancel(t)}}const VT=Symbol("INITIAL_DATA");var ol,oM,n9;class C_e{constructor(){$(this,oM);$(this,ol,Object.create(null))}get(e,t=null){if(t){const i=q(this,oM,n9).call(this,e);return i.promise.then(()=>t(i.data)),null}const r=_(this,ol)[e];if(!r||r.data===VT)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=_(this,ol)[e];return!!t&&t.data!==VT}delete(e){const t=_(this,ol)[e];return!t||t.data===VT?!1:(delete _(this,ol)[e],!0)}resolve(e,t=null){const r=q(this,oM,n9).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in _(this,ol)){const{data:r}=_(this,ol)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}U(this,ol,Object.create(null))}*[Symbol.iterator](){for(const e in _(this,ol)){const{data:t}=_(this,ol)[e];t!==VT&&(yield[e,t])}}}ol=new WeakMap,oM=new WeakSet,n9=function(e){var t;return(t=_(this,ol))[e]||(t[e]={...Promise.withResolvers(),data:VT})};const Apt=1e5,loe=30;var hoe,Im,No,lM,uM,j0,of,cM,hM,W0,dM,f1,Pm,p1,fM,m1,X0,pM,mM,g1,$0,gM,v1,y1,rp,M_e,D_e,r9,Ol,aR,i9,I_e,P_e;const es=class es{constructor({textContentSource:e,container:t,viewport:r}){$(this,rp);$(this,Im,Promise.withResolvers());$(this,No,null);$(this,lM,!1);$(this,uM,!!((hoe=globalThis.FontInspector)!=null&&hoe.enabled));$(this,j0,null);$(this,of,null);$(this,cM,0);$(this,hM,0);$(this,W0,null);$(this,dM,null);$(this,f1,0);$(this,Pm,0);$(this,p1,Object.create(null));$(this,fM,[]);$(this,m1,null);$(this,X0,[]);$(this,pM,new WeakMap);$(this,mM,null);var l;if(e instanceof ReadableStream)U(this,m1,e);else if(typeof e=="object")U(this,m1,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');U(this,No,U(this,dM,t)),U(this,Pm,r.scale*ud.pixelRatio),U(this,f1,r.rotation),U(this,of,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:s,pageY:o}=r.rawDims;U(this,mM,[1,0,0,-1,-s,o+a]),U(this,hM,i),U(this,cM,a),q(l=es,Ol,I_e).call(l),t.style.setProperty("--min-font-size",_(es,v1)),Qy(t,r),_(this,Im).promise.finally(()=>{_(es,y1).delete(this),U(this,of,null),U(this,p1,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Ea.platform;return En(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{_(this,W0).read().then(({value:t,done:r})=>{if(r){_(this,Im).resolve();return}_(this,j0)??U(this,j0,t.lang),Object.assign(_(this,p1),t.styles),q(this,rp,M_e).call(this,t.items),e()},_(this,Im).reject)};return U(this,W0,_(this,m1).getReader()),_(es,y1).add(this),e(),_(this,Im).promise}update({viewport:e,onBefore:t=null}){var a;const r=e.scale*ud.pixelRatio,i=e.rotation;if(i!==_(this,f1)&&(t==null||t(),U(this,f1,i),Qy(_(this,dM),{rotation:i})),r!==_(this,Pm)){t==null||t(),U(this,Pm,r);const s={div:null,properties:null,ctx:q(a=es,Ol,aR).call(a,_(this,j0))};for(const o of _(this,X0))s.properties=_(this,pM).get(o),s.div=o,q(this,rp,r9).call(this,s)}}cancel(){var t;const e=new Dg("TextLayer task cancelled.");(t=_(this,W0))==null||t.cancel(e).catch(()=>{}),U(this,W0,null),_(this,Im).reject(e)}get textDivs(){return _(this,X0)}get textContentItemsStr(){return _(this,fM)}static cleanup(){if(!(_(this,y1).size>0)){_(this,g1).clear();for(const{canvas:e}of _(this,$0).values())e.remove();_(this,$0).clear()}}};Im=new WeakMap,No=new WeakMap,lM=new WeakMap,uM=new WeakMap,j0=new WeakMap,of=new WeakMap,cM=new WeakMap,hM=new WeakMap,W0=new WeakMap,dM=new WeakMap,f1=new WeakMap,Pm=new WeakMap,p1=new WeakMap,fM=new WeakMap,m1=new WeakMap,X0=new WeakMap,pM=new WeakMap,mM=new WeakMap,g1=new WeakMap,$0=new WeakMap,gM=new WeakMap,v1=new WeakMap,y1=new WeakMap,rp=new WeakSet,M_e=function(e){var i,a;if(_(this,lM))return;(a=_(this,of)).ctx??(a.ctx=q(i=es,Ol,aR).call(i,_(this,j0)));const t=_(this,X0),r=_(this,fM);for(const s of e){if(t.length>Apt){wn("Ignoring additional textDivs for performance reasons."),U(this,lM,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const o=_(this,No);U(this,No,document.createElement("span")),_(this,No).classList.add("markedContent"),s.id&&_(this,No).setAttribute("id",`${s.id}`),s.tag==="Artifact"&&(_(this,No).ariaHidden=!0),o.append(_(this,No))}else s.type==="endMarkedContent"&&U(this,No,_(this,No).parentNode);continue}r.push(s.str),q(this,rp,D_e).call(this,s)}},D_e=function(e){var p;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};_(this,X0).push(t);const i=It.transform(_(this,mM),e.transform);let a=Math.atan2(i[1],i[0]);const s=_(this,p1)[e.fontName];s.vertical&&(a+=Math.PI/2);let o=_(this,uM)&&s.fontSubstitution||s.fontFamily;o=es.fontFamilyMap.get(o)||o;const l=Math.hypot(i[2],i[3]),u=l*q(p=es,Ol,P_e).call(p,o,s,_(this,j0));let c,h;a===0?(c=i[4],h=i[5]-u):(c=i[4]+u*Math.sin(a),h=i[5]-u*Math.cos(a));const d=t.style;d.left=`${(100*c/_(this,hM)).toFixed(2)}%`,d.top=`${(100*h/_(this,cM)).toFixed(2)}%`,d.setProperty("--font-height",`${l.toFixed(2)}px`),d.fontFamily=o,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,_(this,uM)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let f=!1;if(e.str.length>1)f=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const m=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);m!==g&&Math.max(m,g)/Math.min(m,g)>1.5&&(f=!0)}if(f&&(r.canvasWidth=s.vertical?e.height:e.width),_(this,pM).set(t,r),_(this,of).div=t,_(this,of).properties=r,q(this,rp,r9).call(this,_(this,of)),r.hasText&&_(this,No).append(t),r.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),_(this,No).append(m)}},r9=function(e){var s;const{div:t,properties:r,ctx:i}=e,{style:a}=t;if(r.canvasWidth!==0&&r.hasText){const{fontFamily:o}=a,{canvasWidth:l,fontSize:u}=r;q(s=es,Ol,i9).call(s,i,u*_(this,Pm),o);const{width:c}=i.measureText(t.textContent);c>0&&a.setProperty("--scale-x",l*_(this,Pm)/c)}r.angle!==0&&a.setProperty("--rotate",`${r.angle}deg`)},Ol=new WeakSet,aR=function(e=null){let t=_(this,$0).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),_(this,$0).set(e,t),_(this,gM).set(t,{size:0,family:""})}return t},i9=function(e,t,r){const i=_(this,gM).get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)},I_e=function(){if(_(this,v1)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),U(this,v1,e.getBoundingClientRect().height),e.remove()},P_e=function(e,t,r){const i=_(this,g1).get(e);if(i)return i;const a=q(this,Ol,aR).call(this,r);a.canvas.width=a.canvas.height=loe,q(this,Ol,i9).call(this,a,loe,e);const s=a.measureText(""),o=s.fontBoundingBoxAscent,l=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let u=.8;return o?u=o/(o+l):(Ea.platform.isFirefox&&wn("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),_(this,g1).set(e,u),u},$(es,Ol),$(es,g1,new Map),$(es,$0,new Map),$(es,gM,new WeakMap),$(es,v1,null),$(es,y1,new Set);let lC=es;const Cpt=100;function L_e(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new a9,{docId:t}=e,r=n.url?kft(n.url):null,i=n.data?Oft(n.data):null,a=n.httpHeaders||null,s=n.withCredentials===!0,o=n.password??null,l=n.range instanceof R_e?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let c=n.worker instanceof uC?n.worker:null;const h=n.verbosity,d=typeof n.docBaseUrl=="string"&&!aO(n.docBaseUrl)?n.docBaseUrl:null,f=eL(n.cMapUrl),p=n.cMapPacked!==!1,m=n.CMapReaderFactory||(ao?jft:Xse),g=eL(n.iccUrl),v=eL(n.standardFontDataUrl),b=n.StandardFontDataFactory||(ao?Wft:$se),S=eL(n.wasmUrl),w=n.WasmFactory||(ao?Xft:Yse),E=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,M=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!ao,I=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!ao&&(Ea.platform.isFirefox||!globalThis.chrome),D=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R=typeof n.disableFontFace=="boolean"?n.disableFontFace:ao,B=n.fontExtraProperties===!0,k=n.enableXfa===!0,V=n.ownerDocument||globalThis.document,G=n.disableRange===!0,F=n.disableStream===!0,X=n.disableAutoFetch===!0,j=n.pdfBug===!0,Q=n.CanvasFactory||(ao?Gft:zft),H=n.FilterFactory||(ao?Hft:Vft),K=n.enableHWA===!0,te=n.useWasm!==!1,Y=l?l.length:n.length??NaN,de=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!ao&&!R,ge=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(m===Xse&&b===$se&&w===Yse&&f&&v&&S&&lE(f,document.baseURI)&&lE(v,document.baseURI)&&lE(S,document.baseURI)),se=null;lft(h);const he={canvasFactory:new Q({ownerDocument:V,enableHWA:K}),filterFactory:new H({docId:t,ownerDocument:V}),cMapReaderFactory:ge?null:new m({baseUrl:f,isCompressed:p}),standardFontDataFactory:ge?null:new b({baseUrl:v}),wasmFactory:ge?null:new w({baseUrl:S})};c||(c=uC.create({verbosity:h,port:Mf.workerPort}),e._worker=c);const fe={docId:t,apiVersion:"5.4.624",data:i,password:o,disableAutoFetch:X,rangeChunkSize:u,length:Y,docBaseUrl:d,enableXfa:k,evaluatorOptions:{maxImageSize:T,disableFontFace:R,ignoreErrors:E,isEvalSupported:M,isOffscreenCanvasSupported:P,isImageDecoderSupported:I,canvasMaxAreaInBytes:D,fontExtraProperties:B,useSystemFonts:de,useWasm:te,useWorkerFetch:ge,cMapUrl:f,iccUrl:g,standardFontDataUrl:v,wasmUrl:S}},Ee={ownerDocument:V,pdfBug:j,styleElement:se,enableHWA:K,loadingParams:{disableAutoFetch:X,enableXfa:k}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const Ce=c.messageHandler.sendWithPromise("GetDocRequest",fe,i?[i.buffer]:null);let Re;if(l)Re=new cpt({pdfDataRangeTransport:l,disableRange:G,disableStream:F});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const He=lE(r)?ppt:ao?wpt:ypt;Re=new He({url:r,length:Y,httpHeaders:a,withCredentials:s,rangeChunkSize:u,disableRange:G,disableStream:F})}return Ce.then(He=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const pt=new gE(t,He,c.port),lt=new Ipt(pt,e,Re,Ee,he);e._transport=lt,pt.send("Ready",null)})}).catch(e._capability.reject),e}var Ak;const Ck=class Ck{constructor(){Fe(this,"_capability",Promise.withResolvers());Fe(this,"_transport",null);Fe(this,"_worker",null);Fe(this,"docId",`d${ma(Ck,Ak)._++}`);Fe(this,"destroyed",!1);Fe(this,"onPassword",null);Fe(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Ak=new WeakMap,$(Ck,Ak,0);let a9=Ck;var Y0,vM,yM,xM,_M;class R_e{constructor(e,t,r=!1,i=null){$(this,Y0,Promise.withResolvers());$(this,vM,[]);$(this,yM,[]);$(this,xM,[]);$(this,_M,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){_(this,_M).push(e)}addProgressListener(e){_(this,xM).push(e)}addProgressiveReadListener(e){_(this,yM).push(e)}addProgressiveDoneListener(e){_(this,vM).push(e)}onDataRange(e,t){for(const r of _(this,_M))r(e,t)}onDataProgress(e,t){_(this,Y0).promise.then(()=>{for(const r of _(this,xM))r(e,t)})}onDataProgressiveRead(e){_(this,Y0).promise.then(()=>{for(const t of _(this,yM))t(e)})}onDataProgressiveDone(){_(this,Y0).promise.then(()=>{for(const e of _(this,vM))e()})}transportReady(){_(this,Y0).resolve()}requestDataRange(e,t){_r("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Y0=new WeakMap,vM=new WeakMap,yM=new WeakMap,xM=new WeakMap,_M=new WeakMap;class Mpt{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return En(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var lf,bM,q0,bE;class Dpt{constructor(e,t,r,i=!1){$(this,q0);$(this,lf,!1);$(this,bM,oC.instance);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new Use:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new C_e,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new z2({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return En(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:i="display",annotationMode:a=im.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:c=null,printAnnotationStorage:h=null,isEditing:d=!1,recordOperations:f=!1,operationsFilter:p=null}){var I,D,R;(I=this._stats)==null||I.time("Overall");const m=this._transport.getRenderingIntent(i,a,h,d),{renderingIntent:g,cacheKey:v}=m;U(this,lf,!1),l||(l=this._transport.getOptionalContentConfig(g));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const S=!!(g&Sl.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(D=this._stats)==null||D.time("Page Request"),this._pumpOperatorList(m));const w=!!(this._pdfBug&&((R=globalThis.StepperManager)!=null&&R.enabled)),E=!this.recordedBBoxes&&(f||w),T=B=>{var k,V;if(b.renderTasks.delete(M),E){const G=(k=M.gfx)==null?void 0:k.dependencyTracker.take();G&&(M.stepper&&M.stepper.setOperatorBBoxes(G,M.gfx.dependencyTracker.takeDebugMetadata()),f&&(this.recordedBBoxes=G))}S&&U(this,lf,!0),q(this,q0,bE).call(this),B?(M.capability.reject(B),this._abortOperatorList({intentState:b,reason:B instanceof Error?B:new Error(B)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(V=globalThis.Stats)!=null&&V.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new s9({callback:T,params:{canvas:t,canvasContext:e,dependencyTracker:E?new Yft(t,b.operatorList.length,w):null,viewport:r,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!S,pdfBug:this._pdfBug,pageColors:c,enableHWA:this._transport.enableHWA,operationsFilter:p});(b.renderTasks||(b.renderTasks=new Set)).add(M);const P=M.task;return Promise.all([b.displayReadyCapability.promise,l]).then(([B,k])=>{var V;if(this.destroyed){T();return}if((V=this._stats)==null||V.time("Rendering"),!(k.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:B,optionalContentConfig:k}),M.operatorListChanged()}).catch(T),P}getOperatorList({intent:e="display",annotationMode:t=im.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var u;function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const s=this._transport.getRenderingIntent(e,t,r,i,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:_(this,bM).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>sC.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function a(){s.read().then(function({value:l,done:u}){if(u){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),a()},i)}const s=t.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),U(this,lf,!1),Promise.all(e)}cleanup(e=!1){U(this,lf,!0);const t=q(this,q0,bE).call(this);return e&&t&&this._stats&&(this._stats=new Use),t}_startRenderPage(e,t){var i,a;const r=this._intentStates.get(t);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=r.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&q(this,q0,bE).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:s}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:_(this,bM).getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:i},s).getReader(),u=this._intentStates.get(t);u.streamReader=l;const c=()=>{l.read().then(({value:h,done:d})=>{if(d){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),c())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const d of u.renderTasks)d.operatorListChanged();q(this,q0,bE).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};c()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof YW){let i=Cpt;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new Dg(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}lf=new WeakMap,bM=new WeakMap,q0=new WeakSet,bE=function(){if(!_(this,lf)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),U(this,lf,!1),!0};var Lm,dc,uf,K0,Mk,Z0,Q0,po,sR,N_e,k_e,SE,x1,oR;const ci=class ci{constructor({name:e=null,port:t=null,verbosity:r=uft()}={}){$(this,po);$(this,Lm,Promise.withResolvers());$(this,dc,null);$(this,uf,null);$(this,K0,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(_(ci,Q0).has(t))throw new Error("Cannot use more than one PDFWorker per port.");_(ci,Q0).set(t,this),q(this,po,N_e).call(this,t)}else q(this,po,k_e).call(this)}get promise(){return _(this,Lm).promise}get port(){return _(this,uf)}get messageHandler(){return _(this,dc)}destroy(){var e,t;this.destroyed=!0,(e=_(this,K0))==null||e.terminate(),U(this,K0,null),_(ci,Q0).delete(_(this,uf)),U(this,uf,null),(t=_(this,dc))==null||t.destroy(),U(this,dc,null)}static create(e){const t=_(this,Q0).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new ci(e)}static get workerSrc(){if(Mf.workerSrc)return Mf.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return En(this,"_setupFakeWorkerGlobal",(async()=>_(this,x1,oR)?_(this,x1,oR):(await import(this.workerSrc)).WorkerMessageHandler)())}};Lm=new WeakMap,dc=new WeakMap,uf=new WeakMap,K0=new WeakMap,Mk=new WeakMap,Z0=new WeakMap,Q0=new WeakMap,po=new WeakSet,sR=function(){_(this,Lm).resolve(),_(this,dc).send("configure",{verbosity:this.verbosity})},N_e=function(e){U(this,uf,e),U(this,dc,new gE("main","worker",e)),_(this,dc).on("ready",()=>{}),q(this,po,sR).call(this)},k_e=function(){if(_(ci,Z0)||_(ci,x1,oR)){q(this,po,SE).call(this);return}let{workerSrc:e}=ci;try{ci._isSameOrigin(window.location,e)||(e=ci._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new gE("main","worker",t),i=()=>{a.abort(),r.destroy(),t.terminate(),this.destroyed?_(this,Lm).reject(new Error("Worker was destroyed")):q(this,po,SE).call(this)},a=new AbortController;t.addEventListener("error",()=>{_(this,K0)||i()},{signal:a.signal}),r.on("test",o=>{if(a.abort(),this.destroyed||!o){i();return}U(this,dc,r),U(this,uf,t),U(this,K0,t),q(this,po,sR).call(this)}),r.on("ready",o=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{q(this,po,SE).call(this)}});const s=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};s();return}catch{rO("The worker has been disabled.")}q(this,po,SE).call(this)},SE=function(){_(ci,Z0)||(wn("Setting up fake worker."),U(ci,Z0,!0)),ci._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){_(this,Lm).reject(new Error("Worker was destroyed"));return}const t=new Uft;U(this,uf,t);const r=`fake${ma(ci,Mk)._++}`,i=new gE(r+"_worker",r,t);e.setup(i,t),U(this,dc,new gE(r,r+"_worker",t)),q(this,po,sR).call(this)}).catch(e=>{_(this,Lm).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},x1=new WeakSet,oR=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},$(ci,x1),$(ci,Mk,0),$(ci,Z0,!1),$(ci,Q0,new WeakMap),ao&&(U(ci,Z0,!0),Mf.workerSrc||(Mf.workerSrc="./pdf.worker.mjs")),ci._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},ci._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},ci.fromPort=e=>{if(bft("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ci.create(e)};let uC=ci;var ll,cf,hf,du,Rm,_1,df,ko,Pl,O_e,wE,lR;class Ipt{constructor(e,t,r,i,a){$(this,Pl);Fe(this,"downloadInfoCapability",Promise.withResolvers());$(this,ll,null);$(this,cf,new Map);$(this,hf,null);$(this,du,new Map);$(this,Rm,new Map);$(this,_1,new Map);$(this,df,null);$(this,ko,oC.instance);this.messageHandler=e,this.loadingTask=t,U(this,hf,r),this.commonObjs=new C_e,this.fontLoader=new Lft({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.enableHWA=i.enableHWA,this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),_(this,ko).addListener(q(this,Pl,O_e).bind(this))}get annotationStorage(){return En(this,"annotationStorage",new KW)}getRenderingIntent(e,t=im.ENABLE,r=null,i=!1,a=!1){let s=Sl.DISPLAY,o=zH;switch(e){case"any":s=Sl.ANY;break;case"display":break;case"print":s=Sl.PRINT;break;default:wn(`getRenderingIntent - invalid intent: ${e}`)}const l=s&Sl.PRINT&&r instanceof e_e?r:this.annotationStorage;switch(t){case im.DISABLE:s+=Sl.ANNOTATIONS_DISABLE;break;case im.ENABLE:break;case im.ENABLE_FORMS:s+=Sl.ANNOTATIONS_FORMS;break;case im.ENABLE_STORAGE:s+=Sl.ANNOTATIONS_STORAGE,o=l.serializable;break;default:wn(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(s+=Sl.IS_EDITING),a&&(s+=Sl.OPLIST);const{ids:u,hash:c}=l.modifiedIds,h=[s,o.hash,c];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=_(this,df))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of _(this,du).values())e.push(i._destroy());_(this,du).clear(),_(this,Rm).clear(),_(this,_1).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),_(this,cf).clear(),this.filterFactory.destroy(),lC.cleanup(),(i=_(this,hf))==null||i.cancelAllRequests(new Dg("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{xr(_(this,hf),"GetReader - no `BasePDFStream` instance available."),U(this,ll,_(this,hf).getFullReader()),_(this,ll).onProgress=a=>q(this,Pl,lR).call(this,a),i.onPull=()=>{_(this,ll).read().then(function({value:a,done:s}){if(s){i.close();return}xr(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{_(this,ll).cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async r=>{await _(this,ll).headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=_(this,ll);return i&&a&&(_(this,ll).onProgress=null),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(r,i)=>{xr(_(this,hf),"GetRangeReader - no `BasePDFStream` instance available.");const a=_(this,hf).getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){i.close();return}xr(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{_(this,ko).pagesNumber=r.numPages,this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new Mpt(r,this))}),e.on("DocException",r=>{t._capability.reject(Mo(r))}),e.on("PasswordRequest",r=>{U(this,df,Promise.withResolvers());try{if(!t.onPassword)throw Mo(r);const i=a=>{a instanceof Error?_(this,df).reject(a):_(this,df).resolve({password:a})};t.onPassword(i,r.code)}catch(i){_(this,df).reject(i)}return _(this,df).promise}),e.on("DataLoaded",r=>{q(this,Pl,lR).call(this,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;_(this,du).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,a])=>{var s;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const d=a.error;wn(`Error during font loading: ${d}`),this.commonObjs.resolve(r,d);break}const o=new VH(a),l=this._params.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new Rft(o,l,a.extra,a.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:c}=a;xr(c,"The imageRef must be defined.");for(const d of _(this,du).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===c)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":this.commonObjs.resolve(r,new Nft(a));break;case"Image":this.commonObjs.resolve(r,a);break;case"Pattern":const h=new HH(a);this.commonObjs.resolve(r,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,a,s])=>{var l;if(this.destroyed)return;const o=_(this,du).get(i);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=s==null?void 0:s.bitmap)==null||l.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{this.destroyed||q(this,Pl,lR).call(this,r)}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&wn("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=_(this,ll))==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>_(this,ko).pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=_(this,ko).getPageId(e)-1,i=_(this,Rm).get(t);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&_(this,_1).set(s.refStr,r);const o=new Dpt(t,s,this,this._params.pdfBug);return _(this,du).set(t,o),o});return _(this,Rm).set(t,a),a}async getPageIndex(e){if(!GH(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return _(this,ko).getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:_(this,ko).getPageId(e+1)-1,intent:t})}getFieldObjects(){return q(this,Pl,wE).call(this,"GetFieldObjects")}hasJSActions(){return q(this,Pl,wE).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return q(this,Pl,wE).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:_(this,ko).getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:_(this,ko).getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return q(this,Pl,wE).call(this,"GetOptionalContentConfig").then(t=>new upt(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=_(this,cf).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,s;return{info:i[0],metadata:i[1]?new opt(i[1]):null,contentDispositionFilename:((a=_(this,ll))==null?void 0:a.filename)??null,contentLength:((s=_(this,ll))==null?void 0:s.contentLength)??null,hasStructTree:i[2]}});return _(this,cf).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of _(this,du).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),_(this,cf).clear(),this.filterFactory.destroy(!0),lC.cleanup()}}cachedPageNumber(e){if(!GH(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,r=_(this,_1).get(t);return r>=0?_(this,ko).getPageNumber(r+1):null}}ll=new WeakMap,cf=new WeakMap,hf=new WeakMap,du=new WeakMap,Rm=new WeakMap,_1=new WeakMap,df=new WeakMap,ko=new WeakMap,Pl=new WeakSet,O_e=function(){const e=new Map,t=new Map;for(let r=0,i=_(this,ko).pagesNumber;r<i;r++){const a=_(this,ko).getPrevPageNumber(r+1)-1,s=_(this,du).get(a);s&&e.set(r,s);const o=_(this,Rm).get(a);o&&t.set(r,o)}U(this,du,e),U(this,Rm,t)},wE=function(e,t=null){const r=_(this,cf).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return _(this,cf).set(e,i),i},lR=function({loaded:e,total:t}){var r,i;(i=(r=this.loadingTask).onProgress)==null||i.call(r,{loaded:e,total:t,percent:us(Math.round(e/t*100),0,100)})};class Ppt{constructor(e){Fe(this,"_internalRenderTask",null);Fe(this,"onContinue",null);Fe(this,"onError",null);this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&(t==null?void 0:t.size)>0}}var Nm,J0;const e0=class e0{constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:d=null,enableHWA:f=!1,operationsFilter:p=null}){$(this,Nm,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=d,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ppt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=f,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,u;if(this.cancelled)return;if(this._canvas){if(_(e0,J0).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_(e0,J0).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:a,dependencyTracker:s}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Eb(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var r,i,a;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),_(this,Nm)&&(window.cancelAnimationFrame(_(this,Nm)),U(this,Nm,null)),_(e0,J0).delete(this._canvas),e||(e=new YW(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?U(this,Nm,window.requestAnimationFrame(()=>{U(this,Nm,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),_(e0,J0).delete(this._canvas),this.callback())))}};Nm=new WeakMap,J0=new WeakMap,$(e0,J0,new WeakSet);let s9=e0;const Lpt="5.4.624",Rpt="384c6208b";var ul,ey,b1,xa,SM,S1,ff,wM,km,fc,TM,zr,o9,l9,u9,jv,B_e,em;const Do=class Do{constructor({editor:e=null,uiManager:t=null}){$(this,zr);$(this,ul,null);$(this,ey,null);$(this,b1);$(this,xa,null);$(this,SM,!1);$(this,S1,!1);$(this,ff,null);$(this,wM);$(this,km,null);$(this,fc,null);var r,i;e?(U(this,S1,!1),U(this,ff,e)):U(this,S1,!0),U(this,fc,(e==null?void 0:e._uiManager)||t),U(this,wM,_(this,fc)._eventBus),U(this,b1,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=_(this,fc))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),_(Do,TM)||U(Do,TM,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return En(this,"_keyboardManager",new H2([[["Escape","mac+Escape"],Do.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Do.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Do.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Do.prototype._moveToPrevious],[["Home","mac+Home"],Do.prototype._moveToBeginning],[["End","mac+End"],Do.prototype._moveToEnd]]))}renderButton(){const e=U(this,ul,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",_(this,ff)&&(e.ariaControls=`${_(this,ff).id}_colorpicker_dropdown`);const t=_(this,fc)._signal;e.addEventListener("click",q(this,zr,jv).bind(this),{signal:t}),e.addEventListener("keydown",q(this,zr,u9).bind(this),{signal:t});const r=U(this,ey,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=_(this,b1),e.append(r),e}renderMainDropdown(){const e=U(this,xa,q(this,zr,o9).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===_(this,ul)){q(this,zr,jv).call(this,e);return}const t=e.target.getAttribute("data-color");t&&q(this,zr,l9).call(this,t,e)}_moveToNext(e){var t,r;if(!_(this,zr,em)){q(this,zr,jv).call(this,e);return}if(e.target===_(this,ul)){(t=_(this,xa).firstElementChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=_(this,xa))==null?void 0:t.firstElementChild)||e.target===_(this,ul)){_(this,zr,em)&&this._hideDropdownFromKeyboard();return}_(this,zr,em)||q(this,zr,jv).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!_(this,zr,em)){q(this,zr,jv).call(this,e);return}(t=_(this,xa).firstElementChild)==null||t.focus()}_moveToEnd(e){var t;if(!_(this,zr,em)){q(this,zr,jv).call(this,e);return}(t=_(this,xa).lastElementChild)==null||t.focus()}hideDropdown(){var e,t;(e=_(this,xa))==null||e.classList.add("hidden"),_(this,ul).ariaExpanded="false",(t=_(this,km))==null||t.abort(),U(this,km,null)}_hideDropdownFromKeyboard(){var e;if(!_(this,S1)){if(!_(this,zr,em)){(e=_(this,ff))==null||e.unselect();return}this.hideDropdown(),_(this,ul).focus({preventScroll:!0,focusVisible:_(this,SM)})}}updateColor(e){if(_(this,ey)&&(_(this,ey).style.backgroundColor=e),!_(this,xa))return;const t=_(this,fc).highlightColors.values();for(const r of _(this,xa).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=_(this,ul))==null||e.remove(),U(this,ul,null),U(this,ey,null),(t=_(this,xa))==null||t.remove(),U(this,xa,null)}};ul=new WeakMap,ey=new WeakMap,b1=new WeakMap,xa=new WeakMap,SM=new WeakMap,S1=new WeakMap,ff=new WeakMap,wM=new WeakMap,km=new WeakMap,fc=new WeakMap,TM=new WeakMap,zr=new WeakSet,o9=function(){const e=document.createElement("div"),t=_(this,fc)._signal;e.addEventListener("contextmenu",Bu,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),_(this,ff)&&(e.id=`${_(this,ff).id}_colorpicker_dropdown`);for(const[r,i]of _(this,fc).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",_(Do,TM)[r]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===_(this,b1),a.addEventListener("click",q(this,zr,l9).bind(this,i),{signal:t}),e.append(a)}return e.addEventListener("keydown",q(this,zr,u9).bind(this),{signal:t}),e},l9=function(e,t){t.stopPropagation(),_(this,wM).dispatch("switchannotationeditorparams",{source:this,type:ir.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},u9=function(e){Do._keyboardManager.exec(this,e)},jv=function(e){if(_(this,zr,em)){this.hideDropdown();return}if(U(this,SM,e.detail===0),_(this,km)||(U(this,km,new AbortController),window.addEventListener("pointerdown",q(this,zr,B_e).bind(this),{signal:_(this,fc).combinedSignal(_(this,km))})),_(this,ul).ariaExpanded="true",_(this,xa)){_(this,xa).classList.remove("hidden");return}const t=U(this,xa,q(this,zr,o9).call(this));_(this,ul).append(t)},B_e=function(e){var t;(t=_(this,xa))!=null&&t.contains(e.target)||this.hideDropdown()},em=function(){return _(this,xa)&&!_(this,xa).classList.contains("hidden")},$(Do,TM,null);let hk=Do;var wh,EM,w1,AM;const t0=class t0{constructor(e){$(this,wh,null);$(this,EM,null);$(this,w1,null);U(this,EM,e),U(this,w1,e._uiManager),_(t0,AM)||U(t0,AM,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(_(this,wh))return _(this,wh);const{editorType:e,colorType:t,color:r}=_(this,EM),i=U(this,wh,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",_(t0,AM)[e]),i.addEventListener("input",()=>{_(this,w1).updateParams(t,i.value)},{signal:_(this,w1)._signal}),i}update(e){_(this,wh)&&(_(this,wh).value=e)}destroy(){var e;(e=_(this,wh))==null||e.remove(),U(this,wh,null)}hideDropdown(){}};wh=new WeakMap,EM=new WeakMap,w1=new WeakMap,AM=new WeakMap,$(t0,AM,null);let dk=t0;function uoe(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function HT(n){return Math.max(0,Math.min(255,255*n))}class coe{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=HT(e),[e,e,e]}static G_HTML([e]){const t=uoe(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(HT)}static RGB_HTML(e){return`#${e.map(uoe).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[HT(1-Math.min(1,e+i)),HT(1-Math.min(1,r+i)),HT(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,a=1-t,s=1-r,o=Math.min(i,a,s);return["CMYK",i,a,s,o]}}class Npt{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){_r("Abstract method `_createSVG` called.")}}class fk extends Npt{_createSVG(e){return document.createElementNS(kd,e)}}const kpt=9,ex=new WeakSet,Opt=new Date().getTimezoneOffset()*60*1e3;class uU{static create(e){switch(e.data.annotationType){case ra.LINK:return new JW(e);case ra.TEXT:return new Fpt(e);case ra.WIDGET:switch(e.data.fieldType){case"Tx":return new Upt(e);case"Btn":return e.data.radioButton?new z_e(e):e.data.checkBox?new Vpt(e):new Hpt(e);case"Ch":return new Gpt(e);case"Sig":return new zpt(e)}return new gx(e);case ra.POPUP:return new h9(e);case ra.FREETEXT:return new W_e(e);case ra.LINE:return new Wpt(e);case ra.SQUARE:return new Xpt(e);case ra.CIRCLE:return new $pt(e);case ra.POLYLINE:return new X_e(e);case ra.CARET:return new qpt(e);case ra.INK:return new eX(e);case ra.POLYGON:return new Ypt(e);case ra.HIGHLIGHT:return new $_e(e);case ra.UNDERLINE:return new Kpt(e);case ra.SQUIGGLY:return new Zpt(e);case ra.STRIKEOUT:return new Qpt(e);case ra.STAMP:return new Y_e(e);case ra.FILEATTACHMENT:return new Jpt(e);default:return new Ti(e)}}}var ty,T1,fu,CM,c9;const oX=class oX{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){$(this,CM);$(this,ty,null);$(this,T1,!1);$(this,fu,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return oX._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,t=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:i}=this.data;let a=-1/0,s=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>s?(s=t[l+1],a=t[l+2]):t[l+1]===s&&(a=Math.max(a,t[l+2]));return[a,s]}if((r==null?void 0:r.length)>=1){for(const l of r)for(let u=0,c=l.length;u<c;u+=2)l[u+1]>s?(s=l[u+1],a=l[u]):l[u+1]===s&&(a=Math.max(a,l[u]));if(a!==1/0)return[a,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/r,e[1]=100*(e[1]-s)/i,e}get commentText(){var t,r,i;const{data:e}=this;return((r=(t=this.annotationStorage.getRawValue(`${iC}${e.id}`))==null?void 0:t.popup)==null?void 0:r.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${iC}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=_(this,fu))==null?void 0:e.popup)||this.popup)==null||t.remove(),U(this,fu,this.popup=null)}updateEdited(e){var a;if(!this.container)return;e.rect&&(_(this,ty)||U(this,ty,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&q(this,CM,c9).call(this,t);let i=((a=_(this,fu))==null?void 0:a.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=_(this,fu).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),U(this,fu,null),this.popup=null))}resetEdited(){var e;_(this,ty)&&(q(this,CM,c9).call(this,_(this,ty).rect),(e=_(this,fu))==null||e.popup.resetEdited(),U(this,ty,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof gx)&&!(this instanceof JW)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof h9){const{rotation:m}=t;return!t.hasOwnCanvas&&m!==0&&this.setRotation(m,a),a}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){s.borderWidth=`${t.borderStyle.width}px`;const m=t.borderStyle.horizontalCornerRadius,g=t.borderStyle.verticalCornerRadius;if(m>0||g>0){const b=`calc(${m}px * var(--total-scale-factor)) / calc(${g}px * var(--total-scale-factor))`;s.borderRadius=b}else if(this instanceof z_e){const b=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;s.borderRadius=b}switch(t.borderStyle.style){case V_.SOLID:s.borderStyle="solid";break;case V_.DASHED:s.borderStyle="dashed";break;case V_.BEVELED:wn("Unimplemented border style: beveled");break;case V_.INSET:wn("Unimplemented border style: inset");break;case V_.UNDERLINE:s.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(U(this,T1,!0),s.borderColor=It.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):s.borderWidth=0}const u=It.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:c,pageHeight:h,pageX:d,pageY:f}=i.rawDims;s.left=`${100*(u[0]-d)/c}%`,s.top=`${100*(u[1]-f)/h}%`;const{rotation:p}=t;return t.hasOwnCanvas||p===0?(s.width=`${100*o/c}%`,s.height=`${100*l/h}%`):this.setRotation(p,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),t.style.width=`${100*a/r}%`,t.style.height=`${100*s/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const a=i.detail[t],s=a[0],o=a.slice(1);i.target.style[r]=coe[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:coe[`${s}_rgb`](o)})};return En(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail)){const a=e[i]||r[i];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,a]of Object.entries(t)){const s=r[i];if(s){const o={detail:{[i]:a},target:e};s(o),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,a]=this.data.rect.map(m=>Math.fround(m));if(e.length===8){const[m,g,v,b]=e.subarray(2,6);if(i===m&&a===g&&t===v&&r===b)return}const{style:s}=this.container;let o;if(_(this,T1)){const{borderColor:m,borderWidth:g}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${g}">`],this.container.classList.add("hasBorder")}const l=i-t,u=a-r,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const d=c.createElement("defs");h.append(d);const f=c.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),d.append(f);for(let m=2,g=e.length;m<g;m+=8){const v=e[m],b=e[m+1],S=e[m+2],w=e[m+3],E=c.createElement("rect"),T=(S-t)/l,M=(a-b)/u,P=(v-S)/l,I=(b-w)/u;E.setAttribute("x",T),E.setAttribute("y",M),E.setAttribute("width",P),E.setAttribute("height",I),f.append(E),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${M}" width="${P}" height="${I}"/>`)}_(this,T1)&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(e=null){const{data:t}=this;let r,i;e?(r={str:e.text},i=e.date):(r=t.contentsObj,i=t.modificationDate),U(this,fu,new h9({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(_(this,fu)||this.popup||this.data.popupRef)}get extraPopupElement(){return _(this,fu)}render(){_r("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:o}of i){if(a===-1||s===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!ex.has(u)){wn(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:l,domElement:u})}return r}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==t&&ex.has(i)&&r.push({id:s,exportValue:a,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};ty=new WeakMap,T1=new WeakMap,fu=new WeakMap,CM=new WeakSet,c9=function(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-o)/a}%`,t.top=`${100*(s-e[3]+l)/s}%`,i===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};let Ti=oX;class Bpt extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var Al,Wv,F_e,U_e;class JW extends Ti{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});$(this,Al);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(r.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(q(this,Al,F_e).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(q(this,Al,U_e).call(this,i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(t,r,i=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&q(this,Al,Wv).call(this),i&&(t.title=i)}_bindNamedAction(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(t.title=i),q(this,Al,Wv).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(r.actions)){const s=i.get(a);s&&(t[s]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:a}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),q(this,Al,Wv).call(this)}_bindResetFormAction(t,r){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),q(this,Al,Wv).call(this),!this._fieldObjects){wn('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:a,refs:s,include:o}=r,l=[];if(a.length!==0||s.length!==0){const d=new Set(s);for(const f of a){const p=this._fieldObjects[f]||[];for(const{id:m}of p)d.add(m)}for(const f of Object.values(this._fieldObjects))for(const p of f)d.has(p.id)===o&&l.push(p)}else for(const d of Object.values(this._fieldObjects))l.push(...d);const u=this.annotationStorage,c=[];for(const d of l){const{id:f}=d;switch(c.push(f),d.type){case"text":{const m=d.defaultValue||"";u.setValue(f,{value:m});break}case"checkbox":case"radiobutton":{const m=d.defaultValue===d.exportValues;u.setValue(f,{value:m});break}case"combobox":case"listbox":{const m=d.defaultValue||"";u.setValue(f,{value:m});break}default:continue}const p=document.querySelector(`[data-element-id="${f}"]`);if(p){if(!ex.has(p)){wn(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;p.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}Al=new WeakSet,Wv=function(){this.container.setAttribute("data-internal-link","")},F_e=function(t,r,i="",a=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:i&&(t.title=i),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(r.content,r.filename,a),!1},q(this,Al,Wv).call(this)},U_e=function(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(t.title=i),q(this,Al,Wv).call(this)};class Fpt extends Ti{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class gx extends Ti{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ea.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,a){r.includes("mouse")?e.addEventListener(r,s=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(r,s=>{var o;if(r==="blur"){if(!t.focused||!s.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}a&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}}))})}_setEventListeners(e,t,r,i){var a,s,o;for(const[l,u]of r)(u==="Action"||(a=this.data.actions)!=null&&a[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,i),u==="Focus"&&!((s=this.data.actions)!=null&&s.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":It.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||kpt,a=e.style;let s;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(u/(nU*i))||1,h=u/c;s=Math.min(i,l(h/nU))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(i,l(u/nU))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=It.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Upt extends gx{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=r),a.setValue(s.id,{[i]:r})}render(){var i,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let o=s.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=s.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),ex.add(r),this.contentElement=r,r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:d,timeStep:f}=this.data,p=!!d&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",g=>{e.setValue(t,{value:g.target.value}),this.setPropertyOnSiblings(r,"value",g.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",g=>{const v=this.data.defaultFieldValue??"";r.value=c.userValue=v,c.formattedValue=null});let m=g=>{const{formattedValue:v}=c;v!=null&&(g.target.value=v),g.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var S;if(c.focused)return;const{target:b}=v;if(p&&(b.type=d,f&&(b.step=f)),c.userValue){const w=c.userValue;if(p)if(d==="time"){const E=new Date(w),T=[E.getHours(),E.getMinutes(),E.getSeconds()];b.value=T.map(M=>M.toString().padStart(2,"0")).join(":")}else b.value=new Date(w-Opt).toISOString().split(d==="date"?"T":".",1)[0];else b.value=w}c.lastCommittedValue=b.value,c.commitKey=1,(S=this.data.actions)!=null&&S.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const b={value(S){c.userValue=S.detail.value??"",p||e.setValue(t,{value:c.userValue.toString()}),S.target.value=c.userValue},formattedValue(S){const{formattedValue:w}=S.detail;c.formattedValue=w,w!=null&&S.target!==document.activeElement&&(S.target.value=w);const E={formattedValue:w};p&&(E.value=w),e.setValue(t,E)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{var M;const{charLimit:w}=S.detail,{target:E}=S;if(w===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",w);let T=c.userValue;!T||T.length<=w||(T=T.slice(0,w),E.value=c.userValue=T,e.setValue(t,{value:T}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(b,v)}),r.addEventListener("keydown",v=>{var w;c.commitKey=1;let b=-1;if(v.key==="Escape"?b=0:v.key==="Enter"&&!this.data.multiLine?b=2:v.key==="Tab"&&(c.commitKey=3),b===-1)return;const{value:S}=v.target;c.lastCommittedValue!==S&&(c.lastCommittedValue=S,c.userValue=S,(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:b,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const g=m;m=null,r.addEventListener("blur",v=>{var w,E;if(!c.focused||!v.relatedTarget)return;(w=this.data.actions)!=null&&w.Blur||(c.focused=!1);const{target:b}=v;let{value:S}=b;if(p){if(S&&d==="time"){const T=S.split(":").map(M=>parseInt(M,10));S=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),b.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();b.type="text"}c.userValue=S,c.lastCommittedValue!==S&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:S,willCommit:!0,commitKey:c.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),g(v)}),(a=this.data.actions)!=null&&a.Keystroke&&r.addEventListener("beforeinput",v=>{var I;c.lastCommittedValue=null;const{data:b,target:S}=v,{value:w,selectionStart:E,selectionEnd:T}=S;let M=E,P=T;switch(v.inputType){case"deleteWordBackward":{const D=w.substring(0,E).match(/\w*[^\w]*$/);D&&(M-=D[0].length);break}case"deleteWordForward":{const D=w.substring(E).match(/^[^\w]*\w*/);D&&(P+=D[0].length);break}case"deleteContentBackward":E===T&&(M-=1);break;case"deleteContentForward":E===T&&(P+=1);break}v.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,change:b||"",willCommit:!1,selStart:M,selEnd:P}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(m&&r.addEventListener("blur",m),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class zpt extends gx{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Vpt extends gx{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return ex.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const u of this._getElementsByName(o,r)){const c=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(r,{value:l})}),a.addEventListener("resetform",s=>{const o=t.defaultFieldValue||"Off";s.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class z_e extends gx{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const s of this._getElementsByName(t.fieldName,r))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(ex.add(a),a.setAttribute("data-element-id",r),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:l}=s.target;for(const u of this._getElementsByName(o,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:l})}),a.addEventListener("resetform",s=>{const o=t.defaultFieldValue;s.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const s=t.buttonValue;a.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const c=s===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const d=c&&h.id===r;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Hpt extends JW{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class Gpt extends gx{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");ex.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",c=>{const h=this.data.defaultFieldValue;for(const d of i.options)d.selected=d.value===h});for(const c of this.data.options){const h=document.createElement("option");h.textContent=c.displayValue,h.value=c.exportValue,r.value.includes(c.exportValue)&&(h.setAttribute("selected",!0),a=!1),i.append(h)}let s=null;if(a){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),i.prepend(c),s=()=>{c.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=c=>{const h=c?"value":"textContent",{options:d,multiple:f}=i;return f?Array.prototype.filter.call(d,p=>p.selected).map(p=>p[h]):d.selectedIndex===-1?null:d[d.selectedIndex][h]};let l=o(!1);const u=c=>{const h=c.target.options;return Array.prototype.map.call(h,d=>({displayValue:d.textContent,exportValue:d.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",c=>{const h={value(d){s==null||s();const f=d.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(const m of i.options)m.selected=p.has(m.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(d){i.multiple=!0},remove(d){const f=i.options,p=d.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,g=>g.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},clear(d){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(d){const{index:f,displayValue:p,exportValue:m}=d.detail.insert,g=i.children[f],v=document.createElement("option");v.textContent=p,v.value=m,g?g.before(v):i.append(v),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},items(d){const{items:f}=d.detail;for(;i.length!==0;)i.remove(0);for(const p of f){const{displayValue:m,exportValue:g}=p,v=document.createElement("option");v.textContent=m,v.value=g,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(d)}),l=o(!1)},indices(d){const f=new Set(d.detail.indices);for(const p of d.target.options)p.selected=f.has(p.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(d){d.target.disabled=!d.detail.editable}};this._dispatchEventFromSandbox(h,c)}),i.addEventListener("input",c=>{var f;const h=o(!0),d=o(!1);e.setValue(t,{value:h}),c.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:d,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):i.addEventListener("input",function(c){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var MM,d9;class h9 extends Ti{constructor(t){const{data:r,elements:i,parent:a}=t,s=!!a._commentManager;super(t,{isRenderable:!s&&Ti._hasPopupData(r)});$(this,MM);if(this.elements=i,s&&Ti._hasPopupData(r)){const o=this.popup=q(this,MM,d9).call(this);for(const l of i)l.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const r=this.popup=q(this,MM,d9).call(this),i=[];for(const a of this.elements)a.popup=r,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${cb}${a}`).join(",")),this.container}}MM=new WeakSet,d9=function(){return new jpt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var cl,Om,Dk,Ik,E1,A1,Ci,Th,Bm,ny,C1,M1,Eh,hl,pf,mf,Mi,gf,Fm,DM,vf,D1,ry,Um,Ua,zm,zn,uR,f9,p9,m9,cR,g9,V_e,H_e,G_e,j_e,hR,dR,v9;class jpt{constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:a,contentsObj:s,richText:o,parent:l,rect:u,parentRect:c,open:h,commentManager:d=null}){$(this,zn);$(this,cl,null);$(this,Om,q(this,zn,G_e).bind(this));$(this,Dk,q(this,zn,v9).bind(this));$(this,Ik,q(this,zn,dR).bind(this));$(this,E1,q(this,zn,hR).bind(this));$(this,A1,null);$(this,Ci,null);$(this,Th,null);$(this,Bm,null);$(this,ny,null);$(this,C1,null);$(this,M1,null);$(this,Eh,!1);$(this,hl,null);$(this,pf,null);$(this,mf,null);$(this,Mi,null);$(this,gf,null);$(this,Fm,null);$(this,DM,null);$(this,vf,null);$(this,D1,null);$(this,ry,null);$(this,Um,!1);$(this,Ua,null);$(this,zm,null);U(this,Ci,e),U(this,D1,i),U(this,Th,s),U(this,vf,o),U(this,C1,l),U(this,A1,t),U(this,DM,u),U(this,M1,c),U(this,ny,r),U(this,cl,d),U(this,Ua,r[0]),U(this,Bm,ak.toDateObject(a)),this.trigger=r.flatMap(f=>f.getElementsToTriggerPopup()),d||(q(this,zn,uR).call(this),_(this,Ci).hidden=!0,h&&q(this,zn,hR).call(this))}renderCommentButton(){if(_(this,Mi)){_(this,Mi).parentNode||_(this,Ua).container.after(_(this,Mi));return}if(_(this,gf)||q(this,zn,f9).call(this),!_(this,gf))return;const{signal:e}=U(this,pf,new AbortController),t=_(this,Ua).hasOwnCommentButton,r=()=>{_(this,cl).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{_(this,cl).toggleCommentPopup(this,!1,!0,!t)},a=()=>{_(this,cl).toggleCommentPopup(this,!1,!1)};if(t){U(this,Mi,_(this,Ua).container);for(const s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",_(this,Om),{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),s.classList.add("popupTriggerArea")}else{const s=U(this,Mi,document.createElement("button"));s.className="annotationCommentButton";const o=_(this,Ua).container;s.style.zIndex=o.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),q(this,zn,m9).call(this),q(this,zn,p9).call(this),s.addEventListener("keydown",_(this,Om),{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),o.after(s)}}get commentButtonColor(){const{color:e,opacity:t}=_(this,Ua).commentData;return e?_(this,C1)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=_(this,Mi))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:i,modificationDate:a}=_(this,Ua).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:i,modificationDate:a}}get elementBeforePopup(){return _(this,Mi)}get comment(){return _(this,zm)||U(this,zm,_(this,Ua).commentText),_(this,zm)}set comment(e){e!==this.comment&&(_(this,Ua).commentText=U(this,zm,e))}focus(){var e;(e=_(this,Ua).container)==null||e.focus()}get parentBoundingClientRect(){return _(this,Ua).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){_(this,Mi)&&(_(this,Mi).classList.toggle("selected",e),_(this,Mi).ariaExpanded=t)}setSelectedCommentButton(e){_(this,Mi).classList.toggle("selected",e)}get commentPopupPosition(){if(_(this,Fm))return _(this,Fm);const{x:e,y:t,height:r}=_(this,Mi).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=_(this,Ua).layer.getBoundingClientRect();return[(e-i)/s,(t+r-a)/o]}set commentPopupPosition(e){U(this,Fm,e)}hasDefaultPopupPosition(){return _(this,Fm)===null}get commentButtonPosition(){return _(this,gf)}get commentButtonWidth(){return _(this,Mi).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=_(this,Fm)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:a,y:s,width:o,height:l}=i;_(this,cl).showDialog(null,this,a+t*o,s+r*l,{...e,parentDimensions:i})}render(){var r,i;if(_(this,hl))return;const e=U(this,hl,document.createElement("div"));if(e.className="popup",_(this,A1)){const a=e.style.outlineColor=It.makeHexColor(..._(this,A1));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=_(this,D1))!=null&&r.str){const a=document.createElement("span");a.className="title",t.append(a),{dir:a.dir,str:a.textContent}=_(this,D1)}if(e.append(t),_(this,Bm)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:_(this,Bm).valueOf()})),a.dateTime=_(this,Bm).toISOString(),t.append(a)}vxe({html:_(this,zn,cR)||_(this,Th).str,dir:(i=_(this,Th))==null?void 0:i.dir,className:"popupContent"},e),_(this,Ci).append(e)}updateEdited({rect:e,popup:t,deleted:r}){var i;if(_(this,cl)){r?(this.remove(),U(this,zm,null)):t&&(t.deleted?this.remove():(q(this,zn,m9).call(this),U(this,zm,t.text))),e&&(U(this,gf,null),q(this,zn,f9).call(this),q(this,zn,p9).call(this));return}if(r||t!=null&&t.deleted){this.remove();return}q(this,zn,uR).call(this),_(this,ry)||U(this,ry,{contentsObj:_(this,Th),richText:_(this,vf)}),e&&U(this,mf,null),t&&t.text&&(U(this,vf,q(this,zn,H_e).call(this,t.text)),U(this,Bm,ak.toDateObject(t.date)),U(this,Th,null)),(i=_(this,hl))==null||i.remove(),U(this,hl,null)}resetEdited(){var e;_(this,ry)&&({contentsObj:ma(this,Th)._,richText:ma(this,vf)._}=_(this,ry),U(this,ry,null),(e=_(this,hl))==null||e.remove(),U(this,hl,null),U(this,mf,null))}remove(){var e,t,r;if((e=_(this,pf))==null||e.abort(),U(this,pf,null),(t=_(this,hl))==null||t.remove(),U(this,hl,null),U(this,Um,!1),U(this,Eh,!1),(r=_(this,Mi))==null||r.remove(),U(this,Mi,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){U(this,Um,this.isVisible),_(this,Um)&&(_(this,Ci).hidden=!0)}maybeShow(){_(this,cl)||(q(this,zn,uR).call(this),_(this,Um)&&(_(this,hl)||q(this,zn,dR).call(this),U(this,Um,!1),_(this,Ci).hidden=!1))}get isVisible(){return _(this,cl)?!1:_(this,Ci).hidden===!1}}cl=new WeakMap,Om=new WeakMap,Dk=new WeakMap,Ik=new WeakMap,E1=new WeakMap,A1=new WeakMap,Ci=new WeakMap,Th=new WeakMap,Bm=new WeakMap,ny=new WeakMap,C1=new WeakMap,M1=new WeakMap,Eh=new WeakMap,hl=new WeakMap,pf=new WeakMap,mf=new WeakMap,Mi=new WeakMap,gf=new WeakMap,Fm=new WeakMap,DM=new WeakMap,vf=new WeakMap,D1=new WeakMap,ry=new WeakMap,Um=new WeakMap,Ua=new WeakMap,zm=new WeakMap,zn=new WeakSet,uR=function(){var t;if(_(this,pf))return;U(this,pf,new AbortController);const{signal:e}=_(this,pf);for(const r of this.trigger)r.addEventListener("click",_(this,E1),{signal:e}),r.addEventListener("pointerenter",_(this,Ik),{signal:e}),r.addEventListener("pointerleave",_(this,Dk),{signal:e}),r.classList.add("popupTriggerArea");for(const r of _(this,ny))(t=r.container)==null||t.addEventListener("keydown",_(this,Om),{signal:e})},f9=function(){const e=_(this,ny).find(t=>t.hasCommentButton);e&&U(this,gf,e._normalizePoint(e.commentButtonPosition))},p9=function(){if(_(this,Ua).extraPopupElement&&!_(this,Ua).editor)return;_(this,Mi)||this.renderCommentButton();const[e,t]=_(this,gf),{style:r}=_(this,Mi);r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`},m9=function(){_(this,Ua).extraPopupElement||(_(this,Mi)||this.renderCommentButton(),_(this,Mi).style.backgroundColor=this.commentButtonColor||"")},cR=function(){const e=_(this,vf),t=_(this,Th);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&_(this,vf).html||null},g9=function(){var e,t,r;return((r=(t=(e=_(this,zn,cR))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},V_e=function(){var e,t,r;return((r=(t=(e=_(this,zn,cR))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},H_e=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:_(this,zn,V_e),fontSize:_(this,zn,g9)?`calc(${_(this,zn,g9)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:i});return r},G_e=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&_(this,Eh))&&q(this,zn,hR).call(this)},j_e=function(){if(_(this,mf)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:a}}}=_(this,C1);let s=!!_(this,M1),o=s?_(this,M1):_(this,DM);for(const p of _(this,ny))if(!o||It.intersect(p.data.rect,o)!==null){o=p.data.rect,s=!0;break}const l=It.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=s?o[2]-o[0]+5:0,h=l[0]+c,d=l[1];U(this,mf,[100*(h-i)/t,100*(d-a)/r]);const{style:f}=_(this,Ci);f.left=`${_(this,mf)[0]}%`,f.top=`${_(this,mf)[1]}%`},hR=function(){if(_(this,cl)){_(this,cl).toggleCommentPopup(this,!1);return}U(this,Eh,!_(this,Eh)),_(this,Eh)?(q(this,zn,dR).call(this),_(this,Ci).addEventListener("click",_(this,E1)),_(this,Ci).addEventListener("keydown",_(this,Om))):(q(this,zn,v9).call(this),_(this,Ci).removeEventListener("click",_(this,E1)),_(this,Ci).removeEventListener("keydown",_(this,Om)))},dR=function(){_(this,hl)||this.render(),this.isVisible?_(this,Eh)&&_(this,Ci).classList.add("focused"):(q(this,zn,j_e).call(this),_(this,Ci).hidden=!1,_(this,Ci).style.zIndex=parseInt(_(this,Ci).style.zIndex)+1e3)},v9=function(){_(this,Ci).classList.remove("focused"),!(_(this,Eh)||!this.isVisible)&&(_(this,Ci).hidden=!0,_(this,Ci).style.zIndex=parseInt(_(this,Ci).style.zIndex)-1e3)};class W_e extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Pn.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var IM;class Wpt extends Ti{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,IM,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),s=U(this,IM,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return _(this,IM)}addHighlightArea(){this.container.classList.add("highlightArea")}}IM=new WeakMap;var PM;class Xpt extends Ti{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,PM,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),s=t.borderStyle.width,o=U(this,PM,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",r-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return _(this,PM)}addHighlightArea(){this.container.classList.add("highlightArea")}}PM=new WeakMap;var LM;class $pt extends Ti{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,LM,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),s=t.borderStyle.width,o=U(this,LM,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",i/2),o.setAttribute("rx",r/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return _(this,LM)}addHighlightArea(){this.container.classList.add("highlightArea")}}LM=new WeakMap;var RM;class X_e extends Ti{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,RM,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:i,popupRef:a},width:s,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(s,o,!0);let u=[];for(let h=0,d=r.length;h<d;h+=2){const f=r[h]-t[0],p=t[3]-r[h+1];u.push(`${f},${p}`)}u=u.join(" ");const c=U(this,RM,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return _(this,RM)}addHighlightArea(){this.container.classList.add("highlightArea")}}RM=new WeakMap;class Ypt extends X_e{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qpt extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var NM,iy,kM,y9;class eX extends Ti{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});$(this,kM);$(this,NM,null);$(this,iy,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Pn.HIGHLIGHT:Pn.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:i,borderStyle:a,popupRef:s}}=this,{transform:o,width:l,height:u}=q(this,kM,y9).call(this,r,t),c=this.svgFactory.create(l,u,!0),h=U(this,NM,this.svgFactory.createElement("svg:g"));c.append(h),h.setAttribute("stroke-width",a.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let d=0,f=i.length;d<f;d++){const p=this.svgFactory.createElement(this.svgElementName);_(this,iy).push(p),p.setAttribute("points",i[d].join(",")),h.append(p)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:i,rect:a}=t,s=_(this,NM);if(r>=0&&s.setAttribute("stroke-width",r||1),i)for(let o=0,l=_(this,iy).length;o<l;o++)_(this,iy)[o].setAttribute("points",i[o].join(","));if(a){const{transform:o,width:l,height:u}=q(this,kM,y9).call(this,this.data.rotation,a);s.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return _(this,iy)}addHighlightArea(){this.container.classList.add("highlightArea")}}NM=new WeakMap,iy=new WeakMap,kM=new WeakSet,y9=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class $_e extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Pn.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Kpt extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Zpt extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Qpt extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class Y_e extends Ti{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Pn.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var OM,BM,x9;class Jpt extends Ti{constructor(t){var i;super(t,{isRenderable:!0});$(this,BM);$(this,OM,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",q(this,BM,x9).bind(this)),U(this,OM,i);const{isMac:a}=Ea.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&q(this,BM,x9).call(this)}),!r.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return _(this,OM)}addHighlightArea(){this.container.classList.add("highlightArea")}}OM=new WeakMap,BM=new WeakSet,x9=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var ay,sy,I1,Vm,FM,oy,dl,UM,Vf,fR,b9;const lX=class lX{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:o,commentManager:l,linkService:u,annotationStorage:c}){$(this,Vf);$(this,ay,null);$(this,sy,null);$(this,I1,null);$(this,Vm,new Map);$(this,FM,null);$(this,oy,null);$(this,dl,[]);$(this,UM,!1);this.div=e,U(this,ay,t),U(this,sy,r),U(this,FM,o||null),U(this,oy,u||null),U(this,I1,c||new KW),this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return _(this,Vm).size>0}async render(e){var o;const{annotations:t}=e,r=this.div;Qy(r,this.viewport);const i=new Map,a=[],s={data:null,layer:r,linkService:_(this,oy),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new fk,annotationStorage:_(this,I1),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const u=l.annotationType===ra.POPUP;if(u){const d=i.get(l.id);if(!d)continue;if(!this._commentManager){a.push(l);continue}s.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;s.data=l;const c=uU.create(s);if(!c.isRenderable)continue;if(!u&&(_(this,dl).push(c),l.popupRef)){const d=i.get(l.popupRef);d?d.push(c):i.set(l.popupRef,[c])}const h=c.render();l.hidden&&(h.style.visibility="hidden"),c._isEditable&&(_(this,Vm).set(c.data.id,c),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(c))}await q(this,Vf,fR).call(this);for(const l of a){const u=s.elements=i.get(l.id);s.data=l;const c=uU.create(s);if(!c.isRenderable)continue;const h=c.render();c.contentElement.id=`${cb}${l.id}`,l.hidden&&(h.style.visibility="hidden"),u.at(-1).container.after(h)}q(this,Vf,b9).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:_(this,oy),svgFactory:new fk,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=lX._defaultBorderStyle),t.data=r;const i=uU.create(t);i.isRenderable&&(i.render(),i.contentElement.id=`${cb}${r.id}`,_(this,dl).push(i))}await q(this,Vf,fR).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Qy(t,{rotation:e.rotation}),q(this,Vf,b9).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(_(this,Vm).values())}getEditableAnnotation(e){return _(this,Vm).get(e)}addFakeAnnotation(e){const{div:t}=this,{id:r,rotation:i}=e,a=new Bpt({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:_(this,oy),annotationStorage:_(this,I1)});return a.render(),a.contentElement.id=`${cb}${r}`,a.createOrUpdatePopup(),_(this,dl).push(a),a}removeAnnotation(e){var i;const t=_(this,dl).findIndex(a=>a.data.id===e);if(t<0)return;const[r]=_(this,dl).splice(t,1);(i=_(this,ay))==null||i.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);q(this,Vf,fR).call(this)}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return En(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:V_.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ay=new WeakMap,sy=new WeakMap,I1=new WeakMap,Vm=new WeakMap,FM=new WeakMap,oy=new WeakMap,dl=new WeakMap,UM=new WeakMap,Vf=new WeakSet,fR=async function(){var r,i,a;if(_(this,dl).length===0)return;this.div.replaceChildren();const e=[];if(!_(this,UM)){U(this,UM,!0);for(const{contentElement:s,data:{id:o}}of _(this,dl)){const l=s.id=`${cb}${o}`;e.push((r=_(this,FM))==null?void 0:r.getAriaAttributes(l).then(u=>{if(u)for(const[c,h]of u)s.setAttribute(c,h)}))}}_(this,dl).sort(({data:{rect:[s,o,l,u]}},{data:{rect:[c,h,d,f]}})=>{if(s===l&&o===u)return 1;if(c===d&&h===f)return-1;const p=u,m=o,g=(o+u)/2,v=f,b=h,S=(h+f)/2;if(g>=v&&S<=m)return-1;if(S>=p&&g<=b)return 1;const w=(s+l)/2,E=(c+d)/2;return w-E});const t=document.createDocumentFragment();for(const s of _(this,dl))t.append(s.container),this._commentManager?(a=((i=s.extraPopupElement)==null?void 0:i.popup)||s.popup)==null||a.renderCommentButton():s.extraPopupElement&&t.append(s.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),_(this,ay))for(const s of _(this,dl))_(this,ay).addPointerInTextLayer(s.contentElement,!1)},b9=function(){var t;if(!_(this,sy))return;const e=this.div;for(const[r,i]of _(this,sy)){const a=e.querySelector(`[data-annotation-id="${r}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):a.append(i);const o=_(this,Vm).get(r);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,a.id,i),o._hasNoCanvas=!1):o.canvas=i)}_(this,sy).clear()};let _9=lX;const sL=/\r\n?|\n/g;var fl,zM,ly,pl,la,q_e,K_e,Z_e,pR,Hf,mR,gR,Q_e,w9,J_e;const ai=class ai extends ti{constructor(t){super({...t,name:"freeTextEditor"});$(this,la);$(this,fl,"");$(this,zM,`${this.id}-editor`);$(this,ly,null);$(this,pl);Fe(this,"_colorPicker",null);this.color=t.color||ai._defaultColor||ti._defaultLineColor,U(this,pl,t.fontSize||ai._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const t=ai.prototype,r=s=>s.isEmpty(),i=Jy.TRANSLATE_SMALL,a=Jy.TRANSLATE_BIG;return En(this,"_keyboardManager",new H2([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:r}]]))}static initialize(t,r){ti.initialize(t,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case ir.FREETEXT_SIZE:ai._defaultFontSize=r;break;case ir.FREETEXT_COLOR:ai._defaultColor=r;break}}updateParams(t,r){switch(t){case ir.FREETEXT_SIZE:q(this,la,q_e).call(this,r);break;case ir.FREETEXT_COLOR:q(this,la,K_e).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ir.FREETEXT_SIZE,ai._defaultFontSize],[ir.FREETEXT_COLOR,ai._defaultColor||ti._defaultLineColor]]}get propertiesToUpdate(){return[[ir.FREETEXT_SIZE,_(this,pl)],[ir.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new dk(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ir.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-ai._internalPadding*t,-(ai._internalPadding+_(this,pl))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),U(this,ly,new AbortController);const t=this._uiManager.combinedSignal(_(this,ly));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",_(this,zM)),this._isDraggable=!0,(t=_(this,ly))==null||t.abort(),U(this,ly,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=_(this,fl),r=U(this,fl,q(this,la,Z_e).call(this).trimEnd());if(t===r)return;const i=a=>{if(U(this,fl,a),!a){this.remove();return}q(this,la,gR).call(this),this._uiManager.rebuild(this),q(this,la,pR).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(t)},mustExec:!1}),q(this,la,pR).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){ai._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",_(this,zM)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${_(this,pl)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,h]=this.pageDimensions,[d,f]=this.pageTranslation;let p,m;switch(this.rotation){case 0:p=t+(o[0]-d)/c,m=r+this.height-(o[1]-f)/h;break;case 90:p=t+(o[0]-d)/c,m=r-(o[1]-f)/h,[l,u]=[u,-l];break;case 180:p=t-this.width+(o[0]-d)/c,m=r-(o[1]-f)/h,[l,u]=[-l,-u];break;case 270:p=t+(o[0]-d-this.height*h)/c,m=r+(o[1]-f-this.width*c)/h,[l,u]=[-u,l];break}this.setAt(p*a,m*s,l,u)}else this._moveAfterPaste(t,r);q(this,la,gR).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var p,m,g;const r=t.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=q(p=ai,Hf,w9).call(p,r.getData("text")||"").replaceAll(sL,`
`);if(!a)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!a.includes(`
`)){o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:l,startOffset:u}=o,c=[],h=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(sL,"")),v!==this.editorDiv){let b=c;for(const S of this.editorDiv.childNodes){if(S===v){b=h;continue}b.push(q(m=ai,Hf,mR).call(m,S))}}c.push(l.nodeValue.slice(0,u).replaceAll(sL,""))}else if(l===this.editorDiv){let v=c,b=0;for(const S of this.editorDiv.childNodes)b++===u&&(v=h),v.push(q(g=ai,Hf,mR).call(g,S))}U(this,fl,`${c.join(`
`)}${a}${h.join(`
`)}`),q(this,la,gR).call(this);const d=new Range;let f=Math.sumPrecise(c.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(f<=b){d.setStart(v,f),d.setEnd(v,f);break}f-=b}s.removeAllRanges(),s.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=ai._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,i){var o;let a=null;if(t instanceof W_e){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:h,id:d,popupRef:f,richText:p,contentsObj:m,creationDate:g,modificationDate:v},textContent:b,textPosition:S,parent:{page:{pageNumber:w}}}=t;if(!b||b.length===0)return null;a=t={annotationType:Pn.FREETEXT,color:Array.from(u),fontSize:l,value:b.join(`
`),position:S,pageIndex:w-1,rect:c.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:f,comment:(m==null?void 0:m.str)||null,richText:p,creationDate:g,modificationDate:v}}const s=await super.deserialize(t,r,i);return U(s,pl,t.fontSize),s.color=It.makeHexColor(...t.color),U(s,fl,q(o=ai,Hf,w9).call(o,t.value)),s._initialData=a,t.comment&&s.setCommentData(t),s}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=ti._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:r,fontSize:_(this,pl),value:q(this,la,Q_e).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!q(this,la,J_e).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${_(this,pl)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(const a of _(this,fl).split(`
`)){const s=document.createElement("div");s.append(a?document.createTextNode(a):document.createElement("br")),r.append(s)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:_(this,fl)}}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};fl=new WeakMap,zM=new WeakMap,ly=new WeakMap,pl=new WeakMap,la=new WeakSet,q_e=function(t){const r=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-_(this,pl))*this.parentScale),U(this,pl,a),q(this,la,pR).call(this)},i=_(this,pl);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},K_e=function(t){const r=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Z_e=function(){var i;const t=[];this.editorDiv.normalize();let r=null;for(const a of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(q(i=ai,Hf,mR).call(i,a)),r=a);return t.join(`
`)},pR=function(){const[t,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:s}=this,o=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/r):(this.width=i.height/t,this.height=i.width/r),this.fixAndSetPosition()},Hf=new WeakSet,mR=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(sL,"")},gR=function(){if(this.editorDiv.replaceChildren(),!!_(this,fl))for(const t of _(this,fl).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},Q_e=function(){return _(this,fl).replaceAll(""," ")},w9=function(t){return t.replaceAll(" ","")},J_e=function(t){const{value:r,fontSize:i,color:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==i||t.color.some((o,l)=>o!==a[l])||t.pageIndex!==s},$(ai,Hf),Fe(ai,"_freeTextDefaultContent",""),Fe(ai,"_internalPadding",0),Fe(ai,"_defaultColor",null),Fe(ai,"_defaultFontSize",10),Fe(ai,"_type","freetext"),Fe(ai,"_editorType",Pn.FREETEXT);let S9=ai;class Bt{toSVGPath(){_r("Abstract method `toSVGPath` must be implemented.")}get box(){_r("Abstract getter `box` must be implemented.")}serialize(e,t){_r("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)s[o]=t+e[o]*i,s[o+1]=r+e[o+1]*a;return s}static _rescaleAndSwap(e,t,r,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)s[o]=t+e[o+1]*i,s[o+1]=r+e[o]*a;return s}static _translate(e,t,r,i){i||(i=new Float32Array(e.length));for(let a=0,s=e.length;a<s;a+=2)i[a]=t+e[a],i[a+1]=r+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,a){switch(a){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,a,s){return[(e+5*r)/6,(t+5*i)/6,(5*r+a)/6,(5*i+s)/6,(r+a)/2,(i+s)/2]}}Fe(Bt,"PRECISION",1e-4);var ml,pc,P1,L1,Ah,Yn,uy,cy,VM,HM,R1,N1,Hm,GM,Pk,Lk,wa,TE,ebe,tbe,nbe,rbe,ibe,abe;const Vd=class Vd{constructor({x:e,y:t},r,i,a,s,o=0){$(this,wa);$(this,ml);$(this,pc,[]);$(this,P1);$(this,L1);$(this,Ah,[]);$(this,Yn,new Float32Array(18));$(this,uy);$(this,cy);$(this,VM);$(this,HM);$(this,R1);$(this,N1);$(this,Hm,[]);U(this,ml,r),U(this,N1,a*i),U(this,L1,s),_(this,Yn).set([NaN,NaN,NaN,NaN,e,t],6),U(this,P1,o),U(this,HM,_(Vd,GM)*i),U(this,VM,_(Vd,Lk)*i),U(this,R1,i),_(this,Hm).push(e,t)}isEmpty(){return isNaN(_(this,Yn)[8])}add({x:e,y:t}){var I;U(this,uy,e),U(this,cy,t);const[r,i,a,s]=_(this,ml);let[o,l,u,c]=_(this,Yn).subarray(8,12);const h=e-u,d=t-c,f=Math.hypot(h,d);if(f<_(this,VM))return!1;const p=f-_(this,HM),m=p/f,g=m*h,v=m*d;let b=o,S=l;o=u,l=c,u+=g,c+=v,(I=_(this,Hm))==null||I.push(e,t);const w=-v/p,E=g/p,T=w*_(this,N1),M=E*_(this,N1);return _(this,Yn).set(_(this,Yn).subarray(2,8),0),_(this,Yn).set([u+T,c+M],4),_(this,Yn).set(_(this,Yn).subarray(14,18),12),_(this,Yn).set([u-T,c-M],16),isNaN(_(this,Yn)[6])?(_(this,Ah).length===0&&(_(this,Yn).set([o+T,l+M],2),_(this,Ah).push(NaN,NaN,NaN,NaN,(o+T-r)/a,(l+M-i)/s),_(this,Yn).set([o-T,l-M],14),_(this,pc).push(NaN,NaN,NaN,NaN,(o-T-r)/a,(l-M-i)/s)),_(this,Yn).set([b,S,o,l,u,c],6),!this.isEmpty()):(_(this,Yn).set([b,S,o,l,u,c],6),Math.abs(Math.atan2(S-l,b-o)-Math.atan2(v,g))<Math.PI/2?([o,l,u,c]=_(this,Yn).subarray(2,6),_(this,Ah).push(NaN,NaN,NaN,NaN,((o+u)/2-r)/a,((l+c)/2-i)/s),[o,l,b,S]=_(this,Yn).subarray(14,18),_(this,pc).push(NaN,NaN,NaN,NaN,((b+o)/2-r)/a,((S+l)/2-i)/s),!0):([b,S,o,l,u,c]=_(this,Yn).subarray(0,6),_(this,Ah).push(((b+5*o)/6-r)/a,((S+5*l)/6-i)/s,((5*o+u)/6-r)/a,((5*l+c)/6-i)/s,((o+u)/2-r)/a,((l+c)/2-i)/s),[u,c,o,l,b,S]=_(this,Yn).subarray(12,18),_(this,pc).push(((b+5*o)/6-r)/a,((S+5*l)/6-i)/s,((5*o+u)/6-r)/a,((5*l+c)/6-i)/s,((o+u)/2-r)/a,((l+c)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=_(this,Ah),t=_(this,pc);if(isNaN(_(this,Yn)[6])&&!this.isEmpty())return q(this,wa,ebe).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);q(this,wa,nbe).call(this,r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return q(this,wa,tbe).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,i,a,s){return new sbe(e,t,r,i,a,s)}getOutlines(){var h;const e=_(this,Ah),t=_(this,pc),r=_(this,Yn),[i,a,s,o]=_(this,ml),l=new Float32Array((((h=_(this,Hm))==null?void 0:h.length)??0)+2);for(let d=0,f=l.length-2;d<f;d+=2)l[d]=(_(this,Hm)[d]-i)/s,l[d+1]=(_(this,Hm)[d+1]-a)/o;if(l[l.length-2]=(_(this,uy)-i)/s,l[l.length-1]=(_(this,cy)-a)/o,isNaN(r[6])&&!this.isEmpty())return q(this,wa,rbe).call(this,l);const u=new Float32Array(_(this,Ah).length+24+_(this,pc).length);let c=e.length;for(let d=0;d<c;d+=2){if(isNaN(e[d])){u[d]=u[d+1]=NaN;continue}u[d]=e[d],u[d+1]=e[d+1]}c=q(this,wa,abe).call(this,u,c);for(let d=t.length-6;d>=6;d-=6)for(let f=0;f<6;f+=2){if(isNaN(t[d+f])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=t[d+f],u[c+1]=t[d+f+1],c+=2}return q(this,wa,ibe).call(this,u,c),this.newFreeDrawOutline(u,l,_(this,ml),_(this,R1),_(this,P1),_(this,L1))}};ml=new WeakMap,pc=new WeakMap,P1=new WeakMap,L1=new WeakMap,Ah=new WeakMap,Yn=new WeakMap,uy=new WeakMap,cy=new WeakMap,VM=new WeakMap,HM=new WeakMap,R1=new WeakMap,N1=new WeakMap,Hm=new WeakMap,GM=new WeakMap,Pk=new WeakMap,Lk=new WeakMap,wa=new WeakSet,TE=function(){const e=_(this,Yn).subarray(4,6),t=_(this,Yn).subarray(16,18),[r,i,a,s]=_(this,ml);return[(_(this,uy)+(e[0]-t[0])/2-r)/a,(_(this,cy)+(e[1]-t[1])/2-i)/s,(_(this,uy)+(t[0]-e[0])/2-r)/a,(_(this,cy)+(t[1]-e[1])/2-i)/s]},ebe=function(){const[e,t,r,i]=_(this,ml),[a,s,o,l]=q(this,wa,TE).call(this);return`M${(_(this,Yn)[2]-e)/r} ${(_(this,Yn)[3]-t)/i} L${(_(this,Yn)[4]-e)/r} ${(_(this,Yn)[5]-t)/i} L${a} ${s} L${o} ${l} L${(_(this,Yn)[16]-e)/r} ${(_(this,Yn)[17]-t)/i} L${(_(this,Yn)[14]-e)/r} ${(_(this,Yn)[15]-t)/i} Z`},tbe=function(e){const t=_(this,pc);e.push(`L${t[4]} ${t[5]} Z`)},nbe=function(e){const[t,r,i,a]=_(this,ml),s=_(this,Yn).subarray(4,6),o=_(this,Yn).subarray(16,18),[l,u,c,h]=q(this,wa,TE).call(this);e.push(`L${(s[0]-t)/i} ${(s[1]-r)/a} L${l} ${u} L${c} ${h} L${(o[0]-t)/i} ${(o[1]-r)/a}`)},rbe=function(e){const t=_(this,Yn),[r,i,a,s]=_(this,ml),[o,l,u,c]=q(this,wa,TE).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/a,(t[3]-i)/s,NaN,NaN,NaN,NaN,(t[4]-r)/a,(t[5]-i)/s,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(t[16]-r)/a,(t[17]-i)/s,NaN,NaN,NaN,NaN,(t[14]-r)/a,(t[15]-i)/s],0),this.newFreeDrawOutline(h,e,_(this,ml),_(this,R1),_(this,P1),_(this,L1))},ibe=function(e,t){const r=_(this,pc);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},abe=function(e,t){const r=_(this,Yn).subarray(4,6),i=_(this,Yn).subarray(16,18),[a,s,o,l]=_(this,ml),[u,c,h,d]=q(this,wa,TE).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/o,(r[1]-s)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/l],t),t+=24},$(Vd,GM,8),$(Vd,Pk,2),$(Vd,Lk,_(Vd,GM)+_(Vd,Pk));let pk=Vd;var k1,hy,yf,jM,gl,WM,Vi,Rk,obe;class sbe extends Bt{constructor(t,r,i,a,s,o){super();$(this,Rk);$(this,k1);$(this,hy,new Float32Array(4));$(this,yf);$(this,jM);$(this,gl);$(this,WM);$(this,Vi);U(this,Vi,t),U(this,gl,r),U(this,k1,i),U(this,WM,a),U(this,yf,s),U(this,jM,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],q(this,Rk,obe).call(this,o);const[l,u,c,h]=_(this,hy);for(let d=0,f=t.length;d<f;d+=2)t[d]=(t[d]-l)/c,t[d+1]=(t[d+1]-u)/h;for(let d=0,f=r.length;d<f;d+=2)r[d]=(r[d]-l)/c,r[d+1]=(r[d+1]-u)/h}toSVGPath(){const t=[`M${_(this,Vi)[4]} ${_(this,Vi)[5]}`];for(let r=6,i=_(this,Vi).length;r<i;r+=6){if(isNaN(_(this,Vi)[r])){t.push(`L${_(this,Vi)[r+4]} ${_(this,Vi)[r+5]}`);continue}t.push(`C${_(this,Vi)[r]} ${_(this,Vi)[r+1]} ${_(this,Vi)[r+2]} ${_(this,Vi)[r+3]} ${_(this,Vi)[r+4]} ${_(this,Vi)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,i,a],s){const o=i-t,l=a-r;let u,c;switch(s){case 0:u=Bt._rescale(_(this,Vi),t,a,o,-l),c=Bt._rescale(_(this,gl),t,a,o,-l);break;case 90:u=Bt._rescaleAndSwap(_(this,Vi),t,r,o,l),c=Bt._rescaleAndSwap(_(this,gl),t,r,o,l);break;case 180:u=Bt._rescale(_(this,Vi),i,r,-o,l),c=Bt._rescale(_(this,gl),i,r,-o,l);break;case 270:u=Bt._rescaleAndSwap(_(this,Vi),i,a,-o,-l),c=Bt._rescaleAndSwap(_(this,gl),i,a,-o,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return _(this,hy)}newOutliner(t,r,i,a,s,o=0){return new pk(t,r,i,a,s,o)}getNewOutline(t,r){const[i,a,s,o]=_(this,hy),[l,u,c,h]=_(this,k1),d=s*c,f=o*h,p=i*c+l,m=a*h+u,g=this.newOutliner({x:_(this,gl)[0]*d+p,y:_(this,gl)[1]*f+m},_(this,k1),_(this,WM),t,_(this,jM),r??_(this,yf));for(let v=2;v<_(this,gl).length;v+=2)g.add({x:_(this,gl)[v]*d+p,y:_(this,gl)[v+1]*f+m});return g.getOutlines()}}k1=new WeakMap,hy=new WeakMap,yf=new WeakMap,jM=new WeakMap,gl=new WeakMap,WM=new WeakMap,Vi=new WeakMap,Rk=new WeakSet,obe=function(t){const r=_(this,Vi);let i=r[4],a=r[5];const s=[i,a,i,a];let o=i,l=a,u=i,c=a;const h=t?Math.max:Math.min,d=new Float32Array(4);for(let p=6,m=r.length;p<m;p+=6){const g=r[p+4],v=r[p+5];isNaN(r[p])?(It.pointBoundingBox(g,v,s),l>v?(o=g,l=v):l===v&&(o=h(o,g)),c<v?(u=g,c=v):c===v&&(u=h(u,g))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,It.bezierBoundingBox(i,a,...r.slice(p,p+6),d),It.rectBoundingBox(d[0],d[1],d[2],d[3],s),l>d[1]?(o=d[0],l=d[1]):l===d[1]&&(o=h(o,d[0])),c<d[3]?(u=d[2],c=d[3]):c===d[3]&&(u=h(u,d[2]))),i=g,a=v}const f=_(this,hy);f[0]=s[0]-_(this,yf),f[1]=s[1]-_(this,yf),f[2]=s[2]-s[0]+2*_(this,yf),f[3]=s[3]-s[1]+2*_(this,yf),this.firstPoint=[o,l],this.lastPoint=[u,c]};var XM,$M,YM,Gm,mc,vo,lbe,vR,ube,cbe,E9;class T9{constructor(e,t=0,r=0,i=!0){$(this,vo);$(this,XM);$(this,$M);$(this,YM);$(this,Gm,[]);$(this,mc,[]);const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:m,y:g,width:v,height:b}of e){const S=Math.floor((m-t)/s)*s,w=Math.ceil((m+v+t)/s)*s,E=Math.floor((g-t)/s)*s,T=Math.ceil((g+b+t)/s)*s,M=[S,E,T,!0],P=[w,E,T,!1];_(this,Gm).push(M,P),It.rectBoundingBox(S,E,w,T,a)}const o=a[2]-a[0]+2*r,l=a[3]-a[1]+2*r,u=a[0]-r,c=a[1]-r;let h=i?-1/0:1/0,d=1/0;const f=_(this,Gm).at(i?-1:-2),p=[f[0],f[2]];for(const m of _(this,Gm)){const[g,v,b,S]=m;!S&&i?v<d?(d=v,h=g):v===d&&(h=Math.max(h,g)):S&&!i&&(v<d?(d=v,h=g):v===d&&(h=Math.min(h,g))),m[0]=(g-u)/o,m[1]=(v-c)/l,m[2]=(b-c)/l}U(this,XM,new Float32Array([u,c,o,l])),U(this,$M,[h,d]),U(this,YM,p)}getOutlines(){_(this,Gm).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of _(this,Gm))t[3]?(e.push(...q(this,vo,E9).call(this,t)),q(this,vo,ube).call(this,t)):(q(this,vo,cbe).call(this,t),e.push(...q(this,vo,E9).call(this,t)));return q(this,vo,lbe).call(this,e)}}XM=new WeakMap,$M=new WeakMap,YM=new WeakMap,Gm=new WeakMap,mc=new WeakMap,vo=new WeakSet,lbe=function(e){const t=[],r=new Set;for(const s of e){const[o,l,u]=s;t.push([o,l,s],[o,u,s])}t.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=t.length;s<o;s+=2){const l=t[s][2],u=t[s+1][2];l.push(u),u.push(l),r.add(l),r.add(u)}const i=[];let a;for(;r.size>0;){const s=r.values().next().value;let[o,l,u,c,h]=s;r.delete(s);let d=o,f=l;for(a=[o,u],i.push(a);;){let p;if(r.has(c))p=c;else if(r.has(h))p=h;else break;r.delete(p),[o,l,u,c,h]=p,d!==o&&(a.push(d,f,o,f===l?l:u),d=o),f=f===l?u:l}a.push(d,f)}return new emt(i,_(this,XM),_(this,$M),_(this,YM))},vR=function(e){const t=_(this,mc);let r=0,i=t.length-1;for(;r<=i;){const a=r+i>>1,s=t[a][0];if(s===e)return a;s<e?r=a+1:i=a-1}return i+1},ube=function([,e,t]){const r=q(this,vo,vR).call(this,e);_(this,mc).splice(r,0,[e,t])},cbe=function([,e,t]){const r=q(this,vo,vR).call(this,e);for(let i=r;i<_(this,mc).length;i++){const[a,s]=_(this,mc)[i];if(a!==e)break;if(a===e&&s===t){_(this,mc).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,s]=_(this,mc)[i];if(a!==e)break;if(a===e&&s===t){_(this,mc).splice(i,1);return}}},E9=function(e){const[t,r,i]=e,a=[[t,r,i]],s=q(this,vo,vR).call(this,i);for(let o=0;o<s;o++){const[l,u]=_(this,mc)[o];for(let c=0,h=a.length;c<h;c++){const[,d,f]=a[c];if(!(u<=d||f<=l)){if(d>=l){if(f>u)a[c][1]=u;else{if(h===1)return[];a.splice(c,1),c--,h--}continue}a[c][2]=l,f>u&&a.push([t,u,f])}}}return a};var qM,O1;class emt extends Bt{constructor(t,r,i,a){super();$(this,qM);$(this,O1);U(this,O1,t),U(this,qM,r),this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const r of _(this,O1)){let[i,a]=r;t.push(`M${i} ${a}`);for(let s=2;s<r.length;s+=2){const o=r[s],l=r[s+1];o===i?(t.push(`V${l}`),a=l):l===a&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,r,i,a],s){const o=[],l=i-t,u=a-r;for(const c of _(this,O1)){const h=new Array(c.length);for(let d=0;d<c.length;d+=2)h[d]=t+c[d]*l,h[d+1]=a-c[d+1]*u;o.push(h)}return o}get box(){return _(this,qM)}get classNamesForOutlining(){return["highlightOutline"]}}qM=new WeakMap,O1=new WeakMap;class A9 extends pk{newFreeDrawOutline(e,t,r,i,a,s){return new tmt(e,t,r,i,a,s)}}class tmt extends sbe{newOutliner(e,t,r,i,a,s=0){return new A9(e,t,r,i,a,s)}}var B1,KM,xf,dy,ZM,Oo,QM,JM,fy,vl,yl,is,F1,U1,Ps,z1,pu,e2,Un,C9,yR,hbe,dbe,fbe,M9,Xv,Au,$_,pbe,xR,_R,mbe,gbe,vbe,ybe,xbe;const yr=class yr extends ti{constructor(t){super({...t,name:"highlightEditor"});$(this,Un);$(this,B1,null);$(this,KM,0);$(this,xf);$(this,dy,null);$(this,ZM,null);$(this,Oo,null);$(this,QM,null);$(this,JM,0);$(this,fy,null);$(this,vl,null);$(this,yl,null);$(this,is,!1);$(this,F1,null);$(this,U1,null);$(this,Ps,null);$(this,z1,"");$(this,pu);$(this,e2,"");this.color=t.color||yr._defaultColor,U(this,pu,t.thickness||yr._defaultThickness),this.opacity=t.opacity||yr._defaultOpacity,U(this,xf,t.boxes||null),U(this,e2,t.methodOfCreation||""),U(this,z1,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(U(this,is,!0),q(this,Un,yR).call(this,t),q(this,Un,Xv).call(this)):_(this,xf)&&(U(this,B1,t.anchorNode),U(this,KM,t.anchorOffset),U(this,QM,t.focusNode),U(this,JM,t.focusOffset),q(this,Un,C9).call(this),q(this,Un,Xv).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=yr.prototype;return En(this,"_keyboardManager",new H2([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:_(this,is)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:_(this,pu),methodOfCreation:_(this,e2)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var i;ti.initialize(t,r),yr._defaultColor||(yr._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case ir.HIGHLIGHT_COLOR:yr._defaultColor=r;break;case ir.HIGHLIGHT_THICKNESS:yr._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return _(this,U1)}get commentButtonPosition(){return _(this,F1)}updateParams(t,r){switch(t){case ir.HIGHLIGHT_COLOR:q(this,Un,hbe).call(this,r);break;case ir.HIGHLIGHT_THICKNESS:q(this,Un,dbe).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[ir.HIGHLIGHT_COLOR,yr._defaultColor],[ir.HIGHLIGHT_THICKNESS,yr._defaultThickness]]}get propertiesToUpdate(){return[[ir.HIGHLIGHT_COLOR,this.color||yr._defaultColor],[ir.HIGHLIGHT_THICKNESS,_(this,pu)||yr._defaultThickness],[ir.HIGHLIGHT_FREE,_(this,is)]]}onUpdatedColor(){var t,r;(t=this.parent)==null||t.drawLayer.updateProperties(_(this,yl),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=_(this,ZM))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",U(this,ZM,new hk({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(q(this,Un,_R).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,q(this,Un,_R).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){q(this,Un,M9).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(q(this,Un,Xv).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?q(this,Un,M9).call(this):t&&(q(this,Un,Xv).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var a,s,o;const{drawLayer:r}=this.parent;let i;_(this,is)?(t=(t-this.rotation+360)%360,i=q(a=yr,Au,$_).call(a,_(this,vl).box,t)):i=q(s=yr,Au,$_).call(s,[this.x,this.y,this.width,this.height],t),r.updateProperties(_(this,yl),{bbox:i,root:{"data-main-rotation":t}}),r.updateProperties(_(this,Ps),{bbox:q(o=yr,Au,$_).call(o,_(this,Oo).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();_(this,z1)&&(t.setAttribute("aria-label",_(this,z1)),t.setAttribute("role","mark")),_(this,is)?t.classList.add("free"):this.div.addEventListener("keydown",q(this,Un,pbe).bind(this),{signal:this._uiManager._signal});const r=U(this,fy,document.createElement("div"));return t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=_(this,dy),this.setDims(),Axe(this,_(this,fy),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(_(this,Ps),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(_(this,Ps),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:q(this,Un,xR).call(this,!0);break;case 1:case 3:q(this,Un,xR).call(this,!1);break}}select(){var t;super.select(),_(this,Ps)&&((t=this.parent)==null||t.drawLayer.updateProperties(_(this,Ps),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),_(this,Ps)&&((t=this.parent)==null||t.drawLayer.updateProperties(_(this,Ps),{rootClass:{selected:!1}}),_(this,is)||q(this,Un,xR).call(this,!1))}get _mustFixPosition(){return!_(this,is)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(_(this,yl),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(_(this,Ps),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:i,x:a,y:s}){const{x:o,y:l,width:u,height:c}=i.getBoundingClientRect(),h=new AbortController,d=t.combinedSignal(h),f=p=>{h.abort(),q(this,Au,ybe).call(this,t,p)};window.addEventListener("blur",f,{signal:d}),window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("pointerdown",Ri,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Bu,{signal:d}),i.addEventListener("pointermove",q(this,Au,vbe).bind(this,t),{signal:d}),this._freeHighlight=new A9({x:a,y:s},[o,l,u,c],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,i){var m,g,v,b;let a=null;if(t instanceof $_e){const{data:{quadPoints:S,rect:w,rotation:E,id:T,color:M,opacity:P,popupRef:I,richText:D,contentsObj:R,creationDate:B,modificationDate:k},parent:{page:{pageNumber:V}}}=t;a=t={annotationType:Pn.HIGHLIGHT,color:Array.from(M),opacity:P,quadPoints:S,boxes:null,pageIndex:V-1,rect:w.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:I,richText:D,comment:(R==null?void 0:R.str)||null,creationDate:B,modificationDate:k}}else if(t instanceof eX){const{data:{inkLists:S,rect:w,rotation:E,id:T,color:M,borderStyle:{rawWidth:P},popupRef:I,richText:D,contentsObj:R,creationDate:B,modificationDate:k},parent:{page:{pageNumber:V}}}=t;a=t={annotationType:Pn.HIGHLIGHT,color:Array.from(M),thickness:P,inkLists:S,boxes:null,pageIndex:V-1,rect:w.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:I,richText:D,comment:(R==null?void 0:R.str)||null,creationDate:B,modificationDate:k}}const{color:s,quadPoints:o,inkLists:l,opacity:u}=t,c=await super.deserialize(t,r,i);c.color=It.makeHexColor(...s),c.opacity=u||1,l&&U(c,pu,t.thickness),c._initialData=a,t.comment&&c.setCommentData(t);const[h,d]=c.pageDimensions,[f,p]=c.pageTranslation;if(o){const S=U(c,xf,[]);for(let w=0;w<o.length;w+=8)S.push({x:(o[w]-f)/h,y:1-(o[w+1]-p)/d,width:(o[w+2]-o[w])/h,height:(o[w+1]-o[w+5])/d});q(m=c,Un,C9).call(m),q(g=c,Un,Xv).call(g),c.rotate(c.rotation)}else if(l){U(c,is,!0);const S=l[0],w={x:S[0]-f,y:d-(S[1]-p)},E=new A9(w,[0,0,h,d],1,_(c,pu)/2,!0,.001);for(let P=0,I=S.length;P<I;P+=2)w.x=S[P]-f,w.y=d-(S[P+1]-p),E.add(w);const{id:T,clipPathId:M}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);q(v=c,Un,yR).call(v,{highlightOutlines:E.getOutlines(),highlightId:T,clipPathId:M}),q(b=c,Un,Xv).call(b),c.rotate(c.parentRotation)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=ti._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:r,opacity:this.opacity,thickness:_(this,pu),quadPoints:q(this,Un,mbe).call(this),outlines:q(this,Un,gbe).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!q(this,Un,xbe).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};B1=new WeakMap,KM=new WeakMap,xf=new WeakMap,dy=new WeakMap,ZM=new WeakMap,Oo=new WeakMap,QM=new WeakMap,JM=new WeakMap,fy=new WeakMap,vl=new WeakMap,yl=new WeakMap,is=new WeakMap,F1=new WeakMap,U1=new WeakMap,Ps=new WeakMap,z1=new WeakMap,pu=new WeakMap,e2=new WeakMap,Un=new WeakSet,C9=function(){const t=new T9(_(this,xf),.001);U(this,vl,t.getOutlines()),[this.x,this.y,this.width,this.height]=_(this,vl).box;const r=new T9(_(this,xf),.0025,.001,this._uiManager.direction==="ltr");U(this,Oo,r.getOutlines());const{firstPoint:i}=_(this,vl);U(this,F1,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:a}=_(this,Oo);U(this,U1,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},yR=function({highlightOutlines:t,highlightId:r,clipPathId:i}){var d,f;if(U(this,vl,t),U(this,Oo,t.getNewOutline(_(this,pu)/2+1.5,.0025)),r>=0)U(this,yl,r),U(this,dy,i),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),U(this,Ps,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:_(this,Oo).box,path:{d:_(this,Oo).toSVGPath()}},!0));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(_(this,yl),{bbox:q(d=yr,Au,$_).call(d,_(this,vl).box,(p-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(_(this,Ps),{bbox:q(f=yr,Au,$_).call(f,_(this,Oo).box,p),path:{d:_(this,Oo).toSVGPath()}})}const[s,o,l,u]=t.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=l,this.height=u;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-s,this.width=l*m/p,this.height=u*p/m;break}case 180:this.x=1-s,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=s,this.width=l*m/p,this.height=u*p/m;break}}const{firstPoint:c}=t;U(this,F1,[(c[0]-s)/l,(c[1]-o)/u]);const{lastPoint:h}=_(this,Oo);U(this,U1,[(h[0]-s)/l,(h[1]-o)/u])},hbe=function(t){const r=(s,o)=>{this.color=s,this.opacity=o,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:r.bind(this,t,yr._defaultOpacity),undo:r.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},dbe=function(t){const r=_(this,pu),i=a=>{U(this,pu,a),q(this,Un,fbe).call(this,a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ir.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},fbe=function(t){_(this,is)&&(q(this,Un,yR).call(this,{highlightOutlines:_(this,vl).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())},M9=function(){_(this,yl)===null||!this.parent||(this.parent.drawLayer.remove(_(this,yl)),U(this,yl,null),this.parent.drawLayer.remove(_(this,Ps)),U(this,Ps,null))},Xv=function(t=this.parent){_(this,yl)===null&&({id:ma(this,yl)._,clipPathId:ma(this,dy)._}=t.drawLayer.draw({bbox:_(this,vl).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:_(this,is)},path:{d:_(this,vl).toSVGPath()}},!1,!0),U(this,Ps,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:_(this,is)},bbox:_(this,Oo).box,path:{d:_(this,Oo).toSVGPath()}},_(this,is))),_(this,fy)&&(_(this,fy).style.clipPath=_(this,dy)))},Au=new WeakSet,$_=function([t,r,i,a],s){switch(s){case 90:return[1-r-a,t,a,i];case 180:return[1-t-i,1-r-a,i,a];case 270:return[r,1-t-i,a,i]}return[t,r,i,a]},pbe=function(t){yr._keyboardManager.exec(this,t)},xR=function(t){if(!_(this,B1))return;const r=window.getSelection();t?r.setPosition(_(this,B1),_(this,KM)):r.setPosition(_(this,QM),_(this,JM))},_R=function(){return _(this,is)?this.rotation:0},mbe=function(){if(_(this,is))return null;const[t,r]=this.pageDimensions,[i,a]=this.pageTranslation,s=_(this,xf),o=new Float32Array(s.length*8);let l=0;for(const{x:u,y:c,width:h,height:d}of s){const f=u*t+i,p=(1-c)*r+a;o[l]=o[l+4]=f,o[l+1]=o[l+3]=p,o[l+2]=o[l+6]=f+h*t,o[l+5]=o[l+7]=p-d*r,l+=8}return o},gbe=function(t){return _(this,vl).serialize(t,q(this,Un,_R).call(this))},vbe=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},ybe=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},xbe=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==r[a])},$(yr,Au),Fe(yr,"_defaultColor",null),Fe(yr,"_defaultOpacity",1),Fe(yr,"_defaultThickness",12),Fe(yr,"_type","highlight"),Fe(yr,"_editorType",Pn.HIGHLIGHT),Fe(yr,"_freeHighlightId",-1),Fe(yr,"_freeHighlight",null),Fe(yr,"_freeHighlightClipId","");let mk=yr;var py;class _be{constructor(){$(this,py,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){_(this,py)[e]=t}toSVGProperties(){const e=_(this,py);return U(this,py,Object.create(null)),{root:e}}reset(){U(this,py,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){_r("Not implemented")}}py=new WeakMap;var xl,V1,za,my,gy,cr,D9,I9,P9,EE,bbe,bR,AE,Y_;const rr=class rr extends ti{constructor(t){super(t);$(this,cr);$(this,xl,null);$(this,V1);Fe(this,"_colorPicker",null);Fe(this,"_drawId",null);U(this,V1,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(q(this,cr,D9).call(this,t),q(this,cr,EE).call(this))}static _mergeSVGProperties(t,r){const i=new Set(Object.keys(t));for(const[a,s]of Object.entries(r))i.has(a)?Object.assign(t[a],s):t[a]=s;return t}static getDefaultDrawingOptions(t){_r("Not implemented")}static get typesMap(){_r("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(_(rr,za).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,r[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,r[a]]);return t}_updateProperty(t,r,i){const a=this._drawingOptions,s=a[r],o=l=>{var c;a.updateProperty(r,l);const u=_(this,xl).updateProperty(r,l);u&&q(this,cr,AE).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties(_(this,xl).getPathResizingSVGProperties(q(this,cr,bR).call(this)),{bbox:q(this,cr,Y_).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties(_(this,xl).getPathResizedSVGProperties(q(this,cr,bR).call(this)),{bbox:q(this,cr,Y_).call(this)}))}_onTranslating(t,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:q(this,cr,Y_).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties(_(this,xl).getPathTranslatedSVGProperties(q(this,cr,bR).call(this),this.parentDimensions),{bbox:q(this,cr,Y_).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,_(this,V1)&&(U(this,V1,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){q(this,cr,P9).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(q(this,cr,EE).call(this),q(this,cr,AE).call(this,_(this,xl).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),q(this,cr,P9).call(this)):t&&(this._uiManager.addShouldRescale(this),q(this,cr,EE).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,rr._mergeSVGProperties({bbox:q(this,cr,Y_).call(this)},_(this,xl).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&q(this,cr,AE).call(this,_(this,xl).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),i}static createDrawerInstance(t,r,i,a,s){_r("Not implemented")}static startDrawing(t,r,i,a){var g;const{target:s,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=a;if(As.isInitializedAndDifferentPointerType(c))return;const{viewport:{rotation:h}}=t,{width:d,height:f}=s.getBoundingClientRect(),p=U(rr,my,new AbortController),m=t.combinedSignal(p);if(As.setPointer(c,u),window.addEventListener("pointerup",v=>{As.isSamePointerIdOrRemove(v.pointerId)&&this._endDraw(v)},{signal:m}),window.addEventListener("pointercancel",v=>{As.isSamePointerIdOrRemove(v.pointerId)&&this._currentParent.endDrawingSession()},{signal:m}),window.addEventListener("pointerdown",v=>{As.isSamePointerType(v.pointerType)&&(As.initializeAndAddPointerId(v.pointerId),_(rr,za).isCancellable()&&(_(rr,za).removeLastElement(),_(rr,za).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Bu,{signal:m}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:m}),s.addEventListener("touchmove",v=>{As.isSameTimeStamp(v.timeStamp)&&Ri(v)},{signal:m}),t.toggleDrawing(),(g=r._editorUndoBar)==null||g.hide(),_(rr,za)){t.drawLayer.updateProperties(this._currentDrawId,_(rr,za).startNew(o,l,d,f,h));return}r.updateUIForDefaultProperties(this),U(rr,za,this.createDrawerInstance(o,l,d,f,h)),U(rr,gy,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(_(rr,gy).toSVGProperties(),_(rr,za).defaultSVGProperties),!0,!1)}static _drawMove(t){if(As.isSameTimeStamp(t.timeStamp),!_(rr,za))return;const{offsetX:r,offsetY:i,pointerId:a}=t;if(As.isSamePointerId(a)){if(As.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,_(rr,za).add(r,i)),As.setTimeStamp(t.timeStamp),Ri(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,U(rr,za,null),U(rr,gy,null),As.clearTimeStamp()),_(rr,my)&&(_(rr,my).abort(),U(rr,my,null),As.clearPointerIds())}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,_(rr,za).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=_(rr,za),a=this._currentDrawId,s=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(a,i.setLastElement(s))},undo:()=>{r.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:ir.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(ir.DRAW_STEP),!_(rr,za).isEmpty()){const{pageDimensions:[i,a],scale:s}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:_(rr,za).getOutlines(i*s,a*s,s,this._INNER_MARGIN),drawingOptions:_(rr,gy),mustBeCommitted:!t});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,i,a,s,o){_r("Not implemented")}static async deserialize(t,r,i){var h,d;const{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:l}}=r.viewport,u=this.deserializeDraw(o,l,a,s,this._INNER_MARGIN,t),c=await super.deserialize(t,r,i);return c.createDrawingOptions(t),q(h=c,cr,D9).call(h,{drawOutlines:u}),q(d=c,cr,EE).call(d),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[r,i]=this.pageTranslation,[a,s]=this.pageDimensions;return _(this,xl).serialize([r,i,a,s],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};xl=new WeakMap,V1=new WeakMap,za=new WeakMap,my=new WeakMap,gy=new WeakMap,cr=new WeakSet,D9=function({drawOutlines:t,drawId:r,drawingOptions:i}){U(this,xl,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=q(this,cr,I9).call(this,t,this.parent),q(this,cr,AE).call(this,t.box)},I9=function(t,r){const{id:i}=r.drawLayer.draw(rr._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},P9=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},EE=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=q(this,cr,I9).call(this,_(this,xl),t)}},bbe=function([t,r,i,a]){const{parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[r,1-t,i*(o/s),a*(s/o)];case 180:return[1-t,1-r,i,a];case 270:return[1-r,t,i*(o/s),a*(s/o)];default:return[t,r,i,a]}},bR=function(){const{x:t,y:r,width:i,height:a,parentDimensions:[s,o],rotation:l}=this;switch(l){case 90:return[1-r,t,i*(s/o),a*(o/s)];case 180:return[1-t,1-r,i,a];case 270:return[r,1-t,i*(s/o),a*(o/s)];default:return[t,r,i,a]}},AE=function(t){[this.x,this.y,this.width,this.height]=q(this,cr,bbe).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Y_=function(){const{x:t,y:r,width:i,height:a,rotation:s,parentRotation:o,parentDimensions:[l,u]}=this;switch((s*4+o)/90){case 1:return[1-r-a,t,a,i];case 2:return[1-t-i,1-r-a,i,a];case 3:return[r,1-t-i,a,i];case 4:return[t,r-i*(l/u),a*(u/l),i*(l/u)];case 5:return[1-r,t,i*(l/u),a*(u/l)];case 6:return[1-t-a*(u/l),1-r,a*(u/l),i*(l/u)];case 7:return[r-i*(l/u),1-t-a*(u/l),i*(l/u),a*(u/l)];case 8:return[t-i,r-a,i,a];case 9:return[1-r,t-i,a,i];case 10:return[1-t,1-r,i,a];case 11:return[r-a,1-t,a,i];case 12:return[t-a*(u/l),r,a*(u/l),i*(l/u)];case 13:return[1-r-i*(l/u),t-a*(u/l),i*(l/u),a*(u/l)];case 14:return[1-t,1-r-i*(l/u),a*(u/l),i*(l/u)];case 15:return[r,1-t,i*(l/u),a*(u/l)];default:return[t,r,i,a]}},Fe(rr,"_currentDrawId",-1),Fe(rr,"_currentParent",null),$(rr,za,null),$(rr,my,null),$(rr,gy,null),Fe(rr,"_INNER_MARGIN",3);let gk=rr;var Ch,Va,Ha,vy,H1,eo,as,mu,yy,xy,_y,G1,SR;class nmt{constructor(e,t,r,i,a,s){$(this,G1);$(this,Ch,new Float64Array(6));$(this,Va);$(this,Ha);$(this,vy);$(this,H1);$(this,eo);$(this,as,"");$(this,mu,0);$(this,yy,new G2);$(this,xy);$(this,_y);U(this,xy,r),U(this,_y,i),U(this,vy,a),U(this,H1,s),[e,t]=q(this,G1,SR).call(this,e,t);const o=U(this,Va,[NaN,NaN,NaN,NaN,e,t]);U(this,eo,[e,t]),U(this,Ha,[{line:o,points:_(this,eo)}]),_(this,Ch).set(o,0)}updateProperty(e,t){e==="stroke-width"&&U(this,H1,t)}isEmpty(){return!_(this,Ha)||_(this,Ha).length===0}isCancellable(){return _(this,eo).length<=10}add(e,t){[e,t]=q(this,G1,SR).call(this,e,t);const[r,i,a,s]=_(this,Ch).subarray(2,6),o=e-a,l=t-s;return Math.hypot(_(this,xy)*o,_(this,_y)*l)<=2?null:(_(this,eo).push(e,t),isNaN(r)?(_(this,Ch).set([a,s,e,t],2),_(this,Va).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(_(this,Ch)[0])&&_(this,Va).splice(6,6),_(this,Ch).set([r,i,a,s,e,t],0),_(this,Va).push(...Bt.createBezierPoints(r,i,a,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(_(this,eo).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,a){U(this,xy,r),U(this,_y,i),U(this,vy,a),[e,t]=q(this,G1,SR).call(this,e,t);const s=U(this,Va,[NaN,NaN,NaN,NaN,e,t]);U(this,eo,[e,t]);const o=_(this,Ha).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),_(this,Ha).push({line:s,points:_(this,eo)}),_(this,Ch).set(s,0),U(this,mu,0),this.toSVGPath(),null}getLastElement(){return _(this,Ha).at(-1)}setLastElement(e){return _(this,Ha)?(_(this,Ha).push(e),U(this,Va,e.line),U(this,eo,e.points),U(this,mu,0),{path:{d:this.toSVGPath()}}):_(this,yy).setLastElement(e)}removeLastElement(){if(!_(this,Ha))return _(this,yy).removeLastElement();_(this,Ha).pop(),U(this,as,"");for(let e=0,t=_(this,Ha).length;e<t;e++){const{line:r,points:i}=_(this,Ha)[e];U(this,Va,r),U(this,eo,i),U(this,mu,0),this.toSVGPath()}return{path:{d:_(this,as)}}}toSVGPath(){const e=Bt.svgRound(_(this,Va)[4]),t=Bt.svgRound(_(this,Va)[5]);if(_(this,eo).length===2)return U(this,as,`${_(this,as)} M ${e} ${t} Z`),_(this,as);if(_(this,eo).length<=6){const i=_(this,as).lastIndexOf("M");U(this,as,`${_(this,as).slice(0,i)} M ${e} ${t}`),U(this,mu,6)}if(_(this,eo).length===4){const i=Bt.svgRound(_(this,Va)[10]),a=Bt.svgRound(_(this,Va)[11]);return U(this,as,`${_(this,as)} L ${i} ${a}`),U(this,mu,12),_(this,as)}const r=[];_(this,mu)===0&&(r.push(`M ${e} ${t}`),U(this,mu,6));for(let i=_(this,mu),a=_(this,Va).length;i<a;i+=6){const[s,o,l,u,c,h]=_(this,Va).slice(i,i+6).map(Bt.svgRound);r.push(`C${s} ${o} ${l} ${u} ${c} ${h}`)}return U(this,as,_(this,as)+r.join(" ")),U(this,mu,_(this,Va).length),_(this,as)}getOutlines(e,t,r,i){const a=_(this,Ha).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),_(this,yy).build(_(this,Ha),e,t,r,_(this,vy),_(this,H1),i),U(this,Ch,null),U(this,Va,null),U(this,Ha,null),U(this,as,null),_(this,yy)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ch=new WeakMap,Va=new WeakMap,Ha=new WeakMap,vy=new WeakMap,H1=new WeakMap,eo=new WeakMap,as=new WeakMap,mu=new WeakMap,yy=new WeakMap,xy=new WeakMap,_y=new WeakMap,G1=new WeakSet,SR=function(e,t){return Bt._normalizePoint(e,t,_(this,xy),_(this,_y),_(this,vy))};var to,t2,n2,_l,Mh,Dh,j1,W1,by,hs,Bd,Sbe,wbe,Tbe;class G2 extends Bt{constructor(){super(...arguments);$(this,hs);$(this,to);$(this,t2,0);$(this,n2);$(this,_l);$(this,Mh);$(this,Dh);$(this,j1);$(this,W1);$(this,by)}build(t,r,i,a,s,o,l){U(this,Mh,r),U(this,Dh,i),U(this,j1,a),U(this,W1,s),U(this,by,o),U(this,n2,l??0),U(this,_l,t),q(this,hs,wbe).call(this)}get thickness(){return _(this,by)}setLastElement(t){return _(this,_l).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return _(this,_l).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of _(this,_l)){if(t.push(`M${Bt.svgRound(r[4])} ${Bt.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${Bt.svgRound(r[10])} ${Bt.svgRound(r[11])}`);continue}for(let i=6,a=r.length;i<a;i+=6){const[s,o,l,u,c,h]=r.subarray(i,i+6).map(Bt.svgRound);t.push(`C${s} ${o} ${l} ${u} ${c} ${h}`)}}return t.join("")}serialize([t,r,i,a],s){const o=[],l=[],[u,c,h,d]=q(this,hs,Sbe).call(this);let f,p,m,g,v,b,S,w,E;switch(_(this,W1)){case 0:E=Bt._rescale,f=t,p=r+a,m=i,g=-a,v=t+u*i,b=r+(1-c-d)*a,S=t+(u+h)*i,w=r+(1-c)*a;break;case 90:E=Bt._rescaleAndSwap,f=t,p=r,m=i,g=a,v=t+c*i,b=r+u*a,S=t+(c+d)*i,w=r+(u+h)*a;break;case 180:E=Bt._rescale,f=t+i,p=r,m=-i,g=a,v=t+(1-u-h)*i,b=r+c*a,S=t+(1-u)*i,w=r+(c+d)*a;break;case 270:E=Bt._rescaleAndSwap,f=t+i,p=r+a,m=-i,g=-a,v=t+(1-c-d)*i,b=r+(1-u-h)*a,S=t+(1-c)*i,w=r+(1-u)*a;break}for(const{line:T,points:M}of _(this,_l))o.push(E(T,f,p,m,g,s?new Array(T.length):null)),l.push(E(M,f,p,m,g,s?new Array(M.length):null));return{lines:o,points:l,rect:[v,b,S,w]}}static deserialize(t,r,i,a,s,{paths:{lines:o,points:l},rotation:u,thickness:c}){const h=[];let d,f,p,m,g;switch(u){case 0:g=Bt._rescale,d=-t/i,f=r/a+1,p=1/i,m=-1/a;break;case 90:g=Bt._rescaleAndSwap,d=-r/a,f=-t/i,p=1/a,m=1/i;break;case 180:g=Bt._rescale,d=t/i+1,f=-r/a,p=-1/i,m=1/a;break;case 270:g=Bt._rescaleAndSwap,d=r/a+1,f=t/i+1,p=-1/a,m=-1/i;break}if(!o){o=[];for(const b of l){const S=b.length;if(S===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(S===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const w=new Float32Array(3*(S-2));o.push(w);let[E,T,M,P]=b.subarray(0,4);w.set([NaN,NaN,NaN,NaN,E,T],0);for(let I=4;I<S;I+=2){const D=b[I],R=b[I+1];w.set(Bt.createBezierPoints(E,T,M,P,D,R),(I-2)*3),[E,T,M,P]=[M,P,D,R]}}}for(let b=0,S=o.length;b<S;b++)h.push({line:g(o[b].map(w=>w??NaN),d,f,p,m),points:g(l[b].map(w=>w??NaN),d,f,p,m)});const v=new this.prototype.constructor;return v.build(h,i,a,1,u,c,s),v}get box(){return _(this,to)}updateProperty(t,r){return t==="stroke-width"?q(this,hs,Tbe).call(this,r):null}updateParentDimensions([t,r],i){const[a,s]=q(this,hs,Bd).call(this);U(this,Mh,t),U(this,Dh,r),U(this,j1,i);const[o,l]=q(this,hs,Bd).call(this),u=o-a,c=l-s,h=_(this,to);return h[0]-=u,h[1]-=c,h[2]+=2*u,h[3]+=2*c,h}updateRotation(t){return U(this,t2,t),{path:{transform:this.rotationTransform}}}get viewBox(){return _(this,to).map(Bt.svgRound).join(" ")}get defaultProperties(){const[t,r]=_(this,to);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=_(this,to);let i=0,a=0,s=0,o=0,l=0,u=0;switch(_(this,t2)){case 90:a=r/t,s=-t/r,l=t;break;case 180:i=-1,o=-1,l=t,u=r;break;case 270:a=-r/t,s=t/r,u=r;break;default:return""}return`matrix(${i} ${a} ${s} ${o} ${Bt.svgRound(l)} ${Bt.svgRound(u)})`}getPathResizingSVGProperties([t,r,i,a]){const[s,o]=q(this,hs,Bd).call(this),[l,u,c,h]=_(this,to);if(Math.abs(c-s)<=Bt.PRECISION||Math.abs(h-o)<=Bt.PRECISION){const g=t+i/2-(l+c/2),v=r+a/2-(u+h/2);return{path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`,transform:`${this.rotationTransform} translate(${g} ${v})`}}}const d=(i-2*s)/(c-2*s),f=(a-2*o)/(h-2*o),p=c/i,m=h/a;return{path:{"transform-origin":`${Bt.svgRound(l)} ${Bt.svgRound(u)}`,transform:`${this.rotationTransform} scale(${p} ${m}) translate(${Bt.svgRound(s)} ${Bt.svgRound(o)}) scale(${d} ${f}) translate(${Bt.svgRound(-s)} ${Bt.svgRound(-o)})`}}}getPathResizedSVGProperties([t,r,i,a]){const[s,o]=q(this,hs,Bd).call(this),l=_(this,to),[u,c,h,d]=l;if(l[0]=t,l[1]=r,l[2]=i,l[3]=a,Math.abs(h-s)<=Bt.PRECISION||Math.abs(d-o)<=Bt.PRECISION){const v=t+i/2-(u+h/2),b=r+a/2-(c+d/2);for(const{line:S,points:w}of _(this,_l))Bt._translate(S,v,b,S),Bt._translate(w,v,b,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const f=(i-2*s)/(h-2*s),p=(a-2*o)/(d-2*o),m=-f*(u+s)+t+s,g=-p*(c+o)+r+o;if(f!==1||p!==1||m!==0||g!==0)for(const{line:v,points:b}of _(this,_l))Bt._rescale(v,m,g,f,p,v),Bt._rescale(b,m,g,f,p,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],i){const[a,s]=i,o=_(this,to),l=t-o[0],u=r-o[1];if(_(this,Mh)===a&&_(this,Dh)===s)for(const{line:c,points:h}of _(this,_l))Bt._translate(c,l,u,c),Bt._translate(h,l,u,h);else{const c=_(this,Mh)/a,h=_(this,Dh)/s;U(this,Mh,a),U(this,Dh,s);for(const{line:d,points:f}of _(this,_l))Bt._rescale(d,l,u,c,h,d),Bt._rescale(f,l,u,c,h,f);o[2]*=c,o[3]*=h}return o[0]=t,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Bt.svgRound(t)} ${Bt.svgRound(r)}`}}}get defaultSVGProperties(){const t=_(this,to);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Bt.svgRound(t[0])} ${Bt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}to=new WeakMap,t2=new WeakMap,n2=new WeakMap,_l=new WeakMap,Mh=new WeakMap,Dh=new WeakMap,j1=new WeakMap,W1=new WeakMap,by=new WeakMap,hs=new WeakSet,Bd=function(t=_(this,by)){const r=_(this,n2)+t/2*_(this,j1);return _(this,W1)%180===0?[r/_(this,Mh),r/_(this,Dh)]:[r/_(this,Dh),r/_(this,Mh)]},Sbe=function(){const[t,r,i,a]=_(this,to),[s,o]=q(this,hs,Bd).call(this,0);return[t+s,r+o,i-2*s,a-2*o]},wbe=function(){const t=U(this,to,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of _(this,_l)){if(a.length<=12){for(let l=4,u=a.length;l<u;l+=6)It.pointBoundingBox(a[l],a[l+1],t);continue}let s=a[4],o=a[5];for(let l=6,u=a.length;l<u;l+=6){const[c,h,d,f,p,m]=a.subarray(l,l+6);It.bezierBoundingBox(s,o,c,h,d,f,p,m,t),s=p,o=m}}const[r,i]=q(this,hs,Bd).call(this);t[0]=us(t[0]-r,0,1),t[1]=us(t[1]-i,0,1),t[2]=us(t[2]+r,0,1),t[3]=us(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},Tbe=function(t){const[r,i]=q(this,hs,Bd).call(this);U(this,by,t);const[a,s]=q(this,hs,Bd).call(this),[o,l]=[a-r,s-i],u=_(this,to);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};class hO extends _be{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ti._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new hO(this._viewParameters);return e.updateAll(this),e}}var Nk,Ebe;const mb=class mb extends gk{constructor(t){super({...t,name:"inkEditor"});$(this,Nk);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){ti.initialize(t,r),this._defaultDrawingOptions=new hO(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return En(this,"typesMap",new Map([[ir.INK_THICKNESS,"stroke-width"],[ir.INK_COLOR,"stroke"],[ir.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,i,a,s){return new nmt(t,r,i,a,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,i,a,s,o){return G2.deserialize(t,r,i,a,s,o)}static async deserialize(t,r,i){let a=null;if(t instanceof eX){const{data:{inkLists:o,rect:l,rotation:u,id:c,color:h,opacity:d,borderStyle:{rawWidth:f},popupRef:p,richText:m,contentsObj:g,creationDate:v,modificationDate:b},parent:{page:{pageNumber:S}}}=t;a=t={annotationType:Pn.INK,color:Array.from(h),thickness:f,opacity:d,paths:{points:o},boxes:null,pageIndex:S-1,rect:l.slice(0),rotation:u,annotationElementId:c,id:c,deleted:!1,popupRef:p,richText:m,comment:(g==null?void 0:g.str)||null,creationDate:v,modificationDate:b}}const s=await super.deserialize(t,r,i);return s._initialData=a,t.comment&&s.setCommentData(t),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new dk(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ir.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:i}){this._drawingOptions=mb.getDefaultDrawingOptions({stroke:It.makeHexColor(...t),"stroke-width":r,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":s,"stroke-width":o}}=this,l=Object.assign(super.serialize(t),{color:ti._colorManager.convert(a),opacity:s,thickness:o,paths:{lines:r,points:i}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!q(this,Nk,Ebe).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};Nk=new WeakSet,Ebe=function(t){const{color:r,thickness:i,opacity:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==r[l])||t.thickness!==i||t.opacity!==a||t.pageIndex!==s},Fe(mb,"_type","ink"),Fe(mb,"_editorType",Pn.INK),Fe(mb,"_defaultDrawingOptions",null);let L9=mb;class R9 extends G2{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const oL=8,GT=3;var Sy,Ar,N9,gc,Abe,Cbe,k9,wR,Mbe,Dbe,Ibe,O9,B9,Pbe;class Df{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},a,s,o,l){let u=new OffscreenCanvas(1,1),c=u.getContext("2d",{alpha:!1});const h=200,d=c.font=`${r} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:g,fontBoundingBoxAscent:v,fontBoundingBoxDescent:b,width:S}=c.measureText(e),w=1.5,E=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,S)*w),T=Math.ceil(Math.max(Math.abs(m)+Math.abs(g)||h,Math.abs(v)+Math.abs(b)||h)*w);u=new OffscreenCanvas(E,T),c=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),c.font=d,c.filter="grayscale(1)",c.fillStyle="white",c.fillRect(0,0,E,T),c.fillStyle="black",c.fillText(e,E*(w-1)/2,T*(3-w)/2);const M=q(this,Ar,O9).call(this,c.getImageData(0,0,E,T).data),P=q(this,Ar,Ibe).call(this,M),I=q(this,Ar,B9).call(this,P),D=q(this,Ar,k9).call(this,M,E,T,I);return this.processDrawnLines({lines:{curves:D,width:E,height:T},pageWidth:a,pageHeight:s,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,a){const[s,o,l]=q(this,Ar,Pbe).call(this,e),[u,c]=q(this,Ar,Dbe).call(this,s,o,l,Math.hypot(o,l)*_(this,Sy).sigmaSFactor,_(this,Sy).sigmaR,_(this,Sy).kernelSize),h=q(this,Ar,B9).call(this,c),d=q(this,Ar,k9).call(this,u,o,l,h);return this.processDrawnLines({lines:{curves:d,width:o,height:l},pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:s,areContours:o}){i%180!==0&&([t,r]=[r,t]);const{curves:l,width:u,height:c}=e,h=e.thickness??0,d=[],f=Math.min(t/u,r/c),p=f/t,m=f/r,g=[];for(const{points:b}of l){const S=s?q(this,Ar,Mbe).call(this,b):b;if(!S)continue;g.push(S);const w=S.length,E=new Float32Array(w),T=new Float32Array(3*(w===2?2:w-2));if(d.push({line:T,points:E}),w===2){E[0]=S[0]*p,E[1]=S[1]*m,T.set([NaN,NaN,NaN,NaN,E[0],E[1]],0);continue}let[M,P,I,D]=S;M*=p,P*=m,I*=p,D*=m,E.set([M,P,I,D],0),T.set([NaN,NaN,NaN,NaN,M,P],0);for(let R=4;R<w;R+=2){const B=E[R]=S[R]*p,k=E[R+1]=S[R+1]*m;T.set(Bt.createBezierPoints(M,P,I,D,B,k),(R-2)*3),[M,P,I,D]=[I,D,B,k]}}if(d.length===0)return null;const v=o?new R9:new G2;return v.build(d,t,r,1,i,o?0:h,a),{outline:v,newCurves:g,areContours:o,thickness:h,width:u,height:c}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:a}){let s=1/0,o=-1/0,l=0;for(const S of e){l+=S.length;for(let w=2,E=S.length;w<E;w++){const T=S[w]-S[w-2];s=Math.min(s,T),o=Math.max(o,T)}}let u;s>=-128&&o<=127?u=Int8Array:s>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const c=e.length,h=oL+GT*c,d=new Uint32Array(h);let f=0;d[f++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*c)*u.BYTES_PER_ELEMENT,d[f++]=0,d[f++]=i,d[f++]=a,d[f++]=t?0:1,d[f++]=Math.max(0,Math.floor(r??0)),d[f++]=c,d[f++]=u.BYTES_PER_ELEMENT;for(const S of e)d[f++]=S.length-2,d[f++]=S[0],d[f++]=S[1];const p=new CompressionStream("deflate-raw"),m=p.writable.getWriter();await m.ready,m.write(d);const g=u.prototype.constructor;for(const S of e){const w=new g(S.length-2);for(let E=2,T=S.length;E<T;E++)w[E-2]=S[E]-S[E-2];m.write(w)}m.close();const v=await new Response(p.readable).arrayBuffer();return new Uint8Array(v).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,o=0;for await(const S of r)s||(s=new Uint8Array(new Uint32Array(S.buffer,0,4)[0])),s.set(S,o),o+=S.length;const l=new Uint32Array(s.buffer,0,s.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const c=l[2],h=l[3],d=l[4]===0,f=l[5],p=l[6],m=l[7],g=[],v=(oL+GT*p)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(m){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(s.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(s.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(s.buffer,v);break}o=0;for(let S=0;S<p;S++){const w=l[GT*S+oL],E=new Float32Array(w+2);g.push(E);for(let T=0;T<GT-1;T++)E[T]=l[GT*S+oL+T+1];for(let T=0;T<w;T++)E[T+2]=E[T]+b[o++]}return{areContours:d,thickness:f,outlines:g,width:c,height:h}}catch(t){return wn(`decompressSignature: ${t}`),null}}}Sy=new WeakMap,Ar=new WeakSet,N9=function(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i},gc=new WeakMap,Abe=function(e,t,r,i,a,s,o){const l=q(this,Ar,N9).call(this,r,i,a,s);for(let u=0;u<8;u++){const c=(-u+l-o+16)%8,h=_(this,gc)[2*c],d=_(this,gc)[2*c+1];if(e[(r+h)*t+(i+d)]!==0)return c}return-1},Cbe=function(e,t,r,i,a,s,o){const l=q(this,Ar,N9).call(this,r,i,a,s);for(let u=0;u<8;u++){const c=(u+l+o+16)%8,h=_(this,gc)[2*c],d=_(this,gc)[2*c+1];if(e[(r+h)*t+(i+d)]!==0)return c}return-1},k9=function(e,t,r,i){const a=e.length,s=new Int32Array(a);for(let c=0;c<a;c++)s[c]=e[c]<=i?1:0;for(let c=1;c<r-1;c++)s[c*t]=s[c*t+t-1]=0;for(let c=0;c<t;c++)s[c]=s[t*r-1-c]=0;let o=1,l;const u=[];for(let c=1;c<r-1;c++){l=1;for(let h=1;h<t-1;h++){const d=c*t+h,f=s[d];if(f===0)continue;let p=c,m=h;if(f===1&&s[d-1]===0)o+=1,m-=1;else if(f>=1&&s[d+1]===0)o+=1,m+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}const g=[h,c],v=m===h+1,b={isHole:v,points:g,id:o,parent:0};u.push(b);let S;for(const R of u)if(R.id===l){S=R;break}S?S.isHole?b.parent=v?S.parent:l:b.parent=v?l:S.parent:b.parent=v?l:0;const w=q(this,Ar,Abe).call(this,s,t,c,h,p,m,0);if(w===-1){s[d]=-o,s[d]!==1&&(l=Math.abs(s[d]));continue}let E=_(this,gc)[2*w],T=_(this,gc)[2*w+1];const M=c+E,P=h+T;p=M,m=P;let I=c,D=h;for(;;){const R=q(this,Ar,Cbe).call(this,s,t,I,D,p,m,1);E=_(this,gc)[2*R],T=_(this,gc)[2*R+1];const B=I+E,k=D+T;g.push(k,B);const V=I*t+D;if(s[V+1]===0?s[V]=-o:s[V]===1&&(s[V]=o),B===c&&k===h&&I===M&&D===P){s[d]!==1&&(l=Math.abs(s[d]));break}else p=I,m=D,I=B,D=k}}}return u},wR=function(e,t,r,i){if(r-t<=4){for(let M=t;M<r-2;M+=2)i.push(e[M],e[M+1]);return}const a=e[t],s=e[t+1],o=e[r-4]-a,l=e[r-3]-s,u=Math.hypot(o,l),c=o/u,h=l/u,d=c*s-h*a,f=l/o,p=1/u,m=Math.atan(f),g=Math.cos(m),v=Math.sin(m),b=p*(Math.abs(g)+Math.abs(v)),S=p*(1-b+b**2),w=Math.max(Math.atan(Math.abs(v+g)*S),Math.atan(Math.abs(v-g)*S));let E=0,T=t;for(let M=t+2;M<r-2;M+=2){const P=Math.abs(d-c*e[M+1]+h*e[M]);P>E&&(T=M,E=P)}E>(u*w)**2?(q(this,Ar,wR).call(this,e,t,T+2,i),q(this,Ar,wR).call(this,e,T,r,i)):i.push(a,s)},Mbe=function(e){const t=[],r=e.length;return q(this,Ar,wR).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},Dbe=function(e,t,r,i,a,s){const o=new Float32Array(s**2),l=-2*i**2,u=s>>1;for(let m=0;m<s;m++){const g=(m-u)**2;for(let v=0;v<s;v++)o[m*s+v]=Math.exp((g+(v-u)**2)/l)}const c=new Float32Array(256),h=-2*a**2;for(let m=0;m<256;m++)c[m]=Math.exp(m**2/h);const d=e.length,f=new Uint8Array(d),p=new Uint32Array(256);for(let m=0;m<r;m++)for(let g=0;g<t;g++){const v=m*t+g,b=e[v];let S=0,w=0;for(let T=0;T<s;T++){const M=m+T-u;if(!(M<0||M>=r))for(let P=0;P<s;P++){const I=g+P-u;if(I<0||I>=t)continue;const D=e[M*t+I],R=o[T*s+P]*c[Math.abs(D-b)];S+=D*R,w+=R}}const E=f[v]=Math.round(S/w);p[E]++}return[f,p]},Ibe=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},O9=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,a=1/0;for(let o=0,l=r.length;o<l;o++){const u=r[o]=e[o<<2];i=Math.max(i,u),a=Math.min(a,u)}const s=255/(i-a);for(let o=0,l=r.length;o<l;o++)r[o]=(r[o]-a)*s;return r},B9=function(e){let t,r=-1/0,i=-1/0;const a=e.findIndex(l=>l!==0);let s=a,o=a;for(t=a;t<256;t++){const l=e[t];l>r&&(t-s>i&&(i=t-s,o=t-1),r=l,s=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Pbe=function(e){const t=e,{width:r,height:i}=e,{maxDim:a}=_(this,Sy);let s=r,o=i;if(r>a||i>a){let d=r,f=i,p=Math.log2(Math.max(r,i)/a);const m=Math.floor(p);p=p===m?m-1:m;for(let v=0;v<p;v++){s=Math.ceil(d/2),o=Math.ceil(f/2);const b=new OffscreenCanvas(s,o);b.getContext("2d").drawImage(e,0,0,d,f,0,0,s,o),d=s,f=o,e!==t&&e.close(),e=b.transferToImageBitmap()}const g=Math.min(a/s,a/o);s=Math.round(s*g),o=Math.round(o*g)}const u=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,s,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,s,o);const c=u.getImageData(0,0,s,o).data;return[q(this,Ar,O9).call(this,c),s,o]},$(Df,Ar),$(Df,Sy,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),$(Df,gc,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class tX extends _be{constructor(){super(),super.updateProperties({fill:ti._defaultLineColor,"stroke-width":0})}clone(){const e=new tX;return e.updateAll(this),e}}class nX extends hO{constructor(e){super(e),super.updateProperties({stroke:ti._defaultLineColor,"stroke-width":1})}clone(){const e=new nX(this._viewParameters);return e.updateAll(this),e}}var jm,Ih,Wm,wy;const nl=class nl extends gk{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});$(this,jm,!1);$(this,Ih,null);$(this,Wm,null);$(this,wy,null);this._willKeepAspectRatio=!0,U(this,Wm,t.signatureData||null),U(this,Ih,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){ti.initialize(t,r),this._defaultDrawingOptions=new tX,this._defaultDrawnSignatureOptions=new nX(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return En(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!_(this,Ih)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(_(this,Wm)){const{lines:a,mustSmooth:s,areContours:o,description:l,uuid:u,heightInPage:c}=_(this,Wm),{rawDims:{pageWidth:h,pageHeight:d},rotation:f}=this.parent.viewport,p=Df.processDrawnLines({lines:a,pageWidth:h,pageHeight:d,rotation:f,innerMargin:nl._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(p,c,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:_(this,Ih)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){U(this,wy,t),this.addEditToolbar()}getUuid(){return _(this,wy)}get description(){return _(this,Ih)}set description(t){U(this,Ih,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:i,width:a,height:s}=_(this,Wm),o=Math.max(a,s),l=Df.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:i,width:a,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,i,a){const{x:s,y:o}=this,{outline:l}=U(this,Wm,t);U(this,jm,l instanceof R9),this.description=i;let u;_(this,jm)?u=nl.getDefaultDrawingOptions():(u=nl._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,c]=this.pageDimensions;let h=r/c;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Df.process(t,r,i,a,nl._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:i,pageHeight:a},rotation:s}=this.parent.viewport;return Df.extractContoursFromText(t,r,i,a,s,nl._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return Df.processDrawnLines({lines:t,pageWidth:r,pageHeight:i,rotation:a,innerMargin:nl._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=nl.getDefaultDrawingOptions():(this._drawingOptions=nl._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,s=Object.assign(super.serialize(t),{isSignature:!0,areContours:_(this,jm),color:[0,0,0],thickness:_(this,jm)?0:a});return this.addComment(s),t?(s.paths={lines:r,points:i},s.uuid=_(this,wy),s.isCopy=!0):s.lines=r,_(this,Ih)&&(s.accessibilityData={type:"Figure",alt:_(this,Ih)}),s}static deserializeDraw(t,r,i,a,s,o){return o.areContours?R9.deserialize(t,r,i,a,s,o):G2.deserialize(t,r,i,a,s,o)}static async deserialize(t,r,i){var s;const a=await super.deserialize(t,r,i);return U(a,jm,t.areContours),a.description=((s=t.accessibilityData)==null?void 0:s.alt)||"",U(a,wy,t.uuid),a}};jm=new WeakMap,Ih=new WeakMap,Wm=new WeakMap,wy=new WeakMap,Fe(nl,"_type","signature"),Fe(nl,"_editorType",Pn.SIGNATURE),Fe(nl,"_defaultDrawingOptions",null);let F9=nl;var di,Ga,Xm,_f,$m,X1,bf,Ty,Ph,bl,$1,hr,CE,ME,TR,ER,AR,z9,CR,Lbe;class U9 extends ti{constructor(t){super({...t,name:"stampEditor"});$(this,hr);$(this,di,null);$(this,Ga,null);$(this,Xm,null);$(this,_f,null);$(this,$m,null);$(this,X1,"");$(this,bf,null);$(this,Ty,!1);$(this,Ph,null);$(this,bl,!1);$(this,$1,!1);U(this,_f,t.bitmapUrl),U(this,$m,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){ti.initialize(t,r)}static isHandlingMimeForPasting(t){return SH.includes(t)}static paste(t,r){r.pasteEditor({mode:Pn.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:s,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:a,width:s,height:o,channels:a.length/(s*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;_(this,Ga)&&(U(this,di,null),this._uiManager.imageManager.deleteId(_(this,Ga)),(t=_(this,bf))==null||t.remove(),U(this,bf,null),_(this,Ph)&&(clearTimeout(_(this,Ph)),U(this,Ph,null))),super.remove()}rebuild(){if(!this.parent){_(this,Ga)&&q(this,hr,TR).call(this);return}super.rebuild(),this.div!==null&&(_(this,Ga)&&_(this,bf)===null&&q(this,hr,TR).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(_(this,Xm)||_(this,di)||_(this,_f)||_(this,$m)||_(this,Ga)||_(this,Ty))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),_(this,Ty)||(_(this,di)?q(this,hr,ER).call(this):q(this,hr,TR).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(U(this,Ga,i),a&&U(this,di,a),U(this,Ty,!1),q(this,hr,ER).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;_(this,Ph)!==null&&clearTimeout(_(this,Ph)),U(this,Ph,setTimeout(()=>{U(this,Ph,null),q(this,hr,z9).call(this)},200))}copyCanvas(t,r,i=!1){t||(t=224);const{width:a,height:s}=_(this,di),o=new ud;let l=_(this,di),u=a,c=s,h=null;if(r){if(a>r||s>r){const M=Math.min(r/a,r/s);u=Math.floor(a*M),c=Math.floor(s*M)}h=document.createElement("canvas");const f=h.width=Math.ceil(u*o.sx),p=h.height=Math.ceil(c*o.sy);_(this,bl)||(l=q(this,hr,AR).call(this,f,p));const m=h.getContext("2d");m.filter=this._uiManager.hcmFilter;let g="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":Tft.isDarkMode&&(g="#8f8f9d",v="#42414d");const b=15,S=b*o.sx,w=b*o.sy,E=new OffscreenCanvas(S*2,w*2),T=E.getContext("2d");T.fillStyle=g,T.fillRect(0,0,S*2,w*2),T.fillStyle=v,T.fillRect(0,0,S,w),T.fillRect(S,w,S,w),m.fillStyle=m.createPattern(E,"repeat"),m.fillRect(0,0,f,p),m.drawImage(l,0,0,l.width,l.height,0,0,f,p)}let d=null;if(i){let f,p;if(o.symmetric&&l.width<t&&l.height<t)f=l.width,p=l.height;else if(l=_(this,di),a>t||s>t){const v=Math.min(t/a,t/s);f=Math.floor(a*v),p=Math.floor(s*v),_(this,bl)||(l=q(this,hr,AR).call(this,f,p))}const g=new OffscreenCanvas(f,p).getContext("2d",{willReadFrequently:!0});g.drawImage(l,0,0,l.width,l.height,0,0,f,p),d={width:f,height:p,data:g.getImageData(0,0,f,p).data}}return{canvas:h,width:u,height:c,imageData:d}}static async deserialize(t,r,i){var g;let a=null,s=!1;if(t instanceof Y_e){const{data:{rect:v,rotation:b,id:S,structParent:w,popupRef:E,richText:T,contentsObj:M,creationDate:P,modificationDate:I},container:D,parent:{page:{pageNumber:R}},canvas:B}=t;let k,V;B?(delete t.canvas,{id:k,bitmap:V}=i.imageManager.getFromCanvas(D.id,B),B.remove()):(s=!0,t._hasNoCanvas=!0);const G=((g=await r._structTree.getAriaAttributes(`${cb}${S}`))==null?void 0:g.get("aria-label"))||"";a=t={annotationType:Pn.STAMP,bitmapId:k,bitmap:V,pageIndex:R-1,rect:v.slice(0),rotation:b,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:G},isSvg:!1,structParent:w,popupRef:E,richText:T,comment:(M==null?void 0:M.str)||null,creationDate:P,modificationDate:I}}const o=await super.deserialize(t,r,i),{rect:l,bitmap:u,bitmapUrl:c,bitmapId:h,isSvg:d,accessibilityData:f}=t;s?(i.addMissingCanvas(t.id,o),U(o,Ty,!0)):h&&i.imageManager.isValidId(h)?(U(o,Ga,h),u&&U(o,di,u)):U(o,_f,c),U(o,bl,d);const[p,m]=o.pageDimensions;return o.width=(l[2]-l[0])/p,o.height=(l[3]-l[1])/m,f&&(o.altTextData=f),o._initialData=a,t.comment&&o.setCommentData(t),U(o,$1,!!a),o}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:_(this,Ga),isSvg:_(this,bl)});if(this.addComment(i),t)return i.bitmapUrl=q(this,hr,CR).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const l=q(this,hr,Lbe).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);const o=_(this,bl)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(_(this,Ga)))r.stamps.set(_(this,Ga),{area:o,serialized:i}),i.bitmap=q(this,hr,CR).call(this,!1);else if(_(this,bl)){const l=r.stamps.get(_(this,Ga));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=q(this,hr,CR).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}di=new WeakMap,Ga=new WeakMap,Xm=new WeakMap,_f=new WeakMap,$m=new WeakMap,X1=new WeakMap,bf=new WeakMap,Ty=new WeakMap,Ph=new WeakMap,bl=new WeakMap,$1=new WeakMap,hr=new WeakSet,CE=function(t,r=!1){if(!t){this.remove();return}U(this,di,t.bitmap),r||(U(this,Ga,t.id),U(this,bl,t.isSvg)),t.file&&U(this,X1,t.file.name),q(this,hr,ER).call(this)},ME=function(){if(U(this,Xm,null),this._uiManager.enableWaiting(!1),!!_(this,bf)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&_(this,di)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&_(this,di)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},TR=function(){if(_(this,Ga)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(_(this,Ga)).then(i=>q(this,hr,CE).call(this,i,!0)).finally(()=>q(this,hr,ME).call(this));return}if(_(this,_f)){const i=_(this,_f);U(this,_f,null),this._uiManager.enableWaiting(!0),U(this,Xm,this._uiManager.imageManager.getFromUrl(i).then(a=>q(this,hr,CE).call(this,a)).finally(()=>q(this,hr,ME).call(this)));return}if(_(this,$m)){const i=_(this,$m);U(this,$m,null),this._uiManager.enableWaiting(!0),U(this,Xm,this._uiManager.imageManager.getFromFile(i).then(a=>q(this,hr,CE).call(this,a)).finally(()=>q(this,hr,ME).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=SH.join(",");const r=this._uiManager._signal;U(this,Xm,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),q(this,hr,CE).call(this,a)}i()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>q(this,hr,ME).call(this))),t.click()},ER=function(){var u;const{div:t}=this;let{width:r,height:i}=_(this,di);const[a,s]=this.pageDimensions,o=.75;if(this.width)r=this.width*a,i=this.height*s;else if(r>o*a||i>o*s){const c=Math.min(o*a/r,o*s/i);r*=c,i*=c}this._uiManager.enableWaiting(!1);const l=U(this,bf,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=r/a,this.height=i/s,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),q(this,hr,z9).call(this),_(this,$1)||(this.parent.addUndoableEditor(this),U(this,$1,!0)),this._reportTelemetry({action:"inserted_image"}),_(this,X1)&&this.div.setAttribute("aria-description",_(this,X1)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},AR=function(t,r){const{width:i,height:a}=_(this,di);let s=i,o=a,l=_(this,di);for(;s>2*t||o>2*r;){const u=s,c=o;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(s,o);h.getContext("2d").drawImage(l,0,0,u,c,0,0,s,o),l=h.transferToImageBitmap()}return l},z9=function(){const[t,r]=this.parentDimensions,{width:i,height:a}=this,s=new ud,o=Math.ceil(i*t*s.sx),l=Math.ceil(a*r*s.sy),u=_(this,bf);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const c=_(this,bl)?_(this,di):q(this,hr,AR).call(this,o,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,o,l)},CR=function(t){if(t){if(_(this,bl)){const a=this._uiManager.imageManager.getSvgUrl(_(this,Ga));if(a)return a}const r=document.createElement("canvas");return{width:r.width,height:r.height}=_(this,di),r.getContext("2d").drawImage(_(this,di),0,0),r.toDataURL()}if(_(this,bl)){const[r,i]=this.pageDimensions,a=Math.round(this.width*r*Ig.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Ig.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(a,s);return o.getContext("2d").drawImage(_(this,di),0,0,_(this,di).width,_(this,di).height,0,0,a,s),o.transferToImageBitmap()}return structuredClone(_(this,di))},Lbe=function(t){var o;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===r,s=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}},Fe(U9,"_type","stamp"),Fe(U9,"_editorType",Pn.STAMP);var Ey,Y1,Ym,qm,Sf,Bo,Km,q1,K1,vc,wf,ja,Tf,Zm,Z1,qt,Qm,Xr,H9,Rbe,sh,G9,j9,MR;const ic=class ic{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:l,viewport:u,l10n:c}){$(this,Xr);$(this,Ey);$(this,Y1,!1);$(this,Ym,null);$(this,qm,null);$(this,Sf,null);$(this,Bo,new Map);$(this,Km,!1);$(this,q1,!1);$(this,K1,!1);$(this,vc,null);$(this,wf,null);$(this,ja,null);$(this,Tf,null);$(this,Zm,null);$(this,Z1,-1);$(this,qt);const h=[..._(ic,Qm).values()];if(!ic._initialized){ic._initialized=!0;for(const d of h)d.initialize(c,e)}e.registerEditorTypes(h),U(this,qt,e),this.pageIndex=t,this.div=r,U(this,Ey,a),U(this,Ym,s),this.viewport=u,U(this,ja,l),this.drawLayer=o,this._structTree=i,_(this,qt).addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return _(this,Bo).size===0}get isInvisible(){return this.isEmpty&&_(this,qt).getMode()===Pn.NONE}updateToolbar(e){_(this,qt).updateToolbar(e)}updateMode(e=_(this,qt).getMode()){switch(q(this,Xr,MR).call(this),e){case Pn.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Pn.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Pn.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Pn.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of _(ic,Qm).values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=_(this,ja))==null?void 0:t.div)}setEditingState(e){_(this,qt).setEditingState(e)}addCommands(e){_(this,qt).addCommands(e)}cleanUndoStack(e){_(this,qt).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=_(this,Ym))==null||t.togglePointerEvents(e)}async enable(){var r;U(this,K1,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=_(this,Zm))==null||r.abort(),U(this,Zm,null);const e=new Set;for(const i of _(this,Xr,H9))i.enableEditing(),i.show(!0),i.annotationElementId&&(_(this,qt).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=_(this,Ym);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),_(this,qt).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}U(this,K1,!1),_(this,qt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(U(this,q1,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),_(this,ja)&&!_(this,Zm)){U(this,Zm,new AbortController);const a=_(this,qt).combinedSignal(_(this,Zm));_(this,ja).div.addEventListener("pointerdown",s=>{const{clientX:l,clientY:u,timeStamp:c}=s,h=_(this,Z1);if(c-h>500){U(this,Z1,c);return}U(this,Z1,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,u);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const m=new RegExp(`^${iC}[0-9]+$`);for(const v of f)if(m.test(v.id)){p=v.id;break}if(!p)return;const g=_(this,Bo).get(p);(g==null?void 0:g.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),g.dblclick(s))},{signal:a,capture:!0})}const e=_(this,Ym),t=[];if(e){const a=new Map,s=new Map;for(const l of _(this,Xr,H9)){if(l.disableEditing(),!l.annotationElementId){t.push(l);continue}if(l.serialize()!==null){a.set(l.annotationElementId,l);continue}else s.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(_(this,qt).isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let c=s.get(u);if(c){c.resetAnnotationElement(l),c.show(!1),l.show();continue}c=a.get(u),c&&(_(this,qt).addChangedExistingAnnotation(c),c.renderAnnotationElement(l)&&c.show(!1)),l.show()}}q(this,Xr,MR).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const a of _(ic,Qm).values())r.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e==null||e.updateFakeAnnotations(t),U(this,q1,!1)}getEditableAnnotation(e){var t;return((t=_(this,Ym))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){_(this,qt).getActive()!==e&&_(this,qt).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=_(this,ja))!=null&&e.div&&!_(this,Tf)){U(this,Tf,new AbortController);const t=_(this,qt).combinedSignal(_(this,Tf));_(this,ja).div.addEventListener("pointerdown",q(this,Xr,Rbe).bind(this),{signal:t}),_(this,ja).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=_(this,ja))!=null&&e.div&&_(this,Tf)&&(_(this,Tf).abort(),U(this,Tf,null),_(this,ja).div.classList.remove("highlighting"))}enableClick(){if(_(this,qm))return;U(this,qm,new AbortController);const e=_(this,qt).combinedSignal(_(this,qm));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=_(this,qm))==null||e.abort(),U(this,qm,null)}attach(e){_(this,Bo).set(e.id,e);const{annotationElementId:t}=e;t&&_(this,qt).isDeletedAnnotationElement(t)&&_(this,qt).removeDeletedAnnotationElement(e)}detach(e){var t;_(this,Bo).delete(e.id),(t=_(this,Ey))==null||t.removePointerInTextLayer(e.contentDiv),!_(this,q1)&&e.annotationElementId&&_(this,qt).addDeletedAnnotationElement(e)}remove(e){this.detach(e),_(this,qt).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(_(this,qt).addDeletedAnnotationElement(e),ti.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),_(this,qt).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!_(this,K1)),_(this,qt).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!_(this,Sf)&&(e._focusEventsAllowed=!1,U(this,Sf,setTimeout(()=>{U(this,Sf,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:_(this,qt)._signal}),t.focus())},0))),e._structTreeParentId=(r=_(this,Ey))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of _(this,Bo).values())if(t.uid===e)return t;return null}getNextId(){return _(this,qt).getId()}combinedSignal(e){return _(this,qt).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=_(this,Xr,sh))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await _(this,qt).updateMode(e.mode);const{offsetX:r,offsetY:i}=q(this,Xr,j9).call(this),a=this.getNextId(),s=q(this,Xr,G9).call(this,{parent:this,id:a,x:r,y:i,uiManager:_(this,qt),isCentered:!0,...t});s&&this.add(s)}async deserialize(e){var t;return await((t=_(ic,Qm).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,_(this,qt)))||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),a=q(this,Xr,G9).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:_(this,qt),isCentered:t,...r});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(q(this,Xr,j9).call(this),!0,e)}setSelected(e){_(this,qt).setSelected(e)}toggleSelected(e){_(this,qt).toggleSelected(e)}unselect(e){_(this,qt).unselect(e)}pointerup(e){var i;const{isMac:t}=Ea.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!_(this,Km)||(U(this,Km,!1),(i=_(this,Xr,sh))!=null&&i.isDrawer&&_(this,Xr,sh).supportMultipleDrawings))return;if(!_(this,Y1)){U(this,Y1,!0);return}const r=_(this,qt).getMode();if(r===Pn.STAMP||r===Pn.SIGNATURE){_(this,qt).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(_(this,qt).getMode()===Pn.HIGHLIGHT&&this.enableTextSelection(),_(this,Km)){U(this,Km,!1);return}const{isMac:t}=Ea.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(U(this,Km,!0),(i=_(this,Xr,sh))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=_(this,qt).getActive();U(this,Y1,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),_(this,vc)){_(this,Xr,sh).startDrawing(this,_(this,qt),!1,e);return}_(this,qt).setCurrentDrawingSession(this),U(this,vc,new AbortController);const t=_(this,qt).combinedSignal(_(this,vc));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(U(this,wf,null),this.commitOrRemove())},{signal:t}),_(this,Xr,sh).startDrawing(this,_(this,qt),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&U(this,wf,t);return}_(this,wf)&&setTimeout(()=>{var t;(t=_(this,wf))==null||t.focus(),U(this,wf,null)},0)}endDrawingSession(e=!1){return _(this,vc)?(_(this,qt).setCurrentDrawingSession(null),_(this,vc).abort(),U(this,vc,null),U(this,wf,null),_(this,Xr,sh).endDrawing(e)):null}findNewParent(e,t,r){const i=_(this,qt).findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return _(this,vc)?(this.endDrawingSession(),!0):!1}onScaleChanging(){_(this,vc)&&_(this,Xr,sh).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=_(this,qt).getActive())==null?void 0:e.parent)===this&&(_(this,qt).commitOrRemove(),_(this,qt).setActiveEditor(null)),_(this,Sf)&&(clearTimeout(_(this,Sf)),U(this,Sf,null));for(const r of _(this,Bo).values())(t=_(this,Ey))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,_(this,Bo).clear(),_(this,qt).removeLayer(this)}render({viewport:e}){this.viewport=e,Qy(this.div,e);for(const t of _(this,qt).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){_(this,qt).commitOrRemove(),q(this,Xr,MR).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,Qy(this.div,{rotation:r}),t!==r)for(const i of _(this,Bo).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return _(this,qt).viewParameters.realScale}};Ey=new WeakMap,Y1=new WeakMap,Ym=new WeakMap,qm=new WeakMap,Sf=new WeakMap,Bo=new WeakMap,Km=new WeakMap,q1=new WeakMap,K1=new WeakMap,vc=new WeakMap,wf=new WeakMap,ja=new WeakMap,Tf=new WeakMap,Zm=new WeakMap,Z1=new WeakMap,qt=new WeakMap,Qm=new WeakMap,Xr=new WeakSet,H9=function(){return _(this,Bo).size!==0?_(this,Bo).values():_(this,qt).getEditors(this.pageIndex)},Rbe=function(e){_(this,qt).unselectAll();const{target:t}=e;if(t===_(this,ja).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&_(this,ja).div.contains(t)){const{isMac:r}=Ea.platform;if(e.button!==0||e.ctrlKey&&r)return;_(this,qt).showAllEditors("highlight",!0,!0),_(this,ja).div.classList.add("free"),this.toggleDrawing(),mk.startHighlighting(this,_(this,qt).direction==="ltr",{target:_(this,ja).div,x:e.x,y:e.y}),_(this,ja).div.addEventListener("pointerup",()=>{_(this,ja).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:_(this,qt)._signal}),e.preventDefault()}},sh=function(){return _(ic,Qm).get(_(this,qt).getMode())},G9=function(e){const t=_(this,Xr,sh);return t?new t.prototype.constructor(e):null},j9=function(){const{x:e,y:t,width:r,height:i}=this.boundingClientRect,a=Math.max(0,e),s=Math.max(0,t),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+i),u=(a+o)/2-e,c=(s+l)/2-t,[h,d]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:h,offsetY:d}},MR=function(){for(const e of _(this,Bo).values())e.isEmpty()&&e.remove()},Fe(ic,"_initialized",!1),$(ic,Qm,new Map([S9,L9,U9,mk,F9].map(e=>[e._editorType,e])));let V9=ic;var yc,no,Ay,r2,kk,Nbe,hd,X9,kbe,$9;const ya=class ya{constructor(){$(this,hd);$(this,yc,null);$(this,no,new Map);$(this,Ay,new Map)}setParent(e){if(!_(this,yc)){U(this,yc,e);return}if(_(this,yc)!==e){if(_(this,no).size>0)for(const t of _(this,no).values())t.remove(),e.append(t);U(this,yc,e)}}static get _svgFactory(){return En(this,"_svgFactory",new fk)}draw(e,t=!1,r=!1){const i=ma(ya,r2)._++,a=q(this,hd,X9).call(this),s=ya._svgFactory.createElement("defs");a.append(s);const o=ya._svgFactory.createElement("path");s.append(o);const l=`path_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&_(this,Ay).set(i,o);const u=r?q(this,hd,kbe).call(this,s,l):null,c=ya._svgFactory.createElement("use");return a.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(a,e),_(this,no).set(i,a),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,t){const r=ma(ya,r2)._++,i=q(this,hd,X9).call(this),a=ya._svgFactory.createElement("defs");i.append(a);const s=ya._svgFactory.createElement("path");a.append(s);const o=`path_${r}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=ya._svgFactory.createElement("mask");a.append(h),l=`mask_${r}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const d=ya._svgFactory.createElement("rect");h.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=ya._svgFactory.createElement("use");h.append(f),f.setAttribute("href",`#${o}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const u=ya._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return i.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(i,e),_(this,no).set(r,i),r}finalizeDraw(e,t){_(this,Ay).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:i,rootClass:a,path:s}=t,o=typeof e=="number"?_(this,no).get(e):e;if(o){if(r&&q(this,hd,$9).call(this,o,r),i&&q(l=ya,kk,Nbe).call(l,o,i),a){const{classList:u}=o;for(const[c,h]of Object.entries(a))u.toggle(c,h)}if(s){const c=o.firstElementChild.firstElementChild;q(this,hd,$9).call(this,c,s)}}}updateParent(e,t){if(t===this)return;const r=_(this,no).get(e);r&&(_(t,yc).append(r),_(this,no).delete(e),_(t,no).set(e,r))}remove(e){_(this,Ay).delete(e),_(this,yc)!==null&&(_(this,no).get(e).remove(),_(this,no).delete(e))}destroy(){U(this,yc,null);for(const e of _(this,no).values())e.remove();_(this,no).clear(),_(this,Ay).clear()}};yc=new WeakMap,no=new WeakMap,Ay=new WeakMap,r2=new WeakMap,kk=new WeakSet,Nbe=function(e,[t,r,i,a]){const{style:s}=e;s.top=`${100*r}%`,s.left=`${100*t}%`,s.width=`${100*i}%`,s.height=`${100*a}%`},hd=new WeakSet,X9=function(){const e=ya._svgFactory.create(1,1,!0);return _(this,yc).append(e),e.setAttribute("aria-hidden",!0),e},kbe=function(e,t){const r=ya._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=ya._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),i},$9=function(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)},$(ya,kk),$(ya,r2,0);let W9=ya;globalThis._pdfjsTestingUtils={HighlightOutliner:T9};globalThis.pdfjsLib={AbortException:Dg,AnnotationEditorLayer:V9,AnnotationEditorParamsType:ir,AnnotationEditorType:Pn,AnnotationEditorUIManager:Jy,AnnotationLayer:_9,AnnotationMode:im,AnnotationType:ra,applyOpacity:Aft,build:Rpt,ColorPicker:hk,createValidAbsoluteUrl:fxe,CSSConstants:Eft,DOMSVGFactory:fk,DrawLayer:W9,FeatureTest:Ea,fetchData:U2,findContrastColor:Cft,getDocument:L_e,getFilenameFromUrl:xft,getPdfFilenameFromUrl:_ft,getRGB:V2,getUuid:mxe,getXfaPageViewport:Sft,GlobalWorkerOptions:Mf,ImageKind:YL,InvalidPDFException:_H,isDataScheme:aO,isPdfFile:qW,isValidExplicitDest:Fft,MathClamp:us,noContextMenu:Bu,normalizeUnicode:vft,OPS:aC,OutputScale:ud,PagesMapper:oC,PasswordResponses:oft,PDFDataRangeTransport:R_e,PDFDateString:ak,PDFWorker:uC,PermissionFlag:sft,PixelsPerInch:Ig,RenderingCancelledException:YW,renderRichText:vxe,ResponseException:ik,setLayerDimensions:Qy,shadow:En,SignatureExtractor:Df,stopEvent:Ri,SupportedImageMimeTypes:SH,TextLayer:lC,TouchManager:ok,updateUrlHash:pxe,Util:It,VerbosityLevel:tO,version:Lpt,XfaLayer:gxe};function rmt(){const[n,e]=ee.useState(!1),[t,r]=ee.useState(null),[i,a]=ee.useState({mastered:!0,good:!0,weak:!0,veryWeak:!0,notLearned:!1}),[s,o]=ee.useState(!1),[l,u]=ee.useState(null),c=ee.useRef(null),h=ee.useRef(null),d={totalStudyTime:128,completedCourses:24,skillMasteryRate:68,practicalCompletion:"15/20",continuousDays:12},f=[{id:1,name:"",icon:"fa-book",type:"Markdown",url:".md",image:"https://images.unsplash.com/photo-1589998059171-988d887df646?w=400&h=200&fit=crop",description:"",duration:"10",difficulty:""},{id:2,name:"",icon:"fa-video",type:"",url:"https://e.necibook.com/api/media/api/v1/media/showImage/2021823151676293120",image:"https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=400&h=200&fit=crop",description:"",duration:"8",difficulty:""},{id:3,name:"",icon:"fa-calculator",type:"",url:"MotorParameterCalculator",image:"https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=400&h=200&fit=crop",description:"",duration:"10",difficulty:""}],p=[{id:"root",name:"",category:5,level:"L0",status:"mastered",score:100,x:400,y:50},{id:"category-0",name:"",category:5,level:"L1",status:"mastered",score:90,x:200,y:150},{id:"category-1",name:"",category:5,level:"L1",status:"good",score:80,x:400,y:150},{id:"category-2",name:"",category:5,level:"L1",status:"good",score:75,x:600,y:150},{id:"category-3",name:"",category:5,level:"L1",status:"good",score:78,x:300,y:250},{id:"category-4",name:"",category:5,level:"L1",status:"weak",score:65,x:500,y:250},{id:"skill-001",name:"",category:0,level:"L2",status:"mastered",score:95,x:300,y:100},{id:"skill-002",name:"",category:0,level:"L2",status:"good",score:82,x:450,y:150},{id:"skill-003",name:"",category:0,level:"L3",status:"good",score:78,x:600,y:200},{id:"skill-004",name:"SOC",category:0,level:"L3",status:"weak",score:65,x:350,y:200},{id:"skill-005",name:"SOH",category:0,level:"L3",status:"weak",score:62,x:500,y:250},{id:"skill-006",name:"",category:0,level:"L4",status:"veryWeak",score:45,x:250,y:250},{id:"skill-007",name:"",category:0,level:"L2",status:"good",score:76,x:400,y:300},{id:"skill-008",name:"PACK",category:0,level:"L4",status:"veryWeak",score:40,x:550,y:350},{id:"skill-009",name:"",category:0,level:"L2",status:"good",score:79,x:200,y:150},{id:"skill-010",name:"",category:0,level:"L3",status:"weak",score:68,x:650,y:250},{id:"skill-011",name:"",category:0,level:"L2",status:"good",score:81,x:300,y:250},{id:"skill-012",name:"",category:0,level:"L2",status:"mastered",score:90,x:450,y:100},{id:"skill-013",name:"",category:0,level:"L4",status:"veryWeak",score:35,x:600,y:150},{id:"skill-014",name:"",category:0,level:"L3",status:"weak",score:63,x:250,y:200},{id:"skill-015",name:"",category:0,level:"L2",status:"good",score:75,x:500,y:100},{id:"skill-016",name:"",category:1,level:"L3",status:"weak",score:65,x:300,y:300},{id:"skill-017",name:"",category:1,level:"L2",status:"good",score:80,x:450,y:350},{id:"skill-018",name:"",category:1,level:"L2",status:"good",score:77,x:600,y:400},{id:"skill-019",name:"",category:1,level:"L4",status:"veryWeak",score:42,x:350,y:400},{id:"skill-020",name:"",category:1,level:"L3",status:"weak",score:61,x:500,y:450},{id:"skill-021",name:"",category:1,level:"L3",status:"weak",score:67,x:250,y:350},{id:"skill-022",name:"",category:1,level:"L4",status:"veryWeak",score:38,x:650,y:450},{id:"skill-023",name:"",category:1,level:"L3",status:"weak",score:59,x:400,y:450},{id:"skill-024",name:"",category:1,level:"L3",status:"weak",score:64,x:200,y:400},{id:"skill-025",name:"",category:1,level:"L2",status:"good",score:74,x:550,y:500},{id:"skill-026",name:"",category:1,level:"L2",status:"good",score:78,x:300,y:400},{id:"skill-027",name:"NVH",category:1,level:"L4",status:"veryWeak",score:35,x:500,y:550},{id:"skill-028",name:"",category:1,level:"L3",status:"weak",score:60,x:250,y:450},{id:"skill-029",name:"",category:1,level:"L3",status:"weak",score:58,x:600,y:500},{id:"skill-030",name:"",category:1,level:"L3",status:"weak",score:63,x:350,y:500},{id:"skill-031",name:"CAN",category:2,level:"L2",status:"mastered",score:92,x:600,y:300},{id:"skill-032",name:"CAN",category:2,level:"L2",status:"good",score:81,x:450,y:350},{id:"skill-033",name:"CAN",category:2,level:"L3",status:"weak",score:65,x:300,y:400},{id:"skill-034",name:"LIN",category:2,level:"L2",status:"good",score:77,x:550,y:400},{id:"skill-035",name:"",category:2,level:"L3",status:"veryWeak",score:45,x:250,y:450},{id:"skill-036",name:"",category:2,level:"L4",status:"veryWeak",score:38,x:500,y:450},{id:"skill-037",name:"",category:2,level:"L3",status:"weak",score:61,x:350,y:500},{id:"skill-038",name:"UDS",category:2,level:"L3",status:"weak",score:59,x:600,y:450},{id:"skill-039",name:"",category:2,level:"L2",status:"good",score:76,x:200,y:500},{id:"skill-040",name:"CAN FD",category:2,level:"L3",status:"weak",score:57,x:400,y:550},{id:"skill-041",name:"",category:2,level:"L3",status:"weak",score:62,x:550,y:550},{id:"skill-042",name:"",category:2,level:"L3",status:"weak",score:58,x:300,y:550},{id:"skill-043",name:"",category:2,level:"L2",status:"good",score:79,x:450,y:500},{id:"skill-044",name:"",category:2,level:"L4",status:"veryWeak",score:40,x:650,y:550},{id:"skill-045",name:"",category:2,level:"L2",status:"good",score:74,x:250,y:550},{id:"skill-046",name:"",category:3,level:"L2",status:"good",score:79,x:300,y:500},{id:"skill-047",name:"",category:3,level:"L3",status:"weak",score:63,x:450,y:550},{id:"skill-048",name:"",category:3,level:"L2",status:"good",score:75,x:600,y:600},{id:"skill-049",name:"",category:3,level:"L2",status:"mastered",score:90,x:250,y:600},{id:"skill-050",name:"",category:3,level:"L3",status:"weak",score:61,x:500,y:650},{id:"skill-051",name:"",category:3,level:"L2",status:"good",score:77,x:350,y:650},{id:"skill-052",name:"",category:3,level:"L3",status:"weak",score:59,x:550,y:700},{id:"skill-053",name:"",category:3,level:"L4",status:"veryWeak",score:35,x:200,y:650},{id:"skill-054",name:"",category:3,level:"L3",status:"weak",score:64,x:400,y:700},{id:"skill-055",name:"",category:3,level:"L2",status:"good",score:81,x:650,y:650},{id:"skill-056",name:"",category:3,level:"L3",status:"weak",score:60,x:300,y:700},{id:"skill-057",name:"V2G",category:3,level:"L4",status:"veryWeak",score:38,x:450,y:750},{id:"skill-058",name:"",category:3,level:"L3",status:"weak",score:58,x:500,y:750},{id:"skill-059",name:"",category:3,level:"L2",status:"good",score:76,x:250,y:700},{id:"skill-060",name:"",category:3,level:"L2",status:"good",score:74,x:600,y:750},{id:"skill-061",name:"",category:4,level:"L2",status:"weak",score:68,x:450,y:550},{id:"skill-062",name:"",category:4,level:"L3",status:"weak",score:65,x:300,y:600},{id:"skill-063",name:"",category:4,level:"L3",status:"weak",score:62,x:550,y:600},{id:"skill-064",name:"",category:4,level:"L2",status:"good",score:77,x:200,y:650},{id:"skill-065",name:"",category:4,level:"L2",status:"good",score:75,x:400,y:650},{id:"skill-066",name:"",category:4,level:"L3",status:"weak",score:59,x:650,y:700},{id:"skill-067",name:"",category:4,level:"L3",status:"weak",score:61,x:350,y:700},{id:"skill-068",name:"",category:4,level:"L4",status:"veryWeak",score:42,x:500,y:700},{id:"skill-069",name:"",category:4,level:"L3",status:"weak",score:60,x:250,y:750},{id:"skill-070",name:"",category:4,level:"L2",status:"good",score:74,x:450,y:800},{id:"skill-071",name:"",category:4,level:"L3",status:"weak",score:58,x:600,y:800},{id:"skill-072",name:"",category:4,level:"L2",status:"good",score:76,x:300,y:800}],m=[{source:"root",target:"category-0"},{source:"root",target:"category-1"},{source:"root",target:"category-2"},{source:"root",target:"category-3"},{source:"root",target:"category-4"},{source:"category-0",target:"skill-001"},{source:"category-0",target:"skill-002"},{source:"category-0",target:"skill-003"},{source:"category-0",target:"skill-004"},{source:"category-0",target:"skill-005"},{source:"category-0",target:"skill-006"},{source:"category-0",target:"skill-007"},{source:"category-0",target:"skill-008"},{source:"category-0",target:"skill-009"},{source:"category-0",target:"skill-010"},{source:"category-0",target:"skill-011"},{source:"category-0",target:"skill-012"},{source:"category-0",target:"skill-013"},{source:"category-0",target:"skill-014"},{source:"category-0",target:"skill-015"},{source:"category-1",target:"skill-016"},{source:"category-1",target:"skill-017"},{source:"category-1",target:"skill-018"},{source:"category-1",target:"skill-019"},{source:"category-1",target:"skill-020"},{source:"category-1",target:"skill-021"},{source:"category-1",target:"skill-022"},{source:"category-1",target:"skill-023"},{source:"category-1",target:"skill-024"},{source:"category-1",target:"skill-025"},{source:"category-1",target:"skill-026"},{source:"category-1",target:"skill-027"},{source:"category-1",target:"skill-028"},{source:"category-1",target:"skill-029"},{source:"category-1",target:"skill-030"},{source:"category-2",target:"skill-031"},{source:"category-2",target:"skill-032"},{source:"category-2",target:"skill-033"},{source:"category-2",target:"skill-034"},{source:"category-2",target:"skill-035"},{source:"category-2",target:"skill-036"},{source:"category-2",target:"skill-037"},{source:"category-2",target:"skill-038"},{source:"category-2",target:"skill-039"},{source:"category-2",target:"skill-040"},{source:"category-2",target:"skill-041"},{source:"category-2",target:"skill-042"},{source:"category-2",target:"skill-043"},{source:"category-2",target:"skill-044"},{source:"category-2",target:"skill-045"},{source:"category-3",target:"skill-046"},{source:"category-3",target:"skill-047"},{source:"category-3",target:"skill-048"},{source:"category-3",target:"skill-049"},{source:"category-3",target:"skill-050"},{source:"category-3",target:"skill-051"},{source:"category-3",target:"skill-052"},{source:"category-3",target:"skill-053"},{source:"category-3",target:"skill-054"},{source:"category-3",target:"skill-055"},{source:"category-3",target:"skill-056"},{source:"category-3",target:"skill-057"},{source:"category-3",target:"skill-058"},{source:"category-3",target:"skill-059"},{source:"category-3",target:"skill-060"},{source:"category-4",target:"skill-061"},{source:"category-4",target:"skill-062"},{source:"category-4",target:"skill-063"},{source:"category-4",target:"skill-064"},{source:"category-4",target:"skill-065"},{source:"category-4",target:"skill-066"},{source:"category-4",target:"skill-067"},{source:"category-4",target:"skill-068"},{source:"category-4",target:"skill-069"},{source:"category-4",target:"skill-070"},{source:"category-4",target:"skill-071"},{source:"category-4",target:"skill-072"}],g={mastered:"#722ed1",good:"#1890ff",weak:"#faad14",veryWeak:"#f5222d",notLearned:"#bfbfbf"};ee.useEffect(()=>{if(c.current){window.toggleFilter=V=>{a(G=>({...G,[V]:!G[V]}))},h.current=ife(c.current),v(),h.current.on("click",V=>{if(V.dataType==="node"){const G={id:V.data.id,name:V.data.name,status:V.data.status,score:V.data.score,category:0,level:"L2",x:0,y:0};r(G),e(!0)}});const k=()=>{var V;(V=h.current)==null||V.resize()};return window.addEventListener("resize",k),()=>{var V;delete window.toggleFilter,window.removeEventListener("resize",k),(V=h.current)==null||V.dispose()}}},[]),ee.useEffect(()=>{v()},[i]);const v=()=>{if(!h.current)return;const k=p.filter(F=>F.level==="L0"||F.level==="L1"?!0:!(F.status==="mastered"&&!i.mastered||F.status==="good"&&!i.good||F.status==="weak"&&!i.weak||F.status==="veryWeak"&&!i.veryWeak||F.status==="notLearned"&&!i.notLearned)),V=m.filter(F=>{const X=k.some(Q=>Q.id===F.source),j=k.some(Q=>Q.id===F.target);return X&&j}),G={tooltip:{trigger:"item",formatter:function(F){if(F.dataType==="node"){const X=F.data.status,j={mastered:"",good:"",weak:"",veryWeak:"",notLearned:""}[X];let Q="";if(F.data.id==="root")Q="";else if(F.data.id.startsWith("category-"))Q=F.data.name;else if(F.data.id.startsWith("skill-")){const H=F.data.id;H>="skill-001"&&H<="skill-015"?Q="":H>="skill-016"&&H<="skill-030"?Q="":H>="skill-031"&&H<="skill-045"?Q="":H>="skill-046"&&H<="skill-060"?Q="":H>="skill-061"&&H<="skill-072"&&(Q="")}return`
              <div style="font-weight: bold; margin-bottom: 4px;">${F.data.name}</div>
              <div>: ${j}</div>
              <div>: ${F.data.score||"-"}</div>
              <div>: ${Q}</div>
            `}return""}},graphic:[{type:"group",left:10,top:20,children:[{type:"rect",shape:{width:150,height:200},style:{fill:"white",stroke:"#ddd",lineWidth:1}},{type:"text",left:15,top:15,style:{text:"",fontSize:14,fontWeight:"bold",fill:"#333"}},{type:"group",left:15,top:45,children:[{type:"circle",shape:{cx:0,cy:0,r:6},style:{fill:"#722ed1"},onclick:function(){window.toggleFilter("mastered")}},{type:"text",left:15,top:0,style:{text:` (${E.mastered})`,fontSize:12,fill:i.mastered?"#333":"#999"},onclick:function(){window.toggleFilter("mastered")}}]},{type:"group",left:15,top:75,children:[{type:"circle",shape:{cx:0,cy:0,r:6},style:{fill:"#1890ff"},onclick:function(){window.toggleFilter("good")}},{type:"text",left:15,top:0,style:{text:` (${E.good})`,fontSize:12,fill:i.good?"#333":"#999"},onclick:function(){window.toggleFilter("good")}}]},{type:"group",left:15,top:105,children:[{type:"circle",shape:{cx:0,cy:0,r:6},style:{fill:"#faad14"},onclick:function(){window.toggleFilter("weak")}},{type:"text",left:15,top:0,style:{text:` (${E.weak})`,fontSize:12,fill:i.weak?"#333":"#999"},onclick:function(){window.toggleFilter("weak")}}]},{type:"group",left:15,top:135,children:[{type:"circle",shape:{cx:0,cy:0,r:6},style:{fill:"#f5222d"},onclick:function(){window.toggleFilter("veryWeak")}},{type:"text",left:15,top:0,style:{text:` (${E.veryWeak})`,fontSize:12,fill:i.veryWeak?"#333":"#999"},onclick:function(){window.toggleFilter("veryWeak")}}]},{type:"group",left:15,top:165,children:[{type:"circle",shape:{cx:0,cy:0,r:6},style:{fill:"#bfbfbf"},onclick:function(){window.toggleFilter("notLearned")}},{type:"text",left:15,top:0,style:{text:` (${E.notLearned})`,fontSize:12,fill:i.notLearned?"#333":"#999"},onclick:function(){window.toggleFilter("notLearned")}}]}]}],animationDurationUpdate:1500,animationEasingUpdate:"cubicInOut",series:[{type:"graph",layout:"force",data:k.map(F=>({id:F.id,name:F.name,status:F.status,score:F.score,itemStyle:{color:g[F.status]},symbolSize:F.level==="L0"?50:F.level==="L1"?40:30,x:Math.random()*800+200,y:Math.random()*400+250})),links:V,roam:!0,label:{show:!0,position:"right",formatter:"{b}"},lineStyle:{color:"source",curveness:.3},emphasis:{focus:"adjacency",lineStyle:{width:4}},force:{repulsion:600,edgeLength:100,gravity:.2,layoutAnimation:!0}}]};h.current.setOption(G)},b=()=>{e(!1),r(null)},S=({url:k})=>{const V=ee.useRef(null),[G,F]=ee.useState(!0),[X,j]=ee.useState(null),[Q,H]=ee.useState(0);return ee.useEffect(()=>{(async()=>{try{F(!0),j(null);const te=await L_e(k).promise;H(te.numPages);const Y=await te.getPage(1),de=Y.getViewport({scale:1.5}),ge=V.current;if(!ge)return;const se=ge.getContext("2d");if(!se)return;ge.height=de.height,ge.width=de.width,await Y.render({canvasContext:se,viewport:de,canvas:ge}).promise,F(!1)}catch(te){console.error("PDF:",te),j("PDF"),F(!1)}})()},[k]),G?C.jsx("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[var(--brand-pink)] mx-auto mb-4"}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:"PDF..."})]})}):X?C.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",children:C.jsxs("div",{className:"text-center",children:[C.jsx("i",{className:"fa-solid fa-file-pdf text-red-500 text-6xl mb-4"}),C.jsx("p",{className:"text-[var(--text-secondary)] mb-4",children:X})]})}):C.jsxs("div",{className:"w-full h-full overflow-auto",children:[C.jsx("canvas",{ref:V,className:"mx-auto"}),Q>1&&C.jsxs("div",{className:"text-center mt-4 text-sm text-[var(--text-secondary)]",children:[" 1 / ",Q," "]})]})},w=({filePath:k})=>{const[V,G]=ee.useState(!0),[F,X]=ee.useState(null),[j,Q]=ee.useState("");return ee.useEffect(()=>{(async()=>{try{G(!0),X(null),Q(`# 

## 

1. 
2. 
3. 
4. 

## 

### 

13  45 

### 

 / 

### 

1. 
2. 
3. 

## 

### 

####  1



####  2



####  3

 USB 

### 

####  4 DC 

13  DC 

####  5

 PTC 

####  6



####  7



####  8



####  9



####  10

10 

####  11



####  12

13 

####  13

13 

### 

####  14

 45 

####  15



####  16



####  17



####  18



####  19



####  20

PTC 

####  21 DC 12 

 DC 12 

####  22

 USB 

### 

####  23



## 

1. 
2. 
3.  45 
4. 
5. 
6. 

## 

1. 
2. 
3. 
4. `),G(!1)}catch(K){console.error("Markdown:",K),X("Markdown"),G(!1)}})()},[k]),V?C.jsx("div",{className:"w-full h-full flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[var(--brand-pink)] mx-auto mb-4"}),C.jsx("p",{className:"text-[var(--text-secondary)]",children:"Markdown..."})]})}):F?C.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",children:C.jsxs("div",{className:"text-center",children:[C.jsx("i",{className:"fa-solid fa-file-lines text-[var(--brand-pink)] text-6xl mb-4"}),C.jsx("p",{className:"text-[var(--text-secondary)] mb-4",children:F})]})}):C.jsx("div",{className:"prose max-w-none",children:C.jsx(aye,{remarkPlugins:[dxe],rehypePlugins:[Hye],children:j})})},E={mastered:p.filter(k=>k.status==="mastered"&&k.level!=="L0"&&k.level!=="L1").length,good:p.filter(k=>k.status==="good"&&k.level!=="L0"&&k.level!=="L1").length,weak:p.filter(k=>k.status==="weak"&&k.level!=="L0"&&k.level!=="L1").length,veryWeak:p.filter(k=>k.status==="veryWeak"&&k.level!=="L0"&&k.level!=="L1").length,notLearned:p.filter(k=>k.status==="notLearned"&&k.level!=="L0"&&k.level!=="L1").length},[T,M]=ee.useState(0),P=p.filter(k=>k.status==="veryWeak").sort((k,V)=>k.score-V.score),I=()=>{M(k=>(k+1)%P.length)},D=P[T],B=f;return C.jsxs("div",{className:"p-6 h-[calc(100vh-100px)] max-w-7xl mx-auto",children:[C.jsxs("div",{className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 mb-6",children:[C.jsx("h2",{className:"text-xl font-medium text-[var(--text-primary)] mb-6",children:""}),C.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[12px] p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-[var(--text-secondary)] text-sm",children:""}),C.jsx("i",{className:"fa-solid fa-clock text-[var(--brand-pink)]"})]}),C.jsxs("div",{className:"text-2xl font-medium text-[var(--text-primary)]",children:[d.totalStudyTime,""]}),C.jsxs("div",{className:"text-xs text-green-500 flex items-center mt-1",children:[C.jsx("i",{className:"fa-solid fa-arrow-up mr-1"}),"12%"]})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[12px] p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-[var(--text-secondary)] text-sm",children:""}),C.jsx("i",{className:"fa-solid fa-check-circle text-[var(--brand-pink)]"})]}),C.jsxs("div",{className:"text-2xl font-medium text-[var(--text-primary)]",children:[d.completedCourses,""]}),C.jsxs("div",{className:"text-xs text-green-500 flex items-center mt-1",children:[C.jsx("i",{className:"fa-solid fa-arrow-up mr-1"}),"3"]})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[12px] p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-[var(--text-secondary)] text-sm",children:""}),C.jsx("i",{className:"fa-solid fa-chart-pie text-[var(--brand-pink)]"})]}),C.jsxs("div",{className:"text-2xl font-medium text-[var(--text-primary)]",children:[d.skillMasteryRate,"%"]}),C.jsxs("div",{className:"text-xs text-green-500 flex items-center mt-1",children:[C.jsx("i",{className:"fa-solid fa-arrow-up mr-1"}),"5%"]})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[12px] p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-[var(--text-secondary)] text-sm",children:""}),C.jsx("i",{className:"fa-solid fa-tools text-[var(--brand-pink)]"})]}),C.jsxs("div",{className:"text-2xl font-medium text-[var(--text-primary)]",children:[d.practicalCompletion,""]}),C.jsxs("div",{className:"text-xs text-[var(--text-secondary)] flex items-center mt-1",children:[C.jsx("i",{className:"fa-solid fa-minus mr-1"}),""]})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[12px] p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("span",{className:"text-[var(--text-secondary)] text-sm",children:""}),C.jsx("i",{className:"fa-solid fa-fire text-[var(--brand-pink)]"})]}),C.jsxs("div",{className:"text-2xl font-medium text-[var(--text-primary)]",children:[d.continuousDays,""]}),C.jsxs("div",{className:"text-xs text-yellow-500 flex items-center mt-1",children:[C.jsx("i",{className:"fa-solid fa-fire mr-1"}),""]})]})]})]}),C.jsxs("div",{className:"flex gap-6",children:[C.jsxs("div",{className:"bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-4 w-80 flex-shrink-0",children:[C.jsx("h3",{className:"text-lg font-medium text-[var(--text-primary)] mb-6",children:""}),C.jsxs("div",{className:"mb-6",children:[C.jsxs("div",{className:"flex justify-between items-center mb-3",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-secondary)]",children:""}),P.length>1&&C.jsxs("button",{onClick:I,className:"text-xs text-[var(--brand-pink)] hover:underline flex items-center",children:[C.jsx("i",{className:"fa-solid fa-refresh mr-1"}),""]})]}),C.jsx("div",{className:"space-y-3",children:D&&C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[8px] p-3",children:[C.jsxs("div",{className:"flex justify-between items-center mb-1",children:[C.jsx("span",{className:"text-sm font-medium text-[var(--text-primary)]",children:D.name}),C.jsx("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full",children:""})]}),C.jsxs("div",{className:"text-xs text-[var(--text-secondary)]",children:[": ",D.score]})]},D.id)})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-secondary)] mb-3",children:""}),C.jsx("div",{className:"space-y-3",children:B.map(k=>C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[8px] overflow-hidden cursor-pointer hover:bg-[var(--bg-secondary)] transition-colors relative",onClick:()=>{u(k),o(!0)},children:[C.jsxs("div",{className:"relative h-24 overflow-hidden",children:[C.jsx("img",{src:k.image,alt:k.name,className:"w-full h-full object-cover"}),C.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 bg-black/50 text-white text-xs rounded-full",children:[C.jsx("i",{className:`fa-solid ${k.icon} mr-1`}),k.type]})]}),C.jsx("div",{className:"p-3",children:C.jsx("div",{className:"flex items-center",children:C.jsx("span",{className:"text-sm font-medium text-[var(--text-primary)]",children:k.name})})}),C.jsx("button",{className:"absolute bottom-3 right-3 px-3 py-1.5 bg-[var(--brand-pink)] text-white text-xs font-medium rounded-[6px] hover:bg-pink-600 transition-colors shadow-sm",onClick:V=>{V.stopPropagation(),u(k),o(!0)},children:""})]},k.id))})]})]}),C.jsxs("div",{className:"flex-1 bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-4",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("h3",{className:"text-lg font-medium text-[var(--text-primary)]",children:""}),C.jsxs("div",{className:"flex items-center bg-[var(--bg-primary)] rounded-[8px] p-2 shadow-sm",children:[C.jsx("i",{className:"fa-solid fa-circle-info text-[var(--text-secondary)] mr-2"}),C.jsx("p",{className:"text-xs text-[var(--text-secondary)]",children:"AI"})]})]}),C.jsx("div",{ref:c,style:{width:"100%",height:"600px"}})]})]}),n&&t&&C.jsxs("div",{className:"fixed inset-0 z-50",children:[C.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:b}),C.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-[480px] bg-white p-6 overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between mb-6",children:[C.jsx("h3",{className:"text-xl font-medium text-[var(--text-primary)]",children:t.name}),C.jsx("button",{onClick:b,className:"text-[var(--text-secondary)] hover:text-[var(--text-primary)]",children:C.jsx("i",{className:"fa-solid fa-times text-xl"})})]}),C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[12px] p-4 mb-6",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsx("span",{className:"text-sm text-[var(--text-secondary)]",children:""}),C.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.status==="mastered"?"bg-purple-100 text-purple-700":t.status==="good"?"bg-blue-100 text-blue-700":t.status==="weak"?"bg-yellow-100 text-yellow-700":t.status==="veryWeak"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:t.status==="mastered"?"":t.status==="good"?"":t.status==="weak"?"":t.status==="veryWeak"?"":""})]}),C.jsx("div",{className:"flex items-center justify-center",children:C.jsxs("div",{className:"relative w-40 h-40",children:[C.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[C.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e6e6e6",strokeWidth:"10"}),C.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:g[t.status],strokeWidth:"10",strokeLinecap:"round",strokeDasharray:`${t.score/100*283} 283`,transform:"rotate(-90 50 50)"})]}),C.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[C.jsxs("div",{className:"text-3xl font-bold text-[var(--text-primary)]",children:[t.score,"%"]}),C.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:""})]})]})})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h4",{className:"text-lg font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsxs("p",{className:"text-[var(--text-secondary)]",children:["",t.name," ",t.name,""]})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h4",{className:"text-lg font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"bg-[var(--bg-primary)] rounded-[8px] p-3",children:C.jsxs("ul",{className:"list-disc list-inside text-[var(--text-secondary)] space-y-2",children:[C.jsxs("li",{children:["",t.name,""]}),C.jsx("li",{children:""}),C.jsx("li",{children:""}),C.jsx("li",{children:""})]})})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-lg font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"space-y-3",children:[{id:101,name:`${t.name}`,icon:"fa-book",type:"Markdown",url:".md",image:"https://images.unsplash.com/photo-1589998059171-988d887df646?w=400&h=200&fit=crop",description:`${t.name}`,duration:"130",difficulty:""},{id:102,name:`${t.name}`,icon:"fa-video",type:"",url:"https://e.necibook.com/api/media/api/v1/media/showImage/2021823151676293120",image:"https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=400&h=200&fit=crop",description:`${t.name}`,duration:"30",difficulty:""},{id:103,name:`${t.name}`,icon:"fa-tools",type:"",url:"MotorParameterCalculator",image:"https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=400&h=200&fit=crop",description:`${t.name}`,duration:"2",difficulty:""}].map(k=>C.jsxs("div",{className:"bg-[var(--bg-primary)] rounded-[8px] p-3 cursor-pointer hover:bg-[var(--bg-secondary)] transition-colors relative",onClick:()=>{u(k),o(!0)},children:[C.jsxs("div",{className:"flex items-center mb-2",children:[C.jsx("i",{className:`fa-solid ${k.icon} text-[var(--brand-pink)] mr-2`}),C.jsx("span",{className:"text-sm font-medium text-[var(--text-primary)]",children:k.name})]}),C.jsx("div",{className:"text-xs text-[var(--text-secondary)]",children:k.type==="Markdown"?"":k.type===""?"":""}),C.jsx("button",{className:"absolute bottom-3 right-3 px-3 py-1 bg-[var(--brand-pink)] text-white text-xs font-medium rounded-[6px] hover:bg-pink-600 transition-colors shadow-sm",onClick:V=>{V.stopPropagation(),u(k),o(!0)},children:""})]},k.id))})]})]})]}),s&&l&&C.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[C.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>o(!1)}),C.jsxs("div",{className:"relative bg-white rounded-[16px] shadow-[0_8px_24px_rgba(255,143,163,0.12)] p-6 w-[80vw] max-w-[1000px] max-h-[90vh] overflow-y-auto",children:[C.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 text-[var(--text-secondary)] hover:text-[var(--text-primary)] z-10",children:C.jsx("i",{className:"fa-solid fa-times text-xl"})}),C.jsx("div",{className:"mb-4",children:C.jsx("h3",{className:"text-xl font-medium text-[var(--text-primary)]",children:l.name})}),C.jsx("div",{className:"mb-6",children:C.jsxs("div",{className:"flex flex-wrap gap-4",children:[C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-tag text-[var(--text-secondary)] mr-2"}),C.jsxs("span",{className:"text-sm text-[var(--text-secondary)]",children:[": ",l.type]})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-clock text-[var(--text-secondary)] mr-2"}),C.jsxs("span",{className:"text-sm text-[var(--text-secondary)]",children:[": ",l.duration]})]}),C.jsxs("div",{className:"flex items-center",children:[C.jsx("i",{className:"fa-solid fa-signal text-[var(--text-secondary)] mr-2"}),C.jsxs("span",{className:"text-sm text-[var(--text-secondary)]",children:[": ",l.difficulty]})]})]})}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("p",{className:"text-sm text-[var(--text-secondary)] leading-relaxed",children:l.description})]}),l.type===""&&C.jsxs("div",{className:"mb-4",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"h-[60vh] border border-[var(--text-secondary)]/30 rounded-[8px] overflow-hidden",children:C.jsx(S,{url:l.url})}),C.jsx("div",{className:"mt-4",children:C.jsxs("a",{href:l.url,download:!0,className:"text-sm text-[var(--brand-pink)] hover:underline flex items-center",children:[C.jsx("i",{className:"fa-solid fa-download mr-2"}),""]})})]}),l.type==="Markdown"&&C.jsxs("div",{className:"mb-4",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"h-[60vh] border border-[var(--text-secondary)]/30 rounded-[8px] overflow-y-auto p-6",children:C.jsx(w,{filePath:l.url})})]}),l.type===""&&C.jsxs("div",{className:"mb-4",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"h-[60vh] border border-[var(--text-secondary)]/30 rounded-[8px] overflow-hidden flex items-center justify-center",children:C.jsx("video",{src:l.url,className:"w-full h-full object-contain",title:l.name,controls:!0,controlsList:"nodownload",children:""})})]}),l.type===""&&C.jsxs("div",{className:"mb-4",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"h-[60vh] border border-[var(--text-secondary)]/30 rounded-[8px] overflow-hidden",children:C.jsx("iframe",{src:l.url,className:"w-full h-full",title:l.name})})]}),l.type===""&&l.url==="MotorParameterCalculator"&&C.jsxs("div",{className:"mb-4",children:[C.jsx("h4",{className:"text-sm font-medium text-[var(--text-primary)] mb-2",children:""}),C.jsx("div",{className:"h-[60vh] border border-[var(--text-secondary)]/30 rounded-[8px] overflow-auto",children:C.jsx(ove,{})})]})]})]})]})}function imt(){const[n,e]=ee.useState("theory"),[t,r]=ee.useState(""),[i,a]=ee.useState("theory"),s=[{id:"theory",label:""},{id:"simulation",label:""},{id:"training",label:""},{id:"profile",label:""},{id:"certification",label:""}],o=()=>{switch(n){case"theory":return C.jsx("div",{className:"h-full",children:C.jsxs("div",{className:"flex gap-[5px] w-full h-[calc(100vh-100px)] max-w-7xl mx-auto",children:[C.jsx("div",{className:"w-64 flex-shrink-0 h-full",children:C.jsx(mDe,{onContentSelect:a})}),C.jsx("div",{className:"flex-1 h-full",children:i==="training"?C.jsx(DPe,{onSelectText:r}):C.jsx(Trt,{onSelectText:r})}),C.jsx("div",{className:"w-80 flex-shrink-0 h-full",children:C.jsx(eft,{selectedText:t})})]})});case"simulation":return C.jsx("div",{className:"h-full",children:C.jsx(nft,{})});case"training":return C.jsx("div",{className:"h-full",children:C.jsx(ift,{})});case"certification":return C.jsx("div",{className:"h-full",children:C.jsx(aft,{})});case"profile":return C.jsx("div",{className:"h-full",children:C.jsx(rmt,{})});default:return null}};return C.jsxs("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[C.jsx("div",{className:"sticky top-0 z-10 py-4 px-3 backdrop-blur-sm bg-[var(--bg-primary)]/90",children:C.jsx("div",{className:"flex justify-center",children:C.jsx("div",{className:"flex bg-white/60 p-2 rounded-full shadow-sm",children:s.map(l=>C.jsx(Kn.button,{onClick:()=>e(l.id),className:DE("px-5 py-2 rounded-full transition-all duration-200",n===l.id?"bg-white text-[var(--brand-pink)] font-medium shadow-[0_4px_12px_rgba(255,143,163,0.25)]":"text-[var(--text-secondary)] hover:bg-white/50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:l.label},l.id))})})}),C.jsx("div",{className:"px-3",children:o()})]})}const amt=ee.createContext({isAuthenticated:!1,setIsAuthenticated:n=>{},logout:()=>{}});function smt(){const[n,e]=ee.useState(!1),t=()=>{e(!1)};return C.jsx(amt.Provider,{value:{isAuthenticated:n,setIsAuthenticated:e,logout:t},children:C.jsxs(wwe,{children:[C.jsx(hU,{path:"/",element:C.jsx(imt,{})}),C.jsx(hU,{path:"/other",element:C.jsx("div",{className:"text-center text-xl",children:"Other Page - Coming Soon"})})]})})}ESe.createRoot(document.getElementById("root")).render(C.jsx(ee.StrictMode,{children:C.jsxs($we,{children:[C.jsx(smt,{}),C.jsx(PTe,{})]})}));
